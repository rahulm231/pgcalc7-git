if(!window.ComponentArt_Grid_Callback_Loaded){window.ComponentArt_Grid.prototype.LoadTemplates=function(_1){for(var i=0;i<_1.length;i++){var _3=_1.item(i);var _4=_3.firstChild.nodeValue;var _5=_4.replace(/\$\$\$CART_CDATA_CLOSE\$\$\$/g,"]]>");var _6=document.getElementById(this.Id+"_ServerTemplates");var _7=document.createElement("div");_7.id=_3.nodeName;_7.innerHTML=_5;_6.appendChild(_7);}};window.ComponentArt_Grid.prototype.LoadToCache=function(_8,_9){var _a=eval(_8[0].nodeValue);if(this.PageCache){var _b=_9;for(var i=0;i<_a.length;i+=this.PageSize){var _d=_a.slice(i,i+this.PageSize);this.PageCache[_b]=[new Date(),_d];_b++;}this.UnloadOldestFromCache();}};window.ComponentArt_Grid.prototype.LoadData=function(_e){var _f=eval(_e[0].nodeValue);if(this.PageCache&&_f.length>this.PageSize){var _10=this.CurrentPageIndex+1;for(var i=this.PageSize;i<_f.length;i+=this.PageSize){var _12=_f.slice(i,i+this.PageSize);this.PageCache[_10]=[new Date(),_12];_10++;}this.UnloadOldestFromCache();}return _f;};window.ComponentArt_Grid.prototype.SetParams=function(_13){for(var _14=0;_14<_13.length;_14++){var _15=_13.item(_14);var _16=_15.nodeName;var _17=_15.firstChild?_15.firstChild.nodeValue:null;this[_16]=eval(_17);}};window.ComponentArt_Grid.prototype.Callback=function(_18,_19,_1a,_1b,_1c){var _1d=(_1c==0||_1c);if(this.CallbackInProgress){return;}else{this.CallbackInProgress=true;}var _1e=this.get_events().getHandler("beforeCallback");if(_1e){var _1f=new Sys.CancelEventArgs();_1e(this,_1f);if(_1f.get_cancel()){return false;}}if(this.ClientSideOnBeforeCallback){this.ClientSideOnBeforeCallback();}if(this.PageCache&&!_1b){this.PageCache=[];}if(!_1a){_1a=this.GetEventList();}if(!_18){_18=0;}var url=this.CallbackPrefix;var _21="";if(_19){_21+="&Cart_"+this.Id+"_Callback_Path="+_19.JoinedPath;}_21+="&Cart_"+this.Id+"_Callback_Level="+_18;_21+="&Cart_"+this.Id+"_Callback_Script="+encodeURIComponent(_1a);if(_1d){_21+="&Cart_"+this.Id+"_Callback_OutOfBand=1";}if(_19){}else{if(this.LoadingPanelEnabled&&!_1d){if(!this.LoadingPanelFadeDuration){this.Data.length=0;}this.Render();}}var _22=document.getElementById(this.Id+"_ServerTemplates");if(_22){_22.innerHTML="";}this.DoCallback(_18,_19,url,_21,_1c);};window.ComponentArt_Grid.prototype.DoCallback=function(_23,_24,url,_26,_27){var _28=this;var _29=false;var _2a=null;function Cleanup(){if(!_24&&_28.TemplateCache){_28.TemplateCache=new Object();}_28.LoadGroups(_28.Groupings);if(_28.AddingRow){_28.Table.Data.push([]);_28.EditingId=_28.Table.GetRow(_28.Table.Data.length-1).ClientId;}if(!_28.EventListObj){_28.EventListObj=document.getElementById(_28.Id+"_EventList");}if(_28.EventListObj){var _2b=["INSERT","ADDROW","UPDATE","DELETE","CHECK","UNCHECK"];for(var i=0;i<_2b.length;i++){_28.EventListObj.value=_28.RemoveEvents(_28.EventListObj.value,_2b[i]);}}_28.CallbackInProgress=false;if(_28.SelfReferencing&&_23<=_28.Levels.length+1){_28.Levels[_28.Levels.length]=_28.Levels[0];}_28.Render();var _2d=_28.get_events().getHandler("callbackComplete");if(_2d){_2d(_28,Sys.EventArgs.Empty);}if(_28.ClientSideOnAfterCallback){setTimeout(_28.Id+".ClientSideOnAfterCallback()",10);}if(_28.AfterCallbackEventHandler){_28.AfterCallbackEventHandler(_28,_28.AfterCallbackEventArgs);_28.AfterCallbackEventHandler=null;_28.AfterCallbackEventArgs=null;}}function _q18C(){if(_2a.readyState&&_2a.readyState!=4&&_2a.readyState!="complete"){return;}var _2e=_2a.responseText;if(_28.Debug){if(_2e){alert("Received content:\n"+_2e);}}if(_29){_2a=_2a.responseXML;}if(_2a&&_2a.documentElement){if(_2a.documentElement.childNodes.length==3){var _2f=_2a.documentElement.childNodes[0].childNodes;var _30=_2a.documentElement.childNodes[1].childNodes;var _31=_2a.documentElement.childNodes[2].childNodes;_28.SetParams(_2f);if(_30.length>0){_28.LoadTemplates(_30);}if(_24){_24.Data[_28.Levels[_24.Level].Columns.length]=_28.LoadData(_31);}else{if(_27||_27==0){_28.LoadToCache(_31,_27);}else{_28.Data=_28.LoadData(_31);_28.Table=_28.LoadTable(_28.Data,0,[]);}}Cleanup();}else{Cleanup();var _32=_2a.documentElement.childNodes[0].firstChild.nodeValue;var _33=_28.get_events().getHandler("callbackError");if(_33||_28.ClientSideOnCallbackError){if(_33){_33(_28,new ComponentArt.Web.UI.GridCallbackErrorEventArgs(_32));}if(_28.ClientSideOnCallbackError){_28.ClientSideOnCallbackError(_32);}}else{alert("Callback error:\n"+_32);}}}else{alert("The data could not be loaded.");Cleanup();}}if(this.Debug){alert("Sending callback data:\n"+unescape(_26).replace(/\&/g,"\n").replace(/\;/g,"\n"));}if(window.XMLHttpRequest){_29=true;var _2a=new XMLHttpRequest();_2a.onreadystatechange=_q18C;_2a.open("POST",url,true);_2a.setRequestHeader("Content-Type","application/x-www-form-urlencoded");_2a.send(_26);}else{if(document.implementation&&document.implementation.createDocument){_2a=document.implementation.createDocument("","",null);_2a.onload=_q18C;}else{if(cart_browser_ie){if(window.ActiveXObject){try{_2a=new ActiveXObject("Microsoft.XMLHTTP");_2a.onreadystatechange=_q18C;_2a.open("POST",url,true);_2a.setRequestHeader("Content-Type","application/x-www-form-urlencoded");_2a.send(_26);_29=true;}catch(ex){}}if(_2a==null){var _34=this.Id+"_island";var _35=document.getElementById(_34);if(!_35){_35=document.createElement("xml");_35.id=_34;document.body.appendChild(_35);}if(_35.XMLDocument){_2a=_35.XMLDocument;_2a.onreadystatechange=_q18C;}else{return false;}}}else{return false;}}}if(!_29){_2a.async=true;try{_2a.load(url+_26);}catch(ex){Cleanup();alert("Data not loaded: "+(ex.message?ex.message:ex));}}return true;};window.ComponentArt_Grid_Callback_Loaded=true;}
