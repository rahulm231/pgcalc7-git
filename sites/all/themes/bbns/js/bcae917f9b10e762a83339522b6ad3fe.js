FS._jQueryTemp=window.jQuery,window.jQuery=FS.$,/*! jQuery UI - v1.10.3 - 2013-05-03
* http://jqueryui.com
* Includes: jquery.ui.core.js, jquery.ui.widget.js, jquery.ui.mouse.js, jquery.ui.draggable.js, jquery.ui.droppable.js, jquery.ui.resizable.js, jquery.ui.selectable.js, jquery.ui.sortable.js, jquery.ui.effect.js, jquery.ui.accordion.js, jquery.ui.autocomplete.js, jquery.ui.button.js, jquery.ui.datepicker.js, jquery.ui.dialog.js, jquery.ui.effect-blind.js, jquery.ui.effect-bounce.js, jquery.ui.effect-clip.js, jquery.ui.effect-drop.js, jquery.ui.effect-explode.js, jquery.ui.effect-fade.js, jquery.ui.effect-fold.js, jquery.ui.effect-highlight.js, jquery.ui.effect-pulsate.js, jquery.ui.effect-scale.js, jquery.ui.effect-shake.js, jquery.ui.effect-slide.js, jquery.ui.effect-transfer.js, jquery.ui.menu.js, jquery.ui.position.js, jquery.ui.progressbar.js, jquery.ui.slider.js, jquery.ui.spinner.js, jquery.ui.tabs.js, jquery.ui.tooltip.js
* Copyright 2013 jQuery Foundation and other contributors; Licensed MIT */
function(e,t){function i(t,i){var s,o,r,a=t.nodeName.toLowerCase();return"area"===a?(s=t.parentNode,o=s.name,t.href&&o&&"map"===s.nodeName.toLowerCase()?(r=e("img[usemap=#"+o+"]")[0],!!r&&n(r)):!1):(/input|select|textarea|button|object/.test(a)?!t.disabled:"a"===a?t.href||i:i)&&n(t)}function n(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return"hidden"===e.css(this,"visibility")}).length}var s=0,o=/^ui-id-\d+$/;e.ui=e.ui||{},e.extend(e.ui,{version:"1.10.3",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({focus:function(t){return function(i,n){return"number"==typeof i?this.each(function(){var t=this;setTimeout(function(){e(t).focus(),n&&n.call(t)},i)}):t.apply(this,arguments)}}(e.fn.focus),scrollParent:function(){var t;return t=e.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(i){if(i!==t)return this.css("zIndex",i);if(this.length)for(var n,s,o=e(this[0]);o.length&&o[0]!==document;){if(n=o.css("position"),("absolute"===n||"relative"===n||"fixed"===n)&&(s=parseInt(o.css("zIndex"),10),!isNaN(s)&&0!==s))return s;o=o.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++s)})},removeUniqueId:function(){return this.each(function(){o.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(i){return!!e.data(i,t)}}):function(t,i,n){return!!e.data(t,n[3])},focusable:function(t){return i(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var n=e.attr(t,"tabindex"),s=isNaN(n);return(s||n>=0)&&i(t,!s)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(i,n){function s(t,i,n,s){return e.each(o,function(){i-=parseFloat(e.css(t,"padding"+this))||0,n&&(i-=parseFloat(e.css(t,"border"+this+"Width"))||0),s&&(i-=parseFloat(e.css(t,"margin"+this))||0)}),i}var o="Width"===n?["Left","Right"]:["Top","Bottom"],r=n.toLowerCase(),a={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+n]=function(i){return i===t?a["inner"+n].call(this):this.each(function(){e(this).css(r,s(this,i)+"px")})},e.fn["outer"+n]=function(t,i){return"number"!=typeof t?a["outer"+n].call(this,t):this.each(function(){e(this).css(r,s(this,t,!0,i)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(i){return arguments.length?t.call(this,e.camelCase(i)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.support.selectstart="onselectstart"in document.createElement("div"),e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.extend(e.ui,{plugin:{add:function(t,i,n){var s,o=e.ui[t].prototype;for(s in n)o.plugins[s]=o.plugins[s]||[],o.plugins[s].push([i,n[s]])},call:function(e,t,i){var n,s=e.plugins[t];if(s&&e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType)for(n=0;s.length>n;n++)e.options[s[n][0]]&&s[n][1].apply(e.element,i)}},hasScroll:function(t,i){if("hidden"===e(t).css("overflow"))return!1;var n=i&&"left"===i?"scrollLeft":"scrollTop",s=!1;return t[n]>0?!0:(t[n]=1,s=t[n]>0,t[n]=0,s)}})}(jQuery),function(e,t){var i=0,n=Array.prototype.slice,s=e.cleanData;e.cleanData=function(t){for(var i,n=0;null!=(i=t[n]);n++)try{e(i).triggerHandler("remove")}catch(o){}s(t)},e.widget=function(i,n,s){var o,r,a,l,c={},d=i.split(".")[0];i=i.split(".")[1],o=d+"-"+i,s||(s=n,n=e.Widget),e.expr[":"][o.toLowerCase()]=function(t){return!!e.data(t,o)},e[d]=e[d]||{},r=e[d][i],a=e[d][i]=function(e,i){return this._createWidget?(arguments.length&&this._createWidget(e,i),t):new a(e,i)},e.extend(a,r,{version:s.version,_proto:e.extend({},s),_childConstructors:[]}),l=new n,l.options=e.widget.extend({},l.options),e.each(s,function(i,s){return e.isFunction(s)?(c[i]=function(){var e=function(){return n.prototype[i].apply(this,arguments)},t=function(e){return n.prototype[i].apply(this,e)};return function(){var i,n=this._super,o=this._superApply;return this._super=e,this._superApply=t,i=s.apply(this,arguments),this._super=n,this._superApply=o,i}}(),t):(c[i]=s,t)}),a.prototype=e.widget.extend(l,{widgetEventPrefix:r?l.widgetEventPrefix:i},c,{constructor:a,namespace:d,widgetName:i,widgetFullName:o}),r?(e.each(r._childConstructors,function(t,i){var n=i.prototype;e.widget(n.namespace+"."+n.widgetName,a,i._proto)}),delete r._childConstructors):n._childConstructors.push(a),e.widget.bridge(i,a)},e.widget.extend=function(i){for(var s,o,r=n.call(arguments,1),a=0,l=r.length;l>a;a++)for(s in r[a])o=r[a][s],r[a].hasOwnProperty(s)&&o!==t&&(i[s]=e.isPlainObject(o)?e.isPlainObject(i[s])?e.widget.extend({},i[s],o):e.widget.extend({},o):o);return i},e.widget.bridge=function(i,s){var o=s.prototype.widgetFullName||i;e.fn[i]=function(r){var a="string"==typeof r,l=n.call(arguments,1),c=this;return r=!a&&l.length?e.widget.extend.apply(null,[r].concat(l)):r,a?this.each(function(){var n,s=e.data(this,o);return s?e.isFunction(s[r])&&"_"!==r.charAt(0)?(n=s[r].apply(s,l),n!==s&&n!==t?(c=n&&n.jquery?c.pushStack(n.get()):n,!1):t):e.error("no such method '"+r+"' for "+i+" widget instance"):e.error("cannot call methods on "+i+" prior to initialization; attempted to call method '"+r+"'")}):this.each(function(){var t=e.data(this,o);t?t.option(r||{})._init():e.data(this,o,new s(r,this))}),c}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,n){n=e(n||this.defaultElement||this)[0],this.element=e(n),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),n!==this&&(e.data(n,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===n&&this.destroy()}}),this.document=e(n.style?n.ownerDocument:n.document||n),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(i,n){var s,o,r,a=i;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof i)if(a={},s=i.split("."),i=s.shift(),s.length){for(o=a[i]=e.widget.extend({},this.options[i]),r=0;s.length-1>r;r++)o[s[r]]=o[s[r]]||{},o=o[s[r]];if(i=s.pop(),n===t)return o[i]===t?null:o[i];o[i]=n}else{if(n===t)return this.options[i]===t?null:this.options[i];a[i]=n}return this._setOptions(a),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(i,n,s){var o,r=this;"boolean"!=typeof i&&(s=n,n=i,i=!1),s?(n=o=e(n),this.bindings=this.bindings.add(n)):(s=n,n=this.element,o=this.widget()),e.each(s,function(s,a){function l(){return i||r.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled")?("string"==typeof a?r[a]:a).apply(r,arguments):t}"string"!=typeof a&&(l.guid=a.guid=a.guid||l.guid||e.guid++);var c=s.match(/^(\w+)\s*(.*)$/),d=c[1]+r.eventNamespace,h=c[2];h?o.delegate(h,d,l):n.bind(d,l)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){function i(){return("string"==typeof e?n[e]:e).apply(n,arguments)}var n=this;return setTimeout(i,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,i,n){var s,o,r=this.options[t];if(n=n||{},i=e.Event(i),i.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i.target=this.element[0],o=i.originalEvent)for(s in o)s in i||(i[s]=o[s]);return this.element.trigger(i,n),!(e.isFunction(r)&&r.apply(this.element[0],[i].concat(n))===!1||i.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,i){e.Widget.prototype["_"+t]=function(n,s,o){"string"==typeof s&&(s={effect:s});var r,a=s?s===!0||"number"==typeof s?i:s.effect||i:t;s=s||{},"number"==typeof s&&(s={duration:s}),r=!e.isEmptyObject(s),s.complete=o,s.delay&&n.delay(s.delay),r&&e.effects&&e.effects.effect[a]?n[t](s):a!==t&&n[a]?n[a](s.duration,s.easing,o):n.queue(function(i){e(this)[t](),o&&o.call(n[0]),i()})}})}(jQuery),function(e){var t=!1;e(document).mouseup(function(){t=!1}),e.widget("ui.mouse",{version:"1.10.3",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(i){return!0===e.data(i.target,t.widgetName+".preventClickEvent")?(e.removeData(i.target,t.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(i){if(!t){this._mouseStarted&&this._mouseUp(i),this._mouseDownEvent=i;var n=this,s=1===i.which,o="string"==typeof this.options.cancel&&i.target.nodeName?e(i.target).closest(this.options.cancel).length:!1;return s&&!o&&this._mouseCapture(i)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){n.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(i)&&this._mouseDelayMet(i)&&(this._mouseStarted=this._mouseStart(i)!==!1,!this._mouseStarted)?(i.preventDefault(),!0):(!0===e.data(i.target,this.widgetName+".preventClickEvent")&&e.removeData(i.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return n._mouseMove(e)},this._mouseUpDelegate=function(e){return n._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),i.preventDefault(),t=!0,!0)):!0}},_mouseMove:function(t){return e.ui.ie&&(!document.documentMode||9>document.documentMode)&&!t.button?this._mouseUp(t):this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(e){e.widget("ui.draggable",e.ui.mouse,{version:"1.10.3",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"!==this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(t){var i=this.options;return this.helper||i.disabled||e(t.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(t),this.handle?(e(i.iframeFix===!0?"iframe":i.iframeFix).each(function(){e("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(e(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(t){var i=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offsetParent=this.helper.offsetParent(),this.offsetParentCssPosition=this.offsetParent.css("position"),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.offset.scroll=!1,e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_mouseDrag:function(t,i){if("fixed"===this.offsetParentCssPosition&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),!i){var n=this._uiHash();if(this._trigger("drag",t,n)===!1)return this._mouseUp({}),!1;this.position=n.position}return this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var i=this,n=!1;return e.ui.ddmanager&&!this.options.dropBehaviour&&(n=e.ui.ddmanager.drop(this,t)),this.dropped&&(n=this.dropped,this.dropped=!1),"original"!==this.options.helper||e.contains(this.element[0].ownerDocument,this.element[0])?("invalid"===this.options.revert&&!n||"valid"===this.options.revert&&n||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,n)?e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){i._trigger("stop",t)!==!1&&i._clear()}):this._trigger("stop",t)!==!1&&this._clear(),!1):!1},_mouseUp:function(t){return e("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){return this.options.handle?!!e(t.target).closest(this.element.find(this.options.handle)).length:!0},_createHelper:function(t){var i=this.options,n=e.isFunction(i.helper)?e(i.helper.apply(this.element[0],[t])):"clone"===i.helper?this.element.clone().removeAttr("id"):this.element;return n.parents("body").length||n.appendTo("parent"===i.appendTo?this.element[0].parentNode:i.appendTo),n[0]===this.element[0]||/(fixed|absolute)/.test(n.css("position"))||n.css("position","absolute"),n},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.element.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,i,n,s=this.options;return s.containment?"window"===s.containment?void(this.containment=[e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,e(window).scrollLeft()+e(window).width()-this.helperProportions.width-this.margins.left,e(window).scrollTop()+(e(window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===s.containment?void(this.containment=[0,0,e(document).width()-this.helperProportions.width-this.margins.left,(e(document).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):s.containment.constructor===Array?void(this.containment=s.containment):("parent"===s.containment&&(s.containment=this.helper[0].parentNode),i=e(s.containment),n=i[0],void(n&&(t="hidden"!==i.css("overflow"),this.containment=[(parseInt(i.css("borderLeftWidth"),10)||0)+(parseInt(i.css("paddingLeft"),10)||0),(parseInt(i.css("borderTopWidth"),10)||0)+(parseInt(i.css("paddingTop"),10)||0),(t?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(i.css("borderRightWidth"),10)||0)-(parseInt(i.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(i.css("borderBottomWidth"),10)||0)-(parseInt(i.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=i))):void(this.containment=null)},_convertPositionTo:function(t,i){i||(i=this.position);var n="absolute"===t?1:-1,s="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent;return this.offset.scroll||(this.offset.scroll={top:s.scrollTop(),left:s.scrollLeft()}),{top:i.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top)*n,left:i.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)*n}},_generatePosition:function(t){var i,n,s,o,r=this.options,a="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=t.pageX,c=t.pageY;return this.offset.scroll||(this.offset.scroll={top:a.scrollTop(),left:a.scrollLeft()}),this.originalPosition&&(this.containment&&(this.relative_container?(n=this.relative_container.offset(),i=[this.containment[0]+n.left,this.containment[1]+n.top,this.containment[2]+n.left,this.containment[3]+n.top]):i=this.containment,t.pageX-this.offset.click.left<i[0]&&(l=i[0]+this.offset.click.left),t.pageY-this.offset.click.top<i[1]&&(c=i[1]+this.offset.click.top),t.pageX-this.offset.click.left>i[2]&&(l=i[2]+this.offset.click.left),t.pageY-this.offset.click.top>i[3]&&(c=i[3]+this.offset.click.top)),r.grid&&(s=r.grid[1]?this.originalPageY+Math.round((c-this.originalPageY)/r.grid[1])*r.grid[1]:this.originalPageY,c=i?s-this.offset.click.top>=i[1]||s-this.offset.click.top>i[3]?s:s-this.offset.click.top>=i[1]?s-r.grid[1]:s+r.grid[1]:s,o=r.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/r.grid[0])*r.grid[0]:this.originalPageX,l=i?o-this.offset.click.left>=i[0]||o-this.offset.click.left>i[2]?o:o-this.offset.click.left>=i[0]?o-r.grid[0]:o+r.grid[0]:o)),{top:c-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(t,i,n){return n=n||this._uiHash(),e.ui.plugin.call(this,t,[i,n]),"drag"===t&&(this.positionAbs=this._convertPositionTo("absolute")),e.Widget.prototype._trigger.call(this,t,i,n)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,i){var n=e(this).data("ui-draggable"),s=n.options,o=e.extend({},i,{item:n.element});n.sortables=[],e(s.connectToSortable).each(function(){var i=e.data(this,"ui-sortable");i&&!i.options.disabled&&(n.sortables.push({instance:i,shouldRevert:i.options.revert}),i.refreshPositions(),i._trigger("activate",t,o))})},stop:function(t,i){var n=e(this).data("ui-draggable"),s=e.extend({},i,{item:n.element});e.each(n.sortables,function(){this.instance.isOver?(this.instance.isOver=0,n.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=this.shouldRevert),this.instance._mouseStop(t),this.instance.options.helper=this.instance.options._helper,"original"===n.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",t,s))})},drag:function(t,i){var n=e(this).data("ui-draggable"),s=this;e.each(n.sortables,function(){var o=!1,r=this;this.instance.positionAbs=n.positionAbs,this.instance.helperProportions=n.helperProportions,this.instance.offset.click=n.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(o=!0,e.each(n.sortables,function(){return this.instance.positionAbs=n.positionAbs,this.instance.helperProportions=n.helperProportions,this.instance.offset.click=n.offset.click,this!==r&&this.instance._intersectsWith(this.instance.containerCache)&&e.contains(r.instance.element[0],this.instance.element[0])&&(o=!1),o})),o?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=e(s).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return i.helper[0]},t.target=this.instance.currentItem[0],this.instance._mouseCapture(t,!0),this.instance._mouseStart(t,!0,!0),this.instance.offset.click.top=n.offset.click.top,this.instance.offset.click.left=n.offset.click.left,this.instance.offset.parent.left-=n.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=n.offset.parent.top-this.instance.offset.parent.top,n._trigger("toSortable",t),n.dropped=this.instance.element,n.currentItem=n.element,this.instance.fromOutside=n),this.instance.currentItem&&this.instance._mouseDrag(t)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",t,this.instance._uiHash(this.instance)),this.instance._mouseStop(t,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),n._trigger("fromSortable",t),n.dropped=!1)})}}),e.ui.plugin.add("draggable","cursor",{start:function(){var t=e("body"),i=e(this).data("ui-draggable").options;t.css("cursor")&&(i._cursor=t.css("cursor")),t.css("cursor",i.cursor)},stop:function(){var t=e(this).data("ui-draggable").options;t._cursor&&e("body").css("cursor",t._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,i){var n=e(i.helper),s=e(this).data("ui-draggable").options;n.css("opacity")&&(s._opacity=n.css("opacity")),n.css("opacity",s.opacity)},stop:function(t,i){var n=e(this).data("ui-draggable").options;n._opacity&&e(i.helper).css("opacity",n._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(){var t=e(this).data("ui-draggable");t.scrollParent[0]!==document&&"HTML"!==t.scrollParent[0].tagName&&(t.overflowOffset=t.scrollParent.offset())},drag:function(t){var i=e(this).data("ui-draggable"),n=i.options,s=!1;i.scrollParent[0]!==document&&"HTML"!==i.scrollParent[0].tagName?(n.axis&&"x"===n.axis||(i.overflowOffset.top+i.scrollParent[0].offsetHeight-t.pageY<n.scrollSensitivity?i.scrollParent[0].scrollTop=s=i.scrollParent[0].scrollTop+n.scrollSpeed:t.pageY-i.overflowOffset.top<n.scrollSensitivity&&(i.scrollParent[0].scrollTop=s=i.scrollParent[0].scrollTop-n.scrollSpeed)),n.axis&&"y"===n.axis||(i.overflowOffset.left+i.scrollParent[0].offsetWidth-t.pageX<n.scrollSensitivity?i.scrollParent[0].scrollLeft=s=i.scrollParent[0].scrollLeft+n.scrollSpeed:t.pageX-i.overflowOffset.left<n.scrollSensitivity&&(i.scrollParent[0].scrollLeft=s=i.scrollParent[0].scrollLeft-n.scrollSpeed))):(n.axis&&"x"===n.axis||(t.pageY-e(document).scrollTop()<n.scrollSensitivity?s=e(document).scrollTop(e(document).scrollTop()-n.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<n.scrollSensitivity&&(s=e(document).scrollTop(e(document).scrollTop()+n.scrollSpeed))),n.axis&&"y"===n.axis||(t.pageX-e(document).scrollLeft()<n.scrollSensitivity?s=e(document).scrollLeft(e(document).scrollLeft()-n.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<n.scrollSensitivity&&(s=e(document).scrollLeft(e(document).scrollLeft()+n.scrollSpeed)))),s!==!1&&e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(i,t)}}),e.ui.plugin.add("draggable","snap",{start:function(){var t=e(this).data("ui-draggable"),i=t.options;t.snapElements=[],e(i.snap.constructor!==String?i.snap.items||":data(ui-draggable)":i.snap).each(function(){var i=e(this),n=i.offset();this!==t.element[0]&&t.snapElements.push({item:this,width:i.outerWidth(),height:i.outerHeight(),top:n.top,left:n.left})})},drag:function(t,i){var n,s,o,r,a,l,c,d,h,u,p=e(this).data("ui-draggable"),f=p.options,m=f.snapTolerance,g=i.offset.left,v=g+p.helperProportions.width,b=i.offset.top,y=b+p.helperProportions.height;for(h=p.snapElements.length-1;h>=0;h--)a=p.snapElements[h].left,l=a+p.snapElements[h].width,c=p.snapElements[h].top,d=c+p.snapElements[h].height,a-m>v||g>l+m||c-m>y||b>d+m||!e.contains(p.snapElements[h].item.ownerDocument,p.snapElements[h].item)?(p.snapElements[h].snapping&&p.options.snap.release&&p.options.snap.release.call(p.element,t,e.extend(p._uiHash(),{snapItem:p.snapElements[h].item})),p.snapElements[h].snapping=!1):("inner"!==f.snapMode&&(n=m>=Math.abs(c-y),s=m>=Math.abs(d-b),o=m>=Math.abs(a-v),r=m>=Math.abs(l-g),n&&(i.position.top=p._convertPositionTo("relative",{top:c-p.helperProportions.height,left:0}).top-p.margins.top),s&&(i.position.top=p._convertPositionTo("relative",{top:d,left:0}).top-p.margins.top),o&&(i.position.left=p._convertPositionTo("relative",{top:0,left:a-p.helperProportions.width}).left-p.margins.left),r&&(i.position.left=p._convertPositionTo("relative",{top:0,left:l}).left-p.margins.left)),u=n||s||o||r,"outer"!==f.snapMode&&(n=m>=Math.abs(c-b),s=m>=Math.abs(d-y),o=m>=Math.abs(a-g),r=m>=Math.abs(l-v),n&&(i.position.top=p._convertPositionTo("relative",{top:c,left:0}).top-p.margins.top),s&&(i.position.top=p._convertPositionTo("relative",{top:d-p.helperProportions.height,left:0}).top-p.margins.top),o&&(i.position.left=p._convertPositionTo("relative",{top:0,left:a}).left-p.margins.left),r&&(i.position.left=p._convertPositionTo("relative",{top:0,left:l-p.helperProportions.width}).left-p.margins.left)),!p.snapElements[h].snapping&&(n||s||o||r||u)&&p.options.snap.snap&&p.options.snap.snap.call(p.element,t,e.extend(p._uiHash(),{snapItem:p.snapElements[h].item})),p.snapElements[h].snapping=n||s||o||r||u)}}),e.ui.plugin.add("draggable","stack",{start:function(){var t,i=this.data("ui-draggable").options,n=e.makeArray(e(i.stack)).sort(function(t,i){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(i).css("zIndex"),10)||0)});n.length&&(t=parseInt(e(n[0]).css("zIndex"),10)||0,e(n).each(function(i){e(this).css("zIndex",t+i)}),this.css("zIndex",t+n.length))}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,i){var n=e(i.helper),s=e(this).data("ui-draggable").options;n.css("zIndex")&&(s._zIndex=n.css("zIndex")),n.css("zIndex",s.zIndex)},stop:function(t,i){var n=e(this).data("ui-draggable").options;n._zIndex&&e(i.helper).css("zIndex",n._zIndex)}})}(jQuery),function(e){function t(e,t,i){return e>t&&t+i>e}e.widget("ui.droppable",{version:"1.10.3",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var t=this.options,i=t.accept;this.isover=!1,this.isout=!0,this.accept=e.isFunction(i)?i:function(e){return e.is(i)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},e.ui.ddmanager.droppables[t.scope]=e.ui.ddmanager.droppables[t.scope]||[],e.ui.ddmanager.droppables[t.scope].push(this),t.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){for(var t=0,i=e.ui.ddmanager.droppables[this.options.scope];i.length>t;t++)i[t]===this&&i.splice(t,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(t,i){"accept"===t&&(this.accept=e.isFunction(i)?i:function(e){return e.is(i)}),e.Widget.prototype._setOption.apply(this,arguments)},_activate:function(t){var i=e.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),i&&this._trigger("activate",t,this.ui(i));
},_deactivate:function(t){var i=e.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),i&&this._trigger("deactivate",t,this.ui(i))},_over:function(t){var i=e.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",t,this.ui(i)))},_out:function(t){var i=e.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",t,this.ui(i)))},_drop:function(t,i){var n=i||e.ui.ddmanager.current,s=!1;return n&&(n.currentItem||n.element)[0]!==this.element[0]?(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var t=e.data(this,"ui-droppable");return t.options.greedy&&!t.options.disabled&&t.options.scope===n.options.scope&&t.accept.call(t.element[0],n.currentItem||n.element)&&e.ui.intersect(n,e.extend(t,{offset:t.element.offset()}),t.options.tolerance)?(s=!0,!1):void 0}),s?!1:this.accept.call(this.element[0],n.currentItem||n.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",t,this.ui(n)),this.element):!1):!1},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}}}),e.ui.intersect=function(e,i,n){if(!i.offset)return!1;var s,o,r=(e.positionAbs||e.position.absolute).left,a=r+e.helperProportions.width,l=(e.positionAbs||e.position.absolute).top,c=l+e.helperProportions.height,d=i.offset.left,h=d+i.proportions.width,u=i.offset.top,p=u+i.proportions.height;switch(n){case"fit":return r>=d&&h>=a&&l>=u&&p>=c;case"intersect":return r+e.helperProportions.width/2>d&&h>a-e.helperProportions.width/2&&l+e.helperProportions.height/2>u&&p>c-e.helperProportions.height/2;case"pointer":return s=(e.positionAbs||e.position.absolute).left+(e.clickOffset||e.offset.click).left,o=(e.positionAbs||e.position.absolute).top+(e.clickOffset||e.offset.click).top,t(o,u,i.proportions.height)&&t(s,d,i.proportions.width);case"touch":return(l>=u&&p>=l||c>=u&&p>=c||u>l&&c>p)&&(r>=d&&h>=r||a>=d&&h>=a||d>r&&a>h);default:return!1}},e.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,i){var n,s,o=e.ui.ddmanager.droppables[t.options.scope]||[],r=i?i.type:null,a=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();e:for(n=0;o.length>n;n++)if(!(o[n].options.disabled||t&&!o[n].accept.call(o[n].element[0],t.currentItem||t.element))){for(s=0;a.length>s;s++)if(a[s]===o[n].element[0]){o[n].proportions.height=0;continue e}o[n].visible="none"!==o[n].element.css("display"),o[n].visible&&("mousedown"===r&&o[n]._activate.call(o[n],i),o[n].offset=o[n].element.offset(),o[n].proportions={width:o[n].element[0].offsetWidth,height:o[n].element[0].offsetHeight})}},drop:function(t,i){var n=!1;return e.each((e.ui.ddmanager.droppables[t.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&e.ui.intersect(t,this,this.options.tolerance)&&(n=this._drop.call(this,i)||n),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,i)))}),n},dragStart:function(t,i){t.element.parentsUntil("body").bind("scroll.droppable",function(){t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,i)})},drag:function(t,i){t.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(t,i),e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var n,s,o,r=e.ui.intersect(t,this,this.options.tolerance),a=!r&&this.isover?"isout":r&&!this.isover?"isover":null;a&&(this.options.greedy&&(s=this.options.scope,o=this.element.parents(":data(ui-droppable)").filter(function(){return e.data(this,"ui-droppable").options.scope===s}),o.length&&(n=e.data(o[0],"ui-droppable"),n.greedyChild="isover"===a)),n&&"isover"===a&&(n.isover=!1,n.isout=!0,n._out.call(n,i)),this[a]=!0,this["isout"===a?"isover":"isout"]=!1,this["isover"===a?"_over":"_out"].call(this,i),n&&"isout"===a&&(n.isout=!1,n.isover=!0,n._over.call(n,i)))}})},dragStop:function(t,i){t.element.parentsUntil("body").unbind("scroll.droppable"),t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,i)}}}(jQuery),function(e){function t(e){return parseInt(e,10)||0}function i(e){return!isNaN(parseInt(e,10))}e.widget("ui.resizable",e.ui.mouse,{version:"1.10.3",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_create:function(){var t,i,n,s,o,r=this,a=this.options;if(this.element.addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!a.aspectRatio,aspectRatio:a.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:a.helper||a.ghost||a.animate?a.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(e("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.data("ui-resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=a.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),t=this.handles.split(","),this.handles={},i=0;t.length>i;i++)n=e.trim(t[i]),o="ui-resizable-"+n,s=e("<div class='ui-resizable-handle "+o+"'></div>"),s.css({zIndex:a.zIndex}),"se"===n&&s.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[n]=".ui-resizable-"+n,this.element.append(s);this._renderAxis=function(t){var i,n,s,o;t=t||this.element;for(i in this.handles)this.handles[i].constructor===String&&(this.handles[i]=e(this.handles[i],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(n=e(this.handles[i],this.element),o=/sw|ne|nw|se|n|s/.test(i)?n.outerHeight():n.outerWidth(),s=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join(""),t.css(s,o),this._proportionallyResize()),e(this.handles[i]).length},this._renderAxis(this.element),this._handles=e(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){r.resizing||(this.className&&(s=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),r.axis=s&&s[1]?s[1]:"se")}),a.autoHide&&(this._handles.hide(),e(this.element).addClass("ui-resizable-autohide").mouseenter(function(){a.disabled||(e(this).removeClass("ui-resizable-autohide"),r._handles.show())}).mouseleave(function(){a.disabled||r.resizing||(e(this).addClass("ui-resizable-autohide"),r._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var t,i=function(t){e(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(i(this.element),t=this.element,this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t),t.remove()),this.originalElement.css("resize",this.originalResizeStyle),i(this.originalElement),this},_mouseCapture:function(t){var i,n,s=!1;for(i in this.handles)n=e(this.handles[i])[0],(n===t.target||e.contains(n,t.target))&&(s=!0);return!this.options.disabled&&s},_mouseStart:function(i){var n,s,o,r=this.options,a=this.element.position(),l=this.element;return this.resizing=!0,/absolute/.test(l.css("position"))?l.css({position:"absolute",top:l.css("top"),left:l.css("left")}):l.is(".ui-draggable")&&l.css({position:"absolute",top:a.top,left:a.left}),this._renderProxy(),n=t(this.helper.css("left")),s=t(this.helper.css("top")),r.containment&&(n+=e(r.containment).scrollLeft()||0,s+=e(r.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:n,top:s},this.size=this._helper?{width:l.outerWidth(),height:l.outerHeight()}:{width:l.width(),height:l.height()},this.originalSize=this._helper?{width:l.outerWidth(),height:l.outerHeight()}:{width:l.width(),height:l.height()},this.originalPosition={left:n,top:s},this.sizeDiff={width:l.outerWidth()-l.width(),height:l.outerHeight()-l.height()},this.originalMousePosition={left:i.pageX,top:i.pageY},this.aspectRatio="number"==typeof r.aspectRatio?r.aspectRatio:this.originalSize.width/this.originalSize.height||1,o=e(".ui-resizable-"+this.axis).css("cursor"),e("body").css("cursor","auto"===o?this.axis+"-resize":o),l.addClass("ui-resizable-resizing"),this._propagate("start",i),!0},_mouseDrag:function(t){var i,n=this.helper,s={},o=this.originalMousePosition,r=this.axis,a=this.position.top,l=this.position.left,c=this.size.width,d=this.size.height,h=t.pageX-o.left||0,u=t.pageY-o.top||0,p=this._change[r];return p?(i=p.apply(this,[t,h,u]),this._updateVirtualBoundaries(t.shiftKey),(this._aspectRatio||t.shiftKey)&&(i=this._updateRatio(i,t)),i=this._respectSize(i,t),this._updateCache(i),this._propagate("resize",t),this.position.top!==a&&(s.top=this.position.top+"px"),this.position.left!==l&&(s.left=this.position.left+"px"),this.size.width!==c&&(s.width=this.size.width+"px"),this.size.height!==d&&(s.height=this.size.height+"px"),n.css(s),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),e.isEmptyObject(s)||this._trigger("resize",t,this.ui()),!1):!1},_mouseStop:function(t){this.resizing=!1;var i,n,s,o,r,a,l,c=this.options,d=this;return this._helper&&(i=this._proportionallyResizeElements,n=i.length&&/textarea/i.test(i[0].nodeName),s=n&&e.ui.hasScroll(i[0],"left")?0:d.sizeDiff.height,o=n?0:d.sizeDiff.width,r={width:d.helper.width()-o,height:d.helper.height()-s},a=parseInt(d.element.css("left"),10)+(d.position.left-d.originalPosition.left)||null,l=parseInt(d.element.css("top"),10)+(d.position.top-d.originalPosition.top)||null,c.animate||this.element.css(e.extend(r,{top:l,left:a})),d.helper.height(d.size.height),d.helper.width(d.size.width),this._helper&&!c.animate&&this._proportionallyResize()),e("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(e){var t,n,s,o,r,a=this.options;r={minWidth:i(a.minWidth)?a.minWidth:0,maxWidth:i(a.maxWidth)?a.maxWidth:1/0,minHeight:i(a.minHeight)?a.minHeight:0,maxHeight:i(a.maxHeight)?a.maxHeight:1/0},(this._aspectRatio||e)&&(t=r.minHeight*this.aspectRatio,s=r.minWidth/this.aspectRatio,n=r.maxHeight*this.aspectRatio,o=r.maxWidth/this.aspectRatio,t>r.minWidth&&(r.minWidth=t),s>r.minHeight&&(r.minHeight=s),r.maxWidth>n&&(r.maxWidth=n),r.maxHeight>o&&(r.maxHeight=o)),this._vBoundaries=r},_updateCache:function(e){this.offset=this.helper.offset(),i(e.left)&&(this.position.left=e.left),i(e.top)&&(this.position.top=e.top),i(e.height)&&(this.size.height=e.height),i(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=this.position,n=this.size,s=this.axis;return i(e.height)?e.width=e.height*this.aspectRatio:i(e.width)&&(e.height=e.width/this.aspectRatio),"sw"===s&&(e.left=t.left+(n.width-e.width),e.top=null),"nw"===s&&(e.top=t.top+(n.height-e.height),e.left=t.left+(n.width-e.width)),e},_respectSize:function(e){var t=this._vBoundaries,n=this.axis,s=i(e.width)&&t.maxWidth&&t.maxWidth<e.width,o=i(e.height)&&t.maxHeight&&t.maxHeight<e.height,r=i(e.width)&&t.minWidth&&t.minWidth>e.width,a=i(e.height)&&t.minHeight&&t.minHeight>e.height,l=this.originalPosition.left+this.originalSize.width,c=this.position.top+this.size.height,d=/sw|nw|w/.test(n),h=/nw|ne|n/.test(n);return r&&(e.width=t.minWidth),a&&(e.height=t.minHeight),s&&(e.width=t.maxWidth),o&&(e.height=t.maxHeight),r&&d&&(e.left=l-t.minWidth),s&&d&&(e.left=l-t.maxWidth),a&&h&&(e.top=c-t.minHeight),o&&h&&(e.top=c-t.maxHeight),e.width||e.height||e.left||!e.top?e.width||e.height||e.top||!e.left||(e.left=null):e.top=null,e},_proportionallyResize:function(){if(this._proportionallyResizeElements.length){var e,t,i,n,s,o=this.helper||this.element;for(e=0;this._proportionallyResizeElements.length>e;e++){if(s=this._proportionallyResizeElements[e],!this.borderDif)for(this.borderDif=[],i=[s.css("borderTopWidth"),s.css("borderRightWidth"),s.css("borderBottomWidth"),s.css("borderLeftWidth")],n=[s.css("paddingTop"),s.css("paddingRight"),s.css("paddingBottom"),s.css("paddingLeft")],t=0;i.length>t;t++)this.borderDif[t]=(parseInt(i[t],10)||0)+(parseInt(n[t],10)||0);s.css({height:o.height()-this.borderDif[0]-this.borderDif[2]||0,width:o.width()-this.borderDif[1]-this.borderDif[3]||0})}}},_renderProxy:function(){var t=this.element,i=this.options;this.elementOffset=t.offset(),this._helper?(this.helper=this.helper||e("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++i.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var i=this.originalSize,n=this.originalPosition;return{left:n.left+t,width:i.width-t}},n:function(e,t,i){var n=this.originalSize,s=this.originalPosition;return{top:s.top+i,height:n.height-i}},s:function(e,t,i){return{height:this.originalSize.height+i}},se:function(t,i,n){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,i,n]))},sw:function(t,i,n){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,i,n]))},ne:function(t,i,n){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,i,n]))},nw:function(t,i,n){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,i,n]))}},_propagate:function(t,i){e.ui.plugin.call(this,t,[i,this.ui()]),"resize"!==t&&this._trigger(t,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.ui.plugin.add("resizable","animate",{stop:function(t){var i=e(this).data("ui-resizable"),n=i.options,s=i._proportionallyResizeElements,o=s.length&&/textarea/i.test(s[0].nodeName),r=o&&e.ui.hasScroll(s[0],"left")?0:i.sizeDiff.height,a=o?0:i.sizeDiff.width,l={width:i.size.width-a,height:i.size.height-r},c=parseInt(i.element.css("left"),10)+(i.position.left-i.originalPosition.left)||null,d=parseInt(i.element.css("top"),10)+(i.position.top-i.originalPosition.top)||null;i.element.animate(e.extend(l,d&&c?{top:d,left:c}:{}),{duration:n.animateDuration,easing:n.animateEasing,step:function(){var n={width:parseInt(i.element.css("width"),10),height:parseInt(i.element.css("height"),10),top:parseInt(i.element.css("top"),10),left:parseInt(i.element.css("left"),10)};s&&s.length&&e(s[0]).css({width:n.width,height:n.height}),i._updateCache(n),i._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(){var i,n,s,o,r,a,l,c=e(this).data("ui-resizable"),d=c.options,h=c.element,u=d.containment,p=u instanceof e?u.get(0):/parent/.test(u)?h.parent().get(0):u;p&&(c.containerElement=e(p),/document/.test(u)||u===document?(c.containerOffset={left:0,top:0},c.containerPosition={left:0,top:0},c.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight}):(i=e(p),n=[],e(["Top","Right","Left","Bottom"]).each(function(e,s){n[e]=t(i.css("padding"+s))}),c.containerOffset=i.offset(),c.containerPosition=i.position(),c.containerSize={height:i.innerHeight()-n[3],width:i.innerWidth()-n[1]},s=c.containerOffset,o=c.containerSize.height,r=c.containerSize.width,a=e.ui.hasScroll(p,"left")?p.scrollWidth:r,l=e.ui.hasScroll(p)?p.scrollHeight:o,c.parentData={element:p,left:s.left,top:s.top,width:a,height:l}))},resize:function(t){var i,n,s,o,r=e(this).data("ui-resizable"),a=r.options,l=r.containerOffset,c=r.position,d=r._aspectRatio||t.shiftKey,h={top:0,left:0},u=r.containerElement;u[0]!==document&&/static/.test(u.css("position"))&&(h=l),c.left<(r._helper?l.left:0)&&(r.size.width=r.size.width+(r._helper?r.position.left-l.left:r.position.left-h.left),d&&(r.size.height=r.size.width/r.aspectRatio),r.position.left=a.helper?l.left:0),c.top<(r._helper?l.top:0)&&(r.size.height=r.size.height+(r._helper?r.position.top-l.top:r.position.top),d&&(r.size.width=r.size.height*r.aspectRatio),r.position.top=r._helper?l.top:0),r.offset.left=r.parentData.left+r.position.left,r.offset.top=r.parentData.top+r.position.top,i=Math.abs((r._helper?r.offset.left-h.left:r.offset.left-h.left)+r.sizeDiff.width),n=Math.abs((r._helper?r.offset.top-h.top:r.offset.top-l.top)+r.sizeDiff.height),s=r.containerElement.get(0)===r.element.parent().get(0),o=/relative|absolute/.test(r.containerElement.css("position")),s&&o&&(i-=r.parentData.left),i+r.size.width>=r.parentData.width&&(r.size.width=r.parentData.width-i,d&&(r.size.height=r.size.width/r.aspectRatio)),n+r.size.height>=r.parentData.height&&(r.size.height=r.parentData.height-n,d&&(r.size.width=r.size.height*r.aspectRatio))},stop:function(){var t=e(this).data("ui-resizable"),i=t.options,n=t.containerOffset,s=t.containerPosition,o=t.containerElement,r=e(t.helper),a=r.offset(),l=r.outerWidth()-t.sizeDiff.width,c=r.outerHeight()-t.sizeDiff.height;t._helper&&!i.animate&&/relative/.test(o.css("position"))&&e(this).css({left:a.left-s.left-n.left,width:l,height:c}),t._helper&&!i.animate&&/static/.test(o.css("position"))&&e(this).css({left:a.left-s.left-n.left,width:l,height:c})}}),e.ui.plugin.add("resizable","alsoResize",{start:function(){var t=e(this).data("ui-resizable"),i=t.options,n=function(t){e(t).each(function(){var t=e(this);t.data("ui-resizable-alsoresize",{width:parseInt(t.width(),10),height:parseInt(t.height(),10),left:parseInt(t.css("left"),10),top:parseInt(t.css("top"),10)})})};"object"!=typeof i.alsoResize||i.alsoResize.parentNode?n(i.alsoResize):i.alsoResize.length?(i.alsoResize=i.alsoResize[0],n(i.alsoResize)):e.each(i.alsoResize,function(e){n(e)})},resize:function(t,i){var n=e(this).data("ui-resizable"),s=n.options,o=n.originalSize,r=n.originalPosition,a={height:n.size.height-o.height||0,width:n.size.width-o.width||0,top:n.position.top-r.top||0,left:n.position.left-r.left||0},l=function(t,n){e(t).each(function(){var t=e(this),s=e(this).data("ui-resizable-alsoresize"),o={},r=n&&n.length?n:t.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(r,function(e,t){var i=(s[t]||0)+(a[t]||0);i&&i>=0&&(o[t]=i||null)}),t.css(o)})};"object"!=typeof s.alsoResize||s.alsoResize.nodeType?l(s.alsoResize):e.each(s.alsoResize,function(e,t){l(e,t)})},stop:function(){e(this).removeData("resizable-alsoresize")}}),e.ui.plugin.add("resizable","ghost",{start:function(){var t=e(this).data("ui-resizable"),i=t.options,n=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:n.height,width:n.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof i.ghost?i.ghost:""),t.ghost.appendTo(t.helper)},resize:function(){var t=e(this).data("ui-resizable");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=e(this).data("ui-resizable");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(){var t=e(this).data("ui-resizable"),i=t.options,n=t.size,s=t.originalSize,o=t.originalPosition,r=t.axis,a="number"==typeof i.grid?[i.grid,i.grid]:i.grid,l=a[0]||1,c=a[1]||1,d=Math.round((n.width-s.width)/l)*l,h=Math.round((n.height-s.height)/c)*c,u=s.width+d,p=s.height+h,f=i.maxWidth&&u>i.maxWidth,m=i.maxHeight&&p>i.maxHeight,g=i.minWidth&&i.minWidth>u,v=i.minHeight&&i.minHeight>p;i.grid=a,g&&(u+=l),v&&(p+=c),f&&(u-=l),m&&(p-=c),/^(se|s|e)$/.test(r)?(t.size.width=u,t.size.height=p):/^(ne)$/.test(r)?(t.size.width=u,t.size.height=p,t.position.top=o.top-h):/^(sw)$/.test(r)?(t.size.width=u,t.size.height=p,t.position.left=o.left-d):(t.size.width=u,t.size.height=p,t.position.top=o.top-h,t.position.left=o.left-d)}})}(jQuery),function(e){e.widget("ui.selectable",e.ui.mouse,{version:"1.10.3",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var t,i=this;this.element.addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){t=e(i.options.filter,i.element[0]),t.addClass("ui-selectee"),t.each(function(){var t=e(this),i=t.offset();e.data(this,"selectable-item",{element:this,$element:t,left:i.left,top:i.top,right:i.left+t.outerWidth(),bottom:i.top+t.outerHeight(),startselected:!1,selected:t.hasClass("ui-selected"),selecting:t.hasClass("ui-selecting"),unselecting:t.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=t.addClass("ui-selectee"),this._mouseInit(),this.helper=e("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(t){var i=this,n=this.options;this.opos=[t.pageX,t.pageY],this.options.disabled||(this.selectees=e(n.filter,this.element[0]),this._trigger("start",t),e(n.appendTo).append(this.helper),this.helper.css({left:t.pageX,top:t.pageY,width:0,height:0}),n.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var n=e.data(this,"selectable-item");n.startselected=!0,t.metaKey||t.ctrlKey||(n.$element.removeClass("ui-selected"),n.selected=!1,n.$element.addClass("ui-unselecting"),n.unselecting=!0,i._trigger("unselecting",t,{unselecting:n.element}))}),e(t.target).parents().addBack().each(function(){var n,s=e.data(this,"selectable-item");return s?(n=!t.metaKey&&!t.ctrlKey||!s.$element.hasClass("ui-selected"),s.$element.removeClass(n?"ui-unselecting":"ui-selected").addClass(n?"ui-selecting":"ui-unselecting"),s.unselecting=!n,s.selecting=n,s.selected=n,n?i._trigger("selecting",t,{selecting:s.element}):i._trigger("unselecting",t,{unselecting:s.element}),!1):void 0}))},_mouseDrag:function(t){if(this.dragged=!0,!this.options.disabled){var i,n=this,s=this.options,o=this.opos[0],r=this.opos[1],a=t.pageX,l=t.pageY;return o>a&&(i=a,a=o,o=i),r>l&&(i=l,l=r,r=i),this.helper.css({left:o,top:r,width:a-o,height:l-r}),this.selectees.each(function(){var i=e.data(this,"selectable-item"),c=!1;i&&i.element!==n.element[0]&&("touch"===s.tolerance?c=!(i.left>a||o>i.right||i.top>l||r>i.bottom):"fit"===s.tolerance&&(c=i.left>o&&a>i.right&&i.top>r&&l>i.bottom),c?(i.selected&&(i.$element.removeClass("ui-selected"),i.selected=!1),i.unselecting&&(i.$element.removeClass("ui-unselecting"),i.unselecting=!1),i.selecting||(i.$element.addClass("ui-selecting"),i.selecting=!0,n._trigger("selecting",t,{selecting:i.element}))):(i.selecting&&((t.metaKey||t.ctrlKey)&&i.startselected?(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.$element.addClass("ui-selected"),i.selected=!0):(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.startselected&&(i.$element.addClass("ui-unselecting"),i.unselecting=!0),n._trigger("unselecting",t,{unselecting:i.element}))),i.selected&&(t.metaKey||t.ctrlKey||i.startselected||(i.$element.removeClass("ui-selected"),i.selected=!1,i.$element.addClass("ui-unselecting"),i.unselecting=!0,n._trigger("unselecting",t,{unselecting:i.element})))))}),!1}},_mouseStop:function(t){var i=this;return this.dragged=!1,e(".ui-unselecting",this.element[0]).each(function(){var n=e.data(this,"selectable-item");n.$element.removeClass("ui-unselecting"),n.unselecting=!1,n.startselected=!1,i._trigger("unselected",t,{unselected:n.element})}),e(".ui-selecting",this.element[0]).each(function(){var n=e.data(this,"selectable-item");n.$element.removeClass("ui-selecting").addClass("ui-selected"),n.selecting=!1,n.selected=!0,n.startselected=!0,i._trigger("selected",t,{selected:n.element})}),this._trigger("stop",t),this.helper.remove(),!1}})}(jQuery),function(e){function t(e,t,i){return e>t&&t+i>e}function i(e){return/left|right/.test(e.css("float"))||/inline|table-cell/.test(e.css("display"))}e.widget("ui.sortable",e.ui.mouse,{version:"1.10.3",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_create:function(){var e=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?"x"===e.axis||i(this.items[0].item):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_setOption:function(t,i){"disabled"===t?(this.options[t]=i,this.widget().toggleClass("ui-sortable-disabled",!!i)):e.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(t,i){var n=null,s=!1,o=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(t),e(t.target).parents().each(function(){return e.data(this,o.widgetName+"-item")===o?(n=e(this),!1):void 0}),e.data(t.target,o.widgetName+"-item")===o&&(n=e(t.target)),n&&(!this.options.handle||i||(e(this.options.handle,n).find("*").addBack().each(function(){this===t.target&&(s=!0)}),s))?(this.currentItem=n,this._removeCurrentsFromItems(),!0):!1)},_mouseStart:function(t,i,n){var s,o,r=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,r.cursorAt&&this._adjustOffsetFromHelper(r.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),r.containment&&this._setContainment(),r.cursor&&"auto"!==r.cursor&&(o=this.document.find("body"),this.storedCursor=o.css("cursor"),o.css("cursor",r.cursor),this.storedStylesheet=e("<style>*{ cursor: "+r.cursor+" !important; }</style>").appendTo(o)),r.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",r.opacity)),r.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",r.zIndex)),this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!n)for(s=this.containers.length-1;s>=0;s--)this.containers[s]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!r.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var i,n,s,o,r=this.options,a=!1;for(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<r.scrollSensitivity?this.scrollParent[0].scrollTop=a=this.scrollParent[0].scrollTop+r.scrollSpeed:t.pageY-this.overflowOffset.top<r.scrollSensitivity&&(this.scrollParent[0].scrollTop=a=this.scrollParent[0].scrollTop-r.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<r.scrollSensitivity?this.scrollParent[0].scrollLeft=a=this.scrollParent[0].scrollLeft+r.scrollSpeed:t.pageX-this.overflowOffset.left<r.scrollSensitivity&&(this.scrollParent[0].scrollLeft=a=this.scrollParent[0].scrollLeft-r.scrollSpeed)):(t.pageY-e(document).scrollTop()<r.scrollSensitivity?a=e(document).scrollTop(e(document).scrollTop()-r.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<r.scrollSensitivity&&(a=e(document).scrollTop(e(document).scrollTop()+r.scrollSpeed)),t.pageX-e(document).scrollLeft()<r.scrollSensitivity?a=e(document).scrollLeft(e(document).scrollLeft()-r.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<r.scrollSensitivity&&(a=e(document).scrollLeft(e(document).scrollLeft()+r.scrollSpeed))),a!==!1&&e.ui.ddmanager&&!r.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),i=this.items.length-1;i>=0;i--)if(n=this.items[i],s=n.item[0],o=this._intersectsWithPointer(n),o&&n.instance===this.currentContainer&&s!==this.currentItem[0]&&this.placeholder[1===o?"next":"prev"]()[0]!==s&&!e.contains(this.placeholder[0],s)&&("semi-dynamic"===this.options.type?!e.contains(this.element[0],s):!0)){if(this.direction=1===o?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(n))break;this._rearrange(t,n),this._trigger("change",t,this._uiHash());break}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,i){if(t){if(e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t),this.options.revert){var n=this,s=this.placeholder.offset(),o=this.options.axis,r={};o&&"x"!==o||(r.left=s.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft)),o&&"y"!==o||(r.top=s.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,e(this.helper).animate(r,parseInt(this.options.revert,10)||500,function(){n._clear(t)})}else this._clear(t,i);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),
this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var i=this._getItemsAsjQuery(t&&t.connected),n=[];return t=t||{},e(i).each(function(){var i=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);i&&n.push((t.key||i[1]+"[]")+"="+(t.key&&t.expression?i[1]:i[2]))}),!n.length&&t.key&&n.push(t.key+"="),n.join("&")},toArray:function(t){var i=this._getItemsAsjQuery(t&&t.connected),n=[];return t=t||{},i.each(function(){n.push(e(t.item||this).attr(t.attribute||"id")||"")}),n},_intersectsWith:function(e){var t=this.positionAbs.left,i=t+this.helperProportions.width,n=this.positionAbs.top,s=n+this.helperProportions.height,o=e.left,r=o+e.width,a=e.top,l=a+e.height,c=this.offset.click.top,d=this.offset.click.left,h="x"===this.options.axis||n+c>a&&l>n+c,u="y"===this.options.axis||t+d>o&&r>t+d,p=h&&u;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?p:t+this.helperProportions.width/2>o&&r>i-this.helperProportions.width/2&&n+this.helperProportions.height/2>a&&l>s-this.helperProportions.height/2},_intersectsWithPointer:function(e){var i="x"===this.options.axis||t(this.positionAbs.top+this.offset.click.top,e.top,e.height),n="y"===this.options.axis||t(this.positionAbs.left+this.offset.click.left,e.left,e.width),s=i&&n,o=this._getDragVerticalDirection(),r=this._getDragHorizontalDirection();return s?this.floating?r&&"right"===r||"down"===o?2:1:o&&("down"===o?2:1):!1},_intersectsWithSides:function(e){var i=t(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),n=t(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),s=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return this.floating&&o?"right"===o&&n||"left"===o&&!n:s&&("down"===s&&i||"up"===s&&!i)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return 0!==e&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return 0!==e&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){var i,n,s,o,r=[],a=[],l=this._connectWith();if(l&&t)for(i=l.length-1;i>=0;i--)for(s=e(l[i]),n=s.length-1;n>=0;n--)o=e.data(s[n],this.widgetFullName),o&&o!==this&&!o.options.disabled&&a.push([e.isFunction(o.options.items)?o.options.items.call(o.element):e(o.options.items,o.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),o]);for(a.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),i=a.length-1;i>=0;i--)a[i][0].each(function(){r.push(this)});return e(r)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,function(e){for(var i=0;t.length>i;i++)if(t[i]===e.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var i,n,s,o,r,a,l,c,d=this.items,h=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],u=this._connectWith();if(u&&this.ready)for(i=u.length-1;i>=0;i--)for(s=e(u[i]),n=s.length-1;n>=0;n--)o=e.data(s[n],this.widgetFullName),o&&o!==this&&!o.options.disabled&&(h.push([e.isFunction(o.options.items)?o.options.items.call(o.element[0],t,{item:this.currentItem}):e(o.options.items,o.element),o]),this.containers.push(o));for(i=h.length-1;i>=0;i--)for(r=h[i][1],a=h[i][0],n=0,c=a.length;c>n;n++)l=e(a[n]),l.data(this.widgetName+"-item",r),d.push({item:l,instance:r,width:0,height:0,left:0,top:0})},refreshPositions:function(t){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var i,n,s,o;for(i=this.items.length-1;i>=0;i--)n=this.items[i],n.instance!==this.currentContainer&&this.currentContainer&&n.item[0]!==this.currentItem[0]||(s=this.options.toleranceElement?e(this.options.toleranceElement,n.item):n.item,t||(n.width=s.outerWidth(),n.height=s.outerHeight()),o=s.offset(),n.left=o.left,n.top=o.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(i=this.containers.length-1;i>=0;i--)o=this.containers[i].element.offset(),this.containers[i].containerCache.left=o.left,this.containers[i].containerCache.top=o.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight();return this},_createPlaceholder:function(t){t=t||this;var i,n=t.options;n.placeholder&&n.placeholder.constructor!==String||(i=n.placeholder,n.placeholder={element:function(){var n=t.currentItem[0].nodeName.toLowerCase(),s=e("<"+n+">",t.document[0]).addClass(i||t.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tr"===n?t.currentItem.children().each(function(){e("<td>&#160;</td>",t.document[0]).attr("colspan",e(this).attr("colspan")||1).appendTo(s)}):"img"===n&&s.attr("src",t.currentItem.attr("src")),i||s.css("visibility","hidden"),s},update:function(e,s){(!i||n.forcePlaceholderSize)&&(s.height()||s.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),s.width()||s.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10)))}}),t.placeholder=e(n.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),n.placeholder.update(t,t.placeholder)},_contactContainers:function(n){var s,o,r,a,l,c,d,h,u,p,f=null,m=null;for(s=this.containers.length-1;s>=0;s--)if(!e.contains(this.currentItem[0],this.containers[s].element[0]))if(this._intersectsWith(this.containers[s].containerCache)){if(f&&e.contains(this.containers[s].element[0],f.element[0]))continue;f=this.containers[s],m=s}else this.containers[s].containerCache.over&&(this.containers[s]._trigger("out",n,this._uiHash(this)),this.containers[s].containerCache.over=0);if(f)if(1===this.containers.length)this.containers[m].containerCache.over||(this.containers[m]._trigger("over",n,this._uiHash(this)),this.containers[m].containerCache.over=1);else{for(r=1e4,a=null,p=f.floating||i(this.currentItem),l=p?"left":"top",c=p?"width":"height",d=this.positionAbs[l]+this.offset.click[l],o=this.items.length-1;o>=0;o--)e.contains(this.containers[m].element[0],this.items[o].item[0])&&this.items[o].item[0]!==this.currentItem[0]&&(!p||t(this.positionAbs.top+this.offset.click.top,this.items[o].top,this.items[o].height))&&(h=this.items[o].item.offset()[l],u=!1,Math.abs(h-d)>Math.abs(h+this.items[o][c]-d)&&(u=!0,h+=this.items[o][c]),r>Math.abs(h-d)&&(r=Math.abs(h-d),a=this.items[o],this.direction=u?"up":"down"));if(!a&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[m])return;a?this._rearrange(n,a,null,!0):this._rearrange(n,null,this.containers[m].element,!0),this._trigger("change",n,this._uiHash()),this.containers[m]._trigger("change",n,this._uiHash(this)),this.currentContainer=this.containers[m],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[m]._trigger("over",n,this._uiHash(this)),this.containers[m].containerCache.over=1}},_createHelper:function(t){var i=this.options,n=e.isFunction(i.helper)?e(i.helper.apply(this.element[0],[t,this.currentItem])):"clone"===i.helper?this.currentItem.clone():this.currentItem;return n.parents("body").length||e("parent"!==i.appendTo?i.appendTo:this.currentItem[0].parentNode)[0].appendChild(n[0]),n[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!n[0].style.width||i.forceHelperSize)&&n.width(this.currentItem.width()),(!n[0].style.height||i.forceHelperSize)&&n.height(this.currentItem.height()),n},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,i,n,s=this.options;"parent"===s.containment&&(s.containment=this.helper[0].parentNode),("document"===s.containment||"window"===s.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,e("document"===s.containment?document:window).width()-this.helperProportions.width-this.margins.left,(e("document"===s.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(s.containment)||(t=e(s.containment)[0],i=e(s.containment).offset(),n="hidden"!==e(t).css("overflow"),this.containment=[i.left+(parseInt(e(t).css("borderLeftWidth"),10)||0)+(parseInt(e(t).css("paddingLeft"),10)||0)-this.margins.left,i.top+(parseInt(e(t).css("borderTopWidth"),10)||0)+(parseInt(e(t).css("paddingTop"),10)||0)-this.margins.top,i.left+(n?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(e(t).css("borderLeftWidth"),10)||0)-(parseInt(e(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,i.top+(n?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(e(t).css("borderTopWidth"),10)||0)-(parseInt(e(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,i){i||(i=this.position);var n="absolute"===t?1:-1,s="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(s[0].tagName);return{top:i.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():o?0:s.scrollTop())*n,left:i.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():o?0:s.scrollLeft())*n}},_generatePosition:function(t){var i,n,s=this.options,o=t.pageX,r=t.pageY,a="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=/(html|body)/i.test(a[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(o=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(r=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(o=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(r=this.containment[3]+this.offset.click.top)),s.grid&&(i=this.originalPageY+Math.round((r-this.originalPageY)/s.grid[1])*s.grid[1],r=this.containment?i-this.offset.click.top>=this.containment[1]&&i-this.offset.click.top<=this.containment[3]?i:i-this.offset.click.top>=this.containment[1]?i-s.grid[1]:i+s.grid[1]:i,n=this.originalPageX+Math.round((o-this.originalPageX)/s.grid[0])*s.grid[0],o=this.containment?n-this.offset.click.left>=this.containment[0]&&n-this.offset.click.left<=this.containment[2]?n:n-this.offset.click.left>=this.containment[0]?n-s.grid[0]:n+s.grid[0]:n)),{top:r-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():l?0:a.scrollTop()),left:o-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():l?0:a.scrollLeft())}},_rearrange:function(e,t,i,n){i?i[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var s=this.counter;this._delay(function(){s===this.counter&&this.refreshPositions(!n)})},_clear:function(e,t){this.reverting=!1;var i,n=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(i in this._storedCSS)("auto"===this._storedCSS[i]||"static"===this._storedCSS[i])&&(this._storedCSS[i]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!t&&n.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||t||n.push(function(e){this._trigger("update",e,this._uiHash())}),this!==this.currentContainer&&(t||(n.push(function(e){this._trigger("remove",e,this._uiHash())}),n.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),n.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer)))),i=this.containers.length-1;i>=0;i--)t||n.push(function(e){return function(t){e._trigger("deactivate",t,this._uiHash(this))}}.call(this,this.containers[i])),this.containers[i].containerCache.over&&(n.push(function(e){return function(t){e._trigger("out",t,this._uiHash(this))}}.call(this,this.containers[i])),this.containers[i].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!t){for(this._trigger("beforeStop",e,this._uiHash()),i=0;n.length>i;i++)n[i].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!1}if(t||this._trigger("beforeStop",e,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null,!t){for(i=0;n.length>i;i++)n[i].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){e.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var i=t||this;return{helper:i.helper,placeholder:i.placeholder||e([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:t?t.element:null}}})}(jQuery),function(e,t){var i="ui-effects-";e.effects={effect:{}},function(e,t){function i(e,t,i){var n=h[t.type]||{};return null==e?i||!t.def?null:t.def:(e=n.floor?~~e:parseFloat(e),isNaN(e)?t.def:n.mod?(e+n.mod)%n.mod:0>e?0:e>n.max?n.max:e)}function n(i){var n=c(),s=n._rgba=[];return i=i.toLowerCase(),f(l,function(e,o){var r,a=o.re.exec(i),l=a&&o.parse(a),c=o.space||"rgba";return l?(r=n[c](l),n[d[c].cache]=r[d[c].cache],s=n._rgba=r._rgba,!1):t}),s.length?("0,0,0,0"===s.join()&&e.extend(s,o.transparent),n):o[i]}function s(e,t,i){return i=(i+1)%1,1>6*i?e+6*(t-e)*i:1>2*i?t:2>3*i?e+6*(t-e)*(2/3-i):e}var o,r="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",a=/^([\-+])=\s*(\d+\.?\d*)/,l=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],e[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(e){return[e[1],e[2]/100,e[3]/100,e[4]]}}],c=e.Color=function(t,i,n,s){return new e.Color.fn.parse(t,i,n,s)},d={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},h={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},u=c.support={},p=e("<p>")[0],f=e.each;p.style.cssText="background-color:rgba(1,1,1,.5)",u.rgba=p.style.backgroundColor.indexOf("rgba")>-1,f(d,function(e,t){t.cache="_"+e,t.props.alpha={idx:3,type:"percent",def:1}}),c.fn=e.extend(c.prototype,{parse:function(s,r,a,l){if(s===t)return this._rgba=[null,null,null,null],this;(s.jquery||s.nodeType)&&(s=e(s).css(r),r=t);var h=this,u=e.type(s),p=this._rgba=[];return r!==t&&(s=[s,r,a,l],u="array"),"string"===u?this.parse(n(s)||o._default):"array"===u?(f(d.rgba.props,function(e,t){p[t.idx]=i(s[t.idx],t)}),this):"object"===u?(s instanceof c?f(d,function(e,t){s[t.cache]&&(h[t.cache]=s[t.cache].slice())}):f(d,function(t,n){var o=n.cache;f(n.props,function(e,t){if(!h[o]&&n.to){if("alpha"===e||null==s[e])return;h[o]=n.to(h._rgba)}h[o][t.idx]=i(s[e],t,!0)}),h[o]&&0>e.inArray(null,h[o].slice(0,3))&&(h[o][3]=1,n.from&&(h._rgba=n.from(h[o])))}),this):t},is:function(e){var i=c(e),n=!0,s=this;return f(d,function(e,o){var r,a=i[o.cache];return a&&(r=s[o.cache]||o.to&&o.to(s._rgba)||[],f(o.props,function(e,i){return null!=a[i.idx]?n=a[i.idx]===r[i.idx]:t})),n}),n},_space:function(){var e=[],t=this;return f(d,function(i,n){t[n.cache]&&e.push(i)}),e.pop()},transition:function(e,t){var n=c(e),s=n._space(),o=d[s],r=0===this.alpha()?c("transparent"):this,a=r[o.cache]||o.to(r._rgba),l=a.slice();return n=n[o.cache],f(o.props,function(e,s){var o=s.idx,r=a[o],c=n[o],d=h[s.type]||{};null!==c&&(null===r?l[o]=c:(d.mod&&(c-r>d.mod/2?r+=d.mod:r-c>d.mod/2&&(r-=d.mod)),l[o]=i((c-r)*t+r,s)))}),this[s](l)},blend:function(t){if(1===this._rgba[3])return this;var i=this._rgba.slice(),n=i.pop(),s=c(t)._rgba;return c(e.map(i,function(e,t){return(1-n)*s[t]+n*e}))},toRgbaString:function(){var t="rgba(",i=e.map(this._rgba,function(e,t){return null==e?t>2?1:0:e});return 1===i[3]&&(i.pop(),t="rgb("),t+i.join()+")"},toHslaString:function(){var t="hsla(",i=e.map(this.hsla(),function(e,t){return null==e&&(e=t>2?1:0),t&&3>t&&(e=Math.round(100*e)+"%"),e});return 1===i[3]&&(i.pop(),t="hsl("),t+i.join()+")"},toHexString:function(t){var i=this._rgba.slice(),n=i.pop();return t&&i.push(~~(255*n)),"#"+e.map(i,function(e){return e=(e||0).toString(16),1===e.length?"0"+e:e}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),c.fn.parse.prototype=c.fn,d.hsla.to=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t,i,n=e[0]/255,s=e[1]/255,o=e[2]/255,r=e[3],a=Math.max(n,s,o),l=Math.min(n,s,o),c=a-l,d=a+l,h=.5*d;return t=l===a?0:n===a?60*(s-o)/c+360:s===a?60*(o-n)/c+120:60*(n-s)/c+240,i=0===c?0:.5>=h?c/d:c/(2-d),[Math.round(t)%360,i,h,null==r?1:r]},d.hsla.from=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t=e[0]/360,i=e[1],n=e[2],o=e[3],r=.5>=n?n*(1+i):n+i-n*i,a=2*n-r;return[Math.round(255*s(a,r,t+1/3)),Math.round(255*s(a,r,t)),Math.round(255*s(a,r,t-1/3)),o]},f(d,function(n,s){var o=s.props,r=s.cache,l=s.to,d=s.from;c.fn[n]=function(n){if(l&&!this[r]&&(this[r]=l(this._rgba)),n===t)return this[r].slice();var s,a=e.type(n),h="array"===a||"object"===a?n:arguments,u=this[r].slice();return f(o,function(e,t){var n=h["object"===a?e:t.idx];null==n&&(n=u[t.idx]),u[t.idx]=i(n,t)}),d?(s=c(d(u)),s[r]=u,s):c(u)},f(o,function(t,i){c.fn[t]||(c.fn[t]=function(s){var o,r=e.type(s),l="alpha"===t?this._hsla?"hsla":"rgba":n,c=this[l](),d=c[i.idx];return"undefined"===r?d:("function"===r&&(s=s.call(this,d),r=e.type(s)),null==s&&i.empty?this:("string"===r&&(o=a.exec(s),o&&(s=d+parseFloat(o[2])*("+"===o[1]?1:-1))),c[i.idx]=s,this[l](c)))})})}),c.hook=function(t){var i=t.split(" ");f(i,function(t,i){e.cssHooks[i]={set:function(t,s){var o,r,a="";if("transparent"!==s&&("string"!==e.type(s)||(o=n(s)))){if(s=c(o||s),!u.rgba&&1!==s._rgba[3]){for(r="backgroundColor"===i?t.parentNode:t;(""===a||"transparent"===a)&&r&&r.style;)try{a=e.css(r,"backgroundColor"),r=r.parentNode}catch(l){}s=s.blend(a&&"transparent"!==a?a:"_default")}s=s.toRgbaString()}try{t.style[i]=s}catch(l){}}},e.fx.step[i]=function(t){t.colorInit||(t.start=c(t.elem,i),t.end=c(t.end),t.colorInit=!0),e.cssHooks[i].set(t.elem,t.start.transition(t.end,t.pos))}})},c.hook(r),e.cssHooks.borderColor={expand:function(e){var t={};return f(["Top","Right","Bottom","Left"],function(i,n){t["border"+n+"Color"]=e}),t}},o=e.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(jQuery),function(){function i(t){var i,n,s=t.ownerDocument.defaultView?t.ownerDocument.defaultView.getComputedStyle(t,null):t.currentStyle,o={};if(s&&s.length&&s[0]&&s[s[0]])for(n=s.length;n--;)i=s[n],"string"==typeof s[i]&&(o[e.camelCase(i)]=s[i]);else for(i in s)"string"==typeof s[i]&&(o[i]=s[i]);return o}function n(t,i){var n,s,r={};for(n in i)s=i[n],t[n]!==s&&(o[n]||(e.fx.step[n]||!isNaN(parseFloat(s)))&&(r[n]=s));return r}var s=["add","remove","toggle"],o={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};e.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(t,i){e.fx.step[i]=function(e){("none"!==e.end&&!e.setAttr||1===e.pos&&!e.setAttr)&&(jQuery.style(e.elem,i,e.end),e.setAttr=!0)}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e.effects.animateClass=function(t,o,r,a){var l=e.speed(o,r,a);return this.queue(function(){var o,r=e(this),a=r.attr("class")||"",c=l.children?r.find("*").addBack():r;c=c.map(function(){var t=e(this);return{el:t,start:i(this)}}),o=function(){e.each(s,function(e,i){t[i]&&r[i+"Class"](t[i])})},o(),c=c.map(function(){return this.end=i(this.el[0]),this.diff=n(this.start,this.end),this}),r.attr("class",a),c=c.map(function(){var t=this,i=e.Deferred(),n=e.extend({},l,{queue:!1,complete:function(){i.resolve(t)}});return this.el.animate(this.diff,n),i.promise()}),e.when.apply(e,c.get()).done(function(){o(),e.each(arguments,function(){var t=this.el;e.each(this.diff,function(e){t.css(e,"")})}),l.complete.call(r[0])})})},e.fn.extend({addClass:function(t){return function(i,n,s,o){return n?e.effects.animateClass.call(this,{add:i},n,s,o):t.apply(this,arguments)}}(e.fn.addClass),removeClass:function(t){return function(i,n,s,o){return arguments.length>1?e.effects.animateClass.call(this,{remove:i},n,s,o):t.apply(this,arguments)}}(e.fn.removeClass),toggleClass:function(i){return function(n,s,o,r,a){return"boolean"==typeof s||s===t?o?e.effects.animateClass.call(this,s?{add:n}:{remove:n},o,r,a):i.apply(this,arguments):e.effects.animateClass.call(this,{toggle:n},s,o,r)}}(e.fn.toggleClass),switchClass:function(t,i,n,s,o){return e.effects.animateClass.call(this,{add:i,remove:t},n,s,o)}})}(),function(){function n(t,i,n,s){return e.isPlainObject(t)&&(i=t,t=t.effect),t={effect:t},null==i&&(i={}),e.isFunction(i)&&(s=i,n=null,i={}),("number"==typeof i||e.fx.speeds[i])&&(s=n,n=i,i={}),e.isFunction(n)&&(s=n,n=null),i&&e.extend(t,i),n=n||i.duration,t.duration=e.fx.off?0:"number"==typeof n?n:n in e.fx.speeds?e.fx.speeds[n]:e.fx.speeds._default,t.complete=s||i.complete,t}function s(t){return!t||"number"==typeof t||e.fx.speeds[t]?!0:"string"!=typeof t||e.effects.effect[t]?e.isFunction(t)?!0:"object"==typeof t&&!t.effect:!0}e.extend(e.effects,{version:"1.10.3",save:function(e,t){for(var n=0;t.length>n;n++)null!==t[n]&&e.data(i+t[n],e[0].style[t[n]])},restore:function(e,n){var s,o;for(o=0;n.length>o;o++)null!==n[o]&&(s=e.data(i+n[o]),s===t&&(s=""),e.css(n[o],s))},setMode:function(e,t){return"toggle"===t&&(t=e.is(":hidden")?"show":"hide"),t},getBaseline:function(e,t){var i,n;switch(e[0]){case"top":i=0;break;case"middle":i=.5;break;case"bottom":i=1;break;default:i=e[0]/t.height}switch(e[1]){case"left":n=0;break;case"center":n=.5;break;case"right":n=1;break;default:n=e[1]/t.width}return{x:n,y:i}},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper"))return t.parent();var i={width:t.outerWidth(!0),height:t.outerHeight(!0),"float":t.css("float")},n=e("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),s={width:t.width(),height:t.height()},o=document.activeElement;try{o.id}catch(r){o=document.body}return t.wrap(n),(t[0]===o||e.contains(t[0],o))&&e(o).focus(),n=t.parent(),"static"===t.css("position")?(n.css({position:"relative"}),t.css({position:"relative"})):(e.extend(i,{position:t.css("position"),zIndex:t.css("z-index")}),e.each(["top","left","bottom","right"],function(e,n){i[n]=t.css(n),isNaN(parseInt(i[n],10))&&(i[n]="auto")}),t.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),t.css(s),n.css(i).show()},removeWrapper:function(t){var i=document.activeElement;return t.parent().is(".ui-effects-wrapper")&&(t.parent().replaceWith(t),(t[0]===i||e.contains(t[0],i))&&e(i).focus()),t},setTransition:function(t,i,n,s){return s=s||{},e.each(i,function(e,i){var o=t.cssUnit(i);o[0]>0&&(s[i]=o[0]*n+o[1])}),s}}),e.fn.extend({effect:function(){function t(t){function n(){e.isFunction(o)&&o.call(s[0]),e.isFunction(t)&&t()}var s=e(this),o=i.complete,a=i.mode;(s.is(":hidden")?"hide"===a:"show"===a)?(s[a](),n()):r.call(s[0],i,n)}var i=n.apply(this,arguments),s=i.mode,o=i.queue,r=e.effects.effect[i.effect];return e.fx.off||!r?s?this[s](i.duration,i.complete):this.each(function(){i.complete&&i.complete.call(this)}):o===!1?this.each(t):this.queue(o||"fx",t)},show:function(e){return function(t){if(s(t))return e.apply(this,arguments);var i=n.apply(this,arguments);return i.mode="show",this.effect.call(this,i)}}(e.fn.show),hide:function(e){return function(t){if(s(t))return e.apply(this,arguments);var i=n.apply(this,arguments);return i.mode="hide",this.effect.call(this,i)}}(e.fn.hide),toggle:function(e){return function(t){if(s(t)||"boolean"==typeof t)return e.apply(this,arguments);var i=n.apply(this,arguments);return i.mode="toggle",this.effect.call(this,i)}}(e.fn.toggle),cssUnit:function(t){var i=this.css(t),n=[];return e.each(["em","px","%","pt"],function(e,t){i.indexOf(t)>0&&(n=[parseFloat(i),t])}),n}})}(),function(){var t={};e.each(["Quad","Cubic","Quart","Quint","Expo"],function(e,i){t[i]=function(t){return Math.pow(t,e+2)}}),e.extend(t,{Sine:function(e){return 1-Math.cos(e*Math.PI/2)},Circ:function(e){return 1-Math.sqrt(1-e*e)},Elastic:function(e){return 0===e||1===e?e:-Math.pow(2,8*(e-1))*Math.sin((80*(e-1)-7.5)*Math.PI/15)},Back:function(e){return e*e*(3*e-2)},Bounce:function(e){for(var t,i=4;((t=Math.pow(2,--i))-1)/11>e;);return 1/Math.pow(4,3-i)-7.5625*Math.pow((3*t-2)/22-e,2)}}),e.each(t,function(t,i){e.easing["easeIn"+t]=i,e.easing["easeOut"+t]=function(e){return 1-i(1-e)},e.easing["easeInOut"+t]=function(e){return.5>e?i(2*e)/2:1-i(-2*e+2)/2}})}()}(jQuery),function(e){var t=0,i={},n={};i.height=i.paddingTop=i.paddingBottom=i.borderTopWidth=i.borderBottomWidth="hide",n.height=n.paddingTop=n.paddingBottom=n.borderTopWidth=n.borderBottomWidth="show",e.widget("ui.accordion",{version:"1.10.3",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},_create:function(){var t=this.options;this.prevShow=this.prevHide=e(),this.element.addClass("ui-accordion ui-widget ui-helper-reset").attr("role","tablist"),t.collapsible||t.active!==!1&&null!=t.active||(t.active=0),this._processPanels(),0>t.active&&(t.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():e(),content:this.active.length?this.active.next():e()}},_createIcons:function(){var t=this.options.icons;t&&(e("<span>").addClass("ui-accordion-header-icon ui-icon "+t.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(t.header).addClass(t.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var e;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),this._destroyIcons(),e=this.headers.next().css("display","").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),"content"!==this.options.heightStyle&&e.css("height","")},_setOption:function(e,t){return"active"===e?void this._activate(t):("event"===e&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(t)),this._super(e,t),"collapsible"!==e||t||this.options.active!==!1||this._activate(0),"icons"===e&&(this._destroyIcons(),t&&this._createIcons()),void("disabled"===e&&this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!t)))},_keydown:function(t){if(!t.altKey&&!t.ctrlKey){var i=e.ui.keyCode,n=this.headers.length,s=this.headers.index(t.target),o=!1;switch(t.keyCode){case i.RIGHT:case i.DOWN:o=this.headers[(s+1)%n];break;case i.LEFT:case i.UP:o=this.headers[(s-1+n)%n];break;case i.SPACE:case i.ENTER:this._eventHandler(t);break;case i.HOME:o=this.headers[0];break;case i.END:o=this.headers[n-1]}o&&(e(t.target).attr("tabIndex",-1),e(o).attr("tabIndex",0),o.focus(),t.preventDefault())}},_panelKeyDown:function(t){t.keyCode===e.ui.keyCode.UP&&t.ctrlKey&&e(t.currentTarget).prev().focus();
},refresh:function(){var t=this.options;this._processPanels(),t.active===!1&&t.collapsible===!0||!this.headers.length?(t.active=!1,this.active=e()):t.active===!1?this._activate(0):this.active.length&&!e.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(t.active=!1,this.active=e()):this._activate(Math.max(0,t.active-1)):t.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){this.headers=this.element.find(this.options.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all"),this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").filter(":not(.ui-accordion-content-active)").hide()},_refresh:function(){var i,n=this.options,s=n.heightStyle,o=this.element.parent(),r=this.accordionId="ui-accordion-"+(this.element.attr("id")||++t);this.active=this._findActive(n.active).addClass("ui-accordion-header-active ui-state-active ui-corner-top").removeClass("ui-corner-all"),this.active.next().addClass("ui-accordion-content-active").show(),this.headers.attr("role","tab").each(function(t){var i=e(this),n=i.attr("id"),s=i.next(),o=s.attr("id");n||(n=r+"-header-"+t,i.attr("id",n)),o||(o=r+"-panel-"+t,s.attr("id",o)),i.attr("aria-controls",o),s.attr("aria-labelledby",n)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false",tabIndex:-1}).next().attr({"aria-expanded":"false","aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true",tabIndex:0}).next().attr({"aria-expanded":"true","aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(n.event),"fill"===s?(i=o.height(),this.element.siblings(":visible").each(function(){var t=e(this),n=t.css("position");"absolute"!==n&&"fixed"!==n&&(i-=t.outerHeight(!0))}),this.headers.each(function(){i-=e(this).outerHeight(!0)}),this.headers.next().each(function(){e(this).height(Math.max(0,i-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):"auto"===s&&(i=0,this.headers.next().each(function(){i=Math.max(i,e(this).css("height","").height())}).height(i))},_activate:function(t){var i=this._findActive(t)[0];i!==this.active[0]&&(i=i||this.active[0],this._eventHandler({target:i,currentTarget:i,preventDefault:e.noop}))},_findActive:function(t){return"number"==typeof t?this.headers.eq(t):e()},_setupEvents:function(t){var i={keydown:"_keydown"};t&&e.each(t.split(" "),function(e,t){i[t]="_eventHandler"}),this._off(this.headers.add(this.headers.next())),this._on(this.headers,i),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(t){var i=this.options,n=this.active,s=e(t.currentTarget),o=s[0]===n[0],r=o&&i.collapsible,a=r?e():s.next(),l=n.next(),c={oldHeader:n,oldPanel:l,newHeader:r?e():s,newPanel:a};t.preventDefault(),o&&!i.collapsible||this._trigger("beforeActivate",t,c)===!1||(i.active=r?!1:this.headers.index(s),this.active=o?e():s,this._toggle(c),n.removeClass("ui-accordion-header-active ui-state-active"),i.icons&&n.children(".ui-accordion-header-icon").removeClass(i.icons.activeHeader).addClass(i.icons.header),o||(s.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),i.icons&&s.children(".ui-accordion-header-icon").removeClass(i.icons.header).addClass(i.icons.activeHeader),s.next().addClass("ui-accordion-content-active")))},_toggle:function(t){var i=t.newPanel,n=this.prevShow.length?this.prevShow:t.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=i,this.prevHide=n,this.options.animate?this._animate(i,n,t):(n.hide(),i.show(),this._toggleComplete(t)),n.attr({"aria-expanded":"false","aria-hidden":"true"}),n.prev().attr("aria-selected","false"),i.length&&n.length?n.prev().attr("tabIndex",-1):i.length&&this.headers.filter(function(){return 0===e(this).attr("tabIndex")}).attr("tabIndex",-1),i.attr({"aria-expanded":"true","aria-hidden":"false"}).prev().attr({"aria-selected":"true",tabIndex:0})},_animate:function(e,t,s){var o,r,a,l=this,c=0,d=e.length&&(!t.length||e.index()<t.index()),h=this.options.animate||{},u=d&&h.down||h,p=function(){l._toggleComplete(s)};return"number"==typeof u&&(a=u),"string"==typeof u&&(r=u),r=r||u.easing||h.easing,a=a||u.duration||h.duration,t.length?e.length?(o=e.show().outerHeight(),t.animate(i,{duration:a,easing:r,step:function(e,t){t.now=Math.round(e)}}),void e.hide().animate(n,{duration:a,easing:r,complete:p,step:function(e,i){i.now=Math.round(e),"height"!==i.prop?c+=i.now:"content"!==l.options.heightStyle&&(i.now=Math.round(o-t.outerHeight()-c),c=0)}})):t.animate(i,a,r,p):e.animate(n,a,r,p)},_toggleComplete:function(e){var t=e.oldPanel;t.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all"),t.length&&(t.parent()[0].className=t.parent()[0].className),this._trigger("activate",null,e)}})}(jQuery),function(e){var t=0;e.widget("ui.autocomplete",{version:"1.10.3",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},pending:0,_create:function(){var t,i,n,s=this.element[0].nodeName.toLowerCase(),o="textarea"===s,r="input"===s;this.isMultiLine=o?!0:r?!1:this.element.prop("isContentEditable"),this.valueMethod=this.element[o||r?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(s){if(this.element.prop("readOnly"))return t=!0,n=!0,void(i=!0);t=!1,n=!1,i=!1;var o=e.ui.keyCode;switch(s.keyCode){case o.PAGE_UP:t=!0,this._move("previousPage",s);break;case o.PAGE_DOWN:t=!0,this._move("nextPage",s);break;case o.UP:t=!0,this._keyEvent("previous",s);break;case o.DOWN:t=!0,this._keyEvent("next",s);break;case o.ENTER:case o.NUMPAD_ENTER:this.menu.active&&(t=!0,s.preventDefault(),this.menu.select(s));break;case o.TAB:this.menu.active&&this.menu.select(s);break;case o.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(s),s.preventDefault());break;default:i=!0,this._searchTimeout(s)}},keypress:function(n){if(t)return t=!1,void((!this.isMultiLine||this.menu.element.is(":visible"))&&n.preventDefault());if(!i){var s=e.ui.keyCode;switch(n.keyCode){case s.PAGE_UP:this._move("previousPage",n);break;case s.PAGE_DOWN:this._move("nextPage",n);break;case s.UP:this._keyEvent("previous",n);break;case s.DOWN:this._keyEvent("next",n)}}},input:function(e){return n?(n=!1,void e.preventDefault()):void this._searchTimeout(e)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(e){return this.cancelBlur?void delete this.cancelBlur:(clearTimeout(this.searching),this.close(e),void this._change(e))}}),this._initSource(),this.menu=e("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().data("ui-menu"),this._on(this.menu.element,{mousedown:function(t){t.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var i=this.menu.element[0];e(t.target).closest(".ui-menu-item").length||this._delay(function(){var t=this;this.document.one("mousedown",function(n){n.target===t.element[0]||n.target===i||e.contains(i,n.target)||t.close()})})},menufocus:function(t,i){if(this.isNewMenu&&(this.isNewMenu=!1,t.originalEvent&&/^mouse/.test(t.originalEvent.type)))return this.menu.blur(),void this.document.one("mousemove",function(){e(t.target).trigger(t.originalEvent)});var n=i.item.data("ui-autocomplete-item");!1!==this._trigger("focus",t,{item:n})?t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(n.value):this.liveRegion.text(n.value)},menuselect:function(e,t){var i=t.item.data("ui-autocomplete-item"),n=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=n,this._delay(function(){this.previous=n,this.selectedItem=i})),!1!==this._trigger("select",e,{item:i})&&this._value(i.value),this.term=this._value(),this.close(e),this.selectedItem=i}}),this.liveRegion=e("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertBefore(this.element),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(e,t){this._super(e,t),"source"===e&&this._initSource(),"appendTo"===e&&this.menu.element.appendTo(this._appendTo()),"disabled"===e&&t&&this.xhr&&this.xhr.abort()},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0)),t||(t=this.element.closest(".ui-front")),t.length||(t=this.document[0].body),t},_initSource:function(){var t,i,n=this;e.isArray(this.options.source)?(t=this.options.source,this.source=function(i,n){n(e.ui.autocomplete.filter(t,i.term))}):"string"==typeof this.options.source?(i=this.options.source,this.source=function(t,s){n.xhr&&n.xhr.abort(),n.xhr=e.ajax({url:i,data:t,dataType:"json",success:function(e){s(e)},error:function(){s([])}})}):this.source=this.options.source},_searchTimeout:function(e){clearTimeout(this.searching),this.searching=this._delay(function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,e))},this.options.delay)},search:function(e,t){return e=null!=e?e:this._value(),this.term=this._value(),e.length<this.options.minLength?this.close(t):this._trigger("search",t)!==!1?this._search(e):void 0},_search:function(e){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:e},this._response())},_response:function(){var e=this,i=++t;return function(n){i===t&&e.__response(n),e.pending--,e.pending||e.element.removeClass("ui-autocomplete-loading")}},__response:function(e){e&&(e=this._normalize(e)),this._trigger("response",null,{content:e}),!this.options.disabled&&e&&e.length&&!this.cancelSearch?(this._suggest(e),this._trigger("open")):this._close()},close:function(e){this.cancelSearch=!0,this._close(e)},_close:function(e){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",e))},_change:function(e){this.previous!==this._value()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,function(t){return"string"==typeof t?{label:t,value:t}:e.extend({label:t.label||t.value,value:t.value||t.label},t)})},_suggest:function(t){var i=this.menu.element.empty();this._renderMenu(i,t),this.isNewMenu=!0,this.menu.refresh(),i.show(),this._resizeMenu(),i.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,i){var n=this;e.each(i,function(e,i){n._renderItemData(t,i)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function(t,i){return e("<li>").append(e("<a>").text(i.label)).appendTo(t)},_move:function(e,t){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)?(this._value(this.term),void this.menu.blur()):void this.menu[e](t):void this.search(null,t)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(e,t),t.preventDefault())}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,i){var n=RegExp(e.ui.autocomplete.escapeRegex(i),"i");return e.grep(t,function(e){return n.test(e.label||e.value||e)})}}),e.widget("ui.autocomplete",e.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(e){return e+(e>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(e){var t;this._superApply(arguments),this.options.disabled||this.cancelSearch||(t=e&&e.length?this.options.messages.results(e.length):this.options.messages.noResults,this.liveRegion.text(t))}})}(jQuery),function(e){var t,i,n,s,o="ui-button ui-widget ui-state-default ui-corner-all",r="ui-state-hover ui-state-active ",a="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",l=function(){var t=e(this);setTimeout(function(){t.find(":ui-button").button("refresh")},1)},c=function(t){var i=t.name,n=t.form,s=e([]);return i&&(i=i.replace(/'/g,"\\'"),s=n?e(n).find("[name='"+i+"']"):e("[name='"+i+"']",t.ownerDocument).filter(function(){return!this.form})),s};e.widget("ui.button",{version:"1.10.3",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,l),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var r=this,a=this.options,d="checkbox"===this.type||"radio"===this.type,h=d?"":"ui-state-active",u="ui-state-focus";null===a.label&&(a.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(o).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){a.disabled||this===t&&e(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){a.disabled||e(this).removeClass(h)}).bind("click"+this.eventNamespace,function(e){a.disabled&&(e.preventDefault(),e.stopImmediatePropagation())}),this.element.bind("focus"+this.eventNamespace,function(){r.buttonElement.addClass(u)}).bind("blur"+this.eventNamespace,function(){r.buttonElement.removeClass(u)}),d&&(this.element.bind("change"+this.eventNamespace,function(){s||r.refresh()}),this.buttonElement.bind("mousedown"+this.eventNamespace,function(e){a.disabled||(s=!1,i=e.pageX,n=e.pageY)}).bind("mouseup"+this.eventNamespace,function(e){a.disabled||(i!==e.pageX||n!==e.pageY)&&(s=!0)})),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){return a.disabled||s?!1:void 0}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(a.disabled||s)return!1;e(this).addClass("ui-state-active"),r.buttonElement.attr("aria-pressed","true");var t=r.element[0];c(t).not(t).map(function(){return e(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){return a.disabled?!1:(e(this).addClass("ui-state-active"),t=this,void r.document.one("mouseup",function(){t=null}))}).bind("mouseup"+this.eventNamespace,function(){return a.disabled?!1:void e(this).removeClass("ui-state-active")}).bind("keydown"+this.eventNamespace,function(t){return a.disabled?!1:void((t.keyCode===e.ui.keyCode.SPACE||t.keyCode===e.ui.keyCode.ENTER)&&e(this).addClass("ui-state-active"))}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){e(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(t){t.keyCode===e.ui.keyCode.SPACE&&e(this).click()})),this._setOption("disabled",a.disabled),this._resetButton()},_determineButtonType:function(){var e,t,i;this.type=this.element.is("[type=checkbox]")?"checkbox":this.element.is("[type=radio]")?"radio":this.element.is("input")?"input":"button","checkbox"===this.type||"radio"===this.type?(e=this.element.parents().last(),t="label[for='"+this.element.attr("id")+"']",this.buttonElement=e.find(t),this.buttonElement.length||(e=e.length?e.siblings():this.element.siblings(),this.buttonElement=e.filter(t),this.buttonElement.length||(this.buttonElement=e.find(t))),this.element.addClass("ui-helper-hidden-accessible"),i=this.element.is(":checked"),i&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",i)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(o+" "+r+" "+a).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(e,t){return this._super(e,t),"disabled"===e?void(t?this.element.prop("disabled",!0):this.element.prop("disabled",!1)):void this._resetButton()},refresh:function(){var t=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");t!==this.options.disabled&&this._setOption("disabled",t),"radio"===this.type?c(this.element[0]).each(function(){e(this).is(":checked")?e(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):e(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)return void(this.options.label&&this.element.val(this.options.label));var t=this.buttonElement.removeClass(a),i=e("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(t.empty()).text(),n=this.options.icons,s=n.primary&&n.secondary,o=[];n.primary||n.secondary?(this.options.text&&o.push("ui-button-text-icon"+(s?"s":n.primary?"-primary":"-secondary")),n.primary&&t.prepend("<span class='ui-button-icon-primary ui-icon "+n.primary+"'></span>"),n.secondary&&t.append("<span class='ui-button-icon-secondary ui-icon "+n.secondary+"'></span>"),this.options.text||(o.push(s?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||t.attr("title",e.trim(i)))):o.push("ui-button-text-only"),t.addClass(o.join(" "))}}),e.widget("ui.buttonset",{version:"1.10.3",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(e,t){"disabled"===e&&this.buttons.button("option",e,t),this._super(e,t)},refresh:function(){var t="rtl"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(t?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(t?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})}(jQuery),function(e,t){function i(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},e.extend(this._defaults,this.regional[""]),this.dpDiv=n(e("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function n(t){var i="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return t.delegate(i,"mouseout",function(){e(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).removeClass("ui-datepicker-next-hover")}).delegate(i,"mouseover",function(){e.datepicker._isDisabledDatepicker(o.inline?t.parent()[0]:o.input[0])||(e(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),e(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).addClass("ui-datepicker-next-hover"))})}function s(t,i){e.extend(t,i);for(var n in i)null==i[n]&&(t[n]=i[n]);return t}e.extend(e.ui,{datepicker:{version:"1.10.3"}});var o,r="datepicker";e.extend(i.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return s(this._defaults,e||{}),this},_attachDatepicker:function(t,i){var n,s,o;n=t.nodeName.toLowerCase(),s="div"===n||"span"===n,t.id||(this.uuid+=1,t.id="dp"+this.uuid),o=this._newInst(e(t),s),o.settings=e.extend({},i||{}),"input"===n?this._connectDatepicker(t,o):s&&this._inlineDatepicker(t,o)},_newInst:function(t,i){var s=t[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:s,input:t,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:i,dpDiv:i?n(e("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(t,i){var n=e(t);i.append=e([]),i.trigger=e([]),n.hasClass(this.markerClassName)||(this._attachments(n,i),n.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(i),e.data(t,r,i),i.settings.disabled&&this._disableDatepicker(t))},_attachments:function(t,i){var n,s,o,r=this._get(i,"appendText"),a=this._get(i,"isRTL");i.append&&i.append.remove(),r&&(i.append=e("<span class='"+this._appendClass+"'>"+r+"</span>"),t[a?"before":"after"](i.append)),t.unbind("focus",this._showDatepicker),i.trigger&&i.trigger.remove(),n=this._get(i,"showOn"),("focus"===n||"both"===n)&&t.focus(this._showDatepicker),("button"===n||"both"===n)&&(s=this._get(i,"buttonText"),o=this._get(i,"buttonImage"),i.trigger=e(this._get(i,"buttonImageOnly")?e("<img/>").addClass(this._triggerClass).attr({src:o,alt:s,title:s}):e("<button type='button'></button>").addClass(this._triggerClass).html(o?e("<img/>").attr({src:o,alt:s,title:s}):s)),t[a?"before":"after"](i.trigger),i.trigger.click(function(){return e.datepicker._datepickerShowing&&e.datepicker._lastInput===t[0]?e.datepicker._hideDatepicker():e.datepicker._datepickerShowing&&e.datepicker._lastInput!==t[0]?(e.datepicker._hideDatepicker(),e.datepicker._showDatepicker(t[0])):e.datepicker._showDatepicker(t[0]),!1}))},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t,i,n,s,o=new Date(2009,11,20),r=this._get(e,"dateFormat");r.match(/[DM]/)&&(t=function(e){for(i=0,n=0,s=0;e.length>s;s++)e[s].length>i&&(i=e[s].length,n=s);return n},o.setMonth(t(this._get(e,r.match(/MM/)?"monthNames":"monthNamesShort"))),o.setDate(t(this._get(e,r.match(/DD/)?"dayNames":"dayNamesShort"))+20-o.getDay())),e.input.attr("size",this._formatDate(e,o).length)}},_inlineDatepicker:function(t,i){var n=e(t);n.hasClass(this.markerClassName)||(n.addClass(this.markerClassName).append(i.dpDiv),e.data(t,r,i),this._setDate(i,this._getDefaultDate(i),!0),this._updateDatepicker(i),this._updateAlternate(i),i.settings.disabled&&this._disableDatepicker(t),i.dpDiv.css("display","block"))},_dialogDatepicker:function(t,i,n,o,a){var l,c,d,h,u,p=this._dialogInst;return p||(this.uuid+=1,l="dp"+this.uuid,this._dialogInput=e("<input type='text' id='"+l+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),e("body").append(this._dialogInput),p=this._dialogInst=this._newInst(this._dialogInput,!1),p.settings={},e.data(this._dialogInput[0],r,p)),s(p.settings,o||{}),i=i&&i.constructor===Date?this._formatDate(p,i):i,this._dialogInput.val(i),this._pos=a?a.length?a:[a.pageX,a.pageY]:null,this._pos||(c=document.documentElement.clientWidth,d=document.documentElement.clientHeight,h=document.documentElement.scrollLeft||document.body.scrollLeft,u=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[c/2-100+h,d/2-150+u]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),p.settings.onSelect=n,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),e.blockUI&&e.blockUI(this.dpDiv),e.data(this._dialogInput[0],r,p),this},_destroyDatepicker:function(t){var i,n=e(t),s=e.data(t,r);n.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),e.removeData(t,r),"input"===i?(s.append.remove(),s.trigger.remove(),n.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"===i||"span"===i)&&n.removeClass(this.markerClassName).empty())},_enableDatepicker:function(t){var i,n,s=e(t),o=e.data(t,r);s.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),"input"===i?(t.disabled=!1,o.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):("div"===i||"span"===i)&&(n=s.children("."+this._inlineClass),n.children().removeClass("ui-state-disabled"),n.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}))},_disableDatepicker:function(t){var i,n,s=e(t),o=e.data(t,r);s.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),"input"===i?(t.disabled=!0,o.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):("div"===i||"span"===i)&&(n=s.children("."+this._inlineClass),n.children().addClass("ui-state-disabled"),n.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}),this._disabledInputs[this._disabledInputs.length]=t)},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;this._disabledInputs.length>t;t++)if(this._disabledInputs[t]===e)return!0;return!1},_getInst:function(t){try{return e.data(t,r)}catch(i){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(i,n,o){var r,a,l,c,d=this._getInst(i);return 2===arguments.length&&"string"==typeof n?"defaults"===n?e.extend({},e.datepicker._defaults):d?"all"===n?e.extend({},d.settings):this._get(d,n):null:(r=n||{},"string"==typeof n&&(r={},r[n]=o),d&&(this._curInst===d&&this._hideDatepicker(),a=this._getDateDatepicker(i,!0),l=this._getMinMaxDate(d,"min"),c=this._getMinMaxDate(d,"max"),s(d.settings,r),null!==l&&r.dateFormat!==t&&r.minDate===t&&(d.settings.minDate=this._formatDate(d,l)),null!==c&&r.dateFormat!==t&&r.maxDate===t&&(d.settings.maxDate=this._formatDate(d,c)),"disabled"in r&&(r.disabled?this._disableDatepicker(i):this._enableDatepicker(i)),this._attachments(e(i),d),this._autoSize(d),this._setDate(d,a),this._updateAlternate(d),this._updateDatepicker(d)),t)},_changeDatepicker:function(e,t,i){this._optionDatepicker(e,t,i)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t){var i=this._getInst(e);i&&(this._setDate(i,t),this._updateDatepicker(i),this._updateAlternate(i))},_getDateDatepicker:function(e,t){var i=this._getInst(e);return i&&!i.inline&&this._setDateFromField(i,t),i?this._getDate(i):null},_doKeyDown:function(t){var i,n,s,o=e.datepicker._getInst(t.target),r=!0,a=o.dpDiv.is(".ui-datepicker-rtl");if(o._keyEvent=!0,e.datepicker._datepickerShowing)switch(t.keyCode){case 9:e.datepicker._hideDatepicker(),r=!1;break;case 13:return s=e("td."+e.datepicker._dayOverClass+":not(."+e.datepicker._currentClass+")",o.dpDiv),s[0]&&e.datepicker._selectDay(t.target,o.selectedMonth,o.selectedYear,s[0]),i=e.datepicker._get(o,"onSelect"),i?(n=e.datepicker._formatDate(o),i.apply(o.input?o.input[0]:null,[n,o])):e.datepicker._hideDatepicker(),!1;case 27:e.datepicker._hideDatepicker();break;case 33:e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(o,"stepBigMonths"):-e.datepicker._get(o,"stepMonths"),"M");break;case 34:e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(o,"stepBigMonths"):+e.datepicker._get(o,"stepMonths"),"M");break;case 35:(t.ctrlKey||t.metaKey)&&e.datepicker._clearDate(t.target),r=t.ctrlKey||t.metaKey;break;case 36:(t.ctrlKey||t.metaKey)&&e.datepicker._gotoToday(t.target),r=t.ctrlKey||t.metaKey;break;case 37:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,a?1:-1,"D"),r=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(o,"stepBigMonths"):-e.datepicker._get(o,"stepMonths"),"M");break;case 38:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,-7,"D"),r=t.ctrlKey||t.metaKey;break;case 39:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,a?-1:1,"D"),r=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(o,"stepBigMonths"):+e.datepicker._get(o,"stepMonths"),"M");break;case 40:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,7,"D"),r=t.ctrlKey||t.metaKey;break;default:r=!1}else 36===t.keyCode&&t.ctrlKey?e.datepicker._showDatepicker(this):r=!1;r&&(t.preventDefault(),t.stopPropagation())},_doKeyPress:function(i){var n,s,o=e.datepicker._getInst(i.target);return e.datepicker._get(o,"constrainInput")?(n=e.datepicker._possibleChars(e.datepicker._get(o,"dateFormat")),s=String.fromCharCode(null==i.charCode?i.keyCode:i.charCode),i.ctrlKey||i.metaKey||" ">s||!n||n.indexOf(s)>-1):t},_doKeyUp:function(t){var i,n=e.datepicker._getInst(t.target);if(n.input.val()!==n.lastVal)try{i=e.datepicker.parseDate(e.datepicker._get(n,"dateFormat"),n.input?n.input.val():null,e.datepicker._getFormatConfig(n)),i&&(e.datepicker._setDateFromField(n),e.datepicker._updateAlternate(n),e.datepicker._updateDatepicker(n))}catch(s){}return!0},_showDatepicker:function(t){if(t=t.target||t,"input"!==t.nodeName.toLowerCase()&&(t=e("input",t.parentNode)[0]),!e.datepicker._isDisabledDatepicker(t)&&e.datepicker._lastInput!==t){var i,n,o,r,a,l,c;i=e.datepicker._getInst(t),e.datepicker._curInst&&e.datepicker._curInst!==i&&(e.datepicker._curInst.dpDiv.stop(!0,!0),i&&e.datepicker._datepickerShowing&&e.datepicker._hideDatepicker(e.datepicker._curInst.input[0])),n=e.datepicker._get(i,"beforeShow"),o=n?n.apply(t,[t,i]):{},o!==!1&&(s(i.settings,o),i.lastVal=null,e.datepicker._lastInput=t,e.datepicker._setDateFromField(i),e.datepicker._inDialog&&(t.value=""),e.datepicker._pos||(e.datepicker._pos=e.datepicker._findPos(t),e.datepicker._pos[1]+=t.offsetHeight),r=!1,e(t).parents().each(function(){return r|="fixed"===e(this).css("position"),!r}),a={left:e.datepicker._pos[0],top:e.datepicker._pos[1]},e.datepicker._pos=null,i.dpDiv.empty(),
i.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),e.datepicker._updateDatepicker(i),a=e.datepicker._checkOffset(i,a,r),i.dpDiv.css({position:e.datepicker._inDialog&&e.blockUI?"static":r?"fixed":"absolute",display:"none",left:a.left+"px",top:a.top+"px"}),i.inline||(l=e.datepicker._get(i,"showAnim"),c=e.datepicker._get(i,"duration"),i.dpDiv.zIndex(e(t).zIndex()+1),e.datepicker._datepickerShowing=!0,e.effects&&e.effects.effect[l]?i.dpDiv.show(l,e.datepicker._get(i,"showOptions"),c):i.dpDiv[l||"show"](l?c:null),e.datepicker._shouldFocusInput(i)&&i.input.focus(),e.datepicker._curInst=i))}},_updateDatepicker:function(t){this.maxRows=4,o=t,t.dpDiv.empty().append(this._generateHTML(t)),this._attachHandlers(t),t.dpDiv.find("."+this._dayOverClass+" a").mouseover();var i,n=this._getNumberOfMonths(t),s=n[1],r=17;t.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),s>1&&t.dpDiv.addClass("ui-datepicker-multi-"+s).css("width",r*s+"em"),t.dpDiv[(1!==n[0]||1!==n[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),t.dpDiv[(this._get(t,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),t===e.datepicker._curInst&&e.datepicker._datepickerShowing&&e.datepicker._shouldFocusInput(t)&&t.input.focus(),t.yearshtml&&(i=t.yearshtml,setTimeout(function(){i===t.yearshtml&&t.yearshtml&&t.dpDiv.find("select.ui-datepicker-year:first").replaceWith(t.yearshtml),i=t.yearshtml=null},0))},_shouldFocusInput:function(e){return e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&!e.input.is(":focus")},_checkOffset:function(t,i,n){var s=t.dpDiv.outerWidth(),o=t.dpDiv.outerHeight(),r=t.input?t.input.outerWidth():0,a=t.input?t.input.outerHeight():0,l=document.documentElement.clientWidth+(n?0:e(document).scrollLeft()),c=document.documentElement.clientHeight+(n?0:e(document).scrollTop());return i.left-=this._get(t,"isRTL")?s-r:0,i.left-=n&&i.left===t.input.offset().left?e(document).scrollLeft():0,i.top-=n&&i.top===t.input.offset().top+a?e(document).scrollTop():0,i.left-=Math.min(i.left,i.left+s>l&&l>s?Math.abs(i.left+s-l):0),i.top-=Math.min(i.top,i.top+o>c&&c>o?Math.abs(o+a):0),i},_findPos:function(t){for(var i,n=this._getInst(t),s=this._get(n,"isRTL");t&&("hidden"===t.type||1!==t.nodeType||e.expr.filters.hidden(t));)t=t[s?"previousSibling":"nextSibling"];return i=e(t).offset(),[i.left,i.top]},_hideDatepicker:function(t){var i,n,s,o,a=this._curInst;!a||t&&a!==e.data(t,r)||this._datepickerShowing&&(i=this._get(a,"showAnim"),n=this._get(a,"duration"),s=function(){e.datepicker._tidyDialog(a)},e.effects&&(e.effects.effect[i]||e.effects[i])?a.dpDiv.hide(i,e.datepicker._get(a,"showOptions"),n,s):a.dpDiv["slideDown"===i?"slideUp":"fadeIn"===i?"fadeOut":"hide"](i?n:null,s),i||s(),this._datepickerShowing=!1,o=this._get(a,"onClose"),o&&o.apply(a.input?a.input[0]:null,[a.input?a.input.val():"",a]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),e.blockUI&&(e.unblockUI(),e("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(t){if(e.datepicker._curInst){var i=e(t.target),n=e.datepicker._getInst(i[0]);(i[0].id!==e.datepicker._mainDivId&&0===i.parents("#"+e.datepicker._mainDivId).length&&!i.hasClass(e.datepicker.markerClassName)&&!i.closest("."+e.datepicker._triggerClass).length&&e.datepicker._datepickerShowing&&(!e.datepicker._inDialog||!e.blockUI)||i.hasClass(e.datepicker.markerClassName)&&e.datepicker._curInst!==n)&&e.datepicker._hideDatepicker()}},_adjustDate:function(t,i,n){var s=e(t),o=this._getInst(s[0]);this._isDisabledDatepicker(s[0])||(this._adjustInstDate(o,i+("M"===n?this._get(o,"showCurrentAtPos"):0),n),this._updateDatepicker(o))},_gotoToday:function(t){var i,n=e(t),s=this._getInst(n[0]);this._get(s,"gotoCurrent")&&s.currentDay?(s.selectedDay=s.currentDay,s.drawMonth=s.selectedMonth=s.currentMonth,s.drawYear=s.selectedYear=s.currentYear):(i=new Date,s.selectedDay=i.getDate(),s.drawMonth=s.selectedMonth=i.getMonth(),s.drawYear=s.selectedYear=i.getFullYear()),this._notifyChange(s),this._adjustDate(n)},_selectMonthYear:function(t,i,n){var s=e(t),o=this._getInst(s[0]);o["selected"+("M"===n?"Month":"Year")]=o["draw"+("M"===n?"Month":"Year")]=parseInt(i.options[i.selectedIndex].value,10),this._notifyChange(o),this._adjustDate(s)},_selectDay:function(t,i,n,s){var o,r=e(t);e(s).hasClass(this._unselectableClass)||this._isDisabledDatepicker(r[0])||(o=this._getInst(r[0]),o.selectedDay=o.currentDay=e("a",s).html(),o.selectedMonth=o.currentMonth=i,o.selectedYear=o.currentYear=n,this._selectDate(t,this._formatDate(o,o.currentDay,o.currentMonth,o.currentYear)))},_clearDate:function(t){var i=e(t);this._selectDate(i,"")},_selectDate:function(t,i){var n,s=e(t),o=this._getInst(s[0]);i=null!=i?i:this._formatDate(o),o.input&&o.input.val(i),this._updateAlternate(o),n=this._get(o,"onSelect"),n?n.apply(o.input?o.input[0]:null,[i,o]):o.input&&o.input.trigger("change"),o.inline?this._updateDatepicker(o):(this._hideDatepicker(),this._lastInput=o.input[0],"object"!=typeof o.input[0]&&o.input.focus(),this._lastInput=null)},_updateAlternate:function(t){var i,n,s,o=this._get(t,"altField");o&&(i=this._get(t,"altFormat")||this._get(t,"dateFormat"),n=this._getDate(t),s=this.formatDate(i,n,this._getFormatConfig(t)),e(o).each(function(){e(this).val(s)}))},noWeekends:function(e){var t=e.getDay();return[t>0&&6>t,""]},iso8601Week:function(e){var t,i=new Date(e.getTime());return i.setDate(i.getDate()+4-(i.getDay()||7)),t=i.getTime(),i.setMonth(0),i.setDate(1),Math.floor(Math.round((t-i)/864e5)/7)+1},parseDate:function(i,n,s){if(null==i||null==n)throw"Invalid arguments";if(n="object"==typeof n?""+n:n+"",""===n)return null;var o,r,a,l,c=0,d=(s?s.shortYearCutoff:null)||this._defaults.shortYearCutoff,h="string"!=typeof d?d:(new Date).getFullYear()%100+parseInt(d,10),u=(s?s.dayNamesShort:null)||this._defaults.dayNamesShort,p=(s?s.dayNames:null)||this._defaults.dayNames,f=(s?s.monthNamesShort:null)||this._defaults.monthNamesShort,m=(s?s.monthNames:null)||this._defaults.monthNames,g=-1,v=-1,b=-1,y=-1,w=!1,_=function(e){var t=i.length>o+1&&i.charAt(o+1)===e;return t&&o++,t},k=function(e){var t=_(e),i="@"===e?14:"!"===e?20:"y"===e&&t?4:"o"===e?3:2,s=RegExp("^\\d{1,"+i+"}"),o=n.substring(c).match(s);if(!o)throw"Missing number at position "+c;return c+=o[0].length,parseInt(o[0],10)},x=function(i,s,o){var r=-1,a=e.map(_(i)?o:s,function(e,t){return[[t,e]]}).sort(function(e,t){return-(e[1].length-t[1].length)});if(e.each(a,function(e,i){var s=i[1];return n.substr(c,s.length).toLowerCase()===s.toLowerCase()?(r=i[0],c+=s.length,!1):t}),-1!==r)return r+1;throw"Unknown name at position "+c},C=function(){if(n.charAt(c)!==i.charAt(o))throw"Unexpected literal at position "+c;c++};for(o=0;i.length>o;o++)if(w)"'"!==i.charAt(o)||_("'")?C():w=!1;else switch(i.charAt(o)){case"d":b=k("d");break;case"D":x("D",u,p);break;case"o":y=k("o");break;case"m":v=k("m");break;case"M":v=x("M",f,m);break;case"y":g=k("y");break;case"@":l=new Date(k("@")),g=l.getFullYear(),v=l.getMonth()+1,b=l.getDate();break;case"!":l=new Date((k("!")-this._ticksTo1970)/1e4),g=l.getFullYear(),v=l.getMonth()+1,b=l.getDate();break;case"'":_("'")?C():w=!0;break;default:C()}if(n.length>c&&(a=n.substr(c),!/^\s+/.test(a)))throw"Extra/unparsed characters found in date: "+a;if(-1===g?g=(new Date).getFullYear():100>g&&(g+=(new Date).getFullYear()-(new Date).getFullYear()%100+(h>=g?0:-100)),y>-1)for(v=1,b=y;r=this._getDaysInMonth(g,v-1),!(r>=b);)v++,b-=r;if(l=this._daylightSavingAdjust(new Date(g,v-1,b)),l.getFullYear()!==g||l.getMonth()+1!==v||l.getDate()!==b)throw"Invalid date";return l},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:864e9*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(e,t,i){if(!t)return"";var n,s=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,o=(i?i.dayNames:null)||this._defaults.dayNames,r=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,a=(i?i.monthNames:null)||this._defaults.monthNames,l=function(t){var i=e.length>n+1&&e.charAt(n+1)===t;return i&&n++,i},c=function(e,t,i){var n=""+t;if(l(e))for(;i>n.length;)n="0"+n;return n},d=function(e,t,i,n){return l(e)?n[t]:i[t]},h="",u=!1;if(t)for(n=0;e.length>n;n++)if(u)"'"!==e.charAt(n)||l("'")?h+=e.charAt(n):u=!1;else switch(e.charAt(n)){case"d":h+=c("d",t.getDate(),2);break;case"D":h+=d("D",t.getDay(),s,o);break;case"o":h+=c("o",Math.round((new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()-new Date(t.getFullYear(),0,0).getTime())/864e5),3);break;case"m":h+=c("m",t.getMonth()+1,2);break;case"M":h+=d("M",t.getMonth(),r,a);break;case"y":h+=l("y")?t.getFullYear():(10>t.getYear()%100?"0":"")+t.getYear()%100;break;case"@":h+=t.getTime();break;case"!":h+=1e4*t.getTime()+this._ticksTo1970;break;case"'":l("'")?h+="'":u=!0;break;default:h+=e.charAt(n)}return h},_possibleChars:function(e){var t,i="",n=!1,s=function(i){var n=e.length>t+1&&e.charAt(t+1)===i;return n&&t++,n};for(t=0;e.length>t;t++)if(n)"'"!==e.charAt(t)||s("'")?i+=e.charAt(t):n=!1;else switch(e.charAt(t)){case"d":case"m":case"y":case"@":i+="0123456789";break;case"D":case"M":return null;case"'":s("'")?i+="'":n=!0;break;default:i+=e.charAt(t)}return i},_get:function(e,i){return e.settings[i]!==t?e.settings[i]:this._defaults[i]},_setDateFromField:function(e,t){if(e.input.val()!==e.lastVal){var i=this._get(e,"dateFormat"),n=e.lastVal=e.input?e.input.val():null,s=this._getDefaultDate(e),o=s,r=this._getFormatConfig(e);try{o=this.parseDate(i,n,r)||s}catch(a){n=t?"":n}e.selectedDay=o.getDate(),e.drawMonth=e.selectedMonth=o.getMonth(),e.drawYear=e.selectedYear=o.getFullYear(),e.currentDay=n?o.getDate():0,e.currentMonth=n?o.getMonth():0,e.currentYear=n?o.getFullYear():0,this._adjustInstDate(e)}},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(t,i,n){var s=function(e){var t=new Date;return t.setDate(t.getDate()+e),t},o=function(i){try{return e.datepicker.parseDate(e.datepicker._get(t,"dateFormat"),i,e.datepicker._getFormatConfig(t))}catch(n){}for(var s=(i.toLowerCase().match(/^c/)?e.datepicker._getDate(t):null)||new Date,o=s.getFullYear(),r=s.getMonth(),a=s.getDate(),l=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,c=l.exec(i);c;){switch(c[2]||"d"){case"d":case"D":a+=parseInt(c[1],10);break;case"w":case"W":a+=7*parseInt(c[1],10);break;case"m":case"M":r+=parseInt(c[1],10),a=Math.min(a,e.datepicker._getDaysInMonth(o,r));break;case"y":case"Y":o+=parseInt(c[1],10),a=Math.min(a,e.datepicker._getDaysInMonth(o,r))}c=l.exec(i)}return new Date(o,r,a)},r=null==i||""===i?n:"string"==typeof i?o(i):"number"==typeof i?isNaN(i)?n:s(i):new Date(i.getTime());return r=r&&"Invalid Date"==""+r?n:r,r&&(r.setHours(0),r.setMinutes(0),r.setSeconds(0),r.setMilliseconds(0)),this._daylightSavingAdjust(r)},_daylightSavingAdjust:function(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null},_setDate:function(e,t,i){var n=!t,s=e.selectedMonth,o=e.selectedYear,r=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=r.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=r.getMonth(),e.drawYear=e.selectedYear=e.currentYear=r.getFullYear(),s===e.selectedMonth&&o===e.selectedYear||i||this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(n?"":this._formatDate(e))},_getDate:function(e){var t=!e.currentYear||e.input&&""===e.input.val()?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return t},_attachHandlers:function(t){var i=this._get(t,"stepMonths"),n="#"+t.id.replace(/\\\\/g,"\\");t.dpDiv.find("[data-handler]").map(function(){var t={prev:function(){e.datepicker._adjustDate(n,-i,"M")},next:function(){e.datepicker._adjustDate(n,+i,"M")},hide:function(){e.datepicker._hideDatepicker()},today:function(){e.datepicker._gotoToday(n)},selectDay:function(){return e.datepicker._selectDay(n,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return e.datepicker._selectMonthYear(n,this,"M"),!1},selectYear:function(){return e.datepicker._selectMonthYear(n,this,"Y"),!1}};e(this).bind(this.getAttribute("data-event"),t[this.getAttribute("data-handler")])})},_generateHTML:function(e){var t,i,n,s,o,r,a,l,c,d,h,u,p,f,m,g,v,b,y,w,_,k,x,C,S,T,D,P,E,M,A,I,j,L,O,$,N,F,H,z=new Date,R=this._daylightSavingAdjust(new Date(z.getFullYear(),z.getMonth(),z.getDate())),B=this._get(e,"isRTL"),W=this._get(e,"showButtonPanel"),q=this._get(e,"hideIfNoPrevNext"),U=this._get(e,"navigationAsDateFormat"),V=this._getNumberOfMonths(e),Y=this._get(e,"showCurrentAtPos"),G=this._get(e,"stepMonths"),K=1!==V[0]||1!==V[1],X=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),Q=this._getMinMaxDate(e,"min"),J=this._getMinMaxDate(e,"max"),Z=e.drawMonth-Y,ee=e.drawYear;if(0>Z&&(Z+=12,ee--),J)for(t=this._daylightSavingAdjust(new Date(J.getFullYear(),J.getMonth()-V[0]*V[1]+1,J.getDate())),t=Q&&Q>t?Q:t;this._daylightSavingAdjust(new Date(ee,Z,1))>t;)Z--,0>Z&&(Z=11,ee--);for(e.drawMonth=Z,e.drawYear=ee,i=this._get(e,"prevText"),i=U?this.formatDate(i,this._daylightSavingAdjust(new Date(ee,Z-G,1)),this._getFormatConfig(e)):i,n=this._canAdjustMonth(e,-1,ee,Z)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(B?"e":"w")+"'>"+i+"</span></a>":q?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(B?"e":"w")+"'>"+i+"</span></a>",s=this._get(e,"nextText"),s=U?this.formatDate(s,this._daylightSavingAdjust(new Date(ee,Z+G,1)),this._getFormatConfig(e)):s,o=this._canAdjustMonth(e,1,ee,Z)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+s+"'><span class='ui-icon ui-icon-circle-triangle-"+(B?"w":"e")+"'>"+s+"</span></a>":q?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+s+"'><span class='ui-icon ui-icon-circle-triangle-"+(B?"w":"e")+"'>"+s+"</span></a>",r=this._get(e,"currentText"),a=this._get(e,"gotoCurrent")&&e.currentDay?X:R,r=U?this.formatDate(r,a,this._getFormatConfig(e)):r,l=e.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(e,"closeText")+"</button>",c=W?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(B?l:"")+(this._isInRange(e,a)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+r+"</button>":"")+(B?"":l)+"</div>":"",d=parseInt(this._get(e,"firstDay"),10),d=isNaN(d)?0:d,h=this._get(e,"showWeek"),u=this._get(e,"dayNames"),p=this._get(e,"dayNamesMin"),f=this._get(e,"monthNames"),m=this._get(e,"monthNamesShort"),g=this._get(e,"beforeShowDay"),v=this._get(e,"showOtherMonths"),b=this._get(e,"selectOtherMonths"),y=this._getDefaultDate(e),w="",k=0;V[0]>k;k++){for(x="",this.maxRows=4,C=0;V[1]>C;C++){if(S=this._daylightSavingAdjust(new Date(ee,Z,e.selectedDay)),T=" ui-corner-all",D="",K){if(D+="<div class='ui-datepicker-group",V[1]>1)switch(C){case 0:D+=" ui-datepicker-group-first",T=" ui-corner-"+(B?"right":"left");break;case V[1]-1:D+=" ui-datepicker-group-last",T=" ui-corner-"+(B?"left":"right");break;default:D+=" ui-datepicker-group-middle",T=""}D+="'>"}for(D+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+T+"'>"+(/all|left/.test(T)&&0===k?B?o:n:"")+(/all|right/.test(T)&&0===k?B?n:o:"")+this._generateMonthYearHeader(e,Z,ee,Q,J,k>0||C>0,f,m)+"</div><table class='ui-datepicker-calendar'><thead><tr>",P=h?"<th class='ui-datepicker-week-col'>"+this._get(e,"weekHeader")+"</th>":"",_=0;7>_;_++)E=(_+d)%7,P+="<th"+((_+d+6)%7>=5?" class='ui-datepicker-week-end'":"")+"><span title='"+u[E]+"'>"+p[E]+"</span></th>";for(D+=P+"</tr></thead><tbody>",M=this._getDaysInMonth(ee,Z),ee===e.selectedYear&&Z===e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,M)),A=(this._getFirstDayOfMonth(ee,Z)-d+7)%7,I=Math.ceil((A+M)/7),j=K&&this.maxRows>I?this.maxRows:I,this.maxRows=j,L=this._daylightSavingAdjust(new Date(ee,Z,1-A)),O=0;j>O;O++){for(D+="<tr>",$=h?"<td class='ui-datepicker-week-col'>"+this._get(e,"calculateWeek")(L)+"</td>":"",_=0;7>_;_++)N=g?g.apply(e.input?e.input[0]:null,[L]):[!0,""],F=L.getMonth()!==Z,H=F&&!b||!N[0]||Q&&Q>L||J&&L>J,$+="<td class='"+((_+d+6)%7>=5?" ui-datepicker-week-end":"")+(F?" ui-datepicker-other-month":"")+(L.getTime()===S.getTime()&&Z===e.selectedMonth&&e._keyEvent||y.getTime()===L.getTime()&&y.getTime()===S.getTime()?" "+this._dayOverClass:"")+(H?" "+this._unselectableClass+" ui-state-disabled":"")+(F&&!v?"":" "+N[1]+(L.getTime()===X.getTime()?" "+this._currentClass:"")+(L.getTime()===R.getTime()?" ui-datepicker-today":""))+"'"+(F&&!v||!N[2]?"":" title='"+N[2].replace(/'/g,"&#39;")+"'")+(H?"":" data-handler='selectDay' data-event='click' data-month='"+L.getMonth()+"' data-year='"+L.getFullYear()+"'")+">"+(F&&!v?"&#xa0;":H?"<span class='ui-state-default'>"+L.getDate()+"</span>":"<a class='ui-state-default"+(L.getTime()===R.getTime()?" ui-state-highlight":"")+(L.getTime()===X.getTime()?" ui-state-active":"")+(F?" ui-priority-secondary":"")+"' href='#'>"+L.getDate()+"</a>")+"</td>",L.setDate(L.getDate()+1),L=this._daylightSavingAdjust(L);D+=$+"</tr>"}Z++,Z>11&&(Z=0,ee++),D+="</tbody></table>"+(K?"</div>"+(V[0]>0&&C===V[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),x+=D}w+=x}return w+=c,e._keyEvent=!1,w},_generateMonthYearHeader:function(e,t,i,n,s,o,r,a){var l,c,d,h,u,p,f,m,g=this._get(e,"changeMonth"),v=this._get(e,"changeYear"),b=this._get(e,"showMonthAfterYear"),y="<div class='ui-datepicker-title'>",w="";if(o||!g)w+="<span class='ui-datepicker-month'>"+r[t]+"</span>";else{for(l=n&&n.getFullYear()===i,c=s&&s.getFullYear()===i,w+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",d=0;12>d;d++)(!l||d>=n.getMonth())&&(!c||s.getMonth()>=d)&&(w+="<option value='"+d+"'"+(d===t?" selected='selected'":"")+">"+a[d]+"</option>");w+="</select>"}if(b||(y+=w+(!o&&g&&v?"":"&#xa0;")),!e.yearshtml)if(e.yearshtml="",o||!v)y+="<span class='ui-datepicker-year'>"+i+"</span>";else{for(h=this._get(e,"yearRange").split(":"),u=(new Date).getFullYear(),p=function(e){var t=e.match(/c[+\-].*/)?i+parseInt(e.substring(1),10):e.match(/[+\-].*/)?u+parseInt(e,10):parseInt(e,10);return isNaN(t)?u:t},f=p(h[0]),m=Math.max(f,p(h[1]||"")),f=n?Math.max(f,n.getFullYear()):f,m=s?Math.min(m,s.getFullYear()):m,e.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";m>=f;f++)e.yearshtml+="<option value='"+f+"'"+(f===i?" selected='selected'":"")+">"+f+"</option>";e.yearshtml+="</select>",y+=e.yearshtml,e.yearshtml=null}return y+=this._get(e,"yearSuffix"),b&&(y+=(!o&&g&&v?"":"&#xa0;")+w),y+="</div>"},_adjustInstDate:function(e,t,i){var n=e.drawYear+("Y"===i?t:0),s=e.drawMonth+("M"===i?t:0),o=Math.min(e.selectedDay,this._getDaysInMonth(n,s))+("D"===i?t:0),r=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(n,s,o)));e.selectedDay=r.getDate(),e.drawMonth=e.selectedMonth=r.getMonth(),e.drawYear=e.selectedYear=r.getFullYear(),("M"===i||"Y"===i)&&this._notifyChange(e)},_restrictMinMax:function(e,t){var i=this._getMinMaxDate(e,"min"),n=this._getMinMaxDate(e,"max"),s=i&&i>t?i:t;return n&&s>n?n:s},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return null==t?[1,1]:"number"==typeof t?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return new Date(e,t,1).getDay()},_canAdjustMonth:function(e,t,i,n){var s=this._getNumberOfMonths(e),o=this._daylightSavingAdjust(new Date(i,n+(0>t?t:s[0]*s[1]),1));return 0>t&&o.setDate(this._getDaysInMonth(o.getFullYear(),o.getMonth())),this._isInRange(e,o)},_isInRange:function(e,t){var i,n,s=this._getMinMaxDate(e,"min"),o=this._getMinMaxDate(e,"max"),r=null,a=null,l=this._get(e,"yearRange");return l&&(i=l.split(":"),n=(new Date).getFullYear(),r=parseInt(i[0],10),a=parseInt(i[1],10),i[0].match(/[+\-].*/)&&(r+=n),i[1].match(/[+\-].*/)&&(a+=n)),(!s||t.getTime()>=s.getTime())&&(!o||t.getTime()<=o.getTime())&&(!r||t.getFullYear()>=r)&&(!a||a>=t.getFullYear())},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return t="string"!=typeof t?t:(new Date).getFullYear()%100+parseInt(t,10),{shortYearCutoff:t,dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,i,n){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var s=t?"object"==typeof t?t:this._daylightSavingAdjust(new Date(n,i,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),s,this._getFormatConfig(e))}}),e.fn.datepicker=function(t){if(!this.length)return this;e.datepicker.initialized||(e(document).mousedown(e.datepicker._checkExternalClick),e.datepicker.initialized=!0),0===e("#"+e.datepicker._mainDivId).length&&e("body").append(e.datepicker.dpDiv);var i=Array.prototype.slice.call(arguments,1);return"string"!=typeof t||"isDisabled"!==t&&"getDate"!==t&&"widget"!==t?"option"===t&&2===arguments.length&&"string"==typeof arguments[1]?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(i)):this.each(function(){"string"==typeof t?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this].concat(i)):e.datepicker._attachDatepicker(this,t)}):e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(i))},e.datepicker=new i,e.datepicker.initialized=!1,e.datepicker.uuid=(new Date).getTime(),e.datepicker.version="1.10.3"}(jQuery),function(e){var t={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},i={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};e.widget("ui.dialog",{version:"1.10.3",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(t){var i=e(this).css(t).offset().top;0>i&&e(this).css("top",t.top-i)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title=this.options.title||this.originalTitle,this._createWrapper(),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&e.fn.draggable&&this._makeDraggable(),this.options.resizable&&e.fn.resizable&&this._makeResizable(),this._isOpen=!1},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var t=this.options.appendTo;return t&&(t.jquery||t.nodeType)?e(t):this.document.find(t||"body").eq(0)},_destroy:function(){var e,t=this.originalPosition;this._destroyOverlay(),this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(),this.uiDialog.stop(!0,!0).remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),e=t.parent.children().eq(t.index),e.length&&e[0]!==this.element[0]?e.before(this.element):t.parent.append(this.element)},widget:function(){return this.uiDialog},disable:e.noop,enable:e.noop,close:function(t){var i=this;this._isOpen&&this._trigger("beforeClose",t)!==!1&&(this._isOpen=!1,this._destroyOverlay(),this.opener.filter(":focusable").focus().length||e(this.document[0].activeElement).blur(),this._hide(this.uiDialog,this.options.hide,function(){i._trigger("close",t)}))},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(e,t){var i=!!this.uiDialog.nextAll(":visible").insertBefore(this.uiDialog).length;return i&&!t&&this._trigger("focus",e),i},open:function(){var t=this;return this._isOpen?void(this._moveToTop()&&this._focusTabbable()):(this._isOpen=!0,this.opener=e(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this._show(this.uiDialog,this.options.show,function(){t._focusTabbable(),t._trigger("focus")}),void this._trigger("open"))},_focusTabbable:function(){var e=this.element.find("[autofocus]");e.length||(e=this.element.find(":tabbable")),e.length||(e=this.uiDialogButtonPane.find(":tabbable")),e.length||(e=this.uiDialogTitlebarClose.filter(":tabbable")),e.length||(e=this.uiDialog),e.eq(0).focus()},_keepFocus:function(t){function i(){var t=this.document[0].activeElement,i=this.uiDialog[0]===t||e.contains(this.uiDialog[0],t);i||this._focusTabbable()}t.preventDefault(),i.call(this),this._delay(i)},_createWrapper:function(){this.uiDialog=e("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._on(this.uiDialog,{keydown:function(t){if(this.options.closeOnEscape&&!t.isDefaultPrevented()&&t.keyCode&&t.keyCode===e.ui.keyCode.ESCAPE)return t.preventDefault(),void this.close(t);if(t.keyCode===e.ui.keyCode.TAB){var i=this.uiDialog.find(":tabbable"),n=i.filter(":first"),s=i.filter(":last");t.target!==s[0]&&t.target!==this.uiDialog[0]||t.shiftKey?t.target!==n[0]&&t.target!==this.uiDialog[0]||!t.shiftKey||(s.focus(1),t.preventDefault()):(n.focus(1),t.preventDefault())}},mousedown:function(e){this._moveToTop(e)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var t;this.uiDialogTitlebar=e("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog),this._on(this.uiDialogTitlebar,{mousedown:function(t){e(t.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.focus()}}),this.uiDialogTitlebarClose=e("<button></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:!1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar),this._on(this.uiDialogTitlebarClose,{click:function(e){e.preventDefault(),this.close(e)}}),t=e("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar),this._title(t),this.uiDialog.attr({"aria-labelledby":t.attr("id")})},_title:function(e){this.options.title||e.html("&#160;"),e.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=e("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),this.uiButtonSet=e("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane),this._createButtons()},_createButtons:function(){var t=this,i=this.options.buttons;return this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),e.isEmptyObject(i)||e.isArray(i)&&!i.length?void this.uiDialog.removeClass("ui-dialog-buttons"):(e.each(i,function(i,n){var s,o;n=e.isFunction(n)?{click:n,text:i}:n,n=e.extend({type:"button"},n),s=n.click,n.click=function(){s.apply(t.element[0],arguments)},o={icons:n.icons,text:n.showText},delete n.icons,delete n.showText,e("<button></button>",n).button(o).appendTo(t.uiButtonSet)}),this.uiDialog.addClass("ui-dialog-buttons"),void this.uiDialogButtonPane.appendTo(this.uiDialog))},_makeDraggable:function(){function t(e){return{position:e.position,offset:e.offset}}var i=this,n=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(n,s){e(this).addClass("ui-dialog-dragging"),i._blockFrames(),i._trigger("dragStart",n,t(s))},drag:function(e,n){i._trigger("drag",e,t(n))},stop:function(s,o){n.position=[o.position.left-i.document.scrollLeft(),o.position.top-i.document.scrollTop()],e(this).removeClass("ui-dialog-dragging"),i._unblockFrames(),i._trigger("dragStop",s,t(o))}})},_makeResizable:function(){function t(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}var i=this,n=this.options,s=n.resizable,o=this.uiDialog.css("position"),r="string"==typeof s?s:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:n.maxWidth,maxHeight:n.maxHeight,minWidth:n.minWidth,minHeight:this._minHeight(),handles:r,start:function(n,s){e(this).addClass("ui-dialog-resizing"),i._blockFrames(),i._trigger("resizeStart",n,t(s))},resize:function(e,n){i._trigger("resize",e,t(n))},stop:function(s,o){n.height=e(this).height(),n.width=e(this).width(),e(this).removeClass("ui-dialog-resizing"),i._unblockFrames(),i._trigger("resizeStop",s,t(o))}}).css("position",o)},_minHeight:function(){var e=this.options;return"auto"===e.height?e.minHeight:Math.min(e.minHeight,e.height)},_position:function(){var e=this.uiDialog.is(":visible");e||this.uiDialog.show(),this.uiDialog.position(this.options.position),e||this.uiDialog.hide()},_setOptions:function(n){var s=this,o=!1,r={};e.each(n,function(e,n){s._setOption(e,n),e in t&&(o=!0),e in i&&(r[e]=n)}),o&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",r)},_setOption:function(e,t){var i,n,s=this.uiDialog;"dialogClass"===e&&s.removeClass(this.options.dialogClass).addClass(t),"disabled"!==e&&(this._super(e,t),"appendTo"===e&&this.uiDialog.appendTo(this._appendTo()),"buttons"===e&&this._createButtons(),"closeText"===e&&this.uiDialogTitlebarClose.button({label:""+t}),"draggable"===e&&(i=s.is(":data(ui-draggable)"),i&&!t&&s.draggable("destroy"),!i&&t&&this._makeDraggable()),"position"===e&&this._position(),"resizable"===e&&(n=s.is(":data(ui-resizable)"),n&&!t&&s.resizable("destroy"),n&&"string"==typeof t&&s.resizable("option","handles",t),n||t===!1||this._makeResizable()),"title"===e&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var e,t,i,n=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),n.minWidth>n.width&&(n.width=n.minWidth),e=this.uiDialog.css({height:"auto",width:n.width}).outerHeight(),t=Math.max(0,n.minHeight-e),i="number"==typeof n.maxHeight?Math.max(0,n.maxHeight-e):"none","auto"===n.height?this.element.css({minHeight:t,maxHeight:i,height:"auto"}):this.element.height(Math.max(0,n.height-e)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var t=e(this);return e("<div>").css({position:"absolute",width:t.outerWidth(),height:t.outerHeight()}).appendTo(t.parent()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(t){return e(t.target).closest(".ui-dialog").length?!0:!!e(t.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var t=this,i=this.widgetFullName;e.ui.dialog.overlayInstances||this._delay(function(){e.ui.dialog.overlayInstances&&this.document.bind("focusin.dialog",function(n){t._allowInteraction(n)||(n.preventDefault(),e(".ui-dialog:visible:last .ui-dialog-content").data(i)._focusTabbable())})}),this.overlay=e("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo()),this._on(this.overlay,{mousedown:"_keepFocus"}),e.ui.dialog.overlayInstances++}},_destroyOverlay:function(){this.options.modal&&this.overlay&&(e.ui.dialog.overlayInstances--,e.ui.dialog.overlayInstances||this.document.unbind("focusin.dialog"),this.overlay.remove(),this.overlay=null);
}}),e.ui.dialog.overlayInstances=0,e.uiBackCompat!==!1&&e.widget("ui.dialog",e.ui.dialog,{_position:function(){var t,i=this.options.position,n=[],s=[0,0];i?(("string"==typeof i||"object"==typeof i&&"0"in i)&&(n=i.split?i.split(" "):[i[0],i[1]],1===n.length&&(n[1]=n[0]),e.each(["left","top"],function(e,t){+n[e]===n[e]&&(s[e]=n[e],n[e]=t)}),i={my:n[0]+(0>s[0]?s[0]:"+"+s[0])+" "+n[1]+(0>s[1]?s[1]:"+"+s[1]),at:n.join(" ")}),i=e.extend({},e.ui.dialog.prototype.options.position,i)):i=e.ui.dialog.prototype.options.position,t=this.uiDialog.is(":visible"),t||this.uiDialog.show(),this.uiDialog.position(i),t||this.uiDialog.hide()}})}(jQuery),function(e){var t=/up|down|vertical/,i=/up|left|vertical|horizontal/;e.effects.effect.blind=function(n,s){var o,r,a,l=e(this),c=["position","top","bottom","left","right","height","width"],d=e.effects.setMode(l,n.mode||"hide"),h=n.direction||"up",u=t.test(h),p=u?"height":"width",f=u?"top":"left",m=i.test(h),g={},v="show"===d;l.parent().is(".ui-effects-wrapper")?e.effects.save(l.parent(),c):e.effects.save(l,c),l.show(),o=e.effects.createWrapper(l).css({overflow:"hidden"}),r=o[p](),a=parseFloat(o.css(f))||0,g[p]=v?r:0,m||(l.css(u?"bottom":"right",0).css(u?"top":"left","auto").css({position:"absolute"}),g[f]=v?a:r+a),v&&(o.css(p,0),m||o.css(f,a+r)),o.animate(g,{duration:n.duration,easing:n.easing,queue:!1,complete:function(){"hide"===d&&l.hide(),e.effects.restore(l,c),e.effects.removeWrapper(l),s()}})}}(jQuery),function(e){e.effects.effect.bounce=function(t,i){var n,s,o,r=e(this),a=["position","top","bottom","left","right","height","width"],l=e.effects.setMode(r,t.mode||"effect"),c="hide"===l,d="show"===l,h=t.direction||"up",u=t.distance,p=t.times||5,f=2*p+(d||c?1:0),m=t.duration/f,g=t.easing,v="up"===h||"down"===h?"top":"left",b="up"===h||"left"===h,y=r.queue(),w=y.length;for((d||c)&&a.push("opacity"),e.effects.save(r,a),r.show(),e.effects.createWrapper(r),u||(u=r["top"===v?"outerHeight":"outerWidth"]()/3),d&&(o={opacity:1},o[v]=0,r.css("opacity",0).css(v,b?2*-u:2*u).animate(o,m,g)),c&&(u/=Math.pow(2,p-1)),o={},o[v]=0,n=0;p>n;n++)s={},s[v]=(b?"-=":"+=")+u,r.animate(s,m,g).animate(o,m,g),u=c?2*u:u/2;c&&(s={opacity:0},s[v]=(b?"-=":"+=")+u,r.animate(s,m,g)),r.queue(function(){c&&r.hide(),e.effects.restore(r,a),e.effects.removeWrapper(r),i()}),w>1&&y.splice.apply(y,[1,0].concat(y.splice(w,f+1))),r.dequeue()}}(jQuery),function(e){e.effects.effect.clip=function(t,i){var n,s,o,r=e(this),a=["position","top","bottom","left","right","height","width"],l=e.effects.setMode(r,t.mode||"hide"),c="show"===l,d=t.direction||"vertical",h="vertical"===d,u=h?"height":"width",p=h?"top":"left",f={};e.effects.save(r,a),r.show(),n=e.effects.createWrapper(r).css({overflow:"hidden"}),s="IMG"===r[0].tagName?n:r,o=s[u](),c&&(s.css(u,0),s.css(p,o/2)),f[u]=c?o:0,f[p]=c?0:o/2,s.animate(f,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){c||r.hide(),e.effects.restore(r,a),e.effects.removeWrapper(r),i()}})}}(jQuery),function(e){e.effects.effect.drop=function(t,i){var n,s=e(this),o=["position","top","bottom","left","right","opacity","height","width"],r=e.effects.setMode(s,t.mode||"hide"),a="show"===r,l=t.direction||"left",c="up"===l||"down"===l?"top":"left",d="up"===l||"left"===l?"pos":"neg",h={opacity:a?1:0};e.effects.save(s,o),s.show(),e.effects.createWrapper(s),n=t.distance||s["top"===c?"outerHeight":"outerWidth"](!0)/2,a&&s.css("opacity",0).css(c,"pos"===d?-n:n),h[c]=(a?"pos"===d?"+=":"-=":"pos"===d?"-=":"+=")+n,s.animate(h,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===r&&s.hide(),e.effects.restore(s,o),e.effects.removeWrapper(s),i()}})}}(jQuery),function(e){e.effects.effect.explode=function(t,i){function n(){y.push(this),y.length===h*u&&s()}function s(){p.css({visibility:"visible"}),e(y).remove(),m||p.hide(),i()}var o,r,a,l,c,d,h=t.pieces?Math.round(Math.sqrt(t.pieces)):3,u=h,p=e(this),f=e.effects.setMode(p,t.mode||"hide"),m="show"===f,g=p.show().css("visibility","hidden").offset(),v=Math.ceil(p.outerWidth()/u),b=Math.ceil(p.outerHeight()/h),y=[];for(o=0;h>o;o++)for(l=g.top+o*b,d=o-(h-1)/2,r=0;u>r;r++)a=g.left+r*v,c=r-(u-1)/2,p.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-r*v,top:-o*b}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:v,height:b,left:a+(m?c*v:0),top:l+(m?d*b:0),opacity:m?0:1}).animate({left:a+(m?0:c*v),top:l+(m?0:d*b),opacity:m?1:0},t.duration||500,t.easing,n)}}(jQuery),function(e){e.effects.effect.fade=function(t,i){var n=e(this),s=e.effects.setMode(n,t.mode||"toggle");n.animate({opacity:s},{queue:!1,duration:t.duration,easing:t.easing,complete:i})}}(jQuery),function(e){e.effects.effect.fold=function(t,i){var n,s,o=e(this),r=["position","top","bottom","left","right","height","width"],a=e.effects.setMode(o,t.mode||"hide"),l="show"===a,c="hide"===a,d=t.size||15,h=/([0-9]+)%/.exec(d),u=!!t.horizFirst,p=l!==u,f=p?["width","height"]:["height","width"],m=t.duration/2,g={},v={};e.effects.save(o,r),o.show(),n=e.effects.createWrapper(o).css({overflow:"hidden"}),s=p?[n.width(),n.height()]:[n.height(),n.width()],h&&(d=parseInt(h[1],10)/100*s[c?0:1]),l&&n.css(u?{height:0,width:d}:{height:d,width:0}),g[f[0]]=l?s[0]:d,v[f[1]]=l?s[1]:0,n.animate(g,m,t.easing).animate(v,m,t.easing,function(){c&&o.hide(),e.effects.restore(o,r),e.effects.removeWrapper(o),i()})}}(jQuery),function(e){e.effects.effect.highlight=function(t,i){var n=e(this),s=["backgroundImage","backgroundColor","opacity"],o=e.effects.setMode(n,t.mode||"show"),r={backgroundColor:n.css("backgroundColor")};"hide"===o&&(r.opacity=0),e.effects.save(n,s),n.show().css({backgroundImage:"none",backgroundColor:t.color||"#ffff99"}).animate(r,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===o&&n.hide(),e.effects.restore(n,s),i()}})}}(jQuery),function(e){e.effects.effect.pulsate=function(t,i){var n,s=e(this),o=e.effects.setMode(s,t.mode||"show"),r="show"===o,a="hide"===o,l=r||"hide"===o,c=2*(t.times||5)+(l?1:0),d=t.duration/c,h=0,u=s.queue(),p=u.length;for((r||!s.is(":visible"))&&(s.css("opacity",0).show(),h=1),n=1;c>n;n++)s.animate({opacity:h},d,t.easing),h=1-h;s.animate({opacity:h},d,t.easing),s.queue(function(){a&&s.hide(),i()}),p>1&&u.splice.apply(u,[1,0].concat(u.splice(p,c+1))),s.dequeue()}}(jQuery),function(e){e.effects.effect.puff=function(t,i){var n=e(this),s=e.effects.setMode(n,t.mode||"hide"),o="hide"===s,r=parseInt(t.percent,10)||150,a=r/100,l={height:n.height(),width:n.width(),outerHeight:n.outerHeight(),outerWidth:n.outerWidth()};e.extend(t,{effect:"scale",queue:!1,fade:!0,mode:s,complete:i,percent:o?r:100,from:o?l:{height:l.height*a,width:l.width*a,outerHeight:l.outerHeight*a,outerWidth:l.outerWidth*a}}),n.effect(t)},e.effects.effect.scale=function(t,i){var n=e(this),s=e.extend(!0,{},t),o=e.effects.setMode(n,t.mode||"effect"),r=parseInt(t.percent,10)||(0===parseInt(t.percent,10)?0:"hide"===o?0:100),a=t.direction||"both",l=t.origin,c={height:n.height(),width:n.width(),outerHeight:n.outerHeight(),outerWidth:n.outerWidth()},d={y:"horizontal"!==a?r/100:1,x:"vertical"!==a?r/100:1};s.effect="size",s.queue=!1,s.complete=i,"effect"!==o&&(s.origin=l||["middle","center"],s.restore=!0),s.from=t.from||("show"===o?{height:0,width:0,outerHeight:0,outerWidth:0}:c),s.to={height:c.height*d.y,width:c.width*d.x,outerHeight:c.outerHeight*d.y,outerWidth:c.outerWidth*d.x},s.fade&&("show"===o&&(s.from.opacity=0,s.to.opacity=1),"hide"===o&&(s.from.opacity=1,s.to.opacity=0)),n.effect(s)},e.effects.effect.size=function(t,i){var n,s,o,r=e(this),a=["position","top","bottom","left","right","width","height","overflow","opacity"],l=["position","top","bottom","left","right","overflow","opacity"],c=["width","height","overflow"],d=["fontSize"],h=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],u=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],p=e.effects.setMode(r,t.mode||"effect"),f=t.restore||"effect"!==p,m=t.scale||"both",g=t.origin||["middle","center"],v=r.css("position"),b=f?a:l,y={height:0,width:0,outerHeight:0,outerWidth:0};"show"===p&&r.show(),n={height:r.height(),width:r.width(),outerHeight:r.outerHeight(),outerWidth:r.outerWidth()},"toggle"===t.mode&&"show"===p?(r.from=t.to||y,r.to=t.from||n):(r.from=t.from||("show"===p?y:n),r.to=t.to||("hide"===p?y:n)),o={from:{y:r.from.height/n.height,x:r.from.width/n.width},to:{y:r.to.height/n.height,x:r.to.width/n.width}},("box"===m||"both"===m)&&(o.from.y!==o.to.y&&(b=b.concat(h),r.from=e.effects.setTransition(r,h,o.from.y,r.from),r.to=e.effects.setTransition(r,h,o.to.y,r.to)),o.from.x!==o.to.x&&(b=b.concat(u),r.from=e.effects.setTransition(r,u,o.from.x,r.from),r.to=e.effects.setTransition(r,u,o.to.x,r.to))),("content"===m||"both"===m)&&o.from.y!==o.to.y&&(b=b.concat(d).concat(c),r.from=e.effects.setTransition(r,d,o.from.y,r.from),r.to=e.effects.setTransition(r,d,o.to.y,r.to)),e.effects.save(r,b),r.show(),e.effects.createWrapper(r),r.css("overflow","hidden").css(r.from),g&&(s=e.effects.getBaseline(g,n),r.from.top=(n.outerHeight-r.outerHeight())*s.y,r.from.left=(n.outerWidth-r.outerWidth())*s.x,r.to.top=(n.outerHeight-r.to.outerHeight)*s.y,r.to.left=(n.outerWidth-r.to.outerWidth)*s.x),r.css(r.from),("content"===m||"both"===m)&&(h=h.concat(["marginTop","marginBottom"]).concat(d),u=u.concat(["marginLeft","marginRight"]),c=a.concat(h).concat(u),r.find("*[width]").each(function(){var i=e(this),n={height:i.height(),width:i.width(),outerHeight:i.outerHeight(),outerWidth:i.outerWidth()};f&&e.effects.save(i,c),i.from={height:n.height*o.from.y,width:n.width*o.from.x,outerHeight:n.outerHeight*o.from.y,outerWidth:n.outerWidth*o.from.x},i.to={height:n.height*o.to.y,width:n.width*o.to.x,outerHeight:n.height*o.to.y,outerWidth:n.width*o.to.x},o.from.y!==o.to.y&&(i.from=e.effects.setTransition(i,h,o.from.y,i.from),i.to=e.effects.setTransition(i,h,o.to.y,i.to)),o.from.x!==o.to.x&&(i.from=e.effects.setTransition(i,u,o.from.x,i.from),i.to=e.effects.setTransition(i,u,o.to.x,i.to)),i.css(i.from),i.animate(i.to,t.duration,t.easing,function(){f&&e.effects.restore(i,c)})})),r.animate(r.to,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){0===r.to.opacity&&r.css("opacity",r.from.opacity),"hide"===p&&r.hide(),e.effects.restore(r,b),f||("static"===v?r.css({position:"relative",top:r.to.top,left:r.to.left}):e.each(["top","left"],function(e,t){r.css(t,function(t,i){var n=parseInt(i,10),s=e?r.to.left:r.to.top;return"auto"===i?s+"px":n+s+"px"})})),e.effects.removeWrapper(r),i()}})}}(jQuery),function(e){e.effects.effect.shake=function(t,i){var n,s=e(this),o=["position","top","bottom","left","right","height","width"],r=e.effects.setMode(s,t.mode||"effect"),a=t.direction||"left",l=t.distance||20,c=t.times||3,d=2*c+1,h=Math.round(t.duration/d),u="up"===a||"down"===a?"top":"left",p="up"===a||"left"===a,f={},m={},g={},v=s.queue(),b=v.length;for(e.effects.save(s,o),s.show(),e.effects.createWrapper(s),f[u]=(p?"-=":"+=")+l,m[u]=(p?"+=":"-=")+2*l,g[u]=(p?"-=":"+=")+2*l,s.animate(f,h,t.easing),n=1;c>n;n++)s.animate(m,h,t.easing).animate(g,h,t.easing);s.animate(m,h,t.easing).animate(f,h/2,t.easing).queue(function(){"hide"===r&&s.hide(),e.effects.restore(s,o),e.effects.removeWrapper(s),i()}),b>1&&v.splice.apply(v,[1,0].concat(v.splice(b,d+1))),s.dequeue()}}(jQuery),function(e){e.effects.effect.slide=function(t,i){var n,s=e(this),o=["position","top","bottom","left","right","width","height"],r=e.effects.setMode(s,t.mode||"show"),a="show"===r,l=t.direction||"left",c="up"===l||"down"===l?"top":"left",d="up"===l||"left"===l,h={};e.effects.save(s,o),s.show(),n=t.distance||s["top"===c?"outerHeight":"outerWidth"](!0),e.effects.createWrapper(s).css({overflow:"hidden"}),a&&s.css(c,d?isNaN(n)?"-"+n:-n:n),h[c]=(a?d?"+=":"-=":d?"-=":"+=")+n,s.animate(h,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===r&&s.hide(),e.effects.restore(s,o),e.effects.removeWrapper(s),i()}})}}(jQuery),function(e){e.effects.effect.transfer=function(t,i){var n=e(this),s=e(t.to),o="fixed"===s.css("position"),r=e("body"),a=o?r.scrollTop():0,l=o?r.scrollLeft():0,c=s.offset(),d={top:c.top-a,left:c.left-l,height:s.innerHeight(),width:s.innerWidth()},h=n.offset(),u=e("<div class='ui-effects-transfer'></div>").appendTo(document.body).addClass(t.className).css({top:h.top-a,left:h.left-l,height:n.innerHeight(),width:n.innerWidth(),position:o?"fixed":"absolute"}).animate(d,t.duration,t.easing,function(){u.remove(),i()})}}(jQuery),function(e){e.widget("ui.menu",{version:"1.10.3",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,e.proxy(function(e){this.options.disabled&&e.preventDefault()},this)),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item > a":function(e){e.preventDefault()},"click .ui-state-disabled > a":function(e){e.preventDefault()},"click .ui-menu-item:has(a)":function(t){var i=e(t.target).closest(".ui-menu-item");!this.mouseHandled&&i.not(".ui-state-disabled").length&&(this.mouseHandled=!0,this.select(t),i.has(".ui-menu").length?this.expand(t):this.element.is(":focus")||(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(t){var i=e(t.currentTarget);i.siblings().children(".ui-state-active").removeClass("ui-state-active"),this.focus(t,i)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(e,t){var i=this.active||this.element.children(".ui-menu-item").eq(0);t||this.focus(e,i)},blur:function(t){this._delay(function(){e.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(t)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(t){e(t.target).closest(".ui-menu").length||this.collapseAll(t),this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var t=e(this);t.data("ui-menu-submenu-carat")&&t.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(t){function i(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var n,s,o,r,a,l=!0;switch(t.keyCode){case e.ui.keyCode.PAGE_UP:this.previousPage(t);break;case e.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case e.ui.keyCode.HOME:this._move("first","first",t);break;case e.ui.keyCode.END:this._move("last","last",t);break;case e.ui.keyCode.UP:this.previous(t);break;case e.ui.keyCode.DOWN:this.next(t);break;case e.ui.keyCode.LEFT:this.collapse(t);break;case e.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(t);break;case e.ui.keyCode.ENTER:case e.ui.keyCode.SPACE:this._activate(t);break;case e.ui.keyCode.ESCAPE:this.collapse(t);break;default:l=!1,s=this.previousFilter||"",o=String.fromCharCode(t.keyCode),r=!1,clearTimeout(this.filterTimer),o===s?r=!0:o=s+o,a=RegExp("^"+i(o),"i"),n=this.activeMenu.children(".ui-menu-item").filter(function(){return a.test(e(this).children("a").text())}),n=r&&-1!==n.index(this.active.next())?this.active.nextAll(".ui-menu-item"):n,n.length||(o=String.fromCharCode(t.keyCode),a=RegExp("^"+i(o),"i"),n=this.activeMenu.children(".ui-menu-item").filter(function(){return a.test(e(this).children("a").text())})),n.length?(this.focus(t,n),n.length>1?(this.previousFilter=o,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter):delete this.previousFilter}l&&t.preventDefault()},_activate:function(e){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(e):this.select(e))},refresh:function(){var t,i=this.options.icons.submenu,n=this.element.find(this.options.menus);n.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var t=e(this),n=t.prev("a"),s=e("<span>").addClass("ui-menu-icon ui-icon "+i).data("ui-menu-submenu-carat",!0);n.attr("aria-haspopup","true").prepend(s),t.attr("aria-labelledby",n.attr("id"))}),t=n.add(this.element),t.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()}),t.children(":not(.ui-menu-item)").each(function(){var t=e(this);/[^\-\u2014\u2013\s]/.test(t.text())||t.addClass("ui-widget-content ui-menu-divider")}),t.children(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!e.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(e,t){"icons"===e&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(t.submenu),this._super(e,t)},focus:function(e,t){var i,n;this.blur(e,e&&"focus"===e.type),this._scrollIntoView(t),this.active=t.first(),n=this.active.children("a").addClass("ui-state-focus"),this.options.role&&this.element.attr("aria-activedescendant",n.attr("id")),this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"),e&&"keydown"===e.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),i=t.children(".ui-menu"),i.length&&/^mouse/.test(e.type)&&this._startOpening(i),this.activeMenu=t.parent(),this._trigger("focus",e,{item:t})},_scrollIntoView:function(t){var i,n,s,o,r,a;this._hasScroll()&&(i=parseFloat(e.css(this.activeMenu[0],"borderTopWidth"))||0,n=parseFloat(e.css(this.activeMenu[0],"paddingTop"))||0,s=t.offset().top-this.activeMenu.offset().top-i-n,o=this.activeMenu.scrollTop(),r=this.activeMenu.height(),a=t.height(),0>s?this.activeMenu.scrollTop(o+s):s+a>r&&this.activeMenu.scrollTop(o+s-r+a))},blur:function(e,t){t||clearTimeout(this.timer),this.active&&(this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",e,{item:this.active}))},_startOpening:function(e){clearTimeout(this.timer),"true"===e.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(e)},this.delay))},_open:function(t){var i=e.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true"),t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(i)},collapseAll:function(t,i){clearTimeout(this.timer),this.timer=this._delay(function(){var n=i?this.element:e(t&&t.target).closest(this.element.find(".ui-menu"));n.length||(n=this.element),this._close(n),this.blur(t),this.activeMenu=n},this.delay)},_close:function(e){e||(e=this.active?this.active.parent():this.element),e.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(e){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);t&&t.length&&(this._close(),this.focus(e,t))},expand:function(e){var t=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();t&&t.length&&(this._open(t.parent()),this._delay(function(){this.focus(e,t)}))},next:function(e){this._move("next","first",e)},previous:function(e){this._move("prev","last",e)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(e,t,i){var n;this.active&&(n="first"===e||"last"===e?this.active["first"===e?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[e+"All"](".ui-menu-item").eq(0)),n&&n.length&&this.active||(n=this.activeMenu.children(".ui-menu-item")[t]()),this.focus(i,n)},nextPage:function(t){var i,n,s;return this.active?void(this.isLastItem()||(this._hasScroll()?(n=this.active.offset().top,s=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return i=e(this),0>i.offset().top-n-s}),this.focus(t,i)):this.focus(t,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]()))):void this.next(t)},previousPage:function(t){var i,n,s;return this.active?void(this.isFirstItem()||(this._hasScroll()?(n=this.active.offset().top,s=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return i=e(this),i.offset().top-n+s>0}),this.focus(t,i)):this.focus(t,this.activeMenu.children(".ui-menu-item").first()))):void this.next(t)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||e(t.target).closest(".ui-menu-item");var i={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(t,!0),this._trigger("select",t,i)}})}(jQuery),function(e,t){function i(e,t,i){return[parseFloat(e[0])*(p.test(e[0])?t/100:1),parseFloat(e[1])*(p.test(e[1])?i/100:1)]}function n(t,i){return parseInt(e.css(t,i),10)||0}function s(t){var i=t[0];return 9===i.nodeType?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:e.isWindow(i)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:i.preventDefault?{width:0,height:0,offset:{top:i.pageY,left:i.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}e.ui=e.ui||{};var o,r=Math.max,a=Math.abs,l=Math.round,c=/left|center|right/,d=/top|center|bottom/,h=/[\+\-]\d+(\.[\d]+)?%?/,u=/^\w+/,p=/%$/,f=e.fn.position;e.position={scrollbarWidth:function(){if(o!==t)return o;var i,n,s=e("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),r=s.children()[0];return e("body").append(s),i=r.offsetWidth,s.css("overflow","scroll"),n=r.offsetWidth,i===n&&(n=s[0].clientWidth),s.remove(),o=i-n},getScrollInfo:function(t){var i=t.isWindow?"":t.element.css("overflow-x"),n=t.isWindow?"":t.element.css("overflow-y"),s="scroll"===i||"auto"===i&&t.width<t.element[0].scrollWidth,o="scroll"===n||"auto"===n&&t.height<t.element[0].scrollHeight;return{width:o?e.position.scrollbarWidth():0,height:s?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var i=e(t||window),n=e.isWindow(i[0]);return{element:i,isWindow:n,offset:i.offset()||{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:n?i.width():i.outerWidth(),height:n?i.height():i.outerHeight()}}},e.fn.position=function(t){if(!t||!t.of)return f.apply(this,arguments);t=e.extend({},t);var o,p,m,g,v,b,y=e(t.of),w=e.position.getWithinInfo(t.within),_=e.position.getScrollInfo(w),k=(t.collision||"flip").split(" "),x={};return b=s(y),y[0].preventDefault&&(t.at="left top"),p=b.width,m=b.height,g=b.offset,v=e.extend({},g),e.each(["my","at"],function(){var e,i,n=(t[this]||"").split(" ");1===n.length&&(n=c.test(n[0])?n.concat(["center"]):d.test(n[0])?["center"].concat(n):["center","center"]),n[0]=c.test(n[0])?n[0]:"center",n[1]=d.test(n[1])?n[1]:"center",e=h.exec(n[0]),i=h.exec(n[1]),x[this]=[e?e[0]:0,i?i[0]:0],t[this]=[u.exec(n[0])[0],u.exec(n[1])[0]]}),1===k.length&&(k[1]=k[0]),"right"===t.at[0]?v.left+=p:"center"===t.at[0]&&(v.left+=p/2),"bottom"===t.at[1]?v.top+=m:"center"===t.at[1]&&(v.top+=m/2),o=i(x.at,p,m),v.left+=o[0],v.top+=o[1],this.each(function(){var s,c,d=e(this),h=d.outerWidth(),u=d.outerHeight(),f=n(this,"marginLeft"),b=n(this,"marginTop"),C=h+f+n(this,"marginRight")+_.width,S=u+b+n(this,"marginBottom")+_.height,T=e.extend({},v),D=i(x.my,d.outerWidth(),d.outerHeight());"right"===t.my[0]?T.left-=h:"center"===t.my[0]&&(T.left-=h/2),"bottom"===t.my[1]?T.top-=u:"center"===t.my[1]&&(T.top-=u/2),T.left+=D[0],T.top+=D[1],e.support.offsetFractions||(T.left=l(T.left),T.top=l(T.top)),s={marginLeft:f,marginTop:b},e.each(["left","top"],function(i,n){e.ui.position[k[i]]&&e.ui.position[k[i]][n](T,{targetWidth:p,targetHeight:m,elemWidth:h,elemHeight:u,collisionPosition:s,collisionWidth:C,collisionHeight:S,offset:[o[0]+D[0],o[1]+D[1]],my:t.my,at:t.at,within:w,elem:d})}),t.using&&(c=function(e){var i=g.left-T.left,n=i+p-h,s=g.top-T.top,o=s+m-u,l={target:{element:y,left:g.left,top:g.top,width:p,height:m},element:{element:d,left:T.left,top:T.top,width:h,height:u},horizontal:0>n?"left":i>0?"right":"center",vertical:0>o?"top":s>0?"bottom":"middle"};h>p&&p>a(i+n)&&(l.horizontal="center"),u>m&&m>a(s+o)&&(l.vertical="middle"),l.important=r(a(i),a(n))>r(a(s),a(o))?"horizontal":"vertical",t.using.call(this,e,l)}),d.offset(e.extend(T,{using:c}))})},e.ui.position={fit:{left:function(e,t){var i,n=t.within,s=n.isWindow?n.scrollLeft:n.offset.left,o=n.width,a=e.left-t.collisionPosition.marginLeft,l=s-a,c=a+t.collisionWidth-o-s;t.collisionWidth>o?l>0&&0>=c?(i=e.left+l+t.collisionWidth-o-s,e.left+=l-i):e.left=c>0&&0>=l?s:l>c?s+o-t.collisionWidth:s:l>0?e.left+=l:c>0?e.left-=c:e.left=r(e.left-a,e.left)},top:function(e,t){var i,n=t.within,s=n.isWindow?n.scrollTop:n.offset.top,o=t.within.height,a=e.top-t.collisionPosition.marginTop,l=s-a,c=a+t.collisionHeight-o-s;t.collisionHeight>o?l>0&&0>=c?(i=e.top+l+t.collisionHeight-o-s,e.top+=l-i):e.top=c>0&&0>=l?s:l>c?s+o-t.collisionHeight:s:l>0?e.top+=l:c>0?e.top-=c:e.top=r(e.top-a,e.top)}},flip:{left:function(e,t){var i,n,s=t.within,o=s.offset.left+s.scrollLeft,r=s.width,l=s.isWindow?s.scrollLeft:s.offset.left,c=e.left-t.collisionPosition.marginLeft,d=c-l,h=c+t.collisionWidth-r-l,u="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,p="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,f=-2*t.offset[0];0>d?(i=e.left+u+p+f+t.collisionWidth-r-o,(0>i||a(d)>i)&&(e.left+=u+p+f)):h>0&&(n=e.left-t.collisionPosition.marginLeft+u+p+f-l,(n>0||h>a(n))&&(e.left+=u+p+f))},top:function(e,t){var i,n,s=t.within,o=s.offset.top+s.scrollTop,r=s.height,l=s.isWindow?s.scrollTop:s.offset.top,c=e.top-t.collisionPosition.marginTop,d=c-l,h=c+t.collisionHeight-r-l,u="top"===t.my[1],p=u?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,f="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,m=-2*t.offset[1];0>d?(n=e.top+p+f+m+t.collisionHeight-r-o,e.top+p+f+m>d&&(0>n||a(d)>n)&&(e.top+=p+f+m)):h>0&&(i=e.top-t.collisionPosition.marginTop+p+f+m-l,e.top+p+f+m>h&&(i>0||h>a(i))&&(e.top+=p+f+m))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}},function(){var t,i,n,s,o,r=document.getElementsByTagName("body")[0],a=document.createElement("div");t=document.createElement(r?"div":"body"),n={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},r&&e.extend(n,{position:"absolute",left:"-1000px",top:"-1000px"});for(o in n)t.style[o]=n[o];t.appendChild(a),i=r||document.documentElement,i.insertBefore(t,i.firstChild),a.style.cssText="position: absolute; left: 10.7432222px;",s=e(a).offset().left,e.support.offsetFractions=s>10&&11>s,t.innerHTML="",i.removeChild(t)}()}(jQuery),function(e,t){e.widget("ui.progressbar",{version:"1.10.3",options:{max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue(),this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min}),this.valueDiv=e("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove()},value:function(e){return e===t?this.options.value:(this.options.value=this._constrainedValue(e),this._refreshValue(),t)},_constrainedValue:function(e){return e===t&&(e=this.options.value),this.indeterminate=e===!1,"number"!=typeof e&&(e=0),this.indeterminate?!1:Math.min(this.options.max,Math.max(this.min,e))},_setOptions:function(e){var t=e.value;delete e.value,this._super(e),this.options.value=this._constrainedValue(t),this._refreshValue()},_setOption:function(e,t){"max"===e&&(t=Math.max(this.min,t)),this._super(e,t)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var t=this.options.value,i=this._percentage();this.valueDiv.toggle(this.indeterminate||t>this.min).toggleClass("ui-corner-right",t===this.options.max).width(i.toFixed(0)+"%"),this.element.toggleClass("ui-progressbar-indeterminate",this.indeterminate),this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=e("<div class='ui-progressbar-overlay'></div>").appendTo(this.valueDiv))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":t}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this.oldValue!==t&&(this.oldValue=t,this._trigger("change")),t===this.options.max&&this._trigger("complete")}})}(jQuery),function(e){var t=5;e.widget("ui.slider",e.ui.mouse,{version:"1.10.3",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"),this._refresh(),this._setOption("disabled",this.options.disabled),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var t,i,n=this.options,s=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),o="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",r=[];for(i=n.values&&n.values.length||1,s.length>i&&(s.slice(i).remove(),s=s.slice(0,i)),t=s.length;i>t;t++)r.push(o);this.handles=s.add(e(r.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.each(function(t){e(this).data("ui-slider-handle-index",t)})},_createRange:function(){var t=this.options,i="";t.range?(t.range===!0&&(t.values?t.values.length&&2!==t.values.length?t.values=[t.values[0],t.values[0]]:e.isArray(t.values)&&(t.values=t.values.slice(0)):t.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""}):(this.range=e("<div></div>").appendTo(this.element),i="ui-slider-range ui-widget-header ui-corner-all"),this.range.addClass(i+("min"===t.range||"max"===t.range?" ui-slider-range-"+t.range:""))):this.range=e([])},_setupEvents:function(){var e=this.handles.add(this.range).filter("a");this._off(e),this._on(e,this._handleEvents),this._hoverable(e),this._focusable(e)},_destroy:function(){this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(t){var i,n,s,o,r,a,l,c,d=this,h=this.options;return h.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),i={x:t.pageX,y:t.pageY},n=this._normValueFromMouse(i),s=this._valueMax()-this._valueMin()+1,this.handles.each(function(t){var i=Math.abs(n-d.values(t));(s>i||s===i&&(t===d._lastChangedValue||d.values(t)===h.min))&&(s=i,o=e(this),r=t)}),a=this._start(t,r),a===!1?!1:(this._mouseSliding=!0,this._handleIndex=r,o.addClass("ui-state-active").focus(),l=o.offset(),c=!e(t.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=c?{left:0,top:0}:{left:t.pageX-l.left-o.width()/2,top:t.pageY-l.top-o.height()/2-(parseInt(o.css("borderTopWidth"),10)||0)-(parseInt(o.css("borderBottomWidth"),10)||0)+(parseInt(o.css("marginTop"),10)||0)
},this.handles.hasClass("ui-state-hover")||this._slide(t,r,n),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},i=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,i),!1},_mouseStop:function(e){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,i,n,s,o;return"horizontal"===this.orientation?(t=this.elementSize.width,i=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,i=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),n=i/t,n>1&&(n=1),0>n&&(n=0),"vertical"===this.orientation&&(n=1-n),s=this._valueMax()-this._valueMin(),o=this._valueMin()+n*s,this._trimAlignValue(o)},_start:function(e,t){var i={handle:this.handles[t],value:this.value()};return this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("start",e,i)},_slide:function(e,t,i){var n,s,o;this.options.values&&this.options.values.length?(n=this.values(t?0:1),2===this.options.values.length&&this.options.range===!0&&(0===t&&i>n||1===t&&n>i)&&(i=n),i!==this.values(t)&&(s=this.values(),s[t]=i,o=this._trigger("slide",e,{handle:this.handles[t],value:i,values:s}),n=this.values(t?0:1),o!==!1&&this.values(t,i,!0))):i!==this.value()&&(o=this._trigger("slide",e,{handle:this.handles[t],value:i}),o!==!1&&this.value(i))},_stop:function(e,t){var i={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("stop",e,i)},_change:function(e,t){if(!this._keySliding&&!this._mouseSliding){var i={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._lastChangedValue=t,this._trigger("change",e,i)}},value:function(e){return arguments.length?(this.options.value=this._trimAlignValue(e),this._refreshValue(),void this._change(null,0)):this._value()},values:function(t,i){var n,s,o;if(arguments.length>1)return this.options.values[t]=this._trimAlignValue(i),this._refreshValue(),void this._change(null,t);if(!arguments.length)return this._values();if(!e.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(t):this.value();for(n=this.options.values,s=arguments[0],o=0;n.length>o;o+=1)n[o]=this._trimAlignValue(s[o]),this._change(null,o);this._refreshValue()},_setOption:function(t,i){var n,s=0;switch("range"===t&&this.options.range===!0&&("min"===i?(this.options.value=this._values(0),this.options.values=null):"max"===i&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),e.isArray(this.options.values)&&(s=this.options.values.length),e.Widget.prototype._setOption.apply(this,arguments),t){case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),n=0;s>n;n+=1)this._change(null,n);this._animateOff=!1;break;case"min":case"max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_value:function(){var e=this.options.value;return e=this._trimAlignValue(e)},_values:function(e){var t,i,n;if(arguments.length)return t=this.options.values[e],t=this._trimAlignValue(t);if(this.options.values&&this.options.values.length){for(i=this.options.values.slice(),n=0;i.length>n;n+=1)i[n]=this._trimAlignValue(i[n]);return i}return[]},_trimAlignValue:function(e){if(this._valueMin()>=e)return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,i=(e-this._valueMin())%t,n=e-i;return 2*Math.abs(i)>=t&&(n+=i>0?t:-t),parseFloat(n.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var t,i,n,s,o,r=this.options.range,a=this.options,l=this,c=this._animateOff?!1:a.animate,d={};this.options.values&&this.options.values.length?this.handles.each(function(n){i=100*((l.values(n)-l._valueMin())/(l._valueMax()-l._valueMin())),d["horizontal"===l.orientation?"left":"bottom"]=i+"%",e(this).stop(1,1)[c?"animate":"css"](d,a.animate),l.options.range===!0&&("horizontal"===l.orientation?(0===n&&l.range.stop(1,1)[c?"animate":"css"]({left:i+"%"},a.animate),1===n&&l.range[c?"animate":"css"]({width:i-t+"%"},{queue:!1,duration:a.animate})):(0===n&&l.range.stop(1,1)[c?"animate":"css"]({bottom:i+"%"},a.animate),1===n&&l.range[c?"animate":"css"]({height:i-t+"%"},{queue:!1,duration:a.animate}))),t=i}):(n=this.value(),s=this._valueMin(),o=this._valueMax(),i=o!==s?100*((n-s)/(o-s)):0,d["horizontal"===this.orientation?"left":"bottom"]=i+"%",this.handle.stop(1,1)[c?"animate":"css"](d,a.animate),"min"===r&&"horizontal"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({width:i+"%"},a.animate),"max"===r&&"horizontal"===this.orientation&&this.range[c?"animate":"css"]({width:100-i+"%"},{queue:!1,duration:a.animate}),"min"===r&&"vertical"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({height:i+"%"},a.animate),"max"===r&&"vertical"===this.orientation&&this.range[c?"animate":"css"]({height:100-i+"%"},{queue:!1,duration:a.animate}))},_handleEvents:{keydown:function(i){var n,s,o,r,a=e(i.target).data("ui-slider-handle-index");switch(i.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(i.preventDefault(),!this._keySliding&&(this._keySliding=!0,e(i.target).addClass("ui-state-active"),n=this._start(i,a),n===!1))return}switch(r=this.options.step,s=o=this.options.values&&this.options.values.length?this.values(a):this.value(),i.keyCode){case e.ui.keyCode.HOME:o=this._valueMin();break;case e.ui.keyCode.END:o=this._valueMax();break;case e.ui.keyCode.PAGE_UP:o=this._trimAlignValue(s+(this._valueMax()-this._valueMin())/t);break;case e.ui.keyCode.PAGE_DOWN:o=this._trimAlignValue(s-(this._valueMax()-this._valueMin())/t);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(s===this._valueMax())return;o=this._trimAlignValue(s+r);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(s===this._valueMin())return;o=this._trimAlignValue(s-r)}this._slide(i,a,o)},click:function(e){e.preventDefault()},keyup:function(t){var i=e(t.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(t,i),this._change(t,i),e(t.target).removeClass("ui-state-active"))}}})}(jQuery),function(e){function t(e){return function(){var t=this.element.val();e.apply(this,arguments),this._refresh(),t!==this.element.val()&&this._trigger("change")}}e.widget("ui.spinner",{version:"1.10.3",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var t={},i=this.element;return e.each(["min","max","step"],function(e,n){var s=i.attr(n);void 0!==s&&s.length&&(t[n]=s)}),t},_events:{keydown:function(e){this._start(e)&&this._keydown(e)&&e.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(e){return this.cancelBlur?void delete this.cancelBlur:(this._stop(),this._refresh(),void(this.previous!==this.element.val()&&this._trigger("change",e)))},mousewheel:function(e,t){if(t){if(!this.spinning&&!this._start(e))return!1;this._spin((t>0?1:-1)*this.options.step,e),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(e)},100),e.preventDefault()}},"mousedown .ui-spinner-button":function(t){function i(){var e=this.element[0]===this.document[0].activeElement;e||(this.element.focus(),this.previous=n,this._delay(function(){this.previous=n}))}var n;n=this.element[0]===this.document[0].activeElement?this.previous:this.element.val(),t.preventDefault(),i.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,i.call(this)}),this._start(t)!==!1&&this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(t){return e(t.currentTarget).hasClass("ui-state-active")?this._start(t)===!1?!1:void this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t):void 0},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var e=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this.element.attr("role","spinbutton"),this.buttons=e.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all"),this.buttons.height()>Math.ceil(.5*e.height())&&e.height()>0&&e.height(e.height()),this.options.disabled&&this.disable()},_keydown:function(t){var i=this.options,n=e.ui.keyCode;switch(t.keyCode){case n.UP:return this._repeat(null,1,t),!0;case n.DOWN:return this._repeat(null,-1,t),!0;case n.PAGE_UP:return this._repeat(null,i.page,t),!0;case n.PAGE_DOWN:return this._repeat(null,-i.page,t),!0}return!1},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon "+this.options.icons.up+"'>&#9650;</span></a><a class='ui-spinner-button ui-spinner-down ui-corner-br'><span class='ui-icon "+this.options.icons.down+"'>&#9660;</span></a>"},_start:function(e){return this.spinning||this._trigger("start",e)!==!1?(this.counter||(this.counter=1),this.spinning=!0,!0):!1},_repeat:function(e,t,i){e=e||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,t,i)},e),this._spin(t*this.options.step,i)},_spin:function(e,t){var i=this.value()||0;this.counter||(this.counter=1),i=this._adjustValue(i+e*this._increment(this.counter)),this.spinning&&this._trigger("spin",t,{value:i})===!1||(this._value(i),this.counter++)},_increment:function(t){var i=this.options.incremental;return i?e.isFunction(i)?i(t):Math.floor(t*t*t/5e4-t*t/500+17*t/200+1):1},_precision:function(){var e=this._precisionOf(this.options.step);return null!==this.options.min&&(e=Math.max(e,this._precisionOf(this.options.min))),e},_precisionOf:function(e){var t=""+e,i=t.indexOf(".");return-1===i?0:t.length-i-1},_adjustValue:function(e){var t,i,n=this.options;return t=null!==n.min?n.min:0,i=e-t,i=Math.round(i/n.step)*n.step,e=t+i,e=parseFloat(e.toFixed(this._precision())),null!==n.max&&e>n.max?n.max:null!==n.min&&n.min>e?n.min:e},_stop:function(e){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",e))},_setOption:function(e,t){if("culture"===e||"numberFormat"===e){var i=this._parse(this.element.val());return this.options[e]=t,void this.element.val(this._format(i))}("max"===e||"min"===e||"step"===e)&&"string"==typeof t&&(t=this._parse(t)),"icons"===e&&(this.buttons.first().find(".ui-icon").removeClass(this.options.icons.up).addClass(t.up),this.buttons.last().find(".ui-icon").removeClass(this.options.icons.down).addClass(t.down)),this._super(e,t),"disabled"===e&&(t?(this.element.prop("disabled",!0),this.buttons.button("disable")):(this.element.prop("disabled",!1),this.buttons.button("enable")))},_setOptions:t(function(e){this._super(e),this._value(this.element.val())}),_parse:function(e){return"string"==typeof e&&""!==e&&(e=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(e,10,this.options.culture):+e),""===e||isNaN(e)?null:e},_format:function(e){return""===e?"":window.Globalize&&this.options.numberFormat?Globalize.format(e,this.options.numberFormat,this.options.culture):e},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},_value:function(e,t){var i;""!==e&&(i=this._parse(e),null!==i&&(t||(i=this._adjustValue(i)),e=this._format(i))),this.element.val(e),this._refresh()},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:t(function(e){this._stepUp(e)}),_stepUp:function(e){this._start()&&(this._spin((e||1)*this.options.step),this._stop())},stepDown:t(function(e){this._stepDown(e)}),_stepDown:function(e){this._start()&&(this._spin((e||1)*-this.options.step),this._stop())},pageUp:t(function(e){this._stepUp((e||1)*this.options.page)}),pageDown:t(function(e){this._stepDown((e||1)*this.options.page)}),value:function(e){return arguments.length?void t(this._value).call(this,e):this._parse(this.element.val())},widget:function(){return this.uiSpinner}})}(jQuery),function(e,t){function i(){return++s}function n(e){return e.hash.length>1&&decodeURIComponent(e.href.replace(o,""))===decodeURIComponent(location.href.replace(o,""))}var s=0,o=/#.*$/;e.widget("ui.tabs",{version:"1.10.3",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_create:function(){var t=this,i=this.options;this.running=!1,this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",i.collapsible).delegate(".ui-tabs-nav > li","mousedown"+this.eventNamespace,function(t){e(this).is(".ui-state-disabled")&&t.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){e(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this._processTabs(),i.active=this._initialActive(),e.isArray(i.disabled)&&(i.disabled=e.unique(i.disabled.concat(e.map(this.tabs.filter(".ui-state-disabled"),function(e){return t.tabs.index(e)}))).sort()),this.active=this.options.active!==!1&&this.anchors.length?this._findActive(i.active):e(),this._refresh(),this.active.length&&this.load(i.active)},_initialActive:function(){var i=this.options.active,n=this.options.collapsible,s=location.hash.substring(1);return null===i&&(s&&this.tabs.each(function(n,o){return e(o).attr("aria-controls")===s?(i=n,!1):t}),null===i&&(i=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),(null===i||-1===i)&&(i=this.tabs.length?0:!1)),i!==!1&&(i=this.tabs.index(this.tabs.eq(i)),-1===i&&(i=n?!1:0)),!n&&i===!1&&this.anchors.length&&(i=0),i},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):e()}},_tabKeydown:function(i){var n=e(this.document[0].activeElement).closest("li"),s=this.tabs.index(n),o=!0;if(!this._handlePageNav(i)){switch(i.keyCode){case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:s++;break;case e.ui.keyCode.UP:case e.ui.keyCode.LEFT:o=!1,s--;break;case e.ui.keyCode.END:s=this.anchors.length-1;break;case e.ui.keyCode.HOME:s=0;break;case e.ui.keyCode.SPACE:return i.preventDefault(),clearTimeout(this.activating),this._activate(s),t;case e.ui.keyCode.ENTER:return i.preventDefault(),clearTimeout(this.activating),this._activate(s===this.options.active?!1:s),t;default:return}i.preventDefault(),clearTimeout(this.activating),s=this._focusNextTab(s,o),i.ctrlKey||(n.attr("aria-selected","false"),this.tabs.eq(s).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",s)},this.delay))}},_panelKeydown:function(t){this._handlePageNav(t)||t.ctrlKey&&t.keyCode===e.ui.keyCode.UP&&(t.preventDefault(),this.active.focus())},_handlePageNav:function(i){return i.altKey&&i.keyCode===e.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):i.altKey&&i.keyCode===e.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):t},_findNextTab:function(t,i){function n(){return t>s&&(t=0),0>t&&(t=s),t}for(var s=this.tabs.length-1;-1!==e.inArray(n(),this.options.disabled);)t=i?t+1:t-1;return t},_focusNextTab:function(e,t){return e=this._findNextTab(e,t),this.tabs.eq(e).focus(),e},_setOption:function(e,i){return"active"===e?(this._activate(i),t):"disabled"===e?(this._setupDisabled(i),t):(this._super(e,i),"collapsible"===e&&(this.element.toggleClass("ui-tabs-collapsible",i),i||this.options.active!==!1||this._activate(0)),"event"===e&&this._setupEvents(i),"heightStyle"===e&&this._setupHeightStyle(i),t)},_tabId:function(e){return e.attr("aria-controls")||"ui-tabs-"+i()},_sanitizeSelector:function(e){return e?e.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var t=this.options,i=this.tablist.children(":has(a[href])");t.disabled=e.map(i.filter(".ui-state-disabled"),function(e){return i.index(e)}),this._processTabs(),t.active!==!1&&this.anchors.length?this.active.length&&!e.contains(this.tablist[0],this.active[0])?this.tabs.length===t.disabled.length?(t.active=!1,this.active=e()):this._activate(this._findNextTab(Math.max(0,t.active-1),!1)):t.active=this.tabs.index(this.active):(t.active=!1,this.active=e()),this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-expanded":"false","aria-hidden":"true"}),this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-expanded":"true","aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var t=this;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist"),this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1}),this.anchors=this.tabs.map(function(){return e("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1}),this.panels=e(),this.anchors.each(function(i,s){var o,r,a,l=e(s).uniqueId().attr("id"),c=e(s).closest("li"),d=c.attr("aria-controls");n(s)?(o=s.hash,r=t.element.find(t._sanitizeSelector(o))):(a=t._tabId(c),o="#"+a,r=t.element.find(o),r.length||(r=t._createPanel(a),r.insertAfter(t.panels[i-1]||t.tablist)),r.attr("aria-live","polite")),r.length&&(t.panels=t.panels.add(r)),d&&c.data("ui-tabs-aria-controls",d),c.attr({"aria-controls":o.substring(1),"aria-labelledby":l}),r.attr("aria-labelledby",l)}),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel")},_getList:function(){return this.element.find("ol,ul").eq(0)},_createPanel:function(t){return e("<div>").attr("id",t).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(t){e.isArray(t)&&(t.length?t.length===this.anchors.length&&(t=!0):t=!1);for(var i,n=0;i=this.tabs[n];n++)t===!0||-1!==e.inArray(n,t)?e(i).addClass("ui-state-disabled").attr("aria-disabled","true"):e(i).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=t},_setupEvents:function(t){var i={click:function(e){e.preventDefault()}};t&&e.each(t.split(" "),function(e,t){i[t]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(this.anchors,i),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(t){var i,n=this.element.parent();"fill"===t?(i=n.height(),i-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var t=e(this),n=t.css("position");"absolute"!==n&&"fixed"!==n&&(i-=t.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){i-=e(this).outerHeight(!0)}),this.panels.each(function(){e(this).height(Math.max(0,i-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):"auto"===t&&(i=0,this.panels.each(function(){i=Math.max(i,e(this).height("").height())}).height(i))},_eventHandler:function(t){var i=this.options,n=this.active,s=e(t.currentTarget),o=s.closest("li"),r=o[0]===n[0],a=r&&i.collapsible,l=a?e():this._getPanelForTab(o),c=n.length?this._getPanelForTab(n):e(),d={oldTab:n,oldPanel:c,newTab:a?e():o,newPanel:l};t.preventDefault(),o.hasClass("ui-state-disabled")||o.hasClass("ui-tabs-loading")||this.running||r&&!i.collapsible||this._trigger("beforeActivate",t,d)===!1||(i.active=a?!1:this.tabs.index(o),this.active=r?e():o,this.xhr&&this.xhr.abort(),c.length||l.length||e.error("jQuery UI Tabs: Mismatching fragment identifier."),l.length&&this.load(this.tabs.index(o),t),this._toggle(t,d))},_toggle:function(t,i){function n(){o.running=!1,o._trigger("activate",t,i)}function s(){i.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),r.length&&o.options.show?o._show(r,o.options.show,n):(r.show(),n())}var o=this,r=i.newPanel,a=i.oldPanel;this.running=!0,a.length&&this.options.hide?this._hide(a,this.options.hide,function(){i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),s()}):(i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),a.hide(),s()),a.attr({"aria-expanded":"false","aria-hidden":"true"}),i.oldTab.attr("aria-selected","false"),r.length&&a.length?i.oldTab.attr("tabIndex",-1):r.length&&this.tabs.filter(function(){return 0===e(this).attr("tabIndex")}).attr("tabIndex",-1),r.attr({"aria-expanded":"true","aria-hidden":"false"}),i.newTab.attr({"aria-selected":"true",tabIndex:0})},_activate:function(t){var i,n=this._findActive(t);n[0]!==this.active[0]&&(n.length||(n=this.active),i=n.find(".ui-tabs-anchor")[0],this._eventHandler({target:i,currentTarget:i,preventDefault:e.noop}))},_findActive:function(t){return t===!1?e():this.tabs.eq(t)},_getIndex:function(e){return"string"==typeof e&&(e=this.anchors.index(this.anchors.filter("[href$='"+e+"']"))),e},_destroy:function(){this.xhr&&this.xhr.abort(),this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"),this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"),this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId(),this.tabs.add(this.panels).each(function(){e.data(this,"ui-tabs-destroy")?e(this).remove():e(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")}),this.tabs.each(function(){var t=e(this),i=t.data("ui-tabs-aria-controls");i?t.attr("aria-controls",i).removeData("ui-tabs-aria-controls"):t.removeAttr("aria-controls")}),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(i){var n=this.options.disabled;n!==!1&&(i===t?n=!1:(i=this._getIndex(i),n=e.isArray(n)?e.map(n,function(e){return e!==i?e:null}):e.map(this.tabs,function(e,t){return t!==i?t:null})),this._setupDisabled(n))},disable:function(i){var n=this.options.disabled;if(n!==!0){if(i===t)n=!0;else{if(i=this._getIndex(i),-1!==e.inArray(i,n))return;n=e.isArray(n)?e.merge([i],n).sort():[i]}this._setupDisabled(n)}},load:function(t,i){t=this._getIndex(t);var s=this,o=this.tabs.eq(t),r=o.find(".ui-tabs-anchor"),a=this._getPanelForTab(o),l={tab:o,panel:a};n(r[0])||(this.xhr=e.ajax(this._ajaxSettings(r,i,l)),this.xhr&&"canceled"!==this.xhr.statusText&&(o.addClass("ui-tabs-loading"),a.attr("aria-busy","true"),this.xhr.success(function(e){setTimeout(function(){a.html(e),s._trigger("load",i,l)},1)}).complete(function(e,t){setTimeout(function(){"abort"===t&&s.panels.stop(!1,!0),o.removeClass("ui-tabs-loading"),a.removeAttr("aria-busy"),e===s.xhr&&delete s.xhr},1)})))},_ajaxSettings:function(t,i,n){var s=this;return{url:t.attr("href"),beforeSend:function(t,o){return s._trigger("beforeLoad",i,e.extend({jqXHR:t,ajaxSettings:o},n))}}},_getPanelForTab:function(t){var i=e(t).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+i))}})}(jQuery),function(e){function t(t,i){var n=(t.attr("aria-describedby")||"").split(/\s+/);n.push(i),t.data("ui-tooltip-id",i).attr("aria-describedby",e.trim(n.join(" ")))}function i(t){var i=t.data("ui-tooltip-id"),n=(t.attr("aria-describedby")||"").split(/\s+/),s=e.inArray(i,n);-1!==s&&n.splice(s,1),t.removeData("ui-tooltip-id"),n=e.trim(n.join(" ")),n?t.attr("aria-describedby",n):t.removeAttr("aria-describedby")}var n=0;e.widget("ui.tooltip",{version:"1.10.3",options:{content:function(){var t=e(this).attr("title")||"";return e("<a>").text(t).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.options.disabled&&this._disable()},_setOption:function(t,i){var n=this;return"disabled"===t?(this[i?"_disable":"_enable"](),void(this.options[t]=i)):(this._super(t,i),void("content"===t&&e.each(this.tooltips,function(e,t){n._updateContent(t)})))},_disable:function(){var t=this;e.each(this.tooltips,function(i,n){var s=e.Event("blur");s.target=s.currentTarget=n[0],t.close(s,!0)}),this.element.find(this.options.items).addBack().each(function(){var t=e(this);t.is("[title]")&&t.data("ui-tooltip-title",t.attr("title")).attr("title","")})},_enable:function(){this.element.find(this.options.items).addBack().each(function(){var t=e(this);t.data("ui-tooltip-title")&&t.attr("title",t.data("ui-tooltip-title"))})},open:function(t){var i=this,n=e(t?t.target:this.element).closest(this.options.items);n.length&&!n.data("ui-tooltip-id")&&(n.attr("title")&&n.data("ui-tooltip-title",n.attr("title")),n.data("ui-tooltip-open",!0),t&&"mouseover"===t.type&&n.parents().each(function(){var t,n=e(this);n.data("ui-tooltip-open")&&(t=e.Event("blur"),t.target=t.currentTarget=this,i.close(t,!0)),n.attr("title")&&(n.uniqueId(),i.parents[this.id]={element:this,title:n.attr("title")},n.attr("title",""))}),this._updateContent(n,t))},_updateContent:function(e,t){var i,n=this.options.content,s=this,o=t?t.type:null;return"string"==typeof n?this._open(t,e,n):(i=n.call(e[0],function(i){e.data("ui-tooltip-open")&&s._delay(function(){t&&(t.type=o),this._open(t,e,i)})}),void(i&&this._open(t,e,i)))},_open:function(i,n,s){function o(e){c.of=e,r.is(":hidden")||r.position(c)}var r,a,l,c=e.extend({},this.options.position);if(s){if(r=this._find(n),r.length)return void r.find(".ui-tooltip-content").html(s);n.is("[title]")&&(i&&"mouseover"===i.type?n.attr("title",""):n.removeAttr("title")),r=this._tooltip(n),t(n,r.attr("id")),r.find(".ui-tooltip-content").html(s),this.options.track&&i&&/^mouse/.test(i.type)?(this._on(this.document,{mousemove:o}),o(i)):r.position(e.extend({of:n},this.options.position)),r.hide(),this._show(r,this.options.show),this.options.show&&this.options.show.delay&&(l=this.delayedShow=setInterval(function(){r.is(":visible")&&(o(c.of),clearInterval(l))},e.fx.interval)),this._trigger("open",i,{tooltip:r}),a={keyup:function(t){if(t.keyCode===e.ui.keyCode.ESCAPE){var i=e.Event(t);i.currentTarget=n[0],this.close(i,!0)}},remove:function(){this._removeTooltip(r)}},i&&"mouseover"!==i.type||(a.mouseleave="close"),i&&"focusin"!==i.type||(a.focusout="close"),this._on(!0,n,a)}},close:function(t){var n=this,s=e(t?t.currentTarget:this.element),o=this._find(s);this.closing||(clearInterval(this.delayedShow),s.data("ui-tooltip-title")&&s.attr("title",s.data("ui-tooltip-title")),i(s),o.stop(!0),this._hide(o,this.options.hide,function(){n._removeTooltip(e(this))}),s.removeData("ui-tooltip-open"),this._off(s,"mouseleave focusout keyup"),s[0]!==this.element[0]&&this._off(s,"remove"),this._off(this.document,"mousemove"),t&&"mouseleave"===t.type&&e.each(this.parents,function(t,i){e(i.element).attr("title",i.title),delete n.parents[t]}),this.closing=!0,this._trigger("close",t,{tooltip:o}),this.closing=!1)},_tooltip:function(t){var i="ui-tooltip-"+n++,s=e("<div>").attr({id:i,role:"tooltip"}).addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||""));return e("<div>").addClass("ui-tooltip-content").appendTo(s),s.appendTo(this.document[0].body),this.tooltips[i]=t,s},_find:function(t){var i=t.data("ui-tooltip-id");return i?e("#"+i):e()},_removeTooltip:function(e){e.remove(),delete this.tooltips[e.attr("id")]},_destroy:function(){var t=this;e.each(this.tooltips,function(i,n){var s=e.Event("blur");s.target=s.currentTarget=n[0],t.close(s,!0),e("#"+i).remove(),n.data("ui-tooltip-title")&&(n.attr("title",n.data("ui-tooltip-title")),n.removeData("ui-tooltip-title"))})}})}(jQuery),/*! jPlayer 2.9.2 for jQuery ~ (c) 2009-2014 Happyworm Ltd ~ MIT License */
!function(e,t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports?require("jquery"):e.jQuery?e.jQuery:e.Zepto)}(this,function(e,t){e.fn.jPlayer=function(i){var n="jPlayer",s="string"==typeof i,o=Array.prototype.slice.call(arguments,1),r=this;return i=!s&&o.length?e.extend.apply(null,[!0,i].concat(o)):i,s&&"_"===i.charAt(0)?r:(this.each(s?function(){var s=e(this).data(n),a=s&&e.isFunction(s[i])?s[i].apply(s,o):s;return a!==s&&a!==t?(r=a,!1):void 0}:function(){var t=e(this).data(n);t?t.option(i||{}):e(this).data(n,new e.jPlayer(i,this))}),r)},e.jPlayer=function(t,i){if(arguments.length){this.element=e(i),this.options=e.extend(!0,{},this.options,t);var n=this;this.element.bind("remove.jPlayer",function(){n.destroy()}),this._init()}},"function"!=typeof e.fn.stop&&(e.fn.stop=function(){}),e.jPlayer.emulateMethods="load play pause",e.jPlayer.emulateStatus="src readyState networkState currentTime duration paused ended playbackRate",e.jPlayer.emulateOptions="muted volume",e.jPlayer.reservedEvent="ready flashreset resize repeat error warning",e.jPlayer.event={},e.each(["ready","setmedia","flashreset","resize","repeat","click","error","warning","loadstart","progress","suspend","abort","emptied","stalled","play","pause","loadedmetadata","loadeddata","waiting","playing","canplay","canplaythrough","seeking","seeked","timeupdate","ended","ratechange","durationchange","volumechange"],function(){e.jPlayer.event[this]="jPlayer_"+this}),e.jPlayer.htmlEvent=["loadstart","abort","emptied","stalled","loadedmetadata","canplay","canplaythrough"],e.jPlayer.pause=function(){e.jPlayer.prototype.destroyRemoved(),e.each(e.jPlayer.prototype.instances,function(e,t){t.data("jPlayer").status.srcSet&&t.jPlayer("pause")})},e.jPlayer.timeFormat={showHour:!1,showMin:!0,showSec:!0,padHour:!1,padMin:!0,padSec:!0,sepHour:":",sepMin:":",sepSec:""};var i=function(){this.init()};i.prototype={init:function(){this.options={timeFormat:e.jPlayer.timeFormat}},time:function(e){e=e&&"number"==typeof e?e:0;var t=new Date(1e3*e),i=t.getUTCHours(),n=this.options.timeFormat.showHour?t.getUTCMinutes():t.getUTCMinutes()+60*i,s=this.options.timeFormat.showMin?t.getUTCSeconds():t.getUTCSeconds()+60*n,o=this.options.timeFormat.padHour&&10>i?"0"+i:i,r=this.options.timeFormat.padMin&&10>n?"0"+n:n,a=this.options.timeFormat.padSec&&10>s?"0"+s:s,l="";return l+=this.options.timeFormat.showHour?o+this.options.timeFormat.sepHour:"",l+=this.options.timeFormat.showMin?r+this.options.timeFormat.sepMin:"",l+=this.options.timeFormat.showSec?a+this.options.timeFormat.sepSec:""}};var n=new i;e.jPlayer.convertTime=function(e){return n.time(e)},e.jPlayer.uaBrowser=function(e){var t=e.toLowerCase(),i=/(webkit)[ \/]([\w.]+)/,n=/(opera)(?:.*version)?[ \/]([\w.]+)/,s=/(msie) ([\w.]+)/,o=/(mozilla)(?:.*? rv:([\w.]+))?/,r=i.exec(t)||n.exec(t)||s.exec(t)||t.indexOf("compatible")<0&&o.exec(t)||[];return{browser:r[1]||"",version:r[2]||"0"}},e.jPlayer.uaPlatform=function(e){var t=e.toLowerCase(),i=/(ipad|iphone|ipod|android|blackberry|playbook|windows ce|webos)/,n=/(ipad|playbook)/,s=/(android)/,o=/(mobile)/,r=i.exec(t)||[],a=n.exec(t)||!o.exec(t)&&s.exec(t)||[];return r[1]&&(r[1]=r[1].replace(/\s/g,"_")),{platform:r[1]||"",tablet:a[1]||""}},e.jPlayer.browser={},e.jPlayer.platform={};var s=e.jPlayer.uaBrowser(navigator.userAgent);s.browser&&(e.jPlayer.browser[s.browser]=!0,e.jPlayer.browser.version=s.version);var o=e.jPlayer.uaPlatform(navigator.userAgent);o.platform&&(e.jPlayer.platform[o.platform]=!0,e.jPlayer.platform.mobile=!o.tablet,e.jPlayer.platform.tablet=!!o.tablet),e.jPlayer.getDocMode=function(){var t;return e.jPlayer.browser.msie&&(document.documentMode?t=document.documentMode:(t=5,document.compatMode&&"CSS1Compat"===document.compatMode&&(t=7))),t},e.jPlayer.browser.documentMode=e.jPlayer.getDocMode(),e.jPlayer.nativeFeatures={init:function(){var e,t,i,n=document,s=n.createElement("video"),o={w3c:["fullscreenEnabled","fullscreenElement","requestFullscreen","exitFullscreen","fullscreenchange","fullscreenerror"],moz:["mozFullScreenEnabled","mozFullScreenElement","mozRequestFullScreen","mozCancelFullScreen","mozfullscreenchange","mozfullscreenerror"],webkit:["","webkitCurrentFullScreenElement","webkitRequestFullScreen","webkitCancelFullScreen","webkitfullscreenchange",""],webkitVideo:["webkitSupportsFullscreen","webkitDisplayingFullscreen","webkitEnterFullscreen","webkitExitFullscreen","",""],ms:["","msFullscreenElement","msRequestFullscreen","msExitFullscreen","MSFullscreenChange","MSFullscreenError"]},r=["w3c","moz","webkit","webkitVideo","ms"];for(this.fullscreen=e={support:{w3c:!!n[o.w3c[0]],moz:!!n[o.moz[0]],webkit:"function"==typeof n[o.webkit[3]],webkitVideo:"function"==typeof s[o.webkitVideo[2]],ms:"function"==typeof s[o.ms[2]]},used:{}},t=0,i=r.length;i>t;t++){var a=r[t];if(e.support[a]){e.spec=a,e.used[a]=!0;break}}if(e.spec){var l=o[e.spec];e.api={fullscreenEnabled:!0,fullscreenElement:function(e){return e=e?e:n,e[l[1]]},requestFullscreen:function(e){return e[l[2]]()},exitFullscreen:function(e){return e=e?e:n,e[l[3]]()}},e.event={fullscreenchange:l[4],fullscreenerror:l[5]}}else e.api={fullscreenEnabled:!1,fullscreenElement:function(){return null},requestFullscreen:function(){},exitFullscreen:function(){}},e.event={}}},e.jPlayer.nativeFeatures.init(),e.jPlayer.focus=null,e.jPlayer.keyIgnoreElementNames="A INPUT TEXTAREA SELECT BUTTON";var r=function(t){var i,n=e.jPlayer.focus;n&&(e.each(e.jPlayer.keyIgnoreElementNames.split(/\s+/g),function(e,n){return t.target.nodeName.toUpperCase()===n.toUpperCase()?(i=!0,!1):void 0}),i||e.each(n.options.keyBindings,function(i,s){return s&&e.isFunction(s.fn)&&("number"==typeof s.key&&t.which===s.key||"string"==typeof s.key&&t.key===s.key)?(t.preventDefault(),s.fn(n),!1):void 0}))};e.jPlayer.keys=function(t){var i="keydown.jPlayer";e(document.documentElement).unbind(i),t&&e(document.documentElement).bind(i,r)},e.jPlayer.keys(!0),e.jPlayer.prototype={count:0,version:{script:"2.9.2",needFlash:"2.9.0",flash:"unknown"},options:{swfPath:"js",solution:"html, flash",supplied:"mp3",auroraFormats:"wav",preload:"metadata",volume:.8,muted:!1,remainingDuration:!1,toggleDuration:!1,captureDuration:!0,playbackRate:1,defaultPlaybackRate:1,minPlaybackRate:.5,maxPlaybackRate:4,wmode:"opaque",backgroundColor:"#000000",cssSelectorAncestor:"#jp_container_1",cssSelector:{videoPlay:".jp-video-play",play:".jp-play",pause:".jp-pause",stop:".jp-stop",seekBar:".jp-seek-bar",playBar:".jp-play-bar",mute:".jp-mute",unmute:".jp-unmute",volumeBar:".jp-volume-bar",volumeBarValue:".jp-volume-bar-value",volumeMax:".jp-volume-max",playbackRateBar:".jp-playback-rate-bar",playbackRateBarValue:".jp-playback-rate-bar-value",currentTime:".jp-current-time",duration:".jp-duration",title:".jp-title",fullScreen:".jp-full-screen",restoreScreen:".jp-restore-screen",repeat:".jp-repeat",repeatOff:".jp-repeat-off",gui:".jp-gui",noSolution:".jp-no-solution"},stateClass:{playing:"jp-state-playing",seeking:"jp-state-seeking",muted:"jp-state-muted",looped:"jp-state-looped",fullScreen:"jp-state-full-screen",noVolume:"jp-state-no-volume"},useStateClassSkin:!1,autoBlur:!0,smoothPlayBar:!1,fullScreen:!1,fullWindow:!1,autohide:{restored:!1,full:!0,fadeIn:200,fadeOut:600,hold:1e3},loop:!1,repeat:function(t){t.jPlayer.options.loop?e(this).unbind(".jPlayerRepeat").bind(e.jPlayer.event.ended+".jPlayer.jPlayerRepeat",function(){e(this).jPlayer("play")}):e(this).unbind(".jPlayerRepeat")},nativeVideoControls:{},noFullWindow:{msie:/msie [0-6]\./,ipad:/ipad.*?os [0-4]\./,iphone:/iphone/,ipod:/ipod/,android_pad:/android [0-3]\.(?!.*?mobile)/,android_phone:/(?=.*android)(?!.*chrome)(?=.*mobile)/,blackberry:/blackberry/,windows_ce:/windows ce/,iemobile:/iemobile/,webos:/webos/},noVolume:{ipad:/ipad/,iphone:/iphone/,ipod:/ipod/,android_pad:/android(?!.*?mobile)/,android_phone:/android.*?mobile/,blackberry:/blackberry/,windows_ce:/windows ce/,iemobile:/iemobile/,webos:/webos/,playbook:/playbook/},timeFormat:{},keyEnabled:!1,audioFullScreen:!1,keyBindings:{play:{key:80,fn:function(e){e.status.paused?e.play():e.pause()}},fullScreen:{key:70,fn:function(e){(e.status.video||e.options.audioFullScreen)&&e._setOption("fullScreen",!e.options.fullScreen)}},muted:{key:77,fn:function(e){e._muted(!e.options.muted)}},volumeUp:{key:190,fn:function(e){e.volume(e.options.volume+.1)}},volumeDown:{key:188,fn:function(e){e.volume(e.options.volume-.1)}},loop:{key:76,fn:function(e){e._loop(!e.options.loop)}}},verticalVolume:!1,verticalPlaybackRate:!1,globalVolume:!1,idPrefix:"jp",noConflict:"jQuery",emulateHtml:!1,consoleAlerts:!0,errorAlerts:!1,warningAlerts:!1},optionsAudio:{size:{width:"0px",height:"0px",cssClass:""},sizeFull:{width:"0px",height:"0px",cssClass:""}},optionsVideo:{size:{width:"480px",height:"270px",cssClass:"jp-video-270p"},sizeFull:{width:"100%",height:"100%",cssClass:"jp-video-full"}},instances:{},status:{src:"",media:{},paused:!0,format:{},formatType:"",waitForPlay:!0,waitForLoad:!0,srcSet:!1,video:!1,seekPercent:0,currentPercentRelative:0,currentPercentAbsolute:0,currentTime:0,duration:0,remaining:0,videoWidth:0,videoHeight:0,readyState:0,networkState:0,playbackRate:1,ended:0},internal:{ready:!1},solution:{html:!0,aurora:!0,flash:!0},format:{mp3:{codec:"audio/mpeg",flashCanPlay:!0,media:"audio"},m4a:{codec:'audio/mp4; codecs="mp4a.40.2"',flashCanPlay:!0,media:"audio"},m3u8a:{codec:'application/vnd.apple.mpegurl; codecs="mp4a.40.2"',flashCanPlay:!1,media:"audio"},m3ua:{codec:"audio/mpegurl",flashCanPlay:!1,media:"audio"},oga:{codec:'audio/ogg; codecs="vorbis, opus"',flashCanPlay:!1,media:"audio"},flac:{codec:"audio/x-flac",flashCanPlay:!1,media:"audio"},wav:{codec:'audio/wav; codecs="1"',flashCanPlay:!1,media:"audio"},webma:{codec:'audio/webm; codecs="vorbis"',flashCanPlay:!1,media:"audio"},fla:{codec:"audio/x-flv",flashCanPlay:!0,media:"audio"},rtmpa:{codec:'audio/rtmp; codecs="rtmp"',flashCanPlay:!0,media:"audio"},m4v:{codec:'video/mp4; codecs="avc1.42E01E, mp4a.40.2"',flashCanPlay:!0,media:"video"},m3u8v:{codec:'application/vnd.apple.mpegurl; codecs="avc1.42E01E, mp4a.40.2"',flashCanPlay:!1,media:"video"},m3uv:{codec:"audio/mpegurl",flashCanPlay:!1,media:"video"},ogv:{codec:'video/ogg; codecs="theora, vorbis"',flashCanPlay:!1,media:"video"},webmv:{codec:'video/webm; codecs="vorbis, vp8"',flashCanPlay:!1,media:"video"},flv:{codec:"video/x-flv",flashCanPlay:!0,media:"video"},rtmpv:{codec:'video/rtmp; codecs="rtmp"',flashCanPlay:!0,media:"video"}},_init:function(){var i=this;if(this.element.empty(),this.status=e.extend({},this.status),this.internal=e.extend({},this.internal),this.options.timeFormat=e.extend({},e.jPlayer.timeFormat,this.options.timeFormat),this.internal.cmdsIgnored=e.jPlayer.platform.ipad||e.jPlayer.platform.iphone||e.jPlayer.platform.ipod,this.internal.domNode=this.element.get(0),this.options.keyEnabled&&!e.jPlayer.focus&&(e.jPlayer.focus=this),this.androidFix={setMedia:!1,play:!1,pause:!1,time:NaN},e.jPlayer.platform.android&&(this.options.preload="auto"!==this.options.preload?"metadata":"auto"),this.formats=[],this.solutions=[],this.require={},this.htmlElement={},this.html={},this.html.audio={},this.html.video={},this.aurora={},this.aurora.formats=[],this.aurora.properties=[],this.flash={},this.css={},this.css.cs={},this.css.jq={},this.ancestorJq=[],this.options.volume=this._limitValue(this.options.volume,0,1),e.each(this.options.supplied.toLowerCase().split(","),function(t,n){var s=n.replace(/^\s+|\s+$/g,"");if(i.format[s]){var o=!1;e.each(i.formats,function(e,t){return s===t?(o=!0,!1):void 0}),o||i.formats.push(s)}}),e.each(this.options.solution.toLowerCase().split(","),function(t,n){var s=n.replace(/^\s+|\s+$/g,"");if(i.solution[s]){var o=!1;e.each(i.solutions,function(e,t){return s===t?(o=!0,!1):void 0}),o||i.solutions.push(s)}}),e.each(this.options.auroraFormats.toLowerCase().split(","),function(t,n){var s=n.replace(/^\s+|\s+$/g,"");if(i.format[s]){var o=!1;e.each(i.aurora.formats,function(e,t){return s===t?(o=!0,!1):void 0}),o||i.aurora.formats.push(s)}}),this.internal.instance="jp_"+this.count,this.instances[this.internal.instance]=this.element,this.element.attr("id")||this.element.attr("id",this.options.idPrefix+"_jplayer_"+this.count),this.internal.self=e.extend({},{id:this.element.attr("id"),jq:this.element}),this.internal.audio=e.extend({},{id:this.options.idPrefix+"_audio_"+this.count,jq:t}),this.internal.video=e.extend({},{id:this.options.idPrefix+"_video_"+this.count,jq:t}),this.internal.flash=e.extend({},{id:this.options.idPrefix+"_flash_"+this.count,jq:t,swf:this.options.swfPath+(".swf"!==this.options.swfPath.toLowerCase().slice(-4)?(this.options.swfPath&&"/"!==this.options.swfPath.slice(-1)?"/":"")+"jquery.jplayer.swf":"")}),this.internal.poster=e.extend({},{id:this.options.idPrefix+"_poster_"+this.count,jq:t}),e.each(e.jPlayer.event,function(e,n){i.options[e]!==t&&(i.element.bind(n+".jPlayer",i.options[e]),i.options[e]=t)}),this.require.audio=!1,this.require.video=!1,e.each(this.formats,function(e,t){i.require[i.format[t].media]=!0}),this.options=this.require.video?e.extend(!0,{},this.optionsVideo,this.options):e.extend(!0,{},this.optionsAudio,this.options),this._setSize(),this.status.nativeVideoControls=this._uaBlocklist(this.options.nativeVideoControls),this.status.noFullWindow=this._uaBlocklist(this.options.noFullWindow),this.status.noVolume=this._uaBlocklist(this.options.noVolume),e.jPlayer.nativeFeatures.fullscreen.api.fullscreenEnabled&&this._fullscreenAddEventListeners(),this._restrictNativeVideoControls(),this.htmlElement.poster=document.createElement("img"),this.htmlElement.poster.id=this.internal.poster.id,this.htmlElement.poster.onload=function(){(!i.status.video||i.status.waitForPlay)&&i.internal.poster.jq.show()},this.element.append(this.htmlElement.poster),this.internal.poster.jq=e("#"+this.internal.poster.id),this.internal.poster.jq.css({width:this.status.width,height:this.status.height}),this.internal.poster.jq.hide(),this.internal.poster.jq.bind("click.jPlayer",function(){i._trigger(e.jPlayer.event.click)}),this.html.audio.available=!1,this.require.audio&&(this.htmlElement.audio=document.createElement("audio"),this.htmlElement.audio.id=this.internal.audio.id,this.html.audio.available=!!this.htmlElement.audio.canPlayType&&this._testCanPlayType(this.htmlElement.audio)),this.html.video.available=!1,this.require.video&&(this.htmlElement.video=document.createElement("video"),this.htmlElement.video.id=this.internal.video.id,this.html.video.available=!!this.htmlElement.video.canPlayType&&this._testCanPlayType(this.htmlElement.video)),this.flash.available=this._checkForFlash(10.1),this.html.canPlay={},this.aurora.canPlay={},this.flash.canPlay={},e.each(this.formats,function(t,n){i.html.canPlay[n]=i.html[i.format[n].media].available&&""!==i.htmlElement[i.format[n].media].canPlayType(i.format[n].codec),i.aurora.canPlay[n]=e.inArray(n,i.aurora.formats)>-1,i.flash.canPlay[n]=i.format[n].flashCanPlay&&i.flash.available}),this.html.desired=!1,this.aurora.desired=!1,this.flash.desired=!1,e.each(this.solutions,function(t,n){if(0===t)i[n].desired=!0;else{var s=!1,o=!1;e.each(i.formats,function(e,t){i[i.solutions[0]].canPlay[t]&&("video"===i.format[t].media?o=!0:s=!0)}),i[n].desired=i.require.audio&&!s||i.require.video&&!o}}),this.html.support={},this.aurora.support={},this.flash.support={},e.each(this.formats,function(e,t){i.html.support[t]=i.html.canPlay[t]&&i.html.desired,i.aurora.support[t]=i.aurora.canPlay[t]&&i.aurora.desired,i.flash.support[t]=i.flash.canPlay[t]&&i.flash.desired}),this.html.used=!1,this.aurora.used=!1,this.flash.used=!1,e.each(this.solutions,function(t,n){e.each(i.formats,function(e,t){return i[n].support[t]?(i[n].used=!0,!1):void 0})}),this._resetActive(),this._resetGate(),this._cssSelectorAncestor(this.options.cssSelectorAncestor),this.html.used||this.aurora.used||this.flash.used?this.css.jq.noSolution.length&&this.css.jq.noSolution.hide():(this._error({type:e.jPlayer.error.NO_SOLUTION,context:"{solution:'"+this.options.solution+"', supplied:'"+this.options.supplied+"'}",message:e.jPlayer.errorMsg.NO_SOLUTION,hint:e.jPlayer.errorHint.NO_SOLUTION}),this.css.jq.noSolution.length&&this.css.jq.noSolution.show()),this.flash.used){var n,s="jQuery="+encodeURI(this.options.noConflict)+"&id="+encodeURI(this.internal.self.id)+"&vol="+this.options.volume+"&muted="+this.options.muted;if(e.jPlayer.browser.msie&&(Number(e.jPlayer.browser.version)<9||e.jPlayer.browser.documentMode<9)){var o='<object id="'+this.internal.flash.id+'" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" width="0" height="0" tabindex="-1"></object>',r=['<param name="movie" value="'+this.internal.flash.swf+'" />','<param name="FlashVars" value="'+s+'" />','<param name="allowScriptAccess" value="always" />','<param name="bgcolor" value="'+this.options.backgroundColor+'" />','<param name="wmode" value="'+this.options.wmode+'" />'];n=document.createElement(o);for(var a=0;a<r.length;a++)n.appendChild(document.createElement(r[a]))}else{var l=function(e,t,i){var n=document.createElement("param");n.setAttribute("name",t),n.setAttribute("value",i),e.appendChild(n)};n=document.createElement("object"),n.setAttribute("id",this.internal.flash.id),n.setAttribute("name",this.internal.flash.id),n.setAttribute("data",this.internal.flash.swf),n.setAttribute("type","application/x-shockwave-flash"),n.setAttribute("width","1"),n.setAttribute("height","1"),n.setAttribute("tabindex","-1"),l(n,"flashvars",s),l(n,"allowscriptaccess","always"),l(n,"bgcolor",this.options.backgroundColor),l(n,"wmode",this.options.wmode)}this.element.append(n),this.internal.flash.jq=e(n)}this.status.playbackRateEnabled=this.html.used&&!this.flash.used?this._testPlaybackRate("audio"):!1,this._updatePlaybackRate(),this.html.used&&(this.html.audio.available&&(this._addHtmlEventListeners(this.htmlElement.audio,this.html.audio),this.element.append(this.htmlElement.audio),this.internal.audio.jq=e("#"+this.internal.audio.id)),this.html.video.available&&(this._addHtmlEventListeners(this.htmlElement.video,this.html.video),this.element.append(this.htmlElement.video),this.internal.video.jq=e("#"+this.internal.video.id),this.internal.video.jq.css(this.status.nativeVideoControls?{width:this.status.width,height:this.status.height}:{width:"0px",height:"0px"}),this.internal.video.jq.bind("click.jPlayer",function(){i._trigger(e.jPlayer.event.click)}))),this.aurora.used,this.options.emulateHtml&&this._emulateHtmlBridge(),!this.html.used&&!this.aurora.used||this.flash.used||setTimeout(function(){i.internal.ready=!0,i.version.flash="n/a",i._trigger(e.jPlayer.event.repeat),i._trigger(e.jPlayer.event.ready)},100),this._updateNativeVideoControls(),this.css.jq.videoPlay.length&&this.css.jq.videoPlay.hide(),e.jPlayer.prototype.count++},destroy:function(){this.clearMedia(),this._removeUiClass(),this.css.jq.currentTime.length&&this.css.jq.currentTime.text(""),this.css.jq.duration.length&&this.css.jq.duration.text(""),e.each(this.css.jq,function(e,t){t.length&&t.unbind(".jPlayer")}),this.internal.poster.jq.unbind(".jPlayer"),this.internal.video.jq&&this.internal.video.jq.unbind(".jPlayer"),this._fullscreenRemoveEventListeners(),this===e.jPlayer.focus&&(e.jPlayer.focus=null),this.options.emulateHtml&&this._destroyHtmlBridge(),this.element.removeData("jPlayer"),this.element.unbind(".jPlayer"),this.element.empty(),delete this.instances[this.internal.instance]},destroyRemoved:function(){var t=this;e.each(this.instances,function(e,i){t.element!==i&&(i.data("jPlayer")||(i.jPlayer("destroy"),delete t.instances[e]))})},enable:function(){},disable:function(){},_testCanPlayType:function(e){try{return e.canPlayType(this.format.mp3.codec),!0}catch(t){return!1}},_testPlaybackRate:function(e){var t,i=.5;e="string"==typeof e?e:"audio",t=document.createElement(e);try{return"playbackRate"in t?(t.playbackRate=i,t.playbackRate===i):!1}catch(n){return!1}},_uaBlocklist:function(t){var i=navigator.userAgent.toLowerCase(),n=!1;return e.each(t,function(e,t){return t&&t.test(i)?(n=!0,!1):void 0}),n},_restrictNativeVideoControls:function(){this.require.audio&&this.status.nativeVideoControls&&(this.status.nativeVideoControls=!1,this.status.noFullWindow=!0)},_updateNativeVideoControls:function(){this.html.video.available&&this.html.used&&(this.htmlElement.video.controls=this.status.nativeVideoControls,this._updateAutohide(),this.status.nativeVideoControls&&this.require.video?(this.internal.poster.jq.hide(),this.internal.video.jq.css({width:this.status.width,height:this.status.height})):this.status.waitForPlay&&this.status.video&&(this.internal.poster.jq.show(),this.internal.video.jq.css({width:"0px",height:"0px"})))},_addHtmlEventListeners:function(t,i){var n=this;t.preload=this.options.preload,t.muted=this.options.muted,t.volume=this.options.volume,this.status.playbackRateEnabled&&(t.defaultPlaybackRate=this.options.defaultPlaybackRate,t.playbackRate=this.options.playbackRate),t.addEventListener("progress",function(){i.gate&&(n.internal.cmdsIgnored&&this.readyState>0&&(n.internal.cmdsIgnored=!1),n._getHtmlStatus(t),n._updateInterface(),n._trigger(e.jPlayer.event.progress))},!1),t.addEventListener("loadeddata",function(){i.gate&&(n.androidFix.setMedia=!1,n.androidFix.play&&(n.androidFix.play=!1,n.play(n.androidFix.time)),n.androidFix.pause&&(n.androidFix.pause=!1,n.pause(n.androidFix.time)),n._trigger(e.jPlayer.event.loadeddata))},!1),t.addEventListener("timeupdate",function(){i.gate&&(n._getHtmlStatus(t),n._updateInterface(),n._trigger(e.jPlayer.event.timeupdate))},!1),t.addEventListener("durationchange",function(){i.gate&&(n._getHtmlStatus(t),n._updateInterface(),n._trigger(e.jPlayer.event.durationchange))},!1),t.addEventListener("play",function(){i.gate&&(n._updateButtons(!0),n._html_checkWaitForPlay(),n._trigger(e.jPlayer.event.play))},!1),t.addEventListener("playing",function(){i.gate&&(n._updateButtons(!0),n._seeked(),n._trigger(e.jPlayer.event.playing))},!1),t.addEventListener("pause",function(){i.gate&&(n._updateButtons(!1),n._trigger(e.jPlayer.event.pause))},!1),t.addEventListener("waiting",function(){i.gate&&(n._seeking(),n._trigger(e.jPlayer.event.waiting))},!1),t.addEventListener("seeking",function(){i.gate&&(n._seeking(),n._trigger(e.jPlayer.event.seeking))},!1),t.addEventListener("seeked",function(){i.gate&&(n._seeked(),n._trigger(e.jPlayer.event.seeked))},!1),t.addEventListener("volumechange",function(){i.gate&&(n.options.volume=t.volume,n.options.muted=t.muted,n._updateMute(),n._updateVolume(),n._trigger(e.jPlayer.event.volumechange))},!1),t.addEventListener("ratechange",function(){i.gate&&(n.options.defaultPlaybackRate=t.defaultPlaybackRate,n.options.playbackRate=t.playbackRate,n._updatePlaybackRate(),n._trigger(e.jPlayer.event.ratechange))},!1),t.addEventListener("suspend",function(){i.gate&&(n._seeked(),n._trigger(e.jPlayer.event.suspend))},!1),t.addEventListener("ended",function(){i.gate&&(e.jPlayer.browser.webkit||(n.htmlElement.media.currentTime=0),n.htmlElement.media.pause(),n._updateButtons(!1),n._getHtmlStatus(t,!0),n._updateInterface(),n._trigger(e.jPlayer.event.ended))},!1),t.addEventListener("error",function(){i.gate&&(n._updateButtons(!1),n._seeked(),n.status.srcSet&&(clearTimeout(n.internal.htmlDlyCmdId),n.status.waitForLoad=!0,n.status.waitForPlay=!0,n.status.video&&!n.status.nativeVideoControls&&n.internal.video.jq.css({width:"0px",height:"0px"}),n._validString(n.status.media.poster)&&!n.status.nativeVideoControls&&n.internal.poster.jq.show(),n.css.jq.videoPlay.length&&n.css.jq.videoPlay.show(),n._error({type:e.jPlayer.error.URL,context:n.status.src,message:e.jPlayer.errorMsg.URL,hint:e.jPlayer.errorHint.URL})))},!1),e.each(e.jPlayer.htmlEvent,function(s,o){t.addEventListener(this,function(){i.gate&&n._trigger(e.jPlayer.event[o])},!1)})},_addAuroraEventListeners:function(t,i){var n=this;t.volume=100*this.options.volume,t.on("progress",function(){i.gate&&(n.internal.cmdsIgnored&&this.readyState>0&&(n.internal.cmdsIgnored=!1),n._getAuroraStatus(t),n._updateInterface(),n._trigger(e.jPlayer.event.progress),t.duration>0&&n._trigger(e.jPlayer.event.timeupdate))},!1),t.on("ready",function(){i.gate&&n._trigger(e.jPlayer.event.loadeddata)},!1),t.on("duration",function(){i.gate&&(n._getAuroraStatus(t),n._updateInterface(),n._trigger(e.jPlayer.event.durationchange))},!1),t.on("end",function(){i.gate&&(n._updateButtons(!1),n._getAuroraStatus(t,!0),n._updateInterface(),n._trigger(e.jPlayer.event.ended))},!1),t.on("error",function(){i.gate&&(n._updateButtons(!1),n._seeked(),n.status.srcSet&&(n.status.waitForLoad=!0,n.status.waitForPlay=!0,n.status.video&&!n.status.nativeVideoControls&&n.internal.video.jq.css({width:"0px",height:"0px"}),n._validString(n.status.media.poster)&&!n.status.nativeVideoControls&&n.internal.poster.jq.show(),n.css.jq.videoPlay.length&&n.css.jq.videoPlay.show(),n._error({type:e.jPlayer.error.URL,context:n.status.src,message:e.jPlayer.errorMsg.URL,hint:e.jPlayer.errorHint.URL})))},!1)},_getHtmlStatus:function(e,t){var i=0,n=0,s=0,o=0;isFinite(e.duration)&&(this.status.duration=e.duration),i=e.currentTime,n=this.status.duration>0?100*i/this.status.duration:0,"object"==typeof e.seekable&&e.seekable.length>0?(s=this.status.duration>0?100*e.seekable.end(e.seekable.length-1)/this.status.duration:100,o=this.status.duration>0?100*e.currentTime/e.seekable.end(e.seekable.length-1):0):(s=100,o=n),t&&(i=0,o=0,n=0),this.status.seekPercent=s,this.status.currentPercentRelative=o,this.status.currentPercentAbsolute=n,this.status.currentTime=i,this.status.remaining=this.status.duration-this.status.currentTime,this.status.videoWidth=e.videoWidth,this.status.videoHeight=e.videoHeight,this.status.readyState=e.readyState,this.status.networkState=e.networkState,this.status.playbackRate=e.playbackRate,this.status.ended=e.ended},_getAuroraStatus:function(e,t){var i=0,n=0,s=0,o=0;this.status.duration=e.duration/1e3,i=e.currentTime/1e3,n=this.status.duration>0?100*i/this.status.duration:0,e.buffered>0?(s=this.status.duration>0?e.buffered*this.status.duration/this.status.duration:100,o=this.status.duration>0?i/(e.buffered*this.status.duration):0):(s=100,o=n),t&&(i=0,o=0,n=0),this.status.seekPercent=s,this.status.currentPercentRelative=o,this.status.currentPercentAbsolute=n,this.status.currentTime=i,this.status.remaining=this.status.duration-this.status.currentTime,this.status.readyState=4,this.status.networkState=0,this.status.playbackRate=1,this.status.ended=!1},_resetStatus:function(){this.status=e.extend({},this.status,e.jPlayer.prototype.status)},_trigger:function(t,i,n){var s=e.Event(t);s.jPlayer={},s.jPlayer.version=e.extend({},this.version),s.jPlayer.options=e.extend(!0,{},this.options),s.jPlayer.status=e.extend(!0,{},this.status),s.jPlayer.html=e.extend(!0,{},this.html),s.jPlayer.aurora=e.extend(!0,{},this.aurora),s.jPlayer.flash=e.extend(!0,{},this.flash),i&&(s.jPlayer.error=e.extend({},i)),n&&(s.jPlayer.warning=e.extend({},n)),this.element.trigger(s)},jPlayerFlashEvent:function(t,i){if(t===e.jPlayer.event.ready)if(this.internal.ready){if(this.flash.gate){if(this.status.srcSet){var n=this.status.currentTime,s=this.status.paused;this.setMedia(this.status.media),this.volumeWorker(this.options.volume),n>0&&(s?this.pause(n):this.play(n))}this._trigger(e.jPlayer.event.flashreset)}}else this.internal.ready=!0,this.internal.flash.jq.css({width:"0px",height:"0px"}),this.version.flash=i.version,this.version.needFlash!==this.version.flash&&this._error({type:e.jPlayer.error.VERSION,context:this.version.flash,message:e.jPlayer.errorMsg.VERSION+this.version.flash,hint:e.jPlayer.errorHint.VERSION}),this._trigger(e.jPlayer.event.repeat),this._trigger(t);if(this.flash.gate)switch(t){case e.jPlayer.event.progress:this._getFlashStatus(i),this._updateInterface(),this._trigger(t);break;case e.jPlayer.event.timeupdate:this._getFlashStatus(i),this._updateInterface(),this._trigger(t);break;case e.jPlayer.event.play:this._seeked(),this._updateButtons(!0),this._trigger(t);break;case e.jPlayer.event.pause:this._updateButtons(!1),this._trigger(t);break;case e.jPlayer.event.ended:this._updateButtons(!1),this._trigger(t);break;case e.jPlayer.event.click:this._trigger(t);break;case e.jPlayer.event.error:this.status.waitForLoad=!0,this.status.waitForPlay=!0,this.status.video&&this.internal.flash.jq.css({width:"0px",height:"0px"}),this._validString(this.status.media.poster)&&this.internal.poster.jq.show(),this.css.jq.videoPlay.length&&this.status.video&&this.css.jq.videoPlay.show(),this.status.video?this._flash_setVideo(this.status.media):this._flash_setAudio(this.status.media),this._updateButtons(!1),this._error({type:e.jPlayer.error.URL,context:i.src,message:e.jPlayer.errorMsg.URL,hint:e.jPlayer.errorHint.URL});break;case e.jPlayer.event.seeking:this._seeking(),this._trigger(t);break;case e.jPlayer.event.seeked:this._seeked(),this._trigger(t);break;case e.jPlayer.event.ready:break;default:this._trigger(t)}return!1},_getFlashStatus:function(e){this.status.seekPercent=e.seekPercent,this.status.currentPercentRelative=e.currentPercentRelative,this.status.currentPercentAbsolute=e.currentPercentAbsolute,this.status.currentTime=e.currentTime,this.status.duration=e.duration,this.status.remaining=e.duration-e.currentTime,this.status.videoWidth=e.videoWidth,this.status.videoHeight=e.videoHeight,this.status.readyState=4,this.status.networkState=0,this.status.playbackRate=1,this.status.ended=!1},_updateButtons:function(e){e===t?e=!this.status.paused:this.status.paused=!e,e?this.addStateClass("playing"):this.removeStateClass("playing"),!this.status.noFullWindow&&this.options.fullWindow?this.addStateClass("fullScreen"):this.removeStateClass("fullScreen"),this.options.loop?this.addStateClass("looped"):this.removeStateClass("looped"),this.css.jq.play.length&&this.css.jq.pause.length&&(e?(this.css.jq.play.hide(),this.css.jq.pause.show()):(this.css.jq.play.show(),this.css.jq.pause.hide())),this.css.jq.restoreScreen.length&&this.css.jq.fullScreen.length&&(this.status.noFullWindow?(this.css.jq.fullScreen.hide(),this.css.jq.restoreScreen.hide()):this.options.fullWindow?(this.css.jq.fullScreen.hide(),this.css.jq.restoreScreen.show()):(this.css.jq.fullScreen.show(),this.css.jq.restoreScreen.hide())),this.css.jq.repeat.length&&this.css.jq.repeatOff.length&&(this.options.loop?(this.css.jq.repeat.hide(),this.css.jq.repeatOff.show()):(this.css.jq.repeat.show(),this.css.jq.repeatOff.hide()))},_updateInterface:function(){this.css.jq.seekBar.length&&this.css.jq.seekBar.width(this.status.seekPercent+"%"),this.css.jq.playBar.length&&(this.options.smoothPlayBar?this.css.jq.playBar.stop().animate({width:this.status.currentPercentAbsolute+"%"},250,"linear"):this.css.jq.playBar.width(this.status.currentPercentRelative+"%"));var e="";this.css.jq.currentTime.length&&(e=this._convertTime(this.status.currentTime),e!==this.css.jq.currentTime.text()&&this.css.jq.currentTime.text(this._convertTime(this.status.currentTime)));var t="",i=this.status.duration,n=this.status.remaining;this.css.jq.duration.length&&("string"==typeof this.status.media.duration?t=this.status.media.duration:("number"==typeof this.status.media.duration&&(i=this.status.media.duration,n=i-this.status.currentTime),t=this.options.remainingDuration?(n>0?"-":"")+this._convertTime(n):this._convertTime(i)),t!==this.css.jq.duration.text()&&this.css.jq.duration.text(t))},_convertTime:i.prototype.time,_seeking:function(){this.css.jq.seekBar.length&&this.css.jq.seekBar.addClass("jp-seeking-bg"),this.addStateClass("seeking")},_seeked:function(){this.css.jq.seekBar.length&&this.css.jq.seekBar.removeClass("jp-seeking-bg"),this.removeStateClass("seeking")},_resetGate:function(){this.html.audio.gate=!1,this.html.video.gate=!1,this.aurora.gate=!1,this.flash.gate=!1},_resetActive:function(){this.html.active=!1,this.aurora.active=!1,this.flash.active=!1},_escapeHtml:function(e){return e.split("&").join("&amp;").split("<").join("&lt;").split(">").join("&gt;").split('"').join("&quot;")},_qualifyURL:function(e){var t=document.createElement("div");return t.innerHTML='<a href="'+this._escapeHtml(e)+'">x</a>',t.firstChild.href},_absoluteMediaUrls:function(t){var i=this;return e.each(t,function(e,n){n&&i.format[e]&&"data:"!==n.substr(0,5)&&(t[e]=i._qualifyURL(n))}),t},addStateClass:function(e){this.ancestorJq.length&&this.ancestorJq.addClass(this.options.stateClass[e])},removeStateClass:function(e){this.ancestorJq.length&&this.ancestorJq.removeClass(this.options.stateClass[e])},setMedia:function(t){var i=this,n=!1,s=this.status.media.poster!==t.poster;this._resetMedia(),this._resetGate(),this._resetActive(),this.androidFix.setMedia=!1,this.androidFix.play=!1,this.androidFix.pause=!1,t=this._absoluteMediaUrls(t),e.each(this.formats,function(s,o){var r="video"===i.format[o].media;return e.each(i.solutions,function(s,a){
if(i[a].support[o]&&i._validString(t[o])){var l="html"===a,c="aurora"===a;return r?(l?(i.html.video.gate=!0,i._html_setVideo(t),i.html.active=!0):(i.flash.gate=!0,i._flash_setVideo(t),i.flash.active=!0),i.css.jq.videoPlay.length&&i.css.jq.videoPlay.show(),i.status.video=!0):(l?(i.html.audio.gate=!0,i._html_setAudio(t),i.html.active=!0,e.jPlayer.platform.android&&(i.androidFix.setMedia=!0)):c?(i.aurora.gate=!0,i._aurora_setAudio(t),i.aurora.active=!0):(i.flash.gate=!0,i._flash_setAudio(t),i.flash.active=!0),i.css.jq.videoPlay.length&&i.css.jq.videoPlay.hide(),i.status.video=!1),n=!0,!1}}),n?!1:void 0}),n?(this.status.nativeVideoControls&&this.html.video.gate||this._validString(t.poster)&&(s?this.htmlElement.poster.src=t.poster:this.internal.poster.jq.show()),"string"==typeof t.title&&(this.css.jq.title.length&&this.css.jq.title.html(t.title),this.htmlElement.audio&&this.htmlElement.audio.setAttribute("title",t.title),this.htmlElement.video&&this.htmlElement.video.setAttribute("title",t.title)),this.status.srcSet=!0,this.status.media=e.extend({},t),this._updateButtons(!1),this._updateInterface(),this._trigger(e.jPlayer.event.setmedia)):this._error({type:e.jPlayer.error.NO_SUPPORT,context:"{supplied:'"+this.options.supplied+"'}",message:e.jPlayer.errorMsg.NO_SUPPORT,hint:e.jPlayer.errorHint.NO_SUPPORT})},_resetMedia:function(){this._resetStatus(),this._updateButtons(!1),this._updateInterface(),this._seeked(),this.internal.poster.jq.hide(),clearTimeout(this.internal.htmlDlyCmdId),this.html.active?this._html_resetMedia():this.aurora.active?this._aurora_resetMedia():this.flash.active&&this._flash_resetMedia()},clearMedia:function(){this._resetMedia(),this.html.active?this._html_clearMedia():this.aurora.active?this._aurora_clearMedia():this.flash.active&&this._flash_clearMedia(),this._resetGate(),this._resetActive()},load:function(){this.status.srcSet?this.html.active?this._html_load():this.aurora.active?this._aurora_load():this.flash.active&&this._flash_load():this._urlNotSetError("load")},focus:function(){this.options.keyEnabled&&(e.jPlayer.focus=this)},play:function(e){var t="object"==typeof e;t&&this.options.useStateClassSkin&&!this.status.paused?this.pause(e):(e="number"==typeof e?e:NaN,this.status.srcSet?(this.focus(),this.html.active?this._html_play(e):this.aurora.active?this._aurora_play(e):this.flash.active&&this._flash_play(e)):this._urlNotSetError("play"))},videoPlay:function(){this.play()},pause:function(e){e="number"==typeof e?e:NaN,this.status.srcSet?this.html.active?this._html_pause(e):this.aurora.active?this._aurora_pause(e):this.flash.active&&this._flash_pause(e):this._urlNotSetError("pause")},tellOthers:function(t,i){var n=this,s="function"==typeof i,o=Array.prototype.slice.call(arguments);"string"==typeof t&&(s&&o.splice(1,1),e.jPlayer.prototype.destroyRemoved(),e.each(this.instances,function(){n.element!==this&&(!s||i.call(this.data("jPlayer"),n))&&this.jPlayer.apply(this,o)}))},pauseOthers:function(e){this.tellOthers("pause",function(){return this.status.srcSet},e)},stop:function(){this.status.srcSet?this.html.active?this._html_pause(0):this.aurora.active?this._aurora_pause(0):this.flash.active&&this._flash_pause(0):this._urlNotSetError("stop")},playHead:function(e){e=this._limitValue(e,0,100),this.status.srcSet?this.html.active?this._html_playHead(e):this.aurora.active?this._aurora_playHead(e):this.flash.active&&this._flash_playHead(e):this._urlNotSetError("playHead")},_muted:function(e){this.mutedWorker(e),this.options.globalVolume&&this.tellOthers("mutedWorker",function(){return this.options.globalVolume},e)},mutedWorker:function(t){this.options.muted=t,this.html.used&&this._html_setProperty("muted",t),this.aurora.used&&this._aurora_mute(t),this.flash.used&&this._flash_mute(t),this.html.video.gate||this.html.audio.gate||(this._updateMute(t),this._updateVolume(this.options.volume),this._trigger(e.jPlayer.event.volumechange))},mute:function(e){var i="object"==typeof e;i&&this.options.useStateClassSkin&&this.options.muted?this._muted(!1):(e=e===t?!0:!!e,this._muted(e))},unmute:function(e){e=e===t?!0:!!e,this._muted(!e)},_updateMute:function(e){e===t&&(e=this.options.muted),e?this.addStateClass("muted"):this.removeStateClass("muted"),this.css.jq.mute.length&&this.css.jq.unmute.length&&(this.status.noVolume?(this.css.jq.mute.hide(),this.css.jq.unmute.hide()):e?(this.css.jq.mute.hide(),this.css.jq.unmute.show()):(this.css.jq.mute.show(),this.css.jq.unmute.hide()))},volume:function(e){this.volumeWorker(e),this.options.globalVolume&&this.tellOthers("volumeWorker",function(){return this.options.globalVolume},e)},volumeWorker:function(t){t=this._limitValue(t,0,1),this.options.volume=t,this.html.used&&this._html_setProperty("volume",t),this.aurora.used&&this._aurora_volume(t),this.flash.used&&this._flash_volume(t),this.html.video.gate||this.html.audio.gate||(this._updateVolume(t),this._trigger(e.jPlayer.event.volumechange))},volumeBar:function(t){if(this.css.jq.volumeBar.length){var i=e(t.currentTarget),n=i.offset(),s=t.pageX-n.left,o=i.width(),r=i.height()-t.pageY+n.top,a=i.height();this.volume(this.options.verticalVolume?r/a:s/o)}this.options.muted&&this._muted(!1)},_updateVolume:function(e){e===t&&(e=this.options.volume),e=this.options.muted?0:e,this.status.noVolume?(this.addStateClass("noVolume"),this.css.jq.volumeBar.length&&this.css.jq.volumeBar.hide(),this.css.jq.volumeBarValue.length&&this.css.jq.volumeBarValue.hide(),this.css.jq.volumeMax.length&&this.css.jq.volumeMax.hide()):(this.removeStateClass("noVolume"),this.css.jq.volumeBar.length&&this.css.jq.volumeBar.show(),this.css.jq.volumeBarValue.length&&(this.css.jq.volumeBarValue.show(),this.css.jq.volumeBarValue[this.options.verticalVolume?"height":"width"](100*e+"%")),this.css.jq.volumeMax.length&&this.css.jq.volumeMax.show())},volumeMax:function(){this.volume(1),this.options.muted&&this._muted(!1)},_cssSelectorAncestor:function(t){var i=this;this.options.cssSelectorAncestor=t,this._removeUiClass(),this.ancestorJq=t?e(t):[],t&&1!==this.ancestorJq.length&&this._warning({type:e.jPlayer.warning.CSS_SELECTOR_COUNT,context:t,message:e.jPlayer.warningMsg.CSS_SELECTOR_COUNT+this.ancestorJq.length+" found for cssSelectorAncestor.",hint:e.jPlayer.warningHint.CSS_SELECTOR_COUNT}),this._addUiClass(),e.each(this.options.cssSelector,function(e,t){i._cssSelector(e,t)}),this._updateInterface(),this._updateButtons(),this._updateAutohide(),this._updateVolume(),this._updateMute()},_cssSelector:function(t,i){var n=this;if("string"==typeof i)if(e.jPlayer.prototype.options.cssSelector[t]){if(this.css.jq[t]&&this.css.jq[t].length&&this.css.jq[t].unbind(".jPlayer"),this.options.cssSelector[t]=i,this.css.cs[t]=this.options.cssSelectorAncestor+" "+i,this.css.jq[t]=i?e(this.css.cs[t]):[],this.css.jq[t].length&&this[t]){var s=function(i){i.preventDefault(),n[t](i),n.options.autoBlur?e(this).blur():e(this).focus()};this.css.jq[t].bind("click.jPlayer",s)}i&&1!==this.css.jq[t].length&&this._warning({type:e.jPlayer.warning.CSS_SELECTOR_COUNT,context:this.css.cs[t],message:e.jPlayer.warningMsg.CSS_SELECTOR_COUNT+this.css.jq[t].length+" found for "+t+" method.",hint:e.jPlayer.warningHint.CSS_SELECTOR_COUNT})}else this._warning({type:e.jPlayer.warning.CSS_SELECTOR_METHOD,context:t,message:e.jPlayer.warningMsg.CSS_SELECTOR_METHOD,hint:e.jPlayer.warningHint.CSS_SELECTOR_METHOD});else this._warning({type:e.jPlayer.warning.CSS_SELECTOR_STRING,context:i,message:e.jPlayer.warningMsg.CSS_SELECTOR_STRING,hint:e.jPlayer.warningHint.CSS_SELECTOR_STRING})},duration:function(e){this.options.toggleDuration&&(this.options.captureDuration&&e.stopPropagation(),this._setOption("remainingDuration",!this.options.remainingDuration))},seekBar:function(t){if(this.css.jq.seekBar.length){var i=e(t.currentTarget),n=i.offset(),s=t.pageX-n.left,o=i.width(),r=100*s/o;this.playHead(r)}},playbackRate:function(e){this._setOption("playbackRate",e)},playbackRateBar:function(t){if(this.css.jq.playbackRateBar.length){var i,n,s=e(t.currentTarget),o=s.offset(),r=t.pageX-o.left,a=s.width(),l=s.height()-t.pageY+o.top,c=s.height();i=this.options.verticalPlaybackRate?l/c:r/a,n=i*(this.options.maxPlaybackRate-this.options.minPlaybackRate)+this.options.minPlaybackRate,this.playbackRate(n)}},_updatePlaybackRate:function(){var e=this.options.playbackRate,t=(e-this.options.minPlaybackRate)/(this.options.maxPlaybackRate-this.options.minPlaybackRate);this.status.playbackRateEnabled?(this.css.jq.playbackRateBar.length&&this.css.jq.playbackRateBar.show(),this.css.jq.playbackRateBarValue.length&&(this.css.jq.playbackRateBarValue.show(),this.css.jq.playbackRateBarValue[this.options.verticalPlaybackRate?"height":"width"](100*t+"%"))):(this.css.jq.playbackRateBar.length&&this.css.jq.playbackRateBar.hide(),this.css.jq.playbackRateBarValue.length&&this.css.jq.playbackRateBarValue.hide())},repeat:function(e){var t="object"==typeof e;this._loop(!(t&&this.options.useStateClassSkin&&this.options.loop))},repeatOff:function(){this._loop(!1)},_loop:function(t){this.options.loop!==t&&(this.options.loop=t,this._updateButtons(),this._trigger(e.jPlayer.event.repeat))},option:function(i,n){var s=i;if(0===arguments.length)return e.extend(!0,{},this.options);if("string"==typeof i){var o=i.split(".");if(n===t){for(var r=e.extend(!0,{},this.options),a=0;a<o.length;a++){if(r[o[a]]===t)return this._warning({type:e.jPlayer.warning.OPTION_KEY,context:i,message:e.jPlayer.warningMsg.OPTION_KEY,hint:e.jPlayer.warningHint.OPTION_KEY}),t;r=r[o[a]]}return r}s={};for(var l=s,c=0;c<o.length;c++)c<o.length-1?(l[o[c]]={},l=l[o[c]]):l[o[c]]=n}return this._setOptions(s),this},_setOptions:function(t){var i=this;return e.each(t,function(e,t){i._setOption(e,t)}),this},_setOption:function(t,i){var n=this;switch(t){case"volume":this.volume(i);break;case"muted":this._muted(i);break;case"globalVolume":this.options[t]=i;break;case"cssSelectorAncestor":this._cssSelectorAncestor(i);break;case"cssSelector":e.each(i,function(e,t){n._cssSelector(e,t)});break;case"playbackRate":this.options[t]=i=this._limitValue(i,this.options.minPlaybackRate,this.options.maxPlaybackRate),this.html.used&&this._html_setProperty("playbackRate",i),this._updatePlaybackRate();break;case"defaultPlaybackRate":this.options[t]=i=this._limitValue(i,this.options.minPlaybackRate,this.options.maxPlaybackRate),this.html.used&&this._html_setProperty("defaultPlaybackRate",i),this._updatePlaybackRate();break;case"minPlaybackRate":this.options[t]=i=this._limitValue(i,.1,this.options.maxPlaybackRate-.1),this._updatePlaybackRate();break;case"maxPlaybackRate":this.options[t]=i=this._limitValue(i,this.options.minPlaybackRate+.1,16),this._updatePlaybackRate();break;case"fullScreen":if(this.options[t]!==i){var s=e.jPlayer.nativeFeatures.fullscreen.used.webkitVideo;(!s||s&&!this.status.waitForPlay)&&(s||(this.options[t]=i),i?this._requestFullscreen():this._exitFullscreen(),s||this._setOption("fullWindow",i))}break;case"fullWindow":this.options[t]!==i&&(this._removeUiClass(),this.options[t]=i,this._refreshSize());break;case"size":this.options.fullWindow||this.options[t].cssClass===i.cssClass||this._removeUiClass(),this.options[t]=e.extend({},this.options[t],i),this._refreshSize();break;case"sizeFull":this.options.fullWindow&&this.options[t].cssClass!==i.cssClass&&this._removeUiClass(),this.options[t]=e.extend({},this.options[t],i),this._refreshSize();break;case"autohide":this.options[t]=e.extend({},this.options[t],i),this._updateAutohide();break;case"loop":this._loop(i);break;case"remainingDuration":this.options[t]=i,this._updateInterface();break;case"toggleDuration":this.options[t]=i;break;case"nativeVideoControls":this.options[t]=e.extend({},this.options[t],i),this.status.nativeVideoControls=this._uaBlocklist(this.options.nativeVideoControls),this._restrictNativeVideoControls(),this._updateNativeVideoControls();break;case"noFullWindow":this.options[t]=e.extend({},this.options[t],i),this.status.nativeVideoControls=this._uaBlocklist(this.options.nativeVideoControls),this.status.noFullWindow=this._uaBlocklist(this.options.noFullWindow),this._restrictNativeVideoControls(),this._updateButtons();break;case"noVolume":this.options[t]=e.extend({},this.options[t],i),this.status.noVolume=this._uaBlocklist(this.options.noVolume),this._updateVolume(),this._updateMute();break;case"emulateHtml":this.options[t]!==i&&(this.options[t]=i,i?this._emulateHtmlBridge():this._destroyHtmlBridge());break;case"timeFormat":this.options[t]=e.extend({},this.options[t],i);break;case"keyEnabled":this.options[t]=i,i||this!==e.jPlayer.focus||(e.jPlayer.focus=null);break;case"keyBindings":this.options[t]=e.extend(!0,{},this.options[t],i);break;case"audioFullScreen":this.options[t]=i;break;case"autoBlur":this.options[t]=i}return this},_refreshSize:function(){this._setSize(),this._addUiClass(),this._updateSize(),this._updateButtons(),this._updateAutohide(),this._trigger(e.jPlayer.event.resize)},_setSize:function(){this.options.fullWindow?(this.status.width=this.options.sizeFull.width,this.status.height=this.options.sizeFull.height,this.status.cssClass=this.options.sizeFull.cssClass):(this.status.width=this.options.size.width,this.status.height=this.options.size.height,this.status.cssClass=this.options.size.cssClass),this.element.css({width:this.status.width,height:this.status.height})},_addUiClass:function(){this.ancestorJq.length&&this.ancestorJq.addClass(this.status.cssClass)},_removeUiClass:function(){this.ancestorJq.length&&this.ancestorJq.removeClass(this.status.cssClass)},_updateSize:function(){this.internal.poster.jq.css({width:this.status.width,height:this.status.height}),!this.status.waitForPlay&&this.html.active&&this.status.video||this.html.video.available&&this.html.used&&this.status.nativeVideoControls?this.internal.video.jq.css({width:this.status.width,height:this.status.height}):!this.status.waitForPlay&&this.flash.active&&this.status.video&&this.internal.flash.jq.css({width:this.status.width,height:this.status.height})},_updateAutohide:function(){var e=this,t="mousemove.jPlayer",i=".jPlayerAutohide",n=t+i,s=function(t){var i,n,s=!1;"undefined"!=typeof e.internal.mouse?(i=e.internal.mouse.x-t.pageX,n=e.internal.mouse.y-t.pageY,s=Math.floor(i)>0||Math.floor(n)>0):s=!0,e.internal.mouse={x:t.pageX,y:t.pageY},s&&e.css.jq.gui.fadeIn(e.options.autohide.fadeIn,function(){clearTimeout(e.internal.autohideId),e.internal.autohideId=setTimeout(function(){e.css.jq.gui.fadeOut(e.options.autohide.fadeOut)},e.options.autohide.hold)})};this.css.jq.gui.length&&(this.css.jq.gui.stop(!0,!0),clearTimeout(this.internal.autohideId),delete this.internal.mouse,this.element.unbind(i),this.css.jq.gui.unbind(i),this.status.nativeVideoControls?this.css.jq.gui.hide():this.options.fullWindow&&this.options.autohide.full||!this.options.fullWindow&&this.options.autohide.restored?(this.element.bind(n,s),this.css.jq.gui.bind(n,s),this.css.jq.gui.hide()):this.css.jq.gui.show())},fullScreen:function(e){var t="object"==typeof e;t&&this.options.useStateClassSkin&&this.options.fullScreen?this._setOption("fullScreen",!1):this._setOption("fullScreen",!0)},restoreScreen:function(){this._setOption("fullScreen",!1)},_fullscreenAddEventListeners:function(){var t=this,i=e.jPlayer.nativeFeatures.fullscreen;i.api.fullscreenEnabled&&i.event.fullscreenchange&&("function"!=typeof this.internal.fullscreenchangeHandler&&(this.internal.fullscreenchangeHandler=function(){t._fullscreenchange()}),document.addEventListener(i.event.fullscreenchange,this.internal.fullscreenchangeHandler,!1))},_fullscreenRemoveEventListeners:function(){var t=e.jPlayer.nativeFeatures.fullscreen;this.internal.fullscreenchangeHandler&&document.removeEventListener(t.event.fullscreenchange,this.internal.fullscreenchangeHandler,!1)},_fullscreenchange:function(){this.options.fullScreen&&!e.jPlayer.nativeFeatures.fullscreen.api.fullscreenElement()&&this._setOption("fullScreen",!1)},_requestFullscreen:function(){var t=this.ancestorJq.length?this.ancestorJq[0]:this.element[0],i=e.jPlayer.nativeFeatures.fullscreen;i.used.webkitVideo&&(t=this.htmlElement.video),i.api.fullscreenEnabled&&i.api.requestFullscreen(t)},_exitFullscreen:function(){var t,i=e.jPlayer.nativeFeatures.fullscreen;i.used.webkitVideo&&(t=this.htmlElement.video),i.api.fullscreenEnabled&&i.api.exitFullscreen(t)},_html_initMedia:function(t){var i=e(this.htmlElement.media).empty();e.each(t.track||[],function(e,t){var n=document.createElement("track");n.setAttribute("kind",t.kind?t.kind:""),n.setAttribute("src",t.src?t.src:""),n.setAttribute("srclang",t.srclang?t.srclang:""),n.setAttribute("label",t.label?t.label:""),t.def&&n.setAttribute("default",t.def),i.append(n)}),this.htmlElement.media.src=this.status.src,"none"!==this.options.preload&&this._html_load(),this._trigger(e.jPlayer.event.timeupdate)},_html_setFormat:function(t){var i=this;e.each(this.formats,function(e,n){return i.html.support[n]&&t[n]?(i.status.src=t[n],i.status.format[n]=!0,i.status.formatType=n,!1):void 0})},_html_setAudio:function(e){this._html_setFormat(e),this.htmlElement.media=this.htmlElement.audio,this._html_initMedia(e)},_html_setVideo:function(e){this._html_setFormat(e),this.status.nativeVideoControls&&(this.htmlElement.video.poster=this._validString(e.poster)?e.poster:""),this.htmlElement.media=this.htmlElement.video,this._html_initMedia(e)},_html_resetMedia:function(){this.htmlElement.media&&(this.htmlElement.media.id!==this.internal.video.id||this.status.nativeVideoControls||this.internal.video.jq.css({width:"0px",height:"0px"}),this.htmlElement.media.pause())},_html_clearMedia:function(){this.htmlElement.media&&(this.htmlElement.media.src="about:blank",this.htmlElement.media.load())},_html_load:function(){this.status.waitForLoad&&(this.status.waitForLoad=!1,this.htmlElement.media.load()),clearTimeout(this.internal.htmlDlyCmdId)},_html_play:function(e){var t=this,i=this.htmlElement.media;if(this.androidFix.pause=!1,this._html_load(),this.androidFix.setMedia)this.androidFix.play=!0,this.androidFix.time=e;else if(isNaN(e))i.play();else{this.internal.cmdsIgnored&&i.play();try{if(i.seekable&&!("object"==typeof i.seekable&&i.seekable.length>0))throw 1;i.currentTime=e,i.play()}catch(n){return void(this.internal.htmlDlyCmdId=setTimeout(function(){t.play(e)},250))}}this._html_checkWaitForPlay()},_html_pause:function(e){var t=this,i=this.htmlElement.media;if(this.androidFix.play=!1,e>0?this._html_load():clearTimeout(this.internal.htmlDlyCmdId),i.pause(),this.androidFix.setMedia)this.androidFix.pause=!0,this.androidFix.time=e;else if(!isNaN(e))try{if(i.seekable&&!("object"==typeof i.seekable&&i.seekable.length>0))throw 1;i.currentTime=e}catch(n){return void(this.internal.htmlDlyCmdId=setTimeout(function(){t.pause(e)},250))}e>0&&this._html_checkWaitForPlay()},_html_playHead:function(e){var t=this,i=this.htmlElement.media;this._html_load();try{if("object"==typeof i.seekable&&i.seekable.length>0)i.currentTime=e*i.seekable.end(i.seekable.length-1)/100;else{if(!(i.duration>0)||isNaN(i.duration))throw"e";i.currentTime=e*i.duration/100}}catch(n){return void(this.internal.htmlDlyCmdId=setTimeout(function(){t.playHead(e)},250))}this.status.waitForLoad||this._html_checkWaitForPlay()},_html_checkWaitForPlay:function(){this.status.waitForPlay&&(this.status.waitForPlay=!1,this.css.jq.videoPlay.length&&this.css.jq.videoPlay.hide(),this.status.video&&(this.internal.poster.jq.hide(),this.internal.video.jq.css({width:this.status.width,height:this.status.height})))},_html_setProperty:function(e,t){this.html.audio.available&&(this.htmlElement.audio[e]=t),this.html.video.available&&(this.htmlElement.video[e]=t)},_aurora_setAudio:function(t){var i=this;e.each(this.formats,function(e,n){return i.aurora.support[n]&&t[n]?(i.status.src=t[n],i.status.format[n]=!0,i.status.formatType=n,!1):void 0}),this.aurora.player=new AV.Player.fromURL(this.status.src),this._addAuroraEventListeners(this.aurora.player,this.aurora),"auto"===this.options.preload&&(this._aurora_load(),this.status.waitForLoad=!1)},_aurora_resetMedia:function(){this.aurora.player&&this.aurora.player.stop()},_aurora_clearMedia:function(){},_aurora_load:function(){this.status.waitForLoad&&(this.status.waitForLoad=!1,this.aurora.player.preload())},_aurora_play:function(t){this.status.waitForLoad||isNaN(t)||this.aurora.player.seek(t),this.aurora.player.playing||this.aurora.player.play(),this.status.waitForLoad=!1,this._aurora_checkWaitForPlay(),this._updateButtons(!0),this._trigger(e.jPlayer.event.play)},_aurora_pause:function(t){isNaN(t)||this.aurora.player.seek(1e3*t),this.aurora.player.pause(),t>0&&this._aurora_checkWaitForPlay(),this._updateButtons(!1),this._trigger(e.jPlayer.event.pause)},_aurora_playHead:function(e){this.aurora.player.duration>0&&this.aurora.player.seek(e*this.aurora.player.duration/100),this.status.waitForLoad||this._aurora_checkWaitForPlay()},_aurora_checkWaitForPlay:function(){this.status.waitForPlay&&(this.status.waitForPlay=!1)},_aurora_volume:function(e){this.aurora.player.volume=100*e},_aurora_mute:function(e){e?(this.aurora.properties.lastvolume=this.aurora.player.volume,this.aurora.player.volume=0):this.aurora.player.volume=this.aurora.properties.lastvolume,this.aurora.properties.muted=e},_flash_setAudio:function(t){var i=this;try{e.each(this.formats,function(e,n){if(i.flash.support[n]&&t[n]){switch(n){case"m4a":case"fla":i._getMovie().fl_setAudio_m4a(t[n]);break;case"mp3":i._getMovie().fl_setAudio_mp3(t[n]);break;case"rtmpa":i._getMovie().fl_setAudio_rtmp(t[n])}return i.status.src=t[n],i.status.format[n]=!0,i.status.formatType=n,!1}}),"auto"===this.options.preload&&(this._flash_load(),this.status.waitForLoad=!1)}catch(n){this._flashError(n)}},_flash_setVideo:function(t){var i=this;try{e.each(this.formats,function(e,n){if(i.flash.support[n]&&t[n]){switch(n){case"m4v":case"flv":i._getMovie().fl_setVideo_m4v(t[n]);break;case"rtmpv":i._getMovie().fl_setVideo_rtmp(t[n])}return i.status.src=t[n],i.status.format[n]=!0,i.status.formatType=n,!1}}),"auto"===this.options.preload&&(this._flash_load(),this.status.waitForLoad=!1)}catch(n){this._flashError(n)}},_flash_resetMedia:function(){this.internal.flash.jq.css({width:"0px",height:"0px"}),this._flash_pause(NaN)},_flash_clearMedia:function(){try{this._getMovie().fl_clearMedia()}catch(e){this._flashError(e)}},_flash_load:function(){try{this._getMovie().fl_load()}catch(e){this._flashError(e)}this.status.waitForLoad=!1},_flash_play:function(e){try{this._getMovie().fl_play(e)}catch(t){this._flashError(t)}this.status.waitForLoad=!1,this._flash_checkWaitForPlay()},_flash_pause:function(e){try{this._getMovie().fl_pause(e)}catch(t){this._flashError(t)}e>0&&(this.status.waitForLoad=!1,this._flash_checkWaitForPlay())},_flash_playHead:function(e){try{this._getMovie().fl_play_head(e)}catch(t){this._flashError(t)}this.status.waitForLoad||this._flash_checkWaitForPlay()},_flash_checkWaitForPlay:function(){this.status.waitForPlay&&(this.status.waitForPlay=!1,this.css.jq.videoPlay.length&&this.css.jq.videoPlay.hide(),this.status.video&&(this.internal.poster.jq.hide(),this.internal.flash.jq.css({width:this.status.width,height:this.status.height})))},_flash_volume:function(e){try{this._getMovie().fl_volume(e)}catch(t){this._flashError(t)}},_flash_mute:function(e){try{this._getMovie().fl_mute(e)}catch(t){this._flashError(t)}},_getMovie:function(){return document[this.internal.flash.id]},_getFlashPluginVersion:function(){var e,t=0;if(window.ActiveXObject)try{if(e=new ActiveXObject("ShockwaveFlash.ShockwaveFlash")){var i=e.GetVariable("$version");i&&(i=i.split(" ")[1].split(","),t=parseInt(i[0],10)+"."+parseInt(i[1],10))}}catch(n){}else navigator.plugins&&navigator.mimeTypes.length>0&&(e=navigator.plugins["Shockwave Flash"],e&&(t=navigator.plugins["Shockwave Flash"].description.replace(/.*\s(\d+\.\d+).*/,"$1")));return 1*t},_checkForFlash:function(e){var t=!1;return this._getFlashPluginVersion()>=e&&(t=!0),t},_validString:function(e){return e&&"string"==typeof e},_limitValue:function(e,t,i){return t>e?t:e>i?i:e},_urlNotSetError:function(t){this._error({type:e.jPlayer.error.URL_NOT_SET,context:t,message:e.jPlayer.errorMsg.URL_NOT_SET,hint:e.jPlayer.errorHint.URL_NOT_SET})},_flashError:function(t){var i;i=this.internal.ready?"FLASH_DISABLED":"FLASH",this._error({type:e.jPlayer.error[i],context:this.internal.flash.swf,message:e.jPlayer.errorMsg[i]+t.message,hint:e.jPlayer.errorHint[i]}),this.internal.flash.jq.css({width:"1px",height:"1px"})},_error:function(t){this._trigger(e.jPlayer.event.error,t),this.options.errorAlerts&&this._alert("Error!"+(t.message?"\n"+t.message:"")+(t.hint?"\n"+t.hint:"")+"\nContext: "+t.context)},_warning:function(i){this._trigger(e.jPlayer.event.warning,t,i),this.options.warningAlerts&&this._alert("Warning!"+(i.message?"\n"+i.message:"")+(i.hint?"\n"+i.hint:"")+"\nContext: "+i.context)},_alert:function(e){var t="jPlayer "+this.version.script+" : id='"+this.internal.self.id+"' : "+e;this.options.consoleAlerts?window.console&&window.console.log&&window.console.log(t):alert(t)},_emulateHtmlBridge:function(){var t=this;e.each(e.jPlayer.emulateMethods.split(/\s+/g),function(e,i){t.internal.domNode[i]=function(e){t[i](e)}}),e.each(e.jPlayer.event,function(i,n){var s=!0;e.each(e.jPlayer.reservedEvent.split(/\s+/g),function(e,t){return t===i?(s=!1,!1):void 0}),s&&t.element.bind(n+".jPlayer.jPlayerHtml",function(){t._emulateHtmlUpdate();var e=document.createEvent("Event");e.initEvent(i,!1,!0),t.internal.domNode.dispatchEvent(e)})})},_emulateHtmlUpdate:function(){var t=this;e.each(e.jPlayer.emulateStatus.split(/\s+/g),function(e,i){t.internal.domNode[i]=t.status[i]}),e.each(e.jPlayer.emulateOptions.split(/\s+/g),function(e,i){t.internal.domNode[i]=t.options[i]})},_destroyHtmlBridge:function(){var t=this;this.element.unbind(".jPlayerHtml");var i=e.jPlayer.emulateMethods+" "+e.jPlayer.emulateStatus+" "+e.jPlayer.emulateOptions;e.each(i.split(/\s+/g),function(e,i){delete t.internal.domNode[i]})}},e.jPlayer.error={FLASH:"e_flash",FLASH_DISABLED:"e_flash_disabled",NO_SOLUTION:"e_no_solution",NO_SUPPORT:"e_no_support",URL:"e_url",URL_NOT_SET:"e_url_not_set",VERSION:"e_version"},e.jPlayer.errorMsg={FLASH:"jPlayer's Flash fallback is not configured correctly, or a command was issued before the jPlayer Ready event. Details: ",FLASH_DISABLED:"jPlayer's Flash fallback has been disabled by the browser due to the CSS rules you have used. Details: ",NO_SOLUTION:"No solution can be found by jPlayer in this browser. Neither HTML nor Flash can be used.",NO_SUPPORT:"It is not possible to play any media format provided in setMedia() on this browser using your current options.",URL:"Media URL could not be loaded.",URL_NOT_SET:"Attempt to issue media playback commands, while no media url is set.",VERSION:"jPlayer "+e.jPlayer.prototype.version.script+" needs Jplayer.swf version "+e.jPlayer.prototype.version.needFlash+" but found "},e.jPlayer.errorHint={FLASH:"Check your swfPath option and that Jplayer.swf is there.",FLASH_DISABLED:"Check that you have not display:none; the jPlayer entity or any ancestor.",NO_SOLUTION:"Review the jPlayer options: support and supplied.",NO_SUPPORT:"Video or audio formats defined in the supplied option are missing.",URL:"Check media URL is valid.",URL_NOT_SET:"Use setMedia() to set the media URL.",VERSION:"Update jPlayer files."},e.jPlayer.warning={CSS_SELECTOR_COUNT:"e_css_selector_count",CSS_SELECTOR_METHOD:"e_css_selector_method",CSS_SELECTOR_STRING:"e_css_selector_string",OPTION_KEY:"e_option_key"},e.jPlayer.warningMsg={CSS_SELECTOR_COUNT:"The number of css selectors found did not equal one: ",CSS_SELECTOR_METHOD:"The methodName given in jPlayer('cssSelector') is not a valid jPlayer method.",CSS_SELECTOR_STRING:"The methodCssSelector given in jPlayer('cssSelector') is not a String or is empty.",OPTION_KEY:"The option requested in jPlayer('option') is undefined."},e.jPlayer.warningHint={CSS_SELECTOR_COUNT:"Check your css selector and the ancestor.",CSS_SELECTOR_METHOD:"Check your method name.",CSS_SELECTOR_STRING:"Check your css selector is a string.",OPTION_KEY:"Check your option name."}}),!function(e,t,i,n){var s=t.document,o=e(s),r=e(t),a=Array.prototype,l=1.41,c=!0,d=3e4,h=!1,u=navigator.userAgent.toLowerCase(),p=t.location.hash.replace(/#\//,""),f=t.location.protocol,m=Math,g=function(){},v=function(){return!1},b=function(){var e=3,t=s.createElement("div"),i=t.getElementsByTagName("i");do t.innerHTML="<!--[if gt IE "+ ++e+"]><i></i><![endif]-->";while(i[0]);return e>4?e:s.documentMode||n}(),y=function(){return{html:s.documentElement,body:s.body,head:s.getElementsByTagName("head")[0],title:s.title}},w=t.parent!==t.self,_="data ready thumbnail loadstart loadfinish image play pause progress fullscreen_enter fullscreen_exit idle_enter idle_exit rescale lightbox_open lightbox_close lightbox_image",k=function(){var t=[];return e.each(_.split(" "),function(e,i){t.push(i),/_/.test(i)&&t.push(i.replace(/_/g,""))}),t}(),x=function(t){var i;return"object"!=typeof t?t:(e.each(t,function(n,s){/^[a-z]+_/.test(n)&&(i="",e.each(n.split("_"),function(e,t){i+=e>0?t.substr(0,1).toUpperCase()+t.substr(1):t}),t[i]=s,delete t[n])}),t)},C=function(t){return e.inArray(t,k)>-1?i[t.toUpperCase()]:t},S={youtube:{reg:/https?:\/\/(?:[a-zA_Z]{2,3}.)?(?:youtube\.com\/watch\?)((?:[\w\d\-\_\=]+&amp;(?:amp;)?)*v(?:&lt;[A-Z]+&gt;)?=([0-9a-zA-Z\-\_]+))/i,embed:function(){return"http://www.youtube.com/embed/"+this.id},getUrl:function(){return f+"//gdata.youtube.com/feeds/api/videos/"+this.id+"?v=2&alt=json-in-script&callback=?"},get_thumb:function(e){return e.entry.media$group.media$thumbnail[2].url},get_image:function(e){return e.entry.yt$hd?f+"//img.youtube.com/vi/"+this.id+"/maxresdefault.jpg":e.entry.media$group.media$thumbnail[3].url}},vimeo:{reg:/https?:\/\/(?:www\.)?(vimeo\.com)\/(?:hd#)?([0-9]+)/i,embed:function(){return"http://player.vimeo.com/video/"+this.id},getUrl:function(){return f+"//vimeo.com/api/v2/video/"+this.id+".json?callback=?"},get_thumb:function(e){return e[0].thumbnail_medium},get_image:function(e){return e[0].thumbnail_large}},dailymotion:{reg:/https?:\/\/(?:www\.)?(dailymotion\.com)\/video\/([^_]+)/,embed:function(){return f+"//www.dailymotion.com/embed/video/"+this.id},getUrl:function(){return"https://api.dailymotion.com/video/"+this.id+"?fields=thumbnail_240_url,thumbnail_720_url&callback=?"},get_thumb:function(e){return e.thumbnail_240_url},get_image:function(e){return e.thumbnail_720_url}},_inst:[]},T=function(t,i){for(var n=0;n<S._inst.length;n++)if(S._inst[n].id===i&&S._inst[n].type==t)return S._inst[n];this.type=t,this.id=i,this.readys=[],S._inst.push(this);var s=this;e.extend(this,S[t]),e.getJSON(this.getUrl(),function(t){s.data=t,e.each(s.readys,function(e,t){t(s.data)}),s.readys=[]}),this.getMedia=function(e,t,i){i=i||g;var n=this,s=function(i){t(n["get_"+e](i))};try{n.data?s(n.data):n.readys.push(s)}catch(o){i()}}},D=function(e){var t;for(var i in S)if(t=e&&S[i].reg&&e.match(S[i].reg),t&&t.length)return{id:t[2],provider:i};return!1},P={support:function(){var e=y().html;return!w&&(e.requestFullscreen||e.msRequestFullscreen||e.mozRequestFullScreen||e.webkitRequestFullScreen)}(),callback:g,enter:function(e,t,i){this.instance=e,this.callback=t||g,i=i||y().html,i.requestFullscreen?i.requestFullscreen():i.msRequestFullscreen?i.msRequestFullscreen():i.mozRequestFullScreen?i.mozRequestFullScreen():i.webkitRequestFullScreen&&i.webkitRequestFullScreen()},exit:function(e){this.callback=e||g,s.exitFullscreen?s.exitFullscreen():s.msExitFullscreen?s.msExitFullscreen():s.mozCancelFullScreen?s.mozCancelFullScreen():s.webkitCancelFullScreen&&s.webkitCancelFullScreen()},instance:null,listen:function(){if(this.support){var e=function(){if(P.instance){var e=P.instance._fullscreen;s.fullscreen||s.mozFullScreen||s.webkitIsFullScreen||s.msFullscreenElement&&null!==s.msFullscreenElement?e._enter(P.callback):e._exit(P.callback)}};s.addEventListener("fullscreenchange",e,!1),s.addEventListener("MSFullscreenChange",e,!1),s.addEventListener("mozfullscreenchange",e,!1),s.addEventListener("webkitfullscreenchange",e,!1)}}},E=[],M=[],A=!1,I=!1,j=[],L=[],O=function(t){L.push(t),e.each(j,function(e,i){i._options.theme!=t.name&&(i._initialized||i._options.theme)||(i.theme=t,i._init.call(i))})},$=function(){return{clearTimer:function(t){e.each(i.get(),function(){this.clearTimer(t)})},addTimer:function(t){e.each(i.get(),function(){this.addTimer(t)})},array:function(e){return a.slice.call(e,0)},create:function(e,t){t=t||"div";var i=s.createElement(t);return i.className=e,i},removeFromArray:function(t,i){return e.each(t,function(e,n){return n==i?(t.splice(e,1),!1):void 0}),t},getScriptPath:function(t){t=t||e("script:last").attr("src");var i=t.split("/");return 1==i.length?"":(i.pop(),i.join("/")+"/")},animate:function(){var n,o,r,a,l,c,d,h=function(e){
var i,n="transition WebkitTransition MozTransition OTransition".split(" ");if(t.opera)return!1;for(i=0;n[i];i++)if("undefined"!=typeof e[n[i]])return n[i];return!1}((s.body||s.documentElement).style),u={MozTransition:"transitionend",OTransition:"oTransitionEnd",WebkitTransition:"webkitTransitionEnd",transition:"transitionend"}[h],p={_default:[.25,.1,.25,1],galleria:[.645,.045,.355,1],galleriaIn:[.55,.085,.68,.53],galleriaOut:[.25,.46,.45,.94],ease:[.25,0,.25,1],linear:[.25,.25,.75,.75],"ease-in":[.42,0,1,1],"ease-out":[0,0,.58,1],"ease-in-out":[.42,0,.58,1]},f=function(t,i,n){var s={};n=n||"transition",e.each("webkit moz ms o".split(" "),function(){s["-"+this+"-"+n]=i}),t.css(s)},m=function(e){f(e,"none","transition"),i.WEBKIT&&i.TOUCH&&(f(e,"translate3d(0,0,0)","transform"),e.data("revert")&&(e.css(e.data("revert")),e.data("revert",null)))};return function(s,v,b){return b=e.extend({duration:400,complete:g,stop:!1},b),s=e(s),b.duration?h?(b.stop&&(s.off(u),m(s)),n=!1,e.each(v,function(e,t){d=s.css(e),$.parseValue(d)!=$.parseValue(t)&&(n=!0),s.css(e,d)}),n?(o=[],r=b.easing in p?p[b.easing]:p._default,a=" "+b.duration+"ms cubic-bezier("+r.join(",")+")",void t.setTimeout(function(t,n,s,r){return function(){t.one(n,function(e){return function(){m(e),b.complete.call(e[0])}}(t)),i.WEBKIT&&i.TOUCH&&(l={},c=[0,0,0],e.each(["left","top"],function(e,i){i in s&&(c[e]=$.parseValue(s[i])-$.parseValue(t.css(i))+"px",l[i]=s[i],delete s[i])}),(c[0]||c[1])&&(t.data("revert",l),o.push("-webkit-transform"+r),f(t,"translate3d("+c.join(",")+")","transform"))),e.each(s,function(e){o.push(e+r)}),f(t,o.join(",")),t.css(s)}}(s,u,v,a),2)):void t.setTimeout(function(){b.complete.call(s[0])},b.duration)):void s.animate(v,b):(s.css(v),void b.complete.call(s[0]))}}(),removeAlpha:function(e){if(e instanceof jQuery&&(e=e[0]),9>b&&e){var t=e.style,i=e.currentStyle,n=i&&i.filter||t.filter||"";/alpha/.test(n)&&(t.filter=n.replace(/alpha\([^)]*\)/i,""))}},forceStyles:function(t,i){t=e(t),t.attr("style")&&t.data("styles",t.attr("style")).removeAttr("style"),t.css(i)},revertStyles:function(){e.each($.array(arguments),function(t,i){i=e(i),i.removeAttr("style"),i.attr("style",""),i.data("styles")&&i.attr("style",i.data("styles")).data("styles",null)})},moveOut:function(e){$.forceStyles(e,{position:"absolute",left:-1e4})},moveIn:function(){$.revertStyles.apply($,$.array(arguments))},hide:function(t,i,n){n=n||g;var s=e(t);t=s[0],s.data("opacity")||s.data("opacity",s.css("opacity"));var o={opacity:0};if(i){var r=9>b&&t?function(){$.removeAlpha(t),t.style.visibility="hidden",n.call(t)}:n;$.animate(t,o,{duration:i,complete:r,stop:!0})}else 9>b&&t?($.removeAlpha(t),t.style.visibility="hidden"):s.css(o)},show:function(t,i,n){n=n||g;var s=e(t);t=s[0];var o=parseFloat(s.data("opacity"))||1,r={opacity:o};if(i){9>b&&(s.css("opacity",0),t.style.visibility="visible");var a=9>b&&t?function(){1==r.opacity&&$.removeAlpha(t),n.call(t)}:n;$.animate(t,r,{duration:i,complete:a,stop:!0})}else 9>b&&1==r.opacity&&t?($.removeAlpha(t),t.style.visibility="visible"):s.css(r)},wait:function(n){i._waiters=i._waiters||[],n=e.extend({until:v,success:g,error:function(){i.raise("Could not complete wait function.")},timeout:3e3},n);var s,o,r,a=$.timestamp(),l=function(){return o=$.timestamp(),s=o-a,$.removeFromArray(i._waiters,r),n.until(s)?(n.success(),!1):"number"==typeof n.timeout&&o>=a+n.timeout?(n.error(),!1):void i._waiters.push(r=t.setTimeout(l,10))};i._waiters.push(r=t.setTimeout(l,10))},toggleQuality:function(e,t){7!==b&&8!==b||!e||"IMG"!=e.nodeName.toUpperCase()||("undefined"==typeof t&&(t="nearest-neighbor"===e.style.msInterpolationMode),e.style.msInterpolationMode=t?"bicubic":"nearest-neighbor")},insertStyleTag:function(t,i){if(!i||!e("#"+i).length){var n=s.createElement("style");if(i&&(n.id=i),y().head.appendChild(n),n.styleSheet)n.styleSheet.cssText=t;else{var o=s.createTextNode(t);n.appendChild(o)}}},loadScript:function(t,i){var n=!1,s=e("<script>").attr({src:t,async:!0}).get(0);s.onload=s.onreadystatechange=function(){n||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(n=!0,s.onload=s.onreadystatechange=null,"function"==typeof i&&i.call(this,this))},y().head.appendChild(s)},parseValue:function(e){if("number"==typeof e)return e;if("string"==typeof e){var t=e.match(/\-?\d|\./g);return t&&t.constructor===Array?1*t.join(""):0}return 0},timestamp:function(){return(new Date).getTime()},loadCSS:function(t,o,r){var a,l;if(e("link[rel=stylesheet]").each(function(){return new RegExp(t).test(this.href)?(a=this,!1):void 0}),"function"==typeof o&&(r=o,o=n),r=r||g,a)return r.call(a,a),a;if(l=s.styleSheets.length,e("#"+o).length)e("#"+o).attr("href",t),l--;else{a=e("<link>").attr({rel:"stylesheet",href:t,id:o}).get(0);var c=e('link[rel="stylesheet"], style');if(c.length?c.get(0).parentNode.insertBefore(a,c[0]):y().head.appendChild(a),b&&l>=31)return void i.raise("You have reached the browser stylesheet limit (31)",!0)}if("function"==typeof r){var d=e("<s>").attr("id","galleria-loader").hide().appendTo(y().body);$.wait({until:function(){return 1==d.height()},success:function(){d.remove(),r.call(a,a)},error:function(){d.remove(),i.raise("Theme CSS could not load after 20 sec. "+(i.QUIRK?"Your browser is in Quirks Mode, please add a correct doctype.":"Please download the latest theme at http://galleria.io/customer/."),!0)},timeout:5e3})}return a}}}(),N=function(t){var i=".galleria-videoicon{width:60px;height:60px;position:absolute;top:50%;left:50%;z-index:1;margin:-30px 0 0 -30px;cursor:pointer;background:#000;background:rgba(0,0,0,.8);border-radius:3px;-webkit-transition:all 150ms}.galleria-videoicon i{width:0px;height:0px;border-style:solid;border-width:10px 0 10px 16px;display:block;border-color:transparent transparent transparent #ffffff;margin:20px 0 0 22px}.galleria-image:hover .galleria-videoicon{background:#000}";return $.insertStyleTag(i,"galleria-videoicon"),e($.create("galleria-videoicon")).html("<i></i>").appendTo(t).click(function(){e(this).siblings("img").mouseup()})},F=function(){var t=function(t,i,n,s){var o=this.getOptions("easing"),r=this.getStageWidth(),a={left:r*(t.rewind?-1:1)},l={left:0};n?(a.opacity=0,l.opacity=1):a.opacity=1,e(t.next).css(a),$.animate(t.next,l,{duration:t.speed,complete:function(e){return function(){i(),e.css({left:0})}}(e(t.next).add(t.prev)),queue:!1,easing:o}),s&&(t.rewind=!t.rewind),t.prev&&(a={left:0},l={left:r*(t.rewind?1:-1)},n&&(a.opacity=1,l.opacity=0),e(t.prev).css(a),$.animate(t.prev,l,{duration:t.speed,queue:!1,easing:o,complete:function(){e(this).css("opacity",0)}}))};return{active:!1,init:function(e,t,i){F.effects.hasOwnProperty(e)&&F.effects[e].call(this,t,i)},effects:{fade:function(t,i){e(t.next).css({opacity:0,left:0}),$.animate(t.next,{opacity:1},{duration:t.speed,complete:i}),t.prev&&(e(t.prev).css("opacity",1).show(),$.animate(t.prev,{opacity:0},{duration:t.speed}))},flash:function(t,i){e(t.next).css({opacity:0,left:0}),t.prev?$.animate(t.prev,{opacity:0},{duration:t.speed/2,complete:function(){$.animate(t.next,{opacity:1},{duration:t.speed,complete:i})}}):$.animate(t.next,{opacity:1},{duration:t.speed,complete:i})},pulse:function(t,i){t.prev&&e(t.prev).hide(),e(t.next).css({opacity:0,left:0}).show(),$.animate(t.next,{opacity:1},{duration:t.speed,complete:i})},slide:function(){t.apply(this,$.array(arguments))},fadeslide:function(){t.apply(this,$.array(arguments).concat([!0]))},doorslide:function(){t.apply(this,$.array(arguments).concat([!1,!0]))}}}}();P.listen(),e.event.special["click:fast"]={propagate:!0,add:function(i){var n=function(e){if(e.touches&&e.touches.length){var t=e.touches[0];return{x:t.pageX,y:t.pageY}}},s={touched:!1,touchdown:!1,coords:{x:0,y:0},evObj:{}};e(this).data({clickstate:s,timer:0}).on("touchstart.fast",function(i){t.clearTimeout(e(this).data("timer")),e(this).data("clickstate",{touched:!0,touchdown:!0,coords:n(i.originalEvent),evObj:i})}).on("touchmove.fast",function(t){var i=n(t.originalEvent),s=e(this).data("clickstate"),o=Math.max(Math.abs(s.coords.x-i.x),Math.abs(s.coords.y-i.y));o>6&&e(this).data("clickstate",e.extend(s,{touchdown:!1}))}).on("touchend.fast",function(n){var o=e(this),r=o.data("clickstate");r.touchdown&&i.handler.call(this,n),o.data("timer",t.setTimeout(function(){o.data("clickstate",s)},400))}).on("click.fast",function(t){var n=e(this).data("clickstate");return n.touched?!1:(e(this).data("clickstate",s),void i.handler.call(this,t))})},remove:function(){e(this).off("touchstart.fast touchmove.fast touchend.fast click.fast")}},r.on("orientationchange",function(){e(this).resize()}),i=function(){var a=this;this._options={},this._playing=!1,this._playtime=5e3,this._active=null,this._queue={length:0},this._data=[],this._dom={},this._thumbnails=[],this._layers=[],this._initialized=!1,this._firstrun=!1,this._stageWidth=0,this._stageHeight=0,this._target=n,this._binds=[],this._id=parseInt(1e4*m.random(),10);var l="container stage images image-nav image-nav-left image-nav-right info info-text info-title info-description thumbnails thumbnails-list thumbnails-container thumb-nav-left thumb-nav-right loader counter tooltip",c="current total";e.each(l.split(" "),function(e,t){a._dom[t]=$.create("galleria-"+t)}),e.each(c.split(" "),function(e,t){a._dom[t]=$.create("galleria-"+t,"span")});var d=this._keyboard={keys:{UP:38,DOWN:40,LEFT:37,RIGHT:39,RETURN:13,ESCAPE:27,BACKSPACE:8,SPACE:32},map:{},bound:!1,press:function(e){var t=e.keyCode||e.which;t in d.map&&"function"==typeof d.map[t]&&d.map[t].call(a,e)},attach:function(e){var t,i;for(t in e)e.hasOwnProperty(t)&&(i=t.toUpperCase(),i in d.keys?d.map[d.keys[i]]=e[t]:d.map[i]=e[t]);d.bound||(d.bound=!0,o.on("keydown",d.press))},detach:function(){d.bound=!1,d.map={},o.off("keydown",d.press)}},h=this._controls={0:n,1:n,active:0,swap:function(){h.active=h.active?0:1},getActive:function(){return a._options.swipe?h.slides[a._active]:h[h.active]},getNext:function(){return a._options.swipe?h.slides[a.getNext(a._active)]:h[1-h.active]},slides:[],frames:[],layers:[]},p=this._carousel={next:a.$("thumb-nav-right"),prev:a.$("thumb-nav-left"),width:0,current:0,max:0,hooks:[],update:function(){var t=0,i=0,n=[0];e.each(a._thumbnails,function(s,o){if(o.ready){t+=o.outerWidth||e(o.container).outerWidth(!0);var r=e(o.container).width();t+=r-m.floor(r),n[s+1]=t,i=m.max(i,o.outerHeight||e(o.container).outerHeight(!0))}}),a.$("thumbnails").css({width:t,height:i}),p.max=t,p.hooks=n,p.width=a.$("thumbnails-list").width(),p.setClasses(),a.$("thumbnails-container").toggleClass("galleria-carousel",t>p.width),p.width=a.$("thumbnails-list").width()},bindControls:function(){var e;p.next.on("click:fast",function(t){if(t.preventDefault(),"auto"===a._options.carouselSteps){for(e=p.current;e<p.hooks.length;e++)if(p.hooks[e]-p.hooks[p.current]>p.width){p.set(e-2);break}}else p.set(p.current+a._options.carouselSteps)}),p.prev.on("click:fast",function(t){if(t.preventDefault(),"auto"===a._options.carouselSteps)for(e=p.current;e>=0;e--){if(p.hooks[p.current]-p.hooks[e]>p.width){p.set(e+2);break}if(0===e){p.set(0);break}}else p.set(p.current-a._options.carouselSteps)})},set:function(e){for(e=m.max(e,0);p.hooks[e-1]+p.width>=p.max&&e>=0;)e--;p.current=e,p.animate()},getLast:function(e){return(e||p.current)-1},follow:function(e){if(0===e||e===p.hooks.length-2)return void p.set(e);for(var t=p.current;p.hooks[t]-p.hooks[p.current]<p.width&&t<=p.hooks.length;)t++;e-1<p.current?p.set(e-1):e+2>t&&p.set(e-t+p.current+2)},setClasses:function(){p.prev.toggleClass("disabled",!p.current),p.next.toggleClass("disabled",p.hooks[p.current]+p.width>=p.max)},animate:function(){p.setClasses();var t=-1*p.hooks[p.current];isNaN(t)||(a.$("thumbnails").css("left",function(){return e(this).css("left")}),$.animate(a.get("thumbnails"),{left:t},{duration:a._options.carouselSpeed,easing:a._options.easing,queue:!1}))}},f=this._tooltip={initialized:!1,open:!1,timer:"tooltip"+a._id,swapTimer:"swap"+a._id,init:function(){f.initialized=!0;var e=".galleria-tooltip{padding:3px 8px;max-width:50%;background:#ffe;color:#000;z-index:3;position:absolute;font-size:11px;line-height:1.3;opacity:0;box-shadow:0 0 2px rgba(0,0,0,.4);-moz-box-shadow:0 0 2px rgba(0,0,0,.4);-webkit-box-shadow:0 0 2px rgba(0,0,0,.4);}";$.insertStyleTag(e,"galleria-tooltip"),a.$("tooltip").css({opacity:.8,visibility:"visible",display:"none"})},move:function(e){var t=a.getMousePosition(e).x,i=a.getMousePosition(e).y,n=a.$("tooltip"),s=t,o=i,r=n.outerHeight(!0)+1,l=n.outerWidth(!0),c=r+15,d=a.$("container").width()-l-2,h=a.$("container").height()-r-2;isNaN(s)||isNaN(o)||(s+=10,o-=r+8,s=m.max(0,m.min(d,s)),o=m.max(0,m.min(h,o)),c>i&&(o=c),n.css({left:s,top:o}))},bind:function(t,n){if(!i.TOUCH){f.initialized||f.init();var s=function(){a.$("container").off("mousemove",f.move),a.clearTimer(f.timer),a.$("tooltip").stop().animate({opacity:0},200,function(){a.$("tooltip").hide(),a.addTimer(f.swapTimer,function(){f.open=!1},1e3)})},o=function(t,i){f.define(t,i),e(t).hover(function(){a.clearTimer(f.swapTimer),a.$("container").off("mousemove",f.move).on("mousemove",f.move).trigger("mousemove"),f.show(t),a.addTimer(f.timer,function(){a.$("tooltip").stop().show().animate({opacity:1}),f.open=!0},f.open?0:500)},s).click(s)};"string"==typeof n?o(t in a._dom?a.get(t):t,n):e.each(t,function(e,t){o(a.get(e),t)})}},show:function(i){i=e(i in a._dom?a.get(i):i);var n=i.data("tt"),s=function(e){t.setTimeout(function(e){return function(){f.move(e)}}(e),10),i.off("mouseup",s)};n="function"==typeof n?n():n,n&&(a.$("tooltip").html(n.replace(/\s/,"&#160;")),i.on("mouseup",s))},define:function(t,i){if("function"!=typeof i){var n=i;i=function(){return n}}t=e(t in a._dom?a.get(t):t).data("tt",i),f.show(t)}},g=this._fullscreen={scrolled:0,crop:n,active:!1,prev:e(),beforeEnter:function(e){e()},beforeExit:function(e){e()},keymap:a._keyboard.map,parseCallback:function(t,i){return F.active?function(){"function"==typeof t&&t.call(a);var n=a._controls.getActive(),s=a._controls.getNext();a._scaleImage(s),a._scaleImage(n),i&&a._options.trueFullscreen&&e(n.container).add(s.container).trigger("transitionend")}:t},enter:function(e){g.beforeEnter(function(){e=g.parseCallback(e,!0),a._options.trueFullscreen&&P.support?(g.active=!0,$.forceStyles(a.get("container"),{width:"100%",height:"100%"}),a.rescale(),i.MAC?i.SAFARI&&/version\/[1-5]/.test(u)?(a.$("stage").css("opacity",0),t.setTimeout(function(){g.scale(),a.$("stage").css("opacity",1)},4)):(a.$("container").css("opacity",0).addClass("fullscreen"),t.setTimeout(function(){g.scale(),a.$("container").css("opacity",1)},50)):a.$("container").addClass("fullscreen"),r.resize(g.scale),P.enter(a,e,a.get("container"))):(g.scrolled=r.scrollTop(),i.TOUCH||t.scrollTo(0,0),g._enter(e))})},_enter:function(o){g.active=!0,w&&(g.iframe=function(){var n,o=s.referrer,r=s.createElement("a"),a=t.location;return r.href=o,r.protocol!=a.protocol||r.hostname!=a.hostname||r.port!=a.port?(i.raise("Parent fullscreen not available. Iframe protocol, domains and ports must match."),!1):(g.pd=t.parent.document,e(g.pd).find("iframe").each(function(){var e=this.contentDocument||this.contentWindow.document;return e===s?(n=this,!1):void 0}),n)}()),$.hide(a.getActiveImage()),w&&g.iframe&&(g.iframe.scrolled=e(t.parent).scrollTop(),t.parent.scrollTo(0,0));var l=a.getData(),c=a._options,d=!a._options.trueFullscreen||!P.support,h={height:"100%",overflow:"hidden",margin:0,padding:0};if(d&&(a.$("container").addClass("fullscreen"),g.prev=a.$("container").prev(),g.prev.length||(g.parent=a.$("container").parent()),a.$("container").appendTo("body"),$.forceStyles(a.get("container"),{position:i.TOUCH?"absolute":"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:1e4}),$.forceStyles(y().html,h),$.forceStyles(y().body,h)),w&&g.iframe&&($.forceStyles(g.pd.documentElement,h),$.forceStyles(g.pd.body,h),$.forceStyles(g.iframe,e.extend(h,{width:"100%",height:"100%",top:0,left:0,position:"fixed",zIndex:1e4,border:"none"}))),g.keymap=e.extend({},a._keyboard.map),a.attachKeyboard({escape:a.exitFullscreen,right:a.next,left:a.prev}),g.crop=c.imageCrop,c.fullscreenCrop!=n&&(c.imageCrop=c.fullscreenCrop),l&&l.big&&l.image!==l.big){var u=new i.Picture,p=u.isCached(l.big),f=a.getIndex(),m=a._thumbnails[f];a.trigger({type:i.LOADSTART,cached:p,rewind:!1,index:f,imageTarget:a.getActiveImage(),thumbTarget:m,galleriaData:l}),u.load(l.big,function(t){a._scaleImage(t,{complete:function(t){a.trigger({type:i.LOADFINISH,cached:p,index:f,rewind:!1,imageTarget:t.image,thumbTarget:m});var n=a._controls.getActive().image;n&&e(n).width(t.image.width).height(t.image.height).attr("style",e(t.image).attr("style")).attr("src",t.image.src)}})});var v=a.getNext(f),b=new i.Picture,_=a.getData(v);b.preload(a.isFullscreen()&&_.big?_.big:_.image)}a.rescale(function(){a.addTimer(!1,function(){d&&$.show(a.getActiveImage()),"function"==typeof o&&o.call(a),a.rescale()},100),a.trigger(i.FULLSCREEN_ENTER)}),d?r.resize(g.scale):$.show(a.getActiveImage())},scale:function(){a.rescale()},exit:function(e){g.beforeExit(function(){e=g.parseCallback(e),a._options.trueFullscreen&&P.support?P.exit(e):g._exit(e)})},_exit:function(e){g.active=!1;var n=!a._options.trueFullscreen||!P.support,s=a.$("container").removeClass("fullscreen");if(g.parent?g.parent.prepend(s):s.insertAfter(g.prev),n){$.hide(a.getActiveImage()),$.revertStyles(a.get("container"),y().html,y().body),i.TOUCH||t.scrollTo(0,g.scrolled);var o=a._controls.frames[a._controls.active];o&&o.image&&(o.image.src=o.image.src)}w&&g.iframe&&($.revertStyles(g.pd.documentElement,g.pd.body,g.iframe),g.iframe.scrolled&&t.parent.scrollTo(0,g.iframe.scrolled)),a.detachKeyboard(),a.attachKeyboard(g.keymap),a._options.imageCrop=g.crop;var l=a.getData().big,c=a._controls.getActive().image;!a.getData().iframe&&c&&l&&l==c.src&&t.setTimeout(function(e){return function(){c.src=e}}(a.getData().image),1),a.rescale(function(){a.addTimer(!1,function(){n&&$.show(a.getActiveImage()),"function"==typeof e&&e.call(a),r.trigger("resize")},50),a.trigger(i.FULLSCREEN_EXIT)}),r.off("resize",g.scale)}},v=this._idle={trunk:[],bound:!1,active:!1,add:function(t,n,s,o){if(t&&!i.TOUCH){v.bound||v.addEvent(),t=e(t),"boolean"==typeof s&&(o=s,s={}),s=s||{};var r,a={};for(r in n)n.hasOwnProperty(r)&&(a[r]=t.css(r));t.data("idle",{from:e.extend(a,s),to:n,complete:!0,busy:!1}),o?t.css(n):v.addTimer(),v.trunk.push(t)}},remove:function(t){t=e(t),e.each(v.trunk,function(e,i){i&&i.length&&!i.not(t).length&&(t.css(t.data("idle").from),v.trunk.splice(e,1))}),v.trunk.length||(v.removeEvent(),a.clearTimer(v.timer))},addEvent:function(){v.bound=!0,a.$("container").on("mousemove click",v.showAll),"hover"==a._options.idleMode&&a.$("container").on("mouseleave",v.hide)},removeEvent:function(){v.bound=!1,a.$("container").on("mousemove click",v.showAll),"hover"==a._options.idleMode&&a.$("container").off("mouseleave",v.hide)},addTimer:function(){"hover"!=a._options.idleMode&&a.addTimer("idle",function(){v.hide()},a._options.idleTime)},hide:function(){if(a._options.idleMode&&a.getIndex()!==!1){a.trigger(i.IDLE_ENTER);var t=v.trunk.length;e.each(v.trunk,function(e,i){var n=i.data("idle");n&&(i.data("idle").complete=!1,$.animate(i,n.to,{duration:a._options.idleSpeed,complete:function(){e==t-1&&(v.active=!1)}}))})}},showAll:function(){a.clearTimer("idle"),e.each(v.trunk,function(e,t){v.show(t)})},show:function(t){var n=t.data("idle");v.active&&(n.busy||n.complete)||(n.busy=!0,a.trigger(i.IDLE_EXIT),a.clearTimer("idle"),$.animate(t,n.from,{duration:a._options.idleSpeed/2,complete:function(){v.active=!0,e(t).data("idle").busy=!1,e(t).data("idle").complete=!0}})),v.addTimer()}},_=this._lightbox={width:0,height:0,initialized:!1,active:null,image:null,elems:{},keymap:!1,init:function(){if(!_.initialized){_.initialized=!0;var t="overlay box content shadow title info close prevholder prev nextholder next counter image",n={},s=a._options,o="",r="position:absolute;",l="lightbox-",c={overlay:"position:fixed;display:none;opacity:"+s.overlayOpacity+";filter:alpha(opacity="+100*s.overlayOpacity+");top:0;left:0;width:100%;height:100%;background:"+s.overlayBackground+";z-index:99990",box:"position:fixed;display:none;width:400px;height:400px;top:50%;left:50%;margin-top:-200px;margin-left:-200px;z-index:99991",shadow:r+"background:#000;width:100%;height:100%;",content:r+"background-color:#fff;top:10px;left:10px;right:10px;bottom:10px;overflow:hidden",info:r+"bottom:10px;left:10px;right:10px;color:#444;font:11px/13px arial,sans-serif;height:13px",close:r+"top:10px;right:10px;height:20px;width:20px;background:#fff;text-align:center;cursor:pointer;color:#444;font:16px/22px arial,sans-serif;z-index:99999",image:r+"top:10px;left:10px;right:10px;bottom:30px;overflow:hidden;display:block;",prevholder:r+"width:50%;top:0;bottom:40px;cursor:pointer;",nextholder:r+"width:50%;top:0;bottom:40px;right:-1px;cursor:pointer;",prev:r+"top:50%;margin-top:-20px;height:40px;width:30px;background:#fff;left:20px;display:none;text-align:center;color:#000;font:bold 16px/36px arial,sans-serif",next:r+"top:50%;margin-top:-20px;height:40px;width:30px;background:#fff;right:20px;left:auto;display:none;font:bold 16px/36px arial,sans-serif;text-align:center;color:#000",title:"float:left",counter:"float:right;margin-left:8px;"},d=function(t){return t.hover(function(){e(this).css("color","#bbb")},function(){e(this).css("color","#444")})},h={},u="";u=b>7?9>b?"background:#000;filter:alpha(opacity=0);":"background:rgba(0,0,0,0);":"z-index:99999",c.nextholder+=u,c.prevholder+=u,e.each(c,function(e,t){o+=".galleria-"+l+e+"{"+t+"}"}),o+=".galleria-"+l+"box.iframe .galleria-"+l+"prevholder,.galleria-"+l+"box.iframe .galleria-"+l+"nextholder{width:100px;height:100px;top:50%;margin-top:-70px}",$.insertStyleTag(o,"galleria-lightbox"),e.each(t.split(" "),function(e,t){a.addElement("lightbox-"+t),n[t]=_.elems[t]=a.get("lightbox-"+t)}),_.image=new i.Picture,e.each({box:"shadow content close prevholder nextholder",info:"title counter",content:"info image",prevholder:"prev",nextholder:"next"},function(t,i){var n=[];e.each(i.split(" "),function(e,t){n.push(l+t)}),h[l+t]=n}),a.append(h),e(n.image).append(_.image.container),e(y().body).append(n.overlay,n.box),d(e(n.close).on("click:fast",_.hide).html("&#215;")),e.each(["Prev","Next"],function(t,s){var o=e(n[s.toLowerCase()]).html(/v/.test(s)?"&#8249;&#160;":"&#160;&#8250;"),r=e(n[s.toLowerCase()+"holder"]);return r.on("click:fast",function(){_["show"+s]()}),8>b||i.TOUCH?void o.show():void r.hover(function(){o.show()},function(){o.stop().fadeOut(200)})}),e(n.overlay).on("click:fast",_.hide),i.IPAD&&(a._options.lightboxTransitionSpeed=0)}},rescale:function(t){var n=m.min(r.width()-40,_.width),s=m.min(r.height()-60,_.height),o=m.min(n/_.width,s/_.height),l=m.round(_.width*o)+40,c=m.round(_.height*o)+60,d={width:l,height:c,"margin-top":-1*m.ceil(c/2),"margin-left":-1*m.ceil(l/2)};t?e(_.elems.box).css(d):e(_.elems.box).animate(d,{duration:a._options.lightboxTransitionSpeed,easing:a._options.easing,complete:function(){var t=_.image,n=a._options.lightboxFadeSpeed;a.trigger({type:i.LIGHTBOX_IMAGE,imageTarget:t.image}),e(t.container).show(),e(t.image).animate({opacity:1},n),$.show(_.elems.info,n)}})},hide:function(){_.image.image=null,r.off("resize",_.rescale),e(_.elems.box).hide().find("iframe").remove(),$.hide(_.elems.info),a.detachKeyboard(),a.attachKeyboard(_.keymap),_.keymap=!1,$.hide(_.elems.overlay,200,function(){e(this).hide().css("opacity",a._options.overlayOpacity),a.trigger(i.LIGHTBOX_CLOSE)})},showNext:function(){_.show(a.getNext(_.active))},showPrev:function(){_.show(a.getPrev(_.active))},show:function(n){_.active=n="number"==typeof n?n:a.getIndex()||0,_.initialized||_.init(),a.trigger(i.LIGHTBOX_OPEN),_.keymap||(_.keymap=e.extend({},a._keyboard.map),a.attachKeyboard({escape:_.hide,right:_.showNext,left:_.showPrev})),r.off("resize",_.rescale);var s,o,l,c=a.getData(n),d=a.getDataLength(),h=a.getNext(n);$.hide(_.elems.info);try{for(l=a._options.preload;l>0;l--)o=new i.Picture,s=a.getData(h),o.preload(s.big?s.big:s.image),h=a.getNext(h)}catch(u){}_.image.isIframe=c.iframe&&!c.image,e(_.elems.box).toggleClass("iframe",_.image.isIframe),e(_.image.container).find(".galleria-videoicon").remove(),_.image.load(c.big||c.image||c.iframe,function(i){if(i.isIframe){var s=e(t).width(),o=e(t).height();if(i.video&&a._options.maxVideoSize){var l=m.min(a._options.maxVideoSize/s,a._options.maxVideoSize/o);1>l&&(s*=l,o*=l)}_.width=s,_.height=o}else _.width=i.original.width,_.height=i.original.height;if(e(i.image).css({width:i.isIframe?"100%":"100.1%",height:i.isIframe?"100%":"100.1%",top:0,bottom:0,zIndex:99998,opacity:0,visibility:"visible"}).parent().height("100%"),_.elems.title.innerHTML=c.title||"",_.elems.counter.innerHTML=n+1+" / "+d,r.resize(_.rescale),_.rescale(),c.image&&c.iframe){if(e(_.elems.box).addClass("iframe"),c.video){var h=N(i.container).hide();t.setTimeout(function(){h.fadeIn(200)},200)}e(i.image).css("cursor","pointer").mouseup(function(t,i){return function(n){e(_.image.container).find(".galleria-videoicon").remove(),n.preventDefault(),i.isIframe=!0,i.load(t.iframe+(t.video?"&autoplay=1":""),{width:"100%",height:8>b?e(_.image.container).height():"100%"})}}(c,i))}}),e(_.elems.overlay).show().css("visibility","visible"),e(_.elems.box).show()}},k=this._timer={trunk:{},add:function(e,i,n,s){if(e=e||(new Date).getTime(),s=s||!1,this.clear(e),s){var o=i;i=function(){o(),k.add(e,i,n)}}this.trunk[e]=t.setTimeout(i,n)},clear:function(e){var i,n=function(e){t.clearTimeout(this.trunk[e]),delete this.trunk[e]};if(e&&e in this.trunk)n.call(this,e);else if("undefined"==typeof e)for(i in this.trunk)this.trunk.hasOwnProperty(i)&&n.call(this,i)}};return this},i.prototype={constructor:i,init:function(t,s){if(s=x(s),this._original={target:t,options:s,data:null},this._target=this._dom.target=t.nodeName?t:e(t).get(0),this._original.html=this._target.innerHTML,M.push(this),!this._target)return void i.raise("Target not found",!0);if(this._options={autoplay:!1,carousel:!0,carouselFollow:!0,carouselSpeed:400,carouselSteps:"auto",clicknext:!1,dailymotion:{foreground:"%23EEEEEE",highlight:"%235BCEC5",background:"%23222222",logo:0,hideInfos:1},dataConfig:function(){return{}},dataSelector:"img",dataSort:!1,dataSource:this._target,debug:n,dummy:n,easing:"galleria",extend:function(){},fullscreenCrop:n,fullscreenDoubleTap:!0,fullscreenTransition:n,height:0,idleMode:!0,idleTime:3e3,idleSpeed:200,imageCrop:!1,imageMargin:0,imagePan:!1,imagePanSmoothness:12,imagePosition:"50%",imageTimeout:n,initialTransition:n,keepSource:!1,layerFollow:!0,lightbox:!1,lightboxFadeSpeed:200,lightboxTransitionSpeed:200,linkSourceImages:!0,maxScaleRatio:n,maxVideoSize:n,minScaleRatio:n,overlayOpacity:.85,overlayBackground:"#0b0b0b",pauseOnInteraction:!0,popupLinks:!1,preload:2,queue:!0,responsive:!0,show:0,showInfo:!0,showCounter:!0,showImagenav:!0,swipe:"auto",theme:null,thumbCrop:!0,thumbEventType:"click:fast",thumbMargin:0,thumbQuality:"auto",thumbDisplayOrder:!0,thumbPosition:"50%",thumbnails:!0,touchTransition:n,transition:"fade",transitionInitial:n,transitionSpeed:400,trueFullscreen:!0,useCanvas:!1,variation:"",videoPoster:!0,vimeo:{title:0,byline:0,portrait:0,color:"aaaaaa"},wait:5e3,width:"auto",youtube:{modestbranding:1,autohide:1,color:"white",hd:1,rel:0,showinfo:0}},this._options.initialTransition=this._options.initialTransition||this._options.transitionInitial,s&&(s.debug===!1&&(c=!1),"number"==typeof s.imageTimeout&&(d=s.imageTimeout),"string"==typeof s.dummy&&(h=s.dummy),"string"==typeof s.theme&&(this._options.theme=s.theme)),e(this._target).children().hide(),i.QUIRK&&i.raise("Your page is in Quirks mode, Galleria may not render correctly. Please validate your HTML and add a correct doctype."),L.length)if(this._options.theme){for(var o=0;o<L.length;o++)if(this._options.theme===L[o].name){this.theme=L[o];break}}else this.theme=L[0];return"object"==typeof this.theme?this._init():j.push(this),this},_init:function(){var o=this,a=this._options;if(this._initialized)return i.raise("Init failed: Gallery instance already initialized."),this;if(this._initialized=!0,!this.theme)return i.raise("Init failed: No theme found.",!0),this;if(e.extend(!0,a,this.theme.defaults,this._original.options,i.configure.options),a.swipe=function(e){return"enforced"==e?!0:e===!1||"disabled"==e?!1:!!i.TOUCH}(a.swipe),a.swipe&&(a.clicknext=!1,a.imagePan=!1),!function(e){return"getContext"in e?void(I=I||{elem:e,context:e.getContext("2d"),cache:{},length:0}):void(e=null)}(s.createElement("canvas")),this.bind(i.DATA,function(){t.screen&&t.screen.width&&Array.prototype.forEach&&this._data.forEach(function(e){var i="devicePixelRatio"in t?t.devicePixelRatio:1,n=m.max(t.screen.width,t.screen.height);1024>n*i&&(e.big=e.image)}),this._original.data=this._data,this.get("total").innerHTML=this.getDataLength();var e=this.$("container");o._options.height<2&&(o._userRatio=o._ratio=o._options.height);var n={width:0,height:0},s=function(){return o.$("stage").height()};$.wait({until:function(){return n=o._getWH(),e.width(n.width).height(n.height),s()&&n.width&&n.height>50},success:function(){o._width=n.width,o._height=n.height,o._ratio=o._ratio||n.height/n.width,i.WEBKIT?t.setTimeout(function(){o._run()},1):o._run()},error:function(){s()?i.raise("Could not extract sufficient width/height of the gallery container. Traced measures: width:"+n.width+"px, height: "+n.height+"px.",!0):i.raise("Could not extract a stage height from the CSS. Traced height: "+s()+"px.",!0)},timeout:"number"==typeof this._options.wait?this._options.wait:!1})}),this.append({"info-text":["info-title","info-description"],info:["info-text"],"image-nav":["image-nav-right","image-nav-left"],stage:["images","loader","counter","image-nav"],"thumbnails-list":["thumbnails"],"thumbnails-container":["thumb-nav-left","thumbnails-list","thumb-nav-right"],container:["stage","thumbnails-container","info","tooltip"]}),$.hide(this.$("counter").append(this.get("current"),s.createTextNode(" / "),this.get("total"))),this.setCounter("&#8211;"),$.hide(o.get("tooltip")),this.$("container").addClass([i.TOUCH?"touch":"notouch",this._options.variation,"galleria-theme-"+this.theme.name].join(" ")),this._options.swipe||e.each(new Array(2),function(t){var n=new i.Picture;e(n.container).css({position:"absolute",top:0,left:0}).prepend(o._layers[t]=e($.create("galleria-layer")).css({position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:2})[0]),o.$("images").append(n.container),o._controls[t]=n;var s=new i.Picture;s.isIframe=!0,e(s.container).attr("class","galleria-frame").css({position:"absolute",top:0,left:0,zIndex:4,background:"#000",display:"none"}).appendTo(n.container),o._controls.frames[t]=s}),this.$("images").css({position:"relative",top:0,left:0,width:"100%",height:"100%"}),a.swipe&&(this.$("images").css({position:"absolute",top:0,left:0,width:0,height:"100%"}),this.finger=new i.Finger(this.get("stage"),{onchange:function(e){o.pause().show(e)},oncomplete:function(t){var i=m.max(0,m.min(parseInt(t,10),o.getDataLength()-1)),n=o.getData(i);e(o._thumbnails[i].container).addClass("active").siblings(".active").removeClass("active"),n&&(o.$("images").find(".galleria-frame").css("opacity",0).hide().find("iframe").remove(),o._options.carousel&&o._options.carouselFollow&&o._carousel.follow(i))}}),this.bind(i.RESCALE,function(){this.finger.setup()}),this.$("stage").on("click",function(){var i=o.getData();if(i){if(i.iframe){o.isPlaying()&&o.pause();var s=o._controls.frames[o._active],r=o._stageWidth,a=o._stageHeight;if(e(s.container).find("iframe").length)return;return e(s.container).css({width:r,height:a,opacity:0}).show().animate({opacity:1},200),void t.setTimeout(function(){s.load(i.iframe+(i.video?"&autoplay=1":""),{width:r,height:a},function(e){o.$("container").addClass("videoplay"),e.scale({width:o._stageWidth,height:o._stageHeight,iframelimit:i.video?o._options.maxVideoSize:n})})},100)}if(i.link)if(o._options.popupLinks){t.open(i.link,"_blank")}else t.location.href=i.link;else;}}),this.bind(i.IMAGE,function(t){o.setCounter(t.index),o.setInfo(t.index);var i=this.getNext(),n=this.getPrev(),s=[n,i];s.push(this.getNext(i),this.getPrev(n),o._controls.slides.length-1);var r=[];e.each(s,function(t,i){-1==e.inArray(i,r)&&r.push(i)}),e.each(r,function(t,i){var n=o.getData(i),s=o._controls.slides[i],r=o.isFullscreen()&&n.big?n.big:n.image||n.iframe;n.iframe&&!n.image&&(s.isIframe=!0),s.ready||o._controls.slides[i].load(r,function(t){t.isIframe||e(t.image).css("visibility","hidden"),o._scaleImage(t,{complete:function(t){t.isIframe||e(t.image).css({opacity:0,visibility:"visible"}).animate({opacity:1},200)}})})})})),this.$("thumbnails, thumbnails-list").css({overflow:"hidden",position:"relative"}),this.$("image-nav-right, image-nav-left").on("click:fast",function(){
a.pauseOnInteraction&&o.pause();var e=/right/.test(this.className)?"next":"prev";o[e]()}).on("click",function(e){e.preventDefault(),(a.clicknext||a.swipe)&&e.stopPropagation()}),e.each(["info","counter","image-nav"],function(e,t){a["show"+t.substr(0,1).toUpperCase()+t.substr(1).replace(/-/,"")]===!1&&$.moveOut(o.get(t.toLowerCase()))}),this.load(),a.keepSource||b||(this._target.innerHTML=""),this.get("errors")&&this.appendChild("target","errors"),this.appendChild("target","container"),a.carousel){var l=0,c=a.show;this.bind(i.THUMBNAIL,function(){this.updateCarousel(),++l==this.getDataLength()&&"number"==typeof c&&c>0&&this._carousel.follow(c)})}return a.responsive&&r.on("resize",function(){o.isFullscreen()||o.resize()}),a.fullscreenDoubleTap&&this.$("stage").on("touchstart",function(){var e,t,i,n,s,r,a=function(e){return e.originalEvent.touches?e.originalEvent.touches[0]:e};return o.$("stage").on("touchmove",function(){e=0}),function(l){if(!/(-left|-right)/.test(l.target.className)){if(r=$.timestamp(),t=a(l).pageX,i=a(l).pageY,l.originalEvent.touches.length<2&&300>r-e&&20>t-n&&20>i-s)return o.toggleFullscreen(),void l.preventDefault();e=r,n=t,s=i}}}()),e.each(i.on.binds,function(t,i){-1==e.inArray(i.hash,o._binds)&&o.bind(i.type,i.callback)}),this},addTimer:function(){return this._timer.add.apply(this._timer,$.array(arguments)),this},clearTimer:function(){return this._timer.clear.apply(this._timer,$.array(arguments)),this},_getWH:function(){var t,i=this.$("container"),n=this.$("target"),s=this,o={};return e.each(["width","height"],function(e,r){s._options[r]&&"number"==typeof s._options[r]?o[r]=s._options[r]:(t=[$.parseValue(i.css(r)),$.parseValue(n.css(r)),i[r](),n[r]()],s["_"+r]||t.splice(t.length,$.parseValue(i.css("min-"+r)),$.parseValue(n.css("min-"+r))),o[r]=m.max.apply(m,t))}),s._userRatio&&(o.height=o.width*s._userRatio),o},_createThumbnails:function(n){this.get("total").innerHTML=this.getDataLength();var o,r,a,l,c=this,d=this._options,h=n?this._data.length-n.length:0,u=h,p=[],f=0,m=8>b?"http://upload.wikimedia.org/wikipedia/commons/c/c0/Blank.gif":"data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw%3D%3D",g=function(){var e=c.$("thumbnails").find(".active");return e.length?e.find("img").attr("src"):!1}(),v="string"==typeof d.thumbnails?d.thumbnails.toLowerCase():null,y=function(e){return s.defaultView&&s.defaultView.getComputedStyle?s.defaultView.getComputedStyle(r.container,null)[e]:l.css(e)},w=function(t,n,s){return function(){e(s).append(t),c.trigger({type:i.THUMBNAIL,thumbTarget:t,index:n,galleriaData:c.getData(n)})}},_=function(t){d.pauseOnInteraction&&c.pause();var i=e(t.currentTarget).data("index");c.getIndex()!==i&&c.show(i),t.preventDefault()},k=function(t,n){e(t.container).css("visibility","visible"),c.trigger({type:i.THUMBNAIL,thumbTarget:t.image,index:t.data.order,galleriaData:c.getData(t.data.order)}),"function"==typeof n&&n.call(c,t)},x=function(t,i){t.scale({width:t.data.width,height:t.data.height,crop:d.thumbCrop,margin:d.thumbMargin,canvas:d.useCanvas,position:d.thumbPosition,complete:function(t){var n,s,o=["left","top"],r=["Width","Height"];c.getData(t.index);e.each(r,function(i,r){n=r.toLowerCase(),d.thumbCrop===!0&&d.thumbCrop!==n||(s={},s[n]=t[n],e(t.container).css(s),s={},s[o[i]]=0,e(t.image).css(s)),t["outer"+r]=e(t.container)["outer"+r](!0)}),$.toggleQuality(t.image,d.thumbQuality===!0||"auto"===d.thumbQuality&&t.original.width<3*t.width),d.thumbDisplayOrder&&!t.lazy?e.each(p,function(e,t){return e===f&&t.ready&&!t.displayed?(f++,t.displayed=!0,void k(t,i)):void 0}):k(t,i)}})};for(n||(this._thumbnails=[],this.$("thumbnails").empty());this._data[h];h++)a=this._data[h],o=a.thumb||a.image,d.thumbnails!==!0&&"lazy"!=v||!a.thumb&&!a.image?a.iframe&&null!==v||"empty"===v||"numbers"===v?(r={container:$.create("galleria-image"),image:$.create("img","span"),ready:!0,data:{order:h}},"numbers"===v&&e(r.image).text(h+1),a.iframe&&e(r.image).addClass("iframe"),this.$("thumbnails").append(r.container),t.setTimeout(w(r.image,h,r.container),50+20*h)):r={container:null,image:null}:(r=new i.Picture(h),r.index=h,r.displayed=!1,r.lazy=!1,r.video=!1,this.$("thumbnails").append(r.container),l=e(r.container),l.css("visibility","hidden"),r.data={width:$.parseValue(y("width")),height:$.parseValue(y("height")),order:h,src:o},d.thumbCrop!==!0?l.css({width:"auto",height:"auto"}):l.css({width:r.data.width,height:r.data.height}),"lazy"==v?(l.addClass("lazy"),r.lazy=!0,r.load(m,{height:r.data.height,width:r.data.width})):r.load(o,x),"all"===d.preload&&r.preload(a.image)),e(r.container).add(d.keepSource&&d.linkSourceImages?a.original:null).data("index",h).on(d.thumbEventType,_).data("thumbload",x),g===o&&e(r.container).addClass("active"),this._thumbnails.push(r);return p=this._thumbnails.slice(u),this},lazyLoad:function(t,i){var n=t.constructor==Array?t:[t],s=this,o=0;return e.each(n,function(t,r){if(!(r>s._thumbnails.length-1)){var a=s._thumbnails[r],l=a.data,c=function(){++o==n.length&&"function"==typeof i&&i.call(s)},d=e(a.container).data("thumbload");a.video?d.call(s,a,c):a.load(l.src,function(e){d.call(s,e,c)})}}),this},lazyLoadChunks:function(e,i){var n=this.getDataLength(),s=0,o=0,r=[],a=[],l=this;for(i=i||0;n>s;s++)a.push(s),++o!=e&&s!=n-1||(r.push(a),o=0,a=[]);var c=function(e){var n=r.shift();n&&t.setTimeout(function(){l.lazyLoad(n,function(){c(!0)})},i&&e?i:0)};return c(!1),this},_run:function(){var s=this;s._createThumbnails(),$.wait({timeout:1e4,until:function(){return i.OPERA&&s.$("stage").css("display","inline-block"),s._stageWidth=s.$("stage").width(),s._stageHeight=s.$("stage").height(),s._stageWidth&&s._stageHeight>50},success:function(){if(E.push(s),s._options.swipe){var o=s.$("images").width(s.getDataLength()*s._stageWidth);e.each(new Array(s.getDataLength()),function(t){var n=new i.Picture,r=s.getData(t);e(n.container).css({position:"absolute",top:0,left:s._stageWidth*t}).prepend(s._layers[t]=e($.create("galleria-layer")).css({position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:2})[0]).appendTo(o),r.video&&N(n.container),s._controls.slides.push(n);var a=new i.Picture;a.isIframe=!0,e(a.container).attr("class","galleria-frame").css({position:"absolute",top:0,left:0,zIndex:4,background:"#000",display:"none"}).appendTo(n.container),s._controls.frames.push(a)}),s.finger.setup()}return $.show(s.get("counter")),s._options.carousel&&s._carousel.bindControls(),s._options.autoplay&&(s.pause(),"number"==typeof s._options.autoplay&&(s._playtime=s._options.autoplay),s._playing=!0),s._firstrun?(s._options.autoplay&&s.trigger(i.PLAY),void("number"==typeof s._options.show&&s.show(s._options.show))):(s._firstrun=!0,i.History&&i.History.change(function(e){isNaN(e)?t.history.go(-1):s.show(e,n,!0)}),s.trigger(i.READY),s.theme.init.call(s,s._options),e.each(i.ready.callbacks,function(e,t){"function"==typeof t&&t.call(s,s._options)}),s._options.extend.call(s,s._options),/^[0-9]{1,4}$/.test(p)&&i.History?s.show(p,n,!0):s._data[s._options.show]&&s.show(s._options.show),void(s._options.autoplay&&s.trigger(i.PLAY)))},error:function(){i.raise("Stage width or height is too small to show the gallery. Traced measures: width:"+s._stageWidth+"px, height: "+s._stageHeight+"px.",!0)}})},load:function(t,n,s){var o=this,r=this._options;return this._data=[],this._thumbnails=[],this.$("thumbnails").empty(),"function"==typeof n&&(s=n,n=null),t=t||r.dataSource,n=n||r.dataSelector,s=s||r.dataConfig,e.isPlainObject(t)&&(t=[t]),e.isArray(t)?this.validate(t)?this._data=t:i.raise("Load failed: JSON Array not valid."):(n+=",.video,.iframe",e(t).find(n).each(function(t,i){i=e(i);var n={},r=i.parent(),a=r.attr("href"),l=r.attr("rel");a&&("IMG"==i[0].nodeName||i.hasClass("video"))&&D(a)?n.video=a:a&&i.hasClass("iframe")?n.iframe=a:n.image=n.big=a,l&&(n.big=l),e.each("big title description link layer image".split(" "),function(e,t){i.data(t)&&(n[t]=i.data(t).toString())}),n.big||(n.big=n.image),o._data.push(e.extend({title:i.attr("title")||"",thumb:i.attr("src"),image:i.attr("src"),big:i.attr("src"),description:i.attr("alt")||"",link:i.attr("longdesc"),original:i.get(0)},n,s(i)))})),"function"==typeof r.dataSort?a.sort.call(this._data,r.dataSort):"random"==r.dataSort&&this._data.sort(function(){return m.round(m.random())-.5}),this.getDataLength()&&this._parseData(function(){this.trigger(i.DATA)}),this},_parseData:function(t){var i,s=this,o=!1,r=function(){var i=!0;e.each(s._data,function(e,t){return t.loading?(i=!1,!1):void 0}),i&&!o&&(o=!0,t.call(s))};return e.each(this._data,function(t,o){if(i=s._data[t],"thumb"in o==!1&&(i.thumb=o.image),o.big||(i.big=o.image),"video"in o){var a=D(o.video);a&&(i.iframe=new T(a.provider,a.id).embed()+function(){if("object"==typeof s._options[a.provider]){var t="?",i=[];return e.each(s._options[a.provider],function(e,t){i.push(e+"="+t)}),"youtube"==a.provider&&(i=["wmode=opaque"].concat(i)),t+i.join("&")}return""}(),i.thumb&&i.image||e.each(["thumb","image"],function(e,t){if("image"==t&&!s._options.videoPoster)return void(i.image=n);var o=new T(a.provider,a.id);i[t]||(i.loading=!0,o.getMedia(t,function(e,t){return function(i){e[t]=i,"image"!=t||e.big||(e.big=e.image),delete e.loading,r()}}(i,t)))}))}}),r(),this},destroy:function(){return this.$("target").data("galleria",null),this.$("container").off("galleria"),this.get("target").innerHTML=this._original.html,this.clearTimer(),$.removeFromArray(M,this),$.removeFromArray(E,this),i._waiters.length&&e.each(i._waiters,function(e,i){i&&t.clearTimeout(i)}),this},splice:function(){var e=this,i=$.array(arguments);return t.setTimeout(function(){a.splice.apply(e._data,i),e._parseData(function(){e._createThumbnails()})},2),e},push:function(){var e=this,i=$.array(arguments);return 1==i.length&&i[0].constructor==Array&&(i=i[0]),t.setTimeout(function(){a.push.apply(e._data,i),e._parseData(function(){e._createThumbnails(i)})},2),e},_getActive:function(){return this._controls.getActive()},validate:function(){return!0},bind:function(e,t){return e=C(e),this.$("container").on(e,this.proxy(t)),this},unbind:function(e){return e=C(e),this.$("container").off(e),this},trigger:function(t){return t="object"==typeof t?e.extend(t,{scope:this}):{type:C(t),scope:this},this.$("container").trigger(t),this},addIdleState:function(){return this._idle.add.apply(this._idle,$.array(arguments)),this},removeIdleState:function(){return this._idle.remove.apply(this._idle,$.array(arguments)),this},enterIdleMode:function(){return this._idle.hide(),this},exitIdleMode:function(){return this._idle.showAll(),this},enterFullscreen:function(){return this._fullscreen.enter.apply(this,$.array(arguments)),this},exitFullscreen:function(){return this._fullscreen.exit.apply(this,$.array(arguments)),this},toggleFullscreen:function(){return this._fullscreen[this.isFullscreen()?"exit":"enter"].apply(this,$.array(arguments)),this},bindTooltip:function(){return this._tooltip.bind.apply(this._tooltip,$.array(arguments)),this},defineTooltip:function(){return this._tooltip.define.apply(this._tooltip,$.array(arguments)),this},refreshTooltip:function(){return this._tooltip.show.apply(this._tooltip,$.array(arguments)),this},openLightbox:function(){return this._lightbox.show.apply(this._lightbox,$.array(arguments)),this},closeLightbox:function(){return this._lightbox.hide.apply(this._lightbox,$.array(arguments)),this},hasVariation:function(t){return e.inArray(t,this._options.variation.split(/\s+/))>-1},getActiveImage:function(){var e=this._getActive();return e?e.image:n},getActiveThumb:function(){return this._thumbnails[this._active].image||n},getMousePosition:function(e){return{x:e.pageX-this.$("container").offset().left,y:e.pageY-this.$("container").offset().top}},addPan:function(t){if(this._options.imageCrop!==!1){t=e(t||this.getActiveImage());var i=this,n=t.width()/2,s=t.height()/2,o=parseInt(t.css("left"),10),r=parseInt(t.css("top"),10),a=o||0,l=r||0,c=0,d=0,h=!1,u=$.timestamp(),p=0,f=0,g=function(e,i,n){if(e>0&&(f=m.round(m.max(-1*e,m.min(0,i))),p!==f))if(p=f,8===b)t.parent()["scroll"+n](-1*f);else{var s={};s[n.toLowerCase()]=f,t.css(s)}},v=function(e){$.timestamp()-u<50||(h=!0,n=i.getMousePosition(e).x,s=i.getMousePosition(e).y)},y=function(){h&&(c=t.width()-i._stageWidth,d=t.height()-i._stageHeight,o=n/i._stageWidth*c*-1,r=s/i._stageHeight*d*-1,a+=(o-a)/i._options.imagePanSmoothness,l+=(r-l)/i._options.imagePanSmoothness,g(d,l,"Top"),g(c,a,"Left"))};return 8===b&&(t.parent().scrollTop(-1*l).scrollLeft(-1*a),t.css({top:0,left:0})),this.$("stage").off("mousemove",v).on("mousemove",v),this.addTimer("pan"+i._id,y,50,!0),this}},proxy:function(e,t){return"function"!=typeof e?g:(t=t||this,function(){return e.apply(t,$.array(arguments))})},getThemeName:function(){return this.theme.name},removePan:function(){return this.$("stage").off("mousemove"),this.clearTimer("pan"+this._id),this},addElement:function(){var t=this._dom;return e.each($.array(arguments),function(e,i){t[i]=$.create("galleria-"+i)}),this},attachKeyboard:function(){return this._keyboard.attach.apply(this._keyboard,$.array(arguments)),this},detachKeyboard:function(){return this._keyboard.detach.apply(this._keyboard,$.array(arguments)),this},appendChild:function(e,t){return this.$(e).append(this.get(t)||t),this},prependChild:function(e,t){return this.$(e).prepend(this.get(t)||t),this},remove:function(){return this.$($.array(arguments).join(",")).remove(),this},append:function(e){var t,i;for(t in e)if(e.hasOwnProperty(t))if(e[t].constructor===Array)for(i=0;e[t][i];i++)this.appendChild(t,e[t][i]);else this.appendChild(t,e[t]);return this},_scaleImage:function(t,i){if(t=t||this._controls.getActive()){var n,s=function(t){e(t.container).children(":first").css({top:m.max(0,$.parseValue(t.image.style.top)),left:m.max(0,$.parseValue(t.image.style.left)),width:$.parseValue(t.image.width),height:$.parseValue(t.image.height)})};return i=e.extend({width:this._stageWidth,height:this._stageHeight,crop:this._options.imageCrop,max:this._options.maxScaleRatio,min:this._options.minScaleRatio,margin:this._options.imageMargin,position:this._options.imagePosition,iframelimit:this._options.maxVideoSize},i),this._options.layerFollow&&this._options.imageCrop!==!0?"function"==typeof i.complete?(n=i.complete,i.complete=function(){n.call(t,t),s(t)}):i.complete=s:e(t.container).children(":first").css({top:0,left:0}),t.scale(i),this}},updateCarousel:function(){return this._carousel.update(),this},resize:function(t,i){"function"==typeof t&&(i=t,t=n),t=e.extend({width:0,height:0},t);var s=this,o=this.$("container");return e.each(t,function(e,i){i||(o[e]("auto"),t[e]=s._getWH()[e])}),e.each(t,function(e,t){o[e](t)}),this.rescale(i)},rescale:function(t,s,o){var r=this;"function"==typeof t&&(o=t,t=n);var a=function(){r._stageWidth=t||r.$("stage").width(),r._stageHeight=s||r.$("stage").height(),r._options.swipe?(e.each(r._controls.slides,function(t,i){r._scaleImage(i),e(i.container).css("left",r._stageWidth*t)}),r.$("images").css("width",r._stageWidth*r.getDataLength())):r._scaleImage(),r._options.carousel&&r.updateCarousel();var n=r._controls.frames[r._controls.active];n&&r._controls.frames[r._controls.active].scale({width:r._stageWidth,height:r._stageHeight,iframelimit:r._options.maxVideoSize}),r.trigger(i.RESCALE),"function"==typeof o&&o.call(r)};return a.call(r),this},refreshImage:function(){return this._scaleImage(),this._options.imagePan&&this.addPan(),this},_preload:function(){if(this._options.preload){var e,t,n,s=this.getNext();try{for(t=this._options.preload;t>0;t--)e=new i.Picture,n=this.getData(s),e.preload(this.isFullscreen()&&n.big?n.big:n.image),s=this.getNext(s)}catch(o){}}},show:function(n,s,o){var r=this._options.swipe;if(r||!(this._queue.length>3||n===!1||!this._options.queue&&this._queue.stalled)){if(n=m.max(0,m.min(parseInt(n,10),this.getDataLength()-1)),s="undefined"!=typeof s?!!s:n<this.getIndex(),o=o||!1,!o&&i.History)return void i.History.set(n.toString());if(this.finger&&n!==this._active&&(this.finger.to=-(n*this.finger.width),this.finger.index=n),this._active=n,r){var l=this.getData(n),c=this;if(!l)return;var d=this.isFullscreen()&&l.big?l.big:l.image||l.iframe,h=this._controls.slides[n],u=h.isCached(d),p=this._thumbnails[n],f={cached:u,index:n,rewind:s,imageTarget:h.image,thumbTarget:p.image,galleriaData:l};this.trigger(e.extend(f,{type:i.LOADSTART})),c.$("container").removeClass("videoplay");var g=function(){c._layers[n].innerHTML=c.getData().layer||"",c.trigger(e.extend(f,{type:i.LOADFINISH})),c._playCheck()};c._preload(),t.setTimeout(function(){h.ready&&e(h.image).attr("src")==d?(c.trigger(e.extend(f,{type:i.IMAGE})),g()):(l.iframe&&!l.image&&(h.isIframe=!0),h.load(d,function(t){f.imageTarget=t.image,c._scaleImage(t,g).trigger(e.extend(f,{type:i.IMAGE})),g()}))},100)}else a.push.call(this._queue,{index:n,rewind:s}),this._queue.stalled||this._show();return this}},_show:function(){var s=this,o=this._queue[0],r=this.getData(o.index);if(r){var l=this.isFullscreen()&&r.big?r.big:r.image||r.iframe,c=this._controls.getActive(),d=this._controls.getNext(),h=d.isCached(l),u=this._thumbnails[o.index],p=function(){e(d.image).trigger("mouseup")};s.$("container").toggleClass("iframe",!!r.isIframe).removeClass("videoplay");var f=function(o,r,l,c,d){return function(){var h;F.active=!1,$.toggleQuality(r.image,s._options.imageQuality),s._layers[s._controls.active].innerHTML="",e(l.container).css({zIndex:0,opacity:0}).show(),e(l.container).find("iframe, .galleria-videoicon").remove(),e(s._controls.frames[s._controls.active].container).hide(),e(r.container).css({zIndex:1,left:0,top:0}).show(),s._controls.swap(),s._options.imagePan&&s.addPan(r.image),(o.iframe&&o.image||o.link||s._options.lightbox||s._options.clicknext)&&e(r.image).css({cursor:"pointer"}).on("mouseup",function(r){if(!("number"==typeof r.which&&r.which>1)){if(o.iframe){s.isPlaying()&&s.pause();var a=s._controls.frames[s._controls.active],l=s._stageWidth,c=s._stageHeight;return e(a.container).css({width:l,height:c,opacity:0}).show().animate({opacity:1},200),void t.setTimeout(function(){a.load(o.iframe+(o.video?"&autoplay=1":""),{width:l,height:c},function(e){s.$("container").addClass("videoplay"),e.scale({width:s._stageWidth,height:s._stageHeight,iframelimit:o.video?s._options.maxVideoSize:n})})},100)}return s._options.clicknext&&!i.TOUCH?(s._options.pauseOnInteraction&&s.pause(),void s.next()):o.link?void(s._options.popupLinks?h=t.open(o.link,"_blank"):t.location.href=o.link):void(s._options.lightbox&&s.openLightbox())}}),s._playCheck(),s.trigger({type:i.IMAGE,index:c.index,imageTarget:r.image,thumbTarget:d.image,galleriaData:o}),a.shift.call(s._queue),s._queue.stalled=!1,s._queue.length&&s._show()}}(r,d,c,o,u);this._options.carousel&&this._options.carouselFollow&&this._carousel.follow(o.index),s._preload(),$.show(d.container),d.isIframe=r.iframe&&!r.image,e(s._thumbnails[o.index].container).addClass("active").siblings(".active").removeClass("active"),s.trigger({type:i.LOADSTART,cached:h,index:o.index,rewind:o.rewind,imageTarget:d.image,thumbTarget:u.image,galleriaData:r}),s._queue.stalled=!0,d.load(l,function(t){var a=e(s._layers[1-s._controls.active]).html(r.layer||"").hide();s._scaleImage(t,{complete:function(t){"image"in c&&$.toggleQuality(c.image,!1),$.toggleQuality(t.image,!1),s.removePan(),s.setInfo(o.index),s.setCounter(o.index),r.layer&&(a.show(),(r.iframe&&r.image||r.link||s._options.lightbox||s._options.clicknext)&&a.css("cursor","pointer").off("mouseup").mouseup(p)),r.video&&r.image&&N(t.container);var l=s._options.transition;if(e.each({initial:null===c.image,touch:i.TOUCH,fullscreen:s.isFullscreen()},function(e,t){return t&&s._options[e+"Transition"]!==n?(l=s._options[e+"Transition"],!1):void 0}),l in F.effects==!1)f();else{var d={prev:c.container,next:t.container,rewind:o.rewind,speed:s._options.transitionSpeed||400};F.active=!0,F.init.call(s,l,d,f)}s.trigger({type:i.LOADFINISH,cached:h,index:o.index,rewind:o.rewind,imageTarget:t.image,thumbTarget:s._thumbnails[o.index].image,galleriaData:s.getData(o.index)})}})})}},getNext:function(e){return e="number"==typeof e?e:this.getIndex(),e===this.getDataLength()-1?0:e+1},getPrev:function(e){return e="number"==typeof e?e:this.getIndex(),0===e?this.getDataLength()-1:e-1},next:function(){return this.getDataLength()>1&&this.show(this.getNext(),!1),this},prev:function(){return this.getDataLength()>1&&this.show(this.getPrev(),!0),this},get:function(e){return e in this._dom?this._dom[e]:null},getData:function(e){return e in this._data?this._data[e]:this._data[this._active]},getDataLength:function(){return this._data.length},getIndex:function(){return"number"==typeof this._active?this._active:!1},getStageHeight:function(){return this._stageHeight},getStageWidth:function(){return this._stageWidth},getOptions:function(e){return"undefined"==typeof e?this._options:this._options[e]},setOptions:function(t,i){return"object"==typeof t?e.extend(this._options,t):this._options[t]=i,this},play:function(e){return this._playing=!0,this._playtime=e||this._playtime,this._playCheck(),this.trigger(i.PLAY),this},pause:function(){return this._playing=!1,this.trigger(i.PAUSE),this},playToggle:function(e){return this._playing?this.pause():this.play(e)},isPlaying:function(){return this._playing},isFullscreen:function(){return this._fullscreen.active},_playCheck:function(){var e=this,t=0,n=20,s=$.timestamp(),o="play"+this._id;if(this._playing){this.clearTimer(o);var r=function(){return t=$.timestamp()-s,t>=e._playtime&&e._playing?(e.clearTimer(o),void e.next()):void(e._playing&&(e.trigger({type:i.PROGRESS,percent:m.ceil(t/e._playtime*100),seconds:m.floor(t/1e3),milliseconds:t}),e.addTimer(o,r,n)))};e.addTimer(o,r,n)}},setPlaytime:function(e){return this._playtime=e,this},setIndex:function(e){return this._active=e,this},setCounter:function(e){if("number"==typeof e?e++:"undefined"==typeof e&&(e=this.getIndex()+1),this.get("current").innerHTML=e,b){var t=this.$("counter"),i=t.css("opacity");1===parseInt(i,10)?$.removeAlpha(t[0]):this.$("counter").css("opacity",i)}return this},setInfo:function(t){var i=this,n=this.getData(t);return e.each(["title","description"],function(e,t){var s=i.$("info-"+t);n[t]?s[n[t].length?"show":"hide"]().html(n[t]):s.empty().hide()}),this},hasInfo:function(e){var t,i="title description".split(" ");for(t=0;i[t];t++)if(this.getData(e)[i[t]])return!0;return!1},jQuery:function(t){var i=this,n=[];e.each(t.split(","),function(t,s){s=e.trim(s),i.get(s)&&n.push(s)});var s=e(i.get(n.shift()));return e.each(n,function(e,t){s=s.add(i.get(t))}),s},$:function(){return this.jQuery.apply(this,$.array(arguments))}},e.each(k,function(e,t){var n=/_/.test(t)?t.replace(/_/g,""):t;i[t.toUpperCase()]="galleria."+n}),e.extend(i,{IE9:9===b,IE8:8===b,IE7:7===b,IE6:6===b,IE:b,WEBKIT:/webkit/.test(u),CHROME:/chrome/.test(u),SAFARI:/safari/.test(u)&&!/chrome/.test(u),QUIRK:b&&s.compatMode&&"BackCompat"===s.compatMode,MAC:/mac/.test(navigator.platform.toLowerCase()),OPERA:!!t.opera,IPHONE:/iphone/.test(u),IPAD:/ipad/.test(u),ANDROID:/android/.test(u),TOUCH:"ontouchstart"in s}),i.addTheme=function(n){n.name||i.raise("No theme name specified"),"object"!=typeof n.defaults?n.defaults={}:n.defaults=x(n.defaults);var s,o=!1;return"string"==typeof n.css?(e("link").each(function(e,t){return s=new RegExp(n.css),s.test(t.href)?(o=!0,O(n),!1):void 0}),o||e(function(){var r=0,a=function(){e("script").each(function(e,i){s=new RegExp("galleria\\."+n.name.toLowerCase()+"\\."),s.test(i.src)&&(o=i.src.replace(/[^\/]*$/,"")+n.css,t.setTimeout(function(){$.loadCSS(o,"galleria-theme-"+n.name,function(){O(n)})},1))}),o||(r++>5?i.raise("No theme CSS loaded"):t.setTimeout(a,500))};a()})):O(n),n},i.loadTheme=function(n){if(!e("script").filter(function(){return e(this).attr("src")==n}).length){var s,o=!1;return e(t).load(function(){o||(s=t.setTimeout(function(){o||i.raise("Galleria had problems loading theme at "+n+". Please check theme path or load manually.",!0)},2e4))}),$.loadScript(n,function(){o=!0,t.clearTimeout(s)}),i}},i.get=function(e){return M[e]?M[e]:"number"!=typeof e?M:void i.raise("Gallery index "+e+" not found")},i.configure=function(t,n){var s={};return"string"==typeof t&&n?(s[t]=n,t=s):e.extend(s,t),i.configure.options=s,e.each(i.get(),function(e,t){t.setOptions(s)}),i},i.configure.options={},i.on=function(t,n){if(t){n=n||g;var s=t+n.toString().replace(/\s/g,"")+$.timestamp();return e.each(i.get(),function(e,i){i._binds.push(s),i.bind(t,n)}),i.on.binds.push({type:t,callback:n,hash:s}),i}},i.on.binds=[],i.run=function(t,n){return e.isFunction(n)&&(n={extend:n}),e(t||"#galleria").galleria(n),i},i.addTransition=function(e,t){return F.effects[e]=t,i},i.utils=$,i.log=function(){var i=$.array(arguments);if(!("console"in t&&"log"in t.console))return t.alert(i.join("<br>"));try{return t.console.log.apply(t.console,i)}catch(n){e.each(i,function(){t.console.log(this)})}},i.ready=function(t){return"function"!=typeof t?i:(e.each(E,function(e,i){t.call(i,i._options)}),i.ready.callbacks.push(t),i)},i.ready.callbacks=[],i.raise=function(t,i){var n=i?"Fatal error":"Error",s={color:"#fff",position:"absolute",top:0,left:0,zIndex:1e5},o=function(t){var o='<div style="padding:4px;margin:0 0 2px;background:#'+(i?"811":"222")+';">'+(i?"<strong>"+n+": </strong>":"")+t+"</div>";e.each(M,function(){var e=this.$("errors"),t=this.$("target");e.length||(t.css("position","relative"),e=this.addElement("errors").appendChild("target","errors").$("errors").css(s)),e.append(o)}),M.length||e("<div>").css(e.extend(s,{position:"fixed"})).append(o).appendTo(y().body)};if(c){if(o(t),i)throw new Error(n+": "+t)}else if(i){if(A)return;A=!0,i=!1,o("Gallery could not load.")}},i.version=l,i.getLoadedThemes=function(){return e.map(L,function(e){return e.name})},i.requires=function(e,t){return t=t||"You need to upgrade Galleria to version "+e+" to use one or more components.",i.version<e&&i.raise(t,!0),i},i.Picture=function(t){this.id=t||null,this.image=null,this.container=$.create("galleria-image"),e(this.container).css({overflow:"hidden",position:"relative"}),this.original={width:0,height:0},this.ready=!1,this.isIframe=!1},i.Picture.prototype={cache:{},show:function(){$.show(this.image)},hide:function(){$.moveOut(this.image)},clear:function(){this.image=null},isCached:function(e){return!!this.cache[e]},preload:function(t){e(new Image).load(function(e,t){return function(){t[e]=e}}(t,this.cache)).attr("src",t)},load:function(n,s,o){if("function"==typeof s&&(o=s,s=null),this.isIframe){var r="if"+(new Date).getTime(),a=this.image=e("<iframe>",{src:n,frameborder:0,id:r,allowfullscreen:!0,css:{visibility:"hidden"}})[0];return s&&e(a).css(s),e(this.container).find("iframe,img").remove(),this.container.appendChild(this.image),e("#"+r).load(function(i,n){return function(){t.setTimeout(function(){e(i.image).css("visibility","visible"),"function"==typeof n&&n.call(i,i)},10)}}(this,o)),this.container}this.image=new Image,i.IE8&&e(this.image).css("filter","inherit"),i.IE||i.CHROME||i.SAFARI||e(this.image).css("image-rendering","optimizequality");var l=!1,c=!1,d=e(this.container),u=e(this.image),p=function(){l?h?e(this).attr("src",h):i.raise("Image not found: "+n):(l=!0,t.setTimeout(function(e,t){return function(){e.attr("src",t+(t.indexOf("?")>-1?"&":"?")+$.timestamp())}}(e(this),n),50))},f=function(n,o,r){return function(){var a=function(){e(this).off("load"),n.original=s||{height:this.height,width:this.width},i.HAS3D&&(this.style.MozTransform=this.style.webkitTransform="translate3d(0,0,0)"),d.append(this),n.cache[r]=r,"function"==typeof o&&t.setTimeout(function(){o.call(n,n)},1)};this.width&&this.height?a.call(this):!function(t){$.wait({until:function(){return t.width&&t.height},success:function(){a.call(t)},error:function(){c?i.raise("Could not extract width/height from image: "+t.src+". Traced measures: width:"+t.width+"px, height: "+t.height+"px."):(e(new Image).load(f).attr("src",t.src),c=!0)},timeout:100})}(this)}}(this,o,n);return d.find("iframe,img").remove(),u.css("display","block"),$.hide(this.image),e.each("minWidth minHeight maxWidth maxHeight".split(" "),function(e,t){u.css(t,/min/.test(t)?"0":"none")}),u.load(f).on("error",p).attr("src",n),this.container},scale:function(t){var s=this;if(t=e.extend({width:0,height:0,min:n,max:n,margin:0,complete:g,position:"center",crop:!1,canvas:!1,iframelimit:n},t),this.isIframe){var o,r,a=t.width,l=t.height;if(t.iframelimit){var c=m.min(t.iframelimit/a,t.iframelimit/l);1>c?(o=a*c,r=l*c,e(this.image).css({top:l/2-r/2,left:a/2-o/2,position:"absolute"})):e(this.image).css({top:0,left:0})}e(this.image).width(o||a).height(r||l).removeAttr("width").removeAttr("height"),e(this.container).width(a).height(l),t.complete.call(s,s);try{this.image.contentWindow&&e(this.image.contentWindow).trigger("resize")}catch(d){}return this.container}if(!this.image)return this.container;var h,u,p,f=e(s.container);return $.wait({until:function(){return h=t.width||f.width()||$.parseValue(f.css("width")),u=t.height||f.height()||$.parseValue(f.css("height")),h&&u},success:function(){var i=(h-2*t.margin)/s.original.width,n=(u-2*t.margin)/s.original.height,o=m.min(i,n),r=m.max(i,n),a={"true":r,width:i,height:n,"false":o,landscape:s.original.width>s.original.height?r:o,portrait:s.original.width<s.original.height?r:o},l=a[t.crop.toString()],c="";t.max&&(l=m.min(t.max,l)),t.min&&(l=m.max(t.min,l)),e.each(["width","height"],function(t,i){e(s.image)[i](s[i]=s.image[i]=m.round(s.original[i]*l))}),e(s.container).width(h).height(u),t.canvas&&I&&(I.elem.width=s.width,I.elem.height=s.height,c=s.image.src+":"+s.width+"x"+s.height,s.image.src=I.cache[c]||function(e){I.context.drawImage(s.image,0,0,s.original.width*l,s.original.height*l);try{return p=I.elem.toDataURL(),I.length+=p.length,I.cache[e]=p,p}catch(t){return s.image.src}}(c));var d={},f={},g=function(t,i,n){var o=0;if(/\%/.test(t)){var r=parseInt(t,10)/100,a=s.image[i]||e(s.image)[i]();o=m.ceil(-1*a*r+n*r)}else o=$.parseValue(t);return o},v={top:{top:0},left:{left:0},right:{left:"100%"},bottom:{top:"100%"}};e.each(t.position.toLowerCase().split(" "),function(e,t){"center"===t&&(t="50%"),d[e?"top":"left"]=t}),e.each(d,function(t,i){v.hasOwnProperty(i)&&e.extend(f,v[i])}),d=d.top?e.extend(d,f):f,d=e.extend({top:"50%",left:"50%"},d),e(s.image).css({position:"absolute",top:g(d.top,"height",u),left:g(d.left,"width",h)}),s.show(),s.ready=!0,t.complete.call(s,s)},error:function(){i.raise("Could not scale image: "+s.image.src)},timeout:1e3}),this}},e.extend(e.easing,{galleria:function(e,t,i,n,s){return(t/=s/2)<1?n/2*t*t*t+i:n/2*((t-=2)*t*t+2)+i},galleriaIn:function(e,t,i,n,s){return n*(t/=s)*t+i},galleriaOut:function(e,t,i,n,s){return-n*(t/=s)*(t-2)+i}}),i.Finger=function(){var n=(m.abs,i.HAS3D=function(){var t,i,n=s.createElement("p"),o=["webkit","O","ms","Moz",""],r=0,a="transform";for(y().html.insertBefore(n,null);o[r];r++)i=o[r]?o[r]+"Transform":a,void 0!==n.style[i]&&(n.style[i]="translate3d(1px,1px,1px)",t=e(n).css(o[r]?"-"+o[r].toLowerCase()+"-"+a:a));return y().html.removeChild(n),void 0!==t&&t.length>0&&"none"!==t}()),r=function(){var e="RequestAnimationFrame";return t.requestAnimationFrame||t["webkit"+e]||t["moz"+e]||t["o"+e]||t["ms"+e]||function(e){t.setTimeout(e,1e3/60)}}(),a=function(i,s){if(this.config={start:0,duration:500,onchange:function(){},oncomplete:function(){},easing:function(e,t,i,n,s){return-n*((t=t/s-1)*t*t*t-1)+i}},this.easeout=function(e,t,i,n,s){return n*((t=t/s-1)*t*t*t*t+1)+i},i.children.length){var o=this;e.extend(this.config,s),this.elem=i,this.child=i.children[0],this.to=this.pos=0,this.touching=!1,this.start={},this.index=this.config.start,this.anim=0,this.easing=this.config.easing,n||(this.child.style.position="absolute",this.elem.style.position="relative"),e.each(["ontouchstart","ontouchmove","ontouchend","setup"],function(e,t){o[t]=function(e){return function(){e.apply(o,arguments)}}(o[t])}),this.setX=function(){var e=o.child.style;return n?void(e.MozTransform=e.webkitTransform=e.transform="translate3d("+o.pos+"px,0,0)"):void(e.left=o.pos+"px")},e(i).on("touchstart",this.ontouchstart),e(t).on("resize",this.setup),e(t).on("orientationchange",this.setup),this.setup(),!function a(){r(a),o.loop.call(o)}()}};return a.prototype={constructor:a,setup:function(){this.width=e(this.elem).width(),this.length=m.ceil(e(this.child).width()/this.width),0!==this.index&&(this.index=m.max(0,m.min(this.index,this.length-1)),this.pos=this.to=-this.width*this.index)},setPosition:function(e){this.pos=e,this.to=e},ontouchstart:function(e){var t=e.originalEvent.touches;this.start={pageX:t[0].pageX,pageY:t[0].pageY,time:+new Date},this.isScrolling=null,this.touching=!0,this.deltaX=0,o.on("touchmove",this.ontouchmove),o.on("touchend",this.ontouchend)},ontouchmove:function(e){var t=e.originalEvent.touches;
t&&t.length>1||e.scale&&1!==e.scale||(this.deltaX=t[0].pageX-this.start.pageX,null===this.isScrolling&&(this.isScrolling=!!(this.isScrolling||m.abs(this.deltaX)<m.abs(t[0].pageY-this.start.pageY))),this.isScrolling||(e.preventDefault(),this.deltaX/=!this.index&&this.deltaX>0||this.index==this.length-1&&this.deltaX<0?m.abs(this.deltaX)/this.width+1.8:1,this.to=this.deltaX-this.index*this.width),e.stopPropagation())},ontouchend:function(){this.touching=!1;var e=+new Date-this.start.time<250&&m.abs(this.deltaX)>40||m.abs(this.deltaX)>this.width/2,t=!this.index&&this.deltaX>0||this.index==this.length-1&&this.deltaX<0;this.isScrolling||this.show(this.index+(e&&!t?this.deltaX<0?1:-1:0)),o.off("touchmove",this.ontouchmove),o.off("touchend",this.ontouchend)},show:function(e){e!=this.index?this.config.onchange.call(this,e):this.to=-(e*this.width)},moveTo:function(e){e!=this.index&&(this.pos=this.to=-(e*this.width),this.index=e)},loop:function(){var e=this.to-this.pos,t=1;if(this.width&&e&&(t=m.max(.5,m.min(1.5,m.abs(e/this.width)))),this.touching||m.abs(e)<=1)this.pos=this.to,e=0,this.anim&&!this.touching&&this.config.oncomplete(this.index),this.anim=0,this.easing=this.config.easing;else{this.anim||(this.anim={start:this.pos,time:+new Date,distance:e,factor:t,destination:this.to});var i=+new Date-this.anim.time,n=this.config.duration*this.anim.factor;if(i>n||this.anim.destination!=this.to)return this.anim=0,void(this.easing=this.easeout);this.pos=this.easing(null,i,this.anim.start,this.anim.distance,n)}this.setX()}},a}(),e.fn.galleria=function(t){var n=this.selector;return e(this).length?this.each(function(){e.data(this,"galleria")&&(e.data(this,"galleria").destroy(),e(this).find("*").hide()),e.data(this,"galleria",(new i).init(this,t))}):(e(function(){e(n).length?e(n).galleria(t):i.utils.wait({until:function(){return e(n).length},success:function(){e(n).galleria(t)},error:function(){i.raise('Init failed: Galleria could not find the element "'+n+'".')},timeout:5e3})}),this)},"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=i:(t.Galleria=i,"function"==typeof define&&define.amd&&define("galleria",["jquery"],function(){return i}))}(jQuery,this),function(e){Galleria.addTheme({name:"classic",author:"Galleria",defaults:{transition:"slide",thumbCrop:"height",_toggleInfo:!0},init:function(t){Galleria.requires(1.4,"This version of Classic theme requires Galleria 1.4 or later"),this.addElement("info-link","info-close"),this.append({info:["info-link","info-close"]});var i=this.$("info-link,info-close,info-text"),n=Galleria.TOUCH;this.$("loader,counter").show().css("opacity",.4),n||(this.addIdleState(this.get("image-nav-left"),{left:-50}),this.addIdleState(this.get("image-nav-right"),{right:-50}),this.addIdleState(this.get("counter"),{opacity:0})),t._toggleInfo===!0?i.bind("click:fast",function(){i.toggle()}):(i.show(),this.$("info-link, info-close").hide()),this.bind("thumbnail",function(t){n?e(t.thumbTarget).css("opacity",this.getIndex()?1:.6).bind("click:fast",function(){e(this).css("opacity",1).parent().siblings().children().css("opacity",.6)}):(e(t.thumbTarget).css("opacity",.6).parent().hover(function(){e(this).not(".active").children().stop().fadeTo(100,1)},function(){e(this).not(".active").children().stop().fadeTo(400,.6)}),t.index===this.getIndex()&&e(t.thumbTarget).css("opacity",1))});var s=function(t){e(t.thumbTarget).css("opacity",1).parent().siblings().children().css("opacity",.6)};this.bind("loadstart",function(e){e.cached||this.$("loader").show().fadeTo(200,.4),window.setTimeout(function(){s(e)},n?300:0),this.$("info").toggle(this.hasInfo())}),this.bind("loadfinish",function(){this.$("loader").fadeOut(200)})}})}(jQuery),/*!
 * Lightbox v2.8.1
 * by Lokesh Dhakar
 *
 * More info:
 * http://lokeshdhakar.com/projects/lightbox2/
 *
 * Copyright 2007, 2015 Lokesh Dhakar
 * Released under the MIT license
 * https://github.com/lokesh/lightbox2/blob/master/LICENSE
 */
!function(e,t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?module.exports=t(require("jquery")):e.lightbox=t(e.jQuery)}(this,function(e){function t(t){this.album=[],this.currentImageIndex=void 0,this.init(),this.options=e.extend({},this.constructor.defaults),this.option(t)}return t.defaults={albumLabel:"Image %1 of %2",alwaysShowNavOnTouchDevices:!1,fadeDuration:500,fitImagesInViewport:!0,positionFromTop:50,resizeDuration:700,showImageNumberLabel:!0,wrapAround:!1},t.prototype.option=function(t){e.extend(this.options,t)},t.prototype.imageCountLabel=function(e,t){return this.options.albumLabel.replace(/%1/g,e).replace(/%2/g,t)},t.prototype.init=function(){this.enable(),this.build()},t.prototype.enable=function(){var t=this;e("body").on("click","a[rel^=lightbox], area[rel^=lightbox], a[data-lightbox], area[data-lightbox]",function(i){return t.start(e(i.currentTarget)),!1})},t.prototype.build=function(){var t=this;e('<div id="lightboxOverlay" class="lightboxOverlay"></div><div id="lightbox" class="lightbox"><div class="lb-outerContainer"><div class="lb-container"><img class="lb-image" src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" /><div class="lb-nav"><a class="lb-prev" href="" ></a><a class="lb-next" href="" ></a></div><div class="lb-loader"><a class="lb-cancel"></a></div></div></div><div class="lb-dataContainer"><div class="lb-data"><div class="lb-details"><span class="lb-caption"></span><span class="lb-number"></span></div><div class="lb-closeContainer"><a class="lb-close"></a></div></div></div></div>').appendTo(e("body")),this.$lightbox=e("#lightbox"),this.$overlay=e("#lightboxOverlay"),this.$outerContainer=this.$lightbox.find(".lb-outerContainer"),this.$container=this.$lightbox.find(".lb-container"),this.containerTopPadding=parseInt(this.$container.css("padding-top"),10),this.containerRightPadding=parseInt(this.$container.css("padding-right"),10),this.containerBottomPadding=parseInt(this.$container.css("padding-bottom"),10),this.containerLeftPadding=parseInt(this.$container.css("padding-left"),10),this.$overlay.hide().on("click",function(){return t.end(),!1}),this.$lightbox.hide().on("click",function(i){return"lightbox"===e(i.target).attr("id")&&t.end(),!1}),this.$outerContainer.on("click",function(i){return"lightbox"===e(i.target).attr("id")&&t.end(),!1}),this.$lightbox.find(".lb-prev").on("click",function(){return 0===t.currentImageIndex?t.changeImage(t.album.length-1):t.changeImage(t.currentImageIndex-1),!1}),this.$lightbox.find(".lb-next").on("click",function(){return t.currentImageIndex===t.album.length-1?t.changeImage(0):t.changeImage(t.currentImageIndex+1),!1}),this.$lightbox.find(".lb-loader, .lb-close").on("click",function(){return t.end(),!1})},t.prototype.start=function(t){function i(e){n.album.push({link:e.attr("href"),title:e.attr("data-title")||e.attr("title")})}var n=this,s=e(window);s.on("resize",e.proxy(this.sizeOverlay,this)),e("select, object, embed").css({visibility:"hidden"}),this.sizeOverlay(),this.album=[];var o,r=0,a=t.attr("data-lightbox");if(a){o=e(t.prop("tagName")+'[data-lightbox="'+a+'"]');for(var l=0;l<o.length;l=++l)i(e(o[l])),o[l]===t[0]&&(r=l)}else if("lightbox"===t.attr("rel"))i(t);else{o=e(t.prop("tagName")+'[rel="'+t.attr("rel")+'"]');for(var c=0;c<o.length;c=++c)i(e(o[c])),o[c]===t[0]&&(r=c)}var d=s.scrollTop()+this.options.positionFromTop,h=s.scrollLeft();this.$lightbox.css({top:d+"px",left:h+"px"}).fadeIn(this.options.fadeDuration),this.changeImage(r)},t.prototype.changeImage=function(t){var i=this;this.disableKeyboardNav();var n=this.$lightbox.find(".lb-image");this.$overlay.fadeIn(this.options.fadeDuration),e(".lb-loader").fadeIn("slow"),this.$lightbox.find(".lb-image, .lb-nav, .lb-prev, .lb-next, .lb-dataContainer, .lb-numbers, .lb-caption").hide(),this.$outerContainer.addClass("animating");var s=new Image;s.onload=function(){var o,r,a,l,c,d,h;n.attr("src",i.album[t].link),o=e(s),n.width(s.width),n.height(s.height),i.options.fitImagesInViewport&&(h=e(window).width(),d=e(window).height(),c=h-i.containerLeftPadding-i.containerRightPadding-20,l=d-i.containerTopPadding-i.containerBottomPadding-120,i.options.maxWidth&&i.options.maxWidth<c&&(c=i.options.maxWidth),i.options.maxHeight&&i.options.maxHeight<c&&(l=i.options.maxHeight),(s.width>c||s.height>l)&&(s.width/c>s.height/l?(a=c,r=parseInt(s.height/(s.width/a),10),n.width(a),n.height(r)):(r=l,a=parseInt(s.width/(s.height/r),10),n.width(a),n.height(r)))),i.sizeContainer(n.width(),n.height())},s.src=this.album[t].link,this.currentImageIndex=t},t.prototype.sizeOverlay=function(){this.$overlay.width(e(window).width()).height(e(document).height())},t.prototype.sizeContainer=function(e,t){function i(){n.$lightbox.find(".lb-dataContainer").width(r),n.$lightbox.find(".lb-prevLink").height(a),n.$lightbox.find(".lb-nextLink").height(a),n.showImage()}var n=this,s=this.$outerContainer.outerWidth(),o=this.$outerContainer.outerHeight(),r=e+this.containerLeftPadding+this.containerRightPadding,a=t+this.containerTopPadding+this.containerBottomPadding;s!==r||o!==a?this.$outerContainer.animate({width:r,height:a},this.options.resizeDuration,"swing",function(){i()}):i()},t.prototype.showImage=function(){this.$lightbox.find(".lb-loader").stop(!0).hide(),this.$lightbox.find(".lb-image").fadeIn("slow"),this.updateNav(),this.updateDetails(),this.preloadNeighboringImages(),this.enableKeyboardNav()},t.prototype.updateNav=function(){var e=!1;try{document.createEvent("TouchEvent"),e=!!this.options.alwaysShowNavOnTouchDevices}catch(t){}this.$lightbox.find(".lb-nav").show(),this.album.length>1&&(this.options.wrapAround?(e&&this.$lightbox.find(".lb-prev, .lb-next").css("opacity","1"),this.$lightbox.find(".lb-prev, .lb-next").show()):(this.currentImageIndex>0&&(this.$lightbox.find(".lb-prev").show(),e&&this.$lightbox.find(".lb-prev").css("opacity","1")),this.currentImageIndex<this.album.length-1&&(this.$lightbox.find(".lb-next").show(),e&&this.$lightbox.find(".lb-next").css("opacity","1"))))},t.prototype.updateDetails=function(){var t=this;if("undefined"!=typeof this.album[this.currentImageIndex].title&&""!==this.album[this.currentImageIndex].title&&this.$lightbox.find(".lb-caption").html(this.album[this.currentImageIndex].title).fadeIn("fast").find("a").on("click",function(){void 0!==e(this).attr("target")?window.open(e(this).attr("href"),e(this).attr("target")):location.href=e(this).attr("href")}),this.album.length>1&&this.options.showImageNumberLabel){var i=this.imageCountLabel(this.currentImageIndex+1,this.album.length);this.$lightbox.find(".lb-number").text(i).fadeIn("fast")}else this.$lightbox.find(".lb-number").hide();this.$outerContainer.removeClass("animating"),this.$lightbox.find(".lb-dataContainer").fadeIn(this.options.resizeDuration,function(){return t.sizeOverlay()})},t.prototype.preloadNeighboringImages=function(){if(this.album.length>this.currentImageIndex+1){var e=new Image;e.src=this.album[this.currentImageIndex+1].link}if(this.currentImageIndex>0){var t=new Image;t.src=this.album[this.currentImageIndex-1].link}},t.prototype.enableKeyboardNav=function(){e(document).on("keyup.keyboard",e.proxy(this.keyboardAction,this))},t.prototype.disableKeyboardNav=function(){e(document).off(".keyboard")},t.prototype.keyboardAction=function(e){var t=27,i=37,n=39,s=e.keyCode,o=String.fromCharCode(s).toLowerCase();s===t||o.match(/x|o|c/)?this.end():"p"===o||s===i?0!==this.currentImageIndex?this.changeImage(this.currentImageIndex-1):this.options.wrapAround&&this.album.length>1&&this.changeImage(this.album.length-1):("n"===o||s===n)&&(this.currentImageIndex!==this.album.length-1?this.changeImage(this.currentImageIndex+1):this.options.wrapAround&&this.album.length>1&&this.changeImage(0))},t.prototype.end=function(){this.disableKeyboardNav(),e(window).off("resize",this.sizeOverlay),this.$lightbox.fadeOut(this.options.fadeDuration),this.$overlay.fadeOut(this.options.fadeDuration),e("select, object, embed").css({visibility:"visible"})},new t}),/**
 * @license almond 0.3.1 Copyright (c) 2011-2014, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */
// CodeMirror, copyright (c) by Marijn Haverbeke and others
// CodeMirror, copyright (c) by Marijn Haverbeke and others
/*!I * HTMLHint v0.9.13L * https://github.com/yaniswang/HTMLHintw *g * (c) 2014-2016 Yanis Wang <yanis.wang@gmail.com>.g * MIT Licensed  */
/**
 * @license RequireJS text 2.0.14 Copyright (c) 2010-2014, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/text for details
 */
function(e,t){"function"==typeof define&&define.amd?define([],t):e.Redactor=t()}(this,function(){var e,t,i;return function(n){function s(e,t){return w.call(e,t)}function o(e,t){var i,n,s,o,r,a,l,c,d,h,u,p=t&&t.split("/"),f=b.map,m=f&&f["*"]||{};if(e&&"."===e.charAt(0))if(t){for(e=e.split("/"),r=e.length-1,b.nodeIdCompat&&k.test(e[r])&&(e[r]=e[r].replace(k,"")),e=p.slice(0,p.length-1).concat(e),d=0;d<e.length;d+=1)if(u=e[d],"."===u)e.splice(d,1),d-=1;else if(".."===u){if(1===d&&(".."===e[2]||".."===e[0]))break;d>0&&(e.splice(d-1,2),d-=2)}e=e.join("/")}else 0===e.indexOf("./")&&(e=e.substring(2));if((p||m)&&f){for(i=e.split("/"),d=i.length;d>0;d-=1){if(n=i.slice(0,d).join("/"),p)for(h=p.length;h>0;h-=1)if(s=f[p.slice(0,h).join("/")],s&&(s=s[n])){o=s,a=d;break}if(o)break;!l&&m&&m[n]&&(l=m[n],c=d)}!o&&l&&(o=l,a=c),o&&(i.splice(0,a,o),e=i.join("/"))}return e}function r(e,t){return function(){var i=_.call(arguments,0);return"string"!=typeof i[0]&&1===i.length&&i.push(null),p.apply(n,i.concat([e,t]))}}function a(e){return function(t){return o(t,e)}}function l(e){return function(t){g[e]=t}}function c(e){if(s(v,e)){var t=v[e];delete v[e],y[e]=!0,u.apply(n,t)}if(!s(g,e)&&!s(y,e))throw new Error("No "+e);return g[e]}function d(e){var t,i=e?e.indexOf("!"):-1;return i>-1&&(t=e.substring(0,i),e=e.substring(i+1,e.length)),[t,e]}function h(e){return function(){return b&&b.config&&b.config[e]||{}}}var u,p,f,m,g={},v={},b={},y={},w=Object.prototype.hasOwnProperty,_=[].slice,k=/\.js$/;f=function(e,t){var i,n=d(e),s=n[0];return e=n[1],s&&(s=o(s,t),i=c(s)),s?e=i&&i.normalize?i.normalize(e,a(t)):o(e,t):(e=o(e,t),n=d(e),s=n[0],e=n[1],s&&(i=c(s))),{f:s?s+"!"+e:e,n:e,pr:s,p:i}},m={require:function(e){return r(e)},exports:function(e){var t=g[e];return"undefined"!=typeof t?t:g[e]={}},module:function(e){return{id:e,uri:"",exports:g[e],config:h(e)}}},u=function(e,t,i,o){var a,d,h,u,p,b,w=[],_=typeof i;if(o=o||e,"undefined"===_||"function"===_){for(t=!t.length&&i.length?["require","exports","module"]:t,p=0;p<t.length;p+=1)if(u=f(t[p],o),d=u.f,"require"===d)w[p]=m.require(e);else if("exports"===d)w[p]=m.exports(e),b=!0;else if("module"===d)a=w[p]=m.module(e);else if(s(g,d)||s(v,d)||s(y,d))w[p]=c(d);else{if(!u.p)throw new Error(e+" missing "+d);u.p.load(u.n,r(o,!0),l(d),{}),w[p]=g[d]}h=i?i.apply(g[e],w):void 0,e&&(a&&a.exports!==n&&a.exports!==g[e]?g[e]=a.exports:h===n&&b||(g[e]=h))}else e&&(g[e]=i)},e=t=p=function(e,t,i,s,o){if("string"==typeof e)return m[e]?m[e](t):c(f(e,t).f);if(!e.splice){if(b=e,b.deps&&p(b.deps,b.callback),!t)return;t.splice?(e=t,t=i,i=null):e=n}return t=t||function(){},"function"==typeof i&&(i=s,s=o),s?u(n,e,t,i):setTimeout(function(){u(n,e,t,i)},4),p},p.config=function(e){return p(e)},e._defined=g,i=function(e,t,i){if("string"!=typeof e)throw new Error("See almond README: incorrect module build, no module name");t.splice||(i=t,t=[]),!s(g,e)&&!s(v,e)&&(v[e]=[e,t,i])},i.amd={jQuery:!0}}(),i("lib/almond",function(){}),i("jquery",[],function(){return jQuery}),i("underscore",[],function(){return _||FS._}),t.config({baseUrl:"src/js",packages:[{name:"codemirror",location:"lib/codeMirror",main:"lib/codemirror"}],paths:{text:"lib/text"}}),i("main",function(){}),i("jquery-redactor-shim",["jquery"],function(e){"use strict";e.fn.jquery.split(".")[0]<=1&&e.fn.jquery.split(".")[1]<9&&(e.fn.extend({addBack:function(e){return this.add(null===e?this.prevObject:this.prevObject.filter(e))}}),e.support.createHTMLDocument=function(){var e=document.implementation.createHTMLDocument("").body;return e.innerHTML="<form></form><form></form>",2===e.childNodes.length}(),e.parseHTML=function(t,i,n){if("string"!=typeof t)return[];"boolean"==typeof i&&(n=i,i=!1),i=i||(e.support.createHTMLDocument?document.implementation.createHTMLDocument(""):document);var s=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/.exec(t),o=!n&&[];return s?[i.createElement(s[1])]:(s=e.buildFragment([t],[i],o),o&&o.length&&e(o).remove(),e.merge([],s.fragment.childNodes))})}),i("options",["jquery"],function(e){"use strict";return{browseFileURL:"",browseMediaURL:"",browseSiteURL:"",browseComposerSiteURL:"",codeOnly:!1,lang:"en",direction:"ltr",plugins:!1,focus:!1,focusEnd:!1,placeholder:!1,visual:!0,tabindex:!1,minHeight:!1,maxHeight:!1,linebreaks:!1,replaceDivs:!1,paragraphize:!1,cleanStyleOnEnter:!1,enterKey:!0,resizable:!1,cleanOnPaste:!0,cleanSpaces:!0,pastePlainText:!1,linkTooltip:!0,linkProtocol:"http",linkNofollow:!1,linkSize:50,imageEditable:!0,imageLink:!0,imagePosition:!0,imageFloatMargin:"10px",imageResizable:!0,imageUpload:null,imageUploadParam:"file",uploadImageField:!1,dragImageUpload:!0,fileUpload:null,fileUploadParam:"file",dragFileUpload:!0,s3:!1,convertLinks:!0,convertUrlLinks:!0,convertImageLinks:!0,convertVideoLinks:!0,preSpaces:4,tabAsSpaces:!1,tabKey:!0,scrollTarget:!1,toolbar:!0,toolbarFixed:!0,toolbarFixedTarget:document,toolbarFixedTopOffset:0,toolbarExternal:!1,toolbarOverflow:!1,source:!0,buttons:["html","undo","redo","formatting","styles","bold","italic","underline","deleted","unorderedlist","orderedlist","outdent","indent","image","media","embed","file","table","link","alignment","fontcolor","backcolor","fontfamily","fontsize","horizontalrule","textdirection","fullscreen"],buttonsHide:[],buttonsHideOnMobile:[],formatting:["p","blockquote","pre","h1","h2","h3","h4","h5","h6"],formattingAdd:!1,tabifier:!0,deniedTags:[],allowedTags:!1,paragraphizeBlocks:["table","div","pre","form","ul","ol","h1","h2","h3","h4","h5","h6","dl","blockquote","figcaption","address","section","header","footer","aside","article","object","style","script","iframe","select","input","textarea","button","option","map","area","math","hr","fieldset","legend","hgroup","nav","figure","details","menu","summary","p"],removeComments:!1,replaceTags:[["strike","del"],["b","strong"]],replaceStyles:[["font-weight:\\s?bold","strong"],["font-style:\\s?italic","em"],["text-decoration:\\s?underline","u"],["text-decoration:\\s?line-through","del"]],removeDataAttr:!1,removeAttr:!1,allowedAttr:!1,removeWithoutAttr:!1,removeEmpty:!1,activeButtons:["deleted","italic","bold","underline","unorderedlist","orderedlist","alignleft","aligncenter","alignright","justify"],activeButtonsStates:{b:"bold",strong:"bold",i:"italic",em:"italic",del:"deleted",strike:"deleted",ul:"unorderedlist",ol:"orderedlist",u:"underline"},shortcuts:{"ctrl+shift+m, meta+shift+m":{func:"inline.removeFormat"},"ctrl+b, meta+b":{func:"inline.format",params:["bold"]},"ctrl+i, meta+i":{func:"inline.format",params:["italic"]},"ctrl+h, meta+h":{func:"inline.format",params:["superscript"]},"ctrl+l, meta+l":{func:"inline.format",params:["subscript"]},"ctrl+k, meta+k":{func:"link.show"},"ctrl+shift+7":{func:"list.toggle",params:["orderedlist"]},"ctrl+shift+8":{func:"list.toggle",params:["unorderedlist"]}},shortcutsAdd:!1,buffer:[],rebuffer:[],emptyHtml:"<p>&#x200b;</p>",invisibleSpace:"&#x200b;",imageTypes:["image/png","image/jpeg","image/gif"],indentValue:parseFloat(e(document.body).css("font-size")),verifiedTags:["a","img","b","strong","sub","sup","i","em","u","small","strike","del","cite","ul","ol","li"],inlineTags:["strong","b","u","em","i","code","del","ins","samp","kbd","sup","sub","mark","var","cite","small"],alignmentTags:["P","H1","H2","H3","H4","H5","H6","DL","DT","DD","DIV","TD","BLOCKQUOTE","OUTPUT","FIGCAPTION","ADDRESS","SECTION","HEADER","FOOTER","ASIDE","ARTICLE"],blockLevelElements:["PRE","UL","OL","LI"],langs:{en:{add_head:"Add Head",alignment:"Alignment",align_center:"Center text",align_justify:"Justify text",align_left:"Align text to the left",align_right:"Align text to the right",anchor:"Anchor",backcolor:"Background Color",bold:"Bold",browse:"Browse",browse_composer:"Browse Composer",cancel:"Cancel",center:"Center",choose:"Choose","class":"Class",class_attr_description:"Optional; can be used to assign a particular CSS class to this link.",code:"Code",columns:"Columns",composer_site_page_browse_title:"Browse Composer Site Pages",deleted:"Deleted",delete_column:"Delete Column",delete_head:"Delete Head",delete_row:"Delete Row",delete_table:"Delete Table",download:"Download",drop_file_here:"Drop file here",edit:"Edit",embed:"Insert Embed",file:"Insert File",filename:"Name (optional)",fontcolor:"Font Color",formatting:"Formatting",header1:"Header 1",header2:"Header 2",header3:"Header 3",header4:"Header 4",header5:"Header 5",header6:"Header 6",horizontalrule:"Insert Horizontal Rule",html:"HTML",id_attr_description:"Give this link a unique ID, allowing users to jump directly to this element from a different spot on the page. Create the jump using another link that starts with a # and points to this ID.",indent:"Indent",insert:"Insert",insert_column_left:"Add Column Left",insert_column_right:"Add Column Right",insert_row_above:"Add Row Above",insert_row_below:"Add Row Below",insert_table:"Insert Table",image:"Insert Image",image_position:"Position",image_web_link:"Image Web Link",italic:"Italic",left:"Left",link:"Link",link_insert:"Insert link",link_edit:"Edit link",link_new_tab:"Open link in new tab",mailto:"Email",media:"Media",media_browse_title:"Browse Media",media_select:"Please select media",none:"None",orderedlist:"Ordered List",or_choose:"Or choose",outdent:"Outdent",paragraph:"Normal text",quote:"Quote",right:"Right",rows:"Rows",save:"Save",site_file:"Site File",site_file_select:"Please select a file",site_file_browse_title:"Browse Site Files",site_page:"Site Page",site_page_select:"Please select a site page",site_page_browse_title:"Browse Site Pages",style:"Style",table:"Table",text:"Text",title:"Title",title_attr_description:"Optional but strongly recommended. This text appears when users hover over the link; it's used to provide additional details about the link target. (Not related to SEO optimization.)",underline:"Underline",unlink:"Unlink",unorderedlist:"Unordered List",upload:"Upload",upload_label:"Drop file here or ",web:"URL",video:"Insert Embed",video_html_code:"Embed Code",_delete:"Delete"}},linkify:{regexps:{youtube:/https?:\/\/(?:[0-9A-Z-]+\.)?(?:youtu\.be\/|youtube\.com\S*[^\w\-\s])([\w\-]{11})(?=[^\w\-]|$)(?![?=&+%\w.\-]*(?:['"][^<>]*>|<\/a>))[?=&+%\w.-]*/gi,vimeo:/https?:\/\/(www\.)?vimeo.com\/(\d+)($|\/)/,image:/((https?|www)[^\s]+\.)(jpe?g|png|gif)(\?[^\s-]+)?/gi,url:/(https?:\/\/(?:www\.|(?!www))[^\s\.]+\.[^\s]{2,}|www\.[^\s]+\.[^\s]{2,})/gi}},codemirror:!1}}),i("modules/alignment",["jquery"],function(e){"use strict";function t(){}return t.prototype={left:function(){this.alignment.set("left")},right:function(){this.alignment.set("right")},center:function(){this.alignment.set("center")},justify:function(){this.alignment.set("justify")},set:function(e){this.utils.browser("msie")||this.$editor[0].focus(),this.buffer.set(),this.selection.save(),this.alignment.blocks=this.selection.getBlocks(),this.alignment.type=e,this.alignment.isLinebreaksOrNoBlocks()?this.alignment.setText():this.alignment.setBlocks(),this.selection.restore(),this.code.sync()},setText:function(){var t=this.selection.wrap("div");e(t).attr("data-tagblock","redactor").css("text-align",this.alignment.type)},setBlocks:function(){e.each(this.alignment.blocks,e.proxy(function(e,t){var i=this.utils.getAlignmentElement(t);i&&(this.alignment.isNeedReplaceElement(i)?this.alignment.replaceElement(i):this.alignment.alignElement(i))},this))},isLinebreaksOrNoBlocks:function(){return this.opts.linebreaks||this.alignment.blocks[0]===!1},isNeedReplaceElement:function(e){return""===this.alignment.type&&"undefined"!=typeof e.data("tagblock")},replaceElement:function(e){e.replaceWith(e.html())},alignElement:function(e){e.css("text-align",this.alignment.type),this.utils.removeEmptyAttr(e,"style")}},t}),i("modules/block",["jquery"],function(e){"use strict";function t(){}return t.prototype={formatting:function(e){this.block.clearStyle=!1;var t,i;"undefined"!=typeof this.formatting[e].data?t="data":"undefined"!=typeof this.formatting[e].attr?t="attr":"undefined"!=typeof this.formatting[e]["class"]&&(t="class"),"undefined"!=typeof this.formatting[e].clear&&(this.block.clearStyle=!0),t&&(i=this.formatting[e][t]),this.block.format(this.formatting[e].tag,t,i)},format:function(t,i,n){"quote"===t&&(t="blockquote");var s=["p","pre","blockquote","h1","h2","h3","h4","h5","h6"];-1!==e.inArray(t,s)&&(this.block.isRemoveInline="pre"===t||-1!==t.search(/h[1-6]/i),this.utils.browser("msie")||this.$editor[0].focus(),this.block.blocks=this.selection.getBlocks(),this.block.blocksSize=this.block.blocks.length,this.block.type=i,this.block.value=n,this.buffer.set(),this.selection.save(),this.block.set(t),this.selection.restore(),this.code.sync())},set:function(e){this.selection.get(),this.block.containerTag=this.range.commonAncestorContainer.tagName,this.range.collapsed?this.block.setCollapsed(e):this.block.setMultiple(e)},setCollapsed:function(t){var i=this.block.blocks[0];if(i!==!1){if("LI"===i.tagName){if("blockquote"!==t)return;return void this.block.formatListToBlockquote()}var n="TD"===this.block.containerTag||"TH"===this.block.containerTag;if(n&&!this.opts.linebreaks)document.execCommand("formatblock",!1,"<"+t+">"),i=this.selection.getBlock(),this.block.toggle(e(i));else if(i.tagName.toLowerCase()!==t)if(this.opts.linebreaks&&"p"===t)e(i).prepend("<br>").append("<br>"),this.utils.replaceWithContents(i);else{var s=this.utils.replaceToTag(i,t);this.block.toggle(s),"p"!==t&&"blockquote"!==t&&s.find("img").remove(),this.block.isRemoveInline&&this.utils.removeInlineTags(s),("p"===t||this.block.headTag)&&s.find("p").contents().unwrap(),this.block.formatTableWrapping(s)}else if("blockquote"===t&&i.tagName.toLowerCase()===t)if(this.opts.linebreaks)e(i).prepend("<br>").append("<br>"),this.utils.replaceWithContents(i);else{var o=this.utils.replaceToTag(i,"p");this.block.toggle(o)}else i.tagName.toLowerCase()===t&&this.block.toggle(e(i));"undefined"==typeof this.block.type&&"undefined"==typeof this.block.value&&e(i).removeAttr("class").removeAttr("style")}},setMultiple:function(t){var i=this.block.blocks[0],n="TD"===this.block.containerTag||"TH"===this.block.containerTag;if(i!==!1&&1===this.block.blocksSize)if(i.tagName.toLowerCase()===t&&"blockquote"===t)if(this.opts.linebreaks)e(i).prepend("<br>").append("<br>"),this.utils.replaceWithContents(i);else{var s=this.utils.replaceToTag(i,"p");this.block.toggle(s)}else if("LI"===i.tagName){if("blockquote"!==t)return;this.block.formatListToBlockquote()}else if("BLOCKQUOTE"===this.block.containerTag)this.block.formatBlockquote(t);else if(this.opts.linebreaks&&(n||this.range.commonAncestorContainer!==i))this.block.formatWrap(t);else if(this.opts.linebreaks&&"p"===t)e(i).prepend("<br>").append("<br>"),this.utils.replaceWithContents(i);else if("TD"===i.tagName)this.block.formatWrap(t);else{var o=this.utils.replaceToTag(i,t);this.block.toggle(o),this.block.isRemoveInline&&this.utils.removeInlineTags(o),("p"===t||this.block.headTag)&&o.find("p").contents().unwrap()}else if(this.opts.linebreaks||"p"!==t){if("blockquote"===t){for(var r=0,a=0;a<this.block.blocksSize;a++)"BLOCKQUOTE"===this.block.blocks[a].tagName&&r++;if(r===this.block.blocksSize)return void e.each(this.block.blocks,e.proxy(function(t,i){var n=!1;this.opts.linebreaks?(e(i).prepend("<br>").append("<br>"),n=this.utils.replaceWithContents(i)):n=this.utils.replaceToTag(i,"p"),n&&"undefined"==typeof this.block.type&&"undefined"==typeof this.block.value&&n.removeAttr("class").removeAttr("style")},this))}this.block.formatWrap(t)}else{var l=0,c=!1;"class"===this.block.type&&(c="toggle",l=e(this.block.blocks).filter("."+this.block.value).length,this.block.blocksSize===l?c="toggle":this.block.blocksSize>l?c="set":0===l&&(c="set"));var d=["ul","ol","li","td","th","dl","dt","dd"];e.each(this.block.blocks,e.proxy(function(i,n){if(-1===e.inArray(n.tagName.toLowerCase(),d)){var s=this.utils.replaceToTag(n,t);c?"toggle"===c?this.block.toggle(s):"remove"===c?this.block.remove(s):"set"===c&&this.block.setForce(s):this.block.toggle(s),"p"!==t&&"blockquote"!==t&&s.find("img").remove(),this.block.isRemoveInline&&this.utils.removeInlineTags(s),("p"===t||this.block.headTag)&&s.find("p").contents().unwrap(),"undefined"==typeof this.block.type&&"undefined"==typeof this.block.value&&s.removeAttr("class").removeAttr("style")}},this))}},setForce:function(e){return this.block.clearStyle&&e.removeAttr("class").removeAttr("style"),"class"===this.block.type?void e.addClass(this.block.value):"attr"===this.block.type||"data"===this.block.type?void e.attr(this.block.value.name,this.block.value.value):void 0},toggle:function(e){return this.block.clearStyle&&e.removeAttr("class").removeAttr("style"),"class"===this.block.type?void e.toggleClass(this.block.value):"attr"===this.block.type||"data"===this.block.type?void(e.attr(this.block.value.name)===this.block.value.value?e.removeAttr(this.block.value.name):e.attr(this.block.value.name,this.block.value.value)):void e.removeAttr("style class")},remove:function(e){e.removeClass(this.block.value)},formatListToBlockquote:function(){var t=e(this.block.blocks[0]).closest("ul, ol",this.$editor[0]);e(t).find("ul, ol").contents().unwrap(),e(t).find("li").append(e("<br>")).contents().unwrap();var i=this.utils.replaceToTag(t,"blockquote");this.block.toggle(i)},formatBlockquote:function(t){document.execCommand("outdent"),document.execCommand("formatblock",!1,t),this.clean.clearUnverified(),this.$editor.find("p:empty").remove();var i=this.selection.getBlock();"p"!==t&&e(i).find("img").remove(),this.opts.linebreaks||this.block.toggle(e(i)),this.$editor.find("ul, ol, tr, blockquote, p").each(e.proxy(this.utils.removeEmpty,this)),this.opts.linebreaks&&"p"===t&&this.utils.replaceWithContents(i)},formatWrap:function(t){if("UL"===this.block.containerTag||"OL"===this.block.containerTag){if("blockquote"!==t)return;this.block.formatListToBlockquote()}var i=this.selection.wrap(t);if(i!==!1){var n=e(i);this.block.formatTableWrapping(n);var s=n.find(this.opts.blockLevelElements.join(",")+", td, table, thead, tbody, tfoot, th, tr");(this.opts.linebreaks&&"p"===t||"pre"===t||"blockquote"===t)&&s.append("<br />"),s.contents().unwrap(),"p"!==t&&"blockquote"!==t&&n.find("img").remove(),e.each(this.block.blocks,e.proxy(this.utils.removeEmpty,this)),n.append(this.selection.getMarker(2)),this.opts.linebreaks||this.block.toggle(n),this.$editor.find("ul, ol, tr, blockquote, p").each(e.proxy(this.utils.removeEmpty,this)),n.find("blockquote:empty").remove(),this.block.isRemoveInline&&this.utils.removeInlineTags(n),this.opts.linebreaks&&"p"===t&&this.utils.replaceWithContents(n)}},formatTableWrapping:function(e){0!==e.closest("table",this.$editor[0]).length&&(0===e.closest("tr",this.$editor[0]).length&&e.wrap("<tr>"),0===e.closest("td",this.$editor[0]).length&&0===e.closest("th").length&&e.wrap("<td>"))},removeData:function(t){var i=this.selection.getBlocks();e(i).removeAttr("data-"+t),this.code.sync()},setData:function(t,i){var n=this.selection.getBlocks();e(n).attr("data-"+t,i),this.code.sync()},toggleData:function(t,i){var n=this.selection.getBlocks();e.each(n,function(){e(this).attr("data-"+t)?e(this).removeAttr("data-"+t):e(this).attr("data-"+t,i)})},removeAttr:function(t){var i=this.selection.getBlocks();e(i).removeAttr(t),this.code.sync()},setAttr:function(t,i){var n=this.selection.getBlocks();e(n).attr(t,i),this.code.sync()},toggleAttr:function(t,i){var n=this.selection.getBlocks();e.each(n,function(){e(this).attr(name)?e(this).removeAttr(name):e(this).attr(name,i)})},removeClass:function(t){var i=this.selection.getBlocks();e(i).removeClass(t),this.utils.removeEmptyAttr(i,"class"),this.code.sync()},setClass:function(t){var i=this.selection.getBlocks();e(i).addClass(t),this.code.sync()},toggleClass:function(t){var i=this.selection.getBlocks();e(i).toggleClass(t),this.code.sync()}},t}),i("modules/buffer",["jquery"],function(e){"use strict";function t(){}return t.prototype={set:function(e,t){"undefined"==typeof e||"undo"===e?(this.buffer.setUndo(),t||this.buffer.clearRebuffer()):this.buffer.setRedo(),this.buffer.toggleUndoButtonStatus()},setUndo:function(){this.selection.save(),this.opts.buffer.push(this.$editor.html()),this.selection.restore()},getUndo:function(){this.$editor.html(this.opts.buffer.pop()),this.buffer.toggleUndoButtonStatus()},setRedo:function(){this.selection.save(),this.opts.rebuffer.push(this.$editor.html()),this.selection.restore()},getRedo:function(){this.$editor.html(this.opts.rebuffer.pop()),this.buffer.toggleUndoButtonStatus()},redo:function(){0!==this.opts.rebuffer.length&&(this.buffer.set("undo",!0),this.buffer.getRedo(),this.selection.restore(),setTimeout(e.proxy(this.observe.load,this),50))},clearBuffer:function(){for(;this.opts.buffer.length>0;)this.opts.buffer.pop();this.buffer.toggleUndoButtonStatus()},clearRebuffer:function(){for(;this.opts.rebuffer.length>0;)this.opts.rebuffer.pop();this.buffer.toggleUndoButtonStatus()},toggleUndoButtonStatus:function(){this.$toolbar.find(".re-undo").toggleClass("redactor-button-disabled",!this.opts.buffer.length),this.$toolbar.find(".re-redo").toggleClass("redactor-button-disabled",!this.opts.rebuffer.length)},add:function(){this.opts.buffer.push(this.$editor.html())},undo:function(){0!==this.opts.buffer.length&&(this.buffer.set("redo"),this.buffer.getUndo(),this.selection.restore(),setTimeout(e.proxy(this.observe.load,this),50))}},t}),i("modules/build",["jquery"],function(e){"use strict";function t(){}return t.prototype={run:function(){this.build.createContainerBox(),this.build.loadContent(),this.build.loadEditor(),this.build.enableEditor(),this.build.setCodeAndCall()},isTextarea:function(){return"TEXTAREA"===this.$element[0].tagName},createContainerBox:function(){this.$box=e('<div class="redactor-box" />')},createTextarea:function(){this.$textarea=e("<textarea />").attr("name",this.build.getTextareaName())},getTextareaName:function(){return"undefined"==typeof name?"content-"+this.uuid:this.$element.attr("id")},loadContent:function(){if(this.$sourceTextarea=e("textarea.redactorContent",this.$element[0]),this.$sourceTextarea.length)return this.content=this.$sourceTextarea.val(),void this.$sourceTextarea.detach();if(this.$element.next("textarea").length)return void(this.content=this.$element.next("textarea").val());var t=this.build.isTextarea()?"val":"html";this.content=e.trim(this.$element[t]())},enableEditor:function(){this.$editor.attr({contenteditable:!0,dir:this.opts.direction})},loadEditor:function(){var e=this.build.isTextarea()?"fromTextarea":"fromElement";this.build[e]()},fromTextarea:function(){this.$editor=e("<div />"),this.$textarea=this.$element,this.$box.insertAfter(this.$element).append(this.$editor).append(this.$element),this.$editor.addClass("redactor-editor"),this.$element.hide()},fromElement:function(){this.$editor=this.$element,this.build.createTextarea(),this.$box.insertAfter(this.$editor).append(this.$editor).append(this.$textarea),this.$editor.addClass("redactor-editor"),this.$textarea.hide()},setCodeAndCall:function(){this.code.set(this.content),this.build.setOptions(),this.build.callEditor(),this.opts.visual||setTimeout(e.proxy(this.code.showCode,this),200)},callEditor:function(){this.build.disableMozillaEditing(),this.build.setEvents(),this.build.setHelpers(),this.opts.toolbar&&(this.opts.toolbar=this.toolbar.init(),this.toolbar.build()),this.modal.loadTemplates(),this.build.plugins(),setTimeout(e.proxy(this.observe.load,this),4),this.core.setCallback("init")},setOptions:function(){e(this.$textarea).attr("dir",this.opts.direction),this.opts.linebreaks&&this.$editor.addClass("redactor-linebreaks"),this.opts.tabindex&&this.$editor.attr("tabindex",this.opts.tabindex),this.opts.minHeight&&this.$editor.css("minHeight",this.opts.minHeight),this.opts.maxHeight&&this.$editor.css("maxHeight",this.opts.maxHeight)},setEventDropUpload:function(e){if(e.preventDefault(),this.opts.dragImageUpload&&this.opts.dragFileUpload){var t=e.dataTransfer.files;this.upload.directUpload(t[0],e)}},setEventDrop:function(e){this.code.sync(),setTimeout(this.clean.clearUnverified,1),this.core.setCallback("drop",e)},setEvents:function(){this.$editor.on("drop.redactor",e.proxy(function(e){return e=e.originalEvent||e,void 0!==window.FormData&&e.dataTransfer?0===e.dataTransfer.files.length?this.build.setEventDrop(e):(this.build.setEventDropUpload(e),setTimeout(this.clean.clearUnverified,1),this.core.setCallback("drop",e),void 0):!0},this)),this.$editor.on("click.redactor",e.proxy(function(e){var t=this.core.getEvent(),i="click"===t||"arrow"===t?!1:"click";this.core.addEvent(i),this.utils.disableSelectAll(),this.core.setCallback("click",e)},this)),this.$editor.on("paste.redactor",e.proxy(this.paste.init,this)),this.$editor.on("cut.redactor",e.proxy(this.code.sync,this)),this.$editor.on("keydown.redactor",e.proxy(this.keydown.init,this)),this.$editor.on("keyup.redactor",e.proxy(this.keyup.init,this)),e.isFunction(this.opts.codeKeydownCallback)&&this.$textarea.on("keydown.redactor-textarea",e.proxy(this.opts.codeKeydownCallback,this)),e.isFunction(this.opts.codeKeyupCallback)&&this.$textarea.on("keyup.redactor-textarea",e.proxy(this.opts.codeKeyupCallback,this)),e.isFunction(this.opts.focusCallback)&&this.$editor.on("focus.redactor",e.proxy(this.opts.focusCallback,this));var t;e(document).on("mousedown focusin",function(e){t=e.target}),this.$editor.on("blur.redactor",e.proxy(function(i){this.rtePaste||this.build.isBlured(t)&&(this.code.sync(),this.$textarea.trigger("change"),this.utils.disableSelectAll(),e.isFunction(this.opts.blurCallback)&&this.core.setCallback("blur",i))},this))},isBlured:function(t){var i=e(t);return i.is(".redactor-editor")&&i[0]!==this.$editor[0]?!0:!i.hasClass("redactor-toolbar, redactor-dropdown")&&!i.is("#redactor-modal")&&0===i.parents(".redactor-toolbar, .redactor-dropdown, #redactor-modal").length&&0===i.closest(this.$editor).length},setHelpers:function(){this.linkify.isEnabled()&&this.linkify.format(),this.placeholder.enable(),this.opts.focus&&setTimeout(this.focus.setStart,100),this.opts.focusEnd&&setTimeout(this.focus.setEnd,100)},plugins:function(){e.each(this.modules,e.proxy(function(t,i){e.isFunction(this[i].initialize)&&this[i].initialize()},this))},disableMozillaEditing:function(){if(this.utils.browser("mozilla"))try{document.execCommand("enableObjectResizing",!1,!1),document.execCommand("enableInlineTableEditing",!1,!1)}catch(e){}}},t}),i("modules/button",["jquery"],function(e){"use strict";function t(){}return t.prototype={build:function(t,i){var n=e('<a href="#" class="re-icon re-'+t+'" rel="'+t+'" />').attr("tabindex","-1");if((i.func||i.command||i.dropdown)&&this.button.setEvent(n,t,i),i.dropdown){var s=e('<div class="redactor-dropdown redactor-dropdown-'+this.uuid+" redactor-dropdown-box-"+t+'" style="display: none;">');n.data("dropdown",s),this.dropdown.build(t,s,i.dropdown)}return this.utils.isDesktop()&&this.button.createTooltip(n,t,i.title),n},setEvent:function(t,i,n){t.on("touchstart click",e.proxy(function(e){if(t.hasClass("redactor-button-disabled"))return!1;var s="func",o=n.func;n.command?(s="command",o=n.command):n.dropdown&&(s="dropdown",o=!1),this.button.onClick(e,i,s,o)},this))},createTooltip:function(t,i,n){var s=e("<span>").addClass("redactor-toolbar-tooltip redactor-toolbar-tooltip-"+i).hide().html(n);s.appendTo("body"),t.on("mouseover",function(){if(!e(this).hasClass("redactor-button-disabled")){var i=t.offset();s.show(),s.css({top:i.top+t.innerHeight()+"px",left:i.left+t.innerWidth()/2-s.innerWidth()/2+"px"})}}),t.on("mouseout mouseup",function(){s.hide()})},onClick:function(e,t,i,n){this.button.caretOffset=this.caret.getOffset(),e.preventDefault(),this.utils.browser("msie")&&(e.returnValue=!1),"command"===i?this.inline.format(n):"dropdown"===i?this.dropdown.show(e,t):this.button.onClickCallback(e,n,t)},onClickCallback:function(t,i,n){var s;if(e.isFunction(i))i.call(this,n);else if("-1"!==i.search(/\./)){if(s=i.split("."),"undefined"==typeof this[s[0]])return;this[s[0]][s[1]](n)}else this[i](n);this.observe.buttons(t,n)},get:function(e){return this.$toolbar.find("a.re-"+e)},setActive:function(e){this.button.get(e).addClass("redactor-act")},setInactive:function(e){this.button.get(e).removeClass("redactor-act")},setInactiveAll:function(e){"undefined"==typeof e?this.$toolbar.find("a.re-icon").removeClass("redactor-act"):this.$toolbar.find("a.re-icon").not(".re-"+e).removeClass("redactor-act")},setActiveInVisual:function(){this.$toolbar.find("a.re-icon").not("a.re-html").removeClass("redactor-button-disabled")},setInactiveInCode:function(){this.$toolbar.find("a.re-icon").not("a.re-html").addClass("redactor-button-disabled")},changeIcon:function(e,t){this.button.get(e).addClass("re-"+t)},removeIcon:function(e,t){this.button.get(e).removeClass("re-"+t)},setAwesome:function(e,t){var i=this.button.get(e);i.removeClass("redactor-btn-image").addClass("fa-redactor-btn"),i.html('<i class="fa '+t+'"></i>')},addCallback:function(t,i){var n="dropdown"===i?"dropdown":"func",s=t.attr("rel");"dropdown"===n&&t.addClass("re-has-dropdown"),t.on("touchstart click",e.proxy(function(e){return t.hasClass("redactor-button-disabled")?!1:void this.button.onClick(e,s,n,i)},this))},addDropdown:function(t,i){var n=t.attr("rel");this.button.addCallback(t,"dropdown");var s=e('<div class="redactor-dropdown redactor-dropdown-'+this.uuid+" redactor-dropdown-box-"+n+'" style="display: none;">');return t.data("dropdown",s),i&&this.dropdown.build(n,s,i),s},add:function(t,i){if(this.opts.toolbar){var n=this.button.build(t,{title:i});return n.addClass("redactor-btn-image"),this.$toolbar.append(e("<li>").append(n)),n}},addFirst:function(t,i){if(this.opts.toolbar){var n=this.button.build(t,{title:i});return n.addClass("redactor-btn-image"),this.$toolbar.prepend(e("<li>").append(n)),n}},addAfter:function(t,i,n){if(this.opts.toolbar){var s=this.button.build(i,{title:n});s.addClass("redactor-btn-image");var o=this.button.get(t);return 0!==o.length?o.parent().after(e("<li>").append(s)):this.$toolbar.append(e("<li>").append(s)),s}},addBefore:function(t,i,n){if(this.opts.toolbar){var s=this.button.build(i,{title:n});s.addClass("redactor-btn-image");var o=this.button.get(t);return 0!==o.length?o.parent().before(e("<li>").append(s)):this.$toolbar.append(e("<li>").append(s)),s}},remove:function(e){this.button.get(e).remove()}},t}),i("modules/caret",["jquery"],function(e){"use strict";function t(){}return t.prototype={setStart:function(t){if(this.utils.isInline(t)){var i=this.utils.createSpaceElement();e(t).prepend(i),this.caret.setEnd(i)}else this.caret.set(t,0,t,0)},setEnd:function(e){this.caret.set(e,1,e,1)},set:function(t,i,n,s){if(t=t[0]||t,n=n[0]||n,this.utils.isBlockTag(t.tagName)&&""===t.innerHTML&&(t.innerHTML=this.opts.invisibleSpace),"BR"===t.tagName&&this.opts.linebreaks===!1){var o=e(this.opts.emptyHtml)[0];e(t).replaceWith(o),t=o,n=t}this.selection.get();try{this.range.setStart(t,i),this.range.setEnd(n,s)}catch(r){}this.selection.addRange()},setAfter:function(t){try{var i=e(t)[0].tagName;if("BR"!==i&&this.utils.isInline(t)){var n=this.utils.createSpaceElement();e(t).after(n),this.caret.setEnd(n)}else"BR"!==i&&this.utils.browser("msie")?this.caret.setStart(e(t).next()):this.caret.setAfterOrBefore(t,"after")}catch(s){var n=this.utils.createSpaceElement();e(t).after(n),this.caret.setEnd(n)}},setBefore:function(t){this.utils.isBlock(t)?this.caret.setEnd(e(t).prev()):this.caret.setAfterOrBefore(t,"before")},setAfterOrBefore:function(e,t){if(this.utils.browser("msie")||this.$editor[0].focus(),e=e[0]||e,this.selection.get(),"after"===t)try{this.range.setStartAfter(e),this.range.setEndAfter(e)}catch(i){}else try{this.range.setStartBefore(e),this.range.setEndBefore(e)}catch(i){}this.range.collapse(!1),this.selection.addRange()},getOffsetOfElement:function(t){t=t[0]||t,this.selection.get();var i=this.range.cloneRange();return i.selectNodeContents(t),i.setEnd(this.range.endContainer,this.range.endOffset),e.trim(i.toString()).length},getOffset:function(){var e=0,t=window.getSelection();if(t.rangeCount>0){var i=window.getSelection().getRangeAt(0),n=i.cloneRange();n.selectNodeContents(this.$editor[0]),n.setEnd(i.endContainer,i.endOffset),e=n.toString().length}return e},setOffset:function(e,t){"undefined"==typeof t&&(t=e),this.focus.isFocused()||this.focus.setStart();for(var i,n=0,s=document.createTreeWalker(this.$editor[0],NodeFilter.SHOW_TEXT,null,null);i=s.nextNode();)if(n+=i.nodeValue.length,n>e&&(this.range.setStart(i,i.nodeValue.length+e-n),e=1/0),n>=t){this.range.setEnd(i,i.nodeValue.length+t-n);break}this.range.collapse(!1),this.selection.addRange()},setToPoint:function(e,t){this.caret.setOffset(e,t)},getCoords:function(){return this.caret.getOffset()}},t}),i("modules/clean",["jquery"],function(e){"use strict";function t(){}var i=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","command","content","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","element","em","embed","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","image","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","multicol","nav","nobr","noframes","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","rtc","ruby","s","samp","script","section","select","shadow","small","source","span","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"];
return t.prototype={onSet:function(t){t=this.clean.savePreCode(t),t=this.clean.convertPre(t,"redactor-script-tag","script",!0),t=this.clean.convertPre(t,"redactor-noscript-tag","noscript"),t=t.replace(/<a href="([^>]*?)\xae([^>]*?)">/gi,'<a href="$1&reg$2">'),this.opts.replaceDivs&&(t=this.clean.replaceDivs(t)),this.opts.linebreaks&&(t=this.clean.replaceParagraphsToBr(t)),t=this.clean.saveFormTags(t);var i=e("<div>");i.html(t);var n=i.find("font[style]");return 0!==n.length&&(n.replaceWith(function(){var t=e(this),i=e("<span>").attr("style",t.attr("style"));return i.append(t.contents())}),t=i.html()),i.remove(),t=t.replace(/<font([^<]*)>/gi,""),t=t.replace(/<\/font>/gi,""),t=this.tidy.load(t),this.opts.paragraphize&&(t=this.paragraphize.load(t)),t=this.clean.setVerified(t),t=this.clean.convertInline(t)},onSync:function(t){if(t=t.replace(/[\u200B-\u200D\uFEFF]/g,""),t=t.replace(/&#x200b;/gi,""),this.opts.cleanSpaces&&(t=t.replace(/&nbsp;/gi," ")),-1!==t.search(/^<p>(||\s||<br\s?\/?>||&nbsp;)<\/p>$/i))return"";t=this.clean.restoreFormTags(t);var i={"\u2122":"&trade;","\xa9":"&copy;","\u2026":"&hellip;","\u2014":"&mdash;","\u2010":"&dash;"};return e.each(i,function(e,i){t=t.replace(new RegExp(e,"g"),i)}),t=t.replace(new RegExp("<br\\s?/?></li>","gi"),"</li>"),t=t.replace(new RegExp("</li><br\\s?/?>","gi"),"</li>"),t=t.replace(/<div([^>]*) data-tagblock="redactor"([^>]*)>/gi,"<div$1$2>"),t=t.replace(/<([^>]*) data-verified="redactor"([^>]*)>/gi,"<$1$2>"),t=t.replace(/<span([^>]*)\srel="([^>]*?)"([^>]*)>/gi,"<span$1$3>"),t=t.replace(/<img([^>]*)\srel="([^>]*?)"([^>]*)>/gi,"<img$1$3>"),t=t.replace(/<img([^>]*)\sstyle="" ([^>]*)>'/gi,"<img$1 $2>"),t=t.replace(/<img([^>]*)\sstyle ([^>]*)>'/gi,"<img$1 $2>"),t=t.replace(/<span class="redactor-invisible-space">([^<]*)<\/span>/gi,"$1"),t=t.replace(/ data-save-url="([^>]*?)"/gi,""),t=t.replace(/<span([^>]*)id="redactor-image-box"([^>]*)>([\w\W]*?)<img([^>]*)><\/span>/gi,"$3<img$4>"),t=t.replace(/<span([^>]*)id="redactor-image-resizer"([^>]*)>([^<]*)<\/span>/gi,""),t=t.replace(/<span([^>]*)id="redactor-image-editter"([^>]*)>([^<]*)<\/span>/gi,""),t=t.replace(/<font([^>]*)>/gi,""),t=t.replace(/<\/font>/gi,""),t=this.tidy.load(t),t=this.clean.reconvertPre(t,"redactor-script-tag","script",!0),t=this.clean.reconvertPre(t,"redactor-noscript-tag","noscript"),this.opts.linkNofollow&&(t=t.replace(/<a([^>]*)rel="nofollow"([^>]*)>/gi,"<a$1$2>"),t=t.replace(/<a([^>]*)>/gi,'<a$1 rel="nofollow">')),t=t.replace(/\sdata-redactor-(tag|class|style)="([^>]*?)"/gi,""),t=t.replace(new RegExp('<([^>]*) data-verified="redactor"([^>]*)>',"gi"),"<$1$2>"),t=t.replace(new RegExp('<([^>]*) data-verified="redactor">',"gi"),"<$1>")},convertPre:function(e,t,i,n){var s=new RegExp("<"+i+"([^>]*)>([\\w\\W]*?)</"+i+">","gi"),o=e.split(s);if(o.length<4)return e;for(var r=1;r<o.length;r+=3)o[r]='<pre class="'+t+'" style="display: none;"'+o[r]+">",o[r+1]=n?this.clean.encodeEntities(o[r+1]):o[r+1],o[r+2]="</pre>"+o[r+2];return o.join("")},reconvertPre:function(e,t,i,n){var s,o=new RegExp('<pre class="'+t+'" style="display: none;"([^>]*)>([\\w\\W]*?)</pre>',"gi"),r=e.split(o),a=0;if(r.length<4)return e;for(var l=1;l<r.length;l+=3)s=this.$editor.find("pre."+t+":eq("+a+")"),r[l]="<"+i+" "+r[l]+">",r[l+1]=n?s.text():s.html(),r[l+2]="</"+i+">"+r[l+2],a++;return r.join("")},onPaste:function(t,i){if(t=e.trim(t),t=t.replace(/<span class="s1">/gi,"<span>"),t=t.replace(/<span class="Apple-converted-space">&nbsp;<\/span>/gi," "),t=t.replace(/<span class="Apple-tab-span"[^>]*>\t<\/span>/gi,"	"),t=t.replace(/<span[^>]*>(\s|&nbsp;)<\/span>/gi," "),this.opts.pastePlainText)return this.clean.getPlainText(t);if(!this.utils.isSelectAll()&&"undefined"==typeof i){if(this.utils.isCurrentOrParent(["FIGCAPTION","A"]))return this.clean.getPlainText(t,!1);if(this.utils.isCurrentOrParent("PRE"))return t=t.replace(/\u201d/g,'"'),t=t.replace(/\u201c/g,'"'),t=t.replace(/\u2018/g,"'"),t=t.replace(/\u2019/g,"'"),this.clean.getPreCode(t);if(this.utils.isCurrentOrParent(["BLOCKQUOTE","H1","H2","H3","H4","H5","H6"])){if(t=this.clean.getOnlyImages(t),!this.utils.browser("msie")){var n=this.selection.getBlock();n&&"P"===n.tagName&&(t=t.replace(/<img([^>]*)>/gi,"<p><img$1></p>"))}return t}if(this.utils.isCurrentOrParent(["TD"]))return t=this.clean.onPasteTidy(t,"td"),this.opts.linebreaks&&(t=this.clean.replaceParagraphsToBr(t)),t=this.clean.replaceDivsToBr(t);if(this.utils.isCurrentOrParent(["LI"]))return this.clean.onPasteTidy(t,"li")}return t=this.clean.isSingleLine(t,i),this.clean.singleLine||(this.opts.linebreaks&&(t=this.clean.replaceParagraphsToBr(t)),this.opts.replaceDivs&&(t=this.clean.replaceDivs(t)),t=this.clean.saveFormTags(t)),t=this.clean.onPasteWord(t),t=this.clean.onPasteExtra(t),t=this.clean.onPasteTidy(t,"strict"),!this.clean.singleLine&&this.opts.paragraphize&&(t=this.paragraphize.load(t)),t=this.clean.removeDirtyStyles(t),t=this.clean.onPasteRemoveSpans(t),t=this.clean.onPasteRemoveEmpty(t),t=this.clean.convertInline(t)},onPasteWord:function(e){return e=e.replace(/<!--[\s\S]*?-->/gi,""),e=e.replace(/<style[^>]*>[\s\S]*?<\/style>/gi,""),/(class=\"?Mso|style=\"[^\"]*\bmso\-|w:WordDocument)/.test(e)&&(e=this.clean.onPasteIeFixLinks(e),e=e.replace(/<img([^>]*)v:shapes=([^>]*)>/gi,""),e=e.replace(/src="file\:\/\/(.*?)"/,'src=""'),e=e.replace(/<p([^>]*)class="MsoListParagraphCxSpFirst"([\w\W]*?)<\/p>/gi,"<ul><li$2</li>"),e=e.replace(/<p([^>]*)class="MsoListParagraphCxSpMiddle"([\w\W]*?)<\/p>/gi,"<li$2</li>"),e=e.replace(/<p([^>]*)class="MsoListParagraphCxSpLast"([\w\W]*?)<\/p>/gi,"<li$2</li></ul>"),e=e.replace(/<p([^>]*)class="MsoListParagraph"([\w\W]*?)<\/p>/gi,"<ul><li$2</li></ul>"),e=e.replace(/\xb7/g,""),e=e.replace(/<p class="Mso([^>]*?)"/gi,"<p"),e=e.replace(/ class=\"(mso[^\"]*)\"/gi,""),e=e.replace(/ class=(mso\w+)/gi,""),e=e.replace(/<o:p([^>]*)>([\w\W]*?)<\/o:p>/gi,"$2"),e=e.replace(/<w:sdt([^>]*)>([\w\W]*?)<\/w:sdt[^>]*>/gi,"$2"),e=e.replace(/<w:sdt([^>]*)>([\w\W]*?)<\/w:sdt[^>]*>/gi,"$2"),e=e.replace(/\n/g," "),e=e.replace(/<p>\n?<li>/gi,"<li>")),this.opts.cleanSpaces&&(e=e.replace(/(\s|&nbsp;)+/g," ")),e},onPasteExtra:function(e){return e=e.replace(/<b\sid="internal-source-marker([^>]*?)">([\w\W]*?)<\/b>/gi,"$2"),e=e.replace(/<b([^>]*)id="docs-internal-guid([^>]*?)">([\w\W]*?)<\/b>/gi,"$3"),e=e.replace(/<span[^>]*(font-style: italic; font-weight: bold|font-weight: bold; font-style: italic)[^>]*>/gi,'<span style="font-weight: bold;"><span style="font-style: italic;">'),e=e.replace(/<span[^>]*font-style: italic[^>]*>/gi,'<span style="font-style: italic;">'),e=e.replace(/<span[^>]*font-weight: bold[^>]*>/gi,'<span style="font-weight: bold;">'),e=e.replace(/<span[^>]*text-decoration: underline[^>]*>/gi,'<span style="text-decoration: underline;">'),e=e.replace(/<img>/gi,""),e=e.replace(/\n{3,}/gi,"\n"),e=e.replace(/<font([^>]*)>([\w\W]*?)<\/font>/gi,"$2"),e=e.replace(/<p><p>/gi,"<p>"),e=e.replace(/<\/p><\/p>/gi,"</p>"),e=e.replace(/<li>(\s*|\t*|\n*)<p>/gi,"<li>"),e=e.replace(/<\/p>(\s*|\t*|\n*)<\/li>/gi,"</li>"),e=e.replace(/<\/p>\s<p/gi,"</p><p"),e=e.replace(/<img src="webkit-fake-url\:\/\/([^>]*?)"([^>]*)>/gi,""),e=e.replace(/<p>\u2022([\w\W]*?)<\/p>/gi,"<li>$1</li>"),this.utils.browser("mozilla")&&(e=e.replace(/<br\s?\/?>$/gi,"")),e},onPasteTidy:function(e,t){var n,s=i,o=!1,r=!1,a=[["a","*"],["img",["src","alt"]],["span",["class","rel","data-verified"]],["iframe","*"],["video","*"],["audio","*"],["embed","*"],["object","*"],["param","*"],["source","*"]];if("all"===t)for(o=["p","span","h1","h2","h3","h4","h5","h6"],a=[],n=0;n<s.length;n++)a.push([s[n],["*"]]);else if("strict"===t)for(o=["p","span","h1","h2","h3","h4","h5","h6"],a=[],r=[],n=0;n<s.length;n++)r.push([s[n],["style"]]);else"td"===t?s=["table","tr","td","tbody","thead","tfoot","colgroup","col","caption","ul","ol","li","span","a","small","em","strong","code","kbd","mark","cite","var","samp","dfn","sup","sub","b","i","u","del","ol","ul","li","dl","dt","dd","br","iframe","video","audio","embed","param","object","img","h1","h2","h3","h4","h5","h6"]:"li"===t&&(s=["ul","ol","li","span","a","small","em","strong","code","kbd","mark","cite","var","samp","dfn","sup","sub","b","i","u","del","br","iframe","video","audio","embed","param","object","img"]);var l={deniedTags:this.opts.deniedTags?this.opts.deniedTags:!1,allowedTags:this.opts.allowedTags?this.opts.allowedTags:s,removeComments:!0,removePhp:!0,removeAttr:this.opts.removeAttr?this.opts.removeAttr:r,allowedAttr:this.opts.allowedAttr?this.opts.allowedAttr:a,removeEmpty:o};return this.tidy.load(e,l)},onPasteRemoveEmpty:function(e){return e=e.replace(/<(p|h[1-6])>(|\s|\n|\t|<br\s?\/?>)<\/(p|h[1-6])>/gi,""),this.opts.linebreaks||(e=e.replace(/<br>$/i,"")),e},onPasteRemoveSpans:function(e){return e=e.replace(/<span>([^<]*)<\/span>/gi,"$1"),e=e.replace(/<span[^>]*>\s|&nbsp;<\/span>/gi," ")},onPasteIeFixLinks:function(t){if(!this.utils.browser("msie"))return t;var i=e.trim(t);return 0===i.search(/^<a([^>]*)>([^<]*)<\/a>$/i)&&(t=t.replace(/^<a([^>]*)>([^<]*)<\/a>$/i,"$2")),t},isSingleLine:function(e,t){if(this.clean.singleLine=!1,!this.utils.isSelectAll()&&"undefined"==typeof t){var i=this.opts.blockLevelElements.join("|").replace("P|","").replace("DIV|",""),n=e.match(new RegExp("</("+i+")>","gi")),s=e.match(/<\/(p|div)>/gi);if(!n&&(null===s||s&&s.length<=1)){var o=e.match(/<br\s?\/?>/gi),r=e.match(/<img([^>]*)>/gi);!o&&!r&&(this.clean.singleLine=!0,e=e.replace(/<\/?(p|div)([^>]*)>/gi,""))}}return e},stripTags:function(e,t){t=(((t||"")+"").toLowerCase().match(/<[a-z][a-z0-9]*>/g)||[]).join("");var i=/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi;return e.replace(i,function(e,i){return t.indexOf("<"+i.toLowerCase()+">")>-1?e:""})},savePreCode:function(e){return e=this.clean.savePreFormatting(e),e=this.clean.saveCodeFormatting(e)},savePreFormatting:function(t){var i=t.match(/<pre([^>]*)>([\w\W]*?)<\/pre>/gi);return null!==i&&e.each(i,e.proxy(function(e,i){var n=i.match(/<pre([^>]*)>([\w\W]*?)<\/pre>/i);n[2]=n[2].replace(/<br\s?\/?>/g,"\n"),n[2]=n[2].replace(/&nbsp;/g," "),this.opts.preSpaces&&(n[2]=n[2].replace(/\t/g,new Array(this.opts.preSpaces+1).join(" "))),n[2]=this.clean.encodeEntities(n[2]),n[2]=n[2].replace(/\$/g,"&#36;"),t=t.replace(i,"<pre"+n[1]+">"+n[2]+"</pre>")},this)),t},saveCodeFormatting:function(t){var i=t.match(/<code([^>]*)>([^<]*)<\/code>/gi);return null!==i&&e.each(i,e.proxy(function(e,i){var n=i.match(/<code([^>]*)>([^<]*)<\/code>/i);n[2]=n[2].replace(/&nbsp;/g," "),n[2]=this.clean.encodeEntities(n[2]),n[2]=n[2].replace(/\$/g,"&#36;"),t=t.replace(i,"<code"+n[1]+">"+n[2]+"</code>")},this)),t},getTextFromHtml:function(t){t=t.replace(/<br\s?\/?>|<\/H[1-6]>|<\/p>|<\/div>|<\/li>|<\/td>/gi,"\n");var i=document.createElement("div");return i.innerHTML=t,t=i.textContent||i.innerText,e.trim(t)},getPlainText:function(e,t){return e=this.clean.getTextFromHtml(e),e=e.replace(/\n/g,"<br />"),this.opts.paragraphize&&"undefined"==typeof t&&!this.utils.browser("mozilla")&&(e=this.paragraphize.load(e)),e},getPreCode:function(e){return e=e.replace(/<img([^>]*) style="([^>]*?)"([^>]*)>/gi,"<img$1$3>"),e=e.replace(/<img([^>]*)>/gi,"&lt;img$1&gt;"),e=this.clean.getTextFromHtml(e),this.opts.preSpaces&&(e=e.replace(/\t/g,new Array(this.opts.preSpaces+1).join(" "))),e=this.clean.encodeEntities(e)},getOnlyImages:function(e){return e=e.replace(/<img([^>]*)>/gi,"[img$1]"),e=e.replace(/<([Ss]*?)>/gi,""),e=e.replace(/\[img([^>]*)\]/gi,"<img$1>")},getOnlyLinksAndImages:function(e){return e=e.replace(/<a(.*?)href="(.*?)"(.*?)>([\w\W]*?)<\/a>/gi,'[a href="$2"]$4[/a]'),e=e.replace(/<img(.*?)>/gi,"[img$1]"),e=e.replace(/<(.*?)>/gi,""),e=e.replace(/\[a href="(.*?)"\]([\w\W]*?)\[\/a\]/gi,'<a href="$1">$2</a>'),e=e.replace(/\[img(.*?)\]/gi,"<img$1>")},encodeEntities:function(e){return e=String(e).replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"'),e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},removeDirtyStyles:function(t){if(this.utils.browser("msie"))return t;var i=document.createElement("div");return i.innerHTML=t,this.clean.clearUnverifiedRemove(e(i)),t=i.innerHTML,e(i).remove(),t},clearUnverified:function(){if(!this.utils.browser("msie")){this.clean.clearUnverifiedRemove(this.$editor);var e=this.$editor.find("h1, h2, h3, h4, h5, h6");e.find("span").removeAttr("style"),e.find(this.opts.verifiedTags.join(", ")).removeAttr("style"),this.code.sync()}},clearUnverifiedRemove:function(t){t.find("span").not('[data-verified="redactor"]').contents().unwrap(),t.find('span[data-verified="redactor"], img[data-verified="redactor"]').each(function(t,i){var n=e(i);n.attr("style",n.attr("rel"))})},cleanEmptyParagraph:function(){var e=this.$editor.find("p").first();this.utils.isEmpty(e.html())&&e.remove()},setVerified:function(e){if(this.utils.browser("msie"))return e;e=e.replace(new RegExp("<img([^>]*)>","gi"),'<img$1 data-verified="redactor">'),e=e.replace(new RegExp("<span([^>]*)>","gi"),'<span$1 data-verified="redactor">');var t=e.match(new RegExp('<(span|img)([^>]*)style="([^"]*)"([^>]*)>',"gi"));if(t)for(var i=t.length,n=0;i>n;n++)try{var s=t[n].replace(/style="(.*?)"/i,'style="$1" rel="$1"');e=e.replace(t[n],s)}catch(o){}return e},convertInline:function(t){var i=e("<div />").html(t),n=this.opts.inlineTags;return n.push("span"),i.find(n.join(",")).each(function(){var t=e(this),i=this.tagName.toLowerCase();t.attr("data-redactor-tag",i),"span"===i&&(t.attr("style")?t.attr("data-redactor-style",t.attr("style")):t.attr("class")&&t.attr("data-redactor-class",t.attr("class")))}),t=i.html(),i.remove(),t},normalizeLists:function(){this.$editor.find("li").each(function(t,i){var n=e(i).next();0!==n.length&&("UL"===n[0].tagName||"OL"===n[0].tagName)&&e(i).append(n)})},removeSpaces:function(e){return e},replaceDivs:function(e){return this.opts.linebreaks?(e=e.replace(/<div><br\s?\/?><\/div>/gi,"<br />"),e=e.replace(/<div(.*?)>([\w\W]*?)<\/div>/gi,"$2<br />")):e=e.replace(/<div(.*?)>([\w\W]*?)<\/div>/gi,"<p$1>$2</p>"),e=e.replace(/<div([^>]*)>/gi,""),e=e.replace(/<\/div>/gi,"")},replaceDivsToBr:function(e){return e=e.replace(/<div\s(.*?)>/gi,"<p>"),e=e.replace(/<div><br\s?\/?><\/div>/gi,"<br /><br />"),e=e.replace(/<div>([\w\W]*?)<\/div>/gi,"$1<br /><br />")},replaceParagraphsToBr:function(e){return e=e.replace(/<p\s(.*?)>/gi,"<p>"),e=e.replace(/<p><br\s?\/?><\/p>/gi,"<br />"),e=e.replace(/<p>([\w\W]*?)<\/p>/gi,"$1<br /><br />"),e=e.replace(/(<br\s?\/?>){1,}\n?<\/blockquote>/gi,"</blockquote>")},saveFormTags:function(e){return e.replace(/<form(.*?)>([\w\W]*?)<\/form>/gi,'<section$1 rel="redactor-form-tag">$2</section>')},restoreFormTags:function(e){return e.replace(/<section(.*?) rel="redactor-form-tag"(.*?)>([\w\W]*?)<\/section>/gi,"<form$1$2>$3</form>")}},t}),i("modules/code",["jquery"],function(e){"use strict";function t(){}return t.prototype={set:function(t){t=e.trim(t.toString()),t=this.clean.onSet(t),this.$editor.html(t),this.code.sync(),""!==t&&this.placeholder.remove(),setTimeout(e.proxy(this.buffer.add,this),15),this.start===!1&&this.observe.load()},get:function(){var e=this.$textarea.val();return e},sync:function(){var t=function(){this.code.syncTimeout=null,this.code.startSync.apply(this)};this.code.syncTimeout||this.code.startSync.apply(this),clearTimeout(this.code.syncTimeout),this.code.syncTimeout=setTimeout(e.proxy(t,this),50)},startSync:function(){var e=this.$editor.html();"undefined"!=typeof this.code.syncCode&&this.code.syncCode===e||(this.utils.isIe11()&&"<br>"===e&&(e=""),this.code.syncCode=e,e=this.core.setCallback("syncBefore",e),e=this.clean.onSync(e),this.$textarea.val(e),this.core.setCallback("sync",e),this.start===!1&&this.core.setCallback("change",e),this.start=!1,this.opts.codemirror&&this.$textarea.next(".CodeMirror").each(function(t,i){i.CodeMirror.setValue(e)}))},toggle:function(){this.opts.visual?this.code.showCode():this.code.showVisual()},showCode:function(){this.code.offset=this.caret.getOffset();var t=e(window).scrollTop(),i=this.$editor.innerHeight();this.$editor.hide();var n=this.$textarea.val();this.modified=this.clean.removeSpaces(n),this.$textarea.val(n),this.opts.codemirror?this.$textarea.next(".CodeMirror").each(function(t,s){e(s).show(),s.CodeMirror.setValue(n),s.CodeMirror.setSize(null,i),s.CodeMirror.refresh(),s.CodeMirror.focus()}):(this.$textarea.height(i).show().get(0).focus(),this.$textarea.on("keydown.redactor-textarea-indenting",this.code.textareaIndenting),e(window).scrollTop(t),this.$textarea[0].setSelectionRange&&this.$textarea[0].setSelectionRange(0,0),this.$textarea[0].scrollTop=0),this.opts.visual=!1,this.button.setInactiveInCode(),this.button.setActive("html"),this.core.setCallback("source",n)},showVisual:function(){var e;this.opts.visual||(this.opts.codemirror?this.$textarea.next(".CodeMirror").each(function(t,i){e=i.CodeMirror.getValue()}):e=this.$textarea.hide().val(),this.modified!==this.clean.removeSpaces(e)&&this.code.set(e),this.opts.codemirror&&this.$textarea.next(".CodeMirror").hide(),this.$editor.show(),this.utils.isEmpty(e)||this.placeholder.remove(),this.caret.setOffset(this.code.offset),this.$textarea.off("keydown.redactor-textarea-indenting"),this.button.setActiveInVisual(),this.button.setInactive("html"),this.observe.load(),this.opts.visual=!0,this.core.setCallback("visual",e))},textareaIndenting:function(e){if(9!==e.keyCode)return!0;var t=this.$textarea,i=t.get(0).selectionStart;return t.val(t.val().substring(0,i)+"	"+t.val().substring(t.get(0).selectionEnd)),t.get(0).selectionStart=t.get(0).selectionEnd=i+1,!1}},t}),function(e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else{if("function"==typeof i&&i.amd)return i("codemirror/lib/codemirror",[],e);this.CodeMirror=e()}}(function(){"use strict";function e(i,n){if(!(this instanceof e))return new e(i,n);this.options=n=n?ms(n):{},ms(jo,n,!1),f(n);var s=n.value;"string"==typeof s&&(s=new nr(s,n.mode)),this.doc=s;var o=this.display=new t(i,s);o.wrapper.CodeMirror=this,d(this),l(this),n.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),n.autofocus&&!co&&St(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,cutIncoming:!1,draggingText:!1,highlight:new ls},Js&&11>Zs&&setTimeout(gs(Ct,this,!0),20),Pt(this),Ms(),Ze(this),this.curOp.forceUpdate=!0,En(this,s),n.autofocus&&!co||Cs()==o.input?setTimeout(gs(Qt,this),20):Jt(this);for(var r in Lo)Lo.hasOwnProperty(r)&&Lo[r](this,n[r],Oo);w(this);for(var a=0;a<Ho.length;++a)Ho[a](this);tt(this)}function t(e,t){var i=this,n=i.input=ws("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none");eo?n.style.width="1000px":n.setAttribute("wrap","off"),lo&&(n.style.border="1px solid black"),n.setAttribute("autocorrect","off"),n.setAttribute("autocapitalize","off"),n.setAttribute("spellcheck","false"),i.inputDiv=ws("div",[n],null,"overflow: hidden; position: relative; width: 3px; height: 0px;"),i.scrollbarH=ws("div",[ws("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar"),i.scrollbarV=ws("div",[ws("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),i.scrollbarFiller=ws("div",null,"CodeMirror-scrollbar-filler"),i.gutterFiller=ws("div",null,"CodeMirror-gutter-filler"),i.lineDiv=ws("div",null,"CodeMirror-code"),i.selectionDiv=ws("div",null,null,"position: relative; z-index: 1"),i.cursorDiv=ws("div",null,"CodeMirror-cursors"),i.measure=ws("div",null,"CodeMirror-measure"),i.lineMeasure=ws("div",null,"CodeMirror-measure"),i.lineSpace=ws("div",[i.measure,i.lineMeasure,i.selectionDiv,i.cursorDiv,i.lineDiv],null,"position: relative; outline: none"),i.mover=ws("div",[ws("div",[i.lineSpace],"CodeMirror-lines")],null,"position: relative"),i.sizer=ws("div",[i.mover],"CodeMirror-sizer"),i.heightForcer=ws("div",null,null,"position: absolute; height: "+pr+"px; width: 1px;"),i.gutters=ws("div",null,"CodeMirror-gutters"),i.lineGutter=null,i.scroller=ws("div",[i.sizer,i.heightForcer,i.gutters],"CodeMirror-scroll"),i.scroller.setAttribute("tabIndex","-1"),i.wrapper=ws("div",[i.inputDiv,i.scrollbarH,i.scrollbarV,i.scrollbarFiller,i.gutterFiller,i.scroller],"CodeMirror"),Js&&8>Zs&&(i.gutters.style.zIndex=-1,i.scroller.style.paddingRight=0),lo&&(n.style.width="0px"),eo||(i.scroller.draggable=!0),oo&&(i.inputDiv.style.height="1px",i.inputDiv.style.position="absolute"),Js&&8>Zs&&(i.scrollbarH.style.minHeight=i.scrollbarV.style.minWidth="18px"),e.appendChild?e.appendChild(i.wrapper):e(i.wrapper),i.viewFrom=i.viewTo=t.first,i.view=[],i.externalMeasured=null,i.viewOffset=0,i.lastSizeC=0,i.updateLineNumbers=null,i.lineNumWidth=i.lineNumInnerWidth=i.lineNumChars=null,i.prevInput="",i.alignWidgets=!1,i.pollingFast=!1,i.poll=new ls,i.cachedCharWidth=i.cachedTextHeight=i.cachedPaddingH=null,i.inaccurateSelection=!1,i.maxLine=null,i.maxLineLength=0,i.maxLineChanged=!1,i.wheelDX=i.wheelDY=i.wheelStartX=i.wheelStartY=null,i.shift=!1,i.selForContextMenu=null}function i(t){t.doc.mode=e.getMode(t.options,t.doc.modeOption),n(t)}function n(e){e.doc.iter(function(e){e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null)}),e.doc.frontier=e.doc.first,ke(e,100),e.state.modeGen++,e.curOp&&ft(e)}function s(e){e.options.lineWrapping?(Ds(e.display.wrapper,"CodeMirror-wrap"),e.display.sizer.style.minWidth=""):(Ts(e.display.wrapper,"CodeMirror-wrap"),p(e)),r(e),ft(e),ze(e),setTimeout(function(){v(e)},100)}function o(e){var t=Qe(e.display),i=e.options.lineWrapping,n=i&&Math.max(5,e.display.scroller.clientWidth/Je(e.display)-3);return function(s){if(tn(e.doc,s))return 0;var o=0;if(s.widgets)for(var r=0;r<s.widgets.length;r++)s.widgets[r].height&&(o+=s.widgets[r].height);return i?o+(Math.ceil(s.text.length/n)||1)*t:o+t}}function r(e){var t=e.doc,i=o(e);t.iter(function(e){var t=i(e);t!=e.height&&jn(e,t)})}function a(e){var t=qo[e.options.keyMap],i=t.style;e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-keymap-\S+/g,"")+(i?" cm-keymap-"+i:"")}function l(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),ze(e)}function c(e){d(e),ft(e),setTimeout(function(){y(e)},20)}function d(e){var t=e.display.gutters,i=e.options.gutters;_s(t);for(var n=0;n<i.length;++n){var s=i[n],o=t.appendChild(ws("div",null,"CodeMirror-gutter "+s));"CodeMirror-linenumbers"==s&&(e.display.lineGutter=o,o.style.width=(e.display.lineNumWidth||1)+"px")}t.style.display=n?"":"none",h(e)}function h(e){var t=e.display.gutters.offsetWidth;e.display.sizer.style.marginLeft=t+"px",e.display.scrollbarH.style.left=e.options.fixedGutter?t+"px":0}function u(e){if(0==e.height)return 0;for(var t,i=e.text.length,n=e;t=Gi(n);){var s=t.find(0,!0);n=s.from.line,i+=s.from.ch-s.to.ch}for(n=e;t=Ki(n);){var s=t.find(0,!0);i-=n.text.length-s.from.ch,n=s.to.line,i+=n.text.length-s.to.ch}return i}function p(e){var t=e.display,i=e.doc;t.maxLine=Mn(i,i.first),t.maxLineLength=u(t.maxLine),t.maxLineChanged=!0,i.iter(function(e){var i=u(e);i>t.maxLineLength&&(t.maxLineLength=i,t.maxLine=e)})}function f(e){var t=us(e.gutters,"CodeMirror-linenumbers");-1==t&&e.lineNumbers?e.gutters=e.gutters.concat(["CodeMirror-linenumbers"]):t>-1&&!e.lineNumbers&&(e.gutters=e.gutters.slice(0),e.gutters.splice(t,1))}function m(e){return e.display.scroller.clientHeight-e.display.wrapper.clientHeight<pr-3}function g(e){var t=e.display.scroller;return{clientHeight:t.clientHeight,barHeight:e.display.scrollbarV.clientHeight,scrollWidth:t.scrollWidth,clientWidth:t.clientWidth,hScrollbarTakesSpace:m(e),barWidth:e.display.scrollbarH.clientWidth,docHeight:Math.round(e.doc.height+De(e.display))}}function v(e,t){t||(t=g(e));var i=e.display,n=Is(i.measure),s=t.docHeight+pr,o=t.scrollWidth>t.clientWidth;o&&t.scrollWidth<=t.clientWidth+1&&n>0&&!t.hScrollbarTakesSpace&&(o=!1);var r=s>t.clientHeight;if(r?(i.scrollbarV.style.display="block",i.scrollbarV.style.bottom=o?n+"px":"0",i.scrollbarV.firstChild.style.height=Math.max(0,s-t.clientHeight+(t.barHeight||i.scrollbarV.clientHeight))+"px"):(i.scrollbarV.style.display="",i.scrollbarV.firstChild.style.height="0"),o?(i.scrollbarH.style.display="block",i.scrollbarH.style.right=r?n+"px":"0",i.scrollbarH.firstChild.style.width=t.scrollWidth-t.clientWidth+(t.barWidth||i.scrollbarH.clientWidth)+"px"):(i.scrollbarH.style.display="",i.scrollbarH.firstChild.style.width="0"),o&&r?(i.scrollbarFiller.style.display="block",i.scrollbarFiller.style.height=i.scrollbarFiller.style.width=n+"px"):i.scrollbarFiller.style.display="",o&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(i.gutterFiller.style.display="block",i.gutterFiller.style.height=n+"px",i.gutterFiller.style.width=i.gutters.offsetWidth+"px"):i.gutterFiller.style.display="",!e.state.checkedOverlayScrollbar&&t.clientHeight>0){if(0===n){var a=ho&&!ro?"12px":"18px";i.scrollbarV.style.minWidth=i.scrollbarH.style.minHeight=a;var l=function(t){es(t)!=i.scrollbarV&&es(t)!=i.scrollbarH&&ct(e,It)(t)};cr(i.scrollbarV,"mousedown",l),cr(i.scrollbarH,"mousedown",l)}e.state.checkedOverlayScrollbar=!0}}function b(e,t,i){var n=i&&null!=i.top?Math.max(0,i.top):e.scroller.scrollTop;n=Math.floor(n-Te(e));var s=i&&null!=i.bottom?i.bottom:n+e.wrapper.clientHeight,o=On(t,n),r=On(t,s);if(i&&i.ensure){var a=i.ensure.from.line,l=i.ensure.to.line;if(o>a)return{from:a,to:On(t,$n(Mn(t,a))+e.wrapper.clientHeight)};if(Math.min(l,t.lastLine())>=r)return{from:On(t,$n(Mn(t,l))-e.wrapper.clientHeight),to:l}}return{from:o,to:Math.max(r,o+1)}}function y(e){var t=e.display,i=t.view;if(t.alignWidgets||t.gutters.firstChild&&e.options.fixedGutter){for(var n=k(t)-t.scroller.scrollLeft+e.doc.scrollLeft,s=t.gutters.offsetWidth,o=n+"px",r=0;r<i.length;r++)if(!i[r].hidden){e.options.fixedGutter&&i[r].gutter&&(i[r].gutter.style.left=o);var a=i[r].alignable;if(a)for(var l=0;l<a.length;l++)a[l].style.left=o}e.options.fixedGutter&&(t.gutters.style.left=n+s+"px")}}function w(e){if(!e.options.lineNumbers)return!1;var t=e.doc,i=_(e.options,t.first+t.size-1),n=e.display;if(i.length!=n.lineNumChars){var s=n.measure.appendChild(ws("div",[ws("div",i)],"CodeMirror-linenumber CodeMirror-gutter-elt")),o=s.firstChild.offsetWidth,r=s.offsetWidth-o;return n.lineGutter.style.width="",n.lineNumInnerWidth=Math.max(o,n.lineGutter.offsetWidth-r),n.lineNumWidth=n.lineNumInnerWidth+r,n.lineNumChars=n.lineNumInnerWidth?i.length:-1,n.lineGutter.style.width=n.lineNumWidth+"px",h(e),!0}return!1}function _(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function k(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function x(e,t,i){var n=e.display;this.viewport=t,this.visible=b(n,e.doc,t),this.editorIsHidden=!n.wrapper.offsetWidth,this.wrapperHeight=n.wrapper.clientHeight,this.oldViewFrom=n.viewFrom,this.oldViewTo=n.viewTo,this.oldScrollerWidth=n.scroller.clientWidth,this.force=i,this.dims=A(e)}function C(e,t){var i=e.display,n=e.doc;if(t.editorIsHidden)return gt(e),!1;if(!t.force&&t.visible.from>=i.viewFrom&&t.visible.to<=i.viewTo&&(null==i.updateLineNumbers||i.updateLineNumbers>=i.viewTo)&&0==wt(e))return!1;w(e)&&(gt(e),t.dims=A(e));var s=n.first+n.size,o=Math.max(t.visible.from-e.options.viewportMargin,n.first),r=Math.min(s,t.visible.to+e.options.viewportMargin);i.viewFrom<o&&o-i.viewFrom<20&&(o=Math.max(n.first,i.viewFrom)),i.viewTo>r&&i.viewTo-r<20&&(r=Math.min(s,i.viewTo)),vo&&(o=Zi(e.doc,o),r=en(e.doc,r));var a=o!=i.viewFrom||r!=i.viewTo||i.lastSizeC!=t.wrapperHeight;yt(e,o,r),i.viewOffset=$n(Mn(e.doc,i.viewFrom)),e.display.mover.style.top=i.viewOffset+"px";var l=wt(e);if(!a&&0==l&&!t.force&&(null==i.updateLineNumbers||i.updateLineNumbers>=i.viewTo))return!1;var c=Cs();return l>4&&(i.lineDiv.style.display="none"),I(e,i.updateLineNumbers,t.dims),l>4&&(i.lineDiv.style.display=""),c&&Cs()!=c&&c.offsetHeight&&c.focus(),_s(i.cursorDiv),_s(i.selectionDiv),a&&(i.lastSizeC=t.wrapperHeight,ke(e,400)),i.updateLineNumbers=null,!0}function S(e,t){for(var i=t.force,n=t.viewport,s=!0;;s=!1){if(s&&e.options.lineWrapping&&t.oldScrollerWidth!=e.display.scroller.clientWidth)i=!0;else if(i=!1,n&&null!=n.top&&(n={top:Math.min(e.doc.height+De(e.display)-pr-e.display.scroller.clientHeight,n.top)}),t.visible=b(e.display,e.doc,n),t.visible.from>=e.display.viewFrom&&t.visible.to<=e.display.viewTo)break;if(!C(e,t))break;E(e);var o=g(e);be(e),D(e,o),v(e,o)}is(e,"update",e),(e.display.viewFrom!=t.oldViewFrom||e.display.viewTo!=t.oldViewTo)&&is(e,"viewportChange",e,e.display.viewFrom,e.display.viewTo)}function T(e,t){var i=new x(e,t);if(C(e,i)){E(e),S(e,i);var n=g(e);be(e),D(e,n),v(e,n)}}function D(e,t){e.display.sizer.style.minHeight=e.display.heightForcer.style.top=t.docHeight+"px",e.display.gutters.style.height=Math.max(t.docHeight,t.clientHeight-pr)+"px"}function P(e,t){e.display.sizer.offsetWidth+e.display.gutters.offsetWidth<e.display.scroller.clientWidth-1&&(e.display.sizer.style.minHeight=e.display.heightForcer.style.top="0px",e.display.gutters.style.height=t.docHeight+"px")}function E(e){for(var t=e.display,i=t.lineDiv.offsetTop,n=0;n<t.view.length;n++){var s,o=t.view[n];if(!o.hidden){if(Js&&8>Zs){var r=o.node.offsetTop+o.node.offsetHeight;s=r-i,i=r}else{var a=o.node.getBoundingClientRect();s=a.bottom-a.top}var l=o.line.height-s;if(2>s&&(s=Qe(t)),(l>.001||-.001>l)&&(jn(o.line,s),M(o.line),o.rest))for(var c=0;c<o.rest.length;c++)M(o.rest[c])}}}function M(e){if(e.widgets)for(var t=0;t<e.widgets.length;++t)e.widgets[t].height=e.widgets[t].node.offsetHeight}function A(e){for(var t=e.display,i={},n={},s=t.gutters.clientLeft,o=t.gutters.firstChild,r=0;o;o=o.nextSibling,++r)i[e.options.gutters[r]]=o.offsetLeft+o.clientLeft+s,n[e.options.gutters[r]]=o.clientWidth;return{fixedPos:k(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:i,gutterWidth:n,wrapperWidth:t.wrapper.clientWidth}}function I(e,t,i){function n(t){var i=t.nextSibling;return eo&&ho&&e.display.currentWheelTarget==t?t.style.display="none":t.parentNode.removeChild(t),i}for(var s=e.display,o=e.options.lineNumbers,r=s.lineDiv,a=r.firstChild,l=s.view,c=s.viewFrom,d=0;d<l.length;d++){var h=l[d];if(!h.hidden)if(h.node){for(;a!=h.node;)a=n(a);var u=o&&null!=t&&c>=t&&h.lineNumber;h.changes&&(us(h.changes,"gutter")>-1&&(u=!1),j(e,h,c,i)),u&&(_s(h.lineNumber),h.lineNumber.appendChild(document.createTextNode(_(e.options,c)))),a=h.node.nextSibling}else{var p=R(e,h,c,i);r.insertBefore(p,a)}c+=h.size}for(;a;)a=n(a)}function j(e,t,i,n){for(var s=0;s<t.changes.length;s++){var o=t.changes[s];"text"==o?N(e,t):"gutter"==o?H(e,t,i,n):"class"==o?F(t):"widget"==o&&z(t,n)}t.changes=null}function L(e){return e.node==e.text&&(e.node=ws("div",null,null,"position: relative"),e.text.parentNode&&e.text.parentNode.replaceChild(e.node,e.text),e.node.appendChild(e.text),Js&&8>Zs&&(e.node.style.zIndex=2)),e.node}function O(e){var t=e.bgClass?e.bgClass+" "+(e.line.bgClass||""):e.line.bgClass;if(t&&(t+=" CodeMirror-linebackground"),e.background)t?e.background.className=t:(e.background.parentNode.removeChild(e.background),e.background=null);else if(t){var i=L(e);e.background=i.insertBefore(ws("div",null,t),i.firstChild)}}function $(e,t){var i=e.display.externalMeasured;return i&&i.line==t.line?(e.display.externalMeasured=null,t.measure=i.measure,i.built):vn(e,t)}function N(e,t){var i=t.text.className,n=$(e,t);t.text==t.node&&(t.node=n.pre),t.text.parentNode.replaceChild(n.pre,t.text),t.text=n.pre,n.bgClass!=t.bgClass||n.textClass!=t.textClass?(t.bgClass=n.bgClass,t.textClass=n.textClass,F(t)):i&&(t.text.className=i)}function F(e){O(e),e.line.wrapClass?L(e).className=e.line.wrapClass:e.node!=e.text&&(e.node.className="");var t=e.textClass?e.textClass+" "+(e.line.textClass||""):e.line.textClass;e.text.className=t||""}function H(e,t,i,n){t.gutter&&(t.node.removeChild(t.gutter),t.gutter=null);var s=t.line.gutterMarkers;if(e.options.lineNumbers||s){var o=L(t),r=t.gutter=o.insertBefore(ws("div",null,"CodeMirror-gutter-wrapper","position: absolute; left: "+(e.options.fixedGutter?n.fixedPos:-n.gutterTotalWidth)+"px"),t.text);if(e.options.lineNumbers&&(!s||!s["CodeMirror-linenumbers"])&&(t.lineNumber=r.appendChild(ws("div",_(e.options,i),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+n.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+e.display.lineNumInnerWidth+"px"))),s)for(var a=0;a<e.options.gutters.length;++a){var l=e.options.gutters[a],c=s.hasOwnProperty(l)&&s[l];c&&r.appendChild(ws("div",[c],"CodeMirror-gutter-elt","left: "+n.gutterLeft[l]+"px; width: "+n.gutterWidth[l]+"px"))}}}function z(e,t){e.alignable&&(e.alignable=null);for(var i,n=e.node.firstChild;n;n=i){var i=n.nextSibling;"CodeMirror-linewidget"==n.className&&e.node.removeChild(n)}B(e,t)}function R(e,t,i,n){var s=$(e,t);return t.text=t.node=s.pre,s.bgClass&&(t.bgClass=s.bgClass),s.textClass&&(t.textClass=s.textClass),
F(t),H(e,t,i,n),B(t,n),t.node}function B(e,t){if(W(e.line,e,t,!0),e.rest)for(var i=0;i<e.rest.length;i++)W(e.rest[i],e,t,!1)}function W(e,t,i,n){if(e.widgets)for(var s=L(t),o=0,r=e.widgets;o<r.length;++o){var a=r[o],l=ws("div",[a.node],"CodeMirror-linewidget");a.handleMouseEvents||(l.ignoreEvents=!0),q(a,l,t,i),n&&a.above?s.insertBefore(l,t.gutter||t.text):s.appendChild(l),is(a,"redraw")}}function q(e,t,i,n){if(e.noHScroll){(i.alignable||(i.alignable=[])).push(t);var s=n.wrapperWidth;t.style.left=n.fixedPos+"px",e.coverGutter||(s-=n.gutterTotalWidth,t.style.paddingLeft=n.gutterTotalWidth+"px"),t.style.width=s+"px"}e.coverGutter&&(t.style.zIndex=5,t.style.position="relative",e.noHScroll||(t.style.marginLeft=-n.gutterTotalWidth+"px"))}function U(e){return bo(e.line,e.ch)}function V(e,t){return yo(e,t)<0?t:e}function Y(e,t){return yo(e,t)<0?e:t}function G(e,t){this.ranges=e,this.primIndex=t}function K(e,t){this.anchor=e,this.head=t}function X(e,t){var i=e[t];e.sort(function(e,t){return yo(e.from(),t.from())}),t=us(e,i);for(var n=1;n<e.length;n++){var s=e[n],o=e[n-1];if(yo(o.to(),s.from())>=0){var r=Y(o.from(),s.from()),a=V(o.to(),s.to()),l=o.empty()?s.from()==s.head:o.from()==o.head;t>=n&&--t,e.splice(--n,2,new K(l?a:r,l?r:a))}}return new G(e,t)}function Q(e,t){return new G([new K(e,t||e)],0)}function J(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function Z(e,t){if(t.line<e.first)return bo(e.first,0);var i=e.first+e.size-1;return t.line>i?bo(i,Mn(e,i).text.length):ee(t,Mn(e,t.line).text.length)}function ee(e,t){var i=e.ch;return null==i||i>t?bo(e.line,t):0>i?bo(e.line,0):e}function te(e,t){return t>=e.first&&t<e.first+e.size}function ie(e,t){for(var i=[],n=0;n<t.length;n++)i[n]=Z(e,t[n]);return i}function ne(e,t,i,n){if(e.cm&&e.cm.display.shift||e.extend){var s=t.anchor;if(n){var o=yo(i,s)<0;o!=yo(n,s)<0?(s=i,i=n):o!=yo(i,n)<0&&(i=n)}return new K(s,i)}return new K(n||i,i)}function se(e,t,i,n){de(e,new G([ne(e,e.sel.primary(),t,i)],0),n)}function oe(e,t,i){for(var n=[],s=0;s<e.sel.ranges.length;s++)n[s]=ne(e,e.sel.ranges[s],t[s],null);var o=X(n,e.sel.primIndex);de(e,o,i)}function re(e,t,i,n){var s=e.sel.ranges.slice(0);s[t]=i,de(e,X(s,e.sel.primIndex),n)}function ae(e,t,i,n){de(e,Q(t,i),n)}function le(e,t){var i={ranges:t.ranges,update:function(t){this.ranges=[];for(var i=0;i<t.length;i++)this.ranges[i]=new K(Z(e,t[i].anchor),Z(e,t[i].head))}};return hr(e,"beforeSelectionChange",e,i),e.cm&&hr(e.cm,"beforeSelectionChange",e.cm,i),i.ranges!=t.ranges?X(i.ranges,i.ranges.length-1):t}function ce(e,t,i){var n=e.history.done,s=hs(n);s&&s.ranges?(n[n.length-1]=t,he(e,t,i)):de(e,t,i)}function de(e,t,i){he(e,t,i),qn(e,e.sel,e.cm?e.cm.curOp.id:NaN,i)}function he(e,t,i){(rs(e,"beforeSelectionChange")||e.cm&&rs(e.cm,"beforeSelectionChange"))&&(t=le(e,t));var n=i&&i.bias||(yo(t.primary().head,e.sel.primary().head)<0?-1:1);ue(e,fe(e,t,n,!0)),(!i||i.scroll!==!1)&&e.cm&&bi(e.cm)}function ue(e,t){t.equals(e.sel)||(e.sel=t,e.cm&&(e.cm.curOp.updateInput=e.cm.curOp.selectionChanged=!0,os(e.cm)),is(e,"cursorActivity",e))}function pe(e){ue(e,fe(e,e.sel,null,!1),mr)}function fe(e,t,i,n){for(var s,o=0;o<t.ranges.length;o++){var r=t.ranges[o],a=me(e,r.anchor,i,n),l=me(e,r.head,i,n);(s||a!=r.anchor||l!=r.head)&&(s||(s=t.ranges.slice(0,o)),s[o]=new K(a,l))}return s?X(s,t.primIndex):t}function me(e,t,i,n){var s=!1,o=t,r=i||1;e.cantEdit=!1;e:for(;;){var a=Mn(e,o.line);if(a.markedSpans)for(var l=0;l<a.markedSpans.length;++l){var c=a.markedSpans[l],d=c.marker;if((null==c.from||(d.inclusiveLeft?c.from<=o.ch:c.from<o.ch))&&(null==c.to||(d.inclusiveRight?c.to>=o.ch:c.to>o.ch))){if(n&&(hr(d,"beforeCursorEnter"),d.explicitlyCleared)){if(!a.markedSpans)break;--l;continue}if(!d.atomic)continue;var h=d.find(0>r?-1:1);if(0==yo(h,o)&&(h.ch+=r,h.ch<0?h=h.line>e.first?Z(e,bo(h.line-1)):null:h.ch>a.text.length&&(h=h.line<e.first+e.size-1?bo(h.line+1,0):null),!h)){if(s)return n?(e.cantEdit=!0,bo(e.first,0)):me(e,t,i,!0);s=!0,h=t,r=-r}o=h;continue e}}return o}}function ge(e){for(var t=e.display,i=e.doc,n={},s=n.cursors=document.createDocumentFragment(),o=n.selection=document.createDocumentFragment(),r=0;r<i.sel.ranges.length;r++){var a=i.sel.ranges[r],l=a.empty();(l||e.options.showCursorWhenSelecting)&&ye(e,a,s),l||we(e,a,o)}if(e.options.moveInputWithCursor){var c=Ve(e,i.sel.primary().head,"div"),d=t.wrapper.getBoundingClientRect(),h=t.lineDiv.getBoundingClientRect();n.teTop=Math.max(0,Math.min(t.wrapper.clientHeight-10,c.top+h.top-d.top)),n.teLeft=Math.max(0,Math.min(t.wrapper.clientWidth-10,c.left+h.left-d.left))}return n}function ve(e,t){ks(e.display.cursorDiv,t.cursors),ks(e.display.selectionDiv,t.selection),null!=t.teTop&&(e.display.inputDiv.style.top=t.teTop+"px",e.display.inputDiv.style.left=t.teLeft+"px")}function be(e){ve(e,ge(e))}function ye(e,t,i){var n=Ve(e,t.head,"div",null,null,!e.options.singleCursorHeightPerLine),s=i.appendChild(ws("div","\xa0","CodeMirror-cursor"));if(s.style.left=n.left+"px",s.style.top=n.top+"px",s.style.height=Math.max(0,n.bottom-n.top)*e.options.cursorHeight+"px",n.other){var o=i.appendChild(ws("div","\xa0","CodeMirror-cursor CodeMirror-secondarycursor"));o.style.display="",o.style.left=n.other.left+"px",o.style.top=n.other.top+"px",o.style.height=.85*(n.other.bottom-n.other.top)+"px"}}function we(e,t,i){function n(e,t,i,n){0>t&&(t=0),t=Math.round(t),n=Math.round(n),a.appendChild(ws("div",null,"CodeMirror-selected","position: absolute; left: "+e+"px; top: "+t+"px; width: "+(null==i?d-e:i)+"px; height: "+(n-t)+"px"))}function s(t,i,s){function o(i,n){return Ue(e,bo(t,i),"div",h,n)}var a,l,h=Mn(r,t),u=h.text.length;return $s(Nn(h),i||0,null==s?u:s,function(e,t,r){var h,p,f,m=o(e,"left");if(e==t)h=m,p=f=m.left;else{if(h=o(t-1,"right"),"rtl"==r){var g=m;m=h,h=g}p=m.left,f=h.right}null==i&&0==e&&(p=c),h.top-m.top>3&&(n(p,m.top,null,m.bottom),p=c,m.bottom<h.top&&n(p,m.bottom,null,h.top)),null==s&&t==u&&(f=d),(!a||m.top<a.top||m.top==a.top&&m.left<a.left)&&(a=m),(!l||h.bottom>l.bottom||h.bottom==l.bottom&&h.right>l.right)&&(l=h),c+1>p&&(p=c),n(p,h.top,f-p,h.bottom)}),{start:a,end:l}}var o=e.display,r=e.doc,a=document.createDocumentFragment(),l=Pe(e.display),c=l.left,d=o.lineSpace.offsetWidth-l.right,h=t.from(),u=t.to();if(h.line==u.line)s(h.line,h.ch,u.ch);else{var p=Mn(r,h.line),f=Mn(r,u.line),m=Qi(p)==Qi(f),g=s(h.line,h.ch,m?p.text.length+1:null).end,v=s(u.line,m?0:null,u.ch).start;m&&(g.top<v.top-2?(n(g.right,g.top,null,g.bottom),n(c,v.top,v.left,v.bottom)):n(g.right,g.top,v.left-g.right,g.bottom)),g.bottom<v.top&&n(c,g.bottom,null,v.top)}i.appendChild(a)}function _e(e){if(e.state.focused){var t=e.display;clearInterval(t.blinker);var i=!0;t.cursorDiv.style.visibility="",e.options.cursorBlinkRate>0?t.blinker=setInterval(function(){t.cursorDiv.style.visibility=(i=!i)?"":"hidden"},e.options.cursorBlinkRate):e.options.cursorBlinkRate<0&&(t.cursorDiv.style.visibility="hidden")}}function ke(e,t){e.doc.mode.startState&&e.doc.frontier<e.display.viewTo&&e.state.highlight.set(t,gs(xe,e))}function xe(e){var t=e.doc;if(t.frontier<t.first&&(t.frontier=t.first),!(t.frontier>=e.display.viewTo)){var i=+new Date+e.options.workTime,n=Ro(t.mode,Se(e,t.frontier)),s=[];t.iter(t.frontier,Math.min(t.first+t.size,e.display.viewTo+500),function(o){if(t.frontier>=e.display.viewFrom){var r=o.styles,a=pn(e,o,n,!0);o.styles=a.styles;var l=o.styleClasses,c=a.classes;c?o.styleClasses=c:l&&(o.styleClasses=null);for(var d=!r||r.length!=o.styles.length||l!=c&&(!l||!c||l.bgClass!=c.bgClass||l.textClass!=c.textClass),h=0;!d&&h<r.length;++h)d=r[h]!=o.styles[h];d&&s.push(t.frontier),o.stateAfter=Ro(t.mode,n)}else mn(e,o.text,n),o.stateAfter=t.frontier%5==0?Ro(t.mode,n):null;return++t.frontier,+new Date>i?(ke(e,e.options.workDelay),!0):void 0}),s.length&&lt(e,function(){for(var t=0;t<s.length;t++)mt(e,s[t],"text")})}}function Ce(e,t,i){for(var n,s,o=e.doc,r=i?-1:t-(e.doc.mode.innerMode?1e3:100),a=t;a>r;--a){if(a<=o.first)return o.first;var l=Mn(o,a-1);if(l.stateAfter&&(!i||a<=o.frontier))return a;var c=br(l.text,null,e.options.tabSize);(null==s||n>c)&&(s=a-1,n=c)}return s}function Se(e,t,i){var n=e.doc,s=e.display;if(!n.mode.startState)return!0;var o=Ce(e,t,i),r=o>n.first&&Mn(n,o-1).stateAfter;return r=r?Ro(n.mode,r):Bo(n.mode),n.iter(o,t,function(i){mn(e,i.text,r);var a=o==t-1||o%5==0||o>=s.viewFrom&&o<s.viewTo;i.stateAfter=a?Ro(n.mode,r):null,++o}),i&&(n.frontier=o),r}function Te(e){return e.lineSpace.offsetTop}function De(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function Pe(e){if(e.cachedPaddingH)return e.cachedPaddingH;var t=ks(e.measure,ws("pre","x")),i=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,n={left:parseInt(i.paddingLeft),right:parseInt(i.paddingRight)};return!isNaN(n.left)&&!isNaN(n.right)&&(e.cachedPaddingH=n),n}function Ee(e,t,i){var n=e.options.lineWrapping,s=n&&e.display.scroller.clientWidth;if(!t.measure.heights||n&&t.measure.width!=s){var o=t.measure.heights=[];if(n){t.measure.width=s;for(var r=t.text.firstChild.getClientRects(),a=0;a<r.length-1;a++){var l=r[a],c=r[a+1];Math.abs(l.bottom-c.bottom)>2&&o.push((l.bottom+c.top)/2-i.top)}}o.push(i.bottom-i.top)}}function Me(e,t,i){if(e.line==t)return{map:e.measure.map,cache:e.measure.cache};for(var n=0;n<e.rest.length;n++)if(e.rest[n]==t)return{map:e.measure.maps[n],cache:e.measure.caches[n]};for(var n=0;n<e.rest.length;n++)if(Ln(e.rest[n])>i)return{map:e.measure.maps[n],cache:e.measure.caches[n],before:!0}}function Ae(e,t){t=Qi(t);var i=Ln(t),n=e.display.externalMeasured=new ut(e.doc,t,i);n.lineN=i;var s=n.built=vn(e,n);return n.text=s.pre,ks(e.display.lineMeasure,s.pre),n}function Ie(e,t,i,n){return Oe(e,Le(e,t),i,n)}function je(e,t){if(t>=e.display.viewFrom&&t<e.display.viewTo)return e.display.view[vt(e,t)];var i=e.display.externalMeasured;return i&&t>=i.lineN&&t<i.lineN+i.size?i:void 0}function Le(e,t){var i=Ln(t),n=je(e,i);n&&!n.text?n=null:n&&n.changes&&j(e,n,i,A(e)),n||(n=Ae(e,t));var s=Me(n,t,i);return{line:t,view:n,rect:null,map:s.map,cache:s.cache,before:s.before,hasHeights:!1}}function Oe(e,t,i,n,s){t.before&&(i=-1);var o,r=i+(n||"");return t.cache.hasOwnProperty(r)?o=t.cache[r]:(t.rect||(t.rect=t.view.text.getBoundingClientRect()),t.hasHeights||(Ee(e,t.view,t.rect),t.hasHeights=!0),o=$e(e,t,i,n),o.bogus||(t.cache[r]=o)),{left:o.left,right:o.right,top:s?o.rtop:o.top,bottom:s?o.rbottom:o.bottom}}function $e(e,t,i,n){for(var s,o,r,a,l=t.map,c=0;c<l.length;c+=3){var d=l[c],h=l[c+1];if(d>i?(o=0,r=1,a="left"):h>i?(o=i-d,r=o+1):(c==l.length-3||i==h&&l[c+3]>i)&&(r=h-d,o=r-1,i>=h&&(a="right")),null!=o){if(s=l[c+2],d==h&&n==(s.insertLeft?"left":"right")&&(a=n),"left"==n&&0==o)for(;c&&l[c-2]==l[c-3]&&l[c-1].insertLeft;)s=l[(c-=3)+2],a="left";if("right"==n&&o==h-d)for(;c<l.length-3&&l[c+3]==l[c+4]&&!l[c+5].insertLeft;)s=l[(c+=3)+2],a="right";break}}var u;if(3==s.nodeType){for(var c=0;4>c;c++){for(;o&&ys(t.line.text.charAt(d+o));)--o;for(;h>d+r&&ys(t.line.text.charAt(d+r));)++r;if(Js&&9>Zs&&0==o&&r==h-d)u=s.parentNode.getBoundingClientRect();else if(Js&&e.options.lineWrapping){var p=_r(s,o,r).getClientRects();u=p.length?p["right"==n?p.length-1:0]:xo}else u=_r(s,o,r).getBoundingClientRect()||xo;if(u.left||u.right||0==o)break;r=o,o-=1,a="right"}Js&&11>Zs&&(u=Ne(e.display.measure,u))}else{o>0&&(a=n="right");var p;u=e.options.lineWrapping&&(p=s.getClientRects()).length>1?p["right"==n?p.length-1:0]:s.getBoundingClientRect()}if(Js&&9>Zs&&!o&&(!u||!u.left&&!u.right)){var f=s.parentNode.getClientRects()[0];u=f?{left:f.left,right:f.left+Je(e.display),top:f.top,bottom:f.bottom}:xo}for(var m=u.top-t.rect.top,g=u.bottom-t.rect.top,v=(m+g)/2,b=t.view.measure.heights,c=0;c<b.length-1&&!(v<b[c]);c++);var y=c?b[c-1]:0,w=b[c],_={left:("right"==a?u.right:u.left)-t.rect.left,right:("left"==a?u.left:u.right)-t.rect.left,top:y,bottom:w};return!u.left&&!u.right&&(_.bogus=!0),e.options.singleCursorHeightPerLine||(_.rtop=m,_.rbottom=g),_}function Ne(e,t){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!Os(e))return t;var i=screen.logicalXDPI/screen.deviceXDPI,n=screen.logicalYDPI/screen.deviceYDPI;return{left:t.left*i,right:t.right*i,top:t.top*n,bottom:t.bottom*n}}function Fe(e){if(e.measure&&(e.measure.cache={},e.measure.heights=null,e.rest))for(var t=0;t<e.rest.length;t++)e.measure.caches[t]={}}function He(e){e.display.externalMeasure=null,_s(e.display.lineMeasure);for(var t=0;t<e.display.view.length;t++)Fe(e.display.view[t])}function ze(e){He(e),e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function Re(){return window.pageXOffset||(document.documentElement||document.body).scrollLeft}function Be(){return window.pageYOffset||(document.documentElement||document.body).scrollTop}function We(e,t,i,n){if(t.widgets)for(var s=0;s<t.widgets.length;++s)if(t.widgets[s].above){var o=on(t.widgets[s]);i.top+=o,i.bottom+=o}if("line"==n)return i;n||(n="local");var r=$n(t);if("local"==n?r+=Te(e.display):r-=e.display.viewOffset,"page"==n||"window"==n){var a=e.display.lineSpace.getBoundingClientRect();r+=a.top+("window"==n?0:Be());var l=a.left+("window"==n?0:Re());i.left+=l,i.right+=l}return i.top+=r,i.bottom+=r,i}function qe(e,t,i){if("div"==i)return t;var n=t.left,s=t.top;if("page"==i)n-=Re(),s-=Be();else if("local"==i||!i){var o=e.display.sizer.getBoundingClientRect();n+=o.left,s+=o.top}var r=e.display.lineSpace.getBoundingClientRect();return{left:n-r.left,top:s-r.top}}function Ue(e,t,i,n,s){return n||(n=Mn(e.doc,t.line)),We(e,n,Ie(e,n,t.ch,s),i)}function Ve(e,t,i,n,s,o){function r(t,r){var a=Oe(e,s,t,r?"right":"left",o);return r?a.left=a.right:a.right=a.left,We(e,n,a,i)}function a(e,t){var i=l[t],n=i.level%2;return e==Ns(i)&&t&&i.level<l[t-1].level?(i=l[--t],e=Fs(i)-(i.level%2?0:1),n=!0):e==Fs(i)&&t<l.length-1&&i.level<l[t+1].level&&(i=l[++t],e=Ns(i)-i.level%2,n=!1),n&&e==i.to&&e>i.from?r(e-1):r(e,n)}n=n||Mn(e.doc,t.line),s||(s=Le(e,n));var l=Nn(n),c=t.ch;if(!l)return r(c);var d=Us(l,c),h=a(c,d);return null!=Or&&(h.other=a(c,Or)),h}function Ye(e,t){var i=0,t=Z(e.doc,t);e.options.lineWrapping||(i=Je(e.display)*t.ch);var n=Mn(e.doc,t.line),s=$n(n)+Te(e.display);return{left:i,right:i,top:s,bottom:s+n.height}}function Ge(e,t,i,n){var s=bo(e,t);return s.xRel=n,i&&(s.outside=!0),s}function Ke(e,t,i){var n=e.doc;if(i+=e.display.viewOffset,0>i)return Ge(n.first,0,!0,-1);var s=On(n,i),o=n.first+n.size-1;if(s>o)return Ge(n.first+n.size-1,Mn(n,o).text.length,!0,1);0>t&&(t=0);for(var r=Mn(n,s);;){var a=Xe(e,r,s,t,i),l=Ki(r),c=l&&l.find(0,!0);if(!l||!(a.ch>c.from.ch||a.ch==c.from.ch&&a.xRel>0))return a;s=Ln(r=c.to.line)}}function Xe(e,t,i,n,s){function o(n){var s=Ve(e,bo(i,n),"line",t,c);return a=!0,r>s.bottom?s.left-l:r<s.top?s.left+l:(a=!1,s.left)}var r=s-$n(t),a=!1,l=2*e.display.wrapper.clientWidth,c=Le(e,t),d=Nn(t),h=t.text.length,u=Hs(t),p=zs(t),f=o(u),m=a,g=o(p),v=a;if(n>g)return Ge(i,p,v,1);for(;;){if(d?p==u||p==Ys(t,u,1):1>=p-u){for(var b=f>n||g-n>=n-f?u:p,y=n-(b==u?f:g);ys(t.text.charAt(b));)++b;var w=Ge(i,b,b==u?m:v,-1>y?-1:y>1?1:0);return w}var _=Math.ceil(h/2),k=u+_;if(d){k=u;for(var x=0;_>x;++x)k=Ys(t,k,1)}var C=o(k);C>n?(p=k,g=C,(v=a)&&(g+=1e3),h=_):(u=k,f=C,m=a,h-=_)}}function Qe(e){if(null!=e.cachedTextHeight)return e.cachedTextHeight;if(null==wo){wo=ws("pre");for(var t=0;49>t;++t)wo.appendChild(document.createTextNode("x")),wo.appendChild(ws("br"));wo.appendChild(document.createTextNode("x"))}ks(e.measure,wo);var i=wo.offsetHeight/50;return i>3&&(e.cachedTextHeight=i),_s(e.measure),i||1}function Je(e){if(null!=e.cachedCharWidth)return e.cachedCharWidth;var t=ws("span","xxxxxxxxxx"),i=ws("pre",[t]);ks(e.measure,i);var n=t.getBoundingClientRect(),s=(n.right-n.left)/10;return s>2&&(e.cachedCharWidth=s),s||10}function Ze(e){e.curOp={cm:e,viewChanged:!1,startHeight:e.doc.height,forceUpdate:!1,updateInput:null,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,id:++So},Co?Co.ops.push(e.curOp):e.curOp.ownsGroup=Co={ops:[e.curOp],delayedCallbacks:[]}}function et(e){var t=e.delayedCallbacks,i=0;do{for(;i<t.length;i++)t[i]();for(var n=0;n<e.ops.length;n++){var s=e.ops[n];if(s.cursorActivityHandlers)for(;s.cursorActivityCalled<s.cursorActivityHandlers.length;)s.cursorActivityHandlers[s.cursorActivityCalled++](s.cm)}}while(i<t.length)}function tt(e){var t=e.curOp,i=t.ownsGroup;if(i)try{et(i)}finally{Co=null;for(var n=0;n<i.ops.length;n++)i.ops[n].cm.curOp=null;it(i)}}function it(e){for(var t=e.ops,i=0;i<t.length;i++)nt(t[i]);for(var i=0;i<t.length;i++)st(t[i]);for(var i=0;i<t.length;i++)ot(t[i]);for(var i=0;i<t.length;i++)rt(t[i]);for(var i=0;i<t.length;i++)at(t[i])}function nt(e){var t=e.cm,i=t.display;e.updateMaxLine&&p(t),e.mustUpdate=e.viewChanged||e.forceUpdate||null!=e.scrollTop||e.scrollToPos&&(e.scrollToPos.from.line<i.viewFrom||e.scrollToPos.to.line>=i.viewTo)||i.maxLineChanged&&t.options.lineWrapping,e.update=e.mustUpdate&&new x(t,e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate)}function st(e){e.updatedDisplay=e.mustUpdate&&C(e.cm,e.update)}function ot(e){var t=e.cm,i=t.display;e.updatedDisplay&&E(t),e.barMeasure=g(t),i.maxLineChanged&&!t.options.lineWrapping&&(e.adjustWidthTo=Ie(t,i.maxLine,i.maxLine.text.length).left+3,e.maxScrollLeft=Math.max(0,i.sizer.offsetLeft+e.adjustWidthTo+pr-i.scroller.clientWidth)),(e.updatedDisplay||e.selectionChanged)&&(e.newSelectionNodes=ge(t))}function rt(e){var t=e.cm;null!=e.adjustWidthTo&&(t.display.sizer.style.minWidth=e.adjustWidthTo+"px",e.maxScrollLeft<t.doc.scrollLeft&&Rt(t,Math.min(t.display.scroller.scrollLeft,e.maxScrollLeft),!0),t.display.maxLineChanged=!1),e.newSelectionNodes&&ve(t,e.newSelectionNodes),e.updatedDisplay&&D(t,e.barMeasure),(e.updatedDisplay||e.startHeight!=t.doc.height)&&v(t,e.barMeasure),e.selectionChanged&&_e(t),t.state.focused&&e.updateInput&&Ct(t,e.typing)}function at(e){var t=e.cm,i=t.display,n=t.doc;if(null!=e.adjustWidthTo&&Math.abs(e.barMeasure.scrollWidth-t.display.scroller.scrollWidth)>1&&v(t),e.updatedDisplay&&S(t,e.update),null!=i.wheelStartX&&(null!=e.scrollTop||null!=e.scrollLeft||e.scrollToPos)&&(i.wheelStartX=i.wheelStartY=null),null!=e.scrollTop&&(i.scroller.scrollTop!=e.scrollTop||e.forceScroll)){var s=Math.max(0,Math.min(i.scroller.scrollHeight-i.scroller.clientHeight,e.scrollTop));i.scroller.scrollTop=i.scrollbarV.scrollTop=n.scrollTop=s}if(null!=e.scrollLeft&&(i.scroller.scrollLeft!=e.scrollLeft||e.forceScroll)){var o=Math.max(0,Math.min(i.scroller.scrollWidth-i.scroller.clientWidth,e.scrollLeft));i.scroller.scrollLeft=i.scrollbarH.scrollLeft=n.scrollLeft=o,y(t)}if(e.scrollToPos){var r=fi(t,Z(n,e.scrollToPos.from),Z(n,e.scrollToPos.to),e.scrollToPos.margin);e.scrollToPos.isCursor&&t.state.focused&&pi(t,r)}var a=e.maybeHiddenMarkers,l=e.maybeUnhiddenMarkers;if(a)for(var c=0;c<a.length;++c)a[c].lines.length||hr(a[c],"hide");if(l)for(var c=0;c<l.length;++c)l[c].lines.length&&hr(l[c],"unhide");i.wrapper.offsetHeight&&(n.scrollTop=t.display.scroller.scrollTop),e.updatedDisplay&&eo&&(t.options.lineWrapping&&P(t,e.barMeasure),e.barMeasure.scrollWidth>e.barMeasure.clientWidth&&e.barMeasure.scrollWidth<e.barMeasure.clientWidth+1&&!m(t)&&v(t)),e.changeObjs&&hr(t,"changes",t,e.changeObjs)}function lt(e,t){if(e.curOp)return t();Ze(e);try{return t()}finally{tt(e)}}function ct(e,t){return function(){if(e.curOp)return t.apply(e,arguments);Ze(e);try{return t.apply(e,arguments)}finally{tt(e)}}}function dt(e){return function(){if(this.curOp)return e.apply(this,arguments);Ze(this);try{return e.apply(this,arguments)}finally{tt(this)}}}function ht(e){return function(){var t=this.cm;if(!t||t.curOp)return e.apply(this,arguments);Ze(t);try{return e.apply(this,arguments)}finally{tt(t)}}}function ut(e,t,i){this.line=t,this.rest=Ji(t),this.size=this.rest?Ln(hs(this.rest))-i+1:1,this.node=this.text=null,this.hidden=tn(e,t)}function pt(e,t,i){for(var n,s=[],o=t;i>o;o=n){var r=new ut(e.doc,Mn(e.doc,o),o);n=o+r.size,s.push(r)}return s}function ft(e,t,i,n){null==t&&(t=e.doc.first),null==i&&(i=e.doc.first+e.doc.size),n||(n=0);var s=e.display;if(n&&i<s.viewTo&&(null==s.updateLineNumbers||s.updateLineNumbers>t)&&(s.updateLineNumbers=t),e.curOp.viewChanged=!0,t>=s.viewTo)vo&&Zi(e.doc,t)<s.viewTo&&gt(e);else if(i<=s.viewFrom)vo&&en(e.doc,i+n)>s.viewFrom?gt(e):(s.viewFrom+=n,s.viewTo+=n);else if(t<=s.viewFrom&&i>=s.viewTo)gt(e);else if(t<=s.viewFrom){var o=bt(e,i,i+n,1);o?(s.view=s.view.slice(o.index),s.viewFrom=o.lineN,s.viewTo+=n):gt(e)}else if(i>=s.viewTo){var o=bt(e,t,t,-1);o?(s.view=s.view.slice(0,o.index),s.viewTo=o.lineN):gt(e)}else{var r=bt(e,t,t,-1),a=bt(e,i,i+n,1);r&&a?(s.view=s.view.slice(0,r.index).concat(pt(e,r.lineN,a.lineN)).concat(s.view.slice(a.index)),s.viewTo+=n):gt(e)}var l=s.externalMeasured;l&&(i<l.lineN?l.lineN+=n:t<l.lineN+l.size&&(s.externalMeasured=null))}function mt(e,t,i){e.curOp.viewChanged=!0;var n=e.display,s=e.display.externalMeasured;if(s&&t>=s.lineN&&t<s.lineN+s.size&&(n.externalMeasured=null),!(t<n.viewFrom||t>=n.viewTo)){var o=n.view[vt(e,t)];if(null!=o.node){var r=o.changes||(o.changes=[]);-1==us(r,i)&&r.push(i)}}}function gt(e){e.display.viewFrom=e.display.viewTo=e.doc.first,e.display.view=[],e.display.viewOffset=0}function vt(e,t){if(t>=e.display.viewTo)return null;if(t-=e.display.viewFrom,0>t)return null;for(var i=e.display.view,n=0;n<i.length;n++)if(t-=i[n].size,0>t)return n}function bt(e,t,i,n){var s,o=vt(e,t),r=e.display.view;if(!vo||i==e.doc.first+e.doc.size)return{index:o,lineN:i};for(var a=0,l=e.display.viewFrom;o>a;a++)l+=r[a].size;if(l!=t){if(n>0){if(o==r.length-1)return null;s=l+r[o].size-t,o++}else s=l-t;t+=s,i+=s}for(;Zi(e.doc,i)!=i;){if(o==(0>n?0:r.length-1))return null;i+=n*r[o-(0>n?1:0)].size,o+=n}return{index:o,lineN:i}}function yt(e,t,i){var n=e.display,s=n.view;0==s.length||t>=n.viewTo||i<=n.viewFrom?(n.view=pt(e,t,i),n.viewFrom=t):(n.viewFrom>t?n.view=pt(e,t,n.viewFrom).concat(n.view):n.viewFrom<t&&(n.view=n.view.slice(vt(e,t))),n.viewFrom=t,n.viewTo<i?n.view=n.view.concat(pt(e,n.viewTo,i)):n.viewTo>i&&(n.view=n.view.slice(0,vt(e,i)))),n.viewTo=i}function wt(e){for(var t=e.display.view,i=0,n=0;n<t.length;n++){var s=t[n];!s.hidden&&(!s.node||s.changes)&&++i}return i}function _t(e){e.display.pollingFast||e.display.poll.set(e.options.pollInterval,function(){xt(e),e.state.focused&&_t(e)})}function kt(e){function t(){var n=xt(e);n||i?(e.display.pollingFast=!1,_t(e)):(i=!0,e.display.poll.set(60,t))}var i=!1;e.display.pollingFast=!0,e.display.poll.set(20,t)}function xt(e){var t=e.display.input,i=e.display.prevInput,n=e.doc;if(!e.state.focused||Ar(t)&&!i||Dt(e)||e.options.disableInput)return!1;e.state.pasteIncoming&&e.state.fakedLastChar&&(t.value=t.value.substring(0,t.value.length-1),e.state.fakedLastChar=!1);var s=t.value;if(s==i&&!e.somethingSelected())return!1;if(Js&&Zs>=9&&e.display.inputHasSelection===s||ho&&/[\uf700-\uf7ff]/.test(s))return Ct(e),!1;var o=!e.curOp;o&&Ze(e),e.display.shift=!1,8203==s.charCodeAt(0)&&n.sel==e.display.selForContextMenu&&!i&&(i="\u200b");for(var r=0,a=Math.min(i.length,s.length);a>r&&i.charCodeAt(r)==s.charCodeAt(r);)++r;var l=s.slice(r),c=Mr(l),d=null;e.state.pasteIncoming&&n.sel.ranges.length>1&&(To&&To.join("\n")==l?d=n.sel.ranges.length%To.length==0&&ps(To,Mr):c.length==n.sel.ranges.length&&(d=ps(c,function(e){return[e]})));for(var h=n.sel.ranges.length-1;h>=0;h--){var u=n.sel.ranges[h],p=u.from(),f=u.to();r<i.length?p=bo(p.line,p.ch-(i.length-r)):e.state.overwrite&&u.empty()&&!e.state.pasteIncoming&&(f=bo(f.line,Math.min(Mn(n,f.line).text.length,f.ch+hs(c).length)));var m=e.curOp.updateInput,g={from:p,to:f,text:d?d[h%d.length]:c,origin:e.state.pasteIncoming?"paste":e.state.cutIncoming?"cut":"+input"};if(ri(e.doc,g),is(e,"inputRead",e,g),l&&!e.state.pasteIncoming&&e.options.electricChars&&e.options.smartIndent&&u.head.ch<100&&(!h||n.sel.ranges[h-1].head.line!=u.head.line)){var v=e.getModeAt(u.head),b=Io(g);if(v.electricChars){for(var y=0;y<v.electricChars.length;y++)if(l.indexOf(v.electricChars.charAt(y))>-1){wi(e,b.line,"smart");break}}else v.electricInput&&v.electricInput.test(Mn(n,b.line).text.slice(0,b.ch))&&wi(e,b.line,"smart")}}return bi(e),e.curOp.updateInput=m,e.curOp.typing=!0,s.length>1e3||s.indexOf("\n")>-1?t.value=e.display.prevInput="":e.display.prevInput=s,o&&tt(e),e.state.pasteIncoming=e.state.cutIncoming=!1,!0}function Ct(e,t){var i,n,s=e.doc;if(e.somethingSelected()){e.display.prevInput="";var o=s.sel.primary();i=Ir&&(o.to().line-o.from().line>100||(n=e.getSelection()).length>1e3);var r=i?"-":n||e.getSelection();e.display.input.value=r,e.state.focused&&wr(e.display.input),Js&&Zs>=9&&(e.display.inputHasSelection=r)}else t||(e.display.prevInput=e.display.input.value="",Js&&Zs>=9&&(e.display.inputHasSelection=null));e.display.inaccurateSelection=i}function St(e){"nocursor"!=e.options.readOnly&&(!co||Cs()!=e.display.input)&&e.display.input.focus()}function Tt(e){e.state.focused||(St(e),Qt(e))}function Dt(e){return e.options.readOnly||e.doc.cantEdit}function Pt(e){function t(){e.state.focused&&setTimeout(gs(St,e),0)}function i(t){ss(e,t)||lr(t)}function n(t){if(e.somethingSelected())To=e.getSelections(),s.inaccurateSelection&&(s.prevInput="",s.inaccurateSelection=!1,s.input.value=To.join("\n"),wr(s.input));else{for(var i=[],n=[],o=0;o<e.doc.sel.ranges.length;o++){var r=e.doc.sel.ranges[o].head.line,a={anchor:bo(r,0),head:bo(r+1,0)};n.push(a),i.push(e.getRange(a.anchor,a.head))}"cut"==t.type?e.setSelections(n,null,mr):(s.prevInput="",s.input.value=i.join("\n"),wr(s.input)),To=i}"cut"==t.type&&(e.state.cutIncoming=!0)}var s=e.display;cr(s.scroller,"mousedown",ct(e,It)),Js&&11>Zs?cr(s.scroller,"dblclick",ct(e,function(t){if(!ss(e,t)){var i=At(e,t);if(i&&!Nt(e,t)&&!Mt(e.display,t)){rr(t);var n=e.findWordAt(i);se(e.doc,n.anchor,n.head)}}})):cr(s.scroller,"dblclick",function(t){ss(e,t)||rr(t)}),cr(s.lineSpace,"selectstart",function(e){Mt(s,e)||rr(e)}),mo||cr(s.scroller,"contextmenu",function(t){Zt(e,t)}),cr(s.scroller,"scroll",function(){s.scroller.clientHeight&&(zt(e,s.scroller.scrollTop),Rt(e,s.scroller.scrollLeft,!0),hr(e,"scroll",e))}),cr(s.scrollbarV,"scroll",function(){s.scroller.clientHeight&&zt(e,s.scrollbarV.scrollTop)}),cr(s.scrollbarH,"scroll",function(){s.scroller.clientHeight&&Rt(e,s.scrollbarH.scrollLeft)}),cr(s.scroller,"mousewheel",function(t){Bt(e,t)}),cr(s.scroller,"DOMMouseScroll",function(t){Bt(e,t)}),cr(s.scrollbarH,"mousedown",t),cr(s.scrollbarV,"mousedown",t),cr(s.wrapper,"scroll",function(){s.wrapper.scrollTop=s.wrapper.scrollLeft=0}),cr(s.input,"keyup",function(t){Kt.call(e,t)}),cr(s.input,"input",function(){Js&&Zs>=9&&e.display.inputHasSelection&&(e.display.inputHasSelection=null),kt(e)}),cr(s.input,"keydown",ct(e,Yt)),cr(s.input,"keypress",ct(e,Xt)),cr(s.input,"focus",gs(Qt,e)),cr(s.input,"blur",gs(Jt,e)),e.options.dragDrop&&(cr(s.scroller,"dragstart",function(t){Ht(e,t)}),cr(s.scroller,"dragenter",i),cr(s.scroller,"dragover",i),cr(s.scroller,"drop",ct(e,Ft))),cr(s.scroller,"paste",function(t){Mt(s,t)||(e.state.pasteIncoming=!0,St(e),kt(e))}),cr(s.input,"paste",function(){if(eo&&!e.state.fakedLastChar&&!(new Date-e.state.lastMiddleDown<200)){var t=s.input.selectionStart,i=s.input.selectionEnd;s.input.value+="$",s.input.selectionEnd=i,s.input.selectionStart=t,e.state.fakedLastChar=!0}e.state.pasteIncoming=!0,kt(e)}),cr(s.input,"cut",n),cr(s.input,"copy",n),oo&&cr(s.sizer,"mouseup",function(){Cs()==s.input&&s.input.blur(),St(e)})}function Et(e){var t=e.display;t.cachedCharWidth=t.cachedTextHeight=t.cachedPaddingH=null,e.setSize()}function Mt(e,t){for(var i=es(t);i!=e.wrapper;i=i.parentNode)if(!i||i.ignoreEvents||i.parentNode==e.sizer&&i!=e.mover)return!0}function At(e,t,i,n){var s=e.display;if(!i){var o=es(t);if(o==s.scrollbarH||o==s.scrollbarV||o==s.scrollbarFiller||o==s.gutterFiller)return null}var r,a,l=s.lineSpace.getBoundingClientRect();try{r=t.clientX-l.left,a=t.clientY-l.top}catch(t){return null}var c,d=Ke(e,r,a);if(n&&1==d.xRel&&(c=Mn(e.doc,d.line).text).length==d.ch){var h=br(c,c.length,e.options.tabSize)-c.length;d=bo(d.line,Math.max(0,Math.round((r-Pe(e.display).left)/Je(e.display))-h))}return d}function It(e){if(!ss(this,e)){var t=this,i=t.display;if(i.shift=e.shiftKey,Mt(i,e))return void(eo||(i.scroller.draggable=!1,setTimeout(function(){i.scroller.draggable=!0},100)));if(!Nt(t,e)){var n=At(t,e);switch(window.focus(),ts(e)){case 1:n?jt(t,e,n):es(e)==i.scroller&&rr(e);break;case 2:eo&&(t.state.lastMiddleDown=+new Date),n&&se(t.doc,n),setTimeout(gs(St,t),20),rr(e);break;case 3:mo&&Zt(t,e)}}}}function jt(e,t,i){setTimeout(gs(Tt,e),0);var n,s=+new Date;ko&&ko.time>s-400&&0==yo(ko.pos,i)?n="triple":_o&&_o.time>s-400&&0==yo(_o.pos,i)?(n="double",ko={time:s,pos:i}):(n="single",_o={time:s,pos:i});var o=e.doc.sel,r=ho?t.metaKey:t.ctrlKey;e.options.dragDrop&&Er&&!Dt(e)&&"single"==n&&o.contains(i)>-1&&o.somethingSelected()?Lt(e,t,i,r):Ot(e,t,i,n,r)}function Lt(e,t,i,n){var s=e.display,o=ct(e,function(r){eo&&(s.scroller.draggable=!1),e.state.draggingText=!1,dr(document,"mouseup",o),dr(s.scroller,"drop",o),Math.abs(t.clientX-r.clientX)+Math.abs(t.clientY-r.clientY)<10&&(rr(r),n||se(e.doc,i),St(e),Js&&9==Zs&&setTimeout(function(){document.body.focus(),St(e)},20))});eo&&(s.scroller.draggable=!0),e.state.draggingText=o,s.scroller.dragDrop&&s.scroller.dragDrop(),cr(document,"mouseup",o),cr(s.scroller,"drop",o)}function Ot(e,t,i,n,s){function o(t){if(0!=yo(m,t))if(m=t,"rect"==n){for(var s=[],o=e.options.tabSize,r=br(Mn(c,i.line).text,i.ch,o),a=br(Mn(c,t.line).text,t.ch,o),l=Math.min(r,a),p=Math.max(r,a),f=Math.min(i.line,t.line),g=Math.min(e.lastLine(),Math.max(i.line,t.line));g>=f;f++){var v=Mn(c,f).text,b=cs(v,l,o);l==p?s.push(new K(bo(f,b),bo(f,b))):v.length>b&&s.push(new K(bo(f,b),bo(f,cs(v,p,o))))}s.length||s.push(new K(i,i)),de(c,X(u.ranges.slice(0,h).concat(s),h),{origin:"*mouse",scroll:!1}),e.scrollIntoView(t)}else{var y=d,w=y.anchor,_=t;if("single"!=n){if("double"==n)var k=e.findWordAt(t);else var k=new K(bo(t.line,0),Z(c,bo(t.line+1,0)));yo(k.anchor,w)>0?(_=k.head,w=Y(y.from(),k.anchor)):(_=k.anchor,w=V(y.to(),k.head))}var s=u.ranges.slice(0);s[h]=new K(Z(c,w),_),de(c,X(s,h),gr)}}function r(t){var i=++v,s=At(e,t,!0,"rect"==n);if(s)if(0!=yo(s,m)){Tt(e),o(s);var a=b(l,c);(s.line>=a.to||s.line<a.from)&&setTimeout(ct(e,function(){v==i&&r(t)}),150)}else{var d=t.clientY<g.top?-20:t.clientY>g.bottom?20:0;d&&setTimeout(ct(e,function(){v==i&&(l.scroller.scrollTop+=d,r(t))}),50)}}function a(t){v=1/0,rr(t),St(e),dr(document,"mousemove",y),dr(document,"mouseup",w),c.history.lastSelOrigin=null}var l=e.display,c=e.doc;rr(t);var d,h,u=c.sel;if(s&&!t.shiftKey?(h=c.sel.contains(i),d=h>-1?c.sel.ranges[h]:new K(i,i)):d=c.sel.primary(),t.altKey)n="rect",s||(d=new K(i,i)),i=At(e,t,!0,!0),h=-1;else if("double"==n){var p=e.findWordAt(i);d=e.display.shift||c.extend?ne(c,d,p.anchor,p.head):p}else if("triple"==n){var f=new K(bo(i.line,0),Z(c,bo(i.line+1,0)));d=e.display.shift||c.extend?ne(c,d,f.anchor,f.head):f}else d=ne(c,d,i);s?h>-1?re(c,h,d,gr):(h=c.sel.ranges.length,de(c,X(c.sel.ranges.concat([d]),h),{scroll:!1,origin:"*mouse"})):(h=0,de(c,new G([d],0),gr),u=c.sel);var m=i,g=l.wrapper.getBoundingClientRect(),v=0,y=ct(e,function(e){ts(e)?r(e):a(e)}),w=ct(e,a);cr(document,"mousemove",y),cr(document,"mouseup",w)}function $t(e,t,i,n,s){try{var o=t.clientX,r=t.clientY}catch(t){return!1}if(o>=Math.floor(e.display.gutters.getBoundingClientRect().right))return!1;n&&rr(t);var a=e.display,l=a.lineDiv.getBoundingClientRect();if(r>l.bottom||!rs(e,i))return Zn(t);r-=l.top-a.viewOffset;for(var c=0;c<e.options.gutters.length;++c){var d=a.gutters.childNodes[c];if(d&&d.getBoundingClientRect().right>=o){var h=On(e.doc,r),u=e.options.gutters[c];return s(e,i,e,h,u,t),Zn(t)}}}function Nt(e,t){return $t(e,t,"gutterClick",!0,is)}function Ft(e){var t=this;if(!ss(t,e)&&!Mt(t.display,e)){rr(e),Js&&(Do=+new Date);var i=At(t,e,!0),n=e.dataTransfer.files;if(i&&!Dt(t))if(n&&n.length&&window.FileReader&&window.File)for(var s=n.length,o=Array(s),r=0,a=function(e,n){var a=new FileReader;a.onload=ct(t,function(){if(o[n]=a.result,++r==s){i=Z(t.doc,i);var e={from:i,to:i,text:Mr(o.join("\n")),origin:"paste"};ri(t.doc,e),ce(t.doc,Q(i,Io(e)))}}),a.readAsText(e)},l=0;s>l;++l)a(n[l],l);else{if(t.state.draggingText&&t.doc.sel.contains(i)>-1)return t.state.draggingText(e),void setTimeout(gs(St,t),20);try{var o=e.dataTransfer.getData("Text");if(o){if(t.state.draggingText&&(ho?!e.metaKey:!e.ctrlKey))var c=t.listSelections();if(he(t.doc,Q(i,i)),c)for(var l=0;l<c.length;++l)ui(t.doc,"",c[l].anchor,c[l].head,"drag");t.replaceSelection(o,"around","paste"),St(t)}}catch(e){}}}}function Ht(e,t){if(Js&&(!e.state.draggingText||+new Date-Do<100))return void lr(t);
if(!ss(e,t)&&!Mt(e.display,t)&&(t.dataTransfer.setData("Text",e.getSelection()),t.dataTransfer.setDragImage&&!so)){var i=ws("img",null,null,"position: fixed; left: 0; top: 0;");i.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",no&&(i.width=i.height=1,e.display.wrapper.appendChild(i),i._top=i.offsetTop),t.dataTransfer.setDragImage(i,0,0),no&&i.parentNode.removeChild(i)}}function zt(e,t){Math.abs(e.doc.scrollTop-t)<2||(e.doc.scrollTop=t,Ks||T(e,{top:t}),e.display.scroller.scrollTop!=t&&(e.display.scroller.scrollTop=t),e.display.scrollbarV.scrollTop!=t&&(e.display.scrollbarV.scrollTop=t),Ks&&T(e),ke(e,100))}function Rt(e,t,i){(i?t==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-t)<2)||(t=Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth),e.doc.scrollLeft=t,y(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbarH.scrollLeft!=t&&(e.display.scrollbarH.scrollLeft=t))}function Bt(e,t){var i=t.wheelDeltaX,n=t.wheelDeltaY;null==i&&t.detail&&t.axis==t.HORIZONTAL_AXIS&&(i=t.detail),null==n&&t.detail&&t.axis==t.VERTICAL_AXIS?n=t.detail:null==n&&(n=t.wheelDelta);var s=e.display,o=s.scroller;if(i&&o.scrollWidth>o.clientWidth||n&&o.scrollHeight>o.clientHeight){if(n&&ho&&eo)e:for(var r=t.target,a=s.view;r!=o;r=r.parentNode)for(var l=0;l<a.length;l++)if(a[l].node==r){e.display.currentWheelTarget=r;break e}if(i&&!Ks&&!no&&null!=Eo)return n&&zt(e,Math.max(0,Math.min(o.scrollTop+n*Eo,o.scrollHeight-o.clientHeight))),Rt(e,Math.max(0,Math.min(o.scrollLeft+i*Eo,o.scrollWidth-o.clientWidth))),rr(t),s.wheelStartX=null,void 0;if(n&&null!=Eo){var c=n*Eo,d=e.doc.scrollTop,h=d+s.wrapper.clientHeight;0>c?d=Math.max(0,d+c-50):h=Math.min(e.doc.height,h+c+50),T(e,{top:d,bottom:h})}20>Po&&(null==s.wheelStartX?(s.wheelStartX=o.scrollLeft,s.wheelStartY=o.scrollTop,s.wheelDX=i,s.wheelDY=n,setTimeout(function(){if(null!=s.wheelStartX){var e=o.scrollLeft-s.wheelStartX,t=o.scrollTop-s.wheelStartY,i=t&&s.wheelDY&&t/s.wheelDY||e&&s.wheelDX&&e/s.wheelDX;s.wheelStartX=s.wheelStartY=null,i&&(Eo=(Eo*Po+i)/(Po+1),++Po)}},200)):(s.wheelDX+=i,s.wheelDY+=n))}}function Wt(e,t,i){if("string"==typeof t&&(t=Wo[t],!t))return!1;e.display.pollingFast&&xt(e)&&(e.display.pollingFast=!1);var n=e.display.shift,s=!1;try{Dt(e)&&(e.state.suppressEdits=!0),i&&(e.display.shift=!1),s=t(e)!=fr}finally{e.display.shift=n,e.state.suppressEdits=!1}return s}function qt(e){var t=e.state.keyMaps.slice(0);return e.options.extraKeys&&t.push(e.options.extraKeys),t.push(e.options.keyMap),t}function Ut(e,t){var i=Ti(e.options.keyMap),n=i.auto;clearTimeout(Mo),n&&!Vo(t)&&(Mo=setTimeout(function(){Ti(e.options.keyMap)==i&&(e.options.keyMap=n.call?n.call(null,e):n,a(e))},50));var s=Yo(t,!0),o=!1;if(!s)return!1;var r=qt(e);return o=t.shiftKey?Uo("Shift-"+s,r,function(t){return Wt(e,t,!0)})||Uo(s,r,function(t){return("string"==typeof t?/^go[A-Z]/.test(t):t.motion)?Wt(e,t):void 0}):Uo(s,r,function(t){return Wt(e,t)}),o&&(rr(t),_e(e),is(e,"keyHandled",e,s,t)),o}function Vt(e,t,i){var n=Uo("'"+i+"'",qt(e),function(t){return Wt(e,t,!0)});return n&&(rr(t),_e(e),is(e,"keyHandled",e,"'"+i+"'",t)),n}function Yt(e){var t=this;if(Tt(t),!ss(t,e)){Js&&11>Zs&&27==e.keyCode&&(e.returnValue=!1);var i=e.keyCode;t.display.shift=16==i||e.shiftKey;var n=Ut(t,e);no&&(Ao=n?i:null,!n&&88==i&&!Ir&&(ho?e.metaKey:e.ctrlKey)&&t.replaceSelection("",null,"cut")),18==i&&!/\bCodeMirror-crosshair\b/.test(t.display.lineDiv.className)&&Gt(t)}}function Gt(e){function t(e){18!=e.keyCode&&e.altKey||(Ts(i,"CodeMirror-crosshair"),dr(document,"keyup",t),dr(document,"mouseover",t))}var i=e.display.lineDiv;Ds(i,"CodeMirror-crosshair"),cr(document,"keyup",t),cr(document,"mouseover",t)}function Kt(e){16==e.keyCode&&(this.doc.sel.shift=!1),ss(this,e)}function Xt(e){var t=this;if(!(ss(t,e)||e.ctrlKey&&!e.altKey||ho&&e.metaKey)){var i=e.keyCode,n=e.charCode;if(no&&i==Ao)return Ao=null,void rr(e);if(!(no&&(!e.which||e.which<10)||oo)||!Ut(t,e)){var s=String.fromCharCode(null==n?i:n);Vt(t,e,s)||(Js&&Zs>=9&&(t.display.inputHasSelection=null),kt(t))}}}function Qt(e){"nocursor"!=e.options.readOnly&&(e.state.focused||(hr(e,"focus",e),e.state.focused=!0,Ds(e.display.wrapper,"CodeMirror-focused"),!e.curOp&&e.display.selForContextMenu!=e.doc.sel&&(Ct(e),eo&&setTimeout(gs(Ct,e,!0),0))),_t(e),_e(e))}function Jt(e){e.state.focused&&(hr(e,"blur",e),e.state.focused=!1,Ts(e.display.wrapper,"CodeMirror-focused")),clearInterval(e.display.blinker),setTimeout(function(){e.state.focused||(e.display.shift=!1)},150)}function Zt(e,t){function i(){if(null!=s.input.selectionStart){var t=e.somethingSelected(),i=s.input.value="\u200b"+(t?s.input.value:"");s.prevInput=t?"":"\u200b",s.input.selectionStart=1,s.input.selectionEnd=i.length,s.selForContextMenu=e.doc.sel}}function n(){if(s.inputDiv.style.position="relative",s.input.style.cssText=l,Js&&9>Zs&&(s.scrollbarV.scrollTop=s.scroller.scrollTop=r),_t(e),null!=s.input.selectionStart){(!Js||Js&&9>Zs)&&i();var t=0,n=function(){s.selForContextMenu==e.doc.sel&&0==s.input.selectionStart?ct(e,Wo.selectAll)(e):t++<10?s.detectingSelectAll=setTimeout(n,500):Ct(e)};s.detectingSelectAll=setTimeout(n,200)}}if(!ss(e,t,"contextmenu")){var s=e.display;if(!Mt(s,t)&&!ei(e,t)){var o=At(e,t),r=s.scroller.scrollTop;if(o&&!no){var a=e.options.resetSelectionOnContextMenu;a&&-1==e.doc.sel.contains(o)&&ct(e,de)(e.doc,Q(o),mr);var l=s.input.style.cssText;if(s.inputDiv.style.position="absolute",s.input.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(t.clientY-5)+"px; left: "+(t.clientX-5)+"px; z-index: 1000; background: "+(Js?"rgba(255, 255, 255, .05)":"transparent")+"; outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",eo)var c=window.scrollY;if(St(e),eo&&window.scrollTo(null,c),Ct(e),e.somethingSelected()||(s.input.value=s.prevInput=" "),s.selForContextMenu=e.doc.sel,clearTimeout(s.detectingSelectAll),Js&&Zs>=9&&i(),mo){lr(t);var d=function(){dr(window,"mouseup",d),setTimeout(n,20)};cr(window,"mouseup",d)}else setTimeout(n,50)}}}}function ei(e,t){return rs(e,"gutterContextMenu")?$t(e,t,"gutterContextMenu",!1,hr):!1}function ti(e,t){if(yo(e,t.from)<0)return e;if(yo(e,t.to)<=0)return Io(t);var i=e.line+t.text.length-(t.to.line-t.from.line)-1,n=e.ch;return e.line==t.to.line&&(n+=Io(t).ch-t.to.ch),bo(i,n)}function ii(e,t){for(var i=[],n=0;n<e.sel.ranges.length;n++){var s=e.sel.ranges[n];i.push(new K(ti(s.anchor,t),ti(s.head,t)))}return X(i,e.sel.primIndex)}function ni(e,t,i){return e.line==t.line?bo(i.line,e.ch-t.ch+i.ch):bo(i.line+(e.line-t.line),e.ch)}function si(e,t,i){for(var n=[],s=bo(e.first,0),o=s,r=0;r<t.length;r++){var a=t[r],l=ni(a.from,s,o),c=ni(Io(a),s,o);if(s=a.to,o=c,"around"==i){var d=e.sel.ranges[r],h=yo(d.head,d.anchor)<0;n[r]=new K(h?c:l,h?l:c)}else n[r]=new K(l,l)}return new G(n,e.sel.primIndex)}function oi(e,t,i){var n={canceled:!1,from:t.from,to:t.to,text:t.text,origin:t.origin,cancel:function(){this.canceled=!0}};return i&&(n.update=function(t,i,n,s){t&&(this.from=Z(e,t)),i&&(this.to=Z(e,i)),n&&(this.text=n),void 0!==s&&(this.origin=s)}),hr(e,"beforeChange",e,n),e.cm&&hr(e.cm,"beforeChange",e.cm,n),n.canceled?null:{from:n.from,to:n.to,text:n.text,origin:n.origin}}function ri(e,t,i){if(e.cm){if(!e.cm.curOp)return ct(e.cm,ri)(e,t,i);if(e.cm.state.suppressEdits)return}if(!(rs(e,"beforeChange")||e.cm&&rs(e.cm,"beforeChange"))||(t=oi(e,t,!0))){var n=go&&!i&&Ri(e,t.from,t.to);if(n)for(var s=n.length-1;s>=0;--s)ai(e,{from:n[s].from,to:n[s].to,text:s?[""]:t.text});else ai(e,t)}}function ai(e,t){if(1!=t.text.length||""!=t.text[0]||0!=yo(t.from,t.to)){var i=ii(e,t);Bn(e,t,i,e.cm?e.cm.curOp.id:NaN),di(e,t,i,Fi(e,t));var n=[];Pn(e,function(e,i){!i&&-1==us(n,e.history)&&(Jn(e.history,t),n.push(e.history)),di(e,t,null,Fi(e,t))})}}function li(e,t,i){if(!e.cm||!e.cm.state.suppressEdits){for(var n,s=e.history,o=e.sel,r="undo"==t?s.done:s.undone,a="undo"==t?s.undone:s.done,l=0;l<r.length&&(n=r[l],i?!n.ranges||n.equals(e.sel):n.ranges);l++);if(l!=r.length){for(s.lastOrigin=s.lastSelOrigin=null;n=r.pop(),n.ranges;){if(Un(n,a),i&&!n.equals(e.sel))return void de(e,n,{clearRedo:!1});o=n}var c=[];Un(o,a),a.push({changes:c,generation:s.generation}),s.generation=n.generation||++s.maxGeneration;for(var d=rs(e,"beforeChange")||e.cm&&rs(e.cm,"beforeChange"),l=n.changes.length-1;l>=0;--l){var h=n.changes[l];if(h.origin=t,d&&!oi(e,h,!1))return void(r.length=0);c.push(Hn(e,h));var u=l?ii(e,h):hs(r);di(e,h,u,zi(e,h)),!l&&e.cm&&e.cm.scrollIntoView({from:h.from,to:Io(h)});var p=[];Pn(e,function(e,t){!t&&-1==us(p,e.history)&&(Jn(e.history,h),p.push(e.history)),di(e,h,null,zi(e,h))})}}}}function ci(e,t){if(0!=t&&(e.first+=t,e.sel=new G(ps(e.sel.ranges,function(e){return new K(bo(e.anchor.line+t,e.anchor.ch),bo(e.head.line+t,e.head.ch))}),e.sel.primIndex),e.cm)){ft(e.cm,e.first,e.first-t,t);for(var i=e.cm.display,n=i.viewFrom;n<i.viewTo;n++)mt(e.cm,n,"gutter")}}function di(e,t,i,n){if(e.cm&&!e.cm.curOp)return ct(e.cm,di)(e,t,i,n);if(t.to.line<e.first)return void ci(e,t.text.length-1-(t.to.line-t.from.line));if(!(t.from.line>e.lastLine())){if(t.from.line<e.first){var s=t.text.length-1-(e.first-t.from.line);ci(e,s),t={from:bo(e.first,0),to:bo(t.to.line+s,t.to.ch),text:[hs(t.text)],origin:t.origin}}var o=e.lastLine();t.to.line>o&&(t={from:t.from,to:bo(o,Mn(e,o).text.length),text:[t.text[0]],origin:t.origin}),t.removed=An(e,t.from,t.to),i||(i=ii(e,t)),e.cm?hi(e.cm,t,n):Sn(e,t,n),he(e,i,mr)}}function hi(e,t,i){var n=e.doc,s=e.display,r=t.from,a=t.to,l=!1,c=r.line;e.options.lineWrapping||(c=Ln(Qi(Mn(n,r.line))),n.iter(c,a.line+1,function(e){return e==s.maxLine?(l=!0,!0):void 0})),n.sel.contains(t.from,t.to)>-1&&os(e),Sn(n,t,i,o(e)),e.options.lineWrapping||(n.iter(c,r.line+t.text.length,function(e){var t=u(e);t>s.maxLineLength&&(s.maxLine=e,s.maxLineLength=t,s.maxLineChanged=!0,l=!1)}),l&&(e.curOp.updateMaxLine=!0)),n.frontier=Math.min(n.frontier,r.line),ke(e,400);var d=t.text.length-(a.line-r.line)-1;r.line!=a.line||1!=t.text.length||Cn(e.doc,t)?ft(e,r.line,a.line+1,d):mt(e,r.line,"text");var h=rs(e,"changes"),p=rs(e,"change");if(p||h){var f={from:r,to:a,text:t.text,removed:t.removed,origin:t.origin};p&&is(e,"change",e,f),h&&(e.curOp.changeObjs||(e.curOp.changeObjs=[])).push(f)}e.display.selForContextMenu=null}function ui(e,t,i,n,s){if(n||(n=i),yo(n,i)<0){var o=n;n=i,i=o}"string"==typeof t&&(t=Mr(t)),ri(e,{from:i,to:n,text:t,origin:s})}function pi(e,t){var i=e.display,n=i.sizer.getBoundingClientRect(),s=null;if(t.top+n.top<0?s=!0:t.bottom+n.top>(window.innerHeight||document.documentElement.clientHeight)&&(s=!1),null!=s&&!ao){var o=ws("div","\u200b",null,"position: absolute; top: "+(t.top-i.viewOffset-Te(e.display))+"px; height: "+(t.bottom-t.top+pr)+"px; left: "+t.left+"px; width: 2px;");e.display.lineSpace.appendChild(o),o.scrollIntoView(s),e.display.lineSpace.removeChild(o)}}function fi(e,t,i,n){null==n&&(n=0);for(var s=0;5>s;s++){var o=!1,r=Ve(e,t),a=i&&i!=t?Ve(e,i):r,l=gi(e,Math.min(r.left,a.left),Math.min(r.top,a.top)-n,Math.max(r.left,a.left),Math.max(r.bottom,a.bottom)+n),c=e.doc.scrollTop,d=e.doc.scrollLeft;if(null!=l.scrollTop&&(zt(e,l.scrollTop),Math.abs(e.doc.scrollTop-c)>1&&(o=!0)),null!=l.scrollLeft&&(Rt(e,l.scrollLeft),Math.abs(e.doc.scrollLeft-d)>1&&(o=!0)),!o)return r}}function mi(e,t,i,n,s){var o=gi(e,t,i,n,s);null!=o.scrollTop&&zt(e,o.scrollTop),null!=o.scrollLeft&&Rt(e,o.scrollLeft)}function gi(e,t,i,n,s){var o=e.display,r=Qe(e.display);0>i&&(i=0);var a=e.curOp&&null!=e.curOp.scrollTop?e.curOp.scrollTop:o.scroller.scrollTop,l=o.scroller.clientHeight-pr,c={};s-i>l&&(s=i+l);var d=e.doc.height+De(o),h=r>i,u=s>d-r;if(a>i)c.scrollTop=h?0:i;else if(s>a+l){var p=Math.min(i,(u?d:s)-l);p!=a&&(c.scrollTop=p)}var f=e.curOp&&null!=e.curOp.scrollLeft?e.curOp.scrollLeft:o.scroller.scrollLeft,m=o.scroller.clientWidth-pr-o.gutters.offsetWidth,g=n-t>m;return g&&(n=t+m),10>t?c.scrollLeft=0:f>t?c.scrollLeft=Math.max(0,t-(g?0:10)):n>m+f-3&&(c.scrollLeft=n+(g?0:10)-m),c}function vi(e,t,i){(null!=t||null!=i)&&yi(e),null!=t&&(e.curOp.scrollLeft=(null==e.curOp.scrollLeft?e.doc.scrollLeft:e.curOp.scrollLeft)+t),null!=i&&(e.curOp.scrollTop=(null==e.curOp.scrollTop?e.doc.scrollTop:e.curOp.scrollTop)+i)}function bi(e){yi(e);var t=e.getCursor(),i=t,n=t;e.options.lineWrapping||(i=t.ch?bo(t.line,t.ch-1):t,n=bo(t.line,t.ch+1)),e.curOp.scrollToPos={from:i,to:n,margin:e.options.cursorScrollMargin,isCursor:!0}}function yi(e){var t=e.curOp.scrollToPos;if(t){e.curOp.scrollToPos=null;var i=Ye(e,t.from),n=Ye(e,t.to),s=gi(e,Math.min(i.left,n.left),Math.min(i.top,n.top)-t.margin,Math.max(i.right,n.right),Math.max(i.bottom,n.bottom)+t.margin);e.scrollTo(s.scrollLeft,s.scrollTop)}}function wi(e,t,i,n){var s,o=e.doc;null==i&&(i="add"),"smart"==i&&(o.mode.indent?s=Se(e,t):i="prev");var r=e.options.tabSize,a=Mn(o,t),l=br(a.text,null,r);a.stateAfter&&(a.stateAfter=null);var c,d=a.text.match(/^\s*/)[0];if(n||/\S/.test(a.text)){if("smart"==i&&(c=o.mode.indent(s,a.text.slice(d.length),a.text),c==fr||c>150)){if(!n)return;i="prev"}}else c=0,i="not";"prev"==i?c=t>o.first?br(Mn(o,t-1).text,null,r):0:"add"==i?c=l+e.options.indentUnit:"subtract"==i?c=l-e.options.indentUnit:"number"==typeof i&&(c=l+i),c=Math.max(0,c);var h="",u=0;if(e.options.indentWithTabs)for(var p=Math.floor(c/r);p;--p)u+=r,h+="	";if(c>u&&(h+=ds(c-u)),h!=d)ui(o,h,bo(t,0),bo(t,d.length),"+input");else for(var p=0;p<o.sel.ranges.length;p++){var f=o.sel.ranges[p];if(f.head.line==t&&f.head.ch<d.length){var u=bo(t,d.length);re(o,p,new K(u,u));break}}a.stateAfter=null}function _i(e,t,i,n){var s=t,o=t;return"number"==typeof t?o=Mn(e,J(e,t)):s=Ln(t),null==s?null:(n(o,s)&&e.cm&&mt(e.cm,s,i),o)}function ki(e,t){for(var i=e.doc.sel.ranges,n=[],s=0;s<i.length;s++){for(var o=t(i[s]);n.length&&yo(o.from,hs(n).to)<=0;){var r=n.pop();if(yo(r.from,o.from)<0){o.from=r.from;break}}n.push(o)}lt(e,function(){for(var t=n.length-1;t>=0;t--)ui(e.doc,"",n[t].from,n[t].to,"+delete");bi(e)})}function xi(e,t,i,n,s){function o(){var t=a+i;return t<e.first||t>=e.first+e.size?h=!1:(a=t,d=Mn(e,t))}function r(e){var t=(s?Ys:Gs)(d,l,i,!0);if(null==t){if(e||!o())return h=!1;l=s?(0>i?zs:Hs)(d):0>i?d.text.length:0}else l=t;return!0}var a=t.line,l=t.ch,c=i,d=Mn(e,a),h=!0;if("char"==n)r();else if("column"==n)r(!0);else if("word"==n||"group"==n)for(var u=null,p="group"==n,f=e.cm&&e.cm.getHelper(t,"wordChars"),m=!0;!(0>i)||r(!m);m=!1){var g=d.text.charAt(l)||"\n",v=vs(g,f)?"w":p&&"\n"==g?"n":!p||/\s/.test(g)?null:"p";if(p&&!m&&!v&&(v="s"),u&&u!=v){0>i&&(i=1,r());break}if(v&&(u=v),i>0&&!r(!m))break}var b=me(e,bo(a,l),c,!0);return h||(b.hitSide=!0),b}function Ci(e,t,i,n){var s,o=e.doc,r=t.left;if("page"==n){var a=Math.min(e.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight);s=t.top+i*(a-(0>i?1.5:.5)*Qe(e.display))}else"line"==n&&(s=i>0?t.bottom+3:t.top-3);for(;;){var l=Ke(e,r,s);if(!l.outside)break;if(0>i?0>=s:s>=o.height){l.hitSide=!0;break}s+=5*i}return l}function Si(t,i,n,s){e.defaults[t]=i,n&&(Lo[t]=s?function(e,t,i){i!=Oo&&n(e,t,i)}:n)}function Ti(e){return"string"==typeof e?qo[e]:e}function Di(e,t,i,n,s){if(n&&n.shared)return Pi(e,t,i,n,s);if(e.cm&&!e.cm.curOp)return ct(e.cm,Di)(e,t,i,n,s);var o=new Ko(e,s),r=yo(t,i);if(n&&ms(n,o,!1),r>0||0==r&&o.clearWhenEmpty!==!1)return o;if(o.replacedWith&&(o.collapsed=!0,o.widgetNode=ws("span",[o.replacedWith],"CodeMirror-widget"),n.handleMouseEvents||(o.widgetNode.ignoreEvents=!0),n.insertLeft&&(o.widgetNode.insertLeft=!0)),o.collapsed){if(Xi(e,t.line,t,i,o)||t.line!=i.line&&Xi(e,i.line,t,i,o))throw new Error("Inserting collapsed marker partially overlapping an existing one");vo=!0}o.addToHistory&&Bn(e,{from:t,to:i,origin:"markText"},e.sel,NaN);var a,l=t.line,c=e.cm;if(e.iter(l,i.line+1,function(e){c&&o.collapsed&&!c.options.lineWrapping&&Qi(e)==c.display.maxLine&&(a=!0),o.collapsed&&l!=t.line&&jn(e,0),Oi(e,new Ii(o,l==t.line?t.ch:null,l==i.line?i.ch:null)),++l}),o.collapsed&&e.iter(t.line,i.line+1,function(t){tn(e,t)&&jn(t,0)}),o.clearOnEnter&&cr(o,"beforeCursorEnter",function(){o.clear()}),o.readOnly&&(go=!0,(e.history.done.length||e.history.undone.length)&&e.clearHistory()),o.collapsed&&(o.id=++Xo,o.atomic=!0),c){if(a&&(c.curOp.updateMaxLine=!0),o.collapsed)ft(c,t.line,i.line+1);else if(o.className||o.title||o.startStyle||o.endStyle)for(var d=t.line;d<=i.line;d++)mt(c,d,"text");o.atomic&&pe(c.doc),is(c,"markerAdded",c,o)}return o}function Pi(e,t,i,n,s){n=ms(n),n.shared=!1;var o=[Di(e,t,i,n,s)],r=o[0],a=n.widgetNode;return Pn(e,function(e){a&&(n.widgetNode=a.cloneNode(!0)),o.push(Di(e,Z(e,t),Z(e,i),n,s));for(var l=0;l<e.linked.length;++l)if(e.linked[l].isParent)return;r=hs(o)}),new Qo(o,r)}function Ei(e){return e.findMarks(bo(e.first,0),e.clipPos(bo(e.lastLine())),function(e){return e.parent})}function Mi(e,t){for(var i=0;i<t.length;i++){var n=t[i],s=n.find(),o=e.clipPos(s.from),r=e.clipPos(s.to);if(yo(o,r)){var a=Di(e,o,r,n.primary,n.primary.type);n.markers.push(a),a.parent=n}}}function Ai(e){for(var t=0;t<e.length;t++){var i=e[t],n=[i.primary.doc];Pn(i.primary.doc,function(e){n.push(e)});for(var s=0;s<i.markers.length;s++){var o=i.markers[s];-1==us(n,o.doc)&&(o.parent=null,i.markers.splice(s--,1))}}}function Ii(e,t,i){this.marker=e,this.from=t,this.to=i}function ji(e,t){if(e)for(var i=0;i<e.length;++i){var n=e[i];if(n.marker==t)return n}}function Li(e,t){for(var i,n=0;n<e.length;++n)e[n]!=t&&(i||(i=[])).push(e[n]);return i}function Oi(e,t){e.markedSpans=e.markedSpans?e.markedSpans.concat([t]):[t],t.marker.attachLine(e)}function $i(e,t,i){if(e)for(var n,s=0;s<e.length;++s){var o=e[s],r=o.marker,a=null==o.from||(r.inclusiveLeft?o.from<=t:o.from<t);if(a||o.from==t&&"bookmark"==r.type&&(!i||!o.marker.insertLeft)){var l=null==o.to||(r.inclusiveRight?o.to>=t:o.to>t);(n||(n=[])).push(new Ii(r,o.from,l?null:o.to))}}return n}function Ni(e,t,i){if(e)for(var n,s=0;s<e.length;++s){var o=e[s],r=o.marker,a=null==o.to||(r.inclusiveRight?o.to>=t:o.to>t);if(a||o.from==t&&"bookmark"==r.type&&(!i||o.marker.insertLeft)){var l=null==o.from||(r.inclusiveLeft?o.from<=t:o.from<t);(n||(n=[])).push(new Ii(r,l?null:o.from-t,null==o.to?null:o.to-t))}}return n}function Fi(e,t){var i=te(e,t.from.line)&&Mn(e,t.from.line).markedSpans,n=te(e,t.to.line)&&Mn(e,t.to.line).markedSpans;if(!i&&!n)return null;var s=t.from.ch,o=t.to.ch,r=0==yo(t.from,t.to),a=$i(i,s,r),l=Ni(n,o,r),c=1==t.text.length,d=hs(t.text).length+(c?s:0);if(a)for(var h=0;h<a.length;++h){var u=a[h];if(null==u.to){var p=ji(l,u.marker);p?c&&(u.to=null==p.to?null:p.to+d):u.to=s}}if(l)for(var h=0;h<l.length;++h){var u=l[h];if(null!=u.to&&(u.to+=d),null==u.from){var p=ji(a,u.marker);p||(u.from=d,c&&(a||(a=[])).push(u))}else u.from+=d,c&&(a||(a=[])).push(u)}a&&(a=Hi(a)),l&&l!=a&&(l=Hi(l));var f=[a];if(!c){var m,g=t.text.length-2;if(g>0&&a)for(var h=0;h<a.length;++h)null==a[h].to&&(m||(m=[])).push(new Ii(a[h].marker,null,null));for(var h=0;g>h;++h)f.push(m);f.push(l)}return f}function Hi(e){for(var t=0;t<e.length;++t){var i=e[t];null!=i.from&&i.from==i.to&&i.marker.clearWhenEmpty!==!1&&e.splice(t--,1)}return e.length?e:null}function zi(e,t){var i=Gn(e,t),n=Fi(e,t);if(!i)return n;if(!n)return i;for(var s=0;s<i.length;++s){var o=i[s],r=n[s];if(o&&r)e:for(var a=0;a<r.length;++a){for(var l=r[a],c=0;c<o.length;++c)if(o[c].marker==l.marker)continue e;o.push(l)}else r&&(i[s]=r)}return i}function Ri(e,t,i){var n=null;if(e.iter(t.line,i.line+1,function(e){if(e.markedSpans)for(var t=0;t<e.markedSpans.length;++t){var i=e.markedSpans[t].marker;i.readOnly&&(!n||-1==us(n,i))&&(n||(n=[])).push(i)}}),!n)return null;for(var s=[{from:t,to:i}],o=0;o<n.length;++o)for(var r=n[o],a=r.find(0),l=0;l<s.length;++l){var c=s[l];if(!(yo(c.to,a.from)<0||yo(c.from,a.to)>0)){var d=[l,1],h=yo(c.from,a.from),u=yo(c.to,a.to);(0>h||!r.inclusiveLeft&&!h)&&d.push({from:c.from,to:a.from}),(u>0||!r.inclusiveRight&&!u)&&d.push({from:a.to,to:c.to}),s.splice.apply(s,d),l+=d.length-1}}return s}function Bi(e){var t=e.markedSpans;if(t){for(var i=0;i<t.length;++i)t[i].marker.detachLine(e);e.markedSpans=null}}function Wi(e,t){if(t){for(var i=0;i<t.length;++i)t[i].marker.attachLine(e);e.markedSpans=t}}function qi(e){return e.inclusiveLeft?-1:0}function Ui(e){return e.inclusiveRight?1:0}function Vi(e,t){var i=e.lines.length-t.lines.length;if(0!=i)return i;var n=e.find(),s=t.find(),o=yo(n.from,s.from)||qi(e)-qi(t);if(o)return-o;var r=yo(n.to,s.to)||Ui(e)-Ui(t);return r?r:t.id-e.id}function Yi(e,t){var i,n=vo&&e.markedSpans;if(n)for(var s,o=0;o<n.length;++o)s=n[o],s.marker.collapsed&&null==(t?s.from:s.to)&&(!i||Vi(i,s.marker)<0)&&(i=s.marker);return i}function Gi(e){return Yi(e,!0)}function Ki(e){return Yi(e,!1)}function Xi(e,t,i,n,s){var o=Mn(e,t),r=vo&&o.markedSpans;if(r)for(var a=0;a<r.length;++a){var l=r[a];if(l.marker.collapsed){var c=l.marker.find(0),d=yo(c.from,i)||qi(l.marker)-qi(s),h=yo(c.to,n)||Ui(l.marker)-Ui(s);if(!(d>=0&&0>=h||0>=d&&h>=0)&&(0>=d&&(yo(c.to,i)>0||l.marker.inclusiveRight&&s.inclusiveLeft)||d>=0&&(yo(c.from,n)<0||l.marker.inclusiveLeft&&s.inclusiveRight)))return!0}}}function Qi(e){for(var t;t=Gi(e);)e=t.find(-1,!0).line;return e}function Ji(e){for(var t,i;t=Ki(e);)e=t.find(1,!0).line,(i||(i=[])).push(e);return i}function Zi(e,t){var i=Mn(e,t),n=Qi(i);return i==n?t:Ln(n)}function en(e,t){if(t>e.lastLine())return t;var i,n=Mn(e,t);if(!tn(e,n))return t;for(;i=Ki(n);)n=i.find(1,!0).line;return Ln(n)+1}function tn(e,t){var i=vo&&t.markedSpans;if(i)for(var n,s=0;s<i.length;++s)if(n=i[s],n.marker.collapsed){if(null==n.from)return!0;if(!n.marker.widgetNode&&0==n.from&&n.marker.inclusiveLeft&&nn(e,t,n))return!0}}function nn(e,t,i){if(null==i.to){var n=i.marker.find(1,!0);return nn(e,n.line,ji(n.line.markedSpans,i.marker))}if(i.marker.inclusiveRight&&i.to==t.text.length)return!0;for(var s,o=0;o<t.markedSpans.length;++o)if(s=t.markedSpans[o],s.marker.collapsed&&!s.marker.widgetNode&&s.from==i.to&&(null==s.to||s.to!=i.from)&&(s.marker.inclusiveLeft||i.marker.inclusiveRight)&&nn(e,t,s))return!0}function sn(e,t,i){$n(t)<(e.curOp&&e.curOp.scrollTop||e.doc.scrollTop)&&vi(e,null,i)}function on(e){if(null!=e.height)return e.height;if(!xs(document.body,e.node)){var t="position: relative;";e.coverGutter&&(t+="margin-left: -"+e.cm.getGutterElement().offsetWidth+"px;"),ks(e.cm.display.measure,ws("div",[e.node],null,t))}return e.height=e.node.offsetHeight}function rn(e,t,i,n){var s=new Jo(e,i,n);return s.noHScroll&&(e.display.alignWidgets=!0),_i(e.doc,t,"widget",function(t){var i=t.widgets||(t.widgets=[]);if(null==s.insertAt?i.push(s):i.splice(Math.min(i.length-1,Math.max(0,s.insertAt)),0,s),s.line=t,!tn(e.doc,t)){var n=$n(t)<e.doc.scrollTop;jn(t,t.height+on(s)),n&&vi(e,null,s.height),e.curOp.forceUpdate=!0}return!0}),s}function an(e,t,i,n){e.text=t,e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null),null!=e.order&&(e.order=null),Bi(e),Wi(e,i);var s=n?n(e):1;s!=e.height&&jn(e,s)}function ln(e){e.parent=null,Bi(e)}function cn(e,t){if(e)for(;;){var i=e.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!i)break;e=e.slice(0,i.index)+e.slice(i.index+i[0].length);var n=i[1]?"bgClass":"textClass";null==t[n]?t[n]=i[2]:new RegExp("(?:^|s)"+i[2]+"(?:$|s)").test(t[n])||(t[n]+=" "+i[2])}return e}function dn(t,i){if(t.blankLine)return t.blankLine(i);if(t.innerMode){var n=e.innerMode(t,i);return n.mode.blankLine?n.mode.blankLine(n.state):void 0}}function hn(e,t,i){for(var n=0;10>n;n++){var s=e.token(t,i);if(t.pos>t.start)return s}throw new Error("Mode "+e.name+" failed to advance stream.")}function un(t,i,n,s,o,r,a){var l=n.flattenSpans;null==l&&(l=t.options.flattenSpans);var c,d=0,h=null,u=new Go(i,t.options.tabSize);for(""==i&&cn(dn(n,s),r);!u.eol();){if(u.pos>t.options.maxHighlightLength?(l=!1,a&&mn(t,i,s,u.pos),u.pos=i.length,c=null):c=cn(hn(n,u,s),r),t.options.addModeClass){var p=e.innerMode(n,s).mode.name;p&&(c="m-"+(c?p+" "+c:p))}l&&h==c||(d<u.start&&o(u.start,h),d=u.start,h=c),u.start=u.pos}for(;d<u.pos;){var f=Math.min(u.pos,d+5e4);o(f,h),d=f}}function pn(e,t,i,n){var s=[e.state.modeGen],o={};un(e,t.text,e.doc.mode,i,function(e,t){s.push(e,t)},o,n);for(var r=0;r<e.state.overlays.length;++r){var a=e.state.overlays[r],l=1,c=0;un(e,t.text,a.mode,!0,function(e,t){for(var i=l;e>c;){var n=s[l];n>e&&s.splice(l,1,e,s[l+1],n),l+=2,c=Math.min(e,n)}if(t)if(a.opaque)s.splice(i,l-i,e,"cm-overlay "+t),l=i+2;else for(;l>i;i+=2){var o=s[i+1];s[i+1]=(o?o+" ":"")+"cm-overlay "+t}},o)}return{styles:s,classes:o.bgClass||o.textClass?o:null}}function fn(e,t){if(!t.styles||t.styles[0]!=e.state.modeGen){var i=pn(e,t,t.stateAfter=Se(e,Ln(t)));t.styles=i.styles,i.classes?t.styleClasses=i.classes:t.styleClasses&&(t.styleClasses=null)}return t.styles}function mn(e,t,i,n){var s=e.doc.mode,o=new Go(t,e.options.tabSize);for(o.start=o.pos=n||0,""==t&&dn(s,i);!o.eol()&&o.pos<=e.options.maxHighlightLength;)hn(s,o,i),o.start=o.pos}function gn(e,t){if(!e||/^\s*$/.test(e))return null;var i=t.addModeClass?tr:er;return i[e]||(i[e]=e.replace(/\S+/g,"cm-$&"))}function vn(e,t){var i=ws("span",null,null,eo?"padding-right: .1px":null),n={pre:ws("pre",[i]),content:i,col:0,pos:0,cm:e};t.measure={};for(var s=0;s<=(t.rest?t.rest.length:0);s++){var o,r=s?t.rest[s-1]:t.line;n.pos=0,n.addToken=yn,(Js||eo)&&e.getOption("lineWrapping")&&(n.addToken=wn(n.addToken)),Ls(e.display.measure)&&(o=Nn(r))&&(n.addToken=_n(n.addToken,o)),n.map=[],xn(r,n,fn(e,r)),r.styleClasses&&(r.styleClasses.bgClass&&(n.bgClass=Ps(r.styleClasses.bgClass,n.bgClass||"")),r.styleClasses.textClass&&(n.textClass=Ps(r.styleClasses.textClass,n.textClass||""))),0==n.map.length&&n.map.push(0,0,n.content.appendChild(js(e.display.measure))),0==s?(t.measure.map=n.map,t.measure.cache={}):((t.measure.maps||(t.measure.maps=[])).push(n.map),(t.measure.caches||(t.measure.caches=[])).push({}))}return hr(e,"renderLine",e,t.line,n.pre),n.pre.className&&(n.textClass=Ps(n.pre.className,n.textClass||"")),n}function bn(e){var t=ws("span","\u2022","cm-invalidchar");return t.title="\\u"+e.charCodeAt(0).toString(16),t}function yn(e,t,i,n,s,o){if(t){var r=e.cm.options.specialChars,a=!1;if(r.test(t))for(var l=document.createDocumentFragment(),c=0;;){r.lastIndex=c;var d=r.exec(t),h=d?d.index-c:t.length-c;if(h){var u=document.createTextNode(t.slice(c,c+h));Js&&9>Zs?l.appendChild(ws("span",[u])):l.appendChild(u),e.map.push(e.pos,e.pos+h,u),e.col+=h,e.pos+=h}if(!d)break;if(c+=h+1,"	"==d[0]){var p=e.cm.options.tabSize,f=p-e.col%p,u=l.appendChild(ws("span",ds(f),"cm-tab"));e.col+=f}else{var u=e.cm.options.specialCharPlaceholder(d[0]);Js&&9>Zs?l.appendChild(ws("span",[u])):l.appendChild(u),e.col+=1}e.map.push(e.pos,e.pos+1,u),e.pos++}else{e.col+=t.length;var l=document.createTextNode(t);e.map.push(e.pos,e.pos+t.length,l),Js&&9>Zs&&(a=!0),e.pos+=t.length}if(i||n||s||a){var m=i||"";n&&(m+=n),s&&(m+=s);var g=ws("span",[l],m);return o&&(g.title=o),e.content.appendChild(g)}e.content.appendChild(l)}}function wn(e){function t(e){for(var t=" ",i=0;i<e.length-2;++i)t+=i%2?" ":"\xa0";return t+=" "}return function(i,n,s,o,r,a){e(i,n.replace(/ {3,}/g,t),s,o,r,a)}}function _n(e,t){return function(i,n,s,o,r,a){s=s?s+" cm-force-border":"cm-force-border";for(var l=i.pos,c=l+n.length;;){for(var d=0;d<t.length;d++){var h=t[d];if(h.to>l&&h.from<=l)break}if(h.to>=c)return e(i,n,s,o,r,a);e(i,n.slice(0,h.to-l),s,o,null,a),o=null,n=n.slice(h.to-l),l=h.to}}}function kn(e,t,i,n){var s=!n&&i.widgetNode;s&&(e.map.push(e.pos,e.pos+t,s),e.content.appendChild(s)),e.pos+=t}function xn(e,t,i){var n=e.markedSpans,s=e.text,o=0;if(n)for(var r,a,l,c,d,h,u=s.length,p=0,f=1,m="",g=0;;){if(g==p){a=l=c=d="",h=null,g=1/0;for(var v=[],b=0;b<n.length;++b){var y=n[b],w=y.marker;y.from<=p&&(null==y.to||y.to>p)?(null!=y.to&&g>y.to&&(g=y.to,l=""),w.className&&(a+=" "+w.className),w.startStyle&&y.from==p&&(c+=" "+w.startStyle),w.endStyle&&y.to==g&&(l+=" "+w.endStyle),w.title&&!d&&(d=w.title),w.collapsed&&(!h||Vi(h.marker,w)<0)&&(h=y)):y.from>p&&g>y.from&&(g=y.from),"bookmark"==w.type&&y.from==p&&w.widgetNode&&v.push(w)}if(h&&(h.from||0)==p&&(kn(t,(null==h.to?u+1:h.to)-p,h.marker,null==h.from),null==h.to))return;if(!h&&v.length)for(var b=0;b<v.length;++b)kn(t,0,v[b])}if(p>=u)break;for(var _=Math.min(u,g);;){if(m){var k=p+m.length;if(!h){var x=k>_?m.slice(0,_-p):m;t.addToken(t,x,r?r+a:a,c,p+x.length==g?l:"",d)}if(k>=_){m=m.slice(_-p),p=_;break}p=k,c=""}m=s.slice(o,o=i[f++]),r=gn(i[f++],t.cm.options)}}else for(var f=1;f<i.length;f+=2)t.addToken(t,s.slice(o,o=i[f]),gn(i[f+1],t.cm.options))}function Cn(e,t){return 0==t.from.ch&&0==t.to.ch&&""==hs(t.text)&&(!e.cm||e.cm.options.wholeLineUpdateBefore)}function Sn(e,t,i,n){function s(e){return i?i[e]:null}function o(e,i,s){an(e,i,s,n),is(e,"change",e,t)}var r=t.from,a=t.to,l=t.text,c=Mn(e,r.line),d=Mn(e,a.line),h=hs(l),u=s(l.length-1),p=a.line-r.line;if(Cn(e,t)){for(var f=0,m=[];f<l.length-1;++f)m.push(new Zo(l[f],s(f),n));o(d,d.text,u),p&&e.remove(r.line,p),m.length&&e.insert(r.line,m)}else if(c==d)if(1==l.length)o(c,c.text.slice(0,r.ch)+h+c.text.slice(a.ch),u);else{for(var m=[],f=1;f<l.length-1;++f)m.push(new Zo(l[f],s(f),n));m.push(new Zo(h+c.text.slice(a.ch),u,n)),o(c,c.text.slice(0,r.ch)+l[0],s(0)),e.insert(r.line+1,m)}else if(1==l.length)o(c,c.text.slice(0,r.ch)+l[0]+d.text.slice(a.ch),s(0)),e.remove(r.line+1,p);else{o(c,c.text.slice(0,r.ch)+l[0],s(0)),o(d,h+d.text.slice(a.ch),u);for(var f=1,m=[];f<l.length-1;++f)m.push(new Zo(l[f],s(f),n));p>1&&e.remove(r.line+1,p-1),e.insert(r.line+1,m)}is(e,"change",e,t)}function Tn(e){this.lines=e,this.parent=null;for(var t=0,i=0;t<e.length;++t)e[t].parent=this,i+=e[t].height;this.height=i}function Dn(e){this.children=e;for(var t=0,i=0,n=0;n<e.length;++n){var s=e[n];t+=s.chunkSize(),i+=s.height,s.parent=this}this.size=t,this.height=i,this.parent=null}function Pn(e,t,i){function n(e,s,o){if(e.linked)for(var r=0;r<e.linked.length;++r){var a=e.linked[r];if(a.doc!=s){var l=o&&a.sharedHist;i&&!l||(t(a.doc,l),n(a.doc,e,l))}}}n(e,null,!0)}function En(e,t){if(t.cm)throw new Error("This document is already in use.");e.doc=t,t.cm=e,r(e),i(e),e.options.lineWrapping||p(e),e.options.mode=t.modeOption,ft(e)}function Mn(e,t){if(t-=e.first,0>t||t>=e.size)throw new Error("There is no line "+(t+e.first)+" in the document.");for(var i=e;!i.lines;)for(var n=0;;++n){var s=i.children[n],o=s.chunkSize();if(o>t){i=s;break}t-=o}return i.lines[t]}function An(e,t,i){var n=[],s=t.line;return e.iter(t.line,i.line+1,function(e){var o=e.text;s==i.line&&(o=o.slice(0,i.ch)),s==t.line&&(o=o.slice(t.ch)),n.push(o),++s}),n}function In(e,t,i){var n=[];return e.iter(t,i,function(e){n.push(e.text)}),n}function jn(e,t){var i=t-e.height;if(i)for(var n=e;n;n=n.parent)n.height+=i}function Ln(e){if(null==e.parent)return null;for(var t=e.parent,i=us(t.lines,e),n=t.parent;n;t=n,n=n.parent)for(var s=0;n.children[s]!=t;++s)i+=n.children[s].chunkSize();return i+t.first}function On(e,t){var i=e.first;e:do{for(var n=0;n<e.children.length;++n){var s=e.children[n],o=s.height;if(o>t){e=s;continue e}t-=o,i+=s.chunkSize()}return i}while(!e.lines);for(var n=0;n<e.lines.length;++n){var r=e.lines[n],a=r.height;if(a>t)break;t-=a}return i+n}function $n(e){e=Qi(e);for(var t=0,i=e.parent,n=0;n<i.lines.length;++n){var s=i.lines[n];if(s==e)break;t+=s.height}for(var o=i.parent;o;i=o,o=i.parent)for(var n=0;n<o.children.length;++n){var r=o.children[n];if(r==i)break;t+=r.height}return t}function Nn(e){var t=e.order;return null==t&&(t=e.order=$r(e.text)),t}function Fn(e){this.done=[],this.undone=[],this.undoDepth=1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=e||1}function Hn(e,t){var i={from:U(t.from),to:Io(t),text:An(e,t.from,t.to)};return Vn(e,i,t.from.line,t.to.line+1),Pn(e,function(e){Vn(e,i,t.from.line,t.to.line+1)},!0),i}function zn(e){for(;e.length;){var t=hs(e);if(!t.ranges)break;e.pop()}}function Rn(e,t){return t?(zn(e.done),hs(e.done)):e.done.length&&!hs(e.done).ranges?hs(e.done):e.done.length>1&&!e.done[e.done.length-2].ranges?(e.done.pop(),hs(e.done)):void 0}function Bn(e,t,i,n){var s=e.history;s.undone.length=0;var o,r=+new Date;if((s.lastOp==n||s.lastOrigin==t.origin&&t.origin&&("+"==t.origin.charAt(0)&&e.cm&&s.lastModTime>r-e.cm.options.historyEventDelay||"*"==t.origin.charAt(0)))&&(o=Rn(s,s.lastOp==n))){var a=hs(o.changes);0==yo(t.from,t.to)&&0==yo(t.from,a.to)?a.to=Io(t):o.changes.push(Hn(e,t))}else{var l=hs(s.done);for((!l||!l.ranges)&&Un(e.sel,s.done),o={changes:[Hn(e,t)],generation:s.generation},s.done.push(o);s.done.length>s.undoDepth;)s.done.shift(),s.done[0].ranges||s.done.shift()}s.done.push(i),s.generation=++s.maxGeneration,s.lastModTime=s.lastSelTime=r,s.lastOp=s.lastSelOp=n,s.lastOrigin=s.lastSelOrigin=t.origin,a||hr(e,"historyAdded")}function Wn(e,t,i,n){var s=t.charAt(0);return"*"==s||"+"==s&&i.ranges.length==n.ranges.length&&i.somethingSelected()==n.somethingSelected()&&new Date-e.history.lastSelTime<=(e.cm?e.cm.options.historyEventDelay:500);
}function qn(e,t,i,n){var s=e.history,o=n&&n.origin;i==s.lastSelOp||o&&s.lastSelOrigin==o&&(s.lastModTime==s.lastSelTime&&s.lastOrigin==o||Wn(e,o,hs(s.done),t))?s.done[s.done.length-1]=t:Un(t,s.done),s.lastSelTime=+new Date,s.lastSelOrigin=o,s.lastSelOp=i,n&&n.clearRedo!==!1&&zn(s.undone)}function Un(e,t){var i=hs(t);i&&i.ranges&&i.equals(e)||t.push(e)}function Vn(e,t,i,n){var s=t["spans_"+e.id],o=0;e.iter(Math.max(e.first,i),Math.min(e.first+e.size,n),function(i){i.markedSpans&&((s||(s=t["spans_"+e.id]={}))[o]=i.markedSpans),++o})}function Yn(e){if(!e)return null;for(var t,i=0;i<e.length;++i)e[i].marker.explicitlyCleared?t||(t=e.slice(0,i)):t&&t.push(e[i]);return t?t.length?t:null:e}function Gn(e,t){var i=t["spans_"+e.id];if(!i)return null;for(var n=0,s=[];n<t.text.length;++n)s.push(Yn(i[n]));return s}function Kn(e,t,i){for(var n=0,s=[];n<e.length;++n){var o=e[n];if(o.ranges)s.push(i?G.prototype.deepCopy.call(o):o);else{var r=o.changes,a=[];s.push({changes:a});for(var l=0;l<r.length;++l){var c,d=r[l];if(a.push({from:d.from,to:d.to,text:d.text}),t)for(var h in d)(c=h.match(/^spans_(\d+)$/))&&us(t,Number(c[1]))>-1&&(hs(a)[h]=d[h],delete d[h])}}}return s}function Xn(e,t,i,n){i<e.line?e.line+=n:t<e.line&&(e.line=t,e.ch=0)}function Qn(e,t,i,n){for(var s=0;s<e.length;++s){var o=e[s],r=!0;if(o.ranges){o.copied||(o=e[s]=o.deepCopy(),o.copied=!0);for(var a=0;a<o.ranges.length;a++)Xn(o.ranges[a].anchor,t,i,n),Xn(o.ranges[a].head,t,i,n)}else{for(var a=0;a<o.changes.length;++a){var l=o.changes[a];if(i<l.from.line)l.from=bo(l.from.line+n,l.from.ch),l.to=bo(l.to.line+n,l.to.ch);else if(t<=l.to.line){r=!1;break}}r||(e.splice(0,s+1),s=0)}}}function Jn(e,t){var i=t.from.line,n=t.to.line,s=t.text.length-(n-i)-1;Qn(e.done,i,n,s),Qn(e.undone,i,n,s)}function Zn(e){return null!=e.defaultPrevented?e.defaultPrevented:0==e.returnValue}function es(e){return e.target||e.srcElement}function ts(e){var t=e.which;return null==t&&(1&e.button?t=1:2&e.button?t=3:4&e.button&&(t=2)),ho&&e.ctrlKey&&1==t&&(t=3),t}function is(e,t){function i(e){return function(){e.apply(null,o)}}var n=e._handlers&&e._handlers[t];if(n){var s,o=Array.prototype.slice.call(arguments,2);Co?s=Co.delayedCallbacks:ur?s=ur:(s=ur=[],setTimeout(ns,0));for(var r=0;r<n.length;++r)s.push(i(n[r]))}}function ns(){var e=ur;ur=null;for(var t=0;t<e.length;++t)e[t]()}function ss(e,t,i){return hr(e,i||t.type,e,t),Zn(t)||t.codemirrorIgnore}function os(e){var t=e._handlers&&e._handlers.cursorActivity;if(t)for(var i=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]),n=0;n<t.length;++n)-1==us(i,t[n])&&i.push(t[n])}function rs(e,t){var i=e._handlers&&e._handlers[t];return i&&i.length>0}function as(e){e.prototype.on=function(e,t){cr(this,e,t)},e.prototype.off=function(e,t){dr(this,e,t)}}function ls(){this.id=null}function cs(e,t,i){for(var n=0,s=0;;){var o=e.indexOf("	",n);-1==o&&(o=e.length);var r=o-n;if(o==e.length||s+r>=t)return n+Math.min(r,t-s);if(s+=o-n,s+=i-s%i,n=o+1,s>=t)return n}}function ds(e){for(;yr.length<=e;)yr.push(hs(yr)+" ");return yr[e]}function hs(e){return e[e.length-1]}function us(e,t){for(var i=0;i<e.length;++i)if(e[i]==t)return i;return-1}function ps(e,t){for(var i=[],n=0;n<e.length;n++)i[n]=t(e[n],n);return i}function fs(e,t){var i;if(Object.create)i=Object.create(e);else{var n=function(){};n.prototype=e,i=new n}return t&&ms(t,i),i}function ms(e,t,i){t||(t={});for(var n in e)e.hasOwnProperty(n)&&(i!==!1||!t.hasOwnProperty(n))&&(t[n]=e[n]);return t}function gs(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}function vs(e,t){return t?t.source.indexOf("\\w")>-1&&xr(e)?!0:t.test(e):xr(e)}function bs(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!1;return!0}function ys(e){return e.charCodeAt(0)>=768&&Cr.test(e)}function ws(e,t,i,n){var s=document.createElement(e);if(i&&(s.className=i),n&&(s.style.cssText=n),"string"==typeof t)s.appendChild(document.createTextNode(t));else if(t)for(var o=0;o<t.length;++o)s.appendChild(t[o]);return s}function _s(e){for(var t=e.childNodes.length;t>0;--t)e.removeChild(e.firstChild);return e}function ks(e,t){return _s(e).appendChild(t)}function xs(e,t){if(e.contains)return e.contains(t);for(;t=t.parentNode;)if(t==e)return!0}function Cs(){return document.activeElement}function Ss(e){return new RegExp("\\b"+e+"\\b\\s*")}function Ts(e,t){var i=Ss(t);i.test(e.className)&&(e.className=e.className.replace(i,""))}function Ds(e,t){Ss(t).test(e.className)||(e.className+=" "+t)}function Ps(e,t){for(var i=e.split(" "),n=0;n<i.length;n++)i[n]&&!Ss(i[n]).test(t)&&(t+=" "+i[n]);return t}function Es(e){if(document.body.getElementsByClassName)for(var t=document.body.getElementsByClassName("CodeMirror"),i=0;i<t.length;i++){var n=t[i].CodeMirror;n&&e(n)}}function Ms(){Pr||(As(),Pr=!0)}function As(){var e;cr(window,"resize",function(){null==e&&(e=setTimeout(function(){e=null,Sr=null,Es(Et)},100))}),cr(window,"blur",function(){Es(Jt)})}function Is(e){if(null!=Sr)return Sr;var t=ws("div",null,null,"width: 50px; height: 50px; overflow-x: scroll");return ks(e,t),t.offsetWidth&&(Sr=t.offsetHeight-t.clientHeight),Sr||0}function js(e){if(null==Tr){var t=ws("span","\u200b");ks(e,ws("span",[t,document.createTextNode("x")])),0!=e.firstChild.offsetHeight&&(Tr=t.offsetWidth<=1&&t.offsetHeight>2&&!(Js&&8>Zs))}return Tr?ws("span","\u200b"):ws("span","\xa0",null,"display: inline-block; width: 1px; margin-right: -1px")}function Ls(e){if(null!=Dr)return Dr;var t=ks(e,document.createTextNode("A\u062eA")),i=_r(t,0,1).getBoundingClientRect();if(!i||i.left==i.right)return!1;var n=_r(t,1,2).getBoundingClientRect();return Dr=n.right-i.right<3}function Os(e){if(null!=jr)return jr;var t=ks(e,ws("span","x")),i=t.getBoundingClientRect(),n=_r(t,0,1).getBoundingClientRect();return jr=Math.abs(i.left-n.left)>1}function $s(e,t,i,n){if(!e)return n(t,i,"ltr");for(var s=!1,o=0;o<e.length;++o){var r=e[o];(r.from<i&&r.to>t||t==i&&r.to==t)&&(n(Math.max(r.from,t),Math.min(r.to,i),1==r.level?"rtl":"ltr"),s=!0)}s||n(t,i,"ltr")}function Ns(e){return e.level%2?e.to:e.from}function Fs(e){return e.level%2?e.from:e.to}function Hs(e){var t=Nn(e);return t?Ns(t[0]):0}function zs(e){var t=Nn(e);return t?Fs(hs(t)):e.text.length}function Rs(e,t){var i=Mn(e.doc,t),n=Qi(i);n!=i&&(t=Ln(n));var s=Nn(n),o=s?s[0].level%2?zs(n):Hs(n):0;return bo(t,o)}function Bs(e,t){for(var i,n=Mn(e.doc,t);i=Ki(n);)n=i.find(1,!0).line,t=null;var s=Nn(n),o=s?s[0].level%2?Hs(n):zs(n):n.text.length;return bo(null==t?Ln(n):t,o)}function Ws(e,t){var i=Rs(e,t.line),n=Mn(e.doc,i.line),s=Nn(n);if(!s||0==s[0].level){var o=Math.max(0,n.text.search(/\S/)),r=t.line==i.line&&t.ch<=o&&t.ch;return bo(i.line,r?0:o)}return i}function qs(e,t,i){var n=e[0].level;return t==n?!0:i==n?!1:i>t}function Us(e,t){Or=null;for(var i,n=0;n<e.length;++n){var s=e[n];if(s.from<t&&s.to>t)return n;if(s.from==t||s.to==t){if(null!=i)return qs(e,s.level,e[i].level)?(s.from!=s.to&&(Or=i),n):(s.from!=s.to&&(Or=n),i);i=n}}return i}function Vs(e,t,i,n){if(!n)return t+i;do t+=i;while(t>0&&ys(e.text.charAt(t)));return t}function Ys(e,t,i,n){var s=Nn(e);if(!s)return Gs(e,t,i,n);for(var o=Us(s,t),r=s[o],a=Vs(e,t,r.level%2?-i:i,n);;){if(a>r.from&&a<r.to)return a;if(a==r.from||a==r.to)return Us(s,a)==o?a:(r=s[o+=i],i>0==r.level%2?r.to:r.from);if(r=s[o+=i],!r)return null;a=i>0==r.level%2?Vs(e,r.to,-1,n):Vs(e,r.from,1,n)}}function Gs(e,t,i,n){var s=t+i;if(n)for(;s>0&&ys(e.text.charAt(s));)s+=i;return 0>s||s>e.text.length?null:s}var Ks=/gecko\/\d/i.test(navigator.userAgent),Xs=/MSIE \d/.test(navigator.userAgent),Qs=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),Js=Xs||Qs,Zs=Js&&(Xs?document.documentMode||6:Qs[1]),eo=/WebKit\//.test(navigator.userAgent),to=eo&&/Qt\/\d+\.\d+/.test(navigator.userAgent),io=/Chrome\//.test(navigator.userAgent),no=/Opera\//.test(navigator.userAgent),so=/Apple Computer/.test(navigator.vendor),oo=/KHTML\//.test(navigator.userAgent),ro=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(navigator.userAgent),ao=/PhantomJS/.test(navigator.userAgent),lo=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),co=lo||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(navigator.userAgent),ho=lo||/Mac/.test(navigator.platform),uo=/win/i.test(navigator.platform),po=no&&navigator.userAgent.match(/Version\/(\d*\.\d*)/);po&&(po=Number(po[1])),po&&po>=15&&(no=!1,eo=!0);var fo=ho&&(to||no&&(null==po||12.11>po)),mo=Ks||Js&&Zs>=9,go=!1,vo=!1,bo=e.Pos=function(e,t){return this instanceof bo?(this.line=e,void(this.ch=t)):new bo(e,t)},yo=e.cmpPos=function(e,t){return e.line-t.line||e.ch-t.ch};G.prototype={primary:function(){return this.ranges[this.primIndex]},equals:function(e){if(e==this)return!0;if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length)return!1;for(var t=0;t<this.ranges.length;t++){var i=this.ranges[t],n=e.ranges[t];if(0!=yo(i.anchor,n.anchor)||0!=yo(i.head,n.head))return!1}return!0},deepCopy:function(){for(var e=[],t=0;t<this.ranges.length;t++)e[t]=new K(U(this.ranges[t].anchor),U(this.ranges[t].head));return new G(e,this.primIndex)},somethingSelected:function(){for(var e=0;e<this.ranges.length;e++)if(!this.ranges[e].empty())return!0;return!1},contains:function(e,t){t||(t=e);for(var i=0;i<this.ranges.length;i++){var n=this.ranges[i];if(yo(t,n.from())>=0&&yo(e,n.to())<=0)return i}return-1}},K.prototype={from:function(){return Y(this.anchor,this.head)},to:function(){return V(this.anchor,this.head)},empty:function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch}};var wo,_o,ko,xo={left:0,right:0,top:0,bottom:0},Co=null,So=0,To=null,Do=0,Po=0,Eo=null;Js?Eo=-.53:Ks?Eo=15:io?Eo=-.7:so&&(Eo=-1/3);var Mo,Ao=null,Io=e.changeEnd=function(e){return e.text?bo(e.from.line+e.text.length-1,hs(e.text).length+(1==e.text.length?e.from.ch:0)):e.to};e.prototype={constructor:e,focus:function(){window.focus(),St(this),kt(this)},setOption:function(e,t){var i=this.options,n=i[e];i[e]==t&&"mode"!=e||(i[e]=t,Lo.hasOwnProperty(e)&&ct(this,Lo[e])(this,t,n))},getOption:function(e){return this.options[e]},getDoc:function(){return this.doc},addKeyMap:function(e,t){this.state.keyMaps[t?"push":"unshift"](e)},removeKeyMap:function(e){for(var t=this.state.keyMaps,i=0;i<t.length;++i)if(t[i]==e||"string"!=typeof t[i]&&t[i].name==e)return t.splice(i,1),!0},addOverlay:dt(function(t,i){var n=t.token?t:e.getMode(this.options,t);if(n.startState)throw new Error("Overlays may not be stateful.");this.state.overlays.push({mode:n,modeSpec:t,opaque:i&&i.opaque}),this.state.modeGen++,ft(this)}),removeOverlay:dt(function(e){for(var t=this.state.overlays,i=0;i<t.length;++i){var n=t[i].modeSpec;if(n==e||"string"==typeof e&&n.name==e)return t.splice(i,1),this.state.modeGen++,ft(this),void 0}}),indentLine:dt(function(e,t,i){"string"!=typeof t&&"number"!=typeof t&&(t=null==t?this.options.smartIndent?"smart":"prev":t?"add":"subtract"),te(this.doc,e)&&wi(this,e,t,i)}),indentSelection:dt(function(e){for(var t=this.doc.sel.ranges,i=-1,n=0;n<t.length;n++){var s=t[n];if(s.empty())s.head.line>i&&(wi(this,s.head.line,e,!0),i=s.head.line,n==this.doc.sel.primIndex&&bi(this));else{var o=s.from(),r=s.to(),a=Math.max(i,o.line);i=Math.min(this.lastLine(),r.line-(r.ch?0:1))+1;for(var l=a;i>l;++l)wi(this,l,e);var c=this.doc.sel.ranges;0==o.ch&&t.length==c.length&&c[n].from().ch>0&&re(this.doc,n,new K(o,c[n].to()),mr)}}}),getTokenAt:function(e,t){var i=this.doc;e=Z(i,e);for(var n=Se(this,e.line,t),s=this.doc.mode,o=Mn(i,e.line),r=new Go(o.text,this.options.tabSize);r.pos<e.ch&&!r.eol();){r.start=r.pos;var a=hn(s,r,n)}return{start:r.start,end:r.pos,string:r.current(),type:a||null,state:n}},getTokenTypeAt:function(e){e=Z(this.doc,e);var t,i=fn(this,Mn(this.doc,e.line)),n=0,s=(i.length-1)/2,o=e.ch;if(0==o)t=i[2];else for(;;){var r=n+s>>1;if((r?i[2*r-1]:0)>=o)s=r;else{if(!(i[2*r+1]<o)){t=i[2*r+2];break}n=r+1}}var a=t?t.indexOf("cm-overlay "):-1;return 0>a?t:0==a?null:t.slice(0,a-1)},getModeAt:function(t){var i=this.doc.mode;return i.innerMode?e.innerMode(i,this.getTokenAt(t).state).mode:i},getHelper:function(e,t){return this.getHelpers(e,t)[0]},getHelpers:function(e,t){var i=[];if(!zo.hasOwnProperty(t))return zo;var n=zo[t],s=this.getModeAt(e);if("string"==typeof s[t])n[s[t]]&&i.push(n[s[t]]);else if(s[t])for(var o=0;o<s[t].length;o++){var r=n[s[t][o]];r&&i.push(r)}else s.helperType&&n[s.helperType]?i.push(n[s.helperType]):n[s.name]&&i.push(n[s.name]);for(var o=0;o<n._global.length;o++){var a=n._global[o];a.pred(s,this)&&-1==us(i,a.val)&&i.push(a.val)}return i},getStateAfter:function(e,t){var i=this.doc;return e=J(i,null==e?i.first+i.size-1:e),Se(this,e+1,t)},cursorCoords:function(e,t){var i,n=this.doc.sel.primary();return i=null==e?n.head:"object"==typeof e?Z(this.doc,e):e?n.from():n.to(),Ve(this,i,t||"page")},charCoords:function(e,t){return Ue(this,Z(this.doc,e),t||"page")},coordsChar:function(e,t){return e=qe(this,e,t||"page"),Ke(this,e.left,e.top)},lineAtHeight:function(e,t){return e=qe(this,{top:e,left:0},t||"page").top,On(this.doc,e+this.display.viewOffset)},heightAtLine:function(e,t){var i=!1,n=this.doc.first+this.doc.size-1;e<this.doc.first?e=this.doc.first:e>n&&(e=n,i=!0);var s=Mn(this.doc,e);return We(this,s,{top:0,left:0},t||"page").top+(i?this.doc.height-$n(s):0)},defaultTextHeight:function(){return Qe(this.display)},defaultCharWidth:function(){return Je(this.display)},setGutterMarker:dt(function(e,t,i){return _i(this.doc,e,"gutter",function(e){var n=e.gutterMarkers||(e.gutterMarkers={});return n[t]=i,!i&&bs(n)&&(e.gutterMarkers=null),!0})}),clearGutter:dt(function(e){var t=this,i=t.doc,n=i.first;i.iter(function(i){i.gutterMarkers&&i.gutterMarkers[e]&&(i.gutterMarkers[e]=null,mt(t,n,"gutter"),bs(i.gutterMarkers)&&(i.gutterMarkers=null)),++n})}),addLineWidget:dt(function(e,t,i){return rn(this,e,t,i)}),removeLineWidget:function(e){e.clear()},lineInfo:function(e){if("number"==typeof e){if(!te(this.doc,e))return null;var t=e;if(e=Mn(this.doc,e),!e)return null}else{var t=Ln(e);if(null==t)return null}return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(e,t,i,n,s){var o=this.display;e=Ve(this,Z(this.doc,e));var r=e.bottom,a=e.left;if(t.style.position="absolute",o.sizer.appendChild(t),"over"==n)r=e.top;else if("above"==n||"near"==n){var l=Math.max(o.wrapper.clientHeight,this.doc.height),c=Math.max(o.sizer.clientWidth,o.lineSpace.clientWidth);("above"==n||e.bottom+t.offsetHeight>l)&&e.top>t.offsetHeight?r=e.top-t.offsetHeight:e.bottom+t.offsetHeight<=l&&(r=e.bottom),a+t.offsetWidth>c&&(a=c-t.offsetWidth)}t.style.top=r+"px",t.style.left=t.style.right="","right"==s?(a=o.sizer.clientWidth-t.offsetWidth,t.style.right="0px"):("left"==s?a=0:"middle"==s&&(a=(o.sizer.clientWidth-t.offsetWidth)/2),t.style.left=a+"px"),i&&mi(this,a,r,a+t.offsetWidth,r+t.offsetHeight)},triggerOnKeyDown:dt(Yt),triggerOnKeyPress:dt(Xt),triggerOnKeyUp:Kt,execCommand:function(e){return Wo.hasOwnProperty(e)?Wo[e](this):void 0},findPosH:function(e,t,i,n){var s=1;0>t&&(s=-1,t=-t);for(var o=0,r=Z(this.doc,e);t>o&&(r=xi(this.doc,r,s,i,n),!r.hitSide);++o);return r},moveH:dt(function(e,t){var i=this;i.extendSelectionsBy(function(n){return i.display.shift||i.doc.extend||n.empty()?xi(i.doc,n.head,e,t,i.options.rtlMoveVisually):0>e?n.from():n.to()},vr)}),deleteH:dt(function(e,t){var i=this.doc.sel,n=this.doc;i.somethingSelected()?n.replaceSelection("",null,"+delete"):ki(this,function(i){var s=xi(n,i.head,e,t,!1);return 0>e?{from:s,to:i.head}:{from:i.head,to:s}})}),findPosV:function(e,t,i,n){var s=1,o=n;0>t&&(s=-1,t=-t);for(var r=0,a=Z(this.doc,e);t>r;++r){var l=Ve(this,a,"div");if(null==o?o=l.left:l.left=o,a=Ci(this,l,s,i),a.hitSide)break}return a},moveV:dt(function(e,t){var i=this,n=this.doc,s=[],o=!i.display.shift&&!n.extend&&n.sel.somethingSelected();if(n.extendSelectionsBy(function(r){if(o)return 0>e?r.from():r.to();var a=Ve(i,r.head,"div");null!=r.goalColumn&&(a.left=r.goalColumn),s.push(a.left);var l=Ci(i,a,e,t);return"page"==t&&r==n.sel.primary()&&vi(i,null,Ue(i,l,"div").top-a.top),l},vr),s.length)for(var r=0;r<n.sel.ranges.length;r++)n.sel.ranges[r].goalColumn=s[r]}),findWordAt:function(e){var t=this.doc,i=Mn(t,e.line).text,n=e.ch,s=e.ch;if(i){var o=this.getHelper(e,"wordChars");(e.xRel<0||s==i.length)&&n?--n:++s;for(var r=i.charAt(n),a=vs(r,o)?function(e){return vs(e,o)}:/\s/.test(r)?function(e){return/\s/.test(e)}:function(e){return!/\s/.test(e)&&!vs(e)};n>0&&a(i.charAt(n-1));)--n;for(;s<i.length&&a(i.charAt(s));)++s}return new K(bo(e.line,n),bo(e.line,s))},toggleOverwrite:function(e){null!=e&&e==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?Ds(this.display.cursorDiv,"CodeMirror-overwrite"):Ts(this.display.cursorDiv,"CodeMirror-overwrite"),hr(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return Cs()==this.display.input},scrollTo:dt(function(e,t){(null!=e||null!=t)&&yi(this),null!=e&&(this.curOp.scrollLeft=e),null!=t&&(this.curOp.scrollTop=t)}),getScrollInfo:function(){var e=this.display.scroller,t=pr;return{left:e.scrollLeft,top:e.scrollTop,height:e.scrollHeight-t,width:e.scrollWidth-t,clientHeight:e.clientHeight-t,clientWidth:e.clientWidth-t}},scrollIntoView:dt(function(e,t){if(null==e?(e={from:this.doc.sel.primary().head,to:null},null==t&&(t=this.options.cursorScrollMargin)):"number"==typeof e?e={from:bo(e,0),to:null}:null==e.from&&(e={from:e,to:null}),e.to||(e.to=e.from),e.margin=t||0,null!=e.from.line)yi(this),this.curOp.scrollToPos=e;else{var i=gi(this,Math.min(e.from.left,e.to.left),Math.min(e.from.top,e.to.top)-e.margin,Math.max(e.from.right,e.to.right),Math.max(e.from.bottom,e.to.bottom)+e.margin);this.scrollTo(i.scrollLeft,i.scrollTop)}}),setSize:dt(function(e,t){function i(e){return"number"==typeof e||/^\d+$/.test(String(e))?e+"px":e}var n=this;null!=e&&(n.display.wrapper.style.width=i(e)),null!=t&&(n.display.wrapper.style.height=i(t)),n.options.lineWrapping&&He(this);var s=n.display.viewFrom;n.doc.iter(s,n.display.viewTo,function(e){if(e.widgets)for(var t=0;t<e.widgets.length;t++)if(e.widgets[t].noHScroll){mt(n,s,"widget");break}++s}),n.curOp.forceUpdate=!0,hr(n,"refresh",this)}),operation:function(e){return lt(this,e)},refresh:dt(function(){var e=this.display.cachedTextHeight;ft(this),this.curOp.forceUpdate=!0,ze(this),this.scrollTo(this.doc.scrollLeft,this.doc.scrollTop),h(this),(null==e||Math.abs(e-Qe(this.display))>.5)&&r(this),hr(this,"refresh",this)}),swapDoc:dt(function(e){var t=this.doc;return t.cm=null,En(this,e),ze(this),Ct(this),this.scrollTo(e.scrollLeft,e.scrollTop),this.curOp.forceScroll=!0,is(this,"swapDoc",this,t),t}),getInputField:function(){return this.display.input},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},as(e);var jo=e.defaults={},Lo=e.optionHandlers={},Oo=e.Init={toString:function(){return"CodeMirror.Init"}};Si("value","",function(e,t){e.setValue(t)},!0),Si("mode",null,function(e,t){e.doc.modeOption=t,i(e)},!0),Si("indentUnit",2,i,!0),Si("indentWithTabs",!1),Si("smartIndent",!0),Si("tabSize",4,function(e){n(e),ze(e),ft(e)},!0),Si("specialChars",/[\t\u0000-\u0019\u00ad\u200b-\u200f\u2028\u2029\ufeff]/g,function(e,t){e.options.specialChars=new RegExp(t.source+(t.test("	")?"":"|	"),"g"),e.refresh()},!0),Si("specialCharPlaceholder",bn,function(e){e.refresh()},!0),Si("electricChars",!0),Si("rtlMoveVisually",!uo),Si("wholeLineUpdateBefore",!0),Si("theme","default",function(e){l(e),c(e)},!0),Si("keyMap","default",a),Si("extraKeys",null),Si("lineWrapping",!1,s,!0),Si("gutters",[],function(e){f(e.options),c(e)},!0),Si("fixedGutter",!0,function(e,t){e.display.gutters.style.left=t?k(e.display)+"px":"0",e.refresh()},!0),Si("coverGutterNextToScrollbar",!1,v,!0),Si("lineNumbers",!1,function(e){f(e.options),c(e)},!0),Si("firstLineNumber",1,c,!0),Si("lineNumberFormatter",function(e){return e},c,!0),Si("showCursorWhenSelecting",!1,be,!0),Si("resetSelectionOnContextMenu",!0),Si("readOnly",!1,function(e,t){"nocursor"==t?(Jt(e),e.display.input.blur(),e.display.disabled=!0):(e.display.disabled=!1,t||Ct(e))}),Si("disableInput",!1,function(e,t){t||Ct(e)},!0),Si("dragDrop",!0),Si("cursorBlinkRate",530),Si("cursorScrollMargin",0),Si("cursorHeight",1,be,!0),Si("singleCursorHeightPerLine",!0,be,!0),Si("workTime",100),Si("workDelay",100),Si("flattenSpans",!0,n,!0),Si("addModeClass",!1,n,!0),Si("pollInterval",100),Si("undoDepth",200,function(e,t){e.doc.history.undoDepth=t}),Si("historyEventDelay",1250),Si("viewportMargin",10,function(e){e.refresh()},!0),Si("maxHighlightLength",1e4,n,!0),Si("moveInputWithCursor",!0,function(e,t){t||(e.display.inputDiv.style.top=e.display.inputDiv.style.left=0)}),Si("tabindex",null,function(e,t){e.display.input.tabIndex=t||""}),Si("autofocus",null);var $o=e.modes={},No=e.mimeModes={};e.defineMode=function(t,i){!e.defaults.mode&&"null"!=t&&(e.defaults.mode=t),arguments.length>2&&(i.dependencies=Array.prototype.slice.call(arguments,2)),$o[t]=i},e.defineMIME=function(e,t){No[e]=t},e.resolveMode=function(t){if("string"==typeof t&&No.hasOwnProperty(t))t=No[t];else if(t&&"string"==typeof t.name&&No.hasOwnProperty(t.name)){var i=No[t.name];"string"==typeof i&&(i={name:i}),t=fs(i,t),t.name=i.name}else if("string"==typeof t&&/^[\w\-]+\/[\w\-]+\+xml$/.test(t))return e.resolveMode("application/xml");return"string"==typeof t?{name:t}:t||{name:"null"}},e.getMode=function(t,i){var i=e.resolveMode(i),n=$o[i.name];if(!n)return e.getMode(t,"text/plain");var s=n(t,i);if(Fo.hasOwnProperty(i.name)){var o=Fo[i.name];for(var r in o)o.hasOwnProperty(r)&&(s.hasOwnProperty(r)&&(s["_"+r]=s[r]),s[r]=o[r])}if(s.name=i.name,i.helperType&&(s.helperType=i.helperType),i.modeProps)for(var r in i.modeProps)s[r]=i.modeProps[r];return s},e.defineMode("null",function(){return{token:function(e){e.skipToEnd()}}}),e.defineMIME("text/plain","null");var Fo=e.modeExtensions={};e.extendMode=function(e,t){var i=Fo.hasOwnProperty(e)?Fo[e]:Fo[e]={};ms(t,i)},e.defineExtension=function(t,i){e.prototype[t]=i},e.defineDocExtension=function(e,t){nr.prototype[e]=t},e.defineOption=Si;var Ho=[];e.defineInitHook=function(e){Ho.push(e)};var zo=e.helpers={};e.registerHelper=function(t,i,n){zo.hasOwnProperty(t)||(zo[t]=e[t]={_global:[]}),zo[t][i]=n},e.registerGlobalHelper=function(t,i,n,s){e.registerHelper(t,i,s),zo[t]._global.push({pred:n,val:s})};var Ro=e.copyState=function(e,t){if(t===!0)return t;if(e.copyState)return e.copyState(t);var i={};for(var n in t){var s=t[n];s instanceof Array&&(s=s.concat([])),i[n]=s}return i},Bo=e.startState=function(e,t,i){return e.startState?e.startState(t,i):!0};e.innerMode=function(e,t){for(;e.innerMode;){var i=e.innerMode(t);if(!i||i.mode==e)break;t=i.state,e=i.mode}return i||{mode:e,state:t}};var Wo=e.commands={selectAll:function(e){e.setSelection(bo(e.firstLine(),0),bo(e.lastLine()),mr)},singleSelection:function(e){e.setSelection(e.getCursor("anchor"),e.getCursor("head"),mr)},killLine:function(e){ki(e,function(t){if(t.empty()){var i=Mn(e.doc,t.head.line).text.length;return t.head.ch==i&&t.head.line<e.lastLine()?{from:t.head,to:bo(t.head.line+1,0)}:{from:t.head,to:bo(t.head.line,i)}}return{from:t.from(),to:t.to()}})},deleteLine:function(e){ki(e,function(t){return{from:bo(t.from().line,0),to:Z(e.doc,bo(t.to().line+1,0))}})},delLineLeft:function(e){ki(e,function(e){return{from:bo(e.from().line,0),to:e.from()}})},delWrappedLineLeft:function(e){ki(e,function(t){var i=e.charCoords(t.head,"div").top+5,n=e.coordsChar({left:0,top:i},"div");return{from:n,to:t.from()}})},delWrappedLineRight:function(e){ki(e,function(t){var i=e.charCoords(t.head,"div").top+5,n=e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:i},"div");return{from:t.from(),to:n}})},undo:function(e){e.undo()},redo:function(e){e.redo()},undoSelection:function(e){e.undoSelection()},redoSelection:function(e){e.redoSelection()},goDocStart:function(e){e.extendSelection(bo(e.firstLine(),0))},goDocEnd:function(e){e.extendSelection(bo(e.lastLine()))},goLineStart:function(e){e.extendSelectionsBy(function(t){return Rs(e,t.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(e){e.extendSelectionsBy(function(t){return Ws(e,t.head)},{origin:"+move",bias:1})},goLineEnd:function(e){e.extendSelectionsBy(function(t){return Bs(e,t.head.line)},{origin:"+move",bias:-1})},goLineRight:function(e){e.extendSelectionsBy(function(t){var i=e.charCoords(t.head,"div").top+5;return e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:i},"div")},vr)},goLineLeft:function(e){e.extendSelectionsBy(function(t){var i=e.charCoords(t.head,"div").top+5;return e.coordsChar({left:0,top:i},"div")},vr)},goLineLeftSmart:function(e){e.extendSelectionsBy(function(t){var i=e.charCoords(t.head,"div").top+5,n=e.coordsChar({left:0,top:i},"div");return n.ch<e.getLine(n.line).search(/\S/)?Ws(e,t.head):n},vr)},goLineUp:function(e){e.moveV(-1,"line")},goLineDown:function(e){e.moveV(1,"line")},goPageUp:function(e){e.moveV(-1,"page")},goPageDown:function(e){e.moveV(1,"page")},goCharLeft:function(e){e.moveH(-1,"char")},goCharRight:function(e){e.moveH(1,"char")},goColumnLeft:function(e){e.moveH(-1,"column")},goColumnRight:function(e){e.moveH(1,"column")},goWordLeft:function(e){e.moveH(-1,"word")},goGroupRight:function(e){e.moveH(1,"group")},goGroupLeft:function(e){e.moveH(-1,"group")},goWordRight:function(e){e.moveH(1,"word")},delCharBefore:function(e){e.deleteH(-1,"char")},delCharAfter:function(e){e.deleteH(1,"char")},delWordBefore:function(e){e.deleteH(-1,"word")},delWordAfter:function(e){e.deleteH(1,"word")},delGroupBefore:function(e){e.deleteH(-1,"group")},delGroupAfter:function(e){e.deleteH(1,"group")},indentAuto:function(e){e.indentSelection("smart")},indentMore:function(e){e.indentSelection("add")},indentLess:function(e){e.indentSelection("subtract")},insertTab:function(e){e.replaceSelection("	")},insertSoftTab:function(e){for(var t=[],i=e.listSelections(),n=e.options.tabSize,s=0;s<i.length;s++){var o=i[s].from(),r=br(e.getLine(o.line),o.ch,n);t.push(new Array(n-r%n+1).join(" "))}e.replaceSelections(t)},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.execCommand("insertTab")},transposeChars:function(e){lt(e,function(){for(var t=e.listSelections(),i=[],n=0;n<t.length;n++){var s=t[n].head,o=Mn(e.doc,s.line).text;if(o)if(s.ch==o.length&&(s=new bo(s.line,s.ch-1)),s.ch>0)s=new bo(s.line,s.ch+1),e.replaceRange(o.charAt(s.ch-1)+o.charAt(s.ch-2),bo(s.line,s.ch-2),s,"+transpose");else if(s.line>e.doc.first){var r=Mn(e.doc,s.line-1).text;r&&e.replaceRange(o.charAt(0)+"\n"+r.charAt(r.length-1),bo(s.line-1,r.length-1),bo(s.line,1),"+transpose")}i.push(new K(s,s))}e.setSelections(i)})},newlineAndIndent:function(e){lt(e,function(){for(var t=e.listSelections().length,i=0;t>i;i++){var n=e.listSelections()[i];e.replaceRange("\n",n.anchor,n.head,"+input"),e.indentLine(n.from().line+1,null,!0),bi(e)}})},toggleOverwrite:function(e){e.toggleOverwrite()}},qo=e.keyMap={};qo.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},qo.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},qo.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},qo.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"},qo["default"]=ho?qo.macDefault:qo.pcDefault;var Uo=e.lookupKey=function(e,t,i){function n(t){t=Ti(t);var s=t[e];if(s===!1)return"stop";if(null!=s&&i(s))return!0;if(t.nofallthrough)return"stop";var o=t.fallthrough;if(null==o)return!1;if("[object Array]"!=Object.prototype.toString.call(o))return n(o);for(var r=0;r<o.length;++r){var a=n(o[r]);if(a)return a}return!1}for(var s=0;s<t.length;++s){var o=n(t[s]);if(o)return"stop"!=o}},Vo=e.isModifierKey=function(e){var t=Lr[e.keyCode];return"Ctrl"==t||"Alt"==t||"Shift"==t||"Mod"==t},Yo=e.keyName=function(e,t){if(no&&34==e.keyCode&&e["char"])return!1;var i=Lr[e.keyCode];return null==i||e.altGraphKey?!1:(e.altKey&&(i="Alt-"+i),(fo?e.metaKey:e.ctrlKey)&&(i="Ctrl-"+i),(fo?e.ctrlKey:e.metaKey)&&(i="Cmd-"+i),!t&&e.shiftKey&&(i="Shift-"+i),i)};e.fromTextArea=function(t,i){function n(){t.value=c.getValue()}if(i||(i={}),i.value=t.value,!i.tabindex&&t.tabindex&&(i.tabindex=t.tabindex),!i.placeholder&&t.placeholder&&(i.placeholder=t.placeholder),null==i.autofocus){var s=Cs();i.autofocus=s==t||null!=t.getAttribute("autofocus")&&s==document.body}if(t.form&&(cr(t.form,"submit",n),!i.leaveSubmitMethodAlone)){var o=t.form,r=o.submit;try{var a=o.submit=function(){n(),o.submit=r,o.submit(),o.submit=a}}catch(l){}}t.style.display="none";var c=e(function(e){t.parentNode.insertBefore(e,t.nextSibling)},i);return c.save=n,c.getTextArea=function(){return t},c.toTextArea=function(){c.toTextArea=isNaN,n(),t.parentNode.removeChild(c.getWrapperElement()),t.style.display="",t.form&&(dr(t.form,"submit",n),"function"==typeof t.form.submit&&(t.form.submit=r))},c};var Go=e.StringStream=function(e,t){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0};Go.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==this.lineStart},peek:function(){return this.string.charAt(this.pos)||void 0},next:function(){return this.pos<this.string.length?this.string.charAt(this.pos++):void 0},eat:function(e){var t=this.string.charAt(this.pos);if("string"==typeof e)var i=t==e;else var i=t&&(e.test?e.test(t):e(t));return i?(++this.pos,t):void 0},eatWhile:function(e){for(var t=this.pos;this.eat(e););return this.pos>t},eatSpace:function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},skipToEnd:function(){this.pos=this.string.length},skipTo:function(e){var t=this.string.indexOf(e,this.pos);return t>-1?(this.pos=t,!0):void 0},backUp:function(e){this.pos-=e},column:function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=br(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?br(this.string,this.lineStart,this.tabSize):0)},indentation:function(){return br(this.string,null,this.tabSize)-(this.lineStart?br(this.string,this.lineStart,this.tabSize):0)},match:function(e,t,i){if("string"!=typeof e){var n=this.string.slice(this.pos).match(e);return n&&n.index>0?null:(n&&t!==!1&&(this.pos+=n[0].length),n)}var s=function(e){return i?e.toLowerCase():e},o=this.string.substr(this.pos,e.length);return s(o)==s(e)?(t!==!1&&(this.pos+=e.length),!0):void 0},current:function(){return this.string.slice(this.start,this.pos)},hideFirstChars:function(e,t){this.lineStart+=e;try{return t()}finally{this.lineStart-=e}}};var Ko=e.TextMarker=function(e,t){this.lines=[],this.type=t,this.doc=e};as(Ko),Ko.prototype.clear=function(){if(!this.explicitlyCleared){
var e=this.doc.cm,t=e&&!e.curOp;if(t&&Ze(e),rs(this,"clear")){var i=this.find();i&&is(this,"clear",i.from,i.to)}for(var n=null,s=null,o=0;o<this.lines.length;++o){var r=this.lines[o],a=ji(r.markedSpans,this);e&&!this.collapsed?mt(e,Ln(r),"text"):e&&(null!=a.to&&(s=Ln(r)),null!=a.from&&(n=Ln(r))),r.markedSpans=Li(r.markedSpans,a),null==a.from&&this.collapsed&&!tn(this.doc,r)&&e&&jn(r,Qe(e.display))}if(e&&this.collapsed&&!e.options.lineWrapping)for(var o=0;o<this.lines.length;++o){var l=Qi(this.lines[o]),c=u(l);c>e.display.maxLineLength&&(e.display.maxLine=l,e.display.maxLineLength=c,e.display.maxLineChanged=!0)}null!=n&&e&&this.collapsed&&ft(e,n,s+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,e&&pe(e.doc)),e&&is(e,"markerCleared",e,this),t&&tt(e),this.parent&&this.parent.clear()}},Ko.prototype.find=function(e,t){null==e&&"bookmark"==this.type&&(e=1);for(var i,n,s=0;s<this.lines.length;++s){var o=this.lines[s],r=ji(o.markedSpans,this);if(null!=r.from&&(i=bo(t?o:Ln(o),r.from),-1==e))return i;if(null!=r.to&&(n=bo(t?o:Ln(o),r.to),1==e))return n}return i&&{from:i,to:n}},Ko.prototype.changed=function(){var e=this.find(-1,!0),t=this,i=this.doc.cm;e&&i&&lt(i,function(){var n=e.line,s=Ln(e.line),o=je(i,s);if(o&&(Fe(o),i.curOp.selectionChanged=i.curOp.forceUpdate=!0),i.curOp.updateMaxLine=!0,!tn(t.doc,n)&&null!=t.height){var r=t.height;t.height=null;var a=on(t)-r;a&&jn(n,n.height+a)}})},Ko.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(!t.maybeHiddenMarkers||-1==us(t.maybeHiddenMarkers,this))&&(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},Ko.prototype.detachLine=function(e){if(this.lines.splice(us(this.lines,e),1),!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(t.maybeHiddenMarkers||(t.maybeHiddenMarkers=[])).push(this)}};var Xo=0,Qo=e.SharedTextMarker=function(e,t){this.markers=e,this.primary=t;for(var i=0;i<e.length;++i)e[i].parent=this};as(Qo),Qo.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();is(this,"clear")}},Qo.prototype.find=function(e,t){return this.primary.find(e,t)};var Jo=e.LineWidget=function(e,t,i){if(i)for(var n in i)i.hasOwnProperty(n)&&(this[n]=i[n]);this.cm=e,this.node=t};as(Jo),Jo.prototype.clear=function(){var e=this.cm,t=this.line.widgets,i=this.line,n=Ln(i);if(null!=n&&t){for(var s=0;s<t.length;++s)t[s]==this&&t.splice(s--,1);t.length||(i.widgets=null);var o=on(this);lt(e,function(){sn(e,i,-o),mt(e,n,"widget"),jn(i,Math.max(0,i.height-o))})}},Jo.prototype.changed=function(){var e=this.height,t=this.cm,i=this.line;this.height=null;var n=on(this)-e;n&&lt(t,function(){t.curOp.forceUpdate=!0,sn(t,i,n),jn(i,i.height+n)})};var Zo=e.Line=function(e,t,i){this.text=e,Wi(this,t),this.height=i?i(this):1};as(Zo),Zo.prototype.lineNo=function(){return Ln(this)};var er={},tr={};Tn.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var i=e,n=e+t;n>i;++i){var s=this.lines[i];this.height-=s.height,ln(s),is(s,"delete")}this.lines.splice(e,t)},collapse:function(e){e.push.apply(e,this.lines)},insertInner:function(e,t,i){this.height+=i,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var n=0;n<t.length;++n)t[n].parent=this},iterN:function(e,t,i){for(var n=e+t;n>e;++e)if(i(this.lines[e]))return!0}},Dn.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){this.size-=t;for(var i=0;i<this.children.length;++i){var n=this.children[i],s=n.chunkSize();if(s>e){var o=Math.min(t,s-e),r=n.height;if(n.removeInner(e,o),this.height-=r-n.height,s==o&&(this.children.splice(i--,1),n.parent=null),0==(t-=o))break;e=0}else e-=s}if(this.size-t<25&&(this.children.length>1||!(this.children[0]instanceof Tn))){var a=[];this.collapse(a),this.children=[new Tn(a)],this.children[0].parent=this}},collapse:function(e){for(var t=0;t<this.children.length;++t)this.children[t].collapse(e)},insertInner:function(e,t,i){this.size+=t.length,this.height+=i;for(var n=0;n<this.children.length;++n){var s=this.children[n],o=s.chunkSize();if(o>=e){if(s.insertInner(e,t,i),s.lines&&s.lines.length>50){for(;s.lines.length>50;){var r=s.lines.splice(s.lines.length-25,25),a=new Tn(r);s.height-=a.height,this.children.splice(n+1,0,a),a.parent=this}this.maybeSpill()}break}e-=o}},maybeSpill:function(){if(!(this.children.length<=10)){var e=this;do{var t=e.children.splice(e.children.length-5,5),i=new Dn(t);if(e.parent){e.size-=i.size,e.height-=i.height;var n=us(e.parent.children,e);e.parent.children.splice(n+1,0,i)}else{var s=new Dn(e.children);s.parent=e,e.children=[s,i],e=s}i.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()}},iterN:function(e,t,i){for(var n=0;n<this.children.length;++n){var s=this.children[n],o=s.chunkSize();if(o>e){var r=Math.min(t,o-e);if(s.iterN(e,r,i))return!0;if(0==(t-=r))break;e=0}else e-=o}}};var ir=0,nr=e.Doc=function(e,t,i){if(!(this instanceof nr))return new nr(e,t,i);null==i&&(i=0),Dn.call(this,[new Tn([new Zo("",null)])]),this.first=i,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.frontier=i;var n=bo(i,0);this.sel=Q(n),this.history=new Fn(null),this.id=++ir,this.modeOption=t,"string"==typeof e&&(e=Mr(e)),Sn(this,{from:n,to:n,text:e}),de(this,Q(n),mr)};nr.prototype=fs(Dn.prototype,{constructor:nr,iter:function(e,t,i){i?this.iterN(e-this.first,t-e,i):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){for(var i=0,n=0;n<t.length;++n)i+=t[n].height;this.insertInner(e-this.first,t,i)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=In(this,this.first,this.first+this.size);return e===!1?t:t.join(e||"\n")},setValue:ht(function(e){var t=bo(this.first,0),i=this.first+this.size-1;ri(this,{from:t,to:bo(i,Mn(this,i).text.length),text:Mr(e),origin:"setValue"},!0),de(this,Q(t))}),replaceRange:function(e,t,i,n){t=Z(this,t),i=i?Z(this,i):t,ui(this,e,t,i,n)},getRange:function(e,t,i){var n=An(this,Z(this,e),Z(this,t));return i===!1?n:n.join(i||"\n")},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},getLineHandle:function(e){return te(this,e)?Mn(this,e):void 0},getLineNumber:function(e){return Ln(e)},getLineHandleVisualStart:function(e){return"number"==typeof e&&(e=Mn(this,e)),Qi(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return Z(this,e)},getCursor:function(e){var t,i=this.sel.primary();return t=null==e||"head"==e?i.head:"anchor"==e?i.anchor:"end"==e||"to"==e||e===!1?i.to():i.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:ht(function(e,t,i){ae(this,Z(this,"number"==typeof e?bo(e,t||0):e),null,i)}),setSelection:ht(function(e,t,i){ae(this,Z(this,e),Z(this,t||e),i)}),extendSelection:ht(function(e,t,i){se(this,Z(this,e),t&&Z(this,t),i)}),extendSelections:ht(function(e,t){oe(this,ie(this,e,t))}),extendSelectionsBy:ht(function(e,t){oe(this,ps(this.sel.ranges,e),t)}),setSelections:ht(function(e,t,i){if(e.length){for(var n=0,s=[];n<e.length;n++)s[n]=new K(Z(this,e[n].anchor),Z(this,e[n].head));null==t&&(t=Math.min(e.length-1,this.sel.primIndex)),de(this,X(s,t),i)}}),addSelection:ht(function(e,t,i){var n=this.sel.ranges.slice(0);n.push(new K(Z(this,e),Z(this,t||e))),de(this,X(n,n.length-1),i)}),getSelection:function(e){for(var t,i=this.sel.ranges,n=0;n<i.length;n++){var s=An(this,i[n].from(),i[n].to());t=t?t.concat(s):s}return e===!1?t:t.join(e||"\n")},getSelections:function(e){for(var t=[],i=this.sel.ranges,n=0;n<i.length;n++){var s=An(this,i[n].from(),i[n].to());e!==!1&&(s=s.join(e||"\n")),t[n]=s}return t},replaceSelection:function(e,t,i){for(var n=[],s=0;s<this.sel.ranges.length;s++)n[s]=e;this.replaceSelections(n,t,i||"+input")},replaceSelections:ht(function(e,t,i){for(var n=[],s=this.sel,o=0;o<s.ranges.length;o++){var r=s.ranges[o];n[o]={from:r.from(),to:r.to(),text:Mr(e[o]),origin:i}}for(var a=t&&"end"!=t&&si(this,n,t),o=n.length-1;o>=0;o--)ri(this,n[o]);a?ce(this,a):this.cm&&bi(this.cm)}),undo:ht(function(){li(this,"undo")}),redo:ht(function(){li(this,"redo")}),undoSelection:ht(function(){li(this,"undo",!0)}),redoSelection:ht(function(){li(this,"redo",!0)}),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){for(var e=this.history,t=0,i=0,n=0;n<e.done.length;n++)e.done[n].ranges||++t;for(var n=0;n<e.undone.length;n++)e.undone[n].ranges||++i;return{undo:t,redo:i}},clearHistory:function(){this.history=new Fn(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(e){return e&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:Kn(this.history.done),undone:Kn(this.history.undone)}},setHistory:function(e){var t=this.history=new Fn(this.history.maxGeneration);t.done=Kn(e.done.slice(0),null,!0),t.undone=Kn(e.undone.slice(0),null,!0)},addLineClass:ht(function(e,t,i){return _i(this,e,"class",function(e){var n="text"==t?"textClass":"background"==t?"bgClass":"wrapClass";if(e[n]){if(new RegExp("(?:^|\\s)"+i+"(?:$|\\s)").test(e[n]))return!1;e[n]+=" "+i}else e[n]=i;return!0})}),removeLineClass:ht(function(e,t,i){return _i(this,e,"class",function(e){var n="text"==t?"textClass":"background"==t?"bgClass":"wrapClass",s=e[n];if(!s)return!1;if(null==i)e[n]=null;else{var o=s.match(new RegExp("(?:^|\\s+)"+i+"(?:$|\\s+)"));if(!o)return!1;var r=o.index+o[0].length;e[n]=s.slice(0,o.index)+(o.index&&r!=s.length?" ":"")+s.slice(r)||null}return!0})}),markText:function(e,t,i){return Di(this,Z(this,e),Z(this,t),i,"range")},setBookmark:function(e,t){var i={replacedWith:t&&(null==t.nodeType?t.widget:t),insertLeft:t&&t.insertLeft,clearWhenEmpty:!1,shared:t&&t.shared};return e=Z(this,e),Di(this,e,e,i,"bookmark")},findMarksAt:function(e){e=Z(this,e);var t=[],i=Mn(this,e.line).markedSpans;if(i)for(var n=0;n<i.length;++n){var s=i[n];(null==s.from||s.from<=e.ch)&&(null==s.to||s.to>=e.ch)&&t.push(s.marker.parent||s.marker)}return t},findMarks:function(e,t,i){e=Z(this,e),t=Z(this,t);var n=[],s=e.line;return this.iter(e.line,t.line+1,function(o){var r=o.markedSpans;if(r)for(var a=0;a<r.length;a++){var l=r[a];!(s==e.line&&e.ch>l.to||null==l.from&&s!=e.line||s==t.line&&l.from>t.ch)&&(!i||i(l.marker))&&n.push(l.marker.parent||l.marker)}++s}),n},getAllMarks:function(){var e=[];return this.iter(function(t){var i=t.markedSpans;if(i)for(var n=0;n<i.length;++n)null!=i[n].from&&e.push(i[n].marker)}),e},posFromIndex:function(e){var t,i=this.first;return this.iter(function(n){var s=n.text.length+1;return s>e?(t=e,!0):(e-=s,void++i)}),Z(this,bo(i,t))},indexFromPos:function(e){e=Z(this,e);var t=e.ch;return e.line<this.first||e.ch<0?0:(this.iter(this.first,e.line,function(e){t+=e.text.length+1}),t)},copy:function(e){var t=new nr(In(this,this.first,this.first+this.size),this.modeOption,this.first);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel=this.sel,t.extend=!1,e&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(e){e||(e={});var t=this.first,i=this.first+this.size;null!=e.from&&e.from>t&&(t=e.from),null!=e.to&&e.to<i&&(i=e.to);var n=new nr(In(this,t,i),e.mode||this.modeOption,t);return e.sharedHist&&(n.history=this.history),(this.linked||(this.linked=[])).push({doc:n,sharedHist:e.sharedHist}),n.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],Mi(n,Ei(this)),n},unlinkDoc:function(t){if(t instanceof e&&(t=t.doc),this.linked)for(var i=0;i<this.linked.length;++i){var n=this.linked[i];if(n.doc==t){this.linked.splice(i,1),t.unlinkDoc(this),Ai(Ei(this));break}}if(t.history==this.history){var s=[t.id];Pn(t,function(e){s.push(e.id)},!0),t.history=new Fn(null),t.history.done=Kn(this.history.done,s),t.history.undone=Kn(this.history.undone,s)}},iterLinkedDocs:function(e){Pn(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm}}),nr.prototype.eachLine=nr.prototype.iter;var sr="iter insert remove copy getEditor".split(" ");for(var or in nr.prototype)nr.prototype.hasOwnProperty(or)&&us(sr,or)<0&&(e.prototype[or]=function(e){return function(){return e.apply(this.doc,arguments)}}(nr.prototype[or]));as(nr);var rr=e.e_preventDefault=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},ar=e.e_stopPropagation=function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},lr=e.e_stop=function(e){rr(e),ar(e)},cr=e.on=function(e,t,i){if(e.addEventListener)e.addEventListener(t,i,!1);else if(e.attachEvent)e.attachEvent("on"+t,i);else{var n=e._handlers||(e._handlers={}),s=n[t]||(n[t]=[]);s.push(i)}},dr=e.off=function(e,t,i){if(e.removeEventListener)e.removeEventListener(t,i,!1);else if(e.detachEvent)e.detachEvent("on"+t,i);else{var n=e._handlers&&e._handlers[t];if(!n)return;for(var s=0;s<n.length;++s)if(n[s]==i){n.splice(s,1);break}}},hr=e.signal=function(e,t){var i=e._handlers&&e._handlers[t];if(i)for(var n=Array.prototype.slice.call(arguments,2),s=0;s<i.length;++s)i[s].apply(null,n)},ur=null,pr=30,fr=e.Pass={toString:function(){return"CodeMirror.Pass"}},mr={scroll:!1},gr={origin:"*mouse"},vr={origin:"+move"};ls.prototype.set=function(e,t){clearTimeout(this.id),this.id=setTimeout(t,e)};var br=e.countColumn=function(e,t,i,n,s){null==t&&(t=e.search(/[^\s\u00a0]/),-1==t&&(t=e.length));for(var o=n||0,r=s||0;;){var a=e.indexOf("	",o);if(0>a||a>=t)return r+(t-o);r+=a-o,r+=i-r%i,o=a+1}},yr=[""],wr=function(e){e.select()};lo?wr=function(e){e.selectionStart=0,e.selectionEnd=e.value.length}:Js&&(wr=function(e){try{e.select()}catch(t){}}),[].indexOf&&(us=function(e,t){return e.indexOf(t)}),[].map&&(ps=function(e,t){return e.map(t)});var _r,kr=/[\u00df\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,xr=e.isWordChar=function(e){return/\w/.test(e)||e>"\x80"&&(e.toUpperCase()!=e.toLowerCase()||kr.test(e))},Cr=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;_r=document.createRange?function(e,t,i){var n=document.createRange();return n.setEnd(e,i),n.setStart(e,t),n}:function(e,t,i){var n=document.body.createTextRange();return n.moveToElementText(e.parentNode),n.collapse(!0),n.moveEnd("character",i),n.moveStart("character",t),n},Js&&11>Zs&&(Cs=function(){try{return document.activeElement}catch(e){return document.body}});var Sr,Tr,Dr,Pr=!1,Er=function(){if(Js&&9>Zs)return!1;var e=ws("div");return"draggable"in e||"dragDrop"in e}(),Mr=e.splitLines=3!="\n\nb".split(/\n/).length?function(e){for(var t=0,i=[],n=e.length;n>=t;){var s=e.indexOf("\n",t);-1==s&&(s=e.length);var o=e.slice(t,"\r"==e.charAt(s-1)?s-1:s),r=o.indexOf("\r");-1!=r?(i.push(o.slice(0,r)),t+=r+1):(i.push(o),t=s+1)}return i}:function(e){return e.split(/\r\n?|\n/)},Ar=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(t){return!1}}:function(e){try{var t=e.ownerDocument.selection.createRange()}catch(i){}return t&&t.parentElement()==e?0!=t.compareEndPoints("StartToEnd",t):!1},Ir=function(){var e=ws("div");return"oncopy"in e?!0:(e.setAttribute("oncopy","return;"),"function"==typeof e.oncopy)}(),jr=null,Lr={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",107:"=",109:"-",127:"Delete",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"};e.keyNames=Lr,function(){for(var e=0;10>e;e++)Lr[e+48]=Lr[e+96]=String(e);for(var e=65;90>=e;e++)Lr[e]=String.fromCharCode(e);for(var e=1;12>=e;e++)Lr[e+111]=Lr[e+63235]="F"+e}();var Or,$r=function(){function e(e){return 247>=e?i.charAt(e):e>=1424&&1524>=e?"R":e>=1536&&1773>=e?n.charAt(e-1536):e>=1774&&2220>=e?"r":e>=8192&&8203>=e?"w":8204==e?"b":"L"}function t(e,t,i){this.level=e,this.from=t,this.to=i}var i="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",n="rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmm",s=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,o=/[stwN]/,r=/[LRr]/,a=/[Lb1n]/,l=/[1n]/,c="L";return function(i){if(!s.test(i))return!1;for(var n,d=i.length,h=[],u=0;d>u;++u)h.push(n=e(i.charCodeAt(u)));for(var u=0,p=c;d>u;++u){var n=h[u];"m"==n?h[u]=p:p=n}for(var u=0,f=c;d>u;++u){var n=h[u];"1"==n&&"r"==f?h[u]="n":r.test(n)&&(f=n,"r"==n&&(h[u]="R"))}for(var u=1,p=h[0];d-1>u;++u){var n=h[u];"+"==n&&"1"==p&&"1"==h[u+1]?h[u]="1":","==n&&p==h[u+1]&&("1"==p||"n"==p)&&(h[u]=p),p=n}for(var u=0;d>u;++u){var n=h[u];if(","==n)h[u]="N";else if("%"==n){for(var m=u+1;d>m&&"%"==h[m];++m);for(var g=u&&"!"==h[u-1]||d>m&&"1"==h[m]?"1":"N",v=u;m>v;++v)h[v]=g;u=m-1}}for(var u=0,f=c;d>u;++u){var n=h[u];"L"==f&&"1"==n?h[u]="L":r.test(n)&&(f=n)}for(var u=0;d>u;++u)if(o.test(h[u])){for(var m=u+1;d>m&&o.test(h[m]);++m);for(var b="L"==(u?h[u-1]:c),y="L"==(d>m?h[m]:c),g=b||y?"L":"R",v=u;m>v;++v)h[v]=g;u=m-1}for(var w,_=[],u=0;d>u;)if(a.test(h[u])){var k=u;for(++u;d>u&&a.test(h[u]);++u);_.push(new t(0,k,u))}else{var x=u,C=_.length;for(++u;d>u&&"L"!=h[u];++u);for(var v=x;u>v;)if(l.test(h[v])){v>x&&_.splice(C,0,new t(1,x,v));var S=v;for(++v;u>v&&l.test(h[v]);++v);_.splice(C,0,new t(2,S,v)),x=v}else++v;u>x&&_.splice(C,0,new t(1,x,u))}return 1==_[0].level&&(w=i.match(/^\s+/))&&(_[0].from=w[0].length,_.unshift(new t(0,0,w[0].length))),1==hs(_).level&&(w=i.match(/\s+$/))&&(hs(_).to-=w[0].length,_.push(new t(0,d-w[0].length,d))),_[0].level!=hs(_).level&&_.push(new t(_[0].level,d,d)),_}}();return e.version="4.7.0",e}),i("codemirror",["codemirror/lib/codemirror"],function(e){return e}),function(e){"object"==typeof exports&&"object"==typeof module?e(t("../../lib/codemirror")):"function"==typeof i&&i.amd?i("codemirror/mode/xml/xml",["../../lib/codemirror"],e):e(CodeMirror)}(function(e){e.defineMode("xml",function(t,i){function n(e,t){function i(i){return t.tokenize=i,i(e,t)}var n=e.next();if("<"==n)return e.eat("!")?e.eat("[")?e.match("CDATA[")?i(r("atom","]]>")):null:e.match("--")?i(r("comment","-->")):e.match("DOCTYPE",!0,!0)?(e.eatWhile(/[\w\._\-]/),i(a(1))):null:e.eat("?")?(e.eatWhile(/[\w\._\-]/),t.tokenize=r("meta","?>"),"meta"):(x=e.eat("/")?"closeTag":"openTag",t.tokenize=s,"tag bracket");if("&"==n){var o;return o=e.eat("#")?e.eat("x")?e.eatWhile(/[a-fA-F\d]/)&&e.eat(";"):e.eatWhile(/[\d]/)&&e.eat(";"):e.eatWhile(/[\w\.\-:]/)&&e.eat(";"),o?"atom":"error"}return e.eatWhile(/[^&<]/),null}function s(e,t){var i=e.next();if(">"==i||"/"==i&&e.eat(">"))return t.tokenize=n,x=">"==i?"endTag":"selfcloseTag","tag bracket";if("="==i)return x="equals",null;if("<"==i){t.tokenize=n,t.state=h,t.tagName=t.tagStart=null;var s=t.tokenize(e,t);return s?s+" tag error":"tag error"}return/[\'\"]/.test(i)?(t.tokenize=o(i),t.stringStartCol=e.column(),t.tokenize(e,t)):(e.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),"word")}function o(e){var t=function(t,i){for(;!t.eol();)if(t.next()==e){i.tokenize=s;break}return"string"};return t.isInAttribute=!0,t}function r(e,t){return function(i,s){for(;!i.eol();){if(i.match(t)){s.tokenize=n;break}i.next()}return e}}function a(e){return function(t,i){for(var s;null!=(s=t.next());){if("<"==s)return i.tokenize=a(e+1),i.tokenize(t,i);if(">"==s){if(1==e){i.tokenize=n;break}return i.tokenize=a(e-1),i.tokenize(t,i)}}return"meta"}}function l(e,t,i){this.prev=e.context,this.tagName=t,this.indent=e.indented,this.startOfLine=i,(S.doNotIndent.hasOwnProperty(t)||e.context&&e.context.noIndent)&&(this.noIndent=!0)}function c(e){e.context&&(e.context=e.context.prev)}function d(e,t){for(var i;;){if(!e.context)return;if(i=e.context.tagName,!S.contextGrabbers.hasOwnProperty(i)||!S.contextGrabbers[i].hasOwnProperty(t))return;c(e)}}function h(e,t,i){return"openTag"==e?(i.tagStart=t.column(),u):"closeTag"==e?p:h}function u(e,t,i){return"word"==e?(i.tagName=t.current(),C="tag",g):(C="error",u)}function p(e,t,i){if("word"==e){var n=t.current();return i.context&&i.context.tagName!=n&&S.implicitlyClosed.hasOwnProperty(i.context.tagName)&&c(i),i.context&&i.context.tagName==n?(C="tag",f):(C="tag error",m)}return C="error",m}function f(e,t,i){return"endTag"!=e?(C="error",f):(c(i),h)}function m(e,t,i){return C="error",f(e,t,i)}function g(e,t,i){if("word"==e)return C="attribute",v;if("endTag"==e||"selfcloseTag"==e){var n=i.tagName,s=i.tagStart;return i.tagName=i.tagStart=null,"selfcloseTag"==e||S.autoSelfClosers.hasOwnProperty(n)?d(i,n):(d(i,n),i.context=new l(i,n,s==i.indented)),h}return C="error",g}function v(e,t,i){return"equals"==e?b:(S.allowMissing||(C="error"),g(e,t,i))}function b(e,t,i){return"string"==e?y:"word"==e&&S.allowUnquoted?(C="string",g):(C="error",g(e,t,i))}function y(e,t,i){return"string"==e?y:g(e,t,i)}var w=t.indentUnit,_=i.multilineTagIndentFactor||1,k=i.multilineTagIndentPastTag;null==k&&(k=!0);var x,C,S=i.htmlMode?{autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0}:{autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,caseFold:!1},T=i.alignCDATA;return{startState:function(){return{tokenize:n,state:h,indented:0,tagName:null,tagStart:null,context:null}},token:function(e,t){if(!t.tagName&&e.sol()&&(t.indented=e.indentation()),e.eatSpace())return null;x=null;var i=t.tokenize(e,t);return(i||x)&&"comment"!=i&&(C=null,t.state=t.state(x||i,e,t),C&&(i="error"==C?i+" error":C)),i},indent:function(t,i,o){var r=t.context;if(t.tokenize.isInAttribute)return t.tagStart==t.indented?t.stringStartCol+1:t.indented+w;if(r&&r.noIndent)return e.Pass;if(t.tokenize!=s&&t.tokenize!=n)return o?o.match(/^(\s*)/)[0].length:0;if(t.tagName)return k?t.tagStart+t.tagName.length+2:t.tagStart+w*_;if(T&&/<!\[CDATA\[/.test(i))return 0;var a=i&&/^<(\/)?([\w_:\.-]*)/.exec(i);if(a&&a[1])for(;r;){if(r.tagName==a[2]){r=r.prev;break}if(!S.implicitlyClosed.hasOwnProperty(r.tagName))break;r=r.prev}else if(a)for(;r;){var l=S.contextGrabbers[r.tagName];if(!l||!l.hasOwnProperty(a[2]))break;r=r.prev}for(;r&&!r.startOfLine;)r=r.prev;return r?r.indent+w:0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"<!--",blockCommentEnd:"-->",configuration:i.htmlMode?"html":"xml",helperType:i.htmlMode?"html":"xml"}}),e.defineMIME("text/xml","xml"),e.defineMIME("application/xml","xml"),e.mimeModes.hasOwnProperty("text/html")||e.defineMIME("text/html",{name:"xml",htmlMode:!0})}),function(e){"object"==typeof exports&&"object"==typeof module?e(t("../../lib/codemirror")):"function"==typeof i&&i.amd?i("codemirror/mode/javascript/javascript",["../../lib/codemirror"],e):e(CodeMirror)}(function(e){e.defineMode("javascript",function(t,i){function n(e){for(var t,i=!1,n=!1;null!=(t=e.next());){if(!i){if("/"==t&&!n)return;"["==t?n=!0:n&&"]"==t&&(n=!1)}i=!i&&"\\"==t}}function s(e,t,i){return fe=e,me=i,t}function o(e,t){var i=e.next();if('"'==i||"'"==i)return t.tokenize=r(i),t.tokenize(e,t);if("."==i&&e.match(/^\d+(?:[eE][+\-]?\d+)?/))return s("number","number");if("."==i&&e.match(".."))return s("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(i))return s(i);if("="==i&&e.eat(">"))return s("=>","operator");if("0"==i&&e.eat(/x/i))return e.eatWhile(/[\da-f]/i),s("number","number");if(/\d/.test(i))return e.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/),s("number","number");if("/"==i)return e.eat("*")?(t.tokenize=a,a(e,t)):e.eat("/")?(e.skipToEnd(),s("comment","comment")):"operator"==t.lastType||"keyword c"==t.lastType||"sof"==t.lastType||/^[\[{}\(,;:]$/.test(t.lastType)?(n(e),e.eatWhile(/[gimy]/),s("regexp","string-2")):(e.eatWhile(xe),s("operator","operator",e.current()));if("`"==i)return t.tokenize=l,l(e,t);if("#"==i)return e.skipToEnd(),s("error","error");if(xe.test(i))return e.eatWhile(xe),s("operator","operator",e.current());if(_e.test(i)){e.eatWhile(_e);var o=e.current(),c=ke.propertyIsEnumerable(o)&&ke[o];return c&&"."!=t.lastType?s(c.type,c.style,o):s("variable","variable",o)}}function r(e){return function(t,i){var n,r=!1;if(be&&"@"==t.peek()&&t.match(Ce))return i.tokenize=o,s("jsonld-keyword","meta");for(;null!=(n=t.next())&&(n!=e||r);)r=!r&&"\\"==n;return r||(i.tokenize=o),s("string","string")}}function a(e,t){for(var i,n=!1;i=e.next();){if("/"==i&&n){t.tokenize=o;break}n="*"==i}return s("comment","comment")}function l(e,t){for(var i,n=!1;null!=(i=e.next());){if(!n&&("`"==i||"$"==i&&e.eat("{"))){t.tokenize=o;break}n=!n&&"\\"==i}return s("quasi","string-2",e.current())}function c(e,t){t.fatArrowAt&&(t.fatArrowAt=null);var i=e.string.indexOf("=>",e.start);if(!(0>i)){for(var n=0,s=!1,o=i-1;o>=0;--o){var r=e.string.charAt(o),a=Se.indexOf(r);if(a>=0&&3>a){if(!n){++o;break}if(0==--n)break}else if(a>=3&&6>a)++n;else if(_e.test(r))s=!0;else if(s&&!n){++o;break}}s&&!n&&(t.fatArrowAt=o)}}function d(e,t,i,n,s,o){this.indented=e,this.column=t,this.type=i,this.prev=s,this.info=o,null!=n&&(this.align=n)}function h(e,t){for(var i=e.localVars;i;i=i.next)if(i.name==t)return!0;for(var n=e.context;n;n=n.prev)for(var i=n.vars;i;i=i.next)if(i.name==t)return!0}function u(e,t,i,n,s){var o=e.cc;for(De.state=e,De.stream=s,De.marked=null,De.cc=o,De.style=t,e.lexical.hasOwnProperty("align")||(e.lexical.align=!0);;){var r=o.length?o.pop():ye?k:_;if(r(i,n)){for(;o.length&&o[o.length-1].lex;)o.pop()();return De.marked?De.marked:"variable"==i&&h(e,n)?"variable-2":t}}}function p(){for(var e=arguments.length-1;e>=0;e--)De.cc.push(arguments[e])}function f(){return p.apply(null,arguments),!0}function m(e){function t(t){for(var i=t;i;i=i.next)if(i.name==e)return!0;return!1}var n=De.state;if(n.context){if(De.marked="def",t(n.localVars))return;n.localVars={name:e,next:n.localVars}}else{if(t(n.globalVars))return;i.globalVars&&(n.globalVars={name:e,next:n.globalVars})}}function g(){De.state.context={prev:De.state.context,vars:De.state.localVars},De.state.localVars=Pe}function v(){De.state.localVars=De.state.context.vars,De.state.context=De.state.context.prev}function b(e,t){var i=function(){var i=De.state,n=i.indented;if("stat"==i.lexical.type)n=i.lexical.indented;else for(var s=i.lexical;s&&")"==s.type&&s.align;s=s.prev)n=s.indented;i.lexical=new d(n,De.stream.column(),e,null,i.lexical,t)};return i.lex=!0,i}function y(){var e=De.state;e.lexical.prev&&(")"==e.lexical.type&&(e.indented=e.lexical.indented),e.lexical=e.lexical.prev)}function w(e){function t(i){return i==e?f():";"==e?p():f(t)}return t}function _(e,t){return"var"==e?f(b("vardef",t.length),W,w(";"),y):"keyword a"==e?f(b("form"),k,_,y):"keyword b"==e?f(b("form"),_,y):"{"==e?f(b("}"),z,y):";"==e?f():"if"==e?("else"==De.state.lexical.info&&De.state.cc[De.state.cc.length-1]==y&&De.state.cc.pop()(),f(b("form"),k,_,y,G)):"function"==e?f(ee):"for"==e?f(b("form"),K,_,y):"variable"==e?f(b("stat"),j):"switch"==e?f(b("form"),k,b("}","switch"),w("{"),z,y,y):"case"==e?f(k,w(":")):"default"==e?f(w(":")):"catch"==e?f(b("form"),g,w("("),te,w(")"),_,y,v):"module"==e?f(b("form"),g,re,v,y):"class"==e?f(b("form"),ie,y):"export"==e?f(b("form"),ae,y):"import"==e?f(b("form"),le,y):p(b("stat"),k,w(";"),y)}function k(e){return C(e,!1)}function x(e){return C(e,!0)}function C(e,t){if(De.state.fatArrowAt==De.stream.start){var i=t?I:A;if("("==e)return f(g,b(")"),F(q,")"),y,w("=>"),i,v);if("variable"==e)return p(g,q,w("=>"),i,v)}var n=t?P:D;return Te.hasOwnProperty(e)?f(n):"function"==e?f(ee,n):"keyword c"==e?f(t?T:S):"("==e?f(b(")"),S,pe,w(")"),y,n):"operator"==e||"spread"==e?f(t?x:k):"["==e?f(b("]"),he,y,n):"{"==e?H(O,"}",null,n):"quasi"==e?p(E,n):f()}function S(e){return e.match(/[;\}\)\],]/)?p():p(k)}function T(e){return e.match(/[;\}\)\],]/)?p():p(x)}function D(e,t){return","==e?f(k):P(e,t,!1)}function P(e,t,i){var n=0==i?D:P,s=0==i?k:x;if("=>"==e)return f(g,i?I:A,v);if("operator"==e)return/\+\+|--/.test(t)?f(n):"?"==t?f(k,w(":"),s):f(s);if("quasi"==e)return p(E,n);if(";"!=e)return"("==e?H(x,")","call",n):"."==e?f(L,n):"["==e?f(b("]"),S,w("]"),y,n):void 0}function E(e,t){return"quasi"!=e?p():"${"!=t.slice(t.length-2)?f(E):f(k,M)}function M(e){return"}"==e?(De.marked="string-2",De.state.tokenize=l,f(E)):void 0}function A(e){return c(De.stream,De.state),p("{"==e?_:k)}function I(e){return c(De.stream,De.state),p("{"==e?_:x)}function j(e){return":"==e?f(y,_):p(D,w(";"),y)}function L(e){return"variable"==e?(De.marked="property",f()):void 0}function O(e,t){return"variable"==e||"keyword"==De.style?(De.marked="property",f("get"==t||"set"==t?$:N)):"number"==e||"string"==e?(De.marked=be?"property":De.style+" property",f(N)):"jsonld-keyword"==e?f(N):"["==e?f(k,w("]"),N):void 0}function $(e){return"variable"!=e?p(N):(De.marked="property",f(ee))}function N(e){return":"==e?f(x):"("==e?p(ee):void 0}function F(e,t){function i(n){if(","==n){var s=De.state.lexical;return"call"==s.info&&(s.pos=(s.pos||0)+1),f(e,i)}return n==t?f():f(w(t))}return function(n){return n==t?f():p(e,i)}}function H(e,t,i){for(var n=3;n<arguments.length;n++)De.cc.push(arguments[n]);return f(b(t,i),F(e,t),y)}function z(e){return"}"==e?f():p(_,z)}function R(e){return we&&":"==e?f(B):void 0}function B(e){return"variable"==e?(De.marked="variable-3",f()):void 0}function W(){return p(q,R,V,Y)}function q(e,t){return"variable"==e?(m(t),f()):"["==e?H(q,"]"):"{"==e?H(U,"}"):void 0}function U(e,t){return"variable"!=e||De.stream.match(/^\s*:/,!1)?("variable"==e&&(De.marked="property"),f(w(":"),q,V)):(m(t),f(V))}function V(e,t){return"="==t?f(x):void 0}function Y(e){return","==e?f(W):void 0;
}function G(e,t){return"keyword b"==e&&"else"==t?f(b("form","else"),_,y):void 0}function K(e){return"("==e?f(b(")"),X,w(")"),y):void 0}function X(e){return"var"==e?f(W,w(";"),J):";"==e?f(J):"variable"==e?f(Q):p(k,w(";"),J)}function Q(e,t){return"in"==t||"of"==t?(De.marked="keyword",f(k)):f(D,J)}function J(e,t){return";"==e?f(Z):"in"==t||"of"==t?(De.marked="keyword",f(k)):p(k,w(";"),Z)}function Z(e){")"!=e&&f(k)}function ee(e,t){return"*"==t?(De.marked="keyword",f(ee)):"variable"==e?(m(t),f(ee)):"("==e?f(g,b(")"),F(te,")"),y,_,v):void 0}function te(e){return"spread"==e?f(te):p(q,R)}function ie(e,t){return"variable"==e?(m(t),f(ne)):void 0}function ne(e,t){return"extends"==t?f(k,ne):"{"==e?f(b("}"),se,y):void 0}function se(e,t){return"variable"==e||"keyword"==De.style?(De.marked="property","get"==t||"set"==t?f(oe,ee,se):f(ee,se)):"*"==t?(De.marked="keyword",f(se)):";"==e?f(se):"}"==e?f():void 0}function oe(e){return"variable"!=e?p():(De.marked="property",f())}function re(e,t){return"string"==e?f(_):"variable"==e?(m(t),f(de)):void 0}function ae(e,t){return"*"==t?(De.marked="keyword",f(de,w(";"))):"default"==t?(De.marked="keyword",f(k,w(";"))):p(_)}function le(e){return"string"==e?f():p(ce,de)}function ce(e,t){return"{"==e?H(ce,"}"):("variable"==e&&m(t),f())}function de(e,t){return"from"==t?(De.marked="keyword",f(k)):void 0}function he(e){return"]"==e?f():p(x,ue)}function ue(e){return"for"==e?p(pe,w("]")):","==e?f(F(T,"]")):p(F(x,"]"))}function pe(e){return"for"==e?f(K,pe):"if"==e?f(k,pe):void 0}var fe,me,ge=t.indentUnit,ve=i.statementIndent,be=i.jsonld,ye=i.json||be,we=i.typescript,_e=i.wordCharacters||/[\w$\xa1-\uffff]/,ke=function(){function e(e){return{type:e,style:"keyword"}}var t=e("keyword a"),i=e("keyword b"),n=e("keyword c"),s=e("operator"),o={type:"atom",style:"atom"},r={"if":e("if"),"while":t,"with":t,"else":i,"do":i,"try":i,"finally":i,"return":n,"break":n,"continue":n,"new":n,"delete":n,"throw":n,"debugger":n,"var":e("var"),"const":e("var"),let:e("var"),"function":e("function"),"catch":e("catch"),"for":e("for"),"switch":e("switch"),"case":e("case"),"default":e("default"),"in":s,"typeof":s,"instanceof":s,"true":o,"false":o,"null":o,undefined:o,NaN:o,Infinity:o,"this":e("this"),module:e("module"),"class":e("class"),"super":e("atom"),"yield":n,"export":e("export"),"import":e("import"),"extends":n};if(we){var a={type:"variable",style:"variable-3"},l={"interface":e("interface"),"extends":e("extends"),constructor:e("constructor"),"public":e("public"),"private":e("private"),"protected":e("protected"),"static":e("static"),string:a,number:a,bool:a,any:a};for(var c in l)r[c]=l[c]}return r}(),xe=/[+\-*&%=<>!?|~^]/,Ce=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/,Se="([{}])",Te={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,"this":!0,"jsonld-keyword":!0},De={state:null,column:null,marked:null,cc:null},Pe={name:"this",next:{name:"arguments"}};return y.lex=!0,{startState:function(e){var t={tokenize:o,lastType:"sof",cc:[],lexical:new d((e||0)-ge,0,"block",!1),localVars:i.localVars,context:i.localVars&&{vars:i.localVars},indented:0};return i.globalVars&&"object"==typeof i.globalVars&&(t.globalVars=i.globalVars),t},token:function(e,t){if(e.sol()&&(t.lexical.hasOwnProperty("align")||(t.lexical.align=!1),t.indented=e.indentation(),c(e,t)),t.tokenize!=a&&e.eatSpace())return null;var i=t.tokenize(e,t);return"comment"==fe?i:(t.lastType="operator"!=fe||"++"!=me&&"--"!=me?fe:"incdec",u(t,i,fe,me,e))},indent:function(t,n){if(t.tokenize==a)return e.Pass;if(t.tokenize!=o)return 0;var s=n&&n.charAt(0),r=t.lexical;if(!/^\s*else\b/.test(n))for(var l=t.cc.length-1;l>=0;--l){var c=t.cc[l];if(c==y)r=r.prev;else if(c!=G)break}"stat"==r.type&&"}"==s&&(r=r.prev),ve&&")"==r.type&&"stat"==r.prev.type&&(r=r.prev);var d=r.type,h=s==d;return"vardef"==d?r.indented+("operator"==t.lastType||","==t.lastType?r.info+1:0):"form"==d&&"{"==s?r.indented:"form"==d?r.indented+ge:"stat"==d?r.indented+("operator"==t.lastType||","==t.lastType?ve||ge:0):"switch"!=r.info||h||0==i.doubleIndentSwitch?r.align?r.column+(h?0:1):r.indented+(h?0:ge):r.indented+(/^(?:case|default)\b/.test(n)?ge:2*ge)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:ye?null:"/*",blockCommentEnd:ye?null:"*/",lineComment:ye?null:"//",fold:"brace",helperType:ye?"json":"javascript",jsonldMode:be,jsonMode:ye}}),e.registerHelper("wordChars","javascript",/[\w$]/),e.defineMIME("text/javascript","javascript"),e.defineMIME("text/ecmascript","javascript"),e.defineMIME("application/javascript","javascript"),e.defineMIME("application/x-javascript","javascript"),e.defineMIME("application/ecmascript","javascript"),e.defineMIME("application/json",{name:"javascript",json:!0}),e.defineMIME("application/x-json",{name:"javascript",json:!0}),e.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),e.defineMIME("text/typescript",{name:"javascript",typescript:!0}),e.defineMIME("application/typescript",{name:"javascript",typescript:!0})}),function(e){"object"==typeof exports&&"object"==typeof module?e(t("../../lib/codemirror")):"function"==typeof i&&i.amd?i("codemirror/mode/css/css",["../../lib/codemirror"],e):e(CodeMirror)}(function(e){function t(e){for(var t={},i=0;i<e.length;++i)t[e[i]]=!0;return t}function i(e,t){for(var i,n=!1;null!=(i=e.next());){if(n&&"/"==i){t.tokenize=null;break}n="*"==i}return["comment","comment"]}function n(e,t){return e.skipTo("-->")?(e.match("-->"),t.tokenize=null):e.skipToEnd(),["comment","comment"]}e.defineMode("css",function(t,i){function n(e,t){return p=t,e}function s(e,t){var i=e.next();if(g[i]){var s=g[i](e,t);if(s!==!1)return s}return"@"==i?(e.eatWhile(/[\w\\\-]/),n("def",e.current())):"="==i||("~"==i||"|"==i)&&e.eat("=")?n(null,"compare"):'"'==i||"'"==i?(t.tokenize=o(i),t.tokenize(e,t)):"#"==i?(e.eatWhile(/[\w\\\-]/),n("atom","hash")):"!"==i?(e.match(/^\s*\w*/),n("keyword","important")):/\d/.test(i)||"."==i&&e.eat(/\d/)?(e.eatWhile(/[\w.%]/),n("number","unit")):"-"!==i?/[,+>*\/]/.test(i)?n(null,"select-op"):"."==i&&e.match(/^-?[_a-z][_a-z0-9-]*/i)?n("qualifier","qualifier"):/[:;{}\[\]\(\)]/.test(i)?n(null,i):"u"==i&&e.match("rl(")?(e.backUp(1),t.tokenize=r,n("property","word")):/[\w\\\-]/.test(i)?(e.eatWhile(/[\w\\\-]/),n("property","word")):n(null,null):/[\d.]/.test(e.peek())?(e.eatWhile(/[\w.%]/),n("number","unit")):e.match(/^\w+-/)?n("meta","meta"):void 0}function o(e){return function(t,i){for(var s,o=!1;null!=(s=t.next());){if(s==e&&!o){")"==e&&t.backUp(1);break}o=!o&&"\\"==s}return(s==e||!o&&")"!=e)&&(i.tokenize=null),n("string","string")}}function r(e,t){return e.next(),e.match(/\s*[\"\')]/,!1)?t.tokenize=null:t.tokenize=o(")"),n(null,"(")}function a(e,t,i){this.type=e,this.indent=t,this.prev=i}function l(e,t,i){return e.context=new a(i,t.indentation()+m,e.context),i}function c(e){return e.context=e.context.prev,e.context.type}function d(e,t,i){return S[i.context.type](e,t,i)}function h(e,t,i,n){for(var s=n||1;s>0;s--)i.context=i.context.prev;return d(e,t,i)}function u(e){var t=e.current().toLowerCase();f=k.hasOwnProperty(t)?"atom":_.hasOwnProperty(t)?"keyword":"variable"}i.propertyKeywords||(i=e.resolveMode("text/css"));var p,f,m=t.indentUnit,g=i.tokenHooks,v=i.mediaTypes||{},b=i.mediaFeatures||{},y=i.propertyKeywords||{},w=i.nonStandardPropertyKeywords||{},_=i.colorKeywords||{},k=i.valueKeywords||{},x=i.fontProperties||{},C=i.allowNested,S={};return S.top=function(e,t,i){if("{"==e)return l(i,t,"block");if("}"==e&&i.context.prev)return c(i);if("@media"==e)return l(i,t,"media");if("@font-face"==e)return"font_face_before";if(/^@(-(moz|ms|o|webkit)-)?keyframes$/.test(e))return"keyframes";if(e&&"@"==e.charAt(0))return l(i,t,"at");if("hash"==e)f="builtin";else if("word"==e)f="tag";else{if("variable-definition"==e)return"maybeprop";if("interpolation"==e)return l(i,t,"interpolation");if(":"==e)return"pseudo";if(C&&"("==e)return l(i,t,"parens")}return i.context.type},S.block=function(e,t,i){if("word"==e){var n=t.current().toLowerCase();return y.hasOwnProperty(n)?(f="property","maybeprop"):w.hasOwnProperty(n)?(f="string-2","maybeprop"):C?(f=t.match(/^\s*:/,!1)?"property":"tag","block"):(f+=" error","maybeprop")}return"meta"==e?"block":C||"hash"!=e&&"qualifier"!=e?S.top(e,t,i):(f="error","block")},S.maybeprop=function(e,t,i){return":"==e?l(i,t,"prop"):d(e,t,i)},S.prop=function(e,t,i){if(";"==e)return c(i);if("{"==e&&C)return l(i,t,"propBlock");if("}"==e||"{"==e)return h(e,t,i);if("("==e)return l(i,t,"parens");if("hash"!=e||/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(t.current())){if("word"==e)u(t);else if("interpolation"==e)return l(i,t,"interpolation")}else f+=" error";return"prop"},S.propBlock=function(e,t,i){return"}"==e?c(i):"word"==e?(f="property","maybeprop"):i.context.type},S.parens=function(e,t,i){return"{"==e||"}"==e?h(e,t,i):")"==e?c(i):"("==e?l(i,t,"parens"):("word"==e&&u(t),"parens")},S.pseudo=function(e,t,i){return"word"==e?(f="variable-3",i.context.type):d(e,t,i)},S.media=function(e,t,i){if("("==e)return l(i,t,"media_parens");if("}"==e)return h(e,t,i);if("{"==e)return c(i)&&l(i,t,C?"block":"top");if("word"==e){var n=t.current().toLowerCase();f="only"==n||"not"==n||"and"==n?"keyword":v.hasOwnProperty(n)?"attribute":b.hasOwnProperty(n)?"property":"error"}return i.context.type},S.media_parens=function(e,t,i){return")"==e?c(i):"{"==e||"}"==e?h(e,t,i,2):S.media(e,t,i)},S.font_face_before=function(e,t,i){return"{"==e?l(i,t,"font_face"):d(e,t,i)},S.font_face=function(e,t,i){return"}"==e?c(i):"word"==e?(f=x.hasOwnProperty(t.current().toLowerCase())?"property":"error","maybeprop"):"font_face"},S.keyframes=function(e,t,i){return"word"==e?(f="variable","keyframes"):"{"==e?l(i,t,"top"):d(e,t,i)},S.at=function(e,t,i){return";"==e?c(i):"{"==e||"}"==e?h(e,t,i):("word"==e?f="tag":"hash"==e&&(f="builtin"),"at")},S.interpolation=function(e,t,i){return"}"==e?c(i):"{"==e||";"==e?h(e,t,i):("variable"!=e&&(f="error"),"interpolation")},{startState:function(e){return{tokenize:null,state:"top",context:new a("top",e||0,null)}},token:function(e,t){if(!t.tokenize&&e.eatSpace())return null;var i=(t.tokenize||s)(e,t);return i&&"object"==typeof i&&(p=i[1],i=i[0]),f=i,t.state=S[t.state](p,e,t),f},indent:function(e,t){var i=e.context,n=t&&t.charAt(0),s=i.indent;return"prop"==i.type&&("}"==n||")"==n)&&(i=i.prev),i.prev&&("}"==n&&("block"==i.type||"top"==i.type||"interpolation"==i.type||"font_face"==i.type)||")"==n&&("parens"==i.type||"media_parens"==i.type)||"{"==n&&("at"==i.type||"media"==i.type))&&(s=i.indent-m,i=i.prev),s},electricChars:"}",blockCommentStart:"/*",blockCommentEnd:"*/",fold:"brace"}});var s=["all","aural","braille","handheld","print","projection","screen","tty","tv","embossed"],o=t(s),r=["width","min-width","max-width","height","min-height","max-height","device-width","min-device-width","max-device-width","device-height","min-device-height","max-device-height","aspect-ratio","min-aspect-ratio","max-aspect-ratio","device-aspect-ratio","min-device-aspect-ratio","max-device-aspect-ratio","color","min-color","max-color","color-index","min-color-index","max-color-index","monochrome","min-monochrome","max-monochrome","resolution","min-resolution","max-resolution","scan","grid"],a=t(r),l=["align-content","align-items","align-self","alignment-adjust","alignment-baseline","anchor-point","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","appearance","azimuth","backface-visibility","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","baseline-shift","binding","bleed","bookmark-label","bookmark-level","bookmark-state","bookmark-target","border","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","clear","clip","color","color-profile","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","content","counter-increment","counter-reset","crop","cue","cue-after","cue-before","cursor","direction","display","dominant-baseline","drop-initial-after-adjust","drop-initial-after-align","drop-initial-before-adjust","drop-initial-before-align","drop-initial-size","drop-initial-value","elevation","empty-cells","fit","fit-position","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","float-offset","flow-from","flow-into","font","font-feature-settings","font-family","font-kerning","font-language-override","font-size","font-size-adjust","font-stretch","font-style","font-synthesis","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-weight","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-position","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","inline-box-align","justify-content","left","letter-spacing","line-break","line-height","line-stacking","line-stacking-ruby","line-stacking-shift","line-stacking-strategy","list-style","list-style-image","list-style-position","list-style-type","margin","margin-bottom","margin-left","margin-right","margin-top","marker-offset","marks","marquee-direction","marquee-loop","marquee-play-count","marquee-speed","marquee-style","max-height","max-width","min-height","min-width","move-to","nav-down","nav-index","nav-left","nav-right","nav-up","object-fit","object-position","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-style","overflow-wrap","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","page-policy","pause","pause-after","pause-before","perspective","perspective-origin","pitch","pitch-range","play-during","position","presentation-level","punctuation-trim","quotes","region-break-after","region-break-before","region-break-inside","region-fragment","rendering-intent","resize","rest","rest-after","rest-before","richness","right","rotation","rotation-point","ruby-align","ruby-overhang","ruby-position","ruby-span","shape-image-threshold","shape-inside","shape-margin","shape-outside","size","speak","speak-as","speak-header","speak-numeral","speak-punctuation","speech-rate","stress","string-set","tab-size","table-layout","target","target-name","target-new","target-position","text-align","text-align-last","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-height","text-indent","text-justify","text-outline","text-overflow","text-shadow","text-size-adjust","text-space-collapse","text-transform","text-underline-position","text-wrap","top","transform","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","unicode-bidi","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","volume","white-space","widows","width","word-break","word-spacing","word-wrap","z-index","clip-path","clip-rule","mask","enable-background","filter","flood-color","flood-opacity","lighting-color","stop-color","stop-opacity","pointer-events","color-interpolation","color-interpolation-filters","color-rendering","fill","fill-opacity","fill-rule","image-rendering","marker","marker-end","marker-mid","marker-start","shape-rendering","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-rendering","baseline-shift","dominant-baseline","glyph-orientation-horizontal","glyph-orientation-vertical","text-anchor","writing-mode"],c=t(l),d=["scrollbar-arrow-color","scrollbar-base-color","scrollbar-dark-shadow-color","scrollbar-face-color","scrollbar-highlight-color","scrollbar-shadow-color","scrollbar-3d-light-color","scrollbar-track-color","shape-inside","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","zoom"],h=t(d),u=["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"],p=t(u),f=["above","absolute","activeborder","activecaption","afar","after-white-space","ahead","alias","all","all-scroll","alternate","always","amharic","amharic-abegede","antialiased","appworkspace","arabic-indic","armenian","asterisks","auto","avoid","avoid-column","avoid-page","avoid-region","background","backwards","baseline","below","bidi-override","binary","bengali","blink","block","block-axis","bold","bolder","border","border-box","both","bottom","break","break-all","break-word","button","button-bevel","buttonface","buttonhighlight","buttonshadow","buttontext","cambodian","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-earthly-branch","cjk-heavenly-stem","cjk-ideographic","clear","clip","close-quote","col-resize","collapse","column","compact","condensed","contain","content","content-box","context-menu","continuous","copy","cover","crop","cross","crosshair","currentcolor","cursive","dashed","decimal","decimal-leading-zero","default","default-button","destination-atop","destination-in","destination-out","destination-over","devanagari","disc","discard","document","dot-dash","dot-dot-dash","dotted","double","down","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipse","ellipsis","embed","end","ethiopic","ethiopic-abegede","ethiopic-abegede-am-et","ethiopic-abegede-gez","ethiopic-abegede-ti-er","ethiopic-abegede-ti-et","ethiopic-halehame-aa-er","ethiopic-halehame-aa-et","ethiopic-halehame-am-et","ethiopic-halehame-gez","ethiopic-halehame-om-et","ethiopic-halehame-sid-et","ethiopic-halehame-so-et","ethiopic-halehame-ti-er","ethiopic-halehame-ti-et","ethiopic-halehame-tig","ew-resize","expanded","extra-condensed","extra-expanded","fantasy","fast","fill","fixed","flat","footnotes","forwards","from","geometricPrecision","georgian","graytext","groove","gujarati","gurmukhi","hand","hangul","hangul-consonant","hebrew","help","hidden","hide","higher","highlight","highlighttext","hiragana","hiragana-iroha","horizontal","hsl","hsla","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-table","inset","inside","intrinsic","invert","italic","justify","kannada","katakana","katakana-iroha","keep-all","khmer","landscape","lao","large","larger","left","level","lighter","line-through","linear","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-alpha","lower-armenian","lower-greek","lower-hexadecimal","lower-latin","lower-norwegian","lower-roman","lowercase","ltr","malayalam","match","media-controls-background","media-current-time-display","media-fullscreen-button","media-mute-button","media-play-button","media-return-to-realtime-button","media-rewind-button","media-seek-back-button","media-seek-forward-button","media-slider","media-sliderthumb","media-time-remaining-display","media-volume-slider","media-volume-slider-container","media-volume-sliderthumb","medium","menu","menulist","menulist-button","menulist-text","menulist-textfield","menutext","message-box","middle","min-intrinsic","mix","mongolian","monospace","move","multiple","myanmar","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","nw-resize","nwse-resize","oblique","octal","open-quote","optimizeLegibility","optimizeSpeed","oriya","oromo","outset","outside","outside-shape","overlay","overline","padding","padding-box","painted","page","paused","persian","plus-darker","plus-lighter","pointer","polygon","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radio","read-only","read-write","read-write-plaintext-only","rectangle","region","relative","repeat","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","round","row-resize","rtl","run-in","running","s-resize","sans-serif","scroll","scrollbar","se-resize","searchfield","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","semi-condensed","semi-expanded","separate","serif","show","sidama","single","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","solid","somali","source-atop","source-in","source-out","source-over","space","square","square-button","start","static","status-bar","stretch","stroke","sub","subpixel-antialiased","super","sw-resize","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","telugu","text","text-bottom","text-top","textarea","textfield","thai","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","tibetan","tigre","tigrinya-er","tigrinya-er-abegede","tigrinya-et","tigrinya-et-abegede","to","top","transparent","ultra-condensed","ultra-expanded","underline","up","upper-alpha","upper-armenian","upper-greek","upper-hexadecimal","upper-latin","upper-norwegian","upper-roman","uppercase","urdu","url","vertical","vertical-text","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","wider","window","windowframe","windowtext","x-large","x-small","xor","xx-large","xx-small"],m=t(f),g=["font-family","src","unicode-range","font-variant","font-feature-settings","font-stretch","font-weight","font-style"],v=t(g),b=s.concat(r).concat(l).concat(d).concat(u).concat(f);e.registerHelper("hintWords","css",b),e.defineMIME("text/css",{mediaTypes:o,mediaFeatures:a,propertyKeywords:c,nonStandardPropertyKeywords:h,colorKeywords:p,valueKeywords:m,fontProperties:v,tokenHooks:{"<":function(e,t){return e.match("!--")?(t.tokenize=n,n(e,t)):!1},"/":function(e,t){return e.eat("*")?(t.tokenize=i,i(e,t)):!1}},name:"css"}),e.defineMIME("text/x-scss",{mediaTypes:o,mediaFeatures:a,propertyKeywords:c,nonStandardPropertyKeywords:h,colorKeywords:p,valueKeywords:m,fontProperties:v,allowNested:!0,tokenHooks:{"/":function(e,t){return e.eat("/")?(e.skipToEnd(),["comment","comment"]):e.eat("*")?(t.tokenize=i,i(e,t)):["operator","operator"]},":":function(e){return e.match(/\s*\{/)?[null,"{"]:!1},$:function(e){return e.match(/^[\w-]+/),e.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"]},"#":function(e){return e.eat("{")?[null,"interpolation"]:!1}},name:"css",helperType:"scss"}),e.defineMIME("text/x-less",{mediaTypes:o,mediaFeatures:a,propertyKeywords:c,nonStandardPropertyKeywords:h,colorKeywords:p,valueKeywords:m,fontProperties:v,allowNested:!0,tokenHooks:{"/":function(e,t){return e.eat("/")?(e.skipToEnd(),["comment","comment"]):e.eat("*")?(t.tokenize=i,i(e,t)):["operator","operator"]},"@":function(e){return e.match(/^(charset|document|font-face|import|(-(moz|ms|o|webkit)-)?keyframes|media|namespace|page|supports)\b/,!1)?!1:(e.eatWhile(/[\w\\\-]/),e.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"])},"&":function(){return["atom","atom"]}},name:"css",helperType:"less"})}),function(e){"object"==typeof exports&&"object"==typeof module?e(t("../../lib/codemirror"),t("../xml/xml"),t("../javascript/javascript"),t("../css/css")):"function"==typeof i&&i.amd?i("codemirror/mode/htmlmixed/htmlmixed",["../../lib/codemirror","../xml/xml","../javascript/javascript","../css/css"],e):e(CodeMirror)}(function(e){e.defineMode("htmlmixed",function(t,i){function n(e,t){var i=t.htmlState.tagName;i&&(i=i.toLowerCase());var n=a.token(e,t.htmlState);if("script"==i&&/\btag\b/.test(n)&&">"==e.current()){var s=e.string.slice(Math.max(0,e.pos-100),e.pos).match(/\btype\s*=\s*("[^"]+"|'[^']+'|\S+)[^<]*$/i);s=s?s[1]:"",s&&/[\"\']/.test(s.charAt(0))&&(s=s.slice(1,s.length-1));for(var d=0;d<c.length;++d){var h=c[d];if("string"==typeof h.matches?s==h.matches:h.matches.test(s)){h.mode&&(t.token=o,t.localMode=h.mode,t.localState=h.mode.startState&&h.mode.startState(a.indent(t.htmlState,"")));break}}}else"style"==i&&/\btag\b/.test(n)&&">"==e.current()&&(t.token=r,t.localMode=l,t.localState=l.startState(a.indent(t.htmlState,"")));return n}function s(e,t,i){var n,s=e.current(),o=s.search(t);return o>-1?e.backUp(s.length-o):(n=s.match(/<\/?$/))&&(e.backUp(s.length),e.match(t,!1)||e.match(s)),i}function o(e,t){return e.match(/^<\/\s*script\s*>/i,!1)?(t.token=n,t.localState=t.localMode=null,n(e,t)):s(e,/<\/\s*script\s*>/,t.localMode.token(e,t.localState))}function r(e,t){return e.match(/^<\/\s*style\s*>/i,!1)?(t.token=n,t.localState=t.localMode=null,n(e,t)):s(e,/<\/\s*style\s*>/,l.token(e,t.localState))}var a=e.getMode(t,{name:"xml",htmlMode:!0,multilineTagIndentFactor:i.multilineTagIndentFactor,multilineTagIndentPastTag:i.multilineTagIndentPastTag}),l=e.getMode(t,"css"),c=[],d=i&&i.scriptTypes;if(c.push({matches:/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^$/i,mode:e.getMode(t,"javascript")}),d)for(var h=0;h<d.length;++h){var u=d[h];c.push({matches:u.matches,mode:u.mode&&e.getMode(t,u.mode)})}return c.push({matches:/./,mode:e.getMode(t,"text/plain")}),{startState:function(){var e=a.startState();return{token:n,localMode:null,localState:null,htmlState:e}},copyState:function(t){if(t.localState)var i=e.copyState(t.localMode,t.localState);return{token:t.token,localMode:t.localMode,localState:i,htmlState:e.copyState(a,t.htmlState)}},token:function(e,t){return t.token(e,t)},indent:function(t,i){return!t.localMode||/^\s*<\//.test(i)?a.indent(t.htmlState,i):t.localMode.indent?t.localMode.indent(t.localState,i):e.Pass},innerMode:function(e){return{state:e.localState||e.htmlState,mode:e.localMode||a}}}},"xml","javascript","css"),e.defineMIME("text/html","htmlmixed")}),function(e){"object"==typeof exports&&"object"==typeof module?e(t("../../lib/codemirror")):"function"==typeof i&&i.amd?i("codemirror/addon/fold/xml-fold",["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";function t(e,t){return e.line-t.line||e.ch-t.ch}function i(e,t,i,n){this.line=t,this.ch=i,this.cm=e,this.text=e.getLine(t),this.min=n?n.from:e.firstLine(),this.max=n?n.to-1:e.lastLine()}function n(e,t){var i=e.cm.getTokenTypeAt(u(e.line,t));return i&&/\btag\b/.test(i)}function s(e){return e.line>=e.max?void 0:(e.ch=0,e.text=e.cm.getLine(++e.line),!0)}function o(e){return e.line<=e.min?void 0:(e.text=e.cm.getLine(--e.line),e.ch=e.text.length,!0)}function r(e){for(;;){var t=e.text.indexOf(">",e.ch);if(-1==t){if(s(e))continue;return}{if(n(e,t+1)){var i=e.text.lastIndexOf("/",t),o=i>-1&&!/\S/.test(e.text.slice(i+1,t));return e.ch=t+1,o?"selfClose":"regular"}e.ch=t+1}}}function a(e){for(;;){var t=e.ch?e.text.lastIndexOf("<",e.ch-1):-1;if(-1==t){if(o(e))continue;return}if(n(e,t+1)){m.lastIndex=t,e.ch=t;var i=m.exec(e.text);if(i&&i.index==t)return i}else e.ch=t}}function l(e){for(;;){m.lastIndex=e.ch;var t=m.exec(e.text);if(!t){if(s(e))continue;return}{if(n(e,t.index+1))return e.ch=t.index+t[0].length,t;e.ch=t.index+1}}}function c(e){for(;;){var t=e.ch?e.text.lastIndexOf(">",e.ch-1):-1;if(-1==t){if(o(e))continue;return}{if(n(e,t+1)){var i=e.text.lastIndexOf("/",t),s=i>-1&&!/\S/.test(e.text.slice(i+1,t));return e.ch=t+1,s?"selfClose":"regular"}e.ch=t}}}function d(e,t){for(var i=[];;){var n,s=l(e),o=e.line,a=e.ch-(s?s[0].length:0);if(!s||!(n=r(e)))return;if("selfClose"!=n)if(s[1]){for(var c=i.length-1;c>=0;--c)if(i[c]==s[2]){i.length=c;break}if(0>c&&(!t||t==s[2]))return{tag:s[2],from:u(o,a),to:u(e.line,e.ch)}}else i.push(s[2])}}function h(e,t){for(var i=[];;){var n=c(e);if(!n)return;if("selfClose"!=n){var s=e.line,o=e.ch,r=a(e);if(!r)return;if(r[1])i.push(r[2]);else{for(var l=i.length-1;l>=0;--l)if(i[l]==r[2]){i.length=l;break}if(0>l&&(!t||t==r[2]))return{tag:r[2],from:u(e.line,e.ch),to:u(s,o)}}}else a(e)}}var u=e.Pos,p="A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",f=p+"-:.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040",m=new RegExp("<(/?)(["+p+"]["+f+"]*)","g");e.registerHelper("fold","xml",function(e,t){for(var n=new i(e,t.line,0);;){var s,o=l(n);if(!o||n.line!=t.line||!(s=r(n)))return;if(!o[1]&&"selfClose"!=s){var t=u(n.line,n.ch),a=d(n,o[2]);return a&&{from:t,to:a.from}}}}),e.findMatchingTag=function(e,n,s){var o=new i(e,n.line,n.ch,s);if(-1!=o.text.indexOf(">")||-1!=o.text.indexOf("<")){var l=r(o),c=l&&u(o.line,o.ch),p=l&&a(o);if(l&&p&&!(t(o,n)>0)){var f={from:u(o.line,o.ch),to:c,tag:p[2]};return"selfClose"==l?{open:f,close:null,at:"open"}:p[1]?{open:h(o,p[2]),close:f,at:"close"}:(o=new i(e,c.line,c.ch,s),{open:f,close:d(o,p[2]),at:"open"})}}},e.findEnclosingTag=function(e,t,n){for(var s=new i(e,t.line,t.ch,n);;){var o=h(s);if(!o)break;var r=new i(e,t.line,t.ch,n),a=d(r,o.tag);if(a)return{open:o,close:a}}},e.scanForClosingTag=function(e,t,n,s){var o=new i(e,t.line,t.ch,s?{from:0,to:s}:null);return d(o,n)}}),function(e){"object"==typeof exports&&"object"==typeof module?e(t("../../lib/codemirror"),t("../fold/xml-fold")):"function"==typeof i&&i.amd?i("codemirror/addon/edit/closetag",["../../lib/codemirror","../fold/xml-fold"],e):e(CodeMirror)}(function(e){function t(t){if(t.getOption("disableInput"))return e.Pass;for(var i=t.listSelections(),a=[],l=0;l<i.length;l++){if(!i[l].empty())return e.Pass;var c=i[l].head,d=t.getTokenAt(c),h=e.innerMode(t.getMode(),d.state),u=h.state;if("xml"!=h.mode.name||!u.tagName)return e.Pass;var p=t.getOption("autoCloseTags"),f="html"==h.mode.configuration,m="object"==typeof p&&p.dontCloseTags||f&&o,g="object"==typeof p&&p.indentTags||f&&r,v=u.tagName;d.end>c.ch&&(v=v.slice(0,v.length-d.end+c.ch));var b=v.toLowerCase();if(!v||"string"==d.type&&(d.end!=c.ch||!/[\"\']/.test(d.string.charAt(d.string.length-1))||1==d.string.length)||"tag"==d.type&&"closeTag"==u.type||d.string.indexOf("/")==d.string.length-1||m&&n(m,b)>-1||s(t,v,c,u,!0))return e.Pass;
var y=g&&n(g,b)>-1;a[l]={indent:y,text:">"+(y?"\n\n":"")+"</"+v+">",newPos:y?e.Pos(c.line+1,0):e.Pos(c.line,c.ch+1)}}for(var l=i.length-1;l>=0;l--){var w=a[l];t.replaceRange(w.text,i[l].head,i[l].anchor,"+insert");var _=t.listSelections().slice(0);_[l]={head:w.newPos,anchor:w.newPos},t.setSelections(_),w.indent&&(t.indentLine(w.newPos.line,null,!0),t.indentLine(w.newPos.line+1,null,!0))}}function i(t){if(t.getOption("disableInput"))return e.Pass;for(var i=t.listSelections(),n=[],o=0;o<i.length;o++){if(!i[o].empty())return e.Pass;var r=i[o].head,a=t.getTokenAt(r),l=e.innerMode(t.getMode(),a.state),c=l.state;if("string"==a.type||"<"!=a.string.charAt(0)||a.start!=r.ch-1)return e.Pass;if("xml"!=l.mode.name)if("htmlmixed"==t.getMode().name&&"javascript"==l.mode.name)n[o]="/script>";else{if("htmlmixed"!=t.getMode().name||"css"!=l.mode.name)return e.Pass;n[o]="/style>"}else{if(!c.context||!c.context.tagName||s(t,c.context.tagName,r,c))return e.Pass;n[o]="/"+c.context.tagName+">"}}t.replaceSelections(n),i=t.listSelections();for(var o=0;o<i.length;o++)(o==i.length-1||i[o].head.line<i[o+1].head.line)&&t.indentLine(i[o].head.line)}function n(e,t){if(e.indexOf)return e.indexOf(t);for(var i=0,n=e.length;n>i;++i)if(e[i]==t)return i;return-1}function s(t,i,n,s,o){if(!e.scanForClosingTag)return!1;var r=Math.min(t.lastLine()+1,n.line+500),a=e.scanForClosingTag(t,n,null,r);if(!a||a.tag!=i)return!1;for(var l=s.context,c=o?1:0;l&&l.tagName==i;l=l.prev)++c;n=a.to;for(var d=1;c>d;d++){var h=e.scanForClosingTag(t,n,null,r);if(!h||h.tag!=i)return!1;n=h.to}return!0}e.defineOption("autoCloseTags",!1,function(n,s,o){if(o!=e.Init&&o&&n.removeKeyMap("autoCloseTags"),s){var r={name:"autoCloseTags"};("object"!=typeof s||s.whenClosing)&&(r["'/'"]=function(e){return i(e)}),("object"!=typeof s||s.whenOpening)&&(r["'>'"]=function(e){return t(e)}),n.addKeyMap(r)}});var o=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"],r=["applet","blockquote","body","button","div","dl","fieldset","form","frameset","h1","h2","h3","h4","h5","h6","head","html","iframe","layer","legend","object","ol","p","select","table","ul"]}),function(e){"object"==typeof exports&&"object"==typeof module?e(t("../../lib/codemirror"),t("../fold/xml-fold")):"function"==typeof i&&i.amd?i("codemirror/addon/edit/matchtags",["../../lib/codemirror","../fold/xml-fold"],e):e(CodeMirror)}(function(e){"use strict";function t(e){e.state.tagHit&&e.state.tagHit.clear(),e.state.tagOther&&e.state.tagOther.clear(),e.state.tagHit=e.state.tagOther=null}function i(i){i.state.failedTagMatch=!1,i.operation(function(){if(t(i),!i.somethingSelected()){var n=i.getCursor(),s=i.getViewport();s.from=Math.min(s.from,n.line),s.to=Math.max(n.line+1,s.to);var o=e.findMatchingTag(i,n,s);if(o){if(i.state.matchBothTags){var r="open"==o.at?o.open:o.close;r&&(i.state.tagHit=i.markText(r.from,r.to,{className:"CodeMirror-matchingtag"}))}var a="close"==o.at?o.open:o.close;a?i.state.tagOther=i.markText(a.from,a.to,{className:"CodeMirror-matchingtag"}):i.state.failedTagMatch=!0}}})}function n(e){e.state.failedTagMatch&&i(e)}e.defineOption("matchTags",!1,function(s,o,r){r&&r!=e.Init&&(s.off("cursorActivity",i),s.off("viewportChange",n),t(s)),o&&(s.state.matchBothTags="object"==typeof o&&o.bothTags,s.on("cursorActivity",i),s.on("viewportChange",n),i(s))}),e.commands.toMatchingTag=function(t){var i=e.findMatchingTag(t,t.getCursor());if(i){var n="close"==i.at?i.open:i.close;n&&t.extendSelection(n.to,n.from)}}}),function(e){"object"==typeof exports&&"object"==typeof module?e(t("../../lib/codemirror")):"function"==typeof i&&i.amd?i("codemirror/addon/hint/xml-hint",["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";function t(t,n){var s=n&&n.schemaInfo,o=n&&n.quoteChar||'"';if(s){var r=t.getCursor(),a=t.getTokenAt(r),l=e.innerMode(t.getMode(),a.state);if("xml"==l.mode.name){var c,d,h=[],u=!1,p=/\btag\b/.test(a.type),f=p&&/^\w/.test(a.string);if(f){var m=t.getLine(r.line).slice(Math.max(0,a.start-2),a.start),g=/<\/$/.test(m)?"close":/<$/.test(m)?"open":null;g&&(d=a.start-("close"==g?2:1))}else p&&"<"==a.string?g="open":p&&"</"==a.string&&(g="close");if(!p&&!l.state.tagName||g){f&&(c=a.string),u=g;var v=l.state.context,b=v&&s[v.tagName],y=v?b&&b.children:s["!top"];if(y&&"close"!=g)for(var w=0;w<y.length;++w)(!c||0==y[w].lastIndexOf(c,0))&&h.push("<"+y[w]);else if("close"!=g)for(var _ in s)s.hasOwnProperty(_)&&"!top"!=_&&"!attrs"!=_&&(!c||0==_.lastIndexOf(c,0))&&h.push("<"+_);v&&(!c||"close"==g&&0==v.tagName.lastIndexOf(c,0))&&h.push("</"+v.tagName+">")}else{var b=s[l.state.tagName],k=b&&b.attrs,x=s["!attrs"];if(!k&&!x)return;if(k){if(x){var C={};for(var S in x)x.hasOwnProperty(S)&&(C[S]=x[S]);for(var S in k)k.hasOwnProperty(S)&&(C[S]=k[S]);k=C}}else k=x;if("string"==a.type||"="==a.string){var T,m=t.getRange(i(r.line,Math.max(0,r.ch-60)),i(r.line,"string"==a.type?a.start:a.end)),D=m.match(/([^\s\u00a0=<>\"\']+)=$/);if(!D||!k.hasOwnProperty(D[1])||!(T=k[D[1]]))return;if("function"==typeof T&&(T=T.call(this,t)),"string"==a.type){c=a.string;var P=0;/['"]/.test(a.string.charAt(0))&&(o=a.string.charAt(0),c=a.string.slice(1),P++);var E=a.string.length;/['"]/.test(a.string.charAt(E-1))&&(o=a.string.charAt(E-1),c=a.string.substr(P,E-2)),u=!0}for(var w=0;w<T.length;++w)(!c||0==T[w].lastIndexOf(c,0))&&h.push(o+T[w]+o)}else{"attribute"==a.type&&(c=a.string,u=!0);for(var M in k)k.hasOwnProperty(M)&&(!c||0==M.lastIndexOf(c,0))&&h.push(M)}}return{list:h,from:u?i(r.line,null==d?a.start:d):r,to:u?i(r.line,a.end):r}}}}var i=e.Pos;e.registerHelper("hint","xml",t)}),function(e){"object"==typeof exports&&"object"==typeof module?e(t("../../lib/codemirror","./xml-hint")):"function"==typeof i&&i.amd?i("codemirror/addon/hint/html-hint",["../../lib/codemirror","./xml-hint"],e):e(CodeMirror)}(function(e){"use strict";function t(e){for(var t in h)h.hasOwnProperty(t)&&(e.attrs[t]=h[t])}function i(t,i){var n={schemaInfo:d};if(i)for(var s in i)n[s]=i[s];return e.hint.xml(t,n)}var n="ab aa af ak sq am ar an hy as av ae ay az bm ba eu be bn bh bi bs br bg my ca ch ce ny zh cv kw co cr hr cs da dv nl dz en eo et ee fo fj fi fr ff gl ka de el gn gu ht ha he hz hi ho hu ia id ie ga ig ik io is it iu ja jv kl kn kr ks kk km ki rw ky kv kg ko ku kj la lb lg li ln lo lt lu lv gv mk mg ms ml mt mi mr mh mn na nv nb nd ne ng nn no ii nr oc oj cu om or os pa pi fa pl ps pt qu rm rn ro ru sa sc sd se sm sg sr gd sn si sk sl so st es su sw ss sv ta te tg th ti bo tk tl tn to tr ts tt tw ty ug uk ur uz ve vi vo wa cy wo fy xh yi yo za zu".split(" "),s=["_blank","_self","_top","_parent"],o=["ascii","utf-8","utf-16","latin1","latin1"],r=["get","post","put","delete"],a=["application/x-www-form-urlencoded","multipart/form-data","text/plain"],l=["all","screen","print","embossed","braille","handheld","print","projection","screen","tty","tv","speech","3d-glasses","resolution [>][<][=] [X]","device-aspect-ratio: X/Y","orientation:portrait","orientation:landscape","device-height: [X]","device-width: [X]"],c={attrs:{}},d={a:{attrs:{href:null,ping:null,type:null,media:l,target:s,hreflang:n}},abbr:c,acronym:c,address:c,applet:c,area:{attrs:{alt:null,coords:null,href:null,target:null,ping:null,media:l,hreflang:n,type:null,shape:["default","rect","circle","poly"]}},article:c,aside:c,audio:{attrs:{src:null,mediagroup:null,crossorigin:["anonymous","use-credentials"],preload:["none","metadata","auto"],autoplay:["","autoplay"],loop:["","loop"],controls:["","controls"]}},b:c,base:{attrs:{href:null,target:s}},basefont:c,bdi:c,bdo:c,big:c,blockquote:{attrs:{cite:null}},body:c,br:c,button:{attrs:{form:null,formaction:null,name:null,value:null,autofocus:["","autofocus"],disabled:["","autofocus"],formenctype:a,formmethod:r,formnovalidate:["","novalidate"],formtarget:s,type:["submit","reset","button"]}},canvas:{attrs:{width:null,height:null}},caption:c,center:c,cite:c,code:c,col:{attrs:{span:null}},colgroup:{attrs:{span:null}},command:{attrs:{type:["command","checkbox","radio"],label:null,icon:null,radiogroup:null,command:null,title:null,disabled:["","disabled"],checked:["","checked"]}},data:{attrs:{value:null}},datagrid:{attrs:{disabled:["","disabled"],multiple:["","multiple"]}},datalist:{attrs:{data:null}},dd:c,del:{attrs:{cite:null,datetime:null}},details:{attrs:{open:["","open"]}},dfn:c,dir:c,div:c,dl:c,dt:c,em:c,embed:{attrs:{src:null,type:null,width:null,height:null}},eventsource:{attrs:{src:null}},fieldset:{attrs:{disabled:["","disabled"],form:null,name:null}},figcaption:c,figure:c,font:c,footer:c,form:{attrs:{action:null,name:null,"accept-charset":o,autocomplete:["on","off"],enctype:a,method:r,novalidate:["","novalidate"],target:s}},frame:c,frameset:c,h1:c,h2:c,h3:c,h4:c,h5:c,h6:c,head:{attrs:{},children:["title","base","link","style","meta","script","noscript","command"]},header:c,hgroup:c,hr:c,html:{attrs:{manifest:null},children:["head","body"]},i:c,iframe:{attrs:{src:null,srcdoc:null,name:null,width:null,height:null,sandbox:["allow-top-navigation","allow-same-origin","allow-forms","allow-scripts"],seamless:["","seamless"]}},img:{attrs:{alt:null,src:null,ismap:null,usemap:null,width:null,height:null,crossorigin:["anonymous","use-credentials"]}},input:{attrs:{alt:null,dirname:null,form:null,formaction:null,height:null,list:null,max:null,maxlength:null,min:null,name:null,pattern:null,placeholder:null,size:null,src:null,step:null,value:null,width:null,accept:["audio/*","video/*","image/*"],autocomplete:["on","off"],autofocus:["","autofocus"],checked:["","checked"],disabled:["","disabled"],formenctype:a,formmethod:r,formnovalidate:["","novalidate"],formtarget:s,multiple:["","multiple"],readonly:["","readonly"],required:["","required"],type:["hidden","text","search","tel","url","email","password","datetime","date","month","week","time","datetime-local","number","range","color","checkbox","radio","file","submit","image","reset","button"]}},ins:{attrs:{cite:null,datetime:null}},kbd:c,keygen:{attrs:{challenge:null,form:null,name:null,autofocus:["","autofocus"],disabled:["","disabled"],keytype:["RSA"]}},label:{attrs:{"for":null,form:null}},legend:c,li:{attrs:{value:null}},link:{attrs:{href:null,type:null,hreflang:n,media:l,sizes:["all","16x16","16x16 32x32","16x16 32x32 64x64"]}},map:{attrs:{name:null}},mark:c,menu:{attrs:{label:null,type:["list","context","toolbar"]}},meta:{attrs:{content:null,charset:o,name:["viewport","application-name","author","description","generator","keywords"],"http-equiv":["content-language","content-type","default-style","refresh"]}},meter:{attrs:{value:null,min:null,low:null,high:null,max:null,optimum:null}},nav:c,noframes:c,noscript:c,object:{attrs:{data:null,type:null,name:null,usemap:null,form:null,width:null,height:null,typemustmatch:["","typemustmatch"]}},ol:{attrs:{reversed:["","reversed"],start:null,type:["1","a","A","i","I"]}},optgroup:{attrs:{disabled:["","disabled"],label:null}},option:{attrs:{disabled:["","disabled"],label:null,selected:["","selected"],value:null}},output:{attrs:{"for":null,form:null,name:null}},p:c,param:{attrs:{name:null,value:null}},pre:c,progress:{attrs:{value:null,max:null}},q:{attrs:{cite:null}},rp:c,rt:c,ruby:c,s:c,samp:c,script:{attrs:{type:["text/javascript"],src:null,async:["","async"],defer:["","defer"],charset:o}},section:c,select:{attrs:{form:null,name:null,size:null,autofocus:["","autofocus"],disabled:["","disabled"],multiple:["","multiple"]}},small:c,source:{attrs:{src:null,type:null,media:null}},span:c,strike:c,strong:c,style:{attrs:{type:["text/css"],media:l,scoped:null}},sub:c,summary:c,sup:c,table:c,tbody:c,td:{attrs:{colspan:null,rowspan:null,headers:null}},textarea:{attrs:{dirname:null,form:null,maxlength:null,name:null,placeholder:null,rows:null,cols:null,autofocus:["","autofocus"],disabled:["","disabled"],readonly:["","readonly"],required:["","required"],wrap:["soft","hard"]}},tfoot:c,th:{attrs:{colspan:null,rowspan:null,headers:null,scope:["row","col","rowgroup","colgroup"]}},thead:c,time:{attrs:{datetime:null}},title:c,tr:c,track:{attrs:{src:null,label:null,"default":null,kind:["subtitles","captions","descriptions","chapters","metadata"],srclang:n}},tt:c,u:c,ul:c,"var":c,video:{attrs:{src:null,poster:null,width:null,height:null,crossorigin:["anonymous","use-credentials"],preload:["auto","metadata","none"],autoplay:["","autoplay"],mediagroup:["movie"],muted:["","muted"],controls:["","controls"]}},wbr:c},h={accesskey:["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9"],"class":null,contenteditable:["true","false"],contextmenu:null,dir:["ltr","rtl","auto"],draggable:["true","false","auto"],dropzone:["copy","move","link","string:","file:"],hidden:["hidden"],id:null,inert:["inert"],itemid:null,itemprop:null,itemref:null,itemscope:["itemscope"],itemtype:null,lang:["en","es"],spellcheck:["true","false"],style:null,tabindex:["1","2","3","4","5","6","7","8","9"],title:null,translate:["yes","no"],onclick:null,rel:["stylesheet","alternate","author","bookmark","help","license","next","nofollow","noreferrer","prefetch","prev","search","tag"]};t(c);for(var u in d)d.hasOwnProperty(u)&&d[u]!=c&&t(d[u]);e.htmlSchema=d,e.registerHelper("hint","html",i)}),function(e){"object"==typeof exports&&"object"==typeof module?e(t("../../lib/codemirror")):"function"==typeof i&&i.amd?i("codemirror/addon/hint/show-hint",["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";function t(e,t){this.cm=e,this.options=this.buildOptions(t),this.widget=this.onClose=null}function i(e){return"string"==typeof e?e:e.text}function n(e,t){function i(e,i){var s;s="string"!=typeof i?function(e){return i(e,t)}:n.hasOwnProperty(i)?n[i]:i,o[e]=s}var n={Up:function(){t.moveFocus(-1)},Down:function(){t.moveFocus(1)},PageUp:function(){t.moveFocus(-t.menuSize()+1,!0)},PageDown:function(){t.moveFocus(t.menuSize()-1,!0)},Home:function(){t.setFocus(0)},End:function(){t.setFocus(t.length-1)},Enter:t.pick,Tab:t.pick,Esc:t.close},s=e.options.customKeys,o=s?{}:n;if(s)for(var r in s)s.hasOwnProperty(r)&&i(r,s[r]);var a=e.options.extraKeys;if(a)for(var r in a)a.hasOwnProperty(r)&&i(r,a[r]);return o}function s(e,t){for(;t&&t!=e;){if("LI"===t.nodeName.toUpperCase()&&t.parentNode==e)return t;t=t.parentNode}}function o(t,o){this.completion=t,this.data=o;var l=this,c=t.cm,d=this.hints=document.createElement("ul");d.className="CodeMirror-hints",this.selectedHint=o.selectedHint||0;for(var h=o.list,u=0;u<h.length;++u){var p=d.appendChild(document.createElement("li")),f=h[u],m=r+(u!=this.selectedHint?"":" "+a);null!=f.className&&(m=f.className+" "+m),p.className=m,f.render?f.render(p,o,f):p.appendChild(document.createTextNode(f.displayText||i(f))),p.hintId=u}var g=c.cursorCoords(t.options.alignWithWord?o.from:null),v=g.left,b=g.bottom,y=!0;d.style.left=v+"px",d.style.top=b+"px";var w=window.innerWidth||Math.max(document.body.offsetWidth,document.documentElement.offsetWidth),_=window.innerHeight||Math.max(document.body.offsetHeight,document.documentElement.offsetHeight);(t.options.container||document.body).appendChild(d);var k=d.getBoundingClientRect(),x=k.bottom-_;if(x>0){var C=k.bottom-k.top,S=g.top-(g.bottom-k.top);if(S-C>0)d.style.top=(b=g.top-C)+"px",y=!1;else if(C>_){d.style.height=_-5+"px",d.style.top=(b=g.bottom-k.top)+"px";var T=c.getCursor();o.from.ch!=T.ch&&(g=c.cursorCoords(T),d.style.left=(v=g.left)+"px",k=d.getBoundingClientRect())}}var D=k.left-w;if(D>0&&(k.right-k.left>w&&(d.style.width=w-5+"px",D-=k.right-k.left-w),d.style.left=(v=g.left-D)+"px"),c.addKeyMap(this.keyMap=n(t,{moveFocus:function(e,t){l.changeActive(l.selectedHint+e,t)},setFocus:function(e){l.changeActive(e)},menuSize:function(){return l.screenAmount()},length:h.length,close:function(){t.close()},pick:function(){l.pick()},data:o})),t.options.closeOnUnfocus){var P;c.on("blur",this.onBlur=function(){P=setTimeout(function(){t.close()},100)}),c.on("focus",this.onFocus=function(){clearTimeout(P)})}var E=c.getScrollInfo();return c.on("scroll",this.onScroll=function(){var e=c.getScrollInfo(),i=c.getWrapperElement().getBoundingClientRect(),n=b+E.top-e.top,s=n-(window.pageYOffset||(document.documentElement||document.body).scrollTop);return y||(s+=d.offsetHeight),s<=i.top||s>=i.bottom?t.close():(d.style.top=n+"px",void(d.style.left=v+E.left-e.left+"px"))}),e.on(d,"dblclick",function(e){var t=s(d,e.target||e.srcElement);t&&null!=t.hintId&&(l.changeActive(t.hintId),l.pick())}),e.on(d,"click",function(e){var i=s(d,e.target||e.srcElement);i&&null!=i.hintId&&(l.changeActive(i.hintId),t.options.completeOnSingleClick&&l.pick())}),e.on(d,"mousedown",function(){setTimeout(function(){c.focus()},20)}),e.signal(o,"select",h[0],d.firstChild),!0}var r="CodeMirror-hint",a="CodeMirror-hint-active";e.showHint=function(e,t,i){if(!t)return e.showHint(i);i&&i.async&&(t.async=!0);var n={hint:t};if(i)for(var s in i)n[s]=i[s];return e.showHint(n)},e.defineExtension("showHint",function(i){if(!(this.listSelections().length>1||this.somethingSelected())){this.state.completionActive&&this.state.completionActive.close();var n=this.state.completionActive=new t(this,i),s=n.options.hint;if(s)return e.signal(this,"startCompletion",this),s.async?void s(this,function(e){n.showHints(e)},n.options):n.showHints(s(this,n.options))}}),t.prototype={close:function(){this.active()&&(this.cm.state.completionActive=null,this.widget&&this.widget.close(),this.onClose&&this.onClose(),e.signal(this.cm,"endCompletion",this.cm))},active:function(){return this.cm.state.completionActive==this},pick:function(t,n){var s=t.list[n];s.hint?s.hint(this.cm,t,s):this.cm.replaceRange(i(s),s.from||t.from,s.to||t.to,"complete"),e.signal(t,"pick",s),this.close()},showHints:function(e){return e&&e.list.length&&this.active()?void(this.options.completeSingle&&1==e.list.length?this.pick(e,0):this.showWidget(e)):this.close()},showWidget:function(t){function i(){l||(l=!0,d.close(),d.cm.off("cursorActivity",a),t&&e.signal(t,"close"))}function n(){if(!l){e.signal(t,"update");var i=d.options.hint;i.async?i(d.cm,s,d.options):s(i(d.cm,d.options))}}function s(e){return t=e,l?void 0:t&&t.list.length?(d.widget&&d.widget.close(),void(d.widget=new o(d,t))):i()}function r(){c&&(m(c),c=0)}function a(){r();var e=d.cm.getCursor(),t=d.cm.getLine(e.line);e.line!=u.line||t.length-e.ch!=p-u.ch||e.ch<u.ch||d.cm.somethingSelected()||e.ch&&h.test(t.charAt(e.ch-1))?d.close():(c=f(n),d.widget&&d.widget.close())}this.widget=new o(this,t),e.signal(t,"shown");var l,c=0,d=this,h=this.options.closeCharacters,u=this.cm.getCursor(),p=this.cm.getLine(u.line).length,f=window.requestAnimationFrame||function(e){return setTimeout(e,1e3/60)},m=window.cancelAnimationFrame||clearTimeout;this.cm.on("cursorActivity",a),this.onClose=i},buildOptions:function(e){var t=this.cm.options.hintOptions,i={};for(var n in l)i[n]=l[n];if(t)for(var n in t)void 0!==t[n]&&(i[n]=t[n]);if(e)for(var n in e)void 0!==e[n]&&(i[n]=e[n]);return i}},o.prototype={close:function(){if(this.completion.widget==this){this.completion.widget=null,this.hints.parentNode.removeChild(this.hints),this.completion.cm.removeKeyMap(this.keyMap);var e=this.completion.cm;this.completion.options.closeOnUnfocus&&(e.off("blur",this.onBlur),e.off("focus",this.onFocus)),e.off("scroll",this.onScroll)}},pick:function(){this.completion.pick(this.data,this.selectedHint)},changeActive:function(t,i){if(t>=this.data.list.length?t=i?this.data.list.length-1:0:0>t&&(t=i?0:this.data.list.length-1),this.selectedHint!=t){var n=this.hints.childNodes[this.selectedHint];n.className=n.className.replace(" "+a,""),n=this.hints.childNodes[this.selectedHint=t],n.className+=" "+a,n.offsetTop<this.hints.scrollTop?this.hints.scrollTop=n.offsetTop-3:n.offsetTop+n.offsetHeight>this.hints.scrollTop+this.hints.clientHeight&&(this.hints.scrollTop=n.offsetTop+n.offsetHeight-this.hints.clientHeight+3),e.signal(this.data,"select",this.data.list[this.selectedHint],n)}},screenAmount:function(){return Math.floor(this.hints.clientHeight/this.hints.firstChild.offsetHeight)||1}},e.registerHelper("hint","auto",function(t,i){var n,s=t.getHelpers(t.getCursor(),"hint");if(s.length)for(var o=0;o<s.length;o++){var r=s[o](t,i);if(r&&r.list.length)return r}else if(n=t.getHelper(t.getCursor(),"hintWords")){if(n)return e.hint.fromList(t,{words:n})}else if(e.hint.anyword)return e.hint.anyword(t,i)}),e.registerHelper("hint","fromList",function(t,i){for(var n=t.getCursor(),s=t.getTokenAt(n),o=[],r=0;r<i.words.length;r++){var a=i.words[r];a.slice(0,s.string.length)==s.string&&o.push(a)}return o.length?{list:o,from:e.Pos(n.line,s.start),to:e.Pos(n.line,s.end)}:void 0}),e.commands.autocomplete=e.showHint;var l={hint:e.hint.auto,completeSingle:!0,alignWithWord:!0,closeCharacters:/[\s()\[\]{};:>,]/,closeOnUnfocus:!0,completeOnSingleClick:!1,container:null,customKeys:null,extraKeys:null};e.defineOption("hintOptions",null)}),function(e){"object"==typeof exports&&"object"==typeof module?e(t("../../lib/codemirror")):"function"==typeof i&&i.amd?i("codemirror/addon/hint/lint",["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";function t(t,i){function n(t){return s.parentNode?(s.style.top=Math.max(0,t.clientY-s.offsetHeight-5)+"px",void(s.style.left=t.clientX+5+"px")):e.off(document,"mousemove",n)}var s=document.createElement("div");return s.className="CodeMirror-lint-tooltip",s.appendChild(i.cloneNode(!0)),document.body.appendChild(s),e.on(document,"mousemove",n),n(t),null!=s.style.opacity&&(s.style.opacity=1),s}function i(e){e.parentNode&&e.parentNode.removeChild(e)}function n(e){e.parentNode&&(null==e.style.opacity&&i(e),e.style.opacity=0,setTimeout(function(){i(e)},600))}function s(i,s,o){function r(){e.off(o,"mouseout",r),a&&(n(a),a=null)}var a=t(i,s),l=setInterval(function(){if(a)for(var e=o;;e=e.parentNode){if(e&&11==e.nodeType&&(e=e.host),e==document.body)return;if(!e){r();break}}return a?void 0:clearInterval(l)},400);e.on(o,"mouseout",r)}function o(e,t,i){this.marked=[],this.options=t,this.timeout=null,this.hasGutter=i,this.onMouseOver=function(t){g(e,t)}}function r(t,i){if(i instanceof Function)return{getAnnotations:i};if(i&&i!==!0||(i={}),i.getAnnotations||(i.getAnnotations=t.getHelper(e.Pos(0,0),"lint")),!i.getAnnotations)throw new Error("Required option 'getAnnotations' missing (lint addon)");return i}function a(e){var t=e.state.lint;t.hasGutter&&e.clearGutter(v);for(var i=0;i<t.marked.length;++i)t.marked[i].clear();t.marked.length=0}function l(t,i,n,o){var r=document.createElement("div"),a=r;return r.className="CodeMirror-lint-marker-"+i,n&&(a=r.appendChild(document.createElement("div")),a.className="CodeMirror-lint-marker-multiple"),0!=o&&e.on(a,"mouseover",function(e){s(e,t,a)}),r}function c(e,t){return"error"==e?e:t}function d(e){for(var t=[],i=0;i<e.length;++i){var n=e[i],s=n.from.line;(t[s]||(t[s]=[])).push(n)}return t}function h(e){var t=e.severity;t||(t="error");var i=document.createElement("div");return i.className="CodeMirror-lint-message-"+t,i.appendChild(document.createTextNode(e.message)),i}function u(e){var t=e.state.lint,i=t.options,n=i.options||i;i.async||i.getAnnotations.async?i.getAnnotations(e.getValue(),p,n,e):p(e,i.getAnnotations(e.getValue(),n,e))}function p(e,t){a(e);for(var i=e.state.lint,n=i.options,s=d(t),o=0;o<s.length;++o){var r=s[o];if(r){for(var u=null,p=i.hasGutter&&document.createDocumentFragment(),f=0;f<r.length;++f){var m=r[f],g=m.severity;g||(g="error"),u=c(u,g),n.formatAnnotation&&(m=n.formatAnnotation(m)),i.hasGutter&&p.appendChild(h(m)),m.to&&i.marked.push(e.markText(m.from,m.to,{className:"CodeMirror-lint-mark-"+g,__annotation:m}))}i.hasGutter&&e.setGutterMarker(o,v,l(p,u,r.length>1,i.options.tooltips))}}n.onUpdateLinting&&n.onUpdateLinting(t,s,e)}function f(e){var t=e.state.lint;t&&(clearTimeout(t.timeout),t.timeout=setTimeout(function(){u(e)},t.options.delay||500))}function m(e,t){var i=t.target||t.srcElement;s(t,h(e),i)}function g(e,t){var i=t.target||t.srcElement;if(/\bCodeMirror-lint-mark-/.test(i.className))for(var n=i.getBoundingClientRect(),s=(n.left+n.right)/2,o=(n.top+n.bottom)/2,r=e.findMarksAt(e.coordsChar({left:s,top:o},"client")),a=0;a<r.length;++a){var l=r[a].__annotation;if(l)return m(l,t)}}var v="CodeMirror-lint-markers";e.defineOption("lint",!1,function(t,i,n){if(n&&n!=e.Init&&(a(t),t.off("change",f),e.off(t.getWrapperElement(),"mouseover",t.state.lint.onMouseOver),clearTimeout(t.state.lint.timeout),delete t.state.lint),i){for(var s=t.getOption("gutters"),l=!1,c=0;c<s.length;++c)s[c]==v&&(l=!0);var d=t.state.lint=new o(t,r(t,i),l);t.on("change",f),0!=d.options.tooltips&&e.on(t.getWrapperElement(),"mouseover",d.onMouseOver),u(t)}})}),function(e){"object"==typeof exports&&"object"==typeof module?e(t("../../lib/codemirror")):"function"==typeof i&&i.amd?i("codemirror/addon/hint/html-lint",["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";var i=function(e){function t(e,t){return Array(e+1).join(t||" ")}var i={};return i.version="0.9.13",i.release="20160501",i.rules={},i.defaultRuleset={"tagname-lowercase":!0,"attr-lowercase":!0,"attr-value-double-quotes":!0,"doctype-first":!0,"tag-pair":!0,"spec-char-escape":!0,"id-unique":!0,"src-not-empty":!0,"attr-no-duplication":!0,"title-require":!0},i.addRule=function(e){i.rules[e.id]=e},i.verify=function(t,s){(s===e||0===Object.keys(s).length)&&(s=i.defaultRuleset),t=t.replace(/^\s*<!--\s*htmlhint\s+([^\r\n]+?)\s*-->/i,function(t,i){return s===e&&(s={}),i.replace(/(?:^|,)\s*([^:,]+)\s*(?:\:\s*([^,\s]+))?/g,function(t,i,n){"false"===n?n=!1:"true"===n&&(n=!0),s[i]=n===e?!0:n}),""});var o,r=new n,a=new i.Reporter(t,s),l=i.rules;for(var c in s)o=l[c],o!==e&&s[c]!==!1&&o.init(r,a,s[c]);return r.parse(t),a.messages},i.format=function(e,i){i=i||{};var n=[],s={white:"",grey:"",red:"",reset:""};i.colors&&(s.white="[37m",s.grey="[90m",s.red="[31m",s.reset="[39m");var o=i.indent||0;return e.forEach(function(e){var i=40,r=i+20,a=e.evidence,l=e.line,c=e.col,d=a.length,h=c>i+1?c-i:1,u=a.length>c+r?c+r:d;i+1>c&&(u+=i-c+1),a=a.replace(/\t/g," ").substring(h-1,u),h>1&&(a="..."+a,h-=3),d>u&&(a+="..."),n.push(s.white+t(o)+"L"+l+" |"+s.grey+a+s.reset);var p=c-h,f=a.substring(0,p).match(/[^\u0000-\u00ff]/g);null!==f&&(p+=f.length),n.push(s.white+t(o)+t((l+"").length+3+p)+"^ "+s.red+e.message+" ("+e.rule.id+")"+s.reset)}),n},i}();"object"==typeof exports&&exports&&(exports.HTMLHint=i),function(e){var t=function(){var e=this;e._init.apply(e,arguments)};t.prototype={_init:function(e,t){var i=this;i.html=e,i.lines=e.split(/\r?\n/);var n=e.match(/\r?\n/);i.brLen=null!==n?n[0].length:0,i.ruleset=t,i.messages=[]},error:function(e,t,i,n,s){this.report("error",e,t,i,n,s)},warn:function(e,t,i,n,s){this.report("warning",e,t,i,n,s)},info:function(e,t,i,n,s){this.report("info",e,t,i,n,s)},report:function(e,t,i,n,s,o){for(var r,a,l=this,c=l.lines,d=l.brLen,h=i-1,u=c.length;u>h&&(r=c[h],a=r.length,n>a&&u>i);h++)i++,n-=a,1!==n&&(n-=d);l.messages.push({type:e,message:t,raw:o,evidence:r,line:i,col:n,rule:{id:s.id,description:s.description,link:"https://github.com/yaniswang/HTMLHint/wiki/"+s.id}})}},e.Reporter=t}(i);var n=function(e){var t=function(){var e=this;e._init.apply(e,arguments)};return t.prototype={_init:function(){var e=this;e._listeners={},e._mapCdataTags=e.makeMap("script,style"),e._arrBlocks=[],e.lastEvent=null},makeMap:function(e){for(var t={},i=e.split(","),n=0;i.length>n;n++)t[i[n]]=!0;return t},parse:function(t){function i(t,i,n,s){var o=n-b+1;s===e&&(s={}),s.raw=i,s.pos=n,s.line=y,s.col=o,w.push(s),h.fire(t,s);for(var r;r=m.exec(i);)y++,b=n+m.lastIndex}var n,s,o,r,a,l,c,d,h=this,u=h._mapCdataTags,p=/<(?:\/([^\s>]+)\s*|!--([\s\S]*?)--|!([^>]*?)|([\w\-:]+)((?:\s+[^\s"'>\/=\x00-\x0F\x7F\x80-\x9F]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s"'>]*))?)*?)\s*(\/?))>/g,f=/\s*([^\s"'>\/=\x00-\x0F\x7F\x80-\x9F]+)(?:\s*=\s*(?:(")([^"]*)"|(')([^']*)'|([^\s"'>]*)))?/g,m=/\r?\n/g,g=0,v=0,b=0,y=1,w=h._arrBlocks;for(h.fire("start",{pos:0,line:1,col:1});n=p.exec(t);)if(s=n.index,s>g&&(d=t.substring(g,s),a?c.push(d):i("text",d,g)),g=p.lastIndex,!(o=n[1])||(a&&o===a&&(d=c.join(""),i("cdata",d,v,{tagName:a,attrs:l}),a=null,l=null,c=null),a))if(a)c.push(n[0]);else if(o=n[4]){r=[];for(var _,k=n[5],x=0;_=f.exec(k);){var C=_[1],S=_[2]?_[2]:_[4]?_[4]:"",T=_[3]?_[3]:_[5]?_[5]:_[6]?_[6]:"";r.push({name:C,value:T,quote:S,index:_.index,raw:_[0]}),x+=_[0].length}x===k.length?(i("tagstart",n[0],s,{tagName:o,attrs:r,close:n[6]}),u[o]&&(a=o,l=r.concat(),c=[],v=g)):i("text",n[0],s)}else(n[2]||n[3])&&i("comment",n[0],s,{content:n[2]||n[3],"long":!!n[2]});else i("tagend",n[0],s,{tagName:o});t.length>g&&(d=t.substring(g,t.length),i("text",d,g)),h.fire("end",{pos:g,line:y,col:t.length-b+1})},addListener:function(t,i){for(var n,s=this._listeners,o=t.split(/[,\s]/),r=0,a=o.length;a>r;r++)n=o[r],s[n]===e&&(s[n]=[]),s[n].push(i)},fire:function(t,i){i===e&&(i={}),i.type=t;var n=this,s=[],o=n._listeners[t],r=n._listeners.all;o!==e&&(s=s.concat(o)),r!==e&&(s=s.concat(r));var a=n.lastEvent;null!==a&&(delete a.lastEvent,i.lastEvent=a),n.lastEvent=i;for(var l=0,c=s.length;c>l;l++)s[l].call(n,i)},removeListener:function(t,i){var n=this._listeners[t];if(n!==e)for(var s=0,o=n.length;o>s;s++)if(n[s]===i){n.splice(s,1);break}},fixPos:function(e,t){var i,n=e.raw.substr(0,t),s=n.split(/\r?\n/),o=s.length-1,r=e.line;return o>0?(r+=o,i=s[o].length+1):i=e.col+t,{line:r,col:i}},getMapAttrs:function(e){for(var t,i={},n=0,s=e.length;s>n;n++)t=e[n],i[t.name]=t.value;return i}},t}();"object"==typeof exports&&exports&&(exports.HTMLParser=n),i.addRule({id:"alt-require",description:"The alt attribute of an <img> element must be present and alt attribute of area[href] and input[type=image] must have a value.",init:function(e,t){var i=this;e.addListener("tagstart",function(n){var s,o=n.tagName.toLowerCase(),r=e.getMapAttrs(n.attrs),a=n.col+o.length+1;"img"!==o||"alt"in r?("area"===o&&"href"in r||"input"===o&&"image"===r.type)&&("alt"in r&&""!==r.alt||(s="area"===o?"area[href]":"input[type=image]",t.warn("The alt attribute of "+s+" must have a value.",n.line,a,i,n.raw))):t.warn("An alt attribute must be present on <img> elements.",n.line,a,i,n.raw)})}}),i.addRule({id:"attr-lowercase",description:"All attribute names must be in lowercase.",init:function(e,t,i){var n=this,s=Array.isArray(i)?i:[];e.addListener("tagstart",function(e){for(var i,o=e.attrs,r=e.col+e.tagName.length+1,a=0,l=o.length;l>a;a++){i=o[a];var c=i.name;-1===s.indexOf(c)&&c!==c.toLowerCase()&&t.error("The attribute name of [ "+c+" ] must be in lowercase.",e.line,r+i.index,n,i.raw)}})}}),i.addRule({id:"attr-no-duplication",description:"Elements cannot have duplicate attributes.",init:function(e,t){var i=this;e.addListener("tagstart",function(e){for(var n,s,o=e.attrs,r=e.col+e.tagName.length+1,a={},l=0,c=o.length;c>l;l++)n=o[l],s=n.name,a[s]===!0&&t.error("Duplicate of attribute name [ "+n.name+" ] was found.",e.line,r+n.index,i,n.raw),a[s]=!0})}}),i.addRule({id:"attr-unsafe-chars",description:"Attribute values cannot contain unsafe chars.",init:function(e,t){var i=this;e.addListener("tagstart",function(e){for(var n,s,o=e.attrs,r=e.col+e.tagName.length+1,a=/[\u0000-\u0008\u000b\u000c\u000e-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/,l=0,c=o.length;c>l;l++)if(n=o[l],s=n.value.match(a),null!==s){var d=escape(s[0]).replace(/%u/,"\\u").replace(/%/,"\\x");t.warn("The value of attribute [ "+n.name+" ] cannot contain an unsafe char [ "+d+" ].",e.line,r+n.index,i,n.raw)}})}}),i.addRule({id:"attr-value-double-quotes",description:"Attribute values must be in double quotes.",init:function(e,t){var i=this;e.addListener("tagstart",function(e){for(var n,s=e.attrs,o=e.col+e.tagName.length+1,r=0,a=s.length;a>r;r++)n=s[r],(""!==n.value&&'"'!==n.quote||""===n.value&&"'"===n.quote)&&t.error("The value of attribute [ "+n.name+" ] must be in double quotes.",e.line,o+n.index,i,n.raw)})}}),i.addRule({id:"attr-value-not-empty",description:"All attributes must have values.",init:function(e,t){var i=this;e.addListener("tagstart",function(e){for(var n,s=e.attrs,o=e.col+e.tagName.length+1,r=0,a=s.length;a>r;r++)n=s[r],""===n.quote&&""===n.value&&t.warn("The attribute [ "+n.name+" ] must have a value.",e.line,o+n.index,i,n.raw)})}}),i.addRule({id:"csslint",description:"Scan css with csslint.",init:function(e,i,n){var s=this;e.addListener("cdata",function(e){if("style"===e.tagName.toLowerCase()){var o;if(o="object"==typeof exports&&t?t("csslint").CSSLint.verify:CSSLint.verify,void 0!==n){var r=e.line-1,a=e.col-1;try{var l=o(e.raw,n).messages;l.forEach(function(e){var t=e.line;i["warning"===e.type?"warn":"error"]("["+e.rule.id+"] "+e.message,r+t,(1===t?a:0)+e.col,s,e.evidence)})}catch(c){}}}})}}),i.addRule({id:"doctype-first",
description:"Doctype must be declared first.",init:function(e,t){var i=this,n=function(s){"start"===s.type||"text"===s.type&&/^\s*$/.test(s.raw)||(("comment"!==s.type&&s["long"]===!1||/^DOCTYPE\s+/i.test(s.content)===!1)&&t.error("Doctype must be declared first.",s.line,s.col,i,s.raw),e.removeListener("all",n))};e.addListener("all",n)}}),i.addRule({id:"doctype-html5",description:'Invalid doctype. Use: "<!DOCTYPE html>"',init:function(e,t){function i(e){e["long"]===!1&&"doctype html"!==e.content.toLowerCase()&&t.warn('Invalid doctype. Use: "<!DOCTYPE html>"',e.line,e.col,s,e.raw)}function n(){e.removeListener("comment",i),e.removeListener("tagstart",n)}var s=this;e.addListener("all",i),e.addListener("tagstart",n)}}),i.addRule({id:"head-script-disabled",description:"The <script> tag cannot be used in a <head> tag.",init:function(e,t){function i(i){var n=e.getMapAttrs(i.attrs),a=n.type,l=i.tagName.toLowerCase();"head"===l&&(r=!0),r!==!0||"script"!==l||a&&o.test(a)!==!0||t.warn("The <script> tag cannot be used in a <head> tag.",i.line,i.col,s,i.raw)}function n(t){"head"===t.tagName.toLowerCase()&&(e.removeListener("tagstart",i),e.removeListener("tagend",n))}var s=this,o=/^(text\/javascript|application\/javascript)$/i,r=!1;e.addListener("tagstart",i),e.addListener("tagend",n)}}),i.addRule({id:"href-abs-or-rel",description:"An href attribute must be either absolute or relative.",init:function(e,t,i){var n=this,s="abs"===i?"absolute":"relative";e.addListener("tagstart",function(e){for(var i,o=e.attrs,r=e.col+e.tagName.length+1,a=0,l=o.length;l>a;a++)if(i=o[a],"href"===i.name){("absolute"===s&&/^\w+?:/.test(i.value)===!1||"relative"===s&&/^https?:\/\//.test(i.value)===!0)&&t.warn("The value of the href attribute [ "+i.value+" ] must be "+s+".",e.line,r+i.index,n,i.raw);break}})}}),i.addRule({id:"id-class-ad-disabled",description:"The id and class attributes cannot use the ad keyword, it will be blocked by adblock software.",init:function(e,t){var i=this;e.addListener("tagstart",function(e){for(var n,s,o=e.attrs,r=e.col+e.tagName.length+1,a=0,l=o.length;l>a;a++)n=o[a],s=n.name,/^(id|class)$/i.test(s)&&/(^|[-\_])ad([-\_]|$)/i.test(n.value)&&t.warn("The value of attribute "+s+" cannot use the ad keyword.",e.line,r+n.index,i,n.raw)})}}),i.addRule({id:"id-class-value",description:"The id and class attribute values must meet the specified rules.",init:function(e,t,i){var n,s=this,o={underline:{regId:/^[a-z\d]+(_[a-z\d]+)*$/,message:"The id and class attribute values must be in lowercase and split by an underscore."},dash:{regId:/^[a-z\d]+(-[a-z\d]+)*$/,message:"The id and class attribute values must be in lowercase and split by a dash."},hump:{regId:/^[a-z][a-zA-Z\d]*([A-Z][a-zA-Z\d]*)*$/,message:"The id and class attribute values must meet the camelCase style."}};if(n="string"==typeof i?o[i]:i,n&&n.regId){var r=n.regId,a=n.message;e.addListener("tagstart",function(e){for(var i,n=e.attrs,o=e.col+e.tagName.length+1,l=0,c=n.length;c>l;l++)if(i=n[l],"id"===i.name.toLowerCase()&&r.test(i.value)===!1&&t.warn(a,e.line,o+i.index,s,i.raw),"class"===i.name.toLowerCase())for(var d,h=i.value.split(/\s+/g),u=0,p=h.length;p>u;u++)d=h[u],d&&r.test(d)===!1&&t.warn(a,e.line,o+i.index,s,d)})}}}),i.addRule({id:"id-unique",description:"The value of id attributes must be unique.",init:function(e,t){var i=this,n={};e.addListener("tagstart",function(e){for(var s,o,r=e.attrs,a=e.col+e.tagName.length+1,l=0,c=r.length;c>l;l++)if(s=r[l],"id"===s.name.toLowerCase()){o=s.value,o&&(void 0===n[o]?n[o]=1:n[o]++,n[o]>1&&t.error("The id value [ "+o+" ] must be unique.",e.line,a+s.index,i,s.raw));break}})}}),i.addRule({id:"inline-script-disabled",description:"Inline script cannot be use.",init:function(e,t){var i=this;e.addListener("tagstart",function(e){for(var n,s,o=e.attrs,r=e.col+e.tagName.length+1,a=/^on(unload|message|submit|select|scroll|resize|mouseover|mouseout|mousemove|mouseleave|mouseenter|mousedown|load|keyup|keypress|keydown|focus|dblclick|click|change|blur|error)$/i,l=0,c=o.length;c>l;l++)n=o[l],s=n.name.toLowerCase(),a.test(s)===!0?t.warn("Inline script [ "+n.raw+" ] cannot be use.",e.line,r+n.index,i,n.raw):("src"===s||"href"===s)&&/^\s*javascript:/i.test(n.value)&&t.warn("Inline script [ "+n.raw+" ] cannot be use.",e.line,r+n.index,i,n.raw)})}}),i.addRule({id:"inline-style-disabled",description:"Inline style cannot be use.",init:function(e,t){var i=this;e.addListener("tagstart",function(e){for(var n,s=e.attrs,o=e.col+e.tagName.length+1,r=0,a=s.length;a>r;r++)n=s[r],"style"===n.name.toLowerCase()&&t.warn("Inline style [ "+n.raw+" ] cannot be use.",e.line,o+n.index,i,n.raw)})}}),i.addRule({id:"jshint",description:"Scan script with jshint.",init:function(e,i,n){var s=this;e.addListener("cdata",function(o){if("script"===o.tagName.toLowerCase()){var r=e.getMapAttrs(o.attrs),a=r.type;if(void 0!==r.src||a&&/^(text\/javascript)$/i.test(a)===!1)return;var l;if(l="object"==typeof exports&&t?t("jshint").JSHINT:JSHINT,void 0!==n){var c=o.line-1,d=o.col-1,h=o.raw.replace(/\t/g," ");try{var u=l(h,n);u===!1&&l.errors.forEach(function(e){var t=e.line;i.warn(e.reason,c+t,(1===t?d:0)+e.character,s,e.evidence)})}catch(p){}}}})}}),i.addRule({id:"space-tab-mixed-disabled",description:"Do not mix tabs and spaces for indentation.",init:function(e,t,i){var n=this,s="nomix",o=null;if("string"==typeof i){var r=i.match(/^([a-z]+)(\d+)?/);s=r[1],o=r[2]&&parseInt(r[2],10)}e.addListener("text",function(i){for(var r,a=i.raw,l=/(^|\r?\n)([ \t]+)/g;r=l.exec(a);){var c=e.fixPos(i,r.index+r[1].length);if(1===c.col){var d=r[2];"space"===s?o?(/^ +$/.test(d)===!1||0!==d.length%o)&&t.warn("Please use space for indentation and keep "+o+" length.",c.line,1,n,i.raw):/^ +$/.test(d)===!1&&t.warn("Please use space for indentation.",c.line,1,n,i.raw):"tab"===s&&/^\t+$/.test(d)===!1?t.warn("Please use tab for indentation.",c.line,1,n,i.raw):/ +\t|\t+ /.test(d)===!0&&t.warn("Do not mix tabs and spaces for indentation.",c.line,1,n,i.raw)}}})}}),i.addRule({id:"spec-char-escape",description:"Special characters must be escaped.",init:function(e,t){var i=this;e.addListener("text",function(n){for(var s,o=n.raw,r=/[<>]/g;s=r.exec(o);){var a=e.fixPos(n,s.index);t.error("Special characters must be escaped : [ "+s[0]+" ].",a.line,a.col,i,n.raw)}})}}),i.addRule({id:"src-not-empty",description:"The src attribute of an img(script,link) must have a value.",init:function(e,t){var i=this;e.addListener("tagstart",function(e){for(var n,s=e.tagName,o=e.attrs,r=e.col+s.length+1,a=0,l=o.length;l>a;a++)n=o[a],(/^(img|script|embed|bgsound|iframe)$/.test(s)===!0&&"src"===n.name||"link"===s&&"href"===n.name||"object"===s&&"data"===n.name)&&""===n.value&&t.error("The attribute [ "+n.name+" ] of the tag [ "+s+" ] must have a value.",e.line,r+n.index,i,n.raw)})}}),i.addRule({id:"style-disabled",description:"<style> tags cannot be used.",init:function(e,t){var i=this;e.addListener("tagstart",function(e){"style"===e.tagName.toLowerCase()&&t.warn("The <style> tag cannot be used.",e.line,e.col,i,e.raw)})}}),i.addRule({id:"tag-pair",description:"Tag must be paired.",init:function(e,t){var i=this,n=[],s=e.makeMap("area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed,track,command,source,keygen,wbr");e.addListener("tagstart",function(e){var t=e.tagName.toLowerCase();void 0!==s[t]||e.close||n.push({tagName:t,line:e.line,raw:e.raw})}),e.addListener("tagend",function(e){for(var s=e.tagName.toLowerCase(),o=n.length-1;o>=0&&n[o].tagName!==s;o--);if(o>=0){for(var r=[],a=n.length-1;a>o;a--)r.push("</"+n[a].tagName+">");if(r.length>0){var l=n[n.length-1];t.error("Tag must be paired, missing: [ "+r.join("")+" ], start tag match failed [ "+l.raw+" ] on line "+l.line+".",e.line,e.col,i,e.raw)}n.length=o}else t.error("Tag must be paired, no start tag: [ "+e.raw+" ]",e.line,e.col,i,e.raw)}),e.addListener("end",function(e){for(var s=[],o=n.length-1;o>=0;o--)s.push("</"+n[o].tagName+">");if(s.length>0){var r=n[n.length-1];t.error("Tag must be paired, missing: [ "+s.join("")+" ], open tag match failed [ "+r.raw+" ] on line "+r.line+".",e.line,e.col,i,"")}})}}),i.addRule({id:"tag-self-close",description:"Empty tags must be self closed.",init:function(e,t){var i=this,n=e.makeMap("area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed,track,command,source,keygen,wbr");e.addListener("tagstart",function(e){var s=e.tagName.toLowerCase();void 0!==n[s]&&(e.close||t.warn("The empty tag : [ "+s+" ] must be self closed.",e.line,e.col,i,e.raw))})}}),i.addRule({id:"tagname-lowercase",description:"All html element names must be in lowercase.",init:function(e,t){var i=this;e.addListener("tagstart,tagend",function(e){var n=e.tagName;n!==n.toLowerCase()&&t.error("The html element name of [ "+n+" ] must be in lowercase.",e.line,e.col,i,e.raw)})}}),i.addRule({id:"title-require",description:"<title> must be present in <head> tag.",init:function(e,t){function i(e){var t=e.tagName.toLowerCase();"head"===t?o=!0:"title"===t&&o&&(r=!0)}function n(o){var a=o.tagName.toLowerCase();if(r&&"title"===a){var l=o.lastEvent;("text"!==l.type||"text"===l.type&&/^\s*$/.test(l.raw)===!0)&&t.error("<title></title> must not be empty.",o.line,o.col,s,o.raw)}else"head"===a&&(r===!1&&t.error("<title> must be present in <head> tag.",o.line,o.col,s,o.raw),e.removeListener("tagstart",i),e.removeListener("tagend",n))}var s=this,o=!1,r=!1;e.addListener("tagstart",i),e.addListener("tagend",n)}});var s={"tagname-lowercase":!1,"attr-lowercase":!1,"attr-value-double-quotes":!1,"doctype-first":!1,"tag-pair":!0,"spec-char-escape":!0,"id-unique":!0,"src-not-empty":!0,"attr-no-duplication":!0};e.registerHelper("lint","html",function(t){for(var n=[],o=i.verify(t,s),r=0;r<o.length;r++){var a=o[r],l=a.line-1,c=a.line-1,d=a.col-1,h=a.col;n.push({from:e.Pos(l,d),to:e.Pos(c,h),message:a.message,severity:a.type})}return n})}),i("modules/codeMirror",["jquery","codemirror","codemirror/mode/htmlmixed/htmlmixed","codemirror/addon/edit/closetag","codemirror/addon/edit/matchtags","codemirror/addon/hint/html-hint","codemirror/addon/hint/show-hint","codemirror/addon/hint/lint","codemirror/addon/hint/html-lint"],function(e,t){"use strict";function i(){}return window.CodeMirror=t,i.prototype={initialize:function(){this.opts.codeMirror=jQuery.extend({autoCloseTags:!1,extraKeys:{"Ctrl-J":"toMatchingTag","Ctrl-Space":"autocomplete"},gutters:["CodeMirror-lint-markers"],matchTags:{bothTags:!0},mode:"htmlmixed",lineNumbers:!0,lineWrapping:!0,lint:t.lint.html},this.opts.codeMirror),this.$toolbar.find("a.re-html,a.re-fullscreen").addClass("redactor-codemirror-button"),this.codeMirror.showCode_super=this.code.showCode,this.code.showCode=this.codeMirror.showCode,this.codeMirror.showVisual_super=this.code.showVisual,this.code.showVisual=this.codeMirror.showVisual,this.button.addCallback(this.button.addAfter("html","htmltidy","Beautify"),this.codeMirror.htmlTidy),this.button.addCallback(this.button.addAfter("html","code-undo","Undo"),e.proxy(function(){this.codeMirror.instance.undo()},this)),this.button.addCallback(this.button.addAfter("code-undo","code-redo","Redo"),e.proxy(function(){this.codeMirror.instance.redo()},this));var i=this.button.add("diff","Diff");this.$toolbar.find("a.re-diff").addClass("re-has-dropdown"),i.click(this.codeMirror.toggleDiff),this.$toolbar.find("a.re-htmltidy, a.re-code-undo, a.re-code-redo, a.re-diff").addClass("redactor-button-hidden redactor-codemirror-button")},destroy:function(){this.code.get=this.codeMirror.get_super,this.code.showCode=this.codeMirror.showCode_super,this.code.showVisual=this.codeMirror.showVisual_super},htmlTidy:function(){this.codeMirror.instance.setValue(this.tabifier.get(this.codeMirror.instance.getValue()))},toggleDiff:function(t){t.preventDefault(),e(".redactor-dropdown-box-diff").remove(),this.dropdown.hideAll(),this.button.addDropdown(e(t.currentTarget),this.codeMirror.getDiffDropdown()),this.dropdown.show(t,"diff"),window.diff_match_patch||(e(document.head).append('<link rel="stylesheet" rel="nofollow" href="//cdnjs.cloudflare.com/ajax/libs/codemirror/4.7.0/addon/merge/merge.min.css" type="text/css" />'),e.getScript("//cdnjs.cloudflare.com/ajax/libs/diff_match_patch/20121119/diff_match_patch.js").done(function(){e.getScript("//cdnjs.cloudflare.com/ajax/libs/codemirror/4.7.0/addon/merge/merge.js")}).fail(function(){window.alert("Sorry, an error occurred trying to load the difference engine.")}))},validate:function(){return this.codeMirror.instance?this.codeMirror.instance.state.lint.marked:[]},getDiffDropdown:function(){var t={},i=this;t[0]={title:"Initial State",func:this.codeMirror.showDiff},t[this.opts.buffer.length-1]={title:"Last Change",func:this.codeMirror.showDiff},this.codeMirror.compareOptions={};var n=this.$element.data("compareoptions");return n&&e.each(n,function(e,n){n.url?i.codeMirror.compareOptions[n.name]={bURL:!0,url:n.url}:i.codeMirror.compareOptions[n.name]=n.source,t[n.name]={title:n.title,func:i.codeMirror.showDiff}}),t},showDiff:function(i){var n=this,s=e.Deferred();if(this.codeMirror.diffInstance){if(!window.confirm("Any unsaved changes will be lost are you sure?"))return!1;this.codeMirror.hideDiff()}this.$box.append('<div id="redactor-code-diff"></div>');var o=e("#redactor-code-diff");this.$toolbar.append('<li class="redactor-diff-control"><a class="redactor-diff-save">Save</a></li><li class="redactor-diff-control"><a class="redactor-diff-cancel">Cancel</a></li>'),e(".redactor-diff-save").on("click",function(){n.codeMirror.saveDiff(),n.codeMirror.hideDiff()}),e(".redactor-diff-cancel").on("click",function(){n.codeMirror.hideDiff()}),this.$toolbar.find(".redactor-codemirror-button").not(".re-diff").addClass("redactor-button-disabled"),i=this.codeMirror.compareOptions[i]||this.codeMirror.cleanBuffer(this.opts.buffer[i])||i,i.bURL?e.get(i.url).done(function(e){i=e,s.resolve()}):s.resolve(),s.done(function(){o.css("top",n.$toolbar.height()+"px"),n.codeMirror.diffInstance=t.MergeView(o[0],{lineNumbers:!0,mode:"text/html",highlightDifferences:!0,value:n.codeMirror.instance.getValue(),orig:i,lineWrapping:!0}),n.$box.bind("resize.codeMirror",function(){var e=n.$box.height()-n.$toolbar.height();n.codeMirror.diffInstance.leftOriginal()&&n.codeMirror.diffInstance.leftOriginal().setSize(null,e),n.codeMirror.diffInstance.editor().setSize(null,e),n.codeMirror.diffInstance.rightOriginal()&&n.codeMirror.diffInstance.rightOriginal().setSize(null,e),n.codeMirror.diffInstance.wrap.style.height=e+"px"}).trigger("resize.codeMirror")})},saveDiff:function(){this.codeMirror.instance.setValue(this.codeMirror.diffInstance.editor().getValue())},hideDiff:function(){this.$box.find("#redactor-code-diff").remove(),this.$toolbar.find(".redactor-diff-control").remove(),this.$toolbar.find(".redactor-codemirror-button").not(".re-diff").removeClass("redactor-button-disabled"),this.codeMirror.diffInstance=null},getSandboxedHTML:function(){var e=document.createElement("div");return e.innerHTML=this.codeMirror.instance.getValue(),e.innerHTML},showVisual:function(){var e=this.codeMirror.getSandboxedHTML(),t=this.codeMirror.validate();t.length&&!confirm("HTML errors exist that can cause unexpected results. Are you sure you want to continue?")||(this.codeMirror.instance.toTextArea(),this.$textarea.val(e),this.$box.unbind("resize.codeMirror"),this.codeMirror.buttonActiveVisual(),this.codeMirror.showVisual_super.apply(this,arguments))},showCode:function(){var e=this;e.codeMirror.showCode_super.apply(e,arguments),e.codeMirror.buttonInactiveVisual(),e.codeMirror.instance=t.fromTextArea(e.$textarea[0],e.opts.codeMirror);for(var i=0;i<e.opts.buffer.length;i++)e.opts.buffer[i].length&&e.codeMirror.instance.setValue(e.codeMirror.cleanBuffer(e.opts.buffer[i]));e.codeMirror.instance.setValue(e.$textarea.val()),e.$box.bind("resize.codeMirror",function(){e.codeMirror.instance.getWrapperElement().style.height=e.$box.height()-e.$toolbar.height()+"px",e.codeMirror.instance.refresh()}),e.$box.trigger("resize.codeMirror"),e.codeMirror.instance.on("change",function(){e.$textarea.val(e.codeMirror.getSandboxedHTML())})},cleanBuffer:function(e){return e?(e=this.clean.onSync(e),e=e.replace(/<span(.*?)class="redactor-selection-marker"([^>])*>(.*?)<\/span>/gi,"")):!1},buttonActiveVisual:function(){this.$toolbar.find("a.redactor-codemirror-button:not(.re-html,.re-fullscreen)").addClass("redactor-button-hidden"),this.codeMirror.$previousButtons.removeClass("redactor-button-hidden")},buttonInactiveVisual:function(){this.$toolbar.find("a.redactor-codemirror-button").removeClass("redactor-button-hidden redactor-button-disabled"),this.codeMirror.$previousButtons=this.$toolbar.find("a:not(.redactor-codemirror-button, .redactor-button-hidden)").addClass("redactor-button-hidden")}},i}),i("modules/core",["jquery"],function(e){"use strict";function t(){}return t.prototype={getObject:function(){return e.extend({},this)},getEditor:function(){return this.$editor},getBox:function(){return this.$box},getElement:function(){return this.$element},getTextarea:function(){return this.$textarea},getToolbar:function(){return this.$toolbar?this.$toolbar:!1},addEvent:function(e){this.core.event=e},getEvent:function(){return this.core.event},setCallback:function(t,i,n){var s=this.opts[t+"Callback"];return this.$element.trigger(t+".redactor-api",i,n),e.isFunction(s)?"undefined"==typeof n?s.call(this,i):s.call(this,i,n):"undefined"==typeof n?i:n},destroy:function(){this.core.setCallback("destroy"),this.$element.off(".redactor").off(".redactor-api").removeData("redactor"),e(document).off(".redactor").off(".redactor-image-resize-hide").off(".redactor-image-delete").off(".redactor-media-resize-hide"),this.$editor.off(".redactor").off(".redactor-image-resize-hide").off(".redactor-image-delete").off(".redactor-media-resize-hide"),e(document).off("click.redactor-image-delete."+this.uuid),e(document).off("click.redactor-image-resize-hide."+this.uuid),e(document).off("touchstart.redactor."+this.uuid+" click.redactor."+this.uuid),e("body").off("scroll.redactor."+this.uuid),e(this.opts.toolbarFixedTarget).off("scroll.redactor."+this.uuid),this.$editor.removeClass("redactor-editor redactor-linebreaks redactor-placeholder"),this.$editor.removeAttr("contenteditable");var t=this.code.get();this.$toolbar.find("a").each(function(){var t=e(this);t.data("dropdown")&&(t.data("dropdown").remove(),t.data("dropdown",{}))}),this.build.isTextarea()?(this.$box.after(this.$element),this.$box.remove(),this.$element.val(t).show()):(this.$box.after(this.$editor),this.$box.remove(),this.$element.html(t).show(),this.$sourceTextarea.val(t).appendTo(this.$element)),this.$pasteBox&&this.$pasteBox.remove(),this.modal.close(),this.$modalBox&&this.$modalBox.remove(),this.$modalOverlay&&this.$modalOverlay.remove(),this.dropdown.hideAll(),e(".redactor-dropdown").remove(),e(".redactor-toolbar-tooltip").remove()}},t}),i("modules/dropdown",["jquery"],function(e){"use strict";function t(){}return t.prototype={build:function(t,i,n){"formatting"===t&&this.opts.formattingAdd&&e.each(this.opts.formattingAdd,e.proxy(function(e,t){var i,s=t.tag;"undefined"!=typeof t["class"]&&(s=s+"-"+t["class"]),t.type=this.utils.isBlockTag(t.tag)?"block":"inline",i="undefined"!=typeof t.func?t.func:"inline"===t.type?"inline.formatting":"block.formatting",this.opts.linebreaks&&"block"===t.type&&"p"===t.tag||(this.formatting[s]={tag:t.tag,style:t.style,"class":t["class"],attr:t.attr,data:t.data,clear:t.clear},n[s]={func:i,title:t.title})},this)),e.each(n,e.proxy(function(n,s){var o=e('<a href="#" class="redactor-dropdown-'+n+'">'+s.title+"</a>");"formatting"===t&&o.addClass("redactor-formatting-"+n),o.on("click",e.proxy(function(e){e.preventDefault();var t="func",i=s.func;s.command?(t="command",i=s.command):s.dropdown&&(t="dropdown",i=s.dropdown),this.button.onClick(e,n,t,i),this.dropdown.hideAll()},this)),i.append(o)},this))},show:function(t,i){function n(){var t=e("<div>").css({visibility:"hidden",width:100,overflow:"scroll"}).appendTo("body"),i=e("<div>").css({width:"100%"}).appendTo(t).outerWidth();return t.remove(),100-i}var s,o=this.button.get(i),r=o.data("dropdown").appendTo(document.body);if(this.utils.isMobile()&&!this.utils.browser("msie")&&document.activeElement.blur(),o.hasClass("dropact"))this.dropdown.hideAll();else{this.dropdown.hideAll(),this.core.setCallback("dropdownShow",{dropdown:r,key:i,button:o}),this.button.setActive(i),o.addClass("dropact");var a=o.offset(),l=r.width();a.left+l>e(document).width()&&(a.left=Math.max(0,a.left-l));var c=a.left+"px";if(this.$toolbar.hasClass("toolbar-fixed-box")){s=this.$toolbar.innerHeight()+this.opts.toolbarFixedTopOffset;var d="fixed";this.opts.toolbarFixedTarget!==document&&(s=this.$toolbar.innerHeight()+this.$toolbar.offset().top+this.opts.toolbarFixedTopOffset,d="absolute"),r.css({position:d,left:c,top:s+"px"}).show()}else s=o.innerHeight()+a.top+"px",r.css({position:"absolute",left:c,top:s}).show();this.core.setCallback("dropdownShown",{dropdown:r,key:i,button:o})}e(document).one("click.redactor",e.proxy(this.dropdown.hide,this)),this.$editor.one("click",e.proxy(this.dropdown.hide,this));var h=e(document.body),u=n();r.on("mouseover",function(){h.addClass("body-redactor-hidden"),h.css("margin-right",u+"px")}),r.on("mouseout",function(){h.removeClass("body-redactor-hidden").css("margin-right",0)}),t.stopPropagation()},hideAll:function(){this.$toolbar.find("a.dropact").removeClass("redactor-act").removeClass("dropact"),e(document.body).removeClass("body-redactor-hidden").css("margin-right",0),e(".redactor-dropdown-"+this.uuid).hide(),this.core.setCallback("dropdownHide")},hide:function(t){var i=e(t.target);i.hasClass("dropact")||(i.removeClass("dropact"),this.dropdown.hideAll())}},t}),i("modules/embed",["jquery"],function(e){"use strict";function t(){}return t.prototype={reUrlYoutube:/https?:\/\/(?:[0-9A-Z-]+\.)?(?:youtu\.be\/|youtube\.com\S*[^\w\-\s])([\w\-]{11})(?=[^\w\-]|$)(?![?=&+%\w.-]*(?:['"][^<>]*>|<\/a>))[?=&+%\w.-]*/gi,reUrlVimeo:/https?:\/\/(www\.)?vimeo.com\/(\d+)($|\/)/,getTemplate:function(){return String()+'<section id="redactor-modal-embed-insert"><label>'+this.lang.get("embed_html_code")+'</label><textarea id="redactor-insert-embed-area" style="height: 160px; width: 100%"></textarea></section>'},show:function(){this.modal.addTemplate("embed",this.embed.getTemplate()),this.modal.load("embed",this.lang.get("embed"),700),this.modal.createCancelButton();var t=this.modal.createActionButton(this.lang.get("insert"));t.on("click",this.embed.insert),this.selection.save(),this.modal.show(),e("#redactor-insert-embed-area")[0].focus()},insert:function(){var t=e("#redactor-insert-embed-area").val();if(!t.match(/<iframe|<video|<object|<embed/gi)){t=this.clean.stripTags(t);var i='<iframe style="width: 500px; height: 281px;" src="',n='" frameborder="0" allowfullscreen></iframe>';t.match(this.embed.reUrlYoutube)?t=t.replace(this.embed.reUrlYoutube,i+"//www.youtube.com/embed/$1"+n):t.match(this.embed.reUrlVimeo)&&(t=t.replace(this.embed.reUrlVimeo,i+"//player.vimeo.com/video/$2"+n))}this.selection.restore(),this.modal.close();var s=this.selection.getBlock()||this.selection.getCurrent();s?e(s).after(t):this.insert.html(t),this.code.sync()}},t}),i("modules/file",["jquery"],function(e){"use strict";function t(){}return t.prototype={show:function(){this.modal.load("file",this.lang.get("file"),700),this.upload.init("#redactor-modal-file-upload",this.opts.fileUpload,this.file.insert),this.selection.save(),this.selection.get();var t=this.sel.toString();e("#redactor-filename").val(t),this.modal.show()},insert:function(t,i,n){if("undefined"!=typeof t.error)return this.modal.close(),this.selection.restore(),this.core.setCallback("fileUploadError",t),void 0;var s;if("string"==typeof t)s=t;else{var o=e("#redactor-filename").val();"undefined"!=typeof o&&""!==o||(o=t.filename),s='<a href="'+t.filelink+'" id="filelink-marker">'+o+"</a>"}if(i){this.selection.removeMarkers();var r=this.selection.getMarker();this.insert.nodeToCaretPositionFromPoint(n,r)}else this.modal.close();if(this.selection.restore(),this.buffer.set(),this.insert.htmlWithoutClean(s),"string"!=typeof t){var a=e(this.$editor.find("a#filelink-marker"));0!==a.length?a.removeAttr("id").removeAttr("style"):a=!1,this.core.setCallback("fileUpload",a,t)}}},t}),i("modules/focus",["jquery"],function(e){"use strict";function t(){}return t.prototype={setStart:function(){this.$editor[0].focus();var e=this.$editor.children().first();if(0!==e.length&&0!==e[0].length&&"BR"!==e[0].tagName&&3!==e[0].nodeType){if("UL"===e[0].tagName||"OL"===e[0].tagName){var t=e.find("li").first();if(!this.utils.isBlock(t)&&""===t.text())return void this.caret.setStart(t)}return this.opts.linebreaks&&!this.utils.isBlockTag(e[0].tagName)?(this.selection.get(),this.range.setStart(this.$editor[0],0),this.range.setEnd(this.$editor[0],0),this.selection.addRange(),void 0):void this.caret.setStart(e)}},setEnd:function(){if(this.utils.browser("mozilla")||this.utils.browser("msie")){var e=this.$editor.children().last();this.$editor[0].focus(),this.caret.setEnd(e)}else{this.selection.get();try{this.range.selectNodeContents(this.$editor[0]),this.range.collapse(!1),this.selection.addRange()}catch(t){}}},isFocused:function(){var t=document.getSelection().focusNode;return null===t?!1:this.opts.linebreaks&&e(t.parentNode).hasClass("redactor-linebreaks")?!0:this.utils.isRedactorParent(t.parentNode)?this.$editor.is(":focus"):!1}},t}),i("modules/fontcolor",["jquery"],function(e){"use strict";function t(){}return t.prototype={initialize:function(){for(var e=["fontcolor","backcolor"],t=0;2>t;t++){var i=e[t],n=this.button.get(i);if(n.length){var s=this.button.addDropdown(n);s.width(242),this.fs.buildPicker(s,i,this.fs.colors,this.fontcolor.set,this.fontcolor.remove)}}},set:function(t,i){this.fs.setInlineStyle(function(n){e(n).css(t,i)})},remove:function(t){e.each(this.selection.getNodes(),function(i,n){e(n).css(t,"")}),this.code.sync()}},t}),i("modules/fontfamily",["jquery"],function(e){"use strict";function t(){}return t.prototype={initialize:function(){var t=["Arial","Arial Narrow","Arial Black","Helvetica","Georgia","Lucida","Monospace","Palatino","Tahoma","Times New Roman","Trebuchet","Verdana"],i=this,n={};e.each(t,function(e,t){n["s"+e]={title:t,func:function(){i.fontfamily.set(t)}}}),n.remove={title:"Remove Font Family",func:i.fontfamily.reset};var s=this.button.get("fontfamily");this.button.addDropdown(s,n)},set:function(e){this.inline.format("span","style","font-family:"+e+";")},reset:function(){this.inline.removeStyleRule("font-family")}},t}),i("modules/fontsize",["jquery"],function(e){"use strict";function t(){}return t.prototype={initialize:function(){var t=[10,11,12,14,16,18,20,24,28,30],i=this,n={};e.each(t,function(e,t){n["s"+e]={title:t+"px",func:function(){i.fontsize.set(t)}}}),n.remove={title:"Remove Font Size",func:i.fontsize.reset};var s=this.button.get("fontsize");s.length&&this.button.addDropdown(s,n)},set:function(e){this.inline.format("span","style","font-size: "+e+"px;")},reset:function(){this.inline.removeStyleRule("font-size")}},t}),i("modules/fs",["jquery"],function(e){"use strict";function t(){}return t.prototype={init:function(){this.opts.codeOnly&&this.button.remove("html"),this.buffer.clearRebuffer(),this.buffer.clearBuffer()},hidePluginButtons:function(){0!==this.opts.buttonsHide.length&&e.each(this.opts.buttonsHide,e.proxy(function(e,t){this.button.remove(t)},this))},setInlineStyle:function(t){if(this.utils.browser("mozilla")&&this.focus.isFocused()&&this.$editor[0].focus(),this.buffer.set(),this.selection.get(),e("#redactor-overlay-box:not(.redactor-overlay-type-table)",this.$editor).length)return t(this.fs.$editTarget),void this.code.sync();var i=this.sel.getRangeAt(0);if(this.sel.isCollapsed){var n=i.commonAncestorContainer;n.nodeType===Node.TEXT_NODE&&(n=n.parentElement),this.range.selectNodeContents(n),this.selection.addRange()}this.fs.setImageFloatFix(),document.execCommand("createLink",!1,"redactor-temporary"),this.fs.unsetImageFloatFix();var s=[],o=this.$editor.find('a[href="redactor-temporary"]');o.each(function(){var t=e(this),i=t.text().replace("redactor-temporary"," ");if(i!==t.parent().text()||t.parent().hasClass("redactor-editor"))if(i===t.children(":first").text())s.push(t.children(":first")[0]),t.replaceWith(this.childNodes);else{var n=e("<span/>").append(i);t.replaceWith(n),s.push(n[0])}else s.push(t.parent()[0]),t.replaceWith(this.childNodes)}),t(s),this.caret.set(s[0],0,s[s.length-1],1),this.code.sync()},sync:function(){var e=this.$textarea.val();e=e.replace(/<span([^>]*)id="redactor-overlay-box"([^>]*)>(.*?)<\/span>/gi,""),this.$textarea.val(e)},buildPicker:function(t,i,n,s,o){for(var r="backcolor"===i?"background-color":"color",a=n.length,l=function(t){t.preventDefault(),t.stopPropagation(),s(e(this).data("rule"),e(this).attr("rel"))},c=0;a>c;c++){var d=n[c],h=e('<a rel="'+d+'" data-rule="'+r+'" href="#" style="float: left; font-size: 0; border: 2px solid #fff; padding: 0; margin: 0; width: 22px; height: 22px;"></a>');h.css("background-color",d),h.on("click",l),t.append(h)}var u=e('<a href="#" style="display: block; clear: both; padding: 5px; font-size: 12px; line-height: 1;"></a>').html(this.lang.get("none"));u.on("click",function(e){e.preventDefault(),e.stopPropagation(),o(r)}),t.append(u)},cleanID:function(e){return e.replace(/[\s"']/g,"")},colors:["#ffffff","#000000","#eeece1","#1f497d","#4f81bd","#c0504d","#9bbb59","#8064a2","#4bacc6","#f79646","#ffff00","#f2f2f2","#7f7f7f","#ddd9c3","#c6d9f0","#dbe5f1","#f2dcdb","#ebf1dd","#e5e0ec","#dbeef3","#fdeada","#fff2ca","#d8d8d8","#595959","#c4bd97","#8db3e2","#b8cce4","#e5b9b7","#d7e3bc","#ccc1d9","#b7dde8","#fbd5b5","#ffe694","#bfbfbf","#3f3f3f","#938953","#548dd4","#95b3d7","#d99694","#c3d69b","#b2a2c7","#b7dde8","#fac08f","#f2c314","#a5a5a5","#262626","#494429","#17365d","#366092","#953734","#76923c","#5f497a","#92cddc","#e36c09","#c09100","#7f7f7f","#0c0c0c","#1d1b10","#0f243e","#244061","#632423","#4f6128","#3f3151","#31859b","#974806","#7f6000"],dropdownShow:function(t,i){if("formatting"===i.key){var n=e(".redactor-dropdown");n.find(".highlight").removeClass("highlight"),this.selection.getBlock()&&n.find(".redactor-dropdown-"+this.selection.getBlock().tagName.toLowerCase()).addClass("highlight")}this.$element.trigger("dropdownShow.redactor")},modalIframeBrowseInit:function(){this.$redactorModalBrowser=e("#redactor-modal-iframe-browser"),this.$redactorModalBrowser.length||(this.$modalBox.append('<div id="redactor-modal-iframe-browser"><iframe frameborder="0" height="100%" width="100%" /><footer><div style="width:100%;"><button type="button" class="redactor-button-modal-close">Cancel</button></div></footer></div>'),this.$redactorModalBrowser=e("#redactor-modal-iframe-browser",this.$modalBox)),e("#redactor-modal",this.$modal).css("left",0),this.$redactorModalBrowser.hide().css("left",this.$modal.outerWidth())},modalIframeBrowse:function(t,i,n){var s=e.proxy(function(){window.removeEventListener("message",o,!1),this.$redactorModalBrowser.off("click"),this.$editor.off("redactor.modalClose.iframeBrowser"),this.$redactorModalBrowser.css({opacity:0,"z-index":this.$modal.css("z-index")-1}),this.$modal.css("opacity",1);var e=this;setTimeout(function(){e.$redactorModalBrowser.find("iframe").removeAttr("src")},500)},this),o=e.proxy(function(e){var t=JSON.parse(e.data);i.call(this,t),s()},this);n=n||this.$modal.outerWidth(),window.addEventListener("message",o,!1),this.$redactorModalBrowser.on("click",".redactor-button-modal-close",e.proxy(s,this)),this.$editor.on("redactor.modalClose.iframeBrowser",e.proxy(s,this)),this.$redactorModalBrowser.find("iframe").attr("src",t),this.$modal.css("opacity",0),this.$redactorModalBrowser.show().css({width:n,height:this.$modal.outerHeight(),left:parseInt(e(window).width()/2)-parseInt(n/2),opacity:1,top:this.$modal.css("marginTop"),"z-index":this.$modal.css("z-index")+1})},loadEditableControls:function(t){var i=this,n=t.element,s=e.extend({top:0,left:0},t.offset);this.fs.hideEditableControls(!1),t.bCancelSelection||(this.selection.get(),this.range.selectNode(n[0]),this.selection.addRange()),this.fs.$editBox=e('<span id="redactor-overlay-box" data-verified="redactor">'),this.fs.$editBox.attr("contenteditable","false"),this.fs.$editBox.attr("unselectable","on"),this.fs.$editControls=e("<ul></ul>"),this.fs.$editTarget=n,this.fs.$editTarget.data("offset",s),this.fs.$editBox.addClass("redactor-overlay-type-"+n[0].tagName.toLowerCase()),this.fs.editBoxOnHide=t.onHide,this.$editor.append(this.fs.$editBox),this.fs.$editBox.append(this.fs.$editControls),this.$editor.on("click.redactor.hideEditableControls",this.fs.hideEditableControls),e(document).on("click.redactor.hideEditableControls",this.fs.hideEditableControls),
e(this.opts.toolbarFixedTarget).on("scroll.redactor.scrollEditableControls",this.fs.scrollEditableControls),e(document).on("mouseup.redactor.checkOverlay keyup.redactor.checkOverlay",this.fs.checkOverlay),this.fs.positionControls(),e.each(t.buttons,function(e,t){i.fs.addEditableButton(t)})},positionControls:function(){var e=this.fs.$editTarget.data("offset");this.fs.$editBox.css({top:this.fs.$editTarget.position().top+parseInt(this.fs.$editTarget.css("marginTop"))+this.$editor[0].scrollTop+e.top,left:this.fs.$editTarget.position().left+parseInt(this.fs.$editTarget.css("marginLeft"))+e.left,width:this.fs.$editTarget.outerWidth(),height:this.fs.$editTarget.outerHeight()}),this.fs.$editControls.data("original-offset")||this.fs.$editControls.data("original-offset",this.fs.$editControls.offset()),this.fs.scrollEditableControls()},hideEditableControls:function(t){return t&&t.target===this.fs.$editTarget[0]?!1:t&&e(t.target).closest(".redactor-dropdown").length?!1:this.fs.editBoxOnHide&&!this.fs.editBoxOnHide(t)?!1:(this.$editor.off(".hideEditableControls"),e(document).off(".checkOverlay"),e(document).off(".hideEditableControls"),e(this.opts.toolbarFixedTarget).off(".scrollEditableControls"),this.fs.editBoxOnHide=!1,e("#redactor-overlay-box").remove(),void 0)},checkOverlay:function(){return this.fs.$editTarget.parent().length?(this.observe.images(),void this.fs.positionControls()):void this.fs.hideEditableControls()},scrollEditableControls:function(){var e=this.$toolbar.offset().top+this.$toolbar.height(),t=e-this.fs.$editControls.data("original-offset").top;t>0&&t<this.fs.$editBox.height()?this.fs.$editControls.css({top:t}):this.fs.$editControls.css({top:""})},addEditableButton:function(t){var i=this,n=e('<li><button type="button" class="re-icon '+t["class"]+'" title="'+t.title+'"/></li>');n.on("click",function(e){e.stopPropagation(),e.preventDefault(),t.onClick(),i.fs.$editTarget.parent().length||i.fs.hideEditableControls(!1)}),this.fs.$editControls.append(n)},rgb2hex:function(e){function t(e){return("0"+parseInt(e).toString(16)).slice(-2)}return e?(e=e.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/),"#"+t(e[1])+t(e[2])+t(e[3])):""},setAttr:function(t,i,n){e.trim(n).length?t.attr(i,n):t.removeAttr(i)},setImageFloatFix:function(){e.each(this.selection.getNodes(),function(t,i){if("IMG"===i.tagName){var n=e(i);"none"!==n.css("float")&&(n.attr("data-redactor-save-float",n.css("float")),n.css("float","none"))}})},unsetImageFloatFix:function(){e.each(this.selection.getNodes(),function(t,i){if("IMG"===i.tagName){var n=e(i);!n.attr("data-redactor-save-float")||(n.css("float",n.attr("data-redactor-save-float")),n.removeAttr("data-redactor-save-float"))}})},snapSelectionToWord:function(){var e;if(window.getSelection&&(e=window.getSelection()).modify){if(e=window.getSelection(),!e.isCollapsed){var t=document.createRange();t.setStart(e.anchorNode,e.anchorOffset),t.setEnd(e.focusNode,e.focusOffset);var i=t.collapsed;t.detach();var n=e.focusNode,s=e.focusOffset;e.collapse(e.anchorNode,e.anchorOffset),i?(e.modify("move","forward","word"),e.extend(n,s),e.modify("extend","backward","word")):(e.modify("move","backward","word"),e.extend(n,s),e.modify("extend","forward","word"))}}else if((e=document.selection)&&"Control"!==e.type){var o=e.createRange();if(o.text){for(o.expand("word");/\s$/.test(o.text);)o.moveEnd("character",-1);o.select()}}}},t}),i("modules/fullscreen",["jquery"],function(e){"use strict";function t(){}return t.prototype={initialize:function(){this.fullscreen.isOpen=!1;var e=this.button.get("fullscreen");e.parent().css("float","right"),this.opts.fullscreen&&this.fullscreen.toggle()},enable:function(){var t=this;this.button.changeIcon("fullscreen","normalscreen"),this.button.setActive("fullscreen"),this.fullscreen.isOpen=!0,this.opts.toolbarExternal&&(this.fullscreen.toolcss={},this.fullscreen.boxcss={},this.fullscreen.toolcss.width=this.$toolbar.css("width"),this.fullscreen.toolcss.top=this.$toolbar.css("top"),this.fullscreen.toolcss.position=this.$toolbar.css("position"),this.fullscreen.boxcss.top=this.$box.css("top")),this.fullscreen.height=this.$editor.height(),this.opts.maxHeight&&this.$editor.css("max-height",""),this.opts.minHeight&&this.$editor.css("min-height",""),this.$fullscreenPlaceholder||(this.$fullscreenPlaceholder=e("<div/>")),this.$fullscreenPlaceholder.insertAfter(this.$box),"transparent"===this.$box.css("backgroundColor")&&e.each(this.$box.parents(),function(){var i=e(this).css("backgroundColor");return"transparent"!==i&&"inherit"!==i?(t.$box.css("backgroundColor",i),!1):void 0}),this.$box.appendTo(document.body),this.$box.addClass("redactor-box-fullscreen"),e("body, html").css("overflow","hidden"),this.fullscreen.resize(),e(window).on("resize.redactor.fullscreen",e.proxy(this.fullscreen.resize,this)),e(document).scrollTop(0,0),this.$editor[0].focus(),this.observe.load()},disable:function(){this.button.removeIcon("fullscreen","normalscreen"),this.button.setInactive("fullscreen"),this.fullscreen.isOpen=!1,e(window).off("resize.redactor.fullscreen"),e("body, html").css("overflow",""),this.$box.css("backgroundColor",""),this.$box.insertBefore(this.$fullscreenPlaceholder),this.$fullscreenPlaceholder.remove(),this.$box.removeClass("redactor-box-fullscreen").css({width:"auto",height:"auto"}),this.code.sync(),this.opts.toolbarExternal&&(this.$box.css("top",this.fullscreen.boxcss.top),this.$toolbar.css({width:this.fullscreen.toolcss.width,top:this.fullscreen.toolcss.top,position:this.fullscreen.toolcss.position})),this.opts.minHeight&&this.$editor.css("minHeight",this.opts.minHeight),this.opts.maxHeight&&this.$editor.css("maxHeight",this.opts.maxHeight),this.$editor.css("height","auto"),this.$editor[0].focus(),this.observe.load()},toggle:function(){this.fullscreen.isOpen?this.fullscreen.disable():this.fullscreen.enable(),this.$box.trigger("resize")},resize:function(){if(this.fullscreen.isOpen){var t=this.$toolbar.height(),i=window.innerHeight-t;this.$box.width(e(window).width()-2).height(i+t),this.opts.toolbarExternal&&(this.$toolbar.css({top:"0px",position:"absolute",width:"100%"}),this.$box.css("top",t+"px")),this.$editor.height(i-14)}}},t}),i("modules/image",["jquery"],function(e){"use strict";function t(){}return t.prototype={initialize:function(){this.opts.image=e.extend({onFileBrowseReturn:function(e){return e}},this.opts.image),this.$element.on("observed.redactor.img",this.image.setEditable),this.opts.modal_image_edit='<section>				<div class="redactor-image-modalleftcol">					<div class="redactor-image-preview">						<img src="" style="max-width:100%; max-height:40%"/>					</div>					<fieldset>						<legend>Size (px)</legend>						<label><input id="redactor-image-width" type="text" class="smallinput" /> Width</label>						<label><input id="redactor-image-height" type="text" class="smallinput" /> Height</label>					</fieldset>					<fieldset>						<label><input id="redactor-image-border" type="number" min="0" class="smallinput" /> Border</label>					</fieldset>					<fieldset>						<legend>Margin</legend>						<input id="redactor-image-marginTop" type="number" min="0" class="smallinput" />						<label><select id="redactor-image-marginTop-unit"><option>px</option><option>em</option><option>%</option></select>							Top						</label>						<input id="redactor-image-marginRight" type="number" min="0" class="smallinput" />						<label><select id="redactor-image-marginRight-unit"><option>px</option><option>em</option><option>%</option></select>							Right						</label>						<input id="redactor-image-marginBottom" type="number" min="0" class="smallinput" />						<label><select id="redactor-image-marginBottom-unit"><option>px</option><option>em</option><option>%</option></select>							Bottom						</label>						<input id="redactor-image-marginLeft" type="number" min="0" class="smallinput" />						<label><select id="redactor-image-marginLeft-unit"><option>px</option><option>em</option><option>%</option></select>							Left						</label>					</fieldset>				</div>				<div class="redactor-image-modalrightcol">					<fieldset>						<label for="redactor-image-url">File/URL</label>						<input id="redactor-image-url" type="text" name="redactor-image-url" />						<button type="button" class="redactor-modal-btn" id="redactor-image-browse">Browse</button>					</fieldset>					<fieldset>						<label for="redactor_image-align">Alignment</label>						<ul id="redactor-image-align">							<li><input id="redactor-image-align-none" name="redactor-image-align" type="radio" value="none"><label for="redactor-image-align-none">None</label></li>							<li><input id="redactor-image-align-left" name="redactor-image-align" type="radio" value="left"><label for="redactor-image-align-left">Left</label></li>							<li><input id="redactor-image-align-right" name="redactor-image-align" type="radio" value="right"><label for="redactor-image-align-right">Right</label></li>						</ul>					</fieldset>					<fieldset>						<label for="redactor-image-alt">Alt text</label><input type="text" id="redactor-image-alt" />						<label for="redactor-image-title">Title text</label><input type="text" id="redactor-image-title" />					</fieldset>					<fieldset>						<label for="redactor-image-class">Class</label>						<input type="text" placeholder="Choose Style..." id="redactor-image-class">						<label for="redactor-image-id">ID</label><input type="text" id="redactor-image-id" />					</fieldset>				</div>				<div style="clear:both"></div>				</section>'},setEditable:function(t,i){var n=this,s=e(i),o=[];if(o.push({name:"Settings","class":"re-cog",title:"Edit Image Properties",onClick:function(){return n.image.show(s),!1}}),window.Aviary){var r=e.extend(n.opts.aviary,{onSave:function(e,t){s.get(0).src=t}});n.featherEditor=n.featherEditor||new Aviary.Feather(r)}(!!this.opts.aviaryPopupURL||!!window.Aviary)&&o.push({name:"Edit","class":"re-pencil",title:"Edit",onClick:function(){if(n.opts.aviaryPopupURL){var e=n.opts.aviaryPopupURL.replace("{file}",s.attr("src")),t=s[0].naturalWidth;window.open(e,"_blank","width=960, height=700, scrollbars=1"),"undefined"==typeof window.FS&&(window.FS={}),"undefined"==typeof window.FS.editor&&(window.FS.editor={}),"undefined"==typeof window.FS.editor.fileEditingComplete&&(window.FS.editor.fileEditingComplete=function(e){s.one("load",function(){s[0].naturalWidth!==t&&s.attr("width",s[0].naturalWidth)}),s.attr("src",e.url.replace(/ /g,"%20"))})}else n.featherEditor.launch({image:s.get(0)});return!1}}),o.push({name:"Delete",title:"Delete","class":"re-trash",onClick:function(){return window.confirm("Are you sure you want to delete this image?")?(s.remove(),void n.code.sync()):!1}}),s.off(".editcontrols").on("click.editcontrols touchstart.editcontrols",function(e){e.stopPropagation(),n.fs.loadEditableControls({element:s,buttons:o})})},show:function(t){this.modal.addTemplate("image",this.opts.modal_image_edit),this.modal.load("image",this.opts.curLang.image+" Settings",600),this.modal.createCancelButton();var i=this.modal.createDeleteButton("Delete"),n=this.modal.createActionButton("Save");e("#redactor-overlay-box.redactor-overlay-type-img").length&&(t=this.fs.$editTarget),"string"==typeof t&&(this.selection.save(),t=e('<img data-new="true"/>')),t.data("save-src",t.attr("src")),t.removeAttr("height");var s=this,o=e(".redactor-image-preview > img",this.$modal),r=t[0].style,a=t[0].naturalWidth/t[0].naturalHeight,l=/\d+/,c=/\D+$/;if(this.opts.browseFileURL.length?e("#redactor-image-browse",this.$modal).on("click",e.proxy(function(t){return t.preventDefault(),this.fs.modalIframeBrowse.call(this,this.opts.browseFileURL,e.proxy(function(t){t=this.opts.image.onFileBrowseReturn(t),e("#redactor-image-url",this.$modal).val(t.path).change()},this)),!1},this)):e("#redactor-image-browse",this.$modal).hide(),e("input[type=number],#redactor-image-width,#redactor-image-height",s.$modal).on("keydown",function(e){(e.keyCode>57||e.keyCode<48)&&8!==e.keyCode&&9!==e.keyCode&&37!==e.keyCode&&39!==e.keyCode&&46!==e.keyCode&&13!==e.keyCode&&e.preventDefault()}),e("#redactor-image-width",this.$modal).val(t.width()).on("change keyup",function(){e("#redactor-image-height",this.$modal).val(parseInt(this.value/a))}),e("#redactor-image-height",this.$modal).val(t.height()).on("change keyup",function(){e("#redactor-image-width",this.$modal).val(parseInt(this.value*a))}),e("#redactor-image-border",this.$modal).val(r.borderWidth.match(l)).on("change",function(){o.css("border",e(this).val()+"px solid #000")}).change(),e("#redactor-image-marginTop",this.$modal).val(r.marginTop.match(l)||0),e("#redactor-image-marginRight",this.$modal).val(r.marginRight.match(l)||0),e("#redactor-image-marginBottom",this.$modal).val(r.marginBottom.match(l)||0),e("#redactor-image-marginLeft",this.$modal).val(r.marginLeft.match(l)||0),e("#redactor-image-marginTop-unit",this.$modal).val(r.marginTop.match(c)||"px"),e("#redactor-image-marginRight-unit",this.$modal).val(r.marginRight.match(c)||"px"),e("#redactor-image-marginBottom-unit",this.$modal).val(r.marginBottom.match(c)||"px"),e("#redactor-image-marginLeft-unit",this.$modal).val(r.marginLeft.match(c)||"px"),e('input[name="redactor-image-align"][value="'+t.css("float")+'"]',this.$modal).prop("checked",!0),e("#redactor-image-alt",this.$modal).val(t.attr("alt")),e("#redactor-image-title",this.$modal).val(t.attr("title")),e("#redactor-image-id",this.$modal).val(t.attr("id")),e("#redactor-image-class",this.$modal).val(t.attr("class")),e.fn.selectize){var d=this.opts.classes?e.map(this.opts.classes,function(e){return{value:e["class"],text:e.name}}):[],h=e("#redactor-image-class").selectize({delimiter:" ",persist:!1,create:!0});h[0].selectize.addOption(d),h[0].selectize.$control.on("keyup",function(e){e.stopPropagation()})}e("#redactor-image-url",this.$modal).val(t.attr("src")).on("change",function(){var i=e("#redactor-image-url",s.$modal).val();o.attr("src",i||"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"),i!==t.data("save-src")&&t.removeAttr("width")}).change(),o.load(function(){a=o[0].naturalWidth/o[0].naturalHeight,t.attr("width")||(e("#redactor-image-width",this.$modal).val(o[0].naturalWidth),e("#redactor-image-height",this.$modal).val(o[0].naturalHeight))}),n.on("click",function(){s.image.save(t)}),i.on("click",function(){t.remove(),s.code.sync(),s.modal.close()}),this.modal.show()},save:function(t){this.selection.restore();var i=e("#redactor-image-alt").val(),n=e("#redactor-image-title").val(),s=e("#redactor-image-id").val(),o=e("#redactor-image-class").val(),r=e("#redactor-image-width").val(),a=e("#redactor-image-marginTop").val()||0,l=e("#redactor-image-marginRight").val()||0,c=e("#redactor-image-marginBottom").val()||0,d=e("#redactor-image-marginLeft").val()||0,h=e("#redactor-image-marginTop-unit").val(),u=e("#redactor-image-marginRight-unit").val(),p=e("#redactor-image-marginBottom-unit").val(),f=e("#redactor-image-marginLeft-unit").val(),m=e('input[name="redactor-image-align"]:checked').val(),g=e("#redactor-image-border").val();this.fs.setAttr(t,"alt",i),this.fs.setAttr(t,"title",n),this.fs.setAttr(t,"id",s),this.fs.setAttr(t,"class",o),!isNaN(r)&&r>0?t.attr("width",r):t.removeAttr("width"),t.removeAttr("height"),t.css("border",g>0?g+"px solid #000":""),t.attr("src",e("#redactor-image-url").val()),t.css("margin",a+l+c+d>0?a+h+" "+l+u+" "+c+p+" "+d+f:""),"left"===m?t.css("float","left"):"right"===m?t.css("float","right"):t.css("float",""),!t.data("new")||(t.removeData("new").removeAttr("data-new"),this.insert.html(t[0].outerHTML,!1)),this.modal.close(),this.observe.images(),this.code.sync()}},t}),i("modules/indent",["jquery"],function(e){"use strict";function t(){}return t.prototype={increase:function(){this.utils.browser("msie")||this.$editor[0].focus(),this.buffer.set(),this.selection.save();var e=this.selection.getBlock();e&&"LI"===e.tagName?this.indent.increaseLists():e===!1&&this.opts.linebreaks?this.indent.increaseText():this.indent.increaseBlocks(),this.selection.restore(),this.code.sync()},increaseLists:function(){document.execCommand("indent"),this.indent.fixEmptyIndent(),this.clean.normalizeLists(),this.clean.clearUnverified()},increaseBlocks:function(){e.each(this.selection.getBlocks(),e.proxy(function(e,t){if("TD"!==t.tagName&&"TH"!==t.tagName){var i=this.utils.getAlignmentElement(t),n=parseFloat(i.css("font-size")),s=(this.utils.normalize(i.css("margin-left"))+n)/n;i.css("margin-left",s+"em")}},this))},increaseText:function(){var t=this.selection.wrap("div");e(t).attr("data-tagblock","redactor"),e(t).css("margin-left",this.opts.indentValue/parseFloat(e(document.body).css("font-size")+"em"))},decrease:function(){this.buffer.set(),this.selection.save();var e=this.selection.getBlock();e&&"LI"===e.tagName?this.indent.decreaseLists():this.indent.decreaseBlocks(),this.selection.restore(),this.code.sync()},decreaseLists:function(){document.execCommand("outdent");var t=this.selection.getCurrent(),i=e(t).closest("li",this.$editor[0]),n=i.parent();0!==i.length&&0!==n.length&&"LI"===n[0].tagName&&n.after(i),this.indent.fixEmptyIndent(),!this.opts.linebreaks&&0===i.length&&(document.execCommand("formatblock",!1,"p"),this.$editor.find("ul, ol, blockquote, p").each(e.proxy(this.utils.removeEmpty,this))),this.clean.clearUnverified()},decreaseBlocks:function(){e.each(this.selection.getBlocks(),e.proxy(function(e,t){var i=this.utils.getAlignmentElement(t),n=parseFloat(i.css("font-size")),s=(this.utils.normalize(i.css("margin-left"))-n)/n;0>=s?this.opts.linebreaks&&"undefined"!=typeof i.data("tagblock")?i.replaceWith(i.html()+"<br />"):(i.css("margin-left",""),this.utils.removeEmptyAttr(i,"style")):i.css("margin-left",s+"em")},this))},fixEmptyIndent:function(){var t=this.selection.getBlock();if(this.range.collapsed&&t&&"LI"===t.tagName&&this.utils.isEmpty(e(t).text())){var i=e(t);i.find("span").not(".redactor-selection-marker").contents().unwrap(),i.append("<br>")}}},t}),i("modules/inline",["jquery"],function(e){"use strict";function t(){}return t.prototype={formatting:function(e){var t,i;"undefined"!=typeof this.formatting[e].style?t="style":"undefined"!=typeof this.formatting[e]["class"]&&(t="class"),t&&(i=this.formatting[e][t]),this.inline.format(this.formatting[e].tag,t,i)},format:function(t,i,n){if(!this.utils.isCurrentOrParent("PRE")&&!this.utils.isCurrentOrParentHeader()){for(var s=["b","bold","i","italic","underline","strikethrough","deleted","superscript","subscript"],o=["strong","strong","em","em","u","del","del","sup","sub"],r=0;r<s.length;r++)t===s[r]&&(t=o[r]);if(this.opts.allowedTags){if(-1===e.inArray(t,this.opts.allowedTags))return}else if(-1!==e.inArray(t,this.opts.deniedTags))return;this.inline.type=i||!1,this.inline.value=n||!1,this.buffer.set(),this.utils.browser("msie")||this.$editor[0].focus(),this.selection.get(),this.range.collapsed?this.inline.formatCollapsed(t):this.inline.formatMultiple(t)}},formatCollapsed:function(t){var i=this.selection.getCurrent(),n=e(i).closest(t+"[data-redactor-tag="+t+"]",this.$editor[0]);if(0!==n.length&&"style"!==this.inline.type&&"SPAN"!==n[0].tagName)return void(this.utils.isEmpty(n.text())?(this.caret.setAfter(n[0]),n.remove(),this.code.sync()):this.utils.isEndOfElement(n)&&this.caret.setAfter(n[0]));var s=e("<"+t+">").attr("data-verified","redactor").attr("data-redactor-tag",t);s.html(this.opts.invisibleSpace),s=this.inline.setFormat(s),s=this.insert.node(s),this.caret.setEnd(s),this.code.sync()},formatMultiple:function(t){if(this.inline.formatConvert(t),this.selection.save(),document.execCommand("strikethrough"),this.$editor.find("strike").each(e.proxy(function(i,n){var s=e(n);this.inline.formatRemoveSameChildren(s,t);var o;if(this.inline.type?(o=e("<span>").attr("data-redactor-tag",t).attr("data-verified","redactor"),o=this.inline.setFormat(o)):o=e("<"+t+">").attr("data-redactor-tag",t).attr("data-verified","redactor"),s.replaceWith(o.html(s.contents())),"span"===t){var r=o.parent();if(r&&"SPAN"===r[0].tagName&&"style"===this.inline.type)for(var a=this.inline.value.split(";"),l=0;l<a.length;l++){if(""===a[l])return;var c=a[l].split(":");r.css(c[0],""),this.utils.removeEmptyAttr(r,"style")&&r.replaceWith(r.contents())}}},this)),"span"!==t&&this.$editor.find(this.opts.inlineTags.join(", ")).each(e.proxy(function(t,i){var n=e(i),s=n.css("text-decoration");"line-through"===s&&(n.css("text-decoration",""),this.utils.removeEmptyAttr(n,"style"))},this)),"del"!==t){var i=this;this.$editor.find("inline").each(function(e,t){i.utils.replaceToTag(t,"del")})}this.selection.restore(),this.code.sync()},formatRemoveSameChildren:function(t,i){var n=this;t.children(i).each(function(){var t=e(this);if(!t.hasClass("redactor-selection-marker"))if("style"===n.inline.type)for(var i=n.inline.value.split(";"),s=0;s<i.length;s++){if(""===i[s])return;var o=i[s].split(":");t.css(o[0],""),n.utils.removeEmptyAttr(t,"style")&&t.replaceWith(t.contents())}else t.contents().unwrap()})},formatConvert:function(t){this.selection.save();var i="";"class"===this.inline.type?i="[data-redactor-class="+this.inline.value+"]":"style"===this.inline.type&&(i='[data-redactor-style="'+this.inline.value+'"]');var n=this;"del"!==t&&this.$editor.find("del").each(function(e,t){n.utils.replaceToTag(t,"inline")}),"span"!==t&&this.$editor.find(t).each(function(){var t=e(this);t.replaceWith(e("<strike />").html(t.contents()))}),this.$editor.find('[data-redactor-tag="'+t+'"]'+i).each(function(){if(""!==i||"span"!==t||this.tagName.toLowerCase()!==t){var n=e(this);n.replaceWith(e("<strike />").html(n.contents()))}}),this.selection.restore()},setFormat:function(e){switch(this.inline.type){case"class":e.hasClass(this.inline.value)?(e.removeClass(this.inline.value),e.removeAttr("data-redactor-class")):(e.addClass(this.inline.value),e.attr("data-redactor-class",this.inline.value));break;case"style":e[0].style.cssText=this.inline.value,e.attr("data-redactor-style",this.inline.value)}return e},removeStyle:function(){this.buffer.set();var t=this.selection.getCurrent(),i=this.selection.getInlines();if(this.selection.save(),t&&"SPAN"===t.tagName){var n=e(t);n.removeAttr("style"),0===n[0].attributes.length&&n.replaceWith(n.contents())}e.each(i,e.proxy(function(t,i){var n=e(i);-1!==e.inArray(i.tagName.toLowerCase(),this.opts.inlineTags)&&!n.hasClass("redactor-selection-marker")&&(n.removeAttr("style"),0===n[0].attributes.length&&n.replaceWith(n.contents()))},this)),this.selection.restore(),this.code.sync()},removeStyleRule:function(t){this.buffer.set();var i=this.selection.getParent(),n=this.selection.getInlines();if(this.selection.save(),i&&"SPAN"===i.tagName){var s=e(i);s.css(t,""),this.utils.removeEmptyAttr(s,"style"),0===s[0].attributes.length&&s.replaceWith(s.contents())}e.each(n,e.proxy(function(i,n){var s=e(n);-1!==e.inArray(n.tagName.toLowerCase(),this.opts.inlineTags)&&!s.hasClass("redactor-selection-marker")&&(s.css(t,""),this.utils.removeEmptyAttr(s,"style"),0===s[0].attributes.length&&s.replaceWith(s.contents()))},this)),this.selection.restore(),this.code.sync()},removeFormat:function(){this.buffer.set();var t=this.selection.getCurrent();this.selection.save(),document.execCommand("removeFormat"),t&&"SPAN"===t.tagName&&e(t).replaceWith(e(t).contents()),e.each(this.selection.getNodes(),e.proxy(function(t,i){var n=e(i);-1!==e.inArray(i.tagName.toLowerCase(),this.opts.inlineTags)&&!n.hasClass("redactor-selection-marker")&&n.replaceWith(n.contents())},this)),this.selection.restore(),this.code.sync()},toggleClass:function(e){this.inline.format("span","class",e)},toggleStyle:function(e){this.inline.format("span","style",e)}},t}),i("modules/insert",["jquery"],function(e){"use strict";function t(){}return t.prototype={set:function(t,i){this.placeholder.remove(),t=this.clean.setVerified(t),"undefined"==typeof i&&(t=this.clean.onPaste(t,!1)),this.$editor.html(t),this.selection.remove(),this.focus.setEnd(),this.clean.normalizeLists(),this.code.sync(),this.observe.load(),"undefined"==typeof i&&setTimeout(e.proxy(this.clean.clearUnverified,this),10)},text:function(t){if(this.placeholder.remove(),t=t.toString(),t=e.trim(t),t=this.clean.getPlainText(t,!1),this.$editor[0].focus(),this.utils.browser("msie"))this.insert.htmlIe(t);else{this.selection.get(),this.range.deleteContents();var i=document.createElement("div");i.innerHTML=t;for(var n,s,o=document.createDocumentFragment();n=i.firstChild;)s=o.appendChild(n);if(this.range.insertNode(o),s){var r=this.range.cloneRange();r.setStartAfter(s),r.collapse(!0),this.sel.removeAllRanges(),this.sel.addRange(r)}}this.code.sync(),this.clean.clearUnverified()},htmlWithoutClean:function(e){this.insert.html(e,!1)},html:function(t,i){this.placeholder.remove(),"undefined"==typeof i&&(i=!0),this.$editor[0].focus(),t=this.clean.setVerified(t),i&&(t=this.clean.onPaste(t)),this.utils.browser("msie")?this.insert.htmlIe(t):(this.clean.singleLine?this.insert.execHtml(t):document.execCommand("insertHTML",!1,t),this.insert.htmlFixMozilla()),this.clean.normalizeLists(),this.opts.linebreaks||this.$editor.find("p").each(e.proxy(this.utils.removeEmpty,this)),this.code.sync(),this.observe.load(),i&&this.clean.clearUnverified()},htmlFixMozilla:function(){if(this.utils.browser("mozilla")){var t=e(this.selection.getBlock()).next();t.length>0&&"P"===t[0].tagName&&""===t.html()&&t.remove()}},htmlIe:function(t){if(this.utils.isIe11()){var i=this.utils.isCurrentOrParent("P"),n=e("<div>").append(t),s=n.contents().is("p, :header, dl, ul, ol, div, table, td, blockquote, pre, address, section, header, footer, aside, article");return void(i&&s?this.insert.ie11FixInserting(i,t):this.insert.ie11PasteFrag(t))}document.selection.createRange().pasteHTML(t)},execHtml:function(e){e=this.clean.setVerified(e),this.selection.get(),this.range.deleteContents();var t=document.createElement("div");t.innerHTML=e;for(var i,n,s=document.createDocumentFragment();i=t.firstChild;)n=s.appendChild(i);this.range.insertNode(s),this.range.collapse(!0),this.caret.setAfter(n)},node:function(t,i){t=t[0]||t;var n=this.utils.getOuterHtml(t);return n=this.clean.setVerified(n),null!==n.match(/</g)&&(t=e(n)[0]),this.selection.get(),i!==!1&&this.range.deleteContents(),this.range.insertNode(t),this.range.collapse(!1),this.selection.addRange(),t},nodeToPoint:function(e,t,i){e=e[0]||e,this.selection.get();var n;if(document.caretPositionFromPoint){var s=document.caretPositionFromPoint(t,i);this.range.setStart(s.offsetNode,s.offset),this.range.collapse(!0),this.range.insertNode(e)}else if(document.caretRangeFromPoint)n=document.caretRangeFromPoint(t,i),n.insertNode(e);else if("undefined"!=typeof document.body.createTextRange){n=document.body.createTextRange(),n.moveToPoint(t,i);var o=n.duplicate();o.moveToPoint(t,i),n.setEndPoint("EndToEnd",o),n.select()}},nodeToCaretPositionFromPoint:function(e,t){t=t[0]||t;var i,n=e.clientX,s=e.clientY;if(document.caretPositionFromPoint){var o=document.caretPositionFromPoint(n,s),r=document.getSelection();i=r.getRangeAt(0),i.setStart(o.offsetNode,o.offset),i.collapse(!0),i.insertNode(t)}else if(document.caretRangeFromPoint)i=document.caretRangeFromPoint(n,s),i.insertNode(t);else if("undefined"!=typeof document.body.createTextRange){i=document.body.createTextRange(),i.moveToPoint(n,s);var a=i.duplicate();a.moveToPoint(n,s),i.setEndPoint("EndToEnd",a),i.select()}},ie11FixInserting:function(t,i){var n=document.createElement("span");n.className="redactor-ie-paste",this.insert.node(n);var s=e(t).html();s="<p>"+s.replace(/<span class="redactor-ie-paste"><\/span>/gi,"</p>"+i+"<p>")+"</p>",e(t).replaceWith(s)},ie11PasteFrag:function(e){this.selection.get(),this.range.deleteContents();var t=document.createElement("div");t.innerHTML=e;for(var i,n,s=document.createDocumentFragment();i=t.firstChild;)n=s.appendChild(i);this.range.insertNode(s),this.range.collapse(!1),this.selection.addRange()}},t}),i("modules/keydown",["jquery"],function(e){"use strict";function t(){}return t.prototype={init:function(t){if(!this.rtePaste){var i,n=t.which,s=n>=37&&40>=n;this.keydown.ctrl=t.ctrlKey||t.metaKey,this.keydown.current=this.selection.getCurrent(),this.keydown.parent=this.selection.getParent(),this.keydown.block=this.selection.getBlock(),this.keydown.pre=this.utils.isTag(this.keydown.current,"pre"),this.keydown.blockquote=this.utils.isTag(this.keydown.current,"blockquote"),this.keydown.figcaption=this.utils.isTag(this.keydown.current,"figcaption"),this.shortcuts.init(t,n),this.keydown.checkEvents(s,n),this.keydown.setupBuffer(t,n),this.keydown.addArrowsEvent(s),this.keydown.setupSelectAll(t,n);var o=this.core.setCallback("keydown",t);if(o===!1)return t.preventDefault(),!1;if(this.opts.enterKey&&(this.utils.browser("msie")||this.utils.browser("mozilla"))&&(n===this.keyCode.DOWN||n===this.keyCode.RIGHT)){var r=!1,a=!1;this.keydown.block&&"TD"===this.keydown.block.tagName&&(a=e(this.keydown.block).closest("table",this.$editor[0])),a&&a.find("td").last()[0]===this.keydown.block&&(r=!0),this.utils.isEndOfElement()&&r&&(i=e(this.opts.emptyHtml),a.after(i),this.caret.setStart(i))}if(this.opts.enterKey&&n===this.keyCode.DOWN&&this.keydown.onArrowDown(),!this.opts.enterKey&&n===this.keyCode.ENTER)return t.preventDefault(),void(this.range.collapsed||this.range.deleteContents());if(n===this.keyCode.ENTER&&!t.shiftKey&&!t.ctrlKey&&!t.metaKey){var l=this.core.setCallback("enter",t);if(l===!1)return t.preventDefault(),!1;if(this.keydown.blockquote&&this.keydown.exitFromBlockquote(t)===!0)return!1;var c,d;if(this.keydown.pre)return this.keydown.insertNewLine(t);if(this.keydown.blockquote||this.keydown.figcaption)return c=this.selection.getCurrent(),d=e(c).next(),0!==d.length&&"BR"===d[0].tagName?this.keydown.insertBreakLine(t):this.utils.isEndOfElement()&&c&&"SPAN"!==c?this.keydown.insertDblBreakLine(t):this.keydown.insertBreakLine(t);if(this.opts.linebreaks&&!this.keydown.block)return c=this.selection.getCurrent(),d=e(this.keydown.current).next(),0!==d.length&&"BR"===d[0].tagName?this.keydown.insertBreakLine(t):c!==!1&&e(c).hasClass("redactor-invisible-space")?(this.caret.setAfter(c),e(c).contents().unwrap(),this.keydown.insertDblBreakLine(t)):this.utils.isEndOfEditor()?this.keydown.insertDblBreakLine(t):0===d.length&&c===!1&&"undefined"!=typeof d.context?this.keydown.insertBreakLine(t):this.keydown.insertBreakLine(t);if(this.opts.linebreaks&&this.keydown.block)setTimeout(e.proxy(this.keydown.replaceDivToBreakLine,this),1);else if(!this.opts.linebreaks&&this.keydown.block)if("LI"!==this.keydown.block.tagName)setTimeout(e.proxy(this.keydown.replaceDivToParagraph,this),1);else{c=this.selection.getCurrent();var h=e(c).closest("li",this.$editor[0]),u=h.closest("ul,ol",this.$editor[0]);if(0!==h.length&&this.utils.isEmpty(h.html())&&0===u.next().length&&this.utils.isEmpty(u.find("li").last().html()))return u.find("li").last().remove(),i=e(this.opts.emptyHtml),u.after(i),this.caret.setStart(i),!1}else if(!this.opts.linebreaks&&!this.keydown.block)return this.keydown.insertParagraph(t)}if(n===this.keyCode.ENTER&&(t.ctrlKey||t.shiftKey))return this.keydown.onShiftEnter(t);if(n===this.keyCode.TAB||t.metaKey&&221===n||t.metaKey&&219===n)return this.keydown.onTab(t,n);if(n===this.keyCode.BACKSPACE||n===this.keyCode.DELETE){if(this.utils.browser("mozilla")&&this.keydown.current&&"TD"===this.keydown.current.tagName)return t.preventDefault(),!1;var p=this.selection.getNodes();if(p){var f,m,g=p.length;for(f=0;g>f;f++){var v=e(p[f]).children("img");if(0!==v.length){var b=this;e.each(v,function(t,i){var n=e(i);"none"===n.css("float")&&(b.core.setCallback("imageDelete",i.src,n),m=i)})}else"IMG"===p[f].tagName&&m!==p[f]&&(this.core.setCallback("imageDelete",p[f].src,e(p[f])),m=p[f])}}}n===this.keyCode.BACKSPACE&&(this.keydown.removeInvisibleSpace(),this.keydown.removeEmptyListInTable(t)),this.code.sync()}},checkEvents:function(e,t){!e&&("click"===this.core.getEvent()||"arrow"===this.core.getEvent())&&(this.core.addEvent(!1),this.keydown.checkKeyEvents(t)&&this.buffer.set())},checkKeyEvents:function(t){var i=this.keyCode,n=[i.BACKSPACE,i.DELETE,i.ENTER,i.SPACE,i.ESC,i.TAB,i.CTRL,i.META,i.ALT,i.SHIFT];return-1===e.inArray(t,n)},addArrowsEvent:function(e){return e?"click"===this.core.getEvent()||"arrow"===this.core.getEvent()?void this.core.addEvent(!1):void this.core.addEvent("arrow"):void 0},setupBuffer:function(e,t){return this.keydown.ctrl&&90===t&&!e.shiftKey&&!e.altKey&&this.opts.buffer.length?(e.preventDefault(),void this.buffer.undo()):this.keydown.ctrl&&90===t&&e.shiftKey&&!e.altKey&&0!==this.opts.rebuffer.length?(e.preventDefault(),void this.buffer.redo()):void(this.keydown.ctrl||(t===this.keyCode.BACKSPACE||t===this.keyCode.DELETE||t===this.keyCode.ENTER&&!e.ctrlKey&&!e.shiftKey||t===this.keyCode.SPACE)&&this.buffer.set())},setupSelectAll:function(e,t){this.keydown.ctrl&&65===t?this.utils.enableSelectAll():t!==this.keyCode.LEFT_WIN&&!this.keydown.ctrl&&this.utils.disableSelectAll();
},onArrowDown:function(){for(var e=[this.keydown.blockquote,this.keydown.pre,this.keydown.figcaption],t=0;t<e.length;t++)if(e[t])return this.keydown.insertAfterLastElement(e[t]),!1},onShiftEnter:function(e){return this.buffer.set(),this.utils.isEndOfElement()?this.keydown.insertDblBreakLine(e):this.keydown.insertBreakLine(e)},onTab:function(e,t){if(!this.opts.tabKey)return!0;if(this.utils.isEmpty(this.code.get())&&this.opts.tabAsSpaces===!1)return!0;e.preventDefault();var i;return this.keydown.pre&&!e.shiftKey?(i=this.opts.preSpaces?document.createTextNode(new Array(this.opts.preSpaces+1).join("\xa0")):document.createTextNode("	"),this.insert.node(i),this.code.sync()):this.opts.tabAsSpaces!==!1?(i=document.createTextNode(new Array(this.opts.tabAsSpaces+1).join("\xa0")),this.insert.node(i),this.code.sync()):e.metaKey&&219===t?this.indent.decrease():e.metaKey&&221===t?this.indent.increase():e.shiftKey?this.indent.decrease():this.indent.increase(),!1},replaceDivToBreakLine:function(){var t=this.selection.getBlock(),i=t.innerHTML.replace(/<br\s?\/?>/gi,"");if(("DIV"===t.tagName||"P"===t.tagName)&&""===i&&!e(t).hasClass("redactor-editor")){var n=document.createElement("br");return e(t).replaceWith(n),this.caret.setBefore(n),this.code.sync(),!1}},replaceDivToParagraph:function(){var t=this.selection.getBlock(),i=t.innerHTML.replace(/<br\s?\/?>/gi,"");if("DIV"===t.tagName&&""===i&&!e(t).hasClass("redactor-editor")){var n=document.createElement("p");return n.innerHTML=this.opts.invisibleSpace,e(t).replaceWith(n),this.caret.setStart(n),this.code.sync(),!1}this.opts.cleanStyleOnEnter&&"P"===t.tagName&&e(t).removeAttr("class").removeAttr("style")},insertParagraph:function(e){e.preventDefault(),this.selection.get();var t;return this.selection.getParent()===!1&&(t=document.createElement("p"),t.innerHTML=this.$editor.html(),this.selection.selectAll(),this.range.deleteContents(),this.range.insertNode(t),this.caret.setAfter(t)),t=document.createElement("p"),t.innerHTML=this.opts.invisibleSpace,this.range.deleteContents(),this.range.insertNode(t),this.caret.setStart(t),this.code.sync(),!1},exitFromBlockquote:function(t){if(this.utils.isEndOfElement()){var i=e.trim(e(this.keydown.block).html());if(-1!==i.search(/(<br\s?\/?>){2}$/i)){if(t.preventDefault(),this.opts.linebreaks){var n=document.createElement("br");e(this.keydown.blockquote).after(n),this.caret.setBefore(n),e(this.keydown.block).html(i.replace(/<br\s?\/?>$/i,""))}else{var s=e(this.opts.emptyHtml);e(this.keydown.blockquote).after(s),this.caret.setStart(s)}return!0}}},insertAfterLastElement:function(t){if(this.utils.isEndOfElement())if(this.buffer.set(),this.opts.linebreaks){var i=e("<div>").append(e.trim(this.$editor.html())).contents(),n=i.last()[0];if("SPAN"===n.tagName&&""===n.innerHTML&&(n=i.prev()[0]),this.utils.getOuterHtml(n)!==this.utils.getOuterHtml(t))return;var s=document.createElement("br");e(t).after(s),this.caret.setAfter(s)}else{if(this.$editor.contents().last()[0]!==t)return;var o=e(this.opts.emptyHtml);e(t).after(o),this.caret.setStart(o)}},insertNewLine:function(e){e.preventDefault();var t=document.createTextNode("\n");return this.selection.get(),this.range.deleteContents(),this.range.insertNode(t),this.caret.setAfter(t),this.code.sync(),!1},insertBreakLine:function(e){return this.keydown.insertBreakLineProcessing(e)},insertDblBreakLine:function(e){return this.keydown.insertBreakLineProcessing(e,!0)},insertBreakLineProcessing:function(t,i){t.stopPropagation(),this.selection.get();var n=document.createElement("br");this.utils.browser("msie")?(this.range.collapse(!1),this.range.setEnd(this.range.endContainer,this.range.endOffset)):this.range.deleteContents(),this.range.insertNode(n);var s=e(n).parent("a");if(s.length>0&&(s.find(n).remove(),s.after(n)),i===!0){var o=e(n).next();if(0!==o.length&&"BR"===o[0].tagName&&this.utils.isEndOfEditor())return this.caret.setAfter(n),this.code.sync(),!1;var r=document.createElement("br");this.range.insertNode(r),this.caret.setAfter(r)}else this.keydown.insertBreakLineProcessingAfter(n);return this.code.sync(),!1},insertBreakLineProcessingAfter:function(t){var i=this.utils.createSpaceElement();e(t).after(i),this.selection.selectElement(i),e(i).replaceWith(function(){return e(this).contents()})},removeInvisibleSpace:function(){var t=e(this.keydown.current);0===t.text().search(/^\u200B$/g)&&t.remove()},removeEmptyListInTable:function(t){var i=e(this.keydown.current),n=e(this.keydown.parent),s=i.closest("td",this.$editor[0]);if(0!==s.length&&i.closest("li",this.$editor[0])&&1===n.children("li").length){if(!this.utils.isEmpty(i.text()))return;t.preventDefault(),i.remove(),n.remove(),this.caret.setStart(s)}}},t}),i("modules/keyup",["jquery"],function(e){"use strict";function t(){}return t.prototype={init:function(t){if(!this.rtePaste){var i=t.which;this.keyup.current=this.selection.getCurrent(),this.keyup.parent=this.selection.getParent();var n=this.utils.isRedactorParent(e(this.keyup.parent).parent());this.code.sync();var s=this.core.setCallback("keyup",t);return s===!1?(t.preventDefault(),!1):(!this.opts.linebreaks&&3===this.keyup.current.nodeType&&this.keyup.current.length<=1&&(this.keyup.parent===!1||"BODY"===this.keyup.parent.tagName)&&this.keyup.replaceToParagraph(),!this.opts.linebreaks&&this.utils.isRedactorParent(this.keyup.current)&&"DIV"===this.keyup.current.tagName&&this.keyup.replaceToParagraph(!1),!this.opts.linebreaks&&e(this.keyup.parent).hasClass("redactor-invisible-space")&&(n===!1||"BODY"===n[0].tagName)&&(e(this.keyup.parent).contents().unwrap(),this.keyup.replaceToParagraph()),this.linkify.isEnabled()&&this.linkify.isKey(i)&&this.linkify.format(),i===this.keyCode.DELETE||i===this.keyCode.BACKSPACE?(this.clean.clearUnverified(),this.observe.image?(t.preventDefault(),this.image.hideResize(),this.buffer.set(),this.image.remove(this.observe.image),this.observe.image=!1,!1):(this.$editor.find("p").each(e.proxy(function(t,i){this.utils.removeEmpty(t,e(i).html())},this)),this.opts.linebreaks&&this.keyup.current&&"DIV"===this.keyup.current.tagName&&this.utils.isEmpty(this.keyup.current.innerHTML)&&(e(this.keyup.current).after(this.selection.getMarkerAsHtml()),this.selection.restore(),e(this.keyup.current).remove()),this.keyup.formatEmpty(t))):void 0)}},replaceToParagraph:function(t){var i,n=e(this.keyup.current);i=t===!1?e("<p>").append(n.html()):e("<p>").append(n.clone()),n.replaceWith(i);var s=e(i).next();"undefined"!=typeof s[0]&&"BR"===s[0].tagName&&s.remove(),this.caret.setEnd(i)},formatEmpty:function(t){var i=e.trim(this.$editor.html());if(this.utils.isEmpty(i))return t.preventDefault(),this.opts.linebreaks?(this.$editor.html(this.selection.getMarkerAsHtml()),this.selection.restore()):(i="<p><br /></p>",this.$editor.html(i),this.focus.setStart()),this.code.sync(),!1}},t}),i("modules/lang",[],function(){"use strict";function e(){}return e.prototype={load:function(){this.opts.curLang=this.opts.langs[this.opts.lang]},get:function(e){return"undefined"!=typeof this.opts.curLang[e]?this.opts.curLang[e]:""}},e}),i("modules/line",["jquery"],function(e){"use strict";function t(){}return t.prototype={insert:function(){this.buffer.set();var e=this.selection.getBlocks();return e[0]!==!1&&this.line.isExceptLastOrFirst(e)?void(this.utils.browser("msie")||this.$editor.focus()):void(this.utils.browser("msie")?this.line.insertInIe():this.line.insertInOthersBrowsers())},isExceptLastOrFirst:function(t){var i=["li","td","th","blockquote","figcaption","pre","dl","dt","dd"],n=t[0].tagName.toLowerCase(),s=this.selection.getLastBlock();s="undefined"==typeof s?n:s.tagName.toLowerCase();var o=-1!==e.inArray(n,i),r=-1!==e.inArray(s,i);return o&&r||o?!0:void 0},insertInIe:function(){this.utils.saveScroll(),this.buffer.set(),this.insert.node(document.createElement("hr")),this.utils.restoreScroll(),this.code.sync()},insertInOthersBrowsers:function(){this.buffer.set();var e='<p id="redactor-insert-line"><br /></p>';this.opts.linebreaks&&(e='<br id="redactor-insert-line">'),document.execCommand("insertHTML",!1,"<hr>"+e),this.line.setFocus(),this.code.sync()},setFocus:function(){var t=this.$editor.find("#redactor-insert-line"),i=e(t).next()[0];i?(this.caret.setAfter(t),t.remove()):t.removeAttr("id")}},t}),i("text",["module"],function(e){"use strict";var i,n,s,o,r,a=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],l=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,c=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,d="undefined"!=typeof location&&location.href,h=d&&location.protocol&&location.protocol.replace(/\:/,""),u=d&&location.hostname,p=d&&(location.port||void 0),f={},m=e.config&&e.config()||{};return i={version:"2.0.14",strip:function(e){if(e){e=e.replace(l,"");var t=e.match(c);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:m.createXhr||function(){var e,t,i;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(t=0;3>t;t+=1){i=a[t];try{e=new ActiveXObject(i)}catch(n){}if(e){a=[i];break}}return e},parseName:function(e){var t,i,n,s=!1,o=e.lastIndexOf("."),r=0===e.indexOf("./")||0===e.indexOf("../");return-1!==o&&(!r||o>1)?(t=e.substring(0,o),i=e.substring(o+1)):t=e,n=i||t,o=n.indexOf("!"),-1!==o&&(s="strip"===n.substring(o+1),n=n.substring(0,o),i?i=n:t=n),{moduleName:t,ext:i,strip:s}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,t,n,s){var o,r,a,l=i.xdRegExp.exec(e);return l?(o=l[2],r=l[3],r=r.split(":"),a=r[1],r=r[0],!(o&&o!==t||r&&r.toLowerCase()!==n.toLowerCase()||(a||r)&&a!==s)):!0},finishLoad:function(e,t,n,s){n=t?i.strip(n):n,m.isBuild&&(f[e]=n),s(n)},load:function(e,t,n,s){if(s&&s.isBuild&&!s.inlineText)return void n();m.isBuild=s&&s.isBuild;var o=i.parseName(e),r=o.moduleName+(o.ext?"."+o.ext:""),a=t.toUrl(r),l=m.useXhr||i.useXhr;return 0===a.indexOf("empty:")?void n():void(!d||l(a,h,u,p)?i.get(a,function(t){i.finishLoad(e,o.strip,t,n)},function(e){n.error&&n.error(e)}):t([r],function(e){i.finishLoad(o.moduleName+"."+o.ext,o.strip,e,n)}))},write:function(e,t,n){if(f.hasOwnProperty(t)){var s=i.jsEscape(f[t]);n.asModule(e+"!"+t,"define(function () { return '"+s+"';});\n")}},writeFile:function(e,t,n,s,o){var r=i.parseName(t),a=r.ext?"."+r.ext:"",l=r.moduleName+a,c=n.toUrl(r.moduleName+a)+".js";i.load(l,n,function(){var t=function(e){return s(c,e)};t.asModule=function(e,t){return s.asModule(e,c,t)},i.write(e,l,t,o)},o)}},"node"===m.env||!m.env&&"undefined"!=typeof process&&process.versions&&process.versions.node&&!process.versions["node-webkit"]&&!process.versions["atom-shell"]?(n=t.nodeRequire("fs"),i.get=function(e,t,i){try{var s=n.readFileSync(e,"utf8");"\ufeff"===s[0]&&(s=s.substring(1)),t(s)}catch(o){i&&i(o)}}):"xhr"===m.env||!m.env&&i.createXhr()?i.get=function(e,t,n,s){var o,r=i.createXhr();if(r.open("GET",e,!0),s)for(o in s)s.hasOwnProperty(o)&&r.setRequestHeader(o.toLowerCase(),s[o]);m.onXhr&&m.onXhr(r,e),r.onreadystatechange=function(){var i,s;4===r.readyState&&(i=r.status||0,i>399&&600>i?(s=new Error(e+" HTTP status: "+i),s.xhr=r,n&&n(s)):t(r.responseText),m.onXhrComplete&&m.onXhrComplete(r,e))},r.send(null)}:"rhino"===m.env||!m.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?i.get=function(e,t){var i,n,s="utf-8",o=new java.io.File(e),r=java.lang.System.getProperty("line.separator"),a=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(o),s)),l="";try{for(i=new java.lang.StringBuffer,n=a.readLine(),n&&n.length()&&65279===n.charAt(0)&&(n=n.substring(1)),null!==n&&i.append(n);null!==(n=a.readLine());)i.append(r),i.append(n);l=String(i.toString())}finally{a.close()}t(l)}:("xpconnect"===m.env||!m.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(s=Components.classes,o=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),r="@mozilla.org/windows-registry-key;1"in s,i.get=function(e,t){var i,n,a,l={};r&&(e=e.replace(/\//g,"\\")),a=new FileUtils.File(e);try{i=s["@mozilla.org/network/file-input-stream;1"].createInstance(o.nsIFileInputStream),i.init(a,1,0,!1),n=s["@mozilla.org/intl/converter-input-stream;1"].createInstance(o.nsIConverterInputStream),n.init(i,"utf-8",i.available(),o.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),n.readString(i.available(),l),n.close(),i.close(),t(l.value)}catch(c){throw new Error((a&&a.path||"")+": "+c)}}),i}),i("text!view/link/insert_anchor_modal.html",[],function(){return'<section id="redactor-modal-link">\n	<label for="redactor-link-id">ID</label>\n	<input type="text" id="redactor-anchor-id" class="redactor-input" />\n</section>\n'}),i("text!view/link/link_modal.html",[],function(){return'<section id="redactor-modal-link">\n	<div class="redactor-tab redactor-tab1">\n		<label>URL</label>\n		<input type="text" id="redactor-link-url" class="redactor-input" />\n	</div>\n	<div class="redactor-tab redactor-tab2" style="display: none;">\n		<label><%= curLang.site_page %></label>\n		<div class="redactor-site-page-selected">\n			<span class="redactor-site-page-selected-text"><%= curLang.site_page_select %></span>\n			<button type="button" class="redactor-link-site-page-browse" title="<%= curLang.site_page_browse_title %>"><%= curLang.browse %></button>\n			<% if (browseComposerSiteURL) { %>\n				<button type="button" class="redactor-link-composer-site-page-browse" title="<%= curLang.composer_site_page_browse_title %>"><%= curLang.browse_composer %></button>\n			<% } %>\n		</div>\n	</div>\n	<div class="redactor-tab redactor-tab3" style="display: none;">\n		<label><%= curLang.site_file %></label>\n		<div class="redactor-site-file-selected">\n			<span class="redactor-site-file-selected-text"><%= curLang.site_file_select %></span>\n			<button type="button" class="redactor-link-site-file-browse" title="<%= curLang.site_file_browse_title %>"><%= curLang.browse %></button>\n		</div>\n	</div>\n	<div class="redactor-tab redactor-tab4" style="display: none;">\n		<label><%= curLang.media %></label>\n		<div class="redactor-media-selected">\n			<span class="redactor-media-selected-text"><%= curLang.media_select %></span>\n			<button type="button" class="redactor-link-media-browse" title="<%= curLang.media_browse_title %>"><%= curLang.browse %></button>\n			<input type="checkbox" id="redactor-link-media-show-title"> <label for="redactor-link-media-show-title">Display Media Title</label>\n			<input type="checkbox" id="redactor-link-media-show-description"> <label for="redactor-link-media-show-description">Display Media Description</label>\n		</div>\n	</div>\n	<div class="redactor-tab redactor-tab5" style="display: none;">\n		<label for="redactor-anchor-id">Anchor</label>\n		<select id="redactor-anchor-id">\n			<option value="">Choose Anchor...</option>\n		</select>\n	</div>\n	<input type="checkbox" class="redactor-link-blank" id="redactor-link-blank"><label for="redactor-link-blank"><%= curLang.link_new_tab %></label><br />\n	<label for="redactor-link-title"><%= curLang.title %><span class="redactor-tooltip" data-title="<%= curLang.title_attr_description %>">?</span></label>\n	<input type="text" id="redactor-link-title" class="redactor-input" />\n	<label for="redactor-link-class"><%= curLang.class %> <span class="redactor-tooltip" data-title="<%= curLang.class_attr_description %>">?</span></label>\n	<input type="text" id="redactor-link-class" placeholder="Choose Style..." class="redactor-input" />\n	<label for="redactor-link-id">ID <span class="redactor-tooltip" data-title="<%= curLang.id_attr_description %>">?</span></label>\n	<input type="text" id="redactor-link-id" class="redactor-input" />\n</section>\n'}),i("modules/link",["jquery","underscore","text!view/link/insert_anchor_modal.html","text!view/link/link_modal.html"],function(e,t,i,n){"use strict";function s(){}return s.prototype={initialize:function(){this.link.show=this.link.show,this.$toolbar.find(".redactor-dropdown-box-link").remove();var s=this,o=this.$toolbar.find(".re-link").closest("li"),r={title:this.opts.curLang.link},a=this.button.build("link",r),l={"1editlink":{title:"Insert/Edit Link (ctrl + k)",func:this.link.show},"2editanchor":{title:"Add/Edit Anchor",func:this.link.showAnchor},"3hideshowanchors":{title:"Hide Anchors",func:this.link.toggleAnchors}};o.empty().append(a),this.button.addDropdown(a,l),e(a).on("click",function(){s.$editor.hasClass("redactor-hide-anchors")?e(".redactor-dropdown-box-link .redactor-dropdown-3hideshowanchors").text("Show Anchors"):e(".redactor-dropdown-box-link .redactor-dropdown-3hideshowanchors").text("Hide Anchors")}),this.opts.link=e.extend({onMediaBrowseReturn:function(e){return e},onFileBrowseReturn:function(e){return e},onPageBrowseReturn:function(e){return e},anchorTest:/^#/,mediaTest:/^\/media\/\d/gi,siteFileTest:/^\/?(file.cfm|\/?uploaded)/gi,sitePageTest:/^\/pages\/\d/gi,anchorSelector:".redactor-editor [id]"},this.opts.link),this.opts.modal_insertAnchor=i,this.opts.modal_link=t.template(n)(this.opts)},show:function(){if(e(".redactor-link-tooltip").remove(),e("#redactor-overlay-box.redactor-overlay-type-img").length){var t=this.fs.$editTarget;this.fs.hideEditableControls(!1),this.selection.get(),this.range.selectNode(t.get(0)),this.selection.addRange()}this.modal.addTemplate("link",this.opts.modal_link),this.modal.load("link",this.opts.curLang.link+" Settings",540);var i=this.modal.getModal();this.modal.createTabber(i),this.modal.addTab(1,"URL","active"),this.modal.addTab(2,this.opts.curLang.site_page),this.modal.addTab(3,this.opts.curLang.site_file),this.modal.addTab(4,this.opts.curLang.media),this.modal.addTab(5,"Anchor"),this.modal.createCancelButton();var n=this.modal.createDeleteButton("Unlink"),s=this.modal.createActionButton("Save");this.selection.get(),this.link.getData();var o="",r="",a="",l="",c="",d="";this.link.$node&&(o=this.link.$node.attr("class"),r=this.link.$node.attr("title"),a=this.link.$node.attr("id"),l=this.link.$node.attr("data-page-name")||this.link.url,c=this.link.$node.attr("data-file-name")||this.link.url,d=this.link.$node.attr("data-media-name")||this.link.url,e("#redactor-link-title").val(r),e("#redactor-link-id").val(a),e("#redactor-link-class").val(o),e("#redactor-link-media-show-title").prop("checked",this.link.$node.attr("data-media-dialog-title")),e("#redactor-link-media-show-description").prop("checked",this.link.$node.attr("data-media-dialog-description")),this.link.$node.length>1&&e('#redactor-link-id, label[for="redactor-link-id"]').hide());var h;if(e.fn.selectize){var u=this.opts.classes?e.map(this.opts.classes,function(e){return{value:e["class"],text:e.name}}):[],p=e("#redactor-link-class").selectize({delimiter:" ",persist:!1,create:!0}),f=e.map(e(this.opts.link.anchorSelector),function(e){return{value:e.id,text:e.id}});h=e("#redactor-anchor-id").selectize({create:!0,onChange:function(t){e("#redactor-link-url").val("#"+t)}}),p[0].selectize.addOption(u),p[0].selectize.$control.on("keyup",function(e){e.stopPropagation()}),h[0].selectize.addOption(f),h[0].selectize.$control.on("keyup",function(e){e.stopPropagation()}),this.$element.one("modalClosed.redactor-api",function(){p[0].selectize.destroy(),h[0].selectize.destroy()})}var m=self.location.href.replace(/\/$/i,""),g=this.link.url.replace(m,"")||"http://";if(this.link.url.search(this.opts.link.sitePageTest)>=0)this.modal.$tabber.children(":eq(1)").click(),l&&e(".redactor-site-page-selected-text").text(l);else if(this.link.url.search(this.opts.link.siteFileTest)>=0)this.modal.$tabber.children(":eq(2)").click(),c&&e(".redactor-site-file-selected-text").text(c);else if(this.link.url.search(this.opts.link.mediaTest)>=0)this.modal.$tabber.children(":eq(3)").click(),d&&e(".redactor-media-selected-text").text(d);else if(this.link.url.search(this.opts.link.anchorTest)>=0&&(this.modal.$tabber.children(":eq(4)").click(),e.fn.selectize)){var v=this.link.url.replace("#","");h[0].selectize.addOption({value:v,text:v}),h[0].selectize.setValue(v)}e("#redactor-link-url").val(g),("_blank"===this.link.target||"http://"===g)&&e(".redactor-link-blank",this.$modal).prop("checked",!0),this.opts.browseComposerSiteURL.length>0&&this.$modal.on("click",".redactor-link-composer-site-page-browse",e.proxy(function(t){return t.preventDefault(),this.fs.modalIframeBrowse.call(this,this.opts.browseComposerSiteURL,e.proxy(function(t){t=this.opts.link.onPageBrowseReturn(t),e("#redactor-link-url").val(t.path),e(".redactor-site-page-selected-text",this.$modal).text(t.name)},this)),!1},this)),this.opts.browseSiteURL.length>0?this.$modal.on("click",".redactor-link-site-page-browse",e.proxy(function(t){return t.preventDefault(),this.fs.modalIframeBrowse.call(this,this.opts.browseSiteURL,e.proxy(function(t){t=this.opts.link.onPageBrowseReturn(t),e("#redactor-link-url").val(t.path),e(".redactor-site-page-selected-text",this.$modal).text(t.name)},this)),!1},this)):this.modal.$tabber.children(":eq(1)").hide(),this.opts.browseFileURL.length>0?this.$modal.on("click",".redactor-link-site-file-browse",e.proxy(function(t){return t.preventDefault(),this.fs.modalIframeBrowse.call(this,this.opts.browseFileURL,e.proxy(function(t){t=this.opts.link.onFileBrowseReturn(t),e("#redactor-link-url").val(t.path),e(".redactor-site-file-selected-text",this.$modal).text(t.name)},this),620),!1},this)):this.modal.$tabber.children(":eq(2)").hide(),this.opts.browseMediaURL.length>0?this.$modal.on("click",".redactor-link-media-browse",e.proxy(function(t){return t.preventDefault(),this.fs.modalIframeBrowse.call(this,this.opts.browseMediaURL,e.proxy(function(t){t=this.opts.link.onMediaBrowseReturn(t),e("#redactor-link-url").val(t.path),e(".redactor-media-selected-text",this.$modal).text(t.name),e("#redactor-link-url").data(t)},this)),!1},this)):this.modal.$tabber.children(":eq(3)").hide(),e("#redactor-modal-tabber",this.$modal).on("click","a",function(){"http://"===g&&(1===e("#redactor-modal-tabber > a.active").index()||4===e("#redactor-modal-tabber > a.active").index()?e(".redactor-link-blank").prop("checked",!1):e(".redactor-link-blank").prop("checked",!0))}),s.on("click",this.link.linkProcess),n.on("click",e.proxy(function(){this.modal.close(),this.selection.restore(),this.link.unlink()},this)),this.selection.save(),this.modal.show(),e("#redactor-link-url",this.$modal)[0].focus()},linkProcess:function(){var t=e.extend({"class":"",href:"",target:"",title:"",id:"","data-page-name":"","data-file-name":"","data-media-name":"","data-media-dialog-title":"","data-media-dialog-description":""},e("#redactor-link-url").data("attributes")),i=e("#redactor-modal-tabber > a.active").index();if(t.href=e("#redactor-link-url").val()||"#",e(".redactor-link-blank",this.$modal).prop("checked")&&(t.target="_blank"),/^javascript:/.test(t.href)&&(t.target=""),"1"===i){var n=/((xn--)?[a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}/,s=new RegExp("^(http|ftp|https)://"+n,"i"),o=new RegExp("^"+n,"i");-1===t.href.search(s)&&0===t.href.search(o)&&this.opts.linkProtocol&&(t.href=this.opts.linkProtocol+t.href)}t["data-page-name"]=e(".redactor-site-page-selected-text:visible",this.$modal).text(),t["data-file-name"]=e(".redactor-site-file-selected-text:visible",this.$modal).text(),t["data-media-name"]=e(".redactor-media-selected-text:visible",this.$modal).text(),e("#redactor-link-media-show-title").is(":checked")&&(t["data-media-dialog-title"]="true"),e("#redactor-link-media-show-description").is(":checked")&&(t["data-media-dialog-description"]="true"),t.title=e.trim(this.clean.encodeEntities(e("#redactor-link-title").val())),t["class"]=e.trim(e("#redactor-link-class").val()),t.id=e.trim(this.fs.cleanID(e("#redactor-link-id").val())),this.link.linkInsert(t),this.modal.close()},linkInsert:function(t){var i=this;if(this.selection.restore(),this.link.$node)this.buffer.set(),e.each(t,function(e,t){i.fs.setAttr(i.link.$node,e,t)}),this.code.sync();else{var n;this.fs.setImageFloatFix(),document.execCommand("createLink",!1,"redactor-temporary"),this.fs.unsetImageFloatFix(),n=e('a[href="redactor-temporary"]',this.$editor),n.length||(this.insert.html('<a id="redactor-inserted-link">'+t.href+"</a>"),n=e("#redactor-inserted-link").removeAttr("id")),e.each(t,function(e,t){i.fs.setAttr(n,e,t)}),""===this.link.text&&!this.link.hasImage()&&(n.text(t.href),this.selection.selectElement(n)),this.code.sync(),this.core.setCallback("insertedLink",n)}setTimeout(e.proxy(function(){this.observe.links()},this),5)},showAnchor:function(){var e=this;this.modal.addTemplate("insertAnchor",this.opts.modal_insertAnchor),this.modal.load("insertAnchor","Add/Edit Anchor",460),this.modal.createCancelButton();var t=this.modal.createActionButton("Save"),i=this.modal.createDeleteButton("Remove");i.on("click",function(){e.modal.close(),e.selection.restore(),e.link.anchorRemove()}),this.range.collapse(!0),this.selection.addRange(),t.on("click",this.link.anchorProcess),this.link.selectedAnchor=this.selection.getBlock(),this.selection.save(),this.modal.show(),e.link.selectedAnchor&&e.link.selectedAnchor.id.length&&e.$modal.find("#redactor-anchor-id").val(e.link.selectedAnchor.id)},anchorProcess:function(){var t=this.$modal.find("#redactor-anchor-id").val();return this.$editor.find("#"+t).length&&t!==this.link.selectedAnchor.id?(this.$modal.find("p.error").remove().end().find("#redactor-anchor-id").addClass("error").after('<p class="error">ID is already in use. Please choose a different ID.</p>'),!1):(this.modal.close(),this.selection.restore(),this.fs.setInlineStyle(function(i){e(i[0]).attr("id",t)}),void 0)},anchorRemove:function(){this.fs.setInlineStyle(function(t){e(t[0]).removeAttr("id")})},toggleAnchors:function(){this.$editor.hasClass("redactor-hide-anchors")?this.$editor.removeClass("redactor-hide-anchors"):this.$editor.addClass("redactor-hide-anchors")},hasImage:function(){var t=!1,i=this.selection.getNodes();return e.each(i,function(e,i){return"IMG"===i.tagName?(t=!0,!1):void 0}),t},execUnlink:function(t,i){this.buffer.set();var n=this.currentOrParentIs("A");return n?(e(n).replaceWith(e(n).html()),this.code.sync(),this.callback("execCommand",t,i),void 0):void 0},getData:function(){this.link.$node=!1;var t=e(this.selection.getCurrent()).closest("a",this.$editor[0]);0!==t.length&&"A"===t[0].tagName?(this.link.$node=t,this.link.url=t.attr("href")||"",this.link.text=t.text(),this.link.target=t.attr("target")):(this.link.text=this.sel.toString(),this.link.url="",this.link.target="")},unlink:function(t){e(".redactor-link-tooltip").remove(),"undefined"!=typeof t&&t.preventDefault&&t.preventDefault();var i=this.selection.getNodes();if(i){this.buffer.set();for(var n=i.length,s=0;n>s;s++){var o=e(i[s]).closest("a",this.$editor[0]);o.replaceWith(o.contents())}e(".redactor-link-tooltip").remove(),this.code.sync()}}},s}),i("modules/linkify",["jquery"],function(e){"use strict";function t(){}return t.prototype={isKey:function(e){return e===this.keyCode.ENTER||e===this.keyCode.SPACE},isEnabled:function(){return this.opts.convertLinks&&(this.opts.convertUrlLinks||this.opts.convertImageLinks||this.opts.convertVideoLinks)&&!this.utils.isCurrentOrParent("PRE")},format:function(){var t=this.linkify,i=this.opts;this.$editor.find(":not(iframe,img,a,pre)").addBack().contents().filter(function(){return 3===this.nodeType&&""!==e.trim(this.nodeValue)&&!e(this).parent().is("pre")&&(this.nodeValue.match(i.linkify.regexps.youtube)||this.nodeValue.match(i.linkify.regexps.vimeo)||this.nodeValue.match(i.linkify.regexps.image)||this.nodeValue.match(i.linkify.regexps.url))}).each(function(){var n=e(this).text(),s=n;i.convertVideoLinks&&(s.match(i.linkify.regexps.youtube)||s.match(i.linkify.regexps.vimeo))?s=t.convertVideoLinks(s):i.convertImageLinks&&s.match(i.linkify.regexps.image)?s=t.convertImages(s):i.convertUrlLinks&&(s=t.convertLinks(s)),e(this).before(n.replace(n,s)).remove()}),this.linkify.after()},convertVideoLinks:function(e){var t='<iframe width="500" height="281" src="',i='" frameborder="0" allowfullscreen></iframe>';return e.match(this.opts.linkify.regexps.youtube)&&(e=e.replace(this.opts.linkify.regexps.youtube,t+"//www.youtube.com/embed/$1"+i)),e.match(this.opts.linkify.regexps.vimeo)&&(e=e.replace(this.opts.linkify.regexps.vimeo,t+"//player.vimeo.com/video/$2"+i)),e},convertImages:function(e){var t=e.match(this.opts.linkify.regexps.image);return t&&(e=e.replace(e,'<img src="'+t+'" />')),e},convertLinks:function(t){var i=t.match(this.opts.linkify.regexps.url);if(i){i=e.grep(i,function(t,n){return e.inArray(t,i)===n});for(var n=i.length,s=0;n>s;s++){var o=i[s],r=o,a=this.opts.linkProtocol+"://";null!==o.match(/(https?|ftp):\/\//i)&&(a=""),r.length>this.opts.linkSize&&(r=r.substring(0,this.opts.linkSize)+"..."),r=decodeURIComponent(r);var l="\\b";-1!==e.inArray(o.slice(-1),["/","&","="])&&(l="");var c=new RegExp("("+o.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")+l+")","g");t=t.replace(c,'<a href="'+a+e.trim(o)+'">'+e.trim(r)+"</a>")}}return t},after:function(){this.observe.load(),this.code.sync()}},t}),i("modules/list",["jquery"],function(e){"use strict";function t(){}return t.prototype={toggle:function(t){this.placeholder.remove(),this.utils.browser("msie")||this.$editor[0].focus(),this.buffer.set(),this.selection.save();var i=this.selection.getParent(),n=e(i).closest("ol, ul",this.$editor[0]);!this.utils.isRedactorParent(n)&&0!==n.length&&(n=!1);var s,o,r=!1;if(n&&n.length){r=!0;var a=n[0].tagName;s="orderedlist"===t&&"UL"===a,o="unorderedlist"===t&&"OL"===a}s?this.utils.replaceToTag(n,"ol"):o?this.utils.replaceToTag(n,"ul"):r?this.list.remove(t):this.list.insert(t),this.selection.restore(),this.code.sync()},insert:function(t){var i=this.selection.getParent(),n=this.selection.getCurrent(),s=e(n).closest("td, th",this.$editor[0]);this.utils.browser("msie")&&this.opts.linebreaks?this.list.insertInIe(t):document.execCommand("insert"+t);var o=e(this.selection.getParent()).closest("ol, ul",this.$editor[0]);if(0!==s.length){var r=s.prev(),a=s.html();s.html(""),!r||1!==r.length||"TD"!==r[0].tagName&&"TH"!==r[0].tagName?e(i).prepend(s):e(r).after(s),s.html(a)}if(this.utils.isEmpty(o.find("li").text())){var l=o.children("li");l.find("br").remove(),l.append(this.selection.getMarkerAsHtml())}if(o.length){var c=o.parent();this.utils.isRedactorParent(c)&&"LI"!==c[0].tagName&&this.utils.isBlock(c[0])&&c.replaceWith(c.contents())}this.utils.browser("msie")||this.$editor[0].focus(),this.clean.clearUnverified()},insertInIe:function(t){var i=this.selection.wrap("div"),n=e(i).html(),s=e("orderedlist"===t?"<ol>":"<ul>"),o=e("<li>");if(""===e.trim(n))o.append(this.selection.getMarkerAsHtml()),s.append(o),this.$editor.find("#selection-marker-1").replaceWith(s);else{var r=n.split(/<br\s?\/?>/gi);if(r)for(var a=0;a<r.length;a++)""!==e.trim(r[a])&&s.append(e("<li>").html(r[a]));else o.append(n),s.append(o);e(i).replaceWith(s)}},remove:function(t){document.execCommand("insert"+t);var i=e(this.selection.getCurrent());this.indent.fixEmptyIndent(),!this.opts.linebreaks&&0===i.closest("li, th, td",this.$editor[0]).length&&(document.execCommand("formatblock",!1,"p"),this.$editor.find("ul, ol, blockquote").each(e.proxy(this.utils.removeEmpty,this)));var n=e(this.selection.getCurrent()).closest("table",this.$editor[0]),s=n.prev();!this.opts.linebreaks&&0!==n.length&&0!==s.length&&"BR"===s[0].tagName&&s.remove(),this.clean.clearUnverified()}},t}),i("modules/media",["jquery"],function(e){"use strict";function t(){}return t.prototype={initialize:function(){var t=this;this.$element.on("observed.redactor.video observed.redactor.audio observed.redactor.iframe",this.media.setEditable),this.$toolbar.find("a.re-video").removeClass("re-video").addClass("re-embed"),this.$toolbar.find("a.re-media").addClass("re-video").removeClass("redactor-btn-image"),this.$box.on("resize",e.proxy(function(){clearTimeout(this.media.resizeDebouncer),this.media.resizeDebouncer=setTimeout(this.media.resizeMediaIframes,100)},this)),e(window).on("blur.redactorIframeClick",function(){t.media.iFrameMouseOver&&t.fs.loadEditableControls({element:t.media.iFrameMouseOver,buttons:t.media.iFrameButtons})}),this.opts.media=e.extend({onMediaBrowseReturn:function(e){return e},onFileBrowseReturn:function(e){return e}},this.opts.media),this.opts.modal_media_edit='<section class="redactor-media-modal">				<div class="redactor-media-modalleftcol">					<div id="redactor-media-preview">					</div>					<fieldset>						<legend>Size</legend>						<label><input id="redactor-media-width" type="number" min="0" max="100" class="smallinput" value="100" />% Width</label>						<div class="redactor-tab redactor-tab1">							<select id="redactor-media-aspect-ratio-options" name="redactor-media-aspect-ratio">								<option id="redactor-media-portrait-aspect-ratio"  type="radio" value="1.3333">Portrait (4:3)</option>								<option id="redactor-media-portrait2-aspect-ratio" value="1.5">Portrait (3:2)</option>								<option id="redactor-media-landscape-aspect-ratio" selected="selected" value=".5625">Landscape (16:9)</option>								<option id="redactor-media-landscape2-aspect-ratio" value=".75">Landscape (4:3)</option>								<option id="redactor-media-landscape3-aspect-ratio" value=".6667">Landscape (3:2)</option>							</select>						</div>					</fieldset>					<fieldset>						<legend>Margin</legend>						<input id="redactor-media-marginTop" type="number" min="0" class="smallinput" />							<label><select id="redactor-media-marginTop-unit"><option>px</option><option>em</option><option>%</option></select>							Top							</label>						<input id="redactor-media-marginRight" type="number" min="0" class="smallinput" />							<label><select id="redactor-media-marginRight-unit"><option>px</option><option>em</option><option>%</option></select>							Right							</label>						<input id="redactor-media-marginBottom" type="number" min="0" class="smallinput" />							<label><select id="redactor-media-marginBottom-unit"><option>px</option><option>em</option><option>%</option></select>							Bottom							</label>						<input id="redactor-media-marginLeft" type="number" min="0" class="smallinput" />							<label><select id="redactor-media-marginLeft-unit"><option>px</option><option>em</option><option>%</option></select>							Left							</label>					</fieldset>				</div>				<div class="redactor-media-modalrightcol">					<fieldset>						<div class="redactor-tab redactor-tab1">							<label>Media:</label>							<div class="redactor-media-selected">								<span class="redactor-media-selected-text">Please select from Media Manager</span>								<button type="button" class="redactor-media-browse" title="Browse for media">'+this.opts.curLang.browse+'</button>							</div>						</div>						<div class="redactor-tab redactor-tab2" style="display: none;">							<label>Other Media:								<span class="redactor-other-media-selected-text"></span>							</label>							<div class="redactor-other-media-selected">								<input type="text" id="redactor-media-url" name="redactor-media-url"/>								<button type="button" class="redactor-other-media-browse" title="Browse for media">'+this.opts.curLang.browse+'</button>								<p class="error" style="display:none;">Only Flash, HTML5 Video & Audio files are accepted.</p>							</div>						</div>					</fieldset>					<fieldset>						<label for="redactor-media-align">Alignment</label>						<ul id="redactor-media-align">							<li><input id="redactor-media-align-none" name="redactor-media-align" type="radio" value="none"><label for="redactor-media-align-none">None</label></li>							<li><input id="redactor-media-align-left" name="redactor-media-align" type="radio" value="left"><label for="redactor-media-align-left">Left</label></li>							<li><input id="redactor-media-align-right" name="redactor-media-align" type="radio" value="right"><label for="redactor-media-align-right">Right</label></li>						</ul>					</fieldset>					<fieldset>						<label for="redactor-media-id">ID</label><input id="redactor-media-id" />					</fieldset>					<fieldset>						<label for="redactor-media-name">Name</label><input id="redactor-media-name" />					</fieldset>				</div>				<div style="clear:both"></div>				</section>';
},show:function(t){var i=this;this.modal.addTemplate("media",this.opts.modal_media_edit),this.modal.load("media",this.opts.curLang.media+" Settings",600);var n=this.modal.getModal();this.modal.createTabber(n),this.modal.addTab(1,"Media Manager","active"),this.modal.addTab(2,"Other Media"),this.modal.createCancelButton();var s=this.modal.createDeleteButton("Delete"),o=this.modal.createActionButton("Save");if(t=t||"media","string"==typeof t&&this.selection.save(),e("#redactor-media-url,#redactor-media-aspect-ratio-options",this.$modal).on("change",function(){var t=e("#redactor-media-url").val(),n=e("#redactor-media-aspect-ratio-options").val();e("#redactor-media-preview").empty(),i.media.isVideo(t)?e("#redactor-media-preview").append('<video controls="controls" src="'+t+'"/>'):i.media.isMediaEmbed(t)?(t=i.media.formatMediaURL(t,n),e("#redactor-media-preview").append('<iframe src="'+t+'" data-aspectratio="'+n+'" style="width:100%; height:'+e("#redactor-media-preview").width()*n+'px" scrolling="no" frameborder="0" class="fsEmbeddedMedia" />')):i.media.isAudio(t)&&e("#redactor-media-preview").append('<audio src="'+t+'"/>')}),1===t.length){var r=t.attr("src"),a=t[0].style,l=parseInt(a.width)||100,c=/\d+/,d=/\D+$/,h=t.attr("data-aspectratio")||".75";l>100&&(l=100),this.media.isMediaEmbed(r)||this.modal.$tabber.children(":eq(1)").click(),e("#redactor-media-url").val(r),e("#redactor-media-id").val(t.attr("id")),e("#redactor-media-name").val(t.attr("name")),e("#redactor-media-width").val(l),e("input[name=redactor-media-align][value="+t.css("float")+"]").click(),e("#redactor-media-aspect-ratio-options").val(h),e(".redactor-media-selected-text",this.$modal).text(t.attr("data-media-name")||"Please select from media manager"),e("#redactor-media-url",this.$modal).change(),e("input[type=number]",i.$modal).on("keydown",function(e){(e.keyCode>57||e.keyCode<48)&&8!==e.keyCode&&9!==e.keyCode&&37!==e.keyCode&&39!==e.keyCode&&46!==e.keyCode&&e.preventDefault()}),e("#redactor-media-marginTop",i.$modal).val(a.marginTop.match(c)||0),e("#redactor-media-marginRight",i.$modal).val(a.marginRight.match(c)||0),e("#redactor-media-marginBottom",i.$modal).val(a.marginBottom.match(c)||0),e("#redactor-media-marginLeft",i.$modal).val(a.marginLeft.match(c)||0),e("#redactor-media-marginTop-unit",i.$modal).val(a.marginTop.match(d)||"px"),e("#redactor-media-marginRight-unit",i.$modal).val(a.marginRight.match(d)||"px"),e("#redactor-media-marginBottom-unit",i.$modal).val(a.marginBottom.match(d)||"px"),e("#redactor-media-marginLeft-unit",i.$modal).val(a.marginLeft.match(d)||"px")}this.opts.browseFileURL.length>0?this.$modal.on("click",".redactor-other-media-browse",e.proxy(function(t){return t.preventDefault(),this.fs.modalIframeBrowse.call(this,this.opts.browseFileURL,e.proxy(function(t){t=this.opts.media.onFileBrowseReturn(t),e("#redactor-media-url").val(t.path).change()},this)),!1},this)):this.$modal.find(".redactor-other-media-browse").hide(),this.opts.browseMediaURL.length>0?this.$modal.on("click",".redactor-media-browse",e.proxy(function(t){return t.preventDefault(),this.fs.modalIframeBrowse.call(this,this.opts.browseMediaURL,e.proxy(function(t){t=this.opts.media.onMediaBrowseReturn(t),e("#redactor-media-url").val(t.path).change(),e(".redactor-media-selected-text",this.$modal).text(t.name)},this)),!1},this)):(this.modal.$tabber.children(":eq(1)").click(),this.$modal.find("#redactor-modal-tabber").hide()),o.on("click",function(){i.media.save(t)}),s.on("click",function(){t.remove(),i.modal.close()}),this.modal.show()},save:function(t){var i,n=e("input[name=redactor-media-align]:checked").val(),s=e("#redactor-media-aspect-ratio-options").val(),o=!1,r=e("#redactor-media-id").val(),a=e("#redactor-media-width").val(),l=e("#redactor-media-marginTop").val()||0,c=e("#redactor-media-marginRight").val()||0,d=e("#redactor-media-marginBottom").val()||0,h=e("#redactor-media-marginLeft").val()||0,u=e("#redactor-media-marginTop-unit").val(),p=e("#redactor-media-marginRight-unit").val(),f=e("#redactor-media-marginBottom-unit").val(),m=e("#redactor-media-marginLeft-unit").val(),g=e("#redactor-media-name").val(),v=e(".redactor-media-selected-text",this.$modal).text(),b=e.trim(e("#redactor-media-url").val());return this.media.isVideo(b)||this.media.isMediaEmbed(b)||this.media.isAudio(b)?(this.selection.restore(),b.length&&("string"==typeof t&&(o=!0),this.media.isMediaEmbed(b)?(i=e('<iframe scrolling="no" frameborder="0" class="fsEmbeddedMedia fsEmbeddedMediaResponsive"></iframe>'),b=this.media.formatMediaURL(b,s)):this.media.isVideo(b)?i=e('<video controls="controls">HTML Video is not supported by your browser.</video>'):this.media.isAudio(b)&&(i=e('<audio controls="controls">HTML Audio is not supported by your browser.</audio>')),!o&&t[0].tagName!==i.tagName&&(e.each(t[0].attributes,function(e,t){"undefined"==typeof i[0].attributes[t.name]&&i.attr(t.name,t.value)}),t.replaceWith(i)),t=i,t.attr("src",b).css("float",n).css("margin",l+c+d+h>0?l+u+" "+c+p+" "+d+f+" "+h+m:""),r.length&&this.fs.setAttr(t,"id",r),g.length&&this.fs.setAttr(t,"name",g),"IFRAME"===t[0].tagName&&t.attr("data-aspectratio",s),v.length&&this.fs.setAttr(t,"data-media-name",v),t[0].style.width=a+"%",o&&this.range.insertNode(t[0])),this.code.sync(),this.modal.close(),this.observe.images(),this.media.resizeMediaIframes(),void 0):(e(".redactor-other-media-selected p.error",this.$modal).show(),e("#redactor-media-url").addClass("error"),!1)},formatMediaURL:function(e,t){return e.replace(/&responsive=true/gi,"").replace(/&aspectRatio=[^&]+/gi,"")+"&aspectRatio="+t+"&responsive=true"},setEditable:function(t,i){var n=this,s=e(i),o=[];o.push({name:"Settings","class":"re-cog",title:"Edit Media Properties",onClick:function(){return n.media.show(s),!1}}),o.push({name:"Delete",title:"Delete","class":"re-trash",onClick:function(){return confirm("Are you sure you want to delete this media object?")?(s.remove(),void n.code.sync()):!1}}),"IFRAME"===s[0].tagName&&s.hasClass("fsEmbeddedMedia")?s.off("mouseover.redactorIframeOver").on("mouseover.redactorIframeOver",function(){n.media.iFrameMouseOver=s,n.media.iFrameButtons=o}).off("mouseout.redactorIframeOut").on("mouseout.redactorIframeOut",function(){n.media.iFrameMouseOver=!1,n.media.iFrameButtons=!1}):s.off(".editcontrols").on("click.editcontrols touchstart.editcontrols",function(e){e.stopPropagation(),n.fs.loadEditableControls({element:s,buttons:o})})},isVideo:function(e){return/\.(mp4|webm|ogg(\?.*)?)$/.test(e)},isMediaEmbed:function(e){return/\.(cfm(\?.*)?)$/.test(e)},isAudio:function(e){return/\.(mp3|wav(\?.*)?)$/.test(e)},resizeMediaIframes:function(){this.$editor.find(".fsEmbeddedMediaResponsive").each(function(){var t=e(this);t.height(parseInt(t.width()*t.data("aspectratio")))})}},t}),i("modules/modal",["jquery"],function(e){"use strict";function t(){}return t.prototype={callbacks:{},loadTemplates:function(){this.opts.modal={imageEdit:String()+'<section id="redactor-modal-image-edit"><label>'+this.lang.get("title")+'</label><input type="text" id="redactor-image-title" /><label class="redactor-image-link-option">'+this.lang.get("link")+'</label><input type="text" id="redactor-image-link" class="redactor-image-link-option" /><label class="redactor-image-link-option"><input type="checkbox" id="redactor-image-link-blank"> '+this.lang.get("link_new_tab")+'</label><label class="redactor-image-position-option">'+this.lang.get("image_position")+'</label><select class="redactor-image-position-option" id="redactor-image-align"><option value="none">'+this.lang.get("none")+'</option><option value="left">'+this.lang.get("left")+'</option><option value="center">'+this.lang.get("center")+'</option><option value="right">'+this.lang.get("right")+"</option></select></section>",image:String()+'<section id="redactor-modal-image-insert"><div id="redactor-modal-image-droparea"></div></section>',file:String()+'<section id="redactor-modal-file-insert"><div id="redactor-modal-file-upload-box"><label>'+this.lang.get("filename")+'</label><input type="text" id="redactor-filename" /><br><br><div id="redactor-modal-file-upload"></div></div></section>',link:String()+'<section id="redactor-modal-link-insert"><label>URL</label><input type="url" id="redactor-link-url" /><label>'+this.lang.get("text")+'</label><input type="text" id="redactor-link-url-text" /><label><input type="checkbox" id="redactor-link-blank"> '+this.lang.get("link_new_tab")+"</label></section>"}},addCallback:function(e,t){this.modal.callbacks[e]=t},createTabber:function(t){this.modal.$tabber=e("<div>").attr("id","redactor-modal-tabber"),t.prepend(this.modal.$tabber)},addTab:function(t,i,n){var s=e('<a href="#" rel="tab'+t+'">').text(i);n&&s.addClass("active");var o=this;s.on("click",function(t){t.preventDefault(),e(".redactor-tab").hide(),e(".redactor-"+e(this).attr("rel")).show(),o.modal.$tabber.find("a").removeClass("active"),e(this).addClass("active")}),this.modal.$tabber.append(s)},addTemplate:function(e,t){this.opts.modal[e]=t},getTemplate:function(e){return this.opts.modal[e]},getModal:function(){return this.$modalBody.find("section")},load:function(e,t,i){this.modal.templateName=e,this.modal.width=i,this.modal.build(),this.modal.enableEvents(),this.modal.setTitle(t),this.modal.setDraggable(),this.modal.setContent(),"undefined"!=typeof this.modal.callbacks[e]&&this.modal.callbacks[e].call(this)},show:function(){this.utils.isMobile()&&!this.utils.browser("msie")&&document.activeElement.blur(),e(document.body).addClass("body-redactor-hidden"),this.utils.isMobile()?this.modal.showOnMobile():this.modal.showOnDesktop(),this.$modalOverlay.show(),this.$modalBox.show(),this.modal.setButtonsWidth(),this.utils.saveScroll(),this.utils.isMobile()||(setTimeout(e.proxy(this.modal.showOnDesktop,this),0),e(window).on("resize.redactor-modal",e.proxy(this.modal.resize,this))),this.core.setCallback("modalOpened",this.modal.templateName,this.$modal),e(document).off("focusin.modal"),this.$modal.find("input[type=text],input[type=url],input[type=email]").on("keydown.redactor-modal",e.proxy(this.modal.setEnter,this))},showOnDesktop:function(){var t=this.$modal.outerHeight(),i=window.innerHeight,n=e(window).width();return this.modal.width>n?void this.$modal.css({width:"96%",marginTop:i/2-t/2+"px"}):void(t>i?this.$modal.css({width:this.modal.width+"px",marginTop:"20px"}):this.$modal.css({width:this.modal.width+"px",marginTop:i/2-t/2+"px"}))},showOnMobile:function(){this.$modal.css({width:"96%",marginTop:"2%"})},resize:function(){this.utils.isMobile()?this.modal.showOnMobile():this.modal.showOnDesktop()},setTitle:function(e){this.$modalHeader.html(e)},setContent:function(){this.$modalBody.html(this.modal.getTemplate(this.modal.templateName))},setDraggable:function(){"undefined"!=typeof e.fn.draggable&&(this.$modal.draggable({handle:this.$modalHeader}),this.$modalHeader.css("cursor","move"))},setEnter:function(e){13===e.which&&(e.preventDefault(),this.$modal.find("button.redactor-modal-action-btn").click())},createCancelButton:function(){var t=e("<button>").addClass("redactor-modal-btn redactor-modal-close-btn").html(this.lang.get("cancel"));t.on("click",e.proxy(this.modal.close,this)),this.$modalFooter.append(t)},createDeleteButton:function(e){return this.modal.createButton(e,"delete")},createActionButton:function(e){return this.modal.createButton(e,"action")},createButton:function(t,i){var n=e("<button>").addClass("redactor-modal-btn").addClass("redactor-modal-"+i+"-btn").html(t);return this.$modalFooter.append(n),n},setButtonsWidth:function(){var e=this.$modalFooter.find("button"),t=e.length;0!==t&&e.css("width",100/t+"%")},build:function(){this.modal.buildOverlay(),this.$modalBox=e('<div id="redactor-modal-box" />').hide(),this.$modal=e('<div id="redactor-modal" />'),this.$modalHeader=e("<header />"),this.$modalClose=e('<span id="redactor-modal-close" />').html("&times;"),this.$modalBody=e('<div id="redactor-modal-body" />'),this.$modalFooter=e("<footer />"),this.$modal.append(this.$modalHeader),this.$modal.append(this.$modalClose),this.$modal.append(this.$modalBody),this.$modal.append(this.$modalFooter),this.$modalBox.append(this.$modal),this.$modalBox.appendTo(document.body)},buildOverlay:function(){this.$modalOverlay=e('<div id="redactor-modal-overlay">').hide(),e("body").prepend(this.$modalOverlay)},enableEvents:function(){this.$modalClose.on("click.redactor-modal",e.proxy(this.modal.close,this)),e(document).on("keyup.redactor-modal",e.proxy(this.modal.closeHandler,this)),this.$editor.on("keyup.redactor-modal",e.proxy(this.modal.closeHandler,this)),this.$modalBox.on("click.redactor-modal",e.proxy(this.modal.close,this))},disableEvents:function(){this.$modalClose.off("click.redactor-modal"),e(document).off("keyup.redactor-modal"),this.$editor.off("keyup.redactor-modal"),this.$modalBox.off("click.redactor-modal"),e(window).off("resize.redactor-modal")},closeHandler:function(e){e.which===this.keyCode.ESC&&this.modal.close(!1)},close:function(t){if(t){if(!e(t.target).hasClass("redactor-modal-close-btn")&&t.target!==this.$modalClose[0]&&t.target!==this.$modalBox[0])return;t.preventDefault()}this.$modalBox&&(this.modal.disableEvents(),this.$modalOverlay.remove(),this.$modalBox.fadeOut("fast",e.proxy(function(){this.$modalBox.remove(),setTimeout(e.proxy(this.utils.restoreScroll,this),0),void 0!==t&&this.selection.restore(),e(document.body).removeClass("body-redactor-hidden"),this.core.setCallback("modalClosed",this.modal.templateName)},this)))}},t}),i("modules/observe",["jquery"],function(e){"use strict";function t(){}return t.prototype={load:function(){this.observe.images(),this.observe.links()},buttons:function(t,i){var n=this.selection.getCurrent(),s=this.selection.getParent();if(t!==!1?this.button.setInactiveAll():this.button.setInactiveAll(i),t===!1&&"html"!==i)return void(-1!==e.inArray(i,this.opts.activeButtons)&&this.button.toggleActive(i));e.each(this.opts.activeButtonsStates,e.proxy(function(t,i){var o=e(s).closest(t,this.$editor[0]),r=e(n).closest(t,this.$editor[0]);(0===o.length||this.utils.isRedactorParent(o))&&this.utils.isRedactorParent(r)&&(0!==o.length||0!==r.closest(t,this.$editor[0]).length)&&this.button.setActive(i)},this));var o=e(s).closest(this.opts.alignmentTags.toString().toLowerCase(),this.$editor[0]);if(this.utils.isRedactorParent(s)&&o.length){var r=""===o.css("text-align")?"left":o.css("text-align");this.button.setActive("align"+r)}},addButton:function(e,t){this.opts.activeButtons.push(t),this.opts.activeButtonsStates[e]=t},images:function(){var t=this;this.$editor.find("img,video,iframe,audio,table").each(function(i,n){var s=e(n);s.closest("a").on("click",function(e){e.preventDefault()}),t.utils.browser("msie")&&s.attr("unselectable","on"),t.$element.trigger("observed.redactor."+n.tagName.toLowerCase(),n)})},links:function(){this.opts.linkTooltip&&(this.$editor.find("a").on("touchstart.redactor."+this.uuid+" click.redactor."+this.uuid,e.proxy(this.observe.showTooltip,this)),this.$editor.on("touchstart.redactor."+this.uuid+" click.redactor."+this.uuid,e.proxy(this.observe.closeTooltip,this)),e(document).on("touchstart.redactor."+this.uuid+" click.redactor."+this.uuid,e.proxy(this.observe.closeTooltip,this)))},getTooltipPosition:function(e){return e.offset()},showTooltip:function(t){var i=e(t.target);if(t.stopPropagation(),"IMG"!==i[0].tagName&&("A"!==i[0].tagName&&(i=i.closest("a",this.$editor[0])),"A"===i[0].tagName)){var n=i,s=this.observe.getTooltipPosition(n),o=e('<span class="redactor-link-tooltip"></span>'),r=n.attr("href");void 0===r&&(r=""),r.length>24&&(r=r.substring(0,24)+"...");var a=e('<a href="'+n.attr("href")+'" target="_blank" />').html(r).addClass("redactor-link-tooltip-action"),l=e('<a href="#" />').html(this.lang.get("edit")).on("click",e.proxy(this.link.show,this)).addClass("redactor-link-tooltip-action"),c=e('<a href="#" />').html(this.lang.get("unlink")).on("click",e.proxy(this.link.unlink,this)).addClass("redactor-link-tooltip-action");o.append(a).append(" | ").append(l).append(" | ").append(c),o.css({top:s.top+(parseInt(n.css("line-height"),10)||parseInt(n.css("font-size"),10))+"px",left:s.left+"px"}),e(".redactor-link-tooltip").remove(),e(document.body).append(o)}},closeTooltip:function(t){t=t.originalEvent||t;var i=t.target,n=e(i).closest("a",this.$editor[0]);0!==n.length&&"A"===n[0].tagName&&"A"!==i.tagName||"A"===i.tagName&&this.utils.isRedactorParent(i)||e(i).hasClass("redactor-link-tooltip-action")||e(".redactor-link-tooltip").remove()}},t}),i("modules/paragraphize",["jquery"],function(e){"use strict";function t(){}return t.prototype={load:function(t){return this.opts.linebreaks?t:""===t||"<p></p>"===t?this.opts.emptyHtml:(t+="\n",this.paragraphize.safes=[],this.paragraphize.z=0,t=t.replace(/(<br\s?\/?>){1,}\n?<\/blockquote>/gi,"</blockquote>"),t=this.paragraphize.getSafes(t),t=this.paragraphize.getSafesComments(t),t=this.paragraphize.replaceBreaksToNewLines(t),t=this.paragraphize.replaceBreaksToParagraphs(t),t=this.paragraphize.clear(t),t=this.paragraphize.restoreSafes(t),t=t.replace(new RegExp("<br\\s?/?>\n?<("+this.opts.paragraphizeBlocks.join("|")+")([^>]*)>","gi"),"<p><br /></p>\n<$1$2>"),e.trim(t))},getSafes:function(t){var i=e("<div />").append(t);return i.find("blockquote p").replaceWith(function(){return e(this).append("<br />").contents()}),t=i.html(),i.find(this.opts.paragraphizeBlocks.join(", ")).each(e.proxy(function(e,i){this.paragraphize.z++,this.paragraphize.safes[this.paragraphize.z]=i.outerHTML,t=t.replace(i.outerHTML,"\n{replace"+this.paragraphize.z+"}")},this)),t},getSafesComments:function(t){var i=t.match(/<!--([\w\W]*?)-->/gi);return i?(e.each(i,e.proxy(function(e,i){this.paragraphize.z++,this.paragraphize.safes[this.paragraphize.z]=i,t=t.replace(i,"\n{replace"+this.paragraphize.z+"}")},this)),t):t},restoreSafes:function(t){return e.each(this.paragraphize.safes,function(e,i){i="undefined"!=typeof i?i.replace(/\$/g,"&#36;"):i,t=t.replace("{replace"+e+"}",i)}),t},replaceBreaksToParagraphs:function(e){var t=e.split(new RegExp("\n","g"),-1);if(e="",t)for(var i=t.length,n=0;i>n;n++){if(!t.hasOwnProperty(n))return;-1===t[n].search("{replace")?(t[n]=t[n].replace(/<p>\n\t?<\/p>/gi,""),t[n]=t[n].replace(/<p><\/p>/gi,""),""!==t[n]&&(e+="<p>"+t[n].replace(/^\n+|\n+$/g,"")+"</p>")):e+=t[n]}return e},replaceBreaksToNewLines:function(e){return e=e.replace(/<br \/>\s*<br \/>/gi,"\n\n"),e=e.replace(/<br\s?\/?>\n?<br\s?\/?>/gi,"\n"),e=e.replace(new RegExp("\r\n","g"),"\n"),e=e.replace(new RegExp("\r","g"),"\n"),e=e.replace(new RegExp("/\n\n+/"),"g","\n\n")},clear:function(e){return e=e.replace(new RegExp("</blockquote></p>","gi"),"</blockquote>"),e=e.replace(new RegExp("<p></blockquote>","gi"),"</blockquote>"),e=e.replace(new RegExp("<p><blockquote>","gi"),"<blockquote>"),e=e.replace(new RegExp("<blockquote></p>","gi"),"<blockquote>"),e=e.replace(new RegExp("<p><p ","gi"),"<p "),e=e.replace(new RegExp("<p><p>","gi"),"<p>"),e=e.replace(new RegExp("</p></p>","gi"),"</p>"),e=e.replace(new RegExp("<p>\\s?</p>","gi"),""),e=e.replace(new RegExp("\n</p>","gi"),"</p>"),e=e.replace(new RegExp("<p>	?	?\n?<p>","gi"),"<p>"),e=e.replace(new RegExp("<p>	*</p>","gi"),"")}},t}),i("modules/paste",["jquery"],function(e){"use strict";function t(){}return t.prototype={init:function(){return this.opts.cleanOnPaste?(this.rtePaste=!0,this.buffer.set(),this.selection.save(),this.utils.saveScroll(),this.paste.createPasteBox(),e(window).on("scroll.redactor-freeze",e.proxy(function(){e(window).scrollTop(this.saveBodyScroll)},this)),setTimeout(e.proxy(function(){var t=this.$pasteBox.html();this.$pasteBox.remove(),this.selection.restore(),this.utils.restoreScroll(),this.paste.insert(t),e(window).off("scroll.redactor-freeze"),this.linkify.isEnabled()&&this.linkify.format()},this),1),void 0):void setTimeout(e.proxy(this.code.sync,this),1)},createPasteBox:function(){this.$pasteBox=e("<div>").html("<p></p>").attr("contenteditable","true").css({position:"fixed",width:0,top:0,left:"-9999px"}),this.utils.browser("msie")?this.$box.append(this.$pasteBox):e("body").append(this.$pasteBox),this.$pasteBox[0].focus()},insert:function(t){t=this.core.setCallback("pasteBefore",t),t=this.utils.isSelectAll()?this.clean.onPaste(t,!1):this.clean.onPaste(t),t=this.core.setCallback("paste",t),t=this.paragraphize.load(t),this.utils.isSelectAll()?this.insert.set(t,!1):this.insert.html(t,!1),this.utils.disableSelectAll(),this.rtePaste=!1,setTimeout(e.proxy(this.clean.clearUnverified,this),10),setTimeout(e.proxy(function(){var t=this.$editor.find("span");e.each(t,function(t,i){var n=i.innerHTML.replace(/[\u200B-\u200D\uFEFF]/,"");""===n&&0===i.attributes.length&&e(i).remove()})},this),10)}},t}),i("modules/placeholder",["jquery"],function(e){"use strict";function t(){}return t.prototype={enable:function(){this.placeholder.is()&&(this.$editor.attr("placeholder",this.$element.attr("placeholder")),this.placeholder.toggle(),this.$editor.on("keyup.redactor-placeholder",e.proxy(this.placeholder.toggle,this)))},toggle:function(){var e="removeClass";this.utils.isEmpty(this.$editor.html(),!1)&&(e="addClass"),this.$editor[e]("redactor-placeholder")},remove:function(){this.$editor.removeClass("redactor-placeholder")},is:function(){return this.opts.placeholder?this.$element.attr("placeholder",this.opts.placeholder):"undefined"!=typeof this.$element.attr("placeholder")&&""!==this.$element.attr("placeholder")}},t}),i("modules/progress",["jquery"],function(e){"use strict";function t(){}return t.prototype={show:function(){e(document.body).append(e('<div id="redactor-progress"><span></span></div>')),e("#redactor-progress").fadeIn()},hide:function(){e("#redactor-progress").fadeOut(1500,function(){e(this).remove()})}},t}),i("modules/resize",["jquery"],function(e){"use strict";function t(){}return t.prototype={initialize:function(){this.opts.resizable&&this.resize.buildResizer()},buildResizer:function(){return this.opts.resize===!1?!1:(this.$resizer=e('<span class="redactor-resize-handle"></span>'),this.$dimensions=e('<div class="redactor-resize-dimensions"></div>'),this.$box.append(this.$resizer),this.$box.append(this.$dimensions),this.$resizer.mousedown(e.proxy(this.resize.initResize,this)),void 0)},initResize:function(t){t.preventDefault&&t.preventDefault(),this.splitter=t.target,this.element_resize_parent=this.$box,this.opts.iframe?this.element_resize=this.$frame:this.element_resize=this.$editor,this.resize.stopResizeHdl=e.proxy(this.resize.stopResize,this),this.resize.startResizeHdl=e.proxy(this.resize.startResize,this),this.resize.resizeHdl=e.proxy(this.resize.doResize,this),e(document).mousedown(this.resize.startResizeHdl),e(document).mouseup(this.resize.stopResizeHdl),e(this.splitter).mouseup(this.resize.stopResizeHdl),this.null_pointX=!1,this.null_pointY=!1,this.h_new=!1,this.h=this.element_resize.height(),this.w_new=!1,this.w=this.element_resize.width()},startResize:function(){this.fs.hideEditableControls(),e(document).mousemove(this.resize.resizeHdl),this.$box.addClass("resize-outline"),this.$dimensions.show()},doResize:function(t){this.resize.resizeHoverIn.apply(this),t.preventDefault&&t.preventDefault();var i=t.pageY,n=t.pageX;this.null_pointX===!1&&(this.null_pointX=n),this.null_pointY===!1&&(this.null_pointY=i),this.h_new===!1&&(this.h_new=this.element_resize_parent.outerHeight()),this.w_new===!1&&(this.w_new=this.element_resize_parent.outerWidth());var s=this.h_new+i-this.null_pointY,o=this.w_new+n-this.null_pointX;204>=s&&(s=204),204>=o&&(o=204),s>=0&&(this.element_resize[0].style.height=s-this.$toolbar.height()+"px",this.element_resize_parent[0].style.height=s+"px",this.$textarea[0].style.height=s+"px"),o>=0&&(this.element_resize_parent[0].style.width=o+"px",this.$textarea[0].style.width=o+"px"),e(this.element_resize).trigger("resize")},stopResize:function(){e(document).unbind("mousemove",this.resize.resizeHdl),e(document).unbind("mousedown",this.resize.startResizeHdl),e(document).unbind("mouseup",this.resize.stopResizeHdl),e(this.splitter).unbind("mouseup",this.resize.stopResizeHdl),this.$box.removeClass("resize-outline"),this.$dimensions.hide()},resizeHoverIn:function(){this.$dimensions.show().html("<span>"+this.element_resize.width()+"px \xd7 "+this.element_resize.height()+"px </span>").css({top:this.element_resize.position().top,left:this.element_resize.position().left,lineHeight:this.element_resize.height()+"px",width:this.element_resize.outerWidth(),height:this.element_resize.outerHeight()})}},t}),i("modules/selection",["jquery"],function(e){"use strict";function t(){}return t.prototype={get:function(){this.sel=document.getSelection(),document.getSelection&&this.sel.getRangeAt&&this.sel.rangeCount?this.range=this.sel.getRangeAt(0):this.range=document.createRange()},addRange:function(){try{this.sel.removeAllRanges()}catch(e){}this.sel.addRange(this.range)},getCurrent:function(){var e=!1;return this.selection.get(),this.sel&&this.sel.rangeCount>0&&(e=this.sel.getRangeAt(0).startContainer),this.utils.isRedactorParent(e)},getParent:function(t){return t=t||this.selection.getCurrent(),t?this.utils.isRedactorParent(e(t).parent()[0]):!1},getBlock:function(t){for(t=t||this.selection.getCurrent();t;){if(this.utils.isBlockTag(t.tagName))return e(t).hasClass("redactor-editor")?!1:t;t=t.parentNode}return!1},getInlines:function(t,i){if(this.selection.get(),this.range&&this.range.collapsed)return!1;var n=[];t="undefined"==typeof t||t===!1?this.selection.getNodes():t;var s=this.opts.inlineTags;if(s.push("span"),"undefined"!=typeof i)for(var o=0;o<i.length;o++)s.push(i[o]);return e.each(t,e.proxy(function(t,i){-1!==e.inArray(i.tagName.toLowerCase(),s)&&n.push(i)},this)),0===n.length?!1:n},getInlinesTags:function(t){if(this.selection.get(),this.range&&this.range.collapsed)return!1;var i=[],n=this.selection.getNodes();return e.each(n,e.proxy(function(n,s){-1!==e.inArray(s.tagName.toLowerCase(),t)&&i.push(s)},this)),0===i.length?!1:i},getBlocks:function(t){if(this.selection.get(),this.range&&this.range.collapsed)return[this.selection.getBlock()];var i=[];return t="undefined"==typeof t?this.selection.getNodes():t,e.each(t,e.proxy(function(e,t){this.utils.isBlock(t)&&(this.selection.lastBlock=t,i.push(t))},this)),0===i.length?[this.selection.getBlock()]:i},getLastBlock:function(){return this.selection.lastBlock},getNodes:function(){this.selection.get();var t=this.selection.getNodesMarker(1),i=this.selection.getNodesMarker(2),n=this.range.cloneRange();if(this.range.collapsed===!1){var s=n.startContainer,o=n.startOffset;this.selection.setNodesMarker(n,i,!1),n.setStart(s,o),this.selection.setNodesMarker(n,t,!0)}else this.selection.setNodesMarker(n,t,!0),i=t;var r=[],a=0,l=this;this.$editor.find("*").each(function(){if(this===t){var n=e(this).parent();0!==n.length&&"BODY"!==n[0].tagName&&l.utils.isRedactorParent(n[0])&&r.push(n[0]),r.push(this),a=1}else a>0&&(r.push(this),a+=1);return this===i?!1:void 0});for(var c=[],d=r.length,h=0;d>h;h++)"nodes-marker-1"!==r[h].id&&"nodes-marker-2"!==r[h].id&&c.push(r[h]);return this.selection.removeNodesMarkers(),c},getNodesMarker:function(t){return e('<span id="nodes-marker-'+t+'" class="redactor-nodes-marker" data-verified="redactor">'+this.opts.invisibleSpace+"</span>")[0]},setNodesMarker:function(e,t,i){try{e.collapse(i),e.insertNode(t)}catch(n){}},removeNodesMarkers:function(){e(document).find("span.redactor-nodes-marker").remove(),this.$editor.find("span.redactor-nodes-marker").remove()},fromPoint:function(e,t){this.caret.setOffset(e,t)},wrap:function(e){if(this.selection.get(),this.range.collapsed)return!1;var t=document.createElement(e);return t.appendChild(this.range.extractContents()),this.range.insertNode(t),t},selectElement:function(e){this.caret.set(e,0,e,1)},selectAll:function(){this.selection.get(),this.range.selectNodeContents(this.$editor[0]),this.selection.addRange()},remove:function(){this.selection.get(),this.sel.removeAllRanges()},save:function(){this.selection.createMarkers()},createMarkers:function(){this.selection.get();var e=this.selection.getMarker(1);if(this.selection.setMarker(this.range,e,!0),this.range.collapsed===!1){var t=this.selection.getMarker(2);this.selection.setMarker(this.range,t,!1)}this.savedSel=this.$editor.html()},getMarker:function(t){return"undefined"==typeof t&&(t=1),e('<span id="selection-marker-'+t+'" class="redactor-selection-marker"  data-verified="redactor">'+this.opts.invisibleSpace+"</span>")[0]},getMarkerAsHtml:function(e){return this.utils.getOuterHtml(this.selection.getMarker(e))},setMarker:function(e,t,i){e=e.cloneRange();try{e.collapse(i),e.insertNode(t)}catch(n){this.focus.setStart()}},restore:function(){var e=this.$editor.find("span#selection-marker-1"),t=this.$editor.find("span#selection-marker-2");0!==e.length&&0!==t.length?this.caret.set(e,0,t,0):0!==e.length?this.caret.set(e,0,e,0):this.$editor[0].focus(),this.selection.removeMarkers(),this.savedSel=!1},removeMarkers:function(){this.$editor.find("span.redactor-selection-marker").each(function(t,i){var n=e(i).text().replace(/[\u200B-\u200D\uFEFF]/g,"");""===n?e(i).remove():e(i).replaceWith(function(){return e(this).contents()})})},getText:function(){return this.selection.get(),this.sel.toString()},getHtml:function(){var e="";if(this.selection.get(),this.sel.rangeCount){for(var t=document.createElement("div"),i=this.sel.rangeCount,n=0;i>n;++n)t.appendChild(this.sel.getRangeAt(n).cloneContents());e=t.innerHTML}return this.clean.onSync(e)},replaceWithHtml:function(e){if(e=this.selection.getMarkerAsHtml(1)+e+this.selection.getMarkerAsHtml(2),this.selection.get(),window.getSelection&&window.getSelection().getRangeAt){this.range.deleteContents();var t=document.createElement("div");t.innerHTML=e;for(var i,n=document.createDocumentFragment();i=t.firstChild;)n.appendChild(i);this.range.insertNode(n)}else document.selection&&document.selection.createRange&&this.range.pasteHTML(e);this.selection.restore(),this.code.sync()}},t}),i("modules/shortcuts",["jquery"],function(e){"use strict";function t(){}return t.prototype={init:function(t,i){return this.opts.shortcuts?void e.each(this.opts.shortcuts,e.proxy(function(i,n){for(var s=i.split(","),o=s.length,r=0;o>r;r++)"string"==typeof s[r]&&this.shortcuts.handler(t,e.trim(s[r]),e.proxy(function(){var e;"-1"!==n.func.search(/\./)?(e=n.func.split("."),"undefined"!=typeof this[e[0]]&&this[e[0]][e[1]].apply(this,n.params)):this[n.func].apply(this,n.params)},this))},this)):((t.ctrlKey||t.metaKey)&&(66===i||73===i)&&t.preventDefault(),!1)},handler:function(t,i,n){var s={8:"backspace",9:"tab",10:"return",13:"return",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",59:";",61:"=",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},o={"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|"};i=i.toLowerCase().split(" ");var r=s[t.keyCode],a=String.fromCharCode(t.which).toLowerCase(),l="",c={};e.each(["alt","ctrl","meta","shift"],function(e,i){t[i+"Key"]&&r!==i&&(l+=i+"+")}),r&&(c[l+r]=!0),a&&(c[l+a]=!0,c[l+o[a]]=!0,"shift+"===l&&(c[o[a]]=!0));for(var d=0,h=i.length;h>d;d++)if(c[i[d]])return t.preventDefault(),n.apply(this,arguments)}},t}),i("modules/styles",["jquery"],function(e){"use strict";function t(){}return t.prototype={applyStylePreview:function(t){var i,n=e("<span></span>"),s={},o=this,r=["background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-left-color","border-left-style","border-left-width","border-right-color","border-right-style","border-right-width","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","color","font-family","font-kerning","font-size","font-style","font-variant","font-variant-ligatures","font-weight","text-align","text-decoration","text-indent","text-rendering","text-shadow","text-overflow","text-transform","line-height","outline-color","outline-offset","outline-style","outline-width","padding-bottom","padding-left","padding-right","padding-top"];s.RedactorClearStyle={
title:"None",func:"styles.setStyle"},e.each(o.opts.classes,function(e,t){s[t["class"]]={title:t.name,func:"styles.setStyle"}}),i=this.button.addDropdown(this.$toolbar.find(".re-styles"),s),this.dropdown.show(t,"styles"),n.appendTo(this.$editor),i.children("a").each(function(t,i){var s,o=i.className.replace("redactor-dropdown-","");n.removeClass().addClass(o),s=window.getComputedStyle(n.get(0)),e.each(s,function(t,n){var o=s.getPropertyValue(n);return"display"===n&&"none"===o?void e(i).html(e(i).html()+" <em>(Hidden)</em>"):("color"===n&&"rgb(255, 255, 255)"===o&&(o="rgb(0, 0, 0)"),void(-1!==e.inArray(n,r)&&(i.style[n]=o)))})}),n.remove(),t.preventDefault()},parseForClasses:function(){var t=this;if(t.opts.localStylesheet){var i,n;e.each(document.styleSheets,function(e,n){return n.href&&n.href.indexOf(t.opts.localStylesheet)>=0?(i=n,!1):void 0}),i&&(n=i.cssRules||i.rules||[],e.each(n,function(e,i){if(!i.selectorText)return!0;var n=i.selectorText.replace(/.redactor-editor/g,""),s=/\.[a-zA-Z0-9-_]+/.exec(n),o=/stylename_[a-zA-Z0-9-_]+/.exec(n);o&&(o=o[0].replace("stylename_","").replace(/__/g," ").replace(/\b[a-z]/g,function(e){return e.toUpperCase()})),s&&(s=s[0].replace(/^\./,"")),s&&s.length&&o&&o.length&&t.opts.classes.push({"class":s,name:o})}))}},initialize:function(){if(this.opts.classes||(this.opts.classes=[]),-1!==this.opts.buttons.indexOf("styles")){var e=this.button.addAfter("formatting","styles","Style",null,{});this.$toolbar.find("a.re-styles").addClass("fsredactor-icon fsredactor-style re-has-dropdown"),e.one("click",this.styles.applyStylePreview),this.styles.parseForClasses()}},clearStyles:function(){return e("#redactor-overlay-box").length?(this.fs.$editTarget.removeAttr("class"),void this.code.sync()):(e.each(this.selection.getNodes(),function(t,i){e(i).removeAttr("class")}),void this.code.sync())},setStyle:function(t){return"RedactorClearStyle"===t?void this.styles.clearStyles():void this.fs.setInlineStyle(function(i){e(i).addClass(t)})}},t}),i("modules/tabifier",[],function(){"use strict";function e(){}return e.prototype={get:function(e){if(!this.opts.tabifier)return e;var t=["area","body","head","hr","i?frame","link","meta","noscript","style","script","table","tbody","thead","tfoot"],i=["li","dt","dt","h[1-6]","option","script"],n=["p","blockquote","div","dl","fieldset","form","frameset","map","ol","pre","select","td","th","tr","ul"];this.tabifier.lineBefore=new RegExp("^<(/?"+t.join("|/?")+"|"+i.join("|")+")[ >]"),this.tabifier.lineAfter=new RegExp("^<(br|/?"+t.join("|/?")+"|/"+i.join("|/")+")[ >]"),this.tabifier.newLevel=new RegExp("^</?("+n.join("|")+")[ >]");var s=0,o=e.length,r=0,a=null,l=null,c="",d="",h="";for(this.tabifier.cleanlevel=0;o>s;s++){if(r=s,-1===e.substr(s).indexOf("<"))return d+=e.substr(s),this.tabifier.finish(d);for(;o>r&&"<"!==e.charAt(r);)r++;for(s!==r&&(h=e.substr(s,r-s),h.match(/^\s{2,}$/g)||("\n"===d.charAt(d.length-1)?d+=this.tabifier.getTabs():"\n"===h.charAt(0)&&(d+="\n"+this.tabifier.getTabs(),h=h.replace(/^\s+/,"")),d+=h),h.match(/\n/)&&(d+="\n"+this.tabifier.getTabs())),a=r;o>r&&">"!==e.charAt(r);)r++;c=e.substr(a,r-a),s=r;var u;if("!--"===c.substr(1,3)){if(!c.match(/--$/)){for(;"-->"!==e.substr(r,3);)r++;r+=2,c=e.substr(a,r-a),s=r}"\n"!==d.charAt(d.length-1)&&(d+="\n"),d+=this.tabifier.getTabs(),d+=c+">\n"}else"!"===c[1]?d=this.tabifier.placeTag(c+">",d):"?"===c[1]?d+=c+">\n":(u=c.match(/^<(script|style|pre)/i))?(u[1]=u[1].toLowerCase(),c=this.tabifier.cleanTag(c),d=this.tabifier.placeTag(c,d),l=String(e.substr(s+1)).toLowerCase().indexOf("</"+u[1]),l&&(h=e.substr(s+1,l),s+=l,d+=h)):(c=this.tabifier.cleanTag(c),d=this.tabifier.placeTag(c,d))}return this.tabifier.finish(d)},getTabs:function(){for(var e="",t=0;t<this.tabifier.cleanlevel;t++)e+="	";return e},finish:function(e){return e=e.replace(/\n\s*\n/g,"\n"),e=e.replace(/^[\s\n]*/,""),e=e.replace(/[\s\n]*$/,""),e=e.replace(/<script(.*?)>\n<\/script>/gi,"<script$1></script>"),this.tabifier.cleanlevel=0,e},cleanTag:function(e){var t="";e=e.replace(/\n/g," "),e=e.replace(/\s{2,}/g," "),e=e.replace(/^\s+|\s+$/g," ");var i="";e.match(/\/$/)&&(i="/",e=e.replace(/\/+$/,""));for(var n;n=/\s*([^= ]+)(?:=((['"']).*?\3|[^ ]+))?/.exec(e);)n[2]?t+=n[1].toLowerCase()+"="+n[2]:n[1]&&(t+=n[1].toLowerCase()),t+=" ",e=e.substr(n[0].length);return t.replace(/\s*$/,"")+i+">"},placeTag:function(e,t){var i=e.match(this.tabifier.newLevel);return(e.match(this.tabifier.lineBefore)||i)&&(t=t.replace(/\s*$/,""),t+="\n"),i&&"/"===e.charAt(1)&&this.tabifier.cleanlevel--,"\n"===t.charAt(t.length-1)&&(t+=this.tabifier.getTabs()),i&&"/"!==e.charAt(1)&&this.tabifier.cleanlevel++,t+=e,(e.match(this.tabifier.lineAfter)||e.match(this.tabifier.newLevel))&&(t=t.replace(/ *$/,"")),t}},e}),i("text!view/table/settings_modal.html",[],function(){return'<section>\r\n	<div class="redactor-table-column1-fieldset">\r\n		<label for="redactor-table-columns">Columns</label><input id="redactor-table-columns" type="number"/>\r\n	</div>\r\n	<div class="redactor-table-column2-fieldset">\r\n		<label for="redactor-table-rows">Rows</label><input id="redactor-table-rows" type="number"/>\r\n	</div>\r\n	<div class="redactor-table-column-clear"></div>\r\n	<div class="redactor-table-column1-fieldset">\r\n		<label for="redactor-table-cellspacing">Cellspacing</label><input id="redactor-table-cellspacing" type="number"/>px\r\n	</div>\r\n	<div class="redactor-table-column-clear"></div>\r\n	<div class="redactor-table-column1-fieldset">\r\n		<label for="redactor-table-width">Width</label><input id="redactor-table-width" placeholder="auto" type="number"/>\r\n			<select id="redactor-table-width-unit"><option>%</option><option>px</option></select>\r\n	</div>\r\n	<div class="redactor-table-column2-fieldset">\r\n		<label for="redactor-table-height">Height</label><input id="redactor-table-height" placeholder="auto" type="number"/>\r\n	</div>\r\n	<div class="redactor-table-column-clear"></div>\r\n	<label for="redactor-table-align">Alignment</label>\r\n	<ul id="redactor-table-align">\r\n		<li><input id="redactor-table-align-none" name="redactor-table-align" type="radio" value=""><label for="redactor-table-align-none">None</label></li>\r\n		<li><input id="redactor-table-align-left" name="redactor-table-align" type="radio" value="left"><label for="redactor-table-align-left">Left</label></li>\r\n		<li><input id="redactor-table-align-center" name="redactor-table-align" type="radio" value="center"><label for="redactor-table-align-center">Center</label></li>\r\n		<li><input id="redactor-table-align-right" name="redactor-table-align" type="radio" value="right"><label for="redactor-table-align-right">Right</label></li>\r\n	</ul>\r\n	<div class="redactor-table-column-double-fieldset">\r\n		<label for="redactor-table-class">Class</label><input id="redactor-table-class" placeholder="Choose class..." type="text" />\r\n	</div>\r\n	<div class="redactor-table-column-double-fieldset">\r\n		<label for="redactor-table-border">Border</label><input id="redactor-table-border" type="number"/>\r\n	</div>\r\n	<div class="redactor-table-column-clear"></div>\r\n	<div class="redactor-table-column-double-fieldset">\r\n		<label for="redactor-table-background-color">Background Color</label><input id="redactor-table-background-color" type="text"/><button type="button" for="redactor-table-background-color" class="redactor-color-picker-button"></button>\r\n	</div>\r\n	<div class="redactor-table-column-double-fieldset">\r\n		<label for="redactor-table-border-color">Border Color</label><input id="redactor-table-border-color" type="text"/><button type="button" for="redactor-table-border-color" class="redactor-color-picker-button"></button>\r\n	</div>\r\n	<div class="redactor-table-column-clear"></div>\r\n</section>\r\n'}),i("text!view/table/border_dropdown.html",[],function(){return'<label for="redactor-table-edit-border">Border</label>\r\n<input type="number" name="redactor-table-edit-border" id="redactor-table-edit-border" />px\r\n<div>\r\n	<button type="button" class="redactor-table-edit-border-toggle" id="redactor-table-edit-border-top">Top</button>\r\n	<button type="button" class="redactor-table-edit-border-toggle" id="redactor-table-edit-border-bottom">Bottom</button>\r\n</div>\r\n<div>\r\n	<button type="button" class="redactor-table-edit-border-toggle" id="redactor-table-edit-border-left">Left</button>\r\n	<button type="button" class="redactor-table-edit-border-toggle" id="redactor-table-edit-border-right">Right</button>\r\n</div>\r\n'}),i("text!view/table/width_dropdown.html",[],function(){return'<label for="redactor-table-edit-width">Width</label><input type="number" name="redactor-table-edit-width" id="redactor-table-edit-width" />\r\n<label><select id="redactor-table-edit-width-unit"><option>%</option><option>px</option></select></label>\r\n'}),i("modules/table",["jquery","text!view/table/settings_modal.html","text!view/table/border_dropdown.html","text!view/table/width_dropdown.html"],function(e,t,i,n){"use strict";function s(){}var o="redactor-table-cell-selected",r="."+o,a="td, th",l="&#8203;";return s.prototype={initialize:function(){var s=this,o={};o.insert_table={title:this.lang.get("insert_table"),func:this.table.show};var r=this.button.get("table");r.length&&(this.button.addDropdown(r,o),r=this.button.add("table-align","Alignment"),this.button.addDropdown(r,{left:{title:"Left",func:this.table.align},right:{title:"Right",func:this.table.align},center:{title:"Center",func:this.table.align}}),r=this.button.add("table-vertical-align","Vertical Alignment"),this.button.addDropdown(r,{top:{title:"Top",func:this.table.verticalAlign},middle:{title:"Middle",func:this.table.verticalAlign},bottom:{title:"Bottom",func:this.table.verticalAlign}}),r=this.button.add("table-rows-columns","Rows and Columns"),this.button.addDropdown(r,{addRowAbove:{title:"Add Row Above",func:this.table.addRowAbove},addRowBelow:{title:"Add Row Below",func:this.table.addRowBelow},addColumnBefore:{title:"Add Column Before",func:this.table.addColumnBefore},addColumnAfter:{title:"Add Column After",func:this.table.addColumnAfter},removeRow:{title:"Remove Row",func:this.table.removeRow},removeColumn:{title:"Remove Column",func:this.table.removeColumn},selectRow:{title:"Select Row",func:this.table.selectRow},selectColumn:{title:"Select Column",func:this.table.selectColumn},selectAll:{title:"Select All Cells",func:this.table.selectAllCells},toggleTH:{title:"Toggle as Table Headers",func:this.table.swapCellType}}),r=this.button.add("table-border","Border"),this.button.addDropdown(r),o=r.data("dropdown")[0],o.innerHTML=i,e(".re-table-border",this.$toolbar).on("click",function(){var t=parseInt(s.table.getSelectionCommonProperty("borderTopWidth")),i=parseInt(s.table.getSelectionCommonProperty("borderRightWidth")),n=parseInt(s.table.getSelectionCommonProperty("borderBottomWidth")),o=parseInt(s.table.getSelectionCommonProperty("borderLeftWidth"));e("#redactor-table-edit-border").val(Math.max(1,t,i,n,o)),e("#redactor-table-edit-border-top").toggleClass("redactor-button-active",!!t),e("#redactor-table-edit-border-right").toggleClass("redactor-button-active",!!i),e("#redactor-table-edit-border-bottom").toggleClass("redactor-button-active",!!n),e("#redactor-table-edit-border-left").toggleClass("redactor-button-active",!!o)}),e(o).on("click",".redactor-table-edit-border-toggle",function(){return e(this).toggleClass("redactor-button-active"),s.table.processBorder(e(this).closest(".redactor-dropdown")),!1}).on("click change keyup","#redactor-table-edit-border",function(){return s.table.processBorder(e(this).closest(".redactor-dropdown")),!1}),r=this.button.add("table-border-color","Border Color"),o=this.button.addDropdown(r),o.width(242),this.fs.buildPicker(o,"borderColor",this.fs.colors,this.table.setBorderColor,this.table.removeBorderColor),r=this.button.add("table-background-color","Background Color"),o=this.button.addDropdown(r),o.width(242),this.fs.buildPicker(o,"backgroundColor",this.fs.colors,this.table.setBackgroundColor,this.table.removeBackgroundColor),r=this.button.add("table-width","Width"),this.button.addDropdown(r),o=r.data("dropdown")[0],o.innerHTML=n,e(".re-table-width",this.$toolbar).on("click",function(){var t=s.table.getSelectionColumns(),i="100",n="%";if(t.length){var r=t[0].style.width;e.trim(r).length&&(i=parseInt(r),n=r.replace(/\d+/,""))}e("#redactor-table-edit-width",o).val(i),e("#redactor-table-edit-width-unit",o).val(n)}),e(o).on("click change keyup","#redactor-table-edit-width, #redactor-table-edit-width-unit",function(){return s.table.processWidth(e(this).closest(".redactor-dropdown")),!1}),this.$toolbar.find(".re-table-align, .re-table-vertical-align, .re-table-rows-columns, .re-table-border, .re-table-border-color, .re-table-background-color, .re-table-width").addClass("redactor-table-edit-only-button redactor-button-hidden"),this.$toolbar.find(".re-table").addClass("redactor-table-edit-button"),this.table.modal_table_edit=t,this.$element.on("sync.redactor-api",this.table.onSync),this.$element.on("observed.redactor.table",this.table.setEditable))},onSync:function(){var e=this.$textarea.val();e=e.replace(/(<table([^>]*)class="([^>]*))redactor-table-selected/gi,"$1"),e=e.replace(/(<table([^>]*)class="([^>]*))redactor-table-edit-mode/gi,"$1"),this.$textarea.val(e)},setEditable:function(t,i){var n=this,s=e(i),o=[];return o.push({name:"Delete","class":"re-trash",title:"Delete Table",onClick:function(){return confirm("Are you sure you want to delete this table?")?(n.fs.hideEditableControls(),s.remove(),n.code.sync(),void 0):!1}}),o.push({name:"Settings","class":"re-cog",title:"Edit Table Properties",onClick:function(){return n.table.show(s),!1}}),o.push({name:"Edit","class":"re-pencil",title:"Edit Table Cells",onClick:function(){return n.table.enableTableEditMode(s),!1}}),s.off(".editcontrols").on("click.editcontrols touchstart.editcontrols",function(t){return s.closest(n.fs.$editTarget).length&&n.$editor.hasClass("redactor-table-edit-mode")?!1:e(t.target).closest("table")[0]===n.table.getSelectedTable()[0]?!1:(n.table.tableCleanUp(s),n.table.setSelectedTable(s[0]),n.fs.loadEditableControls({bCancelSelection:!0,element:s,buttons:o,offset:{top:-20,left:-1},onHide:function(){return s[0]===n.table.getSelectedTable()[0]&&(n.table.disableTableEditMode(s),n.table.setSelectedTable(null)),!0}}),t.stopPropagation(),t.preventDefault(),void 0)}),!1},enableTableEditMode:function(t){var i=this,n=e(this.selection.getNodes()).filter("td,th");return this.$editor.hasClass("redactor-table-edit-mode")?void this.table.disableTableEditMode(t):(this.$editor.addClass("redactor-table-edit-mode").prop("contenteditable",!1).prepend('<div class="redactor-table-edit-mode-overlay">'),this.$toolbar.find(".re-table").addClass("redactor-active").on("click.redactor-table-edit",function(){return i.table.disableTableEditMode(t),i.dropdown.hideAll(),!1}),t.find("td,th").each(function(){e(this).attr("unselectable","on")}),this.table.$previousButtons=this.$toolbar.find("a:not(.redactor-table-edit-button, .redactor-button-hidden)"),this.table.$previousButtons.addClass("redactor-button-hidden"),this.$toolbar.find(".redactor-table-edit-only-button").removeClass("redactor-button-hidden"),t.addClass("redactor-table-edit-mode"),this.table.setLastSelected(null),this.selection.remove(),n.length&&this.table.setSelection(n),t.on("mousedown.redactor-table-edit",a,function(){var n=e(this).parentsUntil(i.table.getSelectedTable()).filter("td:first")[0]||this,s=t.find(r);t.off("mouseover.redactor-table-edit").on("mouseover.redactor-table-edit",a,function(r){var a=e(this).parentsUntil(i.table.getSelectedTable()).filter("td:first")[0]||this;i.table.expandSelection(t,n,a,!0),(r.ctrlKey||r.metaKey)&&s.addClass(o)}).on("mouseup.redactor-table-edit",function(){t.off("mouseover.redactor-table-edit")}),i.dropdown.hideAll()}).on("click.redactor-table-edit",a,function(n){var s=e(this).parentsUntil(i.table.getSelectedTable()).filter("td:first")[0]||this;n.shiftKey&&i.table.getLastSelected()?(!n.ctrlKey&&!n.metaKey&&i.table.resetSelection(t),i.table.expandSelection(t,i.table.getLastSelected(),s),i.table.setLastSelected(s)):n.ctrlKey||n.metaKey?(e(s).toggleClass(o),e(s).hasClass(o)&&i.table.setLastSelected(s)):(i.table.resetSelection(t),e(s).addClass(o),i.table.setLastSelected(s))}),void 0)},disableTableEditMode:function(t){return t.length?(this.$editor.removeClass("redactor-table-edit-mode").prop("contenteditable",!0).find(".redactor-table-edit-mode-overlay").remove(),this.$toolbar.find(".re-table").removeClass("redactor-active").off(".redactor-table-edit"),this.$toolbar.find(".redactor-table-edit-only-button").addClass("redactor-button-hidden"),t.removeClass("redactor-table-edit-mode").find(r).removeClass(o),t.find("td,th").each(function(){e(this).removeAttr("unselectable")}),this.opts.visual&&this.table.$previousButtons&&this.table.$previousButtons.removeClass("redactor-button-hidden"),t.off(".redactor-table-edit"),this.code.sync(),void 0):!1},tableCleanUp:function(t){t.find("td, th").each(function(){var t,i=e(this),n=i.contents();if(n.length)for(t in n)if(3!==n[t].nodeType)return;(!n.length||!/[\w]/.test(i.contents().text()))&&i.html(l)})},align:function(e){this.table.getSelection().css("text-align",e)},verticalAlign:function(e){this.table.getSelection().css("vertical-align",e)},getLastSelected:function(){return this.table.lastSelected=this.table.lastSelected||this.table.getSelection().get(0),this.table.lastSelected},setLastSelected:function(e){this.table.lastSelected=e},setSelection:function(t,i){i&&this.table.resetSelection(this.table.getSelectedTable()),e(t).addClass(o)},getSelection:function(){return e(this.table.target).find(r)},getSelectionCommonProperty:function(e){var t;return this.table.getSelection().each(function(){if(t){if(t!==this.style[e])return t=!1,!1}else t=this.style[e]}),t},getSelectionColumns:function(){var t=this.table.getSelectionColumnIndexes(),i=e(),n=this.table.getSelectedTable();return e.each(t,function(e,t){i=i.add(n.find("colgroup").children("col").eq(t))}),i},getSelectionColumnIndexes:function(){return e.unique(this.table.getSelection().map(function(){return e(this).index()})).get()},setupColumns:function(){var t=this.table.getSelectedTable(),i=t.find("col").length,n=t.find("colgroup"),s=0;for(n.length||(t.prepend("<colgroup>"),n=t.find("colgroup")),e("tr:first",t).find("> td, > th").each(function(){e(this).attr("colspan")?s+=+e(this).attr("colspan"):s++});s>i;i++)n.append("<col/>")},getSelectedTable:function(){return e(this.table.target)},setSelectedTable:function(t){this.table.target=t,this.$editor.find(".redactor-table-selected").removeClass("redactor-table-selected"),e(this.table.target).addClass("redactor-table-selected"),this.table.setupColumns(),this.table.setLastSelected(null)},resetSelection:function(e){e.find(r).removeClass(o)},expandSelection:function(e,t,i,n){var s,r,a=Math.min(t.cellIndex,i.cellIndex),l=Math.min(t.parentNode.rowIndex,i.parentNode.rowIndex),c=Math.max(t.cellIndex,i.cellIndex),d=Math.max(t.parentNode.rowIndex,i.parentNode.rowIndex);for(n&&this.table.resetSelection(e),r=l;d>=r;r++)for(s=a;c>=s;s++)e.find("> tr, > thead > tr, > tbody > tr, > tfoot > tr").eq(r).find("> td, > th").eq(s).addClass(o)},show:function(t){var i=this;"insert_table"===t&&(t=!1),this.modal.addTemplate("table",this.table.modal_table_edit),this.modal.load("table",this.lang.get("insert_table"),500),this.modal.createCancelButton();var n=this.modal.createActionButton(this.lang.get("save"));n.on("click",function(){i.table.save(t)}),this.selection.save(),this.modal.show();var s=e('<div style="display:none; position:absolute; background: #fff"/>');if(this.$modal.append(s),this.$modal.on("keyup change","#redactor-table-background-color, #redactor-table-border-color",function(){var t=e(this);t.next(".redactor-color-picker-button").css("backgroundColor",t.val())}),this.$modal.on("click",".redactor-color-picker-button",function(){var t=e(this);return s.$triggerer=e("#"+t.attr("for")),s.show().css({top:t.position().top}),i.$modal.one("click",function(){s.hide()}),!1}),this.fs.buildPicker(s,"tableSetting",this.fs.colors,function(e,t){s.$triggerer.val(t).change(),s.hide()},function(){s.$triggerer.val("").change(),s.hide()}),t.length){var o=this.fs.rgb2hex(t[0].style.borderColor)||"#000000",r=this.fs.rgb2hex(t[0].style.backgroundColor);e("#redactor-table-rows").val(t[0].rows.length),e("#redactor-table-columns").val(t[0].rows[0].children.length),e("#redactor-table-cellspacing").val(parseInt(t[0].style.borderSpacing)||0),e("#redactor-table-width").val(parseInt(t[0].style.width)||""),e("#redactor-table-width-unit").val("px"===t[0].style.width.slice(-2)?"px":"%"),e("#redactor-table-height").val(parseInt(t[0].style.height)||""),e("#redactor-table-border").val(parseInt(t[0].style.borderWidth)||0),e("#redactor-table-border-color").val(o),e("#redactor-table-background-color").val(r),e("#redactor-table-align-"+("0px auto"===t[0].style.margin?"center":t[0].style["float"])).prop("checked",!0),t.removeClass("redactor-table-selected"),t.removeClass("redactor-table-edit-mode"),e("#redactor-table-class").val(t[0].className),e('.redactor-color-picker-button[for="redactor-table-background-color"]').css("backgroundColor",r),e('.redactor-color-picker-button[for="redactor-table-border-color"]').css("backgroundColor",o)}if(e.fn.selectize){var a=this.opts.classes?e.map(this.opts.classes,function(e){return{value:e["class"],text:e.name}}):[],l=e("#redactor-table-class").selectize({delimiter:" ",persist:!1,create:!0});l[0].selectize.addOption(a),l[0].selectize.$control.on("keyup",function(e){e.stopPropagation()})}e("#redactor-table-columns")[0].focus()},save:function(t){var i,n,s,o,r=e("#redactor-table-rows").val(),a=e("#redactor-table-columns").val(),c=e("#redactor-table-cellspacing").val(),d=e("#redactor-table-width").val(),h=e("#redactor-table-width-unit").val(),u=e("#redactor-table-height").val(),p=e('input[name="redactor-table-align"]:checked',this.$modal).val(),f=e("#redactor-table-class").val(),m=e("#redactor-table-border").val(),g=e("#redactor-table-border-color").val()||"#000000",v=e("#redactor-table-background-color").val(),b=0,y=0,w=e("<div>"),_=Math.floor(99999*Math.random()),k=!0;if(t.length?(k=!1,b=t[0].rows.length,y=t[0].rows[0].children.length):t=e('<table id="table'+_+'"><tbody></tbody></table>'),t.css({borderCollapse:c>0?"separate":"collapse",borderSpacing:c?c+"px":"",borderWidth:m?m+"px":"",borderColor:g,borderStyle:m?"solid":"",backgroundColor:v,width:d?d+h:"",height:u?u+"px":"","float":"center"===p?"":p}).attr("class",f),"center"===p&&t.css("margin","0px auto"),t.find("tr").each(function(){var t=a-y;if(t>0)for(i=0;t>i;i++)e(this).append(e("<td>"+l+"</td>"));else for(i=0;-t>i;i++)e(this).find("th:last, td:last").remove()}),0===b||r>b)for(i=b;r>i;i++){for(n=e("<tr>"),s=0;a>s;s++)o=e("<td>"+l+"</td>"),0===i&&0===s&&o.append(this.selection.getMarker()),e(n).append(o);t.append(n)}else for(i=b;i>r;i--)t.find("tr:last").remove();if(this.modal.close(),this.selection.restore(),this.code.sync(),k){w.append(t);var x=w.html();this.buffer.set();var C=this.selection.getBlock()||this.selection.getCurrent();C&&"BODY"!==C.tagName&&"TD"!==C.tagName&&"TH"!==C.tagName?("LI"===C.tagName&&(C=e(C).closest("ul, ol")),e(C).after(x)):this.insert.html(x),this.selection.restore();var S=this.$editor.find("#table"+_);if(!this.opts.linebreaks&&(this.utils.browser("mozilla")||this.utils.browser("msie"))){var T=S.next();0===T.length&&S.after(this.opts.emptyHtml)}this.observe.buttons(),this.observe.images(),S.find("span.redactor-selection-marker").remove(),S.removeAttr("id"),this.code.sync(),this.core.setCallback("insertedTable",S)}},getTable:function(){var t=e(this.selection.getParent()).closest("table");return this.utils.isRedactorParent(t)?0===t.size()?!1:t:!1},addRowAbove:function(){var e=this.table.getCurrentRow();e.before(this.table.newRow(e[0].cells.length))},addRowBelow:function(){var e=this.table.getCurrentRow();e.after(this.table.newRow(e[0].cells.length))},removeRow:function(){this.table.getAllRows().has(r).remove()},getAllRows:function(){return this.table.getSelectedTable().find("> tr, > thead > tr, > tbody > tr, > tfoot > tr")},getCurrentRow:function(){return e(this.table.getLastSelected()).closest("tr")},newRow:function(t){var i,n=e("<tr></tr>");for(i=0;t>i;i++)n.append(e("<td>"+l+"</td>"));return n},addColumnAfter:function(){var t=e(this.table.getLastSelected()).index();this.table.getAllRows().each(function(){e("<td>"+l+"</td>").insertAfter(e("> td,> th",this).eq(t))}),this.table.getSelectedTable().find("> col, > colgroup > col").eq(t).after("<col/>")},addColumnBefore:function(){var t=e(this.table.getLastSelected()).index();this.table.getAllRows().each(function(){e("<td>"+l+"</td>").insertBefore(e("> td,> th",this).eq(t))}),this.table.getSelectedTable().find("> col, > colgroup > col").eq(t).before("<col/>")},removeColumn:function(){var t=this.table.getSelectionColumnIndexes().reverse(),i=this;e.each(t,function(t,n){i.table.getAllRows().each(function(){e("> td,> th",this).eq(n).remove()})})},swapCellType:function(){var t=!1,i=function(t){return function(){var i=e(this),n=e(t),s=n[0];return s.className=this.className,e.extend(s.classList,this.classList),e.extend(s.attributes,this.attributes),n.append(i.contents())}};this.table.getSelection().each(function(n){0===n&&"TH"===this.tagName&&(t=!0),t&&"TD"!==this.tagName?e(this).replaceWith(i("<td>")):"TH"!==this.tagName&&e(this).replaceWith(i("<th>"))})},selectRow:function(){this.table.setSelection(e(this.table.getLastSelected()).siblings("td,th").andSelf(),!0)},selectColumn:function(){var t=e(this.table.getLastSelected()).index();this.table.setSelection(e("td:eq("+t+"),th:eq("+t+")",this.table.getAllRows()),!0)},selectAllCells:function(){this.table.setSelection(e(a,this.table.getAllRows()),!0)},setBorderColor:function(e,t){this.table.getSelection().css("borderColor",t)},removeBorderColor:function(){this.table.getSelection().css("borderColor","")},setBackgroundColor:function(e,t){this.table.getSelection().css("backgroundColor",t)},removeBackgroundColor:function(){this.table.getSelection().css("backgroundColor","")},processBorder:function(t){var i=e("#redactor-table-edit-border-top",t).hasClass("redactor-button-active"),n=e("#redactor-table-edit-border-right",t).hasClass("redactor-button-active"),s=e("#redactor-table-edit-border-bottom",t).hasClass("redactor-button-active"),o=e("#redactor-table-edit-border-left",t).hasClass("redactor-button-active"),r=e("#redactor-table-edit-border",t).val()+"px"||"1px";this.table.getSelection().css({borderTopWidth:i?r:0,borderRightWidth:n?r:0,borderBottomWidth:s?r:0,borderLeftWidth:o?r:0,borderStyle:"solid"})},processWidth:function(t){var i=e("#redactor-table-edit-width",t).val(),n=e("#redactor-table-edit-width-unit",t).val();this.table.getSelectionColumns().css("width",i+n)},restoreAfterDelete:function(e){this.selection.restore(),e.find("span.redactor-selection-marker").remove(),this.code.sync()},deleteTable:function(){var e=this.table.getTable();if(e){this.buffer.set();var t=e.next();this.opts.linebreaks||0===t.length?this.caret.setAfter(e):this.caret.setStart(t),e.remove(),this.code.sync()}}},s}),i("modules/textdirection",[],function(){"use strict";function e(){}return e.prototype={initialize:function(){var e=this,t={};t.ltr={title:"Left to Right",func:e.textdirection.setLtr},t.rtl={title:"Right to Left",func:e.textdirection.setRtl};var i=this.button.get("textdirection");i.length&&this.button.addDropdown(i,t)},setRtl:function(){this.buffer.set(),this.block.setAttr("dir","rtl")},setLtr:function(){this.buffer.set(),this.block.removeAttr("dir")}},e}),i("modules/tidy",["jquery"],function(e){"use strict";function t(){}return t.prototype={setupAllowed:function(){if(this.opts.allowedTags&&(this.opts.deniedTags=!1),this.opts.allowedAttr&&(this.opts.removeAttr=!1),!this.opts.linebreaks){var e=["p","section"];this.opts.allowedTags&&this.tidy.addToAllowed(e),this.opts.deniedTags&&this.tidy.removeFromDenied(e)}},addToAllowed:function(t){for(var i=t.length,n=0;i>n;n++)-1===e.inArray(t[n],this.opts.allowedTags)&&this.opts.allowedTags.push(t[n])},removeFromDenied:function(t){for(var i=t.length,n=0;i>n;n++){var s=e.inArray(t[n],this.opts.deniedTags);-1!==s&&this.opts.deniedTags.splice(s,1)}},load:function(t,i){return this.tidy.settings={deniedTags:this.opts.deniedTags,allowedTags:this.opts.allowedTags,removeComments:this.opts.removeComments,replaceTags:this.opts.replaceTags,replaceStyles:this.opts.replaceStyles,removeDataAttr:this.opts.removeDataAttr,removeAttr:this.opts.removeAttr,allowedAttr:this.opts.allowedAttr,removeWithoutAttr:this.opts.removeWithoutAttr,removeEmpty:this.opts.removeEmpty},e.extend(this.tidy.settings,i),t=this.tidy.removeComments(t),this.tidy.$div=e("<div />").append(t),this.tidy.replaceTags(),this.tidy.replaceStyles(),this.tidy.removeTags(),this.tidy.removeAttr(),this.tidy.removeEmpty(),this.tidy.removeParagraphsInLists(),this.tidy.removeDataAttr(),this.tidy.removeWithoutAttr(),t=this.tidy.$div.html(),this.tidy.$div.remove(),t},removeComments:function(e){return this.tidy.settings.removeComments?e.replace(/<!--[\s\S]*?-->/gi,""):e},replaceTags:function(t){if(!this.tidy.settings.replaceTags)return t;for(var i=this.tidy.settings.replaceTags.length,n=[],s=[],o=0;i>o;o++)s.push(this.tidy.settings.replaceTags[o][1]),n.push(this.tidy.settings.replaceTags[o][0]);e.each(n,e.proxy(function(t,i){this.tidy.$div.find(i).replaceWith(function(){return e("<"+s[t]+" />",{html:e(this).html()})})},this))},replaceStyles:function(){if(this.tidy.settings.replaceStyles){var t=this.tidy.settings.replaceStyles.length;this.tidy.$div.find("span").each(e.proxy(function(i,n){function s(t,i){var n=document.createElement(i);return e(n).append(e(t).contents())}for(var o=e(n),r=o.attr("style"),a=0;t>a;a++)if(r&&r.match(new RegExp("^"+this.tidy.settings.replaceStyles[a][0],"i"))){var l=this.tidy.settings.replaceStyles[a][1];o.replaceWith(s(o[0],l))}},this))}},removeTags:function(){!this.tidy.settings.deniedTags&&this.tidy.settings.allowedTags&&this.tidy.$div.find("*").not(this.tidy.settings.allowedTags.join(",")).each(function(t,i){""===i.innerHTML?e(i).remove():e(i).contents().unwrap()}),this.tidy.settings.deniedTags&&this.tidy.$div.find(this.tidy.settings.deniedTags.join(",")).each(function(t,i){""===i.innerHTML?e(i).remove():e(i).contents().unwrap()})},removeAttr:function(){var t,i;if(!this.tidy.settings.removeAttr&&this.tidy.settings.allowedAttr){var n=[],s=[];for(i=this.tidy.settings.allowedAttr.length,t=0;i>t;t++)n.push(this.tidy.settings.allowedAttr[t][0]),s.push(this.tidy.settings.allowedAttr[t][1]);this.tidy.$div.find("*").each(e.proxy(function(t,i){var o=e(i),r=e.inArray(o[0].tagName.toLowerCase(),n),a=this.tidy.removeAttrGetRemoves(r,s,o);a&&e.each(a,function(e,t){o.removeAttr(t)})},this))}if(this.tidy.settings.removeAttr)for(i=this.tidy.settings.removeAttr.length,t=0;i>t;t++){var o=this.tidy.settings.removeAttr[t][1];e.isArray(o)&&(o=o.join(" ")),this.tidy.$div.find(this.tidy.settings.removeAttr[t][0]).removeAttr(o)}},removeAttrGetRemoves:function(t,i,n){var s=[];return-1===t?e.each(n[0].attributes,function(e,t){s.push(t.name)}):"*"===i[t].toString()?s=[]:e.each(n[0].attributes,function(n,o){e.isArray(i[t])?-1===e.inArray(o.name,i[t])&&s.push(o.name):i[t]!==o.name&&s.push(o.name)}),s},removeAttrs:function(t,i){return i=new RegExp(i,"g"),t.each(function(){for(var t=e(this),n=this.attributes.length-1,s=n;s>=0;s--){var o=this.attributes[s];o&&o.specified&&o.name.search(i)>=0&&t.removeAttr(o.name)}})},removeEmpty:function(){this.tidy.settings.removeEmpty&&this.tidy.$div.find(this.tidy.settings.removeEmpty.join(",")).each(function(){var t=e(this),i=t.text();i=i.replace(/[\u200B-\u200D\uFEFF]/g,""),i=i.replace(/&nbsp;/gi,""),i=i.replace(/\s/g,""),""===i&&0===t.children().length&&t.remove()})},removeParagraphsInLists:function(){this.tidy.$div.find("li p").contents().unwrap()},removeDataAttr:function(){if(this.tidy.settings.removeDataAttr){var t=this.tidy.settings.removeDataAttr;e.isArray(this.tidy.settings.removeDataAttr)&&(t=this.tidy.settings.removeDataAttr.join(",")),this.tidy.removeAttrs(this.tidy.$div.find(t),"^(data-)")}},removeWithoutAttr:function(){this.tidy.settings.removeWithoutAttr&&this.tidy.$div.find(this.tidy.settings.removeWithoutAttr.join(",")).each(function(){0===this.attributes.length&&e(this).contents().unwrap()})}},t}),i("modules/toolbar",["jquery"],function(e){"use strict";function t(){}return t.prototype={init:function(){return{backcolor:{title:this.lang.get("backcolor")},html:{title:this.lang.get("html"),func:"code.toggle"},formatting:{title:this.lang.get("formatting"),dropdown:{p:{title:this.lang.get("paragraph"),func:"block.format"},blockquote:{
title:this.lang.get("quote"),func:"block.format"},pre:{title:this.lang.get("code"),func:"block.format"},h1:{title:this.lang.get("header1"),func:"block.format"},h2:{title:this.lang.get("header2"),func:"block.format"},h3:{title:this.lang.get("header3"),func:"block.format"},h4:{title:this.lang.get("header4"),func:"block.format"},h5:{title:this.lang.get("header5"),func:"block.format"},h6:{title:this.lang.get("header6"),func:"block.format"}}},fontcolor:{title:this.lang.get("fontcolor")},fontfamily:{title:"Change Font Family"},fontsize:{title:"Change Font Size"},fullscreen:{title:"Fullscreen",func:"fullscreen.toggle"},bold:{title:this.lang.get("bold"),func:"inline.format"},embed:{title:this.lang.get("embed"),func:"embed.show"},italic:{title:this.lang.get("italic"),func:"inline.format"},deleted:{title:this.lang.get("deleted"),func:"inline.format"},underline:{title:this.lang.get("underline"),func:"inline.format"},unorderedlist:{title:"&bull; "+this.lang.get("unorderedlist"),func:"list.toggle"},orderedlist:{title:"1. "+this.lang.get("orderedlist"),func:"list.toggle"},outdent:{title:"< "+this.lang.get("outdent"),func:"indent.decrease"},indent:{title:"> "+this.lang.get("indent"),func:"indent.increase"},image:{title:this.lang.get("image"),func:"image.show"},file:{title:this.lang.get("file"),func:"file.show"},link:{title:this.lang.get("link"),dropdown:{link:{title:this.lang.get("link_insert"),func:"link.show"},unlink:{title:this.lang.get("unlink"),func:"link.unlink"}}},media:{title:this.lang.get("media"),func:"media.show"},table:{title:this.lang.get("table")},textdirection:{title:"Change Text Direction"},alignment:{title:this.lang.get("alignment"),dropdown:{left:{title:this.lang.get("align_left"),func:"alignment.left"},center:{title:this.lang.get("align_center"),func:"alignment.center"},right:{title:this.lang.get("align_right"),func:"alignment.right"},justify:{title:this.lang.get("align_justify"),func:"alignment.justify"}}},horizontalrule:{title:this.lang.get("horizontalrule"),func:"line.insert"},undo:{title:"Undo",func:"buffer.undo"},redo:{title:"Redo",func:"buffer.redo"}}},build:function(){this.toolbar.hideButtons(),this.toolbar.hideButtonsOnMobile(),this.toolbar.isButtonSourceNeeded(),0!==this.opts.buttons.length&&(this.$toolbar=this.toolbar.createContainer(),this.toolbar.setOverflow(),this.toolbar.append(),this.toolbar.setFormattingTags(),this.toolbar.loadButtons(),this.toolbar.setFixed(),this.opts.activeButtons&&this.$editor.on("mouseup.redactor keyup.redactor focus.redactor",e.proxy(this.observe.buttons,this)))},createContainer:function(){return e("<ul>").addClass("redactor-toolbar").attr("id","redactor-toolbar-"+this.uuid)},setFormattingTags:function(){e.each(this.opts.toolbar.formatting.dropdown,e.proxy(function(t){-1===e.inArray(t,this.opts.formatting)&&delete this.opts.toolbar.formatting.dropdown[t]},this))},loadButtons:function(){e.each(this.opts.buttons,e.proxy(function(t,i){if(this.opts.toolbar[i]){if("file"===i){if(this.opts.fileUpload===!1)return;if(!this.opts.fileUpload&&this.opts.s3===!1)return}var n=this.opts.toolbar[i];this.$toolbar.append(e("<li>").append(this.button.build(i,n)))}},this))},append:function(){this.opts.toolbarExternal?(this.$toolbar.addClass("redactor-toolbar-external"),e(this.opts.toolbarExternal).html(this.$toolbar)):this.$box.prepend(this.$toolbar)},setFixed:function(){this.utils.isDesktop()&&(this.opts.toolbarExternal||this.opts.toolbarFixed&&(this.toolbar.observeScroll(),e(this.opts.toolbarFixedTarget).on("scroll.redactor."+this.uuid,e.proxy(this.toolbar.observeScroll,this))))},setOverflow:function(){this.utils.isMobile()&&this.opts.toolbarOverflow&&this.$toolbar.addClass("redactor-toolbar-overflow")},isButtonSourceNeeded:function(){if(!this.opts.source){var e=this.opts.buttons.indexOf("html");-1!==e&&this.opts.buttons.splice(e,1)}},hideButtons:function(){0!==this.opts.buttonsHide.length&&e.each(this.opts.buttonsHide,e.proxy(function(e,t){var i=this.opts.buttons.indexOf(t);i>=0&&this.opts.buttons.splice(i,1)},this))},hideButtonsOnMobile:function(){this.utils.isMobile()&&0!==this.opts.buttonsHideOnMobile.length&&e.each(this.opts.buttonsHideOnMobile,e.proxy(function(e,t){var i=this.opts.buttons.indexOf(t);this.opts.buttons.splice(i,1)},this))},observeScroll:function(){var t=e(this.opts.toolbarFixedTarget).scrollTop(),i=1;this.opts.toolbarFixedTarget===document&&(i=this.$box.offset().top),t>i?this.toolbar.observeScrollEnable(t,i):this.toolbar.observeScrollDisable()},observeScrollEnable:function(t,i){var n=this.$toolbar.height(),s=i+this.$box.height()-n,o=this.$box.innerWidth();this.$box.css("paddingTop",n+"px"),this.$toolbar.addClass("toolbar-fixed-box"),this.$toolbar.css({position:"fixed",width:o,top:0,left:this.$box.offset().left-e(this.opts.toolbarFixedTarget).scrollLeft()}),t>s&&e(".redactor-dropdown-"+this.uuid+":visible").hide(),this.toolbar.setDropdownsFixed(),this.$toolbar.css("visibility",s>t?"visible":"hidden")},observeScrollDisable:function(){this.$toolbar.css({position:"relative",width:"auto",top:0,left:0,visibility:"visible"}),this.$box.css("paddingTop",""),this.toolbar.unsetDropdownsFixed(),this.$toolbar.removeClass("toolbar-fixed-box")},setDropdownsFixed:function(){var t=this.$toolbar.innerHeight()+this.opts.toolbarFixedTopOffset,i="fixed";this.opts.toolbarFixedTarget!==document&&(t=this.$toolbar.innerHeight()+this.$toolbar.offset().top+this.opts.toolbarFixedTopOffset,i="absolute"),e(".redactor-dropdown-"+this.uuid).each(function(){e(this).css({position:i,top:t+"px"})})},unsetDropdownsFixed:function(){var t=this.$toolbar.innerHeight()+this.$toolbar.offset().top;e(".redactor-dropdown-"+this.uuid).each(function(){e(this).css({position:"absolute",top:t+"px"})})}},t}),i("modules/upload",["jquery"],function(e){"use strict";function t(){}return t.prototype={init:function(t,i,n){this.upload.direct=!1,this.upload.callback=n,this.upload.url=i,this.upload.$el=e(t),this.upload.$droparea=e('<div id="redactor-droparea" />'),this.upload.$placeholdler=e('<div id="redactor-droparea-placeholder" />').text(this.lang.get("upload_label")),this.upload.$input=e('<input type="file" name="file" />'),this.upload.$placeholdler.append(this.upload.$input),this.upload.$droparea.append(this.upload.$placeholdler),this.upload.$el.append(this.upload.$droparea),this.upload.$droparea.off("redactor.upload"),this.upload.$input.off("redactor.upload"),this.upload.$droparea.on("dragover.redactor.upload",e.proxy(this.upload.onDrag,this)),this.upload.$droparea.on("dragleave.redactor.upload",e.proxy(this.upload.onDragLeave,this)),this.upload.$input.on("change.redactor.upload",e.proxy(function(e){e=e.originalEvent||e,this.upload.traverseFile(this.upload.$input[0].files[0],e)},this)),this.upload.$droparea.on("drop.redactor.upload",e.proxy(function(e){e.preventDefault(),this.upload.$droparea.removeClass("drag-hover").addClass("drag-drop"),this.upload.onDrop(e)},this))},directUpload:function(e,t){this.upload.direct=!0,this.upload.traverseFile(e,t)},onDrop:function(e){e=e.originalEvent||e;var t=e.dataTransfer.files;this.upload.traverseFile(t[0],e)},traverseFile:function(e,t){if(this.opts.s3)return this.upload.setConfig(e),void this.upload.s3uploadFile(e);var i=window.FormData?new FormData:null;if(window.FormData){this.upload.setConfig(e);var n="image"===this.upload.type?this.opts.imageUploadParam:this.opts.fileUploadParam;i.append(n,e)}this.progress.show(),this.core.setCallback("uploadStart",t,i),this.upload.sendData(i,t)},setConfig:function(e){this.upload.getType(e),this.upload.direct&&(this.upload.url="image"===this.upload.type?this.opts.imageUpload:this.opts.fileUpload,this.upload.callback="image"===this.upload.type?this.image.insert:this.file.insert)},getType:function(e){this.upload.type="image",-1===this.opts.imageTypes.indexOf(e.type)&&(this.upload.type="file")},getHiddenFields:function(t,i){return t===!1||"object"!=typeof t?i:(e.each(t,e.proxy(function(t,n){null!==n&&0===n.toString().indexOf("#")&&(n=e(n).val()),i.append(t,n)},this)),i)},sendData:function(t,i){"image"===this.upload.type?(t=this.upload.getHiddenFields(this.opts.uploadImageFields,t),t=this.upload.getHiddenFields(this.upload.imageFields,t)):(t=this.upload.getHiddenFields(this.opts.uploadFileFields,t),t=this.upload.getHiddenFields(this.upload.fileFields,t));var n=new XMLHttpRequest;n.open("POST",this.upload.url),n.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.onreadystatechange=e.proxy(function(){if(4===n.readyState){var t=n.responseText;t=t.replace(/^\[/,""),t=t.replace(/\]$/,"");var s;try{s="string"==typeof t?e.parseJSON(t):t}catch(o){s={error:!0}}this.progress.hide(),this.upload.direct||this.upload.$droparea.removeClass("drag-drop"),this.upload.callback(s,this.upload.direct,i)}},this),n.send(t)},onDrag:function(e){e.preventDefault(),this.upload.$droparea.addClass("drag-hover")},onDragLeave:function(e){e.preventDefault(),this.upload.$droparea.removeClass("drag-hover")},clearImageFields:function(){this.upload.imageFields={}},addImageFields:function(e,t){this.upload.imageFields[e]=t},removeImageFields:function(e){delete this.upload.imageFields[e]},clearFileFields:function(){this.upload.fileFields={}},addFileFields:function(e,t){this.upload.fileFields[e]=t},removeFileFields:function(e){delete this.upload.fileFields[e]},s3uploadFile:function(t){this.upload.s3executeOnSignedUrl(t,e.proxy(function(e){this.upload.s3uploadToS3(t,e)},this))},s3executeOnSignedUrl:function(e,t){var i=new XMLHttpRequest,n="?";"-1"!==this.opts.s3.search(/\?/)&&(n="&"),i.open("GET",this.opts.s3+n+"name="+e.name+"&type="+e.type,!0),i.overrideMimeType&&i.overrideMimeType("text/plain; charset=x-user-defined");var s=this;i.onreadystatechange=function(){4===this.readyState&&200===this.status?(s.progress.show(),t(decodeURIComponent(this.responseText))):4===this.readyState&&200!==this.status},i.send()},s3createCORSRequest:function(e,t){var i=new XMLHttpRequest;return"withCredentials"in i?i.open(e,t,!0):"undefined"!=typeof XDomainRequest?(i=new XDomainRequest,i.open(e,t)):i=null,i},s3uploadToS3:function(t,i){var n=this.upload.s3createCORSRequest("PUT",i);!n||(n.onload=e.proxy(function(){if(200===n.status){this.progress.hide();var e=i.split("?");if(!e[0])return!1;this.upload.direct||this.upload.$droparea.removeClass("drag-drop");var t={filelink:e[0]};if("file"===this.upload.type){var s=e[0].split("/");t.filename=s[s.length-1]}this.upload.callback(t,this.upload.direct,!1)}},this),n.onerror=function(){},n.upload.onprogress=function(){},n.setRequestHeader("Content-Type",t.type),n.setRequestHeader("x-amz-acl","public-read"),n.send(t))}},t}),i("modules/utils",["jquery"],function(e){"use strict";function t(){}return t.prototype={isMobile:function(){return/(iPhone|iPod|BlackBerry|Android)/.test(navigator.userAgent)},isDesktop:function(){return!/(iPhone|iPod|iPad|BlackBerry|Android)/.test(navigator.userAgent)},isString:function(e){return"[object String]"===Object.prototype.toString.call(e)},isEmpty:function(t,i){return t=t.replace(/[\u200B-\u200D\uFEFF]/g,""),t=t.replace(/&nbsp;/gi,""),t=t.replace(/<\/?br\s?\/?>/g,""),t=t.replace(/\s/g,""),t=t.replace(/^<p>[^\W\w\D\d]*?<\/p>$/i,""),t=t.replace(/<iframe([^>]*)>$/i,"iframe"),t=t.replace(/<source([^>]*)>$/i,"source"),i!==!1&&(t=t.replace(/<[^\/>][^>]*><\/[^>]+>/gi,""),t=t.replace(/<[^\/>][^>]*><\/[^>]+>/gi,"")),t=e.trim(t),""===t},normalize:function(e){return"undefined"==typeof e?0:parseInt(e.replace("px",""),10)},hexToRgb:function(e){if("undefined"!=typeof e){if(-1===e.search(/^#/))return e;var t=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;e=e.replace(t,function(e,t,i,n){return t+t+i+i+n+n});var i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return"rgb("+parseInt(i[1],16)+", "+parseInt(i[2],16)+", "+parseInt(i[3],16)+")"}},getOuterHtml:function(t){return e("<div>").append(e(t).eq(0).clone()).html()},getAlignmentElement:function(t){return-1!==e.inArray(t.tagName,this.opts.alignmentTags)?e(t):e(t).closest(this.opts.alignmentTags.toString().toLowerCase(),this.$editor[0])},removeEmptyAttr:function(t,i){var n=e(t);return"undefined"==typeof n.attr(i)?!0:""===n.attr(i)?(n.removeAttr(i),!0):!1},removeEmpty:function(t,i){var n=e(e.parseHTML(i));if(n.find(".redactor-invisible-space").removeAttr("style").removeAttr("class"),0===n.find("hr, br, img, video, iframe, source").length){var s=e.trim(n.text());this.utils.isEmpty(s,!1)&&n.remove()}},saveScroll:function(){this.saveEditorScroll=this.$editor.scrollTop(),this.saveBodyScroll=e(window).scrollTop(),this.opts.scrollTarget&&(this.saveTargetScroll=e(this.opts.scrollTarget).scrollTop())},restoreScroll:function(){"undefined"==typeof this.saveScroll&&"undefined"==typeof this.saveBodyScroll||(e(window).scrollTop(this.saveBodyScroll),this.$editor.scrollTop(this.saveEditorScroll),this.opts.scrollTarget&&e(this.opts.scrollTarget).scrollTop(this.saveTargetScroll))},createSpaceElement:function(){var e=document.createElement("span");return e.className="redactor-invisible-space",e.innerHTML=this.opts.invisibleSpace,e},removeInlineTags:function(t){var i=this.opts.inlineTags;i.push("span"),"PRE"===t.tagName&&i.push("a"),e(t).find(i.join(",")).not("span.redactor-selection-marker").contents().unwrap()},replaceWithContents:function(t,i){var n=this;return e(t).replaceWith(function(){return i===!0&&n.utils.removeInlineTags(this),e(this).contents()}),e(t)},replaceToTag:function(t,i,n){var s,o=this;return e(t).replaceWith(function(){s=e("<"+i+" />").append(e(this).contents());for(var t=0;t<this.attributes.length;t++)s.attr(this.attributes[t].name,this.attributes[t].value);return n===!0&&o.utils.removeInlineTags(s),s}),s},isStartOfElement:function(){var e=this.selection.getBlock();if(!e)return!1;var t=this.caret.getOffsetOfElement(e);return 0===t},isEndOfElement:function(t){if("undefined"==typeof t&&(t=this.selection.getBlock(),!t))return!1;var i=this.caret.getOffsetOfElement(t),n=e.trim(e(t).text()).replace(/\n\r\n/g,"");return i===n.length},isEndOfEditor:function(){var t=this.$editor[0],i=this.caret.getOffsetOfElement(t),n=e.trim(e(t).html().replace(/(<([^>]+)>)/gi,""));return i===n.length},isBlock:function(e){return e=e[0]||e,e&&this.utils.isBlockTag(e.tagName)},isBlockTag:function(e){return"undefined"==typeof e?!1:this.reIsBlock.test(e)},isInline:function(e){return e=e[0]||e,e&&this.utils.isInlineTag(e.tagName)},isInlineTag:function(e){return"undefined"==typeof e?!1:this.reIsInline.test(e)},isTag:function(t,i){var n=e(t).closest(i,this.$editor[0]);return 1===n.length?n[0]:!1},isSelectAll:function(){return this.selectAll},enableSelectAll:function(){this.selectAll=!0},disableSelectAll:function(){this.selectAll=!1},isRedactorParent:function(t){return t?0===e(t).parents(".redactor-editor").length||e(t).hasClass("redactor-editor")?!1:t:!1},isCurrentOrParentHeader:function(){return this.utils.isCurrentOrParent(["H1","H2","H3","H4","H5","H6"])},isCurrentOrParent:function(t){var i=this.selection.getParent(),n=this.selection.getCurrent();if(e.isArray(t)){var s=0;return e.each(t,e.proxy(function(e,t){this.utils.isCurrentOrParentOne(n,i,t)&&s++},this)),0!==s}return this.utils.isCurrentOrParentOne(n,i,t)},isCurrentOrParentOne:function(e,t,i){return i=i.toUpperCase(),t&&t.tagName===i?t:e&&e.tagName===i?e:!1},isOldIe:function(){return!!(this.utils.browser("msie")&&parseInt(this.utils.browser("version"),10)<9)},isLessIe10:function(){return!!(this.utils.browser("msie")&&parseInt(this.utils.browser("version"),10)<10)},isIe11:function(){return!!navigator.userAgent.match(/Trident\/7\./)},browser:function(e){var t=navigator.userAgent.toLowerCase(),i=/(opr)[\/]([\w.]+)/.exec(t)||/(chrome)[ \/]([\w.]+)/.exec(t)||/(webkit)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(t)||/(webkit)[ \/]([\w.]+)/.exec(t)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(t)||/(msie) ([\w.]+)/.exec(t)||t.indexOf("trident")>=0&&/(rv)(?::| )([\w.]+)/.exec(t)||t.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(t)||[];return"safari"===e?"undefined"!=typeof i[3]?"safari"===i[3]:!1:"version"===e?i[2]:"webkit"===e?"chrome"===i[1]||"opr"===i[1]||"webkit"===i[1]:"rv"===i[1]?"msie"===e:"opr"===i[1]?"webkit"===e:e===i[1]}},t}),i("Redactor",["require","jquery","jquery-redactor-shim","options","modules/alignment","modules/block","modules/buffer","modules/build","modules/button","modules/caret","modules/clean","modules/code","modules/codeMirror","modules/core","modules/dropdown","modules/embed","modules/file","modules/focus","modules/fontcolor","modules/fontfamily","modules/fontsize","modules/fs","modules/fullscreen","modules/image","modules/indent","modules/inline","modules/insert","modules/keydown","modules/keyup","modules/lang","modules/line","modules/link","modules/linkify","modules/list","modules/media","modules/modal","modules/observe","modules/paragraphize","modules/paste","modules/placeholder","modules/progress","modules/resize","modules/selection","modules/shortcuts","modules/styles","modules/tabifier","modules/table","modules/textdirection","modules/tidy","modules/toolbar","modules/upload","modules/utils"],function(e){"use strict";function t(e,t){var s=this;this.beforeInit(t).always(function(t){if(s.$element=i(e),s.uuid=n++,s.rtePaste=!1,s.$pasteBox=!1,s.loadOptions(t),s.loadModules(s.modules),isNaN(s.opts.indentValue)&&(s.opts.indentValue=parseFloat(i(document.body).css("font-size"))),s.opts&&s.opts.codeOnly&&(s.opts.visual=!1),s.formatting={},i.merge(s.opts.blockLevelElements,s.opts.alignmentTags),s.reIsBlock=new RegExp("^("+s.opts.blockLevelElements.join("|")+")$","i"),s.reIsInline=new RegExp("^("+s.opts.inlineTags.join("|")+")$","i"),s.tidy.setupAllowed(),s.opts.deniedTags!==!1)for(var o=["html","head","link","body","meta","applet"],r=0;r<o.length;r++)s.opts.deniedTags.push(o[r]);s.lang.load(),i.extend(s.opts.shortcuts,s.opts.shortcutsAdd),s.core.setCallback("start"),s.start=!0,s.build.run(),s.fs.init(),s.fs.hidePluginButtons(),s.$element.on("modalOpened.redactor-api",s.fs.modalIframeBrowseInit),s.$element.on("dropdownShown.redactor-api",s.fs.dropdownShow),s.$element.on("sync.redactor-api",s.fs.sync)})}var i=e("jquery"),n=0;return e("jquery-redactor-shim"),Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),i=this,n=function(){},s=function(){return i.apply(this instanceof n?this:e,t.concat(Array.prototype.slice.call(arguments)))};return n.prototype=this.prototype,s.prototype=new n,s}),i.fn.redactor=function(e){var n=[],s=Array.prototype.slice.call(arguments,1);return"string"==typeof e?this.each(function(){var t,o=i.data(this,"redactor");if(-1!==e.search(/\./)?(t=e.split("."),"undefined"!=typeof o[t[0]]&&(t=o[t[0]][t[1]])):t=o[e],"undefined"!=typeof o&&i.isFunction(t)){var r=t.apply(o,s);void 0!==r&&r!==o&&n.push(r)}else i.error('No such method "'+e+'" for Redactor')}):this.each(function(){i.data(this,"redactor",{}),i.data(this,"redactor",new t(this,e))}),0===n.length?this:1===n.length?n[0]:n},window.hasRedactor=!0,window.Redactor=t.prototype={version:"1.1.3",keyCode:{BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,SPACE:32,ESC:27,TAB:9,CTRL:17,META:91,SHIFT:16,ALT:18,RIGHT:39,LEFT:37,LEFT_WIN:91},opts:e("options"),modules:["alignment","block","buffer","build","button","caret","clean","code","codeMirror","core","dropdown","embed","file","focus","fs","fontcolor","fontfamily","fontsize","fullscreen","image","indent","inline","insert","keydown","keyup","lang","line","link","linkify","list","media","modal","observe","paragraphize","paste","placeholder","progress","resize","selection","shortcuts","styles","tabifier","table","textdirection","tidy","toolbar","upload","utils"],loadOptions:function(e){this.opts=i.extend({},i.extend(!0,{},this.opts),this.$element.data(),e)},beforeInit:function(e){var t=i.Deferred();return t.resolve(e),t},getModuleMethods:function(e){return Object.getOwnPropertyNames(Object.getPrototypeOf(e)).filter(function(t){return"function"==typeof e[t]})},loadModules:function(e){for(var t=e.length,i=0;t>i;i++)this.bindModuleMethods(e[i])},bindModuleMethods:function(e){if("undefined"!=typeof this[e]){this[e]=new this[e];for(var t=this.getModuleMethods(this[e]),i=t.length,n=0;i>n;n++)this[e][t[n]]=this[e][t[n]].bind(this)}},alignment:e("modules/alignment"),block:e("modules/block"),buffer:e("modules/buffer"),build:e("modules/build"),button:e("modules/button"),caret:e("modules/caret"),clean:e("modules/clean"),code:e("modules/code"),codeMirror:e("modules/codeMirror"),core:e("modules/core"),dropdown:e("modules/dropdown"),embed:e("modules/embed"),file:e("modules/file"),focus:e("modules/focus"),fontcolor:e("modules/fontcolor"),fontfamily:e("modules/fontfamily"),fontsize:e("modules/fontsize"),fs:e("modules/fs"),fullscreen:e("modules/fullscreen"),image:e("modules/image"),indent:e("modules/indent"),inline:e("modules/inline"),insert:e("modules/insert"),keydown:e("modules/keydown"),keyup:e("modules/keyup"),lang:e("modules/lang"),line:e("modules/line"),link:e("modules/link"),linkify:e("modules/linkify"),list:e("modules/list"),media:e("modules/media"),modal:e("modules/modal"),observe:e("modules/observe"),paragraphize:e("modules/paragraphize"),paste:e("modules/paste"),placeholder:e("modules/placeholder"),progress:e("modules/progress"),resize:e("modules/resize"),selection:e("modules/selection"),shortcuts:e("modules/shortcuts"),styles:e("modules/styles"),tabifier:e("modules/tabifier"),table:e("modules/table"),textdirection:e("modules/textdirection"),tidy:e("modules/tidy"),toolbar:e("modules/toolbar"),upload:e("modules/upload"),utils:e("modules/utils")},t}),t("Redactor")}),function(e,t,i){"use strict";function n(e){e.buttonsHide=e.buttonsHide||[];var n={edit_background_color:"backcolor",edit_font_color:"fontcolor",edit_font_face:"fontfamily",edit_font_size:"fontsize",edit_html:"html",edit_images:"image",insert_tables:"table"};return t.each(n,function(t,i){s[t]||e.buttonsHide.push(i)}),e.forceImage&&(e.buttonsHide=i.without(e.buttonsHide,"image")),e}var s;e.prototype.opts=t.extend(e.prototype.opts,{aviaryPopupURL:"/cf_filemanager/imageedit.cfm?mode=editor&file={file}&composer",browseFileURL:"/cf_filemanager/adminfiles.cfm?opener=iframe",browseMediaURL:"/fs/pages/media_picker",browseSiteURL:"/fs/pages/picker",localStylesheet:"styles.cfm",link:{anchorSelector:".fsContentEditable [id], .redactor-editor [id]",mediaTest:/^#media-playlist-link/,siteFileTest:/^(file.cfm|\/?uploaded)/gi,onMediaBrowseReturn:function(e){return e.path="#media-playlist-link",e}}}),e.prototype.beforeInit=function(e){var i=t.Deferred();return s=s||(window.FSApp?window.FSApp.currentUser.attributes.rights.editor:void 0),s?i.resolve(n(e)):t.getJSON("/fs/sessions/user").always(function(t){s=t.rights?t.rights.editor:{},i.resolve(n(e))}),i.promise()}}(Redactor,jQuery,_),!function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):"undefined"!=typeof exports?module.exports=e(require("jquery")):e(jQuery)}(function(e){"use strict";var t=window.Slick||{};t=function(){function t(t,n){var s,o=this;o.defaults={accessibility:!0,adaptiveHeight:!1,appendArrows:e(t),appendDots:e(t),arrows:!0,asNavFor:null,prevArrow:'<button type="button" data-role="none" class="slick-prev" aria-label="Previous" tabindex="0" role="button">Previous</button>',nextArrow:'<button type="button" data-role="none" class="slick-next" aria-label="Next" tabindex="0" role="button">Next</button>',autoplay:!1,autoplaySpeed:3e3,centerMode:!1,centerPadding:"50px",cssEase:"ease",customPaging:function(e,t){return'<button type="button" data-role="none" role="button" aria-required="false" tabindex="0">'+(t+1)+"</button>"},dots:!1,dotsClass:"slick-dots",draggable:!0,easing:"linear",edgeFriction:.35,fade:!1,focusOnSelect:!1,infinite:!0,initialSlide:0,lazyLoad:"ondemand",mobileFirst:!1,pauseOnHover:!0,pauseOnDotsHover:!1,respondTo:"window",responsive:null,rows:1,rtl:!1,slide:"",slidesPerRow:1,slidesToShow:1,slidesToScroll:1,speed:500,swipe:!0,swipeToSlide:!1,touchMove:!0,touchThreshold:5,useCSS:!0,variableWidth:!1,vertical:!1,verticalSwiping:!1,waitForAnimate:!0,zIndex:1e3},o.initials={animating:!1,dragging:!1,autoPlayTimer:null,currentDirection:0,currentLeft:null,currentSlide:0,direction:1,$dots:null,listWidth:null,listHeight:null,loadIndex:0,$nextArrow:null,$prevArrow:null,slideCount:null,slideWidth:null,$slideTrack:null,$slides:null,sliding:!1,slideOffset:0,swipeLeft:null,$list:null,touchObject:{},transformsEnabled:!1,unslicked:!1},e.extend(o,o.initials),o.activeBreakpoint=null,o.animType=null,o.animProp=null,o.breakpoints=[],o.breakpointSettings=[],o.cssTransitions=!1,o.hidden="hidden",o.paused=!1,o.positionProp=null,o.respondTo=null,o.rowCount=1,o.shouldClick=!0,o.$slider=e(t),o.$slidesCache=null,o.transformType=null,o.transitionType=null,o.visibilityChange="visibilitychange",o.windowWidth=0,o.windowTimer=null,s=e(t).data("slick")||{},o.options=e.extend({},o.defaults,s,n),o.currentSlide=o.options.initialSlide,o.originalSettings=o.options,"undefined"!=typeof document.mozHidden?(o.hidden="mozHidden",o.visibilityChange="mozvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(o.hidden="webkitHidden",o.visibilityChange="webkitvisibilitychange"),o.autoPlay=e.proxy(o.autoPlay,o),o.autoPlayClear=e.proxy(o.autoPlayClear,o),o.changeSlide=e.proxy(o.changeSlide,o),o.clickHandler=e.proxy(o.clickHandler,o),o.selectHandler=e.proxy(o.selectHandler,o),o.setPosition=e.proxy(o.setPosition,o),o.swipeHandler=e.proxy(o.swipeHandler,o),o.dragHandler=e.proxy(o.dragHandler,o),o.keyHandler=e.proxy(o.keyHandler,o),o.autoPlayIterator=e.proxy(o.autoPlayIterator,o),o.instanceUid=i++,o.htmlExpr=/^(?:\s*(<[\w\W]+>)[^>]*)$/,o.registerBreakpoints(),o.init(!0),o.checkResponsive(!0)}var i=0;return t}(),t.prototype.addSlide=t.prototype.slickAdd=function(t,i,n){var s=this;if("boolean"==typeof i)n=i,i=null;else if(0>i||i>=s.slideCount)return!1;s.unload(),"number"==typeof i?0===i&&0===s.$slides.length?e(t).appendTo(s.$slideTrack):n?e(t).insertBefore(s.$slides.eq(i)):e(t).insertAfter(s.$slides.eq(i)):n===!0?e(t).prependTo(s.$slideTrack):e(t).appendTo(s.$slideTrack),s.$slides=s.$slideTrack.children(this.options.slide),s.$slideTrack.children(this.options.slide).detach(),s.$slideTrack.append(s.$slides),s.$slides.each(function(t,i){e(i).attr("data-slick-index",t)}),s.$slidesCache=s.$slides,s.reinit()},t.prototype.animateHeight=function(){var e=this;if(1===e.options.slidesToShow&&e.options.adaptiveHeight===!0&&e.options.vertical===!1){var t=e.$slides.eq(e.currentSlide).outerHeight(!0);e.$list.animate({height:t},e.options.speed)}},t.prototype.animateSlide=function(t,i){var n={},s=this;s.animateHeight(),s.options.rtl===!0&&s.options.vertical===!1&&(t=-t),s.transformsEnabled===!1?s.options.vertical===!1?s.$slideTrack.animate({left:t},s.options.speed,s.options.easing,i):s.$slideTrack.animate({top:t},s.options.speed,s.options.easing,i):s.cssTransitions===!1?(s.options.rtl===!0&&(s.currentLeft=-s.currentLeft),e({animStart:s.currentLeft}).animate({animStart:t},{duration:s.options.speed,easing:s.options.easing,step:function(e){e=Math.ceil(e),s.options.vertical===!1?(n[s.animType]="translate("+e+"px, 0px)",s.$slideTrack.css(n)):(n[s.animType]="translate(0px,"+e+"px)",s.$slideTrack.css(n))},complete:function(){i&&i.call()}})):(s.applyTransition(),t=Math.ceil(t),n[s.animType]=s.options.vertical===!1?"translate3d("+t+"px, 0px, 0px)":"translate3d(0px,"+t+"px, 0px)",s.$slideTrack.css(n),i&&setTimeout(function(){s.disableTransition(),i.call()},s.options.speed))},t.prototype.asNavFor=function(t){var i=this,n=i.options.asNavFor;n&&null!==n&&(n=e(n).not(i.$slider)),null!==n&&"object"==typeof n&&n.each(function(){var i=e(this).slick("getSlick");i.unslicked||i.slideHandler(t,!0)})},t.prototype.applyTransition=function(e){var t=this,i={};i[t.transitionType]=t.options.fade===!1?t.transformType+" "+t.options.speed+"ms "+t.options.cssEase:"opacity "+t.options.speed+"ms "+t.options.cssEase,t.options.fade===!1?t.$slideTrack.css(i):t.$slides.eq(e).css(i)},t.prototype.autoPlay=function(){var e=this;e.autoPlayTimer&&clearInterval(e.autoPlayTimer),e.slideCount>e.options.slidesToShow&&e.paused!==!0&&(e.autoPlayTimer=setInterval(e.autoPlayIterator,e.options.autoplaySpeed))},t.prototype.autoPlayClear=function(){var e=this;e.autoPlayTimer&&clearInterval(e.autoPlayTimer)},t.prototype.autoPlayIterator=function(){var e=this;e.options.infinite===!1?1===e.direction?(e.currentSlide+1===e.slideCount-1&&(e.direction=0),e.slideHandler(e.currentSlide+e.options.slidesToScroll)):(0===e.currentSlide-1&&(e.direction=1),e.slideHandler(e.currentSlide-e.options.slidesToScroll)):e.slideHandler(e.currentSlide+e.options.slidesToScroll)},t.prototype.buildArrows=function(){var t=this;t.options.arrows===!0&&(t.$prevArrow=e(t.options.prevArrow).addClass("slick-arrow"),t.$nextArrow=e(t.options.nextArrow).addClass("slick-arrow"),t.slideCount>t.options.slidesToShow?(t.$prevArrow.removeClass("slick-hidden").removeAttr("aria-hidden tabindex"),t.$nextArrow.removeClass("slick-hidden").removeAttr("aria-hidden tabindex"),t.htmlExpr.test(t.options.prevArrow)&&t.$prevArrow.prependTo(t.options.appendArrows),t.htmlExpr.test(t.options.nextArrow)&&t.$nextArrow.appendTo(t.options.appendArrows),t.options.infinite!==!0&&t.$prevArrow.addClass("slick-disabled").attr("aria-disabled","true")):t.$prevArrow.add(t.$nextArrow).addClass("slick-hidden").attr({"aria-disabled":"true",tabindex:"-1"}))},t.prototype.buildDots=function(){var t,i,n=this;if(n.options.dots===!0&&n.slideCount>n.options.slidesToShow){for(i='<ul class="'+n.options.dotsClass+'">',t=0;t<=n.getDotCount();t+=1)i+="<li>"+n.options.customPaging.call(this,n,t)+"</li>";i+="</ul>",n.$dots=e(i).appendTo(n.options.appendDots),n.$dots.find("li").first().addClass("slick-active").attr("aria-hidden","false")}},t.prototype.buildOut=function(){var t=this;t.$slides=t.$slider.children(t.options.slide+":not(.slick-cloned)").addClass("slick-slide"),t.slideCount=t.$slides.length,t.$slides.each(function(t,i){e(i).attr("data-slick-index",t).data("originalStyling",e(i).attr("style")||"")}),t.$slidesCache=t.$slides,t.$slider.addClass("slick-slider"),t.$slideTrack=0===t.slideCount?e('<div class="slick-track"/>').appendTo(t.$slider):t.$slides.wrapAll('<div class="slick-track"/>').parent(),t.$list=t.$slideTrack.wrap('<div aria-live="polite" class="slick-list"/>').parent(),t.$slideTrack.css("opacity",0),(t.options.centerMode===!0||t.options.swipeToSlide===!0)&&(t.options.slidesToScroll=1),e("img[data-lazy]",t.$slider).not("[src]").addClass("slick-loading"),t.setupInfinite(),t.buildArrows(),t.buildDots(),t.updateDots(),t.setSlideClasses("number"==typeof t.currentSlide?t.currentSlide:0),t.options.draggable===!0&&t.$list.addClass("draggable")},t.prototype.buildRows=function(){var e,t,i,n,s,o,r,a=this;if(n=document.createDocumentFragment(),o=a.$slider.children(),a.options.rows>1){for(r=a.options.slidesPerRow*a.options.rows,s=Math.ceil(o.length/r),e=0;s>e;e++){var l=document.createElement("div");for(t=0;t<a.options.rows;t++){var c=document.createElement("div");for(i=0;i<a.options.slidesPerRow;i++){var d=e*r+(t*a.options.slidesPerRow+i);o.get(d)&&c.appendChild(o.get(d))}l.appendChild(c)}n.appendChild(l)}a.$slider.html(n),a.$slider.children().children().children().css({width:100/a.options.slidesPerRow+"%",display:"inline-block"})}},t.prototype.checkResponsive=function(t,i){var n,s,o,r=this,a=!1,l=r.$slider.width(),c=window.innerWidth||e(window).width();if("window"===r.respondTo?o=c:"slider"===r.respondTo?o=l:"min"===r.respondTo&&(o=Math.min(c,l)),r.options.responsive&&r.options.responsive.length&&null!==r.options.responsive){s=null;for(n in r.breakpoints)r.breakpoints.hasOwnProperty(n)&&(r.originalSettings.mobileFirst===!1?o<r.breakpoints[n]&&(s=r.breakpoints[n]):o>r.breakpoints[n]&&(s=r.breakpoints[n]));null!==s?null!==r.activeBreakpoint?(s!==r.activeBreakpoint||i)&&(r.activeBreakpoint=s,"unslick"===r.breakpointSettings[s]?r.unslick(s):(r.options=e.extend({},r.originalSettings,r.breakpointSettings[s]),t===!0&&(r.currentSlide=r.options.initialSlide),r.refresh(t)),a=s):(r.activeBreakpoint=s,"unslick"===r.breakpointSettings[s]?r.unslick(s):(r.options=e.extend({},r.originalSettings,r.breakpointSettings[s]),t===!0&&(r.currentSlide=r.options.initialSlide),r.refresh(t)),a=s):null!==r.activeBreakpoint&&(r.activeBreakpoint=null,r.options=r.originalSettings,t===!0&&(r.currentSlide=r.options.initialSlide),r.refresh(t),a=s),t||a===!1||r.$slider.trigger("breakpoint",[r,a])}},t.prototype.changeSlide=function(t,i){var n,s,o,r=this,a=e(t.target);switch(a.is("a")&&t.preventDefault(),a.is("li")||(a=a.closest("li")),o=0!==r.slideCount%r.options.slidesToScroll,n=o?0:(r.slideCount-r.currentSlide)%r.options.slidesToScroll,t.data.message){case"previous":s=0===n?r.options.slidesToScroll:r.options.slidesToShow-n,
r.slideCount>r.options.slidesToShow&&r.slideHandler(r.currentSlide-s,!1,i);break;case"next":s=0===n?r.options.slidesToScroll:n,r.slideCount>r.options.slidesToShow&&r.slideHandler(r.currentSlide+s,!1,i);break;case"index":var l=0===t.data.index?0:t.data.index||a.index()*r.options.slidesToScroll;r.slideHandler(r.checkNavigable(l),!1,i),a.children().trigger("focus");break;default:return}},t.prototype.checkNavigable=function(e){var t,i,n=this;if(t=n.getNavigableIndexes(),i=0,e>t[t.length-1])e=t[t.length-1];else for(var s in t){if(e<t[s]){e=i;break}i=t[s]}return e},t.prototype.cleanUpEvents=function(){var t=this;t.options.dots&&null!==t.$dots&&(e("li",t.$dots).off("click.slick",t.changeSlide),t.options.pauseOnDotsHover===!0&&t.options.autoplay===!0&&e("li",t.$dots).off("mouseenter.slick",e.proxy(t.setPaused,t,!0)).off("mouseleave.slick",e.proxy(t.setPaused,t,!1))),t.options.arrows===!0&&t.slideCount>t.options.slidesToShow&&(t.$prevArrow&&t.$prevArrow.off("click.slick",t.changeSlide),t.$nextArrow&&t.$nextArrow.off("click.slick",t.changeSlide)),t.$list.off("touchstart.slick mousedown.slick",t.swipeHandler),t.$list.off("touchmove.slick mousemove.slick",t.swipeHandler),t.$list.off("touchend.slick mouseup.slick",t.swipeHandler),t.$list.off("touchcancel.slick mouseleave.slick",t.swipeHandler),t.$list.off("click.slick",t.clickHandler),e(document).off(t.visibilityChange,t.visibility),t.$list.off("mouseenter.slick",e.proxy(t.setPaused,t,!0)),t.$list.off("mouseleave.slick",e.proxy(t.setPaused,t,!1)),t.options.accessibility===!0&&t.$list.off("keydown.slick",t.keyHandler),t.options.focusOnSelect===!0&&e(t.$slideTrack).children().off("click.slick",t.selectHandler),e(window).off("orientationchange.slick.slick-"+t.instanceUid,t.orientationChange),e(window).off("resize.slick.slick-"+t.instanceUid,t.resize),e("[draggable!=true]",t.$slideTrack).off("dragstart",t.preventDefault),e(window).off("load.slick.slick-"+t.instanceUid,t.setPosition),e(document).off("ready.slick.slick-"+t.instanceUid,t.setPosition)},t.prototype.cleanUpRows=function(){var e,t=this;t.options.rows>1&&(e=t.$slides.children().children(),e.removeAttr("style"),t.$slider.html(e))},t.prototype.clickHandler=function(e){var t=this;t.shouldClick===!1&&(e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault())},t.prototype.destroy=function(t){var i=this;i.autoPlayClear(),i.touchObject={},i.cleanUpEvents(),e(".slick-cloned",i.$slider).detach(),i.$dots&&i.$dots.remove(),i.$prevArrow&&i.$prevArrow.length&&(i.$prevArrow.removeClass("slick-disabled slick-arrow slick-hidden").removeAttr("aria-hidden aria-disabled tabindex").css("display",""),i.htmlExpr.test(i.options.prevArrow)&&i.$prevArrow.remove()),i.$nextArrow&&i.$nextArrow.length&&(i.$nextArrow.removeClass("slick-disabled slick-arrow slick-hidden").removeAttr("aria-hidden aria-disabled tabindex").css("display",""),i.htmlExpr.test(i.options.nextArrow)&&i.$nextArrow.remove()),i.$slides&&(i.$slides.removeClass("slick-slide slick-active slick-center slick-visible slick-current").removeAttr("aria-hidden").removeAttr("data-slick-index").each(function(){e(this).attr("style",e(this).data("originalStyling"))}),i.$slideTrack.children(this.options.slide).detach(),i.$slideTrack.detach(),i.$list.detach(),i.$slider.append(i.$slides)),i.cleanUpRows(),i.$slider.removeClass("slick-slider"),i.$slider.removeClass("slick-initialized"),i.unslicked=!0,t||i.$slider.trigger("destroy",[i])},t.prototype.disableTransition=function(e){var t=this,i={};i[t.transitionType]="",t.options.fade===!1?t.$slideTrack.css(i):t.$slides.eq(e).css(i)},t.prototype.fadeSlide=function(e,t){var i=this;i.cssTransitions===!1?(i.$slides.eq(e).css({zIndex:i.options.zIndex}),i.$slides.eq(e).animate({opacity:1},i.options.speed,i.options.easing,t)):(i.applyTransition(e),i.$slides.eq(e).css({opacity:1,zIndex:i.options.zIndex}),t&&setTimeout(function(){i.disableTransition(e),t.call()},i.options.speed))},t.prototype.fadeSlideOut=function(e){var t=this;t.cssTransitions===!1?t.$slides.eq(e).animate({opacity:0,zIndex:t.options.zIndex-2},t.options.speed,t.options.easing):(t.applyTransition(e),t.$slides.eq(e).css({opacity:0,zIndex:t.options.zIndex-2}))},t.prototype.filterSlides=t.prototype.slickFilter=function(e){var t=this;null!==e&&(t.unload(),t.$slideTrack.children(this.options.slide).detach(),t.$slidesCache.filter(e).appendTo(t.$slideTrack),t.reinit())},t.prototype.getCurrent=t.prototype.slickCurrentSlide=function(){var e=this;return e.currentSlide},t.prototype.getDotCount=function(){var e=this,t=0,i=0,n=0;if(e.options.infinite===!0)for(;t<e.slideCount;)++n,t=i+e.options.slidesToShow,i+=e.options.slidesToScroll<=e.options.slidesToShow?e.options.slidesToScroll:e.options.slidesToShow;else if(e.options.centerMode===!0)n=e.slideCount;else for(;t<e.slideCount;)++n,t=i+e.options.slidesToShow,i+=e.options.slidesToScroll<=e.options.slidesToShow?e.options.slidesToScroll:e.options.slidesToShow;return n-1},t.prototype.getLeft=function(e){var t,i,n,s=this,o=0;return s.slideOffset=0,i=s.$slides.first().outerHeight(!0),s.options.infinite===!0?(s.slideCount>s.options.slidesToShow&&(s.slideOffset=-1*s.slideWidth*s.options.slidesToShow,o=-1*i*s.options.slidesToShow),0!==s.slideCount%s.options.slidesToScroll&&e+s.options.slidesToScroll>s.slideCount&&s.slideCount>s.options.slidesToShow&&(e>s.slideCount?(s.slideOffset=-1*(s.options.slidesToShow-(e-s.slideCount))*s.slideWidth,o=-1*(s.options.slidesToShow-(e-s.slideCount))*i):(s.slideOffset=-1*s.slideCount%s.options.slidesToScroll*s.slideWidth,o=-1*s.slideCount%s.options.slidesToScroll*i))):e+s.options.slidesToShow>s.slideCount&&(s.slideOffset=(e+s.options.slidesToShow-s.slideCount)*s.slideWidth,o=(e+s.options.slidesToShow-s.slideCount)*i),s.slideCount<=s.options.slidesToShow&&(s.slideOffset=0,o=0),s.options.centerMode===!0&&s.options.infinite===!0?s.slideOffset+=s.slideWidth*Math.floor(s.options.slidesToShow/2)-s.slideWidth:s.options.centerMode===!0&&(s.slideOffset=0,s.slideOffset+=s.slideWidth*Math.floor(s.options.slidesToShow/2)),t=s.options.vertical===!1?-1*e*s.slideWidth+s.slideOffset:-1*e*i+o,s.options.variableWidth===!0&&(n=s.slideCount<=s.options.slidesToShow||s.options.infinite===!1?s.$slideTrack.children(".slick-slide").eq(e):s.$slideTrack.children(".slick-slide").eq(e+s.options.slidesToShow),t=n[0]?-1*n[0].offsetLeft:0,s.options.centerMode===!0&&(n=s.options.infinite===!1?s.$slideTrack.children(".slick-slide").eq(e):s.$slideTrack.children(".slick-slide").eq(e+s.options.slidesToShow+1),t=n[0]?-1*n[0].offsetLeft:0,t+=(s.$list.width()-n.outerWidth())/2)),t},t.prototype.getOption=t.prototype.slickGetOption=function(e){var t=this;return t.options[e]},t.prototype.getNavigableIndexes=function(){var e,t=this,i=0,n=0,s=[];for(t.options.infinite===!1?e=t.slideCount:(i=-1*t.options.slidesToScroll,n=-1*t.options.slidesToScroll,e=2*t.slideCount);e>i;)s.push(i),i=n+t.options.slidesToScroll,n+=t.options.slidesToScroll<=t.options.slidesToShow?t.options.slidesToScroll:t.options.slidesToShow;return s},t.prototype.getSlick=function(){return this},t.prototype.getSlideCount=function(){var t,i,n,s=this;return n=s.options.centerMode===!0?s.slideWidth*Math.floor(s.options.slidesToShow/2):0,s.options.swipeToSlide===!0?(s.$slideTrack.find(".slick-slide").each(function(t,o){return o.offsetLeft-n+e(o).outerWidth()/2>-1*s.swipeLeft?(i=o,!1):void 0}),t=Math.abs(e(i).attr("data-slick-index")-s.currentSlide)||1):s.options.slidesToScroll},t.prototype.goTo=t.prototype.slickGoTo=function(e,t){var i=this;i.changeSlide({data:{message:"index",index:parseInt(e)}},t)},t.prototype.init=function(t){var i=this;e(i.$slider).hasClass("slick-initialized")||(e(i.$slider).addClass("slick-initialized"),i.buildRows(),i.buildOut(),i.setProps(),i.startLoad(),i.loadSlider(),i.initializeEvents(),i.updateArrows(),i.updateDots()),t&&i.$slider.trigger("init",[i]),i.options.accessibility===!0&&i.initADA()},t.prototype.initArrowEvents=function(){var e=this;e.options.arrows===!0&&e.slideCount>e.options.slidesToShow&&(e.$prevArrow.on("click.slick",{message:"previous"},e.changeSlide),e.$nextArrow.on("click.slick",{message:"next"},e.changeSlide))},t.prototype.initDotEvents=function(){var t=this;t.options.dots===!0&&t.slideCount>t.options.slidesToShow&&e("li",t.$dots).on("click.slick",{message:"index"},t.changeSlide),t.options.dots===!0&&t.options.pauseOnDotsHover===!0&&t.options.autoplay===!0&&e("li",t.$dots).on("mouseenter.slick",e.proxy(t.setPaused,t,!0)).on("mouseleave.slick",e.proxy(t.setPaused,t,!1))},t.prototype.initializeEvents=function(){var t=this;t.initArrowEvents(),t.initDotEvents(),t.$list.on("touchstart.slick mousedown.slick",{action:"start"},t.swipeHandler),t.$list.on("touchmove.slick mousemove.slick",{action:"move"},t.swipeHandler),t.$list.on("touchend.slick mouseup.slick",{action:"end"},t.swipeHandler),t.$list.on("touchcancel.slick mouseleave.slick",{action:"end"},t.swipeHandler),t.$list.on("click.slick",t.clickHandler),e(document).on(t.visibilityChange,e.proxy(t.visibility,t)),t.$list.on("mouseenter.slick",e.proxy(t.setPaused,t,!0)),t.$list.on("mouseleave.slick",e.proxy(t.setPaused,t,!1)),t.options.accessibility===!0&&t.$list.on("keydown.slick",t.keyHandler),t.options.focusOnSelect===!0&&e(t.$slideTrack).children().on("click.slick",t.selectHandler),e(window).on("orientationchange.slick.slick-"+t.instanceUid,e.proxy(t.orientationChange,t)),e(window).on("resize.slick.slick-"+t.instanceUid,e.proxy(t.resize,t)),e("[draggable!=true]",t.$slideTrack).on("dragstart",t.preventDefault),e(window).on("load.slick.slick-"+t.instanceUid,t.setPosition),e(document).on("ready.slick.slick-"+t.instanceUid,t.setPosition)},t.prototype.initUI=function(){var e=this;e.options.arrows===!0&&e.slideCount>e.options.slidesToShow&&(e.$prevArrow.show(),e.$nextArrow.show()),e.options.dots===!0&&e.slideCount>e.options.slidesToShow&&e.$dots.show(),e.options.autoplay===!0&&e.autoPlay()},t.prototype.keyHandler=function(e){var t=this;e.target.tagName.match("TEXTAREA|INPUT|SELECT")||(37===e.keyCode&&t.options.accessibility===!0?t.changeSlide({data:{message:"previous"}}):39===e.keyCode&&t.options.accessibility===!0&&t.changeSlide({data:{message:"next"}}))},t.prototype.lazyLoad=function(){function t(t){e("img[data-lazy]",t).each(function(){var t=e(this),i=e(this).attr("data-lazy"),n=document.createElement("img");n.onload=function(){t.animate({opacity:0},100,function(){t.attr("src",i).animate({opacity:1},200,function(){t.removeAttr("data-lazy").removeClass("slick-loading")})})},n.src=i})}var i,n,s,o,r=this;r.options.centerMode===!0?r.options.infinite===!0?(s=r.currentSlide+(r.options.slidesToShow/2+1),o=s+r.options.slidesToShow+2):(s=Math.max(0,r.currentSlide-(r.options.slidesToShow/2+1)),o=2+(r.options.slidesToShow/2+1)+r.currentSlide):(s=r.options.infinite?r.options.slidesToShow+r.currentSlide:r.currentSlide,o=s+r.options.slidesToShow,r.options.fade===!0&&(s>0&&s--,o<=r.slideCount&&o++)),i=r.$slider.find(".slick-slide").slice(s,o),t(i),r.slideCount<=r.options.slidesToShow?(n=r.$slider.find(".slick-slide"),t(n)):r.currentSlide>=r.slideCount-r.options.slidesToShow?(n=r.$slider.find(".slick-cloned").slice(0,r.options.slidesToShow),t(n)):0===r.currentSlide&&(n=r.$slider.find(".slick-cloned").slice(-1*r.options.slidesToShow),t(n))},t.prototype.loadSlider=function(){var e=this;e.setPosition(),e.$slideTrack.css({opacity:1}),e.$slider.removeClass("slick-loading"),e.initUI(),"progressive"===e.options.lazyLoad&&e.progressiveLazyLoad()},t.prototype.next=t.prototype.slickNext=function(){var e=this;e.changeSlide({data:{message:"next"}})},t.prototype.orientationChange=function(){var e=this;e.checkResponsive(),e.setPosition()},t.prototype.pause=t.prototype.slickPause=function(){var e=this;e.autoPlayClear(),e.paused=!0},t.prototype.play=t.prototype.slickPlay=function(){var e=this;e.paused=!1,e.autoPlay()},t.prototype.postSlide=function(e){var t=this;t.$slider.trigger("afterChange",[t,e]),t.animating=!1,t.setPosition(),t.swipeLeft=null,t.options.autoplay===!0&&t.paused===!1&&t.autoPlay(),t.options.accessibility===!0&&t.initADA()},t.prototype.prev=t.prototype.slickPrev=function(){var e=this;e.changeSlide({data:{message:"previous"}})},t.prototype.preventDefault=function(e){e.preventDefault()},t.prototype.progressiveLazyLoad=function(){var t,i,n=this;t=e("img[data-lazy]",n.$slider).length,t>0&&(i=e("img[data-lazy]",n.$slider).first(),i.attr("src",i.attr("data-lazy")).removeClass("slick-loading").load(function(){i.removeAttr("data-lazy"),n.progressiveLazyLoad(),n.options.adaptiveHeight===!0&&n.setPosition()}).error(function(){i.removeAttr("data-lazy"),n.progressiveLazyLoad()}))},t.prototype.refresh=function(t){var i=this,n=i.currentSlide;i.destroy(!0),e.extend(i,i.initials,{currentSlide:n}),i.init(),t||i.changeSlide({data:{message:"index",index:n}},!1)},t.prototype.registerBreakpoints=function(){var t,i,n,s=this,o=s.options.responsive||null;if("array"===e.type(o)&&o.length){s.respondTo=s.options.respondTo||"window";for(t in o)if(n=s.breakpoints.length-1,i=o[t].breakpoint,o.hasOwnProperty(t)){for(;n>=0;)s.breakpoints[n]&&s.breakpoints[n]===i&&s.breakpoints.splice(n,1),n--;s.breakpoints.push(i),s.breakpointSettings[i]=o[t].settings}s.breakpoints.sort(function(e,t){return s.options.mobileFirst?e-t:t-e})}},t.prototype.reinit=function(){var t=this;t.$slides=t.$slideTrack.children(t.options.slide).addClass("slick-slide"),t.slideCount=t.$slides.length,t.currentSlide>=t.slideCount&&0!==t.currentSlide&&(t.currentSlide=t.currentSlide-t.options.slidesToScroll),t.slideCount<=t.options.slidesToShow&&(t.currentSlide=0),t.registerBreakpoints(),t.setProps(),t.setupInfinite(),t.buildArrows(),t.updateArrows(),t.initArrowEvents(),t.buildDots(),t.updateDots(),t.initDotEvents(),t.checkResponsive(!1,!0),t.options.focusOnSelect===!0&&e(t.$slideTrack).children().on("click.slick",t.selectHandler),t.setSlideClasses(0),t.setPosition(),t.$slider.trigger("reInit",[t]),t.options.autoplay===!0&&t.focusHandler()},t.prototype.resize=function(){var t=this;e(window).width()!==t.windowWidth&&(clearTimeout(t.windowDelay),t.windowDelay=window.setTimeout(function(){t.windowWidth=e(window).width(),t.checkResponsive(),t.unslicked||t.setPosition()},50))},t.prototype.removeSlide=t.prototype.slickRemove=function(e,t,i){var n=this;return"boolean"==typeof e?(t=e,e=t===!0?0:n.slideCount-1):e=t===!0?--e:e,n.slideCount<1||0>e||e>n.slideCount-1?!1:(n.unload(),i===!0?n.$slideTrack.children().remove():n.$slideTrack.children(this.options.slide).eq(e).remove(),n.$slides=n.$slideTrack.children(this.options.slide),n.$slideTrack.children(this.options.slide).detach(),n.$slideTrack.append(n.$slides),n.$slidesCache=n.$slides,void n.reinit())},t.prototype.setCSS=function(e){var t,i,n=this,s={};n.options.rtl===!0&&(e=-e),t="left"==n.positionProp?Math.ceil(e)+"px":"0px",i="top"==n.positionProp?Math.ceil(e)+"px":"0px",s[n.positionProp]=e,n.transformsEnabled===!1?n.$slideTrack.css(s):(s={},n.cssTransitions===!1?(s[n.animType]="translate("+t+", "+i+")",n.$slideTrack.css(s)):(s[n.animType]="translate3d("+t+", "+i+", 0px)",n.$slideTrack.css(s)))},t.prototype.setDimensions=function(){var e=this;e.options.vertical===!1?e.options.centerMode===!0&&e.$list.css({padding:"0px "+e.options.centerPadding}):(e.$list.height(e.$slides.first().outerHeight(!0)*e.options.slidesToShow),e.options.centerMode===!0&&e.$list.css({padding:e.options.centerPadding+" 0px"})),e.listWidth=e.$list.width(),e.listHeight=e.$list.height(),e.options.vertical===!1&&e.options.variableWidth===!1?(e.slideWidth=Math.ceil(e.listWidth/e.options.slidesToShow),e.$slideTrack.width(Math.ceil(e.slideWidth*e.$slideTrack.children(".slick-slide").length))):e.options.variableWidth===!0?e.$slideTrack.width(5e3*e.slideCount):(e.slideWidth=Math.ceil(e.listWidth),e.$slideTrack.height(Math.ceil(e.$slides.first().outerHeight(!0)*e.$slideTrack.children(".slick-slide").length)));var t=e.$slides.first().outerWidth(!0)-e.$slides.first().width();e.options.variableWidth===!1&&e.$slideTrack.children(".slick-slide").width(e.slideWidth-t)},t.prototype.setFade=function(){var t,i=this;i.$slides.each(function(n,s){t=-1*i.slideWidth*n,i.options.rtl===!0?e(s).css({position:"relative",right:t,top:0,zIndex:i.options.zIndex-2,opacity:0}):e(s).css({position:"relative",left:t,top:0,zIndex:i.options.zIndex-2,opacity:0})}),i.$slides.eq(i.currentSlide).css({zIndex:i.options.zIndex-1,opacity:1})},t.prototype.setHeight=function(){var e=this;if(1===e.options.slidesToShow&&e.options.adaptiveHeight===!0&&e.options.vertical===!1){var t=e.$slides.eq(e.currentSlide).outerHeight(!0);e.$list.css("height",t)}},t.prototype.setOption=t.prototype.slickSetOption=function(t,i,n){var s,o,r=this;if("responsive"===t&&"array"===e.type(i))for(o in i)if("array"!==e.type(r.options.responsive))r.options.responsive=[i[o]];else{for(s=r.options.responsive.length-1;s>=0;)r.options.responsive[s].breakpoint===i[o].breakpoint&&r.options.responsive.splice(s,1),s--;r.options.responsive.push(i[o])}else r.options[t]=i;n===!0&&(r.unload(),r.reinit())},t.prototype.setPosition=function(){var e=this;e.setDimensions(),e.setHeight(),e.options.fade===!1?e.setCSS(e.getLeft(e.currentSlide)):e.setFade(),e.$slider.trigger("setPosition",[e])},t.prototype.setProps=function(){var e=this,t=document.body.style;e.positionProp=e.options.vertical===!0?"top":"left","top"===e.positionProp?e.$slider.addClass("slick-vertical"):e.$slider.removeClass("slick-vertical"),(void 0!==t.WebkitTransition||void 0!==t.MozTransition||void 0!==t.msTransition)&&e.options.useCSS===!0&&(e.cssTransitions=!0),e.options.fade&&("number"==typeof e.options.zIndex?e.options.zIndex<3&&(e.options.zIndex=3):e.options.zIndex=e.defaults.zIndex),void 0!==t.OTransform&&(e.animType="OTransform",e.transformType="-o-transform",e.transitionType="OTransition",void 0===t.perspectiveProperty&&void 0===t.webkitPerspective&&(e.animType=!1)),void 0!==t.MozTransform&&(e.animType="MozTransform",e.transformType="-moz-transform",e.transitionType="MozTransition",void 0===t.perspectiveProperty&&void 0===t.MozPerspective&&(e.animType=!1)),void 0!==t.webkitTransform&&(e.animType="webkitTransform",e.transformType="-webkit-transform",e.transitionType="webkitTransition",void 0===t.perspectiveProperty&&void 0===t.webkitPerspective&&(e.animType=!1)),void 0!==t.msTransform&&(e.animType="msTransform",e.transformType="-ms-transform",e.transitionType="msTransition",void 0===t.msTransform&&(e.animType=!1)),void 0!==t.transform&&e.animType!==!1&&(e.animType="transform",e.transformType="transform",e.transitionType="transition"),e.transformsEnabled=null!==e.animType&&e.animType!==!1},t.prototype.setSlideClasses=function(e){var t,i,n,s,o=this;i=o.$slider.find(".slick-slide").removeClass("slick-active slick-center slick-current").attr("aria-hidden","true"),o.$slides.eq(e).addClass("slick-current"),o.options.centerMode===!0?(t=Math.floor(o.options.slidesToShow/2),o.options.infinite===!0&&(e>=t&&e<=o.slideCount-1-t?o.$slides.slice(e-t,e+t+1).addClass("slick-active").attr("aria-hidden","false"):(n=o.options.slidesToShow+e,i.slice(n-t+1,n+t+2).addClass("slick-active").attr("aria-hidden","false")),0===e?i.eq(i.length-1-o.options.slidesToShow).addClass("slick-center"):e===o.slideCount-1&&i.eq(o.options.slidesToShow).addClass("slick-center")),o.$slides.eq(e).addClass("slick-center")):e>=0&&e<=o.slideCount-o.options.slidesToShow?o.$slides.slice(e,e+o.options.slidesToShow).addClass("slick-active").attr("aria-hidden","false"):i.length<=o.options.slidesToShow?i.addClass("slick-active").attr("aria-hidden","false"):(s=o.slideCount%o.options.slidesToShow,n=o.options.infinite===!0?o.options.slidesToShow+e:e,o.options.slidesToShow==o.options.slidesToScroll&&o.slideCount-e<o.options.slidesToShow?i.slice(n-(o.options.slidesToShow-s),n+s).addClass("slick-active").attr("aria-hidden","false"):i.slice(n,n+o.options.slidesToShow).addClass("slick-active").attr("aria-hidden","false")),"ondemand"===o.options.lazyLoad&&o.lazyLoad()},t.prototype.setupInfinite=function(){var t,i,n,s=this;if(s.options.fade===!0&&(s.options.centerMode=!1),s.options.infinite===!0&&s.options.fade===!1&&(i=null,s.slideCount>s.options.slidesToShow)){for(n=s.options.centerMode===!0?s.options.slidesToShow+1:s.options.slidesToShow,t=s.slideCount;t>s.slideCount-n;t-=1)i=t-1,e(s.$slides[i]).clone(!0).attr("id","").attr("data-slick-index",i-s.slideCount).prependTo(s.$slideTrack).addClass("slick-cloned");for(t=0;n>t;t+=1)i=t,e(s.$slides[i]).clone(!0).attr("id","").attr("data-slick-index",i+s.slideCount).appendTo(s.$slideTrack).addClass("slick-cloned");s.$slideTrack.find(".slick-cloned").find("[id]").each(function(){e(this).attr("id","")})}},t.prototype.setPaused=function(e){var t=this;t.options.autoplay===!0&&t.options.pauseOnHover===!0&&(t.paused=e,e?t.autoPlayClear():t.autoPlay())},t.prototype.selectHandler=function(t){var i=this,n=e(t.target).is(".slick-slide")?e(t.target):e(t.target).parents(".slick-slide"),s=parseInt(n.attr("data-slick-index"));return s||(s=0),i.slideCount<=i.options.slidesToShow?(i.setSlideClasses(s),void i.asNavFor(s)):void i.slideHandler(s)},t.prototype.slideHandler=function(e,t,i){var n,s,o,r,a=null,l=this;return t=t||!1,l.animating===!0&&l.options.waitForAnimate===!0||l.options.fade===!0&&l.currentSlide===e||l.slideCount<=l.options.slidesToShow?void 0:(t===!1&&l.asNavFor(e),n=e,a=l.getLeft(n),r=l.getLeft(l.currentSlide),l.currentLeft=null===l.swipeLeft?r:l.swipeLeft,l.options.infinite===!1&&l.options.centerMode===!1&&(0>e||e>l.getDotCount()*l.options.slidesToScroll)?void(l.options.fade===!1&&(n=l.currentSlide,i!==!0?l.animateSlide(r,function(){l.postSlide(n)}):l.postSlide(n))):l.options.infinite===!1&&l.options.centerMode===!0&&(0>e||e>l.slideCount-l.options.slidesToScroll)?void(l.options.fade===!1&&(n=l.currentSlide,i!==!0?l.animateSlide(r,function(){l.postSlide(n)}):l.postSlide(n))):(l.options.autoplay===!0&&clearInterval(l.autoPlayTimer),s=0>n?0!==l.slideCount%l.options.slidesToScroll?l.slideCount-l.slideCount%l.options.slidesToScroll:l.slideCount+n:n>=l.slideCount?0!==l.slideCount%l.options.slidesToScroll?0:n-l.slideCount:n,l.animating=!0,l.$slider.trigger("beforeChange",[l,l.currentSlide,s]),o=l.currentSlide,l.currentSlide=s,l.setSlideClasses(l.currentSlide),l.updateDots(),l.updateArrows(),l.options.fade===!0?(i!==!0?(l.fadeSlideOut(o),l.fadeSlide(s,function(){l.postSlide(s)})):l.postSlide(s),void l.animateHeight()):void(i!==!0?l.animateSlide(a,function(){l.postSlide(s)}):l.postSlide(s))))},t.prototype.startLoad=function(){var e=this;e.options.arrows===!0&&e.slideCount>e.options.slidesToShow&&(e.$prevArrow.hide(),e.$nextArrow.hide()),e.options.dots===!0&&e.slideCount>e.options.slidesToShow&&e.$dots.hide(),e.$slider.addClass("slick-loading")},t.prototype.swipeDirection=function(){var e,t,i,n,s=this;return e=s.touchObject.startX-s.touchObject.curX,t=s.touchObject.startY-s.touchObject.curY,i=Math.atan2(t,e),n=Math.round(180*i/Math.PI),0>n&&(n=360-Math.abs(n)),45>=n&&n>=0?s.options.rtl===!1?"left":"right":360>=n&&n>=315?s.options.rtl===!1?"left":"right":n>=135&&225>=n?s.options.rtl===!1?"right":"left":s.options.verticalSwiping===!0?n>=35&&135>=n?"left":"right":"vertical"},t.prototype.swipeEnd=function(){var e,t=this;if(t.dragging=!1,t.shouldClick=!(t.touchObject.swipeLength>10),void 0===t.touchObject.curX)return!1;if(t.touchObject.edgeHit===!0&&t.$slider.trigger("edge",[t,t.swipeDirection()]),t.touchObject.swipeLength>=t.touchObject.minSwipe)switch(t.swipeDirection()){case"left":e=t.options.swipeToSlide?t.checkNavigable(t.currentSlide+t.getSlideCount()):t.currentSlide+t.getSlideCount(),t.slideHandler(e),t.currentDirection=0,t.touchObject={},t.$slider.trigger("swipe",[t,"left"]);break;case"right":e=t.options.swipeToSlide?t.checkNavigable(t.currentSlide-t.getSlideCount()):t.currentSlide-t.getSlideCount(),t.slideHandler(e),t.currentDirection=1,t.touchObject={},t.$slider.trigger("swipe",[t,"right"])}else t.touchObject.startX!==t.touchObject.curX&&(t.slideHandler(t.currentSlide),t.touchObject={})},t.prototype.swipeHandler=function(e){var t=this;if(!(t.options.swipe===!1||"ontouchend"in document&&t.options.swipe===!1||t.options.draggable===!1&&-1!==e.type.indexOf("mouse")))switch(t.touchObject.fingerCount=e.originalEvent&&void 0!==e.originalEvent.touches?e.originalEvent.touches.length:1,t.touchObject.minSwipe=t.listWidth/t.options.touchThreshold,t.options.verticalSwiping===!0&&(t.touchObject.minSwipe=t.listHeight/t.options.touchThreshold),e.data.action){case"start":t.swipeStart(e);break;case"move":t.swipeMove(e);break;case"end":t.swipeEnd(e)}},t.prototype.swipeMove=function(e){var t,i,n,s,o,r=this;return o=void 0!==e.originalEvent?e.originalEvent.touches:null,!r.dragging||o&&1!==o.length?!1:(t=r.getLeft(r.currentSlide),r.touchObject.curX=void 0!==o?o[0].pageX:e.clientX,r.touchObject.curY=void 0!==o?o[0].pageY:e.clientY,r.touchObject.swipeLength=Math.round(Math.sqrt(Math.pow(r.touchObject.curX-r.touchObject.startX,2))),r.options.verticalSwiping===!0&&(r.touchObject.swipeLength=Math.round(Math.sqrt(Math.pow(r.touchObject.curY-r.touchObject.startY,2)))),i=r.swipeDirection(),"vertical"!==i?(void 0!==e.originalEvent&&r.touchObject.swipeLength>4&&e.preventDefault(),s=(r.options.rtl===!1?1:-1)*(r.touchObject.curX>r.touchObject.startX?1:-1),r.options.verticalSwiping===!0&&(s=r.touchObject.curY>r.touchObject.startY?1:-1),n=r.touchObject.swipeLength,r.touchObject.edgeHit=!1,r.options.infinite===!1&&(0===r.currentSlide&&"right"===i||r.currentSlide>=r.getDotCount()&&"left"===i)&&(n=r.touchObject.swipeLength*r.options.edgeFriction,r.touchObject.edgeHit=!0),r.swipeLeft=r.options.vertical===!1?t+n*s:t+n*(r.$list.height()/r.listWidth)*s,r.options.verticalSwiping===!0&&(r.swipeLeft=t+n*s),r.options.fade===!0||r.options.touchMove===!1?!1:r.animating===!0?(r.swipeLeft=null,!1):void r.setCSS(r.swipeLeft)):void 0)},t.prototype.swipeStart=function(e){var t,i=this;return 1!==i.touchObject.fingerCount||i.slideCount<=i.options.slidesToShow?(i.touchObject={},!1):(void 0!==e.originalEvent&&void 0!==e.originalEvent.touches&&(t=e.originalEvent.touches[0]),i.touchObject.startX=i.touchObject.curX=void 0!==t?t.pageX:e.clientX,i.touchObject.startY=i.touchObject.curY=void 0!==t?t.pageY:e.clientY,void(i.dragging=!0))},t.prototype.unfilterSlides=t.prototype.slickUnfilter=function(){var e=this;null!==e.$slidesCache&&(e.unload(),e.$slideTrack.children(this.options.slide).detach(),e.$slidesCache.appendTo(e.$slideTrack),e.reinit())},t.prototype.unload=function(){var t=this;e(".slick-cloned",t.$slider).remove(),t.$dots&&t.$dots.remove(),t.$prevArrow&&t.htmlExpr.test(t.options.prevArrow)&&t.$prevArrow.remove(),t.$nextArrow&&t.htmlExpr.test(t.options.nextArrow)&&t.$nextArrow.remove(),t.$slides.removeClass("slick-slide slick-active slick-visible slick-current").attr("aria-hidden","true").css("width","")},t.prototype.unslick=function(e){var t=this;t.$slider.trigger("unslick",[t,e]),t.destroy()},t.prototype.updateArrows=function(){var e,t=this;e=Math.floor(t.options.slidesToShow/2),t.options.arrows===!0&&t.slideCount>t.options.slidesToShow&&!t.options.infinite&&(t.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false"),t.$nextArrow.removeClass("slick-disabled").attr("aria-disabled","false"),0===t.currentSlide?(t.$prevArrow.addClass("slick-disabled").attr("aria-disabled","true"),t.$nextArrow.removeClass("slick-disabled").attr("aria-disabled","false")):t.currentSlide>=t.slideCount-t.options.slidesToShow&&t.options.centerMode===!1?(t.$nextArrow.addClass("slick-disabled").attr("aria-disabled","true"),t.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false")):t.currentSlide>=t.slideCount-1&&t.options.centerMode===!0&&(t.$nextArrow.addClass("slick-disabled").attr("aria-disabled","true"),t.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false")))},t.prototype.updateDots=function(){var e=this;null!==e.$dots&&(e.$dots.find("li").removeClass("slick-active").attr("aria-hidden","true"),e.$dots.find("li").eq(Math.floor(e.currentSlide/e.options.slidesToScroll)).addClass("slick-active").attr("aria-hidden","false"))},t.prototype.visibility=function(){var e=this;document[e.hidden]?(e.paused=!0,e.autoPlayClear()):e.options.autoplay===!0&&(e.paused=!1,e.autoPlay())},t.prototype.initADA=function(){var t=this;t.$slides.add(t.$slideTrack.find(".slick-cloned")).attr({"aria-hidden":"true",tabindex:"-1"}).find("a, input, button, select").attr({tabindex:"-1"}),t.$slideTrack.attr("role","listbox"),t.$slides.not(t.$slideTrack.find(".slick-cloned")).each(function(i){e(this).attr({role:"option","aria-describedby":"slick-slide"+t.instanceUid+i})}),null!==t.$dots&&t.$dots.attr("role","tablist").find("li").each(function(i){e(this).attr({role:"presentation","aria-selected":"false","aria-controls":"navigation"+t.instanceUid+i,id:"slick-slide"+t.instanceUid+i})}).first().attr("aria-selected","true").end().find("button").attr("role","button").end().closest("div").attr("role","toolbar"),t.activateADA()},t.prototype.activateADA=function(){var e=this,t=e.$slider.find("*").is(":focus");e.$slideTrack.find(".slick-active").attr({"aria-hidden":"false",tabindex:"0"}).find("a, input, button, select").attr({tabindex:"0"}),t&&e.$slideTrack.find(".slick-active").focus()},t.prototype.focusHandler=function(){var t=this;t.$slider.on("focus.slick blur.slick","*",function(i){i.stopImmediatePropagation();var n=e(this);setTimeout(function(){t.isPlay&&(n.is(":focus")?(t.autoPlayClear(),t.paused=!0):(t.paused=!1,t.autoPlay()))},0)})},e.fn.slick=function(){var e,i=this,n=arguments[0],s=Array.prototype.slice.call(arguments,1),o=i.length,r=0;for(r;o>r;r++)if("object"==typeof n||"undefined"==typeof n?i[r].slick=new t(i[r],n):e=i[r].slick[n].apply(i[r].slick,s),"undefined"!=typeof e)return e;return i}}),/*!
 * JavaScript Cookie v2.0.3
 * https://github.com/js-cookie/js-cookie
 *
 * Copyright 2006, 2015 Klaus Hartl & Fagner Brack
 * Released under the MIT license
 */
function(e){if("function"==typeof define&&define.amd)define(e);else if("object"==typeof exports)module.exports=e();else{var t=window.Cookies,i=window.Cookies=e();i.noConflict=function(){return window.Cookies=t,i}}}(function(){function e(){for(var e=0,t={};e<arguments.length;e++){var i=arguments[e];for(var n in i)t[n]=i[n]}return t}function t(i){function n(t,s,o){var r;if(arguments.length>1){if(o=e({path:"/"},n.defaults,o),"number"==typeof o.expires){var a=new Date;a.setMilliseconds(a.getMilliseconds()+864e5*o.expires),o.expires=a}try{r=JSON.stringify(s),/^[\{\[]/.test(r)&&(s=r)}catch(l){}return s=encodeURIComponent(String(s)),s=s.replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)),t=t.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),t=t.replace(/[\(\)]/g,escape),document.cookie=[t,"=",s,o.expires&&"; expires="+o.expires.toUTCString(),o.path&&"; path="+o.path,o.domain&&"; domain="+o.domain,o.secure?"; secure":""].join("")}t||(r={});for(var c=document.cookie?document.cookie.split("; "):[],d=/(%[0-9A-Z]{2})+/g,h=0;h<c.length;h++){var u=c[h].split("="),p=u[0].replace(d,decodeURIComponent),f=u.slice(1).join("=");'"'===f.charAt(0)&&(f=f.slice(1,-1));try{if(f=i&&i(f,p)||f.replace(d,decodeURIComponent),this.json)try{f=JSON.parse(f)}catch(l){}if(t===p){r=f;break}t||(r[p]=f)}catch(l){}}return r}return n.get=n.set=n,n.getJSON=function(){return n.apply({json:!0},[].slice.call(arguments))},n.defaults={},n.remove=function(t,i){n(t,"",e(i,{expires:-1}))},n.withConverter=t,n}return t()}),
//! moment.js
//! version : 2.10.6
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.moment=t()}(this,function(){"use strict";function e(){return ji.apply(null,arguments)}function t(e){ji=e}function i(e){return"[object Array]"===Object.prototype.toString.call(e)}function n(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function s(e,t){var i,n=[];for(i=0;i<e.length;++i)n.push(t(e[i],i));return n}function o(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function r(e,t){for(var i in t)o(t,i)&&(e[i]=t[i]);return o(t,"toString")&&(e.toString=t.toString),o(t,"valueOf")&&(e.valueOf=t.valueOf),e}function a(e,t,i,n){return Pe(e,t,i,n,!0).utc()}function l(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function c(e){return null==e._pf&&(e._pf=l()),e._pf}function d(e){if(null==e._isValid){var t=c(e);e._isValid=!(isNaN(e._d.getTime())||!(t.overflow<0)||t.empty||t.invalidMonth||t.invalidWeekday||t.nullInput||t.invalidFormat||t.userInvalidated),e._strict&&(e._isValid=e._isValid&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour)}return e._isValid}function h(e){var t=a(NaN);return null!=e?r(c(t),e):c(t).userInvalidated=!0,t}function u(e,t){var i,n,s;if("undefined"!=typeof t._isAMomentObject&&(e._isAMomentObject=t._isAMomentObject),"undefined"!=typeof t._i&&(e._i=t._i),"undefined"!=typeof t._f&&(e._f=t._f),"undefined"!=typeof t._l&&(e._l=t._l),"undefined"!=typeof t._strict&&(e._strict=t._strict),"undefined"!=typeof t._tzm&&(e._tzm=t._tzm),"undefined"!=typeof t._isUTC&&(e._isUTC=t._isUTC),"undefined"!=typeof t._offset&&(e._offset=t._offset),"undefined"!=typeof t._pf&&(e._pf=c(t)),"undefined"!=typeof t._locale&&(e._locale=t._locale),Oi.length>0)for(i in Oi)n=Oi[i],s=t[n],"undefined"!=typeof s&&(e[n]=s);return e}function p(t){u(this,t),this._d=new Date(null!=t._d?t._d.getTime():NaN),$i===!1&&($i=!0,e.updateOffset(this),$i=!1)}function f(e){return e instanceof p||null!=e&&null!=e._isAMomentObject}function m(e){return 0>e?Math.ceil(e):Math.floor(e)}function g(e){var t=+e,i=0;return 0!==t&&isFinite(t)&&(i=m(t)),i}function v(e,t,i){var n,s=Math.min(e.length,t.length),o=Math.abs(e.length-t.length),r=0;for(n=0;s>n;n++)(i&&e[n]!==t[n]||!i&&g(e[n])!==g(t[n]))&&r++;return r+o}function b(){}function y(e){return e?e.toLowerCase().replace("_","-"):e}function w(e){for(var t,i,n,s,o=0;o<e.length;){for(s=y(e[o]).split("-"),t=s.length,i=y(e[o+1]),i=i?i.split("-"):null;t>0;){if(n=_(s.slice(0,t).join("-")))return n;if(i&&i.length>=t&&v(s,i,!0)>=t-1)break;t--}o++}return null}function _(e){var t=null;if(!Ni[e]&&"undefined"!=typeof module&&module&&module.exports)try{t=Li._abbr,require("./locale/"+e),k(t)}catch(i){}return Ni[e]}function k(e,t){var i;return e&&(i="undefined"==typeof t?C(e):x(e,t),i&&(Li=i)),Li._abbr}function x(e,t){return null!==t?(t.abbr=e,Ni[e]=Ni[e]||new b,Ni[e].set(t),k(e),Ni[e]):(delete Ni[e],null)}function C(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return Li;if(!i(e)){if(t=_(e))return t;e=[e]}return w(e)}function S(e,t){var i=e.toLowerCase();Fi[i]=Fi[i+"s"]=Fi[t]=e}function T(e){return"string"==typeof e?Fi[e]||Fi[e.toLowerCase()]:void 0}function D(e){var t,i,n={};for(i in e)o(e,i)&&(t=T(i),t&&(n[t]=e[i]));return n}function P(t,i){return function(n){return null!=n?(M(this,t,n),e.updateOffset(this,i),this):E(this,t)}}function E(e,t){return e._d["get"+(e._isUTC?"UTC":"")+t]()}function M(e,t,i){return e._d["set"+(e._isUTC?"UTC":"")+t](i)}function A(e,t){var i;if("object"==typeof e)for(i in e)this.set(i,e[i]);else if(e=T(e),"function"==typeof this[e])return this[e](t);return this}function I(e,t,i){var n=""+Math.abs(e),s=t-n.length,o=e>=0;return(o?i?"+":"":"-")+Math.pow(10,Math.max(0,s)).toString().substr(1)+n}function j(e,t,i,n){var s=n;"string"==typeof n&&(s=function(){return this[n]()}),e&&(Bi[e]=s),t&&(Bi[t[0]]=function(){return I(s.apply(this,arguments),t[1],t[2])}),i&&(Bi[i]=function(){return this.localeData().ordinal(s.apply(this,arguments),e)})}function L(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function O(e){var t,i,n=e.match(Hi);for(t=0,i=n.length;i>t;t++)Bi[n[t]]?n[t]=Bi[n[t]]:n[t]=L(n[t]);return function(s){var o="";for(t=0;i>t;t++)o+=n[t]instanceof Function?n[t].call(s,e):n[t];return o}}function $(e,t){return e.isValid()?(t=N(t,e.localeData()),Ri[t]=Ri[t]||O(t),Ri[t](e)):e.localeData().invalidDate()}function N(e,t){function i(e){return t.longDateFormat(e)||e}var n=5;for(zi.lastIndex=0;n>=0&&zi.test(e);)e=e.replace(zi,i),zi.lastIndex=0,n-=1;return e}function F(e){return"function"==typeof e&&"[object Function]"===Object.prototype.toString.call(e)}function H(e,t,i){sn[e]=F(t)?t:function(e){return e&&i?i:t}}function z(e,t){return o(sn,e)?sn[e](t._strict,t._locale):new RegExp(R(e))}function R(e){return e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,i,n,s){return t||i||n||s}).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function B(e,t){var i,n=t;for("string"==typeof e&&(e=[e]),"number"==typeof t&&(n=function(e,i){i[t]=g(e)}),i=0;i<e.length;i++)on[e[i]]=n}function W(e,t){B(e,function(e,i,n,s){n._w=n._w||{},t(e,n._w,n,s)})}function q(e,t,i){null!=t&&o(on,e)&&on[e](t,i._a,i,e)}function U(e,t){return new Date(Date.UTC(e,t+1,0)).getUTCDate()}function V(e){return this._months[e.month()]}function Y(e){return this._monthsShort[e.month()]}function G(e,t,i){var n,s,o;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),n=0;12>n;n++){if(s=a([2e3,n]),i&&!this._longMonthsParse[n]&&(this._longMonthsParse[n]=new RegExp("^"+this.months(s,"").replace(".","")+"$","i"),this._shortMonthsParse[n]=new RegExp("^"+this.monthsShort(s,"").replace(".","")+"$","i")),i||this._monthsParse[n]||(o="^"+this.months(s,"")+"|^"+this.monthsShort(s,""),this._monthsParse[n]=new RegExp(o.replace(".",""),"i")),i&&"MMMM"===t&&this._longMonthsParse[n].test(e))return n;if(i&&"MMM"===t&&this._shortMonthsParse[n].test(e))return n;if(!i&&this._monthsParse[n].test(e))return n}}function K(e,t){var i;return"string"==typeof t&&(t=e.localeData().monthsParse(t),"number"!=typeof t)?e:(i=Math.min(e.date(),U(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,i),e)}function X(t){return null!=t?(K(this,t),e.updateOffset(this,!0),this):E(this,"Month")}function Q(){return U(this.year(),this.month())}function J(e){var t,i=e._a;return i&&-2===c(e).overflow&&(t=i[an]<0||i[an]>11?an:i[ln]<1||i[ln]>U(i[rn],i[an])?ln:i[cn]<0||i[cn]>24||24===i[cn]&&(0!==i[dn]||0!==i[hn]||0!==i[un])?cn:i[dn]<0||i[dn]>59?dn:i[hn]<0||i[hn]>59?hn:i[un]<0||i[un]>999?un:-1,c(e)._overflowDayOfYear&&(rn>t||t>ln)&&(t=ln),c(e).overflow=t),e}function Z(t){e.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+t)}function ee(e,t){var i=!0;return r(function(){return i&&(Z(e+"\n"+(new Error).stack),i=!1),t.apply(this,arguments)},t)}function te(e,t){mn[e]||(Z(t),mn[e]=!0)}function ie(e){var t,i,n=e._i,s=gn.exec(n);if(s){for(c(e).iso=!0,t=0,i=vn.length;i>t;t++)if(vn[t][1].exec(n)){e._f=vn[t][0];break}for(t=0,i=bn.length;i>t;t++)if(bn[t][1].exec(n)){e._f+=(s[6]||" ")+bn[t][0];break}n.match(en)&&(e._f+="Z"),_e(e)}else e._isValid=!1}function ne(t){var i=yn.exec(t._i);return null!==i?void(t._d=new Date(+i[1])):(ie(t),void(t._isValid===!1&&(delete t._isValid,e.createFromInputFallback(t))))}function se(e,t,i,n,s,o,r){var a=new Date(e,t,i,n,s,o,r);return 1970>e&&a.setFullYear(e),a}function oe(e){var t=new Date(Date.UTC.apply(null,arguments));return 1970>e&&t.setUTCFullYear(e),t}function re(e){return ae(e)?366:365}function ae(e){return e%4===0&&e%100!==0||e%400===0}function le(){return ae(this.year())}function ce(e,t,i){var n,s=i-t,o=i-e.day();return o>s&&(o-=7),s-7>o&&(o+=7),n=Ee(e).add(o,"d"),{week:Math.ceil(n.dayOfYear()/7),year:n.year()}}function de(e){return ce(e,this._week.dow,this._week.doy).week}function he(){return this._week.dow}function ue(){return this._week.doy}function pe(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")}function fe(e){var t=ce(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")}function me(e,t,i,n,s){var o,r=6+s-n,a=oe(e,0,1+r),l=a.getUTCDay();return s>l&&(l+=7),i=null!=i?1*i:s,o=1+r+7*(t-1)-l+i,{year:o>0?e:e-1,dayOfYear:o>0?o:re(e-1)+o}}function ge(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")}function ve(e,t,i){return null!=e?e:null!=t?t:i}function be(e){var t=new Date;return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function ye(e){var t,i,n,s,o=[];if(!e._d){for(n=be(e),e._w&&null==e._a[ln]&&null==e._a[an]&&we(e),e._dayOfYear&&(s=ve(e._a[rn],n[rn]),e._dayOfYear>re(s)&&(c(e)._overflowDayOfYear=!0),i=oe(s,0,e._dayOfYear),e._a[an]=i.getUTCMonth(),e._a[ln]=i.getUTCDate()),t=0;3>t&&null==e._a[t];++t)e._a[t]=o[t]=n[t];for(;7>t;t++)e._a[t]=o[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[cn]&&0===e._a[dn]&&0===e._a[hn]&&0===e._a[un]&&(e._nextDay=!0,e._a[cn]=0),e._d=(e._useUTC?oe:se).apply(null,o),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[cn]=24)}}function we(e){var t,i,n,s,o,r,a;t=e._w,null!=t.GG||null!=t.W||null!=t.E?(o=1,r=4,i=ve(t.GG,e._a[rn],ce(Ee(),1,4).year),n=ve(t.W,1),s=ve(t.E,1)):(o=e._locale._week.dow,r=e._locale._week.doy,i=ve(t.gg,e._a[rn],ce(Ee(),o,r).year),n=ve(t.w,1),null!=t.d?(s=t.d,o>s&&++n):s=null!=t.e?t.e+o:o),a=me(i,n,s,r,o),e._a[rn]=a.year,e._dayOfYear=a.dayOfYear}function _e(t){if(t._f===e.ISO_8601)return void ie(t);t._a=[],c(t).empty=!0;var i,n,s,o,r,a=""+t._i,l=a.length,d=0;for(s=N(t._f,t._locale).match(Hi)||[],i=0;i<s.length;i++)o=s[i],n=(a.match(z(o,t))||[])[0],n&&(r=a.substr(0,a.indexOf(n)),r.length>0&&c(t).unusedInput.push(r),a=a.slice(a.indexOf(n)+n.length),d+=n.length),Bi[o]?(n?c(t).empty=!1:c(t).unusedTokens.push(o),q(o,n,t)):t._strict&&!n&&c(t).unusedTokens.push(o);c(t).charsLeftOver=l-d,a.length>0&&c(t).unusedInput.push(a),c(t).bigHour===!0&&t._a[cn]<=12&&t._a[cn]>0&&(c(t).bigHour=void 0),t._a[cn]=ke(t._locale,t._a[cn],t._meridiem),ye(t),J(t)}function ke(e,t,i){var n;return null==i?t:null!=e.meridiemHour?e.meridiemHour(t,i):null!=e.isPM?(n=e.isPM(i),n&&12>t&&(t+=12),n||12!==t||(t=0),t):t}function xe(e){var t,i,n,s,o;if(0===e._f.length)return c(e).invalidFormat=!0,void(e._d=new Date(NaN));for(s=0;s<e._f.length;s++)o=0,t=u({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[s],_e(t),d(t)&&(o+=c(t).charsLeftOver,o+=10*c(t).unusedTokens.length,c(t).score=o,(null==n||n>o)&&(n=o,i=t));r(e,i||t)}function Ce(e){if(!e._d){var t=D(e._i);e._a=[t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],ye(e)}}function Se(e){var t=new p(J(Te(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function Te(e){var t=e._i,s=e._f;return e._locale=e._locale||C(e._l),null===t||void 0===s&&""===t?h({nullInput:!0}):("string"==typeof t&&(e._i=t=e._locale.preparse(t)),f(t)?new p(J(t)):(i(s)?xe(e):s?_e(e):n(t)?e._d=t:De(e),e))}function De(t){var o=t._i;void 0===o?t._d=new Date:n(o)?t._d=new Date(+o):"string"==typeof o?ne(t):i(o)?(t._a=s(o.slice(0),function(e){return parseInt(e,10)}),ye(t)):"object"==typeof o?Ce(t):"number"==typeof o?t._d=new Date(o):e.createFromInputFallback(t)}function Pe(e,t,i,n,s){var o={};return"boolean"==typeof i&&(n=i,i=void 0),o._isAMomentObject=!0,o._useUTC=o._isUTC=s,o._l=i,o._i=e,o._f=t,o._strict=n,Se(o)}function Ee(e,t,i,n){return Pe(e,t,i,n,!1)}function Me(e,t){var n,s;if(1===t.length&&i(t[0])&&(t=t[0]),!t.length)return Ee();for(n=t[0],s=1;s<t.length;++s)t[s].isValid()&&!t[s][e](n)||(n=t[s]);return n}function Ae(){var e=[].slice.call(arguments,0);return Me("isBefore",e)}function Ie(){var e=[].slice.call(arguments,0);return Me("isAfter",e)}function je(e){var t=D(e),i=t.year||0,n=t.quarter||0,s=t.month||0,o=t.week||0,r=t.day||0,a=t.hour||0,l=t.minute||0,c=t.second||0,d=t.millisecond||0;this._milliseconds=+d+1e3*c+6e4*l+36e5*a,this._days=+r+7*o,this._months=+s+3*n+12*i,this._data={},this._locale=C(),this._bubble()}function Le(e){return e instanceof je}function Oe(e,t){j(e,0,0,function(){var e=this.utcOffset(),i="+";return 0>e&&(e=-e,i="-"),i+I(~~(e/60),2)+t+I(~~e%60,2)})}function $e(e){var t=(e||"").match(en)||[],i=t[t.length-1]||[],n=(i+"").match(Cn)||["-",0,0],s=+(60*n[1])+g(n[2]);return"+"===n[0]?s:-s}function Ne(t,i){var s,o;return i._isUTC?(s=i.clone(),o=(f(t)||n(t)?+t:+Ee(t))-+s,s._d.setTime(+s._d+o),e.updateOffset(s,!1),s):Ee(t).local()}function Fe(e){return 15*-Math.round(e._d.getTimezoneOffset()/15)}function He(t,i){var n,s=this._offset||0;return null!=t?("string"==typeof t&&(t=$e(t)),Math.abs(t)<16&&(t=60*t),!this._isUTC&&i&&(n=Fe(this)),this._offset=t,this._isUTC=!0,null!=n&&this.add(n,"m"),s!==t&&(!i||this._changeInProgress?tt(this,Xe(t-s,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,e.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?s:Fe(this)}function ze(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function Re(e){return this.utcOffset(0,e)}function Be(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(Fe(this),"m")),this}function We(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset($e(this._i)),this}function qe(e){return e=e?Ee(e).utcOffset():0,(this.utcOffset()-e)%60===0}function Ue(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Ve(){if("undefined"!=typeof this._isDSTShifted)return this._isDSTShifted;var e={};if(u(e,this),e=Te(e),e._a){var t=e._isUTC?a(e._a):Ee(e._a);this._isDSTShifted=this.isValid()&&v(e._a,t.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function Ye(){return!this._isUTC}function Ge(){return this._isUTC}function Ke(){return this._isUTC&&0===this._offset}function Xe(e,t){var i,n,s,r=e,a=null;return Le(e)?r={ms:e._milliseconds,d:e._days,M:e._months}:"number"==typeof e?(r={},t?r[t]=e:r.milliseconds=e):(a=Sn.exec(e))?(i="-"===a[1]?-1:1,r={y:0,d:g(a[ln])*i,h:g(a[cn])*i,m:g(a[dn])*i,s:g(a[hn])*i,ms:g(a[un])*i}):(a=Tn.exec(e))?(i="-"===a[1]?-1:1,r={y:Qe(a[2],i),M:Qe(a[3],i),d:Qe(a[4],i),h:Qe(a[5],i),m:Qe(a[6],i),s:Qe(a[7],i),w:Qe(a[8],i)}):null==r?r={}:"object"==typeof r&&("from"in r||"to"in r)&&(s=Ze(Ee(r.from),Ee(r.to)),r={},r.ms=s.milliseconds,r.M=s.months),n=new je(r),Le(e)&&o(e,"_locale")&&(n._locale=e._locale),n}function Qe(e,t){var i=e&&parseFloat(e.replace(",","."));return(isNaN(i)?0:i)*t}function Je(e,t){var i={milliseconds:0,months:0};return i.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(i.months,"M").isAfter(t)&&--i.months,i.milliseconds=+t-+e.clone().add(i.months,"M"),i}function Ze(e,t){var i;return t=Ne(t,e),e.isBefore(t)?i=Je(e,t):(i=Je(t,e),i.milliseconds=-i.milliseconds,i.months=-i.months),i}function et(e,t){return function(i,n){var s,o;return null===n||isNaN(+n)||(te(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period)."),o=i,i=n,n=o),i="string"==typeof i?+i:i,s=Xe(i,n),tt(this,s,e),this}}function tt(t,i,n,s){var o=i._milliseconds,r=i._days,a=i._months;s=null==s?!0:s,o&&t._d.setTime(+t._d+o*n),r&&M(t,"Date",E(t,"Date")+r*n),a&&K(t,E(t,"Month")+a*n),s&&e.updateOffset(t,r||a)}function it(e,t){var i=e||Ee(),n=Ne(i,this).startOf("day"),s=this.diff(n,"days",!0),o=-6>s?"sameElse":-1>s?"lastWeek":0>s?"lastDay":1>s?"sameDay":2>s?"nextDay":7>s?"nextWeek":"sameElse";return this.format(t&&t[o]||this.localeData().calendar(o,this,Ee(i)))}function nt(){return new p(this)}function st(e,t){var i;return t=T("undefined"!=typeof t?t:"millisecond"),"millisecond"===t?(e=f(e)?e:Ee(e),+this>+e):(i=f(e)?+e:+Ee(e),i<+this.clone().startOf(t))}function ot(e,t){var i;return t=T("undefined"!=typeof t?t:"millisecond"),"millisecond"===t?(e=f(e)?e:Ee(e),+e>+this):(i=f(e)?+e:+Ee(e),+this.clone().endOf(t)<i)}function rt(e,t,i){return this.isAfter(e,i)&&this.isBefore(t,i)}function at(e,t){var i;return t=T(t||"millisecond"),"millisecond"===t?(e=f(e)?e:Ee(e),+this===+e):(i=+Ee(e),+this.clone().startOf(t)<=i&&i<=+this.clone().endOf(t))}function lt(e,t,i){var n,s,o=Ne(e,this),r=6e4*(o.utcOffset()-this.utcOffset());return t=T(t),"year"===t||"month"===t||"quarter"===t?(s=ct(this,o),"quarter"===t?s/=3:"year"===t&&(s/=12)):(n=this-o,s="second"===t?n/1e3:"minute"===t?n/6e4:"hour"===t?n/36e5:"day"===t?(n-r)/864e5:"week"===t?(n-r)/6048e5:n),i?s:m(s)}function ct(e,t){var i,n,s=12*(t.year()-e.year())+(t.month()-e.month()),o=e.clone().add(s,"months");return 0>t-o?(i=e.clone().add(s-1,"months"),n=(t-o)/(o-i)):(i=e.clone().add(s+1,"months"),n=(t-o)/(i-o)),-(s+n)}function dt(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function ht(){var e=this.clone().utc();return 0<e.year()&&e.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():$(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):$(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function ut(t){var i=$(this,t||e.defaultFormat);return this.localeData().postformat(i)}function pt(e,t){return this.isValid()?Xe({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function ft(e){return this.from(Ee(),e)}function mt(e,t){return this.isValid()?Xe({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function gt(e){return this.to(Ee(),e)}function vt(e){var t;return void 0===e?this._locale._abbr:(t=C(e),null!=t&&(this._locale=t),this)}function bt(){return this._locale}function yt(e){switch(e=T(e)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e&&this.weekday(0),"isoWeek"===e&&this.isoWeekday(1),"quarter"===e&&this.month(3*Math.floor(this.month()/3)),this}function wt(e){return e=T(e),void 0===e||"millisecond"===e?this:this.startOf(e).add(1,"isoWeek"===e?"week":e).subtract(1,"ms")}function _t(){return+this._d-6e4*(this._offset||0)}function kt(){return Math.floor(+this/1e3)}function xt(){return this._offset?new Date(+this):this._d}function Ct(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function St(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function Tt(){return d(this)}function Dt(){return r({},c(this))}function Pt(){return c(this).overflow}function Et(e,t){j(0,[e,e.length],0,t)}function Mt(e,t,i){return ce(Ee([e,11,31+t-i]),t,i).week}function At(e){var t=ce(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==e?t:this.add(e-t,"y")}function It(e){var t=ce(this,1,4).year;return null==e?t:this.add(e-t,"y")}function jt(){return Mt(this.year(),1,4)}function Lt(){var e=this.localeData()._week;return Mt(this.year(),e.dow,e.doy)}function Ot(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)}function $t(e,t){return"string"!=typeof e?e:isNaN(e)?(e=t.weekdaysParse(e),"number"==typeof e?e:null):parseInt(e,10)}function Nt(e){return this._weekdays[e.day()]}function Ft(e){return this._weekdaysShort[e.day()]}function Ht(e){return this._weekdaysMin[e.day()]}function zt(e){var t,i,n;for(this._weekdaysParse=this._weekdaysParse||[],t=0;7>t;t++)if(this._weekdaysParse[t]||(i=Ee([2e3,1]).day(t),n="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[t]=new RegExp(n.replace(".",""),"i")),this._weekdaysParse[t].test(e))return t}function Rt(e){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=$t(e,this.localeData()),this.add(e-t,"d")):t}function Bt(e){var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")}function Wt(e){return null==e?this.day()||7:this.day(this.day()%7?e:e-7)}function qt(e,t){j(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function Ut(e,t){return t._meridiemParse}function Vt(e){return"p"===(e+"").toLowerCase().charAt(0)}function Yt(e,t,i){return e>11?i?"pm":"PM":i?"am":"AM"}function Gt(e,t){t[un]=g(1e3*("0."+e))}function Kt(){return this._isUTC?"UTC":""}function Xt(){return this._isUTC?"Coordinated Universal Time":""}function Qt(e){return Ee(1e3*e)}function Jt(){return Ee.apply(null,arguments).parseZone()}function Zt(e,t,i){var n=this._calendar[e];return"function"==typeof n?n.call(t,i):n}function ei(e){var t=this._longDateFormat[e],i=this._longDateFormat[e.toUpperCase()];return t||!i?t:(this._longDateFormat[e]=i.replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e])}function ti(){return this._invalidDate}function ii(e){return this._ordinal.replace("%d",e)}function ni(e){return e}function si(e,t,i,n){var s=this._relativeTime[i];return"function"==typeof s?s(e,t,i,n):s.replace(/%d/i,e)}function oi(e,t){var i=this._relativeTime[e>0?"future":"past"];return"function"==typeof i?i(t):i.replace(/%s/i,t)}function ri(e){var t,i;for(i in e)t=e[i],"function"==typeof t?this[i]=t:this["_"+i]=t;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}function ai(e,t,i,n){var s=C(),o=a().set(n,t);return s[i](o,e)}function li(e,t,i,n,s){if("number"==typeof e&&(t=e,e=void 0),e=e||"",null!=t)return ai(e,t,i,s);var o,r=[];for(o=0;n>o;o++)r[o]=ai(e,o,i,s);return r}function ci(e,t){return li(e,t,"months",12,"month")}function di(e,t){return li(e,t,"monthsShort",12,"month")}function hi(e,t){return li(e,t,"weekdays",7,"day")}function ui(e,t){return li(e,t,"weekdaysShort",7,"day")}function pi(e,t){return li(e,t,"weekdaysMin",7,"day")}function fi(){var e=this._data;return this._milliseconds=Kn(this._milliseconds),this._days=Kn(this._days),this._months=Kn(this._months),e.milliseconds=Kn(e.milliseconds),e.seconds=Kn(e.seconds),e.minutes=Kn(e.minutes),e.hours=Kn(e.hours),e.months=Kn(e.months),e.years=Kn(e.years),this}function mi(e,t,i,n){var s=Xe(t,i);return e._milliseconds+=n*s._milliseconds,e._days+=n*s._days,e._months+=n*s._months,e._bubble()}function gi(e,t){return mi(this,e,t,1)}function vi(e,t){return mi(this,e,t,-1)}function bi(e){return 0>e?Math.floor(e):Math.ceil(e)}function yi(){var e,t,i,n,s,o=this._milliseconds,r=this._days,a=this._months,l=this._data;return o>=0&&r>=0&&a>=0||0>=o&&0>=r&&0>=a||(o+=864e5*bi(_i(a)+r),r=0,a=0),l.milliseconds=o%1e3,e=m(o/1e3),l.seconds=e%60,t=m(e/60),l.minutes=t%60,i=m(t/60),l.hours=i%24,r+=m(i/24),s=m(wi(r)),a+=s,r-=bi(_i(s)),n=m(a/12),a%=12,l.days=r,l.months=a,l.years=n,this}function wi(e){return 4800*e/146097}function _i(e){return 146097*e/4800}function ki(e){var t,i,n=this._milliseconds;if(e=T(e),"month"===e||"year"===e)return t=this._days+n/864e5,i=this._months+wi(t),"month"===e?i:i/12;switch(t=this._days+Math.round(_i(this._months)),e){case"week":return t/7+n/6048e5;case"day":return t+n/864e5;case"hour":return 24*t+n/36e5;case"minute":return 1440*t+n/6e4;case"second":return 86400*t+n/1e3;case"millisecond":return Math.floor(864e5*t)+n;default:throw new Error("Unknown unit "+e)}}function xi(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*g(this._months/12)}function Ci(e){return function(){return this.as(e)}}function Si(e){return e=T(e),this[e+"s"]()}function Ti(e){return function(){return this._data[e]}}function Di(){return m(this.days()/7)}function Pi(e,t,i,n,s){return s.relativeTime(t||1,!!i,e,n)}function Ei(e,t,i){var n=Xe(e).abs(),s=hs(n.as("s")),o=hs(n.as("m")),r=hs(n.as("h")),a=hs(n.as("d")),l=hs(n.as("M")),c=hs(n.as("y")),d=s<us.s&&["s",s]||1===o&&["m"]||o<us.m&&["mm",o]||1===r&&["h"]||r<us.h&&["hh",r]||1===a&&["d"]||a<us.d&&["dd",a]||1===l&&["M"]||l<us.M&&["MM",l]||1===c&&["y"]||["yy",c];return d[2]=t,d[3]=+e>0,d[4]=i,Pi.apply(null,d)}function Mi(e,t){return void 0===us[e]?!1:void 0===t?us[e]:(us[e]=t,!0)}function Ai(e){var t=this.localeData(),i=Ei(this,!e,t);return e&&(i=t.pastFuture(+this,i)),t.postformat(i)}function Ii(){var e,t,i,n=ps(this._milliseconds)/1e3,s=ps(this._days),o=ps(this._months);e=m(n/60),t=m(e/60),n%=60,e%=60,i=m(o/12),o%=12;var r=i,a=o,l=s,c=t,d=e,h=n,u=this.asSeconds();return u?(0>u?"-":"")+"P"+(r?r+"Y":"")+(a?a+"M":"")+(l?l+"D":"")+(c||d||h?"T":"")+(c?c+"H":"")+(d?d+"M":"")+(h?h+"S":""):"P0D"}var ji,Li,Oi=e.momentProperties=[],$i=!1,Ni={},Fi={},Hi=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,zi=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Ri={},Bi={},Wi=/\d/,qi=/\d\d/,Ui=/\d{3}/,Vi=/\d{4}/,Yi=/[+-]?\d{6}/,Gi=/\d\d?/,Ki=/\d{1,3}/,Xi=/\d{1,4}/,Qi=/[+-]?\d{1,6}/,Ji=/\d+/,Zi=/[+-]?\d+/,en=/Z|[+-]\d\d:?\d\d/gi,tn=/[+-]?\d+(\.\d{1,3})?/,nn=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,sn={},on={},rn=0,an=1,ln=2,cn=3,dn=4,hn=5,un=6;j("M",["MM",2],"Mo",function(){return this.month()+1}),j("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),j("MMMM",0,0,function(e){return this.localeData().months(this,e)}),S("month","M"),H("M",Gi),H("MM",Gi,qi),H("MMM",nn),H("MMMM",nn),B(["M","MM"],function(e,t){t[an]=g(e)-1}),B(["MMM","MMMM"],function(e,t,i,n){var s=i._locale.monthsParse(e,n,i._strict);null!=s?t[an]=s:c(i).invalidMonth=e});var pn="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),fn="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),mn={};e.suppressDeprecationWarnings=!1;var gn=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,vn=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],bn=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],yn=/^\/?Date\((\-?\d+)/i;e.createFromInputFallback=ee("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),j(0,["YY",2],0,function(){return this.year()%100}),j(0,["YYYY",4],0,"year"),j(0,["YYYYY",5],0,"year"),j(0,["YYYYYY",6,!0],0,"year"),S("year","y"),H("Y",Zi),H("YY",Gi,qi),H("YYYY",Xi,Vi),H("YYYYY",Qi,Yi),H("YYYYYY",Qi,Yi),B(["YYYYY","YYYYYY"],rn),B("YYYY",function(t,i){i[rn]=2===t.length?e.parseTwoDigitYear(t):g(t)}),B("YY",function(t,i){i[rn]=e.parseTwoDigitYear(t)}),e.parseTwoDigitYear=function(e){return g(e)+(g(e)>68?1900:2e3)};var wn=P("FullYear",!1);j("w",["ww",2],"wo","week"),j("W",["WW",2],"Wo","isoWeek"),S("week","w"),S("isoWeek","W"),H("w",Gi),H("ww",Gi,qi),H("W",Gi),H("WW",Gi,qi),W(["w","ww","W","WW"],function(e,t,i,n){t[n.substr(0,1)]=g(e)});var _n={dow:0,doy:6};j("DDD",["DDDD",3],"DDDo","dayOfYear"),S("dayOfYear","DDD"),H("DDD",Ki),H("DDDD",Ui),B(["DDD","DDDD"],function(e,t,i){i._dayOfYear=g(e)}),e.ISO_8601=function(){};var kn=ee("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(){var e=Ee.apply(null,arguments);return this>e?this:e}),xn=ee("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(){var e=Ee.apply(null,arguments);return e>this?this:e});Oe("Z",":"),Oe("ZZ",""),H("Z",en),H("ZZ",en),B(["Z","ZZ"],function(e,t,i){i._useUTC=!0,i._tzm=$e(e)});var Cn=/([\+\-]|\d\d)/gi;e.updateOffset=function(){};var Sn=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,Tn=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/;Xe.fn=je.prototype;var Dn=et(1,"add"),Pn=et(-1,"subtract");e.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";var En=ee("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return void 0===e?this.localeData():this.locale(e)});j(0,["gg",2],0,function(){return this.weekYear()%100}),j(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Et("gggg","weekYear"),Et("ggggg","weekYear"),Et("GGGG","isoWeekYear"),Et("GGGGG","isoWeekYear"),S("weekYear","gg"),S("isoWeekYear","GG"),H("G",Zi),H("g",Zi),H("GG",Gi,qi),H("gg",Gi,qi),H("GGGG",Xi,Vi),H("gggg",Xi,Vi),H("GGGGG",Qi,Yi),H("ggggg",Qi,Yi),W(["gggg","ggggg","GGGG","GGGGG"],function(e,t,i,n){t[n.substr(0,2)]=g(e)}),W(["gg","GG"],function(t,i,n,s){i[s]=e.parseTwoDigitYear(t)}),j("Q",0,0,"quarter"),S("quarter","Q"),H("Q",Wi),B("Q",function(e,t){t[an]=3*(g(e)-1)}),j("D",["DD",2],"Do","date"),S("date","D"),H("D",Gi),H("DD",Gi,qi),H("Do",function(e,t){return e?t._ordinalParse:t._ordinalParseLenient}),B(["D","DD"],ln),B("Do",function(e,t){t[ln]=g(e.match(Gi)[0],10)});var Mn=P("Date",!0);j("d",0,"do","day"),j("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),j("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),j("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),j("e",0,0,"weekday"),j("E",0,0,"isoWeekday"),S("day","d"),S("weekday","e"),S("isoWeekday","E"),H("d",Gi),H("e",Gi),H("E",Gi),H("dd",nn),H("ddd",nn),H("dddd",nn),W(["dd","ddd","dddd"],function(e,t,i){var n=i._locale.weekdaysParse(e);null!=n?t.d=n:c(i).invalidWeekday=e}),W(["d","e","E"],function(e,t,i,n){t[n]=g(e)});var An="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),In="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),jn="Su_Mo_Tu_We_Th_Fr_Sa".split("_");j("H",["HH",2],0,"hour"),j("h",["hh",2],0,function(){return this.hours()%12||12}),qt("a",!0),qt("A",!1),S("hour","h"),H("a",Ut),H("A",Ut),H("H",Gi),H("h",Gi),H("HH",Gi,qi),H("hh",Gi,qi),B(["H","HH"],cn),B(["a","A"],function(e,t,i){i._isPm=i._locale.isPM(e),i._meridiem=e}),B(["h","hh"],function(e,t,i){t[cn]=g(e),c(i).bigHour=!0});var Ln=/[ap]\.?m?\.?/i,On=P("Hours",!0);j("m",["mm",2],0,"minute"),S("minute","m"),H("m",Gi),H("mm",Gi,qi),B(["m","mm"],dn);var $n=P("Minutes",!1);j("s",["ss",2],0,"second"),S("second","s"),H("s",Gi),H("ss",Gi,qi),B(["s","ss"],hn);var Nn=P("Seconds",!1);j("S",0,0,function(){return~~(this.millisecond()/100)}),j(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),j(0,["SSS",3],0,"millisecond"),j(0,["SSSS",4],0,function(){return 10*this.millisecond()}),j(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),j(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),j(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),j(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),j(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),S("millisecond","ms"),H("S",Ki,Wi),H("SS",Ki,qi),H("SSS",Ki,Ui);var Fn;for(Fn="SSSS";Fn.length<=9;Fn+="S")H(Fn,Ji);for(Fn="S";Fn.length<=9;Fn+="S")B(Fn,Gt);var Hn=P("Milliseconds",!1);j("z",0,0,"zoneAbbr"),j("zz",0,0,"zoneName");var zn=p.prototype;zn.add=Dn,zn.calendar=it,zn.clone=nt,zn.diff=lt,zn.endOf=wt,zn.format=ut,zn.from=pt,zn.fromNow=ft,zn.to=mt,zn.toNow=gt,zn.get=A,zn.invalidAt=Pt,zn.isAfter=st,zn.isBefore=ot,zn.isBetween=rt,zn.isSame=at,zn.isValid=Tt,zn.lang=En,zn.locale=vt,zn.localeData=bt,zn.max=xn,zn.min=kn,zn.parsingFlags=Dt,zn.set=A,zn.startOf=yt,zn.subtract=Pn,zn.toArray=Ct,zn.toObject=St,zn.toDate=xt,zn.toISOString=ht,zn.toJSON=ht,zn.toString=dt,zn.unix=kt,zn.valueOf=_t,zn.year=wn,zn.isLeapYear=le,zn.weekYear=At,zn.isoWeekYear=It,zn.quarter=zn.quarters=Ot,zn.month=X,zn.daysInMonth=Q,zn.week=zn.weeks=pe,zn.isoWeek=zn.isoWeeks=fe,zn.weeksInYear=Lt,zn.isoWeeksInYear=jt,zn.date=Mn,zn.day=zn.days=Rt,zn.weekday=Bt,zn.isoWeekday=Wt,zn.dayOfYear=ge,zn.hour=zn.hours=On,zn.minute=zn.minutes=$n,zn.second=zn.seconds=Nn,zn.millisecond=zn.milliseconds=Hn,zn.utcOffset=He,zn.utc=Re,zn.local=Be,zn.parseZone=We,zn.hasAlignedHourOffset=qe,zn.isDST=Ue,zn.isDSTShifted=Ve,zn.isLocal=Ye,zn.isUtcOffset=Ge,zn.isUtc=Ke,zn.isUTC=Ke,zn.zoneAbbr=Kt,zn.zoneName=Xt,zn.dates=ee("dates accessor is deprecated. Use date instead.",Mn),zn.months=ee("months accessor is deprecated. Use month instead",X),zn.years=ee("years accessor is deprecated. Use year instead",wn),zn.zone=ee("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",ze);var Rn=zn,Bn={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},Wn={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",
LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},qn="Invalid date",Un="%d",Vn=/\d{1,2}/,Yn={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},Gn=b.prototype;Gn._calendar=Bn,Gn.calendar=Zt,Gn._longDateFormat=Wn,Gn.longDateFormat=ei,Gn._invalidDate=qn,Gn.invalidDate=ti,Gn._ordinal=Un,Gn.ordinal=ii,Gn._ordinalParse=Vn,Gn.preparse=ni,Gn.postformat=ni,Gn._relativeTime=Yn,Gn.relativeTime=si,Gn.pastFuture=oi,Gn.set=ri,Gn.months=V,Gn._months=pn,Gn.monthsShort=Y,Gn._monthsShort=fn,Gn.monthsParse=G,Gn.week=de,Gn._week=_n,Gn.firstDayOfYear=ue,Gn.firstDayOfWeek=he,Gn.weekdays=Nt,Gn._weekdays=An,Gn.weekdaysMin=Ht,Gn._weekdaysMin=jn,Gn.weekdaysShort=Ft,Gn._weekdaysShort=In,Gn.weekdaysParse=zt,Gn.isPM=Vt,Gn._meridiemParse=Ln,Gn.meridiem=Yt,k("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,i=1===g(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th";return e+i}}),e.lang=ee("moment.lang is deprecated. Use moment.locale instead.",k),e.langData=ee("moment.langData is deprecated. Use moment.localeData instead.",C);var Kn=Math.abs,Xn=Ci("ms"),Qn=Ci("s"),Jn=Ci("m"),Zn=Ci("h"),es=Ci("d"),ts=Ci("w"),is=Ci("M"),ns=Ci("y"),ss=Ti("milliseconds"),os=Ti("seconds"),rs=Ti("minutes"),as=Ti("hours"),ls=Ti("days"),cs=Ti("months"),ds=Ti("years"),hs=Math.round,us={s:45,m:45,h:22,d:26,M:11},ps=Math.abs,fs=je.prototype;fs.abs=fi,fs.add=gi,fs.subtract=vi,fs.as=ki,fs.asMilliseconds=Xn,fs.asSeconds=Qn,fs.asMinutes=Jn,fs.asHours=Zn,fs.asDays=es,fs.asWeeks=ts,fs.asMonths=is,fs.asYears=ns,fs.valueOf=xi,fs._bubble=yi,fs.get=Si,fs.milliseconds=ss,fs.seconds=os,fs.minutes=rs,fs.hours=as,fs.days=ls,fs.weeks=Di,fs.months=cs,fs.years=ds,fs.humanize=Ai,fs.toISOString=Ii,fs.toString=Ii,fs.toJSON=Ii,fs.locale=vt,fs.localeData=bt,fs.toIsoString=ee("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Ii),fs.lang=En,j("X",0,0,"unix"),j("x",0,0,"valueOf"),H("x",Zi),H("X",tn),B("X",function(e,t,i){i._d=new Date(1e3*parseFloat(e,10))}),B("x",function(e,t,i){i._d=new Date(g(e))}),e.version="2.10.6",t(Ee),e.fn=Rn,e.min=Ae,e.max=Ie,e.utc=a,e.unix=Qt,e.months=ci,e.isDate=n,e.locale=k,e.invalid=h,e.duration=Xe,e.isMoment=f,e.weekdays=hi,e.parseZone=Jt,e.localeData=C,e.isDuration=Le,e.monthsShort=di,e.weekdaysMin=pi,e.defineLocale=x,e.weekdaysShort=ui,e.normalizeUnits=T,e.relativeTimeThreshold=Mi;var ms=e;return ms}),!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.rome=e()}}(function(){return function e(t,i,n){function s(r,a){if(!i[r]){if(!t[r]){var l="function"==typeof require&&require;if(!a&&l)return l(r,!0);if(o)return o(r,!0);var c=new Error("Cannot find module '"+r+"'");throw c.code="MODULE_NOT_FOUND",c}var d=i[r]={exports:{}};t[r][0].call(d.exports,function(e){var i=t[r][1][e];return s(i?i:e)},d,d.exports,e,t,i,n)}return i[r].exports}for(var o="function"==typeof require&&require,r=0;r<n.length;r++)s(n[r]);return s}({1:[function(e,t){"use strict";function i(e,t,i){function r(){g.sleeping=!0}function a(){return l()}function l(e){var i=t.getBoundingClientRect(),n=document.body.scrollTop||document.documentElement.scrollTop;return v?(e=v.read(),{x:(e.absolute?0:i.left)+e.x,y:(e.absolute?0:i.top)+n+e.y+20}):{x:i.left,y:i.top+n}}function c(e){d(e)}function d(i){if(f)throw new Error("Bullseye can't refresh after being destroyed. Create another instance instead.");if(v&&!i)return g.sleeping=!1,void v.refresh();var n=l(i);v||t===e||(n.y+=t.offsetHeight),e.style.left=n.x+"px",e.style.top=n.y+"px"}function h(){v&&v.destroy(),n.remove(window,"resize",m),f=!0}var u=i,p=t&&t.tagName;p||2!==arguments.length||(u=t),p||(t=e),u||(u={});var f=!1,m=s(d,30),g={update:u.autoupdateToCaret!==!1&&c},v=u.caret&&o(t,g);return d(),u.tracking!==!1&&n.add(window,"resize",m),{read:a,refresh:d,destroy:h,sleep:r}}var n=e("crossvent"),s=e("./throttle"),o=e("./tailormade");t.exports=i},{"./tailormade":11,"./throttle":12,crossvent:18}],2:[function(e,t){(function(i){"use strict";var n,s=i.document,o=e("./getSelectionRaw"),r=e("./getSelectionNullOp"),a=e("./getSelectionSynthetic"),l=e("./isHost");n=l.method(i,"getSelection")?o:"object"==typeof s.selection&&s.selection?a:r,t.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./getSelectionNullOp":3,"./getSelectionRaw":4,"./getSelectionSynthetic":5,"./isHost":6}],3:[function(e,t){"use strict";function i(){}function n(){return{removeAllRanges:i,addRange:i}}t.exports=n},{}],4:[function(e,t){(function(e){"use strict";function i(){return e.getSelection()}t.exports=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],5:[function(e,t){(function(i){"use strict";function n(e){var t=this,i=e.createRange();this._selection=e,this._ranges=[],"Control"===e.type?u(t):d(i)?h(t,i):a(t)}function s(e,t){for(var i,n=y.createControlRange(),s=0,o=t.length;o>s;++s){i=c(t[s]);try{n.add(i)}catch(r){throw new Error("setRanges(): Element could not be added to control selection")}}n.select(),u(e)}function o(e,t){var i=e.getAllRanges();e.removeAllRanges();for(var n=0,s=i.length;s>n;++n)f(t,i[n])||e.addRange(i[n]);e.rangeCount||a(e)}function r(e,t){var i="start",n="end";e.anchorNode=t[i+"Container"],e.anchorOffset=t[i+"Offset"],e.focusNode=t[n+"Container"],e.focusOffset=t[n+"Offset"]}function a(e){e.anchorNode=e.focusNode=null,e.anchorOffset=e.focusOffset=0,e.rangeCount=0,e.isCollapsed=!0,e._ranges.length=0}function l(e){if(!e.length||1!==e[0].nodeType)return!1;for(var t=1,i=e.length;i>t;++t)if(!m(e[0],e[t]))return!1;return!0}function c(e){var t=e.getNodes();if(!l(t))throw new Error("getSingleElementFromRange(): range did not consist of a single element");return t[0]}function d(e){return e&&void 0!==e.text}function h(e,t){e._ranges=[t],r(e,t,!1),e.rangeCount=1,e.isCollapsed=t.collapsed}function u(e){if(e._ranges.length=0,"None"===e._selection.type)a(e);else{var t=e._selection.createRange();if(d(t))h(e,t);else{e.rangeCount=t.length;for(var i,n=0;n<e.rangeCount;++n)i=b.createRange(),i.selectNode(t.item(n)),e._ranges.push(i);e.isCollapsed=1===e.rangeCount&&e._ranges[0].collapsed,r(e,e._ranges[e.rangeCount-1],!1)}}}function p(e,t){for(var i=e._selection.createRange(),n=c(t),s=y.createControlRange(),o=0,r=i.length;r>o;++o)s.add(i.item(o));try{s.add(n)}catch(a){throw new Error("addRange(): Element could not be added to control selection")}s.select(),u(e)}function f(e,t){return e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset}function m(e,t){for(var i=t;i.parentNode;){if(i.parentNode===e)return!0;i=i.parentNode}return!1}function g(){return new n(i.document.selection)}var v=e("./rangeToTextRange"),b=i.document,y=b.body,w=n.prototype;w.removeAllRanges=function(){var e;try{this._selection.empty(),"None"!==this._selection.type&&(e=y.createTextRange(),e.select(),this._selection.empty())}catch(t){}a(this)},w.addRange=function(e){"Control"===this._selection.type?p(this,e):(v(e).select(),this._ranges[0]=e,this.rangeCount=1,this.isCollapsed=this._ranges[0].collapsed,r(this,e,!1))},w.setRanges=function(e){this.removeAllRanges();var t=e.length;t>1?s(this,e):t&&this.addRange(e[0])},w.getRangeAt=function(e){if(0>e||e>=this.rangeCount)throw new Error("getRangeAt(): index out of bounds");return this._ranges[e].cloneRange()},w.removeRange=function(e){if("Control"!==this._selection.type)return void o(this,e);for(var t,i=this._selection.createRange(),n=c(e),s=y.createControlRange(),r=!1,a=0,l=i.length;l>a;++a)t=i.item(a),t!==n||r?s.add(i.item(a)):r=!0;s.select(),u(this)},w.eachRange=function(e,t){var i=0,n=this._ranges.length;for(i=0;n>i;++i)if(e(this.getRangeAt(i)))return t},w.getAllRanges=function(){var e=[];return this.eachRange(function(t){e.push(t)}),e},w.setSingleRange=function(e){this.removeAllRanges(),this.addRange(e)},t.exports=g}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./rangeToTextRange":7}],6:[function(e,t){"use strict";function i(e,t){var i=typeof e[t];return"function"===i||!("object"!==i||!e[t])||"unknown"===i}function n(e,t){return"undefined"!=typeof e[t]}function s(e){return function(t,i){for(var n=i.length;n--;)if(!e(t,i[n]))return!1;return!0}}t.exports={method:i,methods:s(i),property:n,properties:s(n)}},{}],7:[function(e,t){(function(e){"use strict";function i(e){if(e.collapsed)return s({node:e.startContainer,offset:e.startOffset},!0);var t=s({node:e.startContainer,offset:e.startOffset},!0),i=s({node:e.endContainer,offset:e.endOffset},!1),n=r.createTextRange();return n.setEndPoint("StartToStart",t),n.setEndPoint("EndToEnd",i),n}function n(e){var t=e.nodeType;return 3===t||4===t||8===t}function s(e,t){var i,s,a,l,c=e.offset,d=r.createTextRange(),h=n(e.node);return h?(i=e.node,s=i.parentNode):(l=e.node.childNodes,i=c<l.length?l[c]:null,s=e.node),a=o.createElement("span"),a.innerHTML="&#feff;",i?s.insertBefore(a,i):s.appendChild(a),d.moveToElementText(a),d.collapse(!t),s.removeChild(a),h&&d[t?"moveStart":"moveEnd"]("character",c),d}var o=e.document,r=o.body;t.exports=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],8:[function(e,t){"use strict";var i=e("./getSelection"),n=e("./setSelection");t.exports={get:i,set:n}},{"./getSelection":2,"./setSelection":9}],9:[function(e,t){(function(i){"use strict";function n(e){function t(){var t=s(),i=r.createRange();e.startContainer&&(e.endContainer?i.setEnd(e.endContainer,e.endOffset):i.setEnd(e.startContainer,e.startOffset),i.setStart(e.startContainer,e.startOffset),t.removeAllRanges(),t.addRange(i))}function i(){o(e).select()}r.createRange?t():i()}var s=e("./getSelection"),o=e("./rangeToTextRange"),r=i.document;t.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./getSelection":2,"./rangeToTextRange":7}],10:[function(e,t){"use strict";function i(e){return{start:e.selectionStart,end:e.selectionEnd}}function n(e){function t(t,n){return i!==e&&(i?i.focus():e.blur()),{start:t,end:n}}var i=document.activeElement;i!==e&&e.focus();var n=document.selection.createRange(),r=n.getBookmark(),a=e.value,l=s(a),c=n.parentElement();if(null===c||!o(c))return t(0,0);n.text=l+n.text+l;var d=e.value;return e.value=a,n.moveToBookmark(r),n.select(),t(d.indexOf(l),d.lastIndexOf(l)-l.length)}function s(e){var t;do t="@@marker."+Math.random()*new Date;while(-1!==e.indexOf(t));return t}function o(e){return"INPUT"===e.tagName&&"text"===e.type||"TEXTAREA"===e.tagName}function r(e,t){e.selectionStart=l(e,t.start),e.selectionEnd=l(e,t.end)}function a(e,t){var i=e.createTextRange();"end"===t.start&&"end"===t.end?(i.collapse(!1),i.select()):(i.collapse(!0),i.moveEnd("character",l(e,t.end)),i.moveStart("character",l(e,t.start)),i.select())}function l(e,t){return"end"===t?e.value.length:t||0}function c(e,t){return 2===arguments.length&&h(e,t),d(e)}var d=i,h=r;document.selection&&document.selection.createRange&&(d=n,h=a),t.exports=c},{}],11:[function(e,t){(function(i){"use strict";function n(e,t){function i(){}function n(){return(_?p:f)()}function r(){return x.sleeping?void 0:(x.update||i)(n())}function p(){var t=s(e),i=v(),n=m(i,t.start);return h.body.removeChild(i.mirror),n}function f(){var e=l();if(e.rangeCount){var t=e.getRangeAt(0),i="P"===t.startContainer.nodeName&&0===t.startOffset;if(i)return{x:t.startContainer.offsetLeft,y:t.startContainer.offsetTop,absolute:!0};if(t.getClientRects){var n=t.getClientRects();if(n.length>0)return{x:n[0].left,y:n[0].top,absolute:!0}}}return{x:0,y:0}}function m(t,i){var n=h.createElement("span"),s=t.mirror,o=t.computed;return b(s,g(e).substring(0,i)),"INPUT"===e.tagName&&(s.textContent=s.textContent.replace(/\s/g,"\xa0")),b(n,g(e).substring(i)||"."),s.appendChild(n),{x:n.offsetLeft+parseInt(o.borderLeftWidth),y:n.offsetTop+parseInt(o.borderTopWidth)}}function g(e){return _?e.value:e.innerHTML}function v(){function t(e){s[e]=i[e]}var i=d.getComputedStyle?getComputedStyle(e):e.currentStyle,n=h.createElement("div"),s=n.style;return h.body.appendChild(n),"INPUT"!==e.tagName&&(s.wordWrap="break-word"),s.whiteSpace="pre-wrap",s.position="absolute",s.visibility="hidden",c.forEach(t),u?(s.width=parseInt(i.width)-2+"px",e.scrollHeight>parseInt(i.height)&&(s.overflowY="scroll")):s.overflow="hidden",{mirror:n,computed:i}}function b(e,t){_?e.textContent=t:e.innerHTML=t}function y(t){var i=t?"remove":"add";o[i](e,"keydown",k),o[i](e,"keyup",k),o[i](e,"input",k),o[i](e,"paste",k),o[i](e,"change",k)}function w(){y(!0)}var _="INPUT"===e.tagName||"TEXTAREA"===e.tagName,k=a(r,30),x=t||{};return y(),{read:n,refresh:k,destroy:w}}var s=e("sell"),o=e("crossvent"),r=e("seleccion"),a=e("./throttle"),l=r.get,c=["direction","boxSizing","width","height","overflowX","overflowY","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","paddingTop","paddingRight","paddingBottom","paddingLeft","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","fontSizeAdjust","lineHeight","fontFamily","textAlign","textTransform","textIndent","textDecoration","letterSpacing","wordSpacing"],d=i,h=document,u=null!==d.mozInnerScreenX&&void 0!==d.mozInnerScreenX;t.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./throttle":12,crossvent:18,seleccion:8,sell:10}],12:[function(e,t){"use strict";function i(e,t){var i,n=-1/0;return function(){function s(){clearTimeout(i),i=null;var o=n+t,r=Date.now();r>o?(n=r,e()):i=setTimeout(s,o-r)}i||s()}}t.exports=i},{}],13:[function(e,t){"use strict";var i=e("ticky");t.exports=function(e,t,n){e&&i(function(){e.apply(n||null,t||[])})}},{ticky:16}],14:[function(e,t){"use strict";var i=e("atoa"),n=e("./debounce");t.exports=function(e,t){var s=t||{},o={};return void 0===e&&(e={}),e.on=function(t,i){return o[t]?o[t].push(i):o[t]=[i],e},e.once=function(t,i){return i._once=!0,e.on(t,i),e},e.off=function(t,i){var n=arguments.length;if(1===n)delete o[t];else if(0===n)o={};else{var s=o[t];if(!s)return e;s.splice(s.indexOf(i),1)}return e},e.emit=function(){var t=i(arguments);return e.emitterSnapshot(t.shift()).apply(this,t)},e.emitterSnapshot=function(t){var r=(o[t]||[]).slice(0);return function(){var o=i(arguments),a=this||e;if("error"===t&&s["throws"]!==!1&&!r.length)throw 1===o.length?o[0]:o;return r.forEach(function(i){s.async?n(i,o,a):i.apply(a,o),i._once&&e.off(t,i)}),e}},e}},{"./debounce":13,atoa:15}],15:[function(e,t){t.exports=function(e,t){return Array.prototype.slice.call(e,t)}},{}],16:[function(e,t){var i,n="function"==typeof setImmediate;i=n?function(e){setImmediate(e)}:function(e){setTimeout(e,0)},t.exports=i},{}],17:[function(e,t){(function(e){function i(){try{var e=new n("cat",{detail:{foo:"bar"}});return"cat"===e.type&&"bar"===e.detail.foo}catch(t){}return!1}var n=e.CustomEvent;t.exports=i()?n:"function"==typeof document.createEvent?function(e,t){var i=document.createEvent("CustomEvent");return t?i.initCustomEvent(e,t.bubbles,t.cancelable,t.detail):i.initCustomEvent(e,!1,!1,void 0),i}:function(e,t){var i=document.createEventObject();return i.type=e,t?(i.bubbles=Boolean(t.bubbles),i.cancelable=Boolean(t.cancelable),i.detail=t.detail):(i.bubbles=!1,i.cancelable=!1,i.detail=void 0),i}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],18:[function(e,t){(function(i){"use strict";function n(e,t,i,n){return e.addEventListener(t,i,n)}function s(e,t,i){return e.attachEvent("on"+t,c(e,t,i))}function o(e,t,i,n){return e.removeEventListener(t,i,n)}function r(e,t,i){return e.detachEvent("on"+t,d(e,t,i))}function a(e,t,i){function n(){var e;return f.createEvent?(e=f.createEvent("Event"),e.initEvent(t,!0,!0)):f.createEventObject&&(e=f.createEventObject()),e}function s(){return new u(t,{detail:i})}var o=-1===p.indexOf(t)?s():n();e.dispatchEvent?e.dispatchEvent(o):e.fireEvent("on"+t,o)}function l(e,t,n){return function(t){var s=t||i.event;s.target=s.target||s.srcElement,s.preventDefault=s.preventDefault||function(){s.returnValue=!1},s.stopPropagation=s.stopPropagation||function(){s.cancelBubble=!0},s.which=s.which||s.keyCode,n.call(e,s)}}function c(e,t,i){var n=d(e,t,i)||l(e,t,i);return v.push({wrapper:n,element:e,type:t,fn:i}),n}function d(e,t,i){var n=h(e,t,i);if(n){var s=v[n].wrapper;return v.splice(n,1),s}}function h(e,t,i){var n,s;for(n=0;n<v.length;n++)if(s=v[n],s.element===e&&s.type===t&&s.fn===i)return n}var u=e("custom-event"),p=e("./eventmap"),f=document,m=n,g=o,v=[];i.addEventListener||(m=s,g=r),t.exports={add:m,remove:g,fabricate:a}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./eventmap":19,"custom-event":17}],19:[function(e,t){(function(e){"use strict";var i=[],n="",s=/^on/;for(n in e)s.test(n)&&i.push(n.slice(2));t.exports=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],20:[function(e,t){"use strict";function i(e,t){var i=l[e.id];return i&&i[t.id]}function n(e,t){var i=l[e.id];i||(i=l[e.id]={});var n=o(t);i[t.id]=n,e.on("data",n),e.on("destroyed",s.bind(null,e,t))}function s(e,t){var i=l[e.id];if(i){var n=i[t.id];e.off("data",n),delete i[t.id]}}function o(e){return function(){e.refresh()}}function r(e,t){a(t.associated)||i(e,t)||n(e,t)}var a=e("./isInput"),l={};t.exports={add:r,remove:s}},{"./isInput":30}],21:[function(e,t){"use strict";function i(e){function t(){return Ee}function i(i){return de=d(i||e,Ee),pe||(pe=r({className:de.styles.container})),fe=de.weekdayFormat,me=fe.length,ve=n,ge=n,be=n,ye=n,de.appendTo.appendChild(pe),Y(pe),Se=!1,he=de.initialValue?de.initialValue:h.moment(),ue=he.clone(),Ee.back=O,Ee.container=pe,Ee.destroyed=!1,Ee.destroy=m.bind(Ee,!1),Ee.emitValues=q,Ee.getDate=ae,Ee.getDateString=le,Ee.getMoment=ce,Ee.hide=M,Ee.next=$,Ee.options=v,Ee.options.reset=b,Ee.refresh=U,Ee.restore=t,Ee.setValue=V,Ee.show=E,g(),f(),Ee}function f(){Ee.emit("ready",c(de))}function m(e){pe&&pe.parentNode&&pe.parentNode.removeChild(pe),de&&g(!0);var n=Ee.emitterSnapshot("destroyed");return Ee.back=p,Ee.destroyed=!0,Ee.destroy=t,Ee.emitValues=t,Ee.getDate=p,Ee.getDateString=p,Ee.getMoment=p,Ee.hide=t,Ee.next=p,Ee.options=t,Ee.options.reset=t,Ee.refresh=t,Ee.restore=i,Ee.setValue=t,Ee.show=t,Ee.off(),e!==!0&&n(),Ee}function g(e){var t=e?"remove":"add";de.autoHideOnBlur&&s[t](document.documentElement,"focus",j,!0),de.autoHideOnClick&&s[t](document,"click",L)}function v(e){return 0===arguments.length?c(de):(m(),i(e),Ee)}function b(){return v({appendTo:de.appendTo})}function y(){Se||(Se=!0,w(),_(),Ee.emit("render"))}function w(){function e(e){var t=r({className:de.styles.month,parent:we});0===e&&(_e=r({type:"button",className:de.styles.back,attributes:{type:"button"},parent:t})),e===de.monthsInCalendar-1&&(ke=r({type:"button",className:de.styles.next,attributes:{type:"button"},parent:t}));var i,n=r({className:de.styles.monthLabel,parent:t}),s=r({type:"table",className:de.styles.dayTable,parent:t}),o=r({type:"thead",className:de.styles.dayHead,parent:s}),a=r({type:"tr",className:de.styles.dayRow,parent:o}),l=r({type:"tbody",className:de.styles.dayBody,parent:s});for(i=0;me>i;i++)r({type:"th",className:de.styles.dayHeadElem,parent:a,text:fe[k(i)]});l.setAttribute(Te,e),De.push({label:n,body:l})}if(de.date){var t;for(De=[],we=r({className:de.styles.date,parent:pe}),t=0;t<de.monthsInCalendar;t++)e(t);s.add(_e,"click",O),s.add(ke,"click",$),s.add(we,"click",ie)}}function _(){if(de.time&&de.timeInterval){var e=r({className:de.styles.time,parent:pe});xe=r({className:de.styles.selectedTime,parent:e,text:he.format(de.timeFormat)}),s.add(xe,"click",C),Ce=r({className:de.styles.timeList,parent:e}),s.add(Ce,"click",re);for(var t=h.moment("00:00:00","HH:mm:ss"),i=t.clone().add(1,"days");t.isBefore(i);)r({className:de.styles.timeOption,parent:Ce,text:t.format(de.timeFormat)}),t.add(de.timeInterval,"seconds")}}function k(e,t){var i=t?-1:1,n=e+de.weekStart*i;return(n>=me||0>n)&&(n+=me*-i),n}function x(){if(de.time&&Se){var e,t,i,n,s=Ce.children,o=s.length;for(n=0;o>n;n++)i=s[n],t=h.moment(a(i),de.timeFormat),e=oe(he.clone(),t),i.style.display=X(e,!1,de.timeValidator)?"block":"none"}}function C(e){var t="boolean"==typeof e?e:"none"===Ce.style.display;t?S():T()}function S(){Ce&&(Ce.style.display="block")}function T(){Ce&&(Ce.style.display="none")}function D(){pe.style.display="inline-block",Ee.emit("show")}function P(){"none"!==pe.style.display&&(pe.style.display="none",Ee.emit("hide"))}function E(){return y(),U(),C(!de.date),D(),Ee}function M(){return T(),setTimeout(P,0),Ee}function A(){T();var e=u.contains(pe,de.styles.positioned);return e&&setTimeout(P,0),Ee}function I(e){var t=e.target;if(t===Ee.associated)return!0;for(;t;){if(t===pe)return!0;t=t.parentNode}}function j(e){I(e)||A()}function L(e){I(e)||A()}function O(){N("subtract")}function $(){N("add")}function N(e){var t,i="add"===e?-1:1,n=de.monthsInCalendar+i*se(ye);ue[e](n,"months"),t=Z(ue.clone()),he=t||he,t&&(ue=t.clone()),F(),Ee.emit("add"===e?"next":"back",he.month())}function F(e){H(),W(),e!==!0&&q(),x()}function H(){function e(e,t){var i=ue.clone().add(t,"months");a(e.label,i.format(de.monthFormat)),Y(e.body)}if(de.date&&Se){var t=ue.year(),i=ue.month(),n=ue.date();if(n!==be||i!==ve||t!==ge){var s=R();if(be=ue.date(),ve=ue.month(),ge=ue.year(),s)return void z();De.forEach(e),G()}}}function z(){function e(e){var t,i=[];for(t=0;t<e.length;t++)i.push(e[t]);return i}function t(t){return e(t.children)}function i(e){return!u.contains(e,de.styles.dayPrevMonth)&&!u.contains(e,de.styles.dayNextMonth)}var n=ue.date()-1;ne(!1),De.forEach(function(s){var o;B(s.date,ue)&&(o=e(s.body.children).map(t),o=Array.prototype.concat.apply([],o).filter(i),ne(o[n]))})}function R(){function e(e){return ge?B(e.date,ue):!1}return De.some(e)}function B(e,t){return e&&t&&e.year()===t.year()&&e.month()===t.month()}function W(){de.time&&Se&&a(xe,he.format(de.timeFormat))}function q(){return Ee.emit("data",le()),Ee.emit("year",he.year()),Ee.emit("month",he.month()),Ee.emit("day",he.day()),Ee.emit("time",he.format(de.timeFormat)),Ee}function U(){return ge=!1,ve=!1,be=!1,F(!0),Ee}function V(e){var t=l(e,de.inputFormat);return null!==t?(he=Z(t)||he,ue=he.clone(),F(!0),Ee):void 0}function Y(e,t){for(;e&&e.firstChild;)e.removeChild(e.firstChild);t===!0&&e.parentNode.removeChild(e)}function G(){var e;for(e=0;e<de.monthsInCalendar;e++)K(e)}function K(e){function t(e){var t,n,s;for(t=0;t<e.length;t++)u.children.length===me&&(u=r({type:"tr",className:de.styles.dayRow,parent:o.body})),n=e.base.clone().add(t,"days"),s=r({type:"td",parent:u,text:n.format(de.dayFormat),className:i(n,e.cell.join(" ").split(" ")).join(" ")}),e.selectable&&n.date()===c&&ne(s)}function i(e,t){return X(e,!0,de.dateValidator)||t.push(m),t}function n(e,t){return e&&t.push(de.styles.dayConcealed),t}var s,o=De[e],a=ue.clone().add(e,"months"),l=a.daysInMonth(),c=a.month()!==he.month()?-1:he.date(),d=a.clone().date(1),h=k(d.day(),!0),u=r({type:"tr",className:de.styles.dayRow,parent:o.body}),p=n(0!==e,[de.styles.dayBodyElem,de.styles.dayPrevMonth]),f=n(e!==de.monthsInCalendar-1,[de.styles.dayBodyElem,de.styles.dayNextMonth]),m=de.styles.dayDisabled;t({base:d.clone().subtract(h,"days"),length:h,cell:p}),t({base:d.clone(),length:l,cell:[de.styles.dayBodyElem],selectable:!0}),s=d.clone().add(l,"days"),t({base:s,length:me-u.children.length,cell:f}),_e.disabled=!Q(d,!0),ke.disabled=!J(s,!0),o.date=a.clone()}function X(e,t,i){if(!Q(e,t))return!1;if(!J(e,t))return!1;var n=(i||Function.prototype).call(Ee,e.toDate());return n!==!1}function Q(e,t){var i=de.min?t?de.min.clone().startOf("day"):de.min:!1;return!i||!e.isBefore(i)}function J(e,t){var i=de.max?t?de.max.clone().endOf("day"):de.max:!1;return!i||!e.isAfter(i)}function Z(e){if(de.min&&e.isBefore(de.min))return Z(de.min.clone());if(de.max&&e.isAfter(de.max))return Z(de.max.clone());var t=e.clone().subtract(1,"days");return te(t,e,"add")?ee(t):(t=e.clone(),te(t,e,"subtract")?ee(t):void 0)}function ee(e){var t,i=e.clone().subtract(de.timeInterval,"seconds"),n=Math.ceil(Pe/de.timeInterval);for(t=0;n>t;t++)if(i.add(de.timeInterval,"seconds"),i.date()>e.date()&&i.subtract(1,"days"),de.timeValidator.call(Ee,i.toDate())!==!1)return i}function te(e,t,i){for(var n=!1;n===!1&&(e[i](1,"days"),e.month()===t.month());)n=de.dateValidator.call(Ee,e.toDate());return n!==!1}function ie(e){var t=e.target;if(!u.contains(t,de.styles.dayDisabled)&&u.contains(t,de.styles.dayBodyElem)){var i=parseInt(a(t),10),n=u.contains(t,de.styles.dayPrevMonth),s=u.contains(t,de.styles.dayNextMonth),o=se(t)-se(ye);he.add(o,"months"),(n||s)&&he.add(n?-1:1,"months"),ne(t),he.date(i),oe(he,Z(he)||he),ue=he.clone(),de.autoClose===!0&&A(),F()}}function ne(e){ye&&u.remove(ye,de.styles.selectedDay),e&&u.add(e,de.styles.selectedDay),ye=e}function se(e){for(var t;e&&e.getAttribute;){if(t=e.getAttribute(Te),"string"==typeof t)return parseInt(t,10);e=e.parentNode}return 0}function oe(e,t){return e.hour(t.hour()).minute(t.minute()).second(t.second()),e}function re(e){var t=e.target;if(u.contains(t,de.styles.timeOption)){var i=h.moment(a(t),de.timeFormat);oe(he,i),ue=he.clone(),q(),W(),!de.date&&de.autoClose===!0||"time"===de.autoClose?A():T()}}function ae(){return he.toDate()}function le(e){return he.format(e||de.inputFormat)}function ce(){return he.clone()}var de,he,ue,pe,fe,me,ge,ve,be,ye,we,_e,ke,xe,Ce,Se=!1,Te="data-rome-offset",De=[],Pe=86400,Ee=o({associated:e.associated});return i(),setTimeout(f,0),Ee}var n,s=e("crossvent"),o=e("contra/emitter"),r=e("./dom"),a=e("./text"),l=e("./parse"),c=e("./clone"),d=e("./defaults"),h=e("./momentum"),u=e("./classes"),p=e("./noop");t.exports=i},{"./classes":22,"./clone":23,"./defaults":25,"./dom":26,"./momentum":31,"./noop":32,"./parse":33,"./text":45,"contra/emitter":14,crossvent:18}],22:[function(e,t){"use strict";function i(e){return e.className.replace(a,"").split(l)}function n(e,t){e.className=t.join(" ")}function s(e,t){var i=o(e,t);i.push(t),n(e,i)}function o(e,t){var s=i(e),o=s.indexOf(t);return-1!==o&&(s.splice(o,1),n(e,s)),s}function r(e,t){return-1!==i(e).indexOf(t)}var a=/^\s+|\s+$/g,l=/\s+/;t.exports={add:s,remove:o,contains:r}},{}],23:[function(e,t){"use strict";function i(e){var t,s={};for(var o in e)t=e[o],s[o]=t?n.isMoment(t)?t.clone():t._isStylesConfiguration?i(t):t:t;return s}var n=e("./momentum");t.exports=i},{"./momentum":31}],24:[function(e,t){"use strict";function i(e,t){var i,a=n.find(e);return a?a:(i=r(e)?s(e,t):o(e,t),n.assign(e,i),i)}var n=e("./index"),s=e("./input"),o=e("./inline"),r=e("./isInput");t.exports=i},{"./index":27,"./inline":28,"./input":29,"./isInput":30}],25:[function(e,t){"use strict";function i(e,t){var i,r,a=e||{};if(a.autoHideOnClick===r&&(a.autoHideOnClick=!0),a.autoHideOnBlur===r&&(a.autoHideOnBlur=!0),a.autoClose===r&&(a.autoClose=!0),a.appendTo===r&&(a.appendTo=document.body),"parent"===a.appendTo){if(!s(t.associated))throw new Error("Inline calendars must be appended to a parent node explicitly.");a.appendTo=t.associated.parentNode}if(a.invalidate===r&&(a.invalidate=!0),a.required===r&&(a.required=!1),a.date===r&&(a.date=!0),a.time===r&&(a.time=!0),a.date===!1&&a.time===!1)throw new Error("At least one of `date` or `time` must be `true`.");if(a.inputFormat===r&&(a.inputFormat=a.date&&a.time?"YYYY-MM-DD HH:mm":a.date?"YYYY-MM-DD":"HH:mm"),a.initialValue=a.initialValue===r?null:n(a.initialValue,a.inputFormat),a.min=a.min===r?null:n(a.min,a.inputFormat),a.max=a.max===r?null:n(a.max,a.inputFormat),a.timeInterval===r&&(a.timeInterval=1800),a.min&&a.max)if(a.max.isBefore(a.min)&&(i=a.max,a.max=a.min,a.min=i),a.date===!0){if(a.max.clone().subtract(1,"days").isBefore(a.min))throw new Error("`max` must be at least one day after `min`")}else if(1e3*a.timeInterval-a.min%(1e3*a.timeInterval)>a.max-a.min)throw new Error("`min` to `max` range must allow for at least one time option that matches `timeInterval`");if(a.dateValidator===r&&(a.dateValidator=Function.prototype),a.timeValidator===r&&(a.timeValidator=Function.prototype),a.timeFormat===r&&(a.timeFormat="HH:mm"),a.weekStart===r&&(a.weekStart=o.moment().weekday(0).day()),a.weekdayFormat===r&&(a.weekdayFormat="min"),"long"===a.weekdayFormat)a.weekdayFormat=o.moment.weekdays();else if("short"===a.weekdayFormat)a.weekdayFormat=o.moment.weekdaysShort();else if("min"===a.weekdayFormat)a.weekdayFormat=o.moment.weekdaysMin();else if(!Array.isArray(a.weekdayFormat)||a.weekdayFormat.length<7)throw new Error("`weekdays` must be `min`, `short`, or `long`");a.monthsInCalendar===r&&(a.monthsInCalendar=1),a.monthFormat===r&&(a.monthFormat="MMMM YYYY"),a.dayFormat===r&&(a.dayFormat="DD"),a.styles===r&&(a.styles={}),a.styles._isStylesConfiguration=!0;var l=a.styles;return l.back===r&&(l.back="rd-back"),l.container===r&&(l.container="rd-container"),l.positioned===r&&(l.positioned="rd-container-attachment"),l.date===r&&(l.date="rd-date"),l.dayBody===r&&(l.dayBody="rd-days-body"),l.dayBodyElem===r&&(l.dayBodyElem="rd-day-body"),l.dayPrevMonth===r&&(l.dayPrevMonth="rd-day-prev-month"),l.dayNextMonth===r&&(l.dayNextMonth="rd-day-next-month"),l.dayDisabled===r&&(l.dayDisabled="rd-day-disabled"),l.dayConcealed===r&&(l.dayConcealed="rd-day-concealed"),l.dayHead===r&&(l.dayHead="rd-days-head"),l.dayHeadElem===r&&(l.dayHeadElem="rd-day-head"),l.dayRow===r&&(l.dayRow="rd-days-row"),l.dayTable===r&&(l.dayTable="rd-days"),l.month===r&&(l.month="rd-month"),l.monthLabel===r&&(l.monthLabel="rd-month-label"),l.next===r&&(l.next="rd-next"),l.selectedDay===r&&(l.selectedDay="rd-day-selected"),l.selectedTime===r&&(l.selectedTime="rd-time-selected"),l.time===r&&(l.time="rd-time"),l.timeList===r&&(l.timeList="rd-time-list"),l.timeOption===r&&(l.timeOption="rd-time-option"),a}var n=e("./parse"),s=e("./isInput"),o=e("./momentum");t.exports=i},{"./isInput":30,"./momentum":31,"./parse":33}],26:[function(e,t){"use strict";function i(e){var t=e||{};t.type||(t.type="div");var i=document.createElement(t.type);return t.className&&(i.className=t.className),t.text&&(i.innerText=i.textContent=t.text),t.attributes&&Object.keys(t.attributes).forEach(function(e){i.setAttribute(e,t.attributes[e])}),t.parent&&t.parent.appendChild(i),i}t.exports=i},{}],27:[function(e,t){"use strict";function i(e){if("number"!=typeof e&&e&&e.getAttribute)return i(e.getAttribute(o));var t=r[e];return t!==s?t:null}function n(e,t){e.setAttribute(o,t.id=r.push(t)-1)}var s,o="data-rome-id",r=[];t.exports={find:i,assign:n}},{}],28:[function(e,t){"use strict";function i(e,t){var i=t||{};i.appendTo=e,i.associated=e;var s=n(i);return s.show(),s}var n=e("./calendar");t.exports=i},{"./calendar":21}],29:[function(e,t){"use strict";function i(e,t){function i(t){w=r(t||w,C),c.add(C.container,w.styles.positioned),n.add(C.container,"mousedown",p),n.add(C.container,"click",u),C.getDate=y(C.getDate),C.getDateString=y(C.getDateString),C.getMoment=y(C.getMoment),w.initialValue&&(e.value=w.initialValue.format(w.inputFormat)),x=s(C.container,e),C.on("data",v),C.on("show",x.refresh),h(),S()}function d(){h(!0),x.destroy(),x=null}function h(t){var s=t?"remove":"add";n[s](e,"click",m),n[s](e,"touchend",m),n[s](e,"focusin",m),n[s](e,"change",S),n[s](e,"keypress",S),n[s](e,"keydown",S),n[s](e,"input",S),w.invalidate&&n[s](e,"blur",f),t?(C.once("ready",i),C.off("destroyed",d)):(C.off("ready",i),C.once("destroyed",d))}function u(){k=!0,e.focus(),k=!1}function p(){function e(){_=!1}_=!0,setTimeout(e,0)}function f(){_||b()||C.emitValues()}function m(){k||C.show()}function g(){var t=e.value.trim();if(!b()){var i=l.moment(t,w.inputFormat,w.strictParse);C.setValue(i)}}function v(t){e.value=t}function b(){return w.required===!1&&""===e.value.trim()}function y(e){return function(){return b()?null:e.apply(this,arguments)}}var w=t||{};w.associated=e;var _,k,x,C=a(w),S=o(g,30);return i(w),C}var n=e("crossvent"),s=e("bullseye"),o=e("./throttle"),r=(e("./clone"),e("./defaults")),a=e("./calendar"),l=e("./momentum"),c=e("./classes");t.exports=i},{"./calendar":21,"./classes":22,"./clone":23,"./defaults":25,"./momentum":31,"./throttle":46,bullseye:1,crossvent:18}],30:[function(e,t){"use strict";function i(e){return e&&e.nodeName&&"input"===e.nodeName.toLowerCase()}t.exports=i},{}],31:[function(e,t){"use strict";function i(e){
return e&&Object.prototype.hasOwnProperty.call(e,"_isAMomentObject")}var n={moment:null,isMoment:i};t.exports=n},{}],32:[function(e,t){"use strict";function i(){}t.exports=i},{}],33:[function(e,t){"use strict";function i(e,t){return"string"==typeof e?s.moment(e,t):"[object Date]"===Object.prototype.toString.call(e)?s.moment(e):s.isMoment(e)?e.clone():void 0}function n(e,t){var n=i(e,"string"==typeof t?t:null);return n&&n.isValid()?n:null}var s=e("./momentum");t.exports=n},{"./momentum":31}],34:[function(){"use strict";Array.prototype.filter||(Array.prototype.filter=function(e,t){var i=[];return this.forEach(function(n,s,o){e.call(t,n,s,o)&&i.push(n)},t),i})},{}],35:[function(){"use strict";Array.prototype.forEach||(Array.prototype.forEach=function(e,t){if(void 0===this||null===this||"function"!=typeof e)throw new TypeError;for(var i=this,n=i.length,s=0;n>s;s++)s in i&&e.call(t,i[s],s,i)})},{}],36:[function(){"use strict";Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){if(void 0===this||null===this)throw new TypeError;var i=this.length;for(t=+t||0,1/0===Math.abs(t)?t=0:0>t&&(t+=i,0>t&&(t=0));i>t;t++)if(this[t]===e)return t;return-1})},{}],37:[function(){"use strict";Array.isArray||(Array.isArray=function(e){return""+e!==e&&"[object Array]"===Object.prototype.toString.call(e)})},{}],38:[function(){"use strict";Array.prototype.map||(Array.prototype.map=function(e,t){var i,n,s;if(null==this)throw new TypeError("this is null or not defined");var o=Object(this),r=o.length>>>0;if("function"!=typeof e)throw new TypeError(e+" is not a function");for(arguments.length>1&&(i=t),n=new Array(r),s=0;r>s;)s in o&&(n[s]=e.call(i,o[s],s,o)),s++;return n})},{}],39:[function(){"use strict";Array.prototype.some||(Array.prototype.some=function(e,t){var i,n;if(null==this)throw new TypeError("this is null or not defined");var s=Object(this),o=s.length>>>0;if("function"!=typeof e)throw new TypeError(e+" is not a function");for(arguments.length>1&&(i=t),n=0;o>n;){if(n in s){var r=e.call(i,s[n],n,s);if(r)return!0}n++}return!1})},{}],40:[function(){"use strict";Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),i=this,n=function(){},s=function(){var s=this instanceof n&&e?this:e,o=t.concat(Array.prototype.slice.call(arguments));return i.apply(s,o)};return n.prototype=this.prototype,s.prototype=new n,s})},{}],41:[function(){"use strict";var e=Object.prototype.hasOwnProperty,t=!{toString:null}.propertyIsEnumerable("toString"),i=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],n=i.length;Object.keys||(Object.keys=function(s){if("object"!=typeof s&&("function"!=typeof s||null===s))throw new TypeError("Object.keys called on non-object");var o,r,a=[];for(o in s)e.call(s,o)&&a.push(o);if(t)for(r=0;n>r;r++)e.call(s,i[r])&&a.push(i[r]);return a})},{}],42:[function(){"use strict";String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")})},{}],43:[function(e,t){"use strict";e("./polyfills/function.bind"),e("./polyfills/array.foreach"),e("./polyfills/array.map"),e("./polyfills/array.filter"),e("./polyfills/array.isarray"),e("./polyfills/array.indexof"),e("./polyfills/array.some"),e("./polyfills/string.trim"),e("./polyfills/object.keys");var i=e("./core"),n=e("./index"),s=e("./use");i.use=s.bind(i),i.find=n.find,i.val=e("./validators"),t.exports=i},{"./core":24,"./index":27,"./polyfills/array.filter":34,"./polyfills/array.foreach":35,"./polyfills/array.indexof":36,"./polyfills/array.isarray":37,"./polyfills/array.map":38,"./polyfills/array.some":39,"./polyfills/function.bind":40,"./polyfills/object.keys":41,"./polyfills/string.trim":42,"./use":47,"./validators":48}],44:[function(e,t){(function(i){var n=e("./rome"),s=e("./momentum");if(n.use(i.moment),void 0===s.moment)throw new Error("rome depends on moment.js, you can get it at http://momentjs.com, or you could use the bundled distribution file instead.");t.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./momentum":31,"./rome":43}],45:[function(e,t){"use strict";function i(e,t){return 2===arguments.length&&(e.innerText=e.textContent=t),e.innerText||e.textContent}t.exports=i},{}],46:[function(e,t){"use strict";t.exports=function(e,t){var i,n=-1/0;return function(){function s(){clearTimeout(i),i=null;var o=n+t,r=+new Date;r>o?(n=r,e.apply(this,arguments)):i=setTimeout(s,o-r)}i||s()}}},{}],47:[function(e,t){"use strict";function i(e){this.moment=n.moment=e}var n=e("./momentum");t.exports=i},{"./momentum":31}],48:[function(e,t){"use strict";function i(e){return function(t){var i=o(t);return function(n){var a=s.find(t),l=o(n),c=i||a&&a.getMoment();return c?(a&&r.add(this,a),e(l,c)):!0}}}function n(e,t){return function(i,n){function a(e){var t,i,n=s.find(e);return n?t=i=n.getMoment():Array.isArray(e)?(t=e[0],i=e[1]):t=i=e,n&&r.add(n,this),{start:o(t).startOf("day").toDate(),end:o(i).endOf("day").toDate()}}var l,c=arguments.length;return Array.isArray(i)?l=i:1===c?l=[i]:2===c&&(l=[[i,n]]),function(i){return l.map(a.bind(this))[e](t.bind(this,i))}}}var s=e("./index"),o=e("./parse"),r=e("./association"),a=i(function(e,t){return e>=t}),l=i(function(e,t){return e>t}),c=i(function(e,t){return t>=e}),d=i(function(e,t){return t>e}),h=n("every",function(e,t){return t.start>e||t.end<e}),u=n("some",function(e,t){return t.start<=e&&t.end>=e});t.exports={afterEq:a,after:l,beforeEq:c,before:d,except:h,only:u}},{"./association":20,"./index":27,"./parse":33}]},{},[44])(44)}),function(){function e(i){this.extend(e,google.maps.OverlayView),this.b=[],this.d=null,this.g=100,this.m=!1,i=i||{},void 0==i.backgroundColor&&(i.backgroundColor=this.A),void 0==i.borderColor&&(i.borderColor=this.B),void 0==i.borderRadius&&(i.borderRadius=this.C),void 0==i.borderWidth&&(i.borderWidth=this.D),void 0==i.padding&&(i.padding=this.H),void 0==i.arrowPosition&&(i.arrowPosition=this.u),void 0==i.disableAutoPan&&(i.disableAutoPan=!1),void 0==i.disableAnimation&&(i.disableAnimation=!1),void 0==i.minWidth&&(i.minWidth=this.G),void 0==i.shadowStyle&&(i.shadowStyle=this.I),void 0==i.arrowSize&&(i.arrowSize=this.v),void 0==i.arrowStyle&&(i.arrowStyle=this.w),void 0==i.closeSrc&&(i.closeSrc=this.F),t(this),this.setValues(i)}function t(e){var t=e.c=document.createElement("DIV");t.style.position="absolute",t.style.zIndex=e.g,(e.i=document.createElement("DIV")).style.position="relative";var n=e.j=document.createElement("IMG");n.style.position="absolute",n.style.border=0,n.style.zIndex=e.g+1,n.style.cursor="pointer",n.src=e.get("closeSrc"),google.maps.event.addDomListener(n,"click",function(){e.close(),google.maps.event.trigger(e,"closeclick")});var s=e.e=document.createElement("DIV");s.style.overflowX="auto",s.style.overflowY="auto",s.style.cursor="default",s.style.clear="both",s.style.position="relative";var o=e.k=document.createElement("DIV");s.appendChild(o),o=e.N=document.createElement("DIV"),o.style.position="relative";var a=e.n=document.createElement("DIV"),l=e.l=document.createElement("DIV"),c=i(e);a.style.position=l.style.position="absolute",a.style.left=l.style.left="50%",a.style.height=l.style.height="0",a.style.width=l.style.width="0",a.style.marginLeft=r(-c),a.style.borderWidth=r(c),a.style.borderBottomWidth=0,c=e.a=document.createElement("DIV"),c.style.position="absolute",t.style.display=c.style.display="none",t.appendChild(e.i),t.appendChild(n),t.appendChild(s),o.appendChild(a),o.appendChild(l),t.appendChild(o),t=document.createElement("style"),t.setAttribute("type","text/css"),e.h="_ibani_"+Math.round(1e4*Math.random()),t.textContent="."+e.h+"{-webkit-animation-name:"+e.h+";-webkit-animation-duration:0.5s;-webkit-animation-iteration-count:1;}@-webkit-keyframes "+e.h+" {from {-webkit-transform: scale(0)}50% {-webkit-transform: scale(1.2)}90% {-webkit-transform: scale(0.95)}to {-webkit-transform: scale(1)}}",document.getElementsByTagName("head")[0].appendChild(t)}function i(e){return parseInt(e.get("arrowSize"),10)||0}function n(e){return parseInt(e.get("borderRadius"),10)||0}function s(e){return parseInt(e.get("borderWidth"),10)||0}function o(e){return parseInt(e.get("padding"),10)||0}function r(e){return e?e+"px":e}function a(e){var t="mousedown mousemove mouseover mouseout mouseup mousewheel DOMMouseScroll touchstart touchend touchmove dblclick contextmenu click".split(" "),i=e.c;e.s=[];for(var n,s=0;n=t[s];s++)e.s.push(google.maps.event.addDomListener(i,n,function(e){e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation()}))}function l(e,t,i){h(e),t&&e.setMap(t),i&&(e.set("anchor",i),e.bindTo("anchorPoint",i),e.bindTo("position",i)),e.c.style.display=e.a.style.display="",e.get("disableAnimation")||(e.c.className+=" "+e.h,e.a.className+=" "+e.h),v(e),e.m=!0,e.get("disableAutoPan")||window.setTimeout(function(){e.o()},200)}function c(e){e=e.replace(/^\s*([\S\s]*)\b\s*$/,"$1");var t=document.createElement("DIV");if(t.innerHTML=e,1==t.childNodes.length)return t.removeChild(t.firstChild);for(e=document.createDocumentFragment();t.firstChild;)e.appendChild(t.firstChild);return e}function d(e){if(e)for(var t;t=e.firstChild;)e.removeChild(t)}function h(e){if(e.k){d(e.k);var t=e.getContent();if(t){"string"==typeof t&&(t=c(t)),e.k.appendChild(t);for(var i,t=e.k.getElementsByTagName("IMG"),n=0;i=t[n];n++)google.maps.event.addDomListener(i,"load",function(){var t=!e.get("disableAutoPan");v(e),!t||0!=e.b.length&&0!=e.d.index||e.o()});google.maps.event.trigger(e,"domready")}v(e)}}function u(e){if(e.b&&e.b.length){for(var t,i=0;t=e.b[i];i++)p(e,t.f);e.d.style.zIndex=e.g,i=s(e),t=o(e)/2,e.d.style.borderBottomWidth=0,e.d.style.paddingBottom=r(t+i)}}function p(e,t){var i=e.get("backgroundColor"),a=e.get("borderColor"),l=n(e),c=s(e),d=o(e),h=r(-Math.max(d,l)),l=r(l),u=e.g;t.index&&(u-=t.index);var p,i={cssFloat:"left",position:"relative",cursor:"pointer",backgroundColor:i,border:r(c)+" solid "+a,padding:r(d/2)+" "+r(d),marginRight:h,whiteSpace:"nowrap",borderRadiusTopLeft:l,MozBorderRadiusTopleft:l,webkitBorderTopLeftRadius:l,borderRadiusTopRight:l,MozBorderRadiusTopright:l,webkitBorderTopRightRadius:l,zIndex:u,display:"inline"};for(p in i)t.style[p]=i[p];p=e.get("tabClassName"),void 0!=p&&(t.className+=" "+p)}function f(e,t){t.U=google.maps.event.addDomListener(t,"click",function(){m(e,this)})}function m(e,t){if(t){var i=o(e)/2,n=s(e);if(e.d){var a=e.d;a.style.zIndex=e.g-a.index,a.style.paddingBottom=r(i),a.style.borderBottomWidth=r(n)}t.style.zIndex=e.g,t.style.borderBottomWidth=0,t.style.marginBottomWidth="-10px",t.style.paddingBottom=r(i+n),e.setContent(e.b[t.index].content),h(e),e.d=t,v(e)}else e.setContent(""),h(e)}function g(e,t,i){var n=document.createElement("DIV");return n.style.display="inline",n.style.position="absolute",n.style.visibility="hidden","string"==typeof e?n.innerHTML=e:n.appendChild(e.cloneNode(!0)),document.body.appendChild(n),e=new google.maps.Size(n.offsetWidth,n.offsetHeight),t&&e.width>t&&(n.style.width=r(t),e=new google.maps.Size(n.offsetWidth,n.offsetHeight)),i&&e.height>i&&(n.style.height=r(i),e=new google.maps.Size(n.offsetWidth,n.offsetHeight)),document.body.removeChild(n),delete n,e}function v(e){var t=e.get("map");if(t){var a=o(e);s(e),n(e);var l=i(e),d=t.getDiv(),h=2*l,t=d.offsetWidth-h,d=d.offsetHeight-h-b(e),h=0,u=e.get("minWidth")||0,p=e.get("minHeight")||0,f=e.get("maxWidth")||0,m=e.get("maxHeight")||0,f=Math.min(t,f),m=Math.min(d,m),v=0;if(e.b.length)for(var y,w=0;y=e.b[w];w++){var _=g(y.f,f,m);y=g(y.content,f,m),u<_.width&&(u=_.width),v+=_.width,p<_.height&&(p=_.height),_.height>h&&(h=_.height),u<y.width&&(u=y.width),p<y.height&&(p=y.height)}else w=e.get("content"),"string"==typeof w&&(w=c(w)),w&&(y=g(w,f,m),u<y.width&&(u=y.width),p<y.height&&(p=y.height));f&&(u=Math.min(u,f)),m&&(p=Math.min(p,m)),u=Math.max(u,v),u==v&&(u+=2*a),u=Math.max(u,2*l),u>t&&(u=t),p>d&&(p=d-h),e.i&&(e.t=h,e.i.style.width=r(v)),e.e.style.width=r(u),e.e.style.height=r(p)}n(e),a=s(e),t=2,e.b.length&&e.t&&(t+=e.t),l=2+a,(d=e.e)&&d.clientHeight<d.scrollHeight&&(l+=15),e.j.style.right=r(l),e.j.style.top=r(t+a),e.draw()}function b(e){return e.get("anchor")&&(e=e.get("anchorPoint"))?-1*e.y:0}var y;window.InfoBubble=e,y=e.prototype,y.v=15,y.w=0,y.I=1,y.G=50,y.u=50,y.H=10,y.D=1,y.B="#ccc",y.C=10,y.A="#fff",y.F="https://maps.gstatic.com/intl/en_us/mapfiles/iw_close.gif",y.extend=function(e,t){return function(e){for(var t in e.prototype)this.prototype[t]=e.prototype[t];return this}.apply(e,[t])},y.ea=function(e){this.set("backgroundClassName",e)},e.prototype.setBackgroundClassName=e.prototype.ea,e.prototype.O=function(){this.k.className=this.get("backgroundClassName")},e.prototype.backgroundClassName_changed=e.prototype.O,e.prototype.pa=function(e){this.set("tabClassName",e)},e.prototype.setTabClassName=e.prototype.pa,e.prototype.sa=function(){u(this)},e.prototype.tabClassName_changed=e.prototype.sa,e.prototype.da=function(e){this.set("arrowStyle",e)},e.prototype.setArrowStyle=e.prototype.da,e.prototype.M=function(){this.p()},e.prototype.arrowStyle_changed=e.prototype.M,e.prototype.ca=function(e){this.set("arrowSize",e)},e.prototype.setArrowSize=e.prototype.ca,e.prototype.p=function(){this.r()},e.prototype.arrowSize_changed=e.prototype.p,e.prototype.ba=function(e){this.set("arrowPosition",e)},e.prototype.setArrowPosition=e.prototype.ba,e.prototype.L=function(){var e=parseInt(this.get("arrowPosition"),10)||0;this.n.style.left=this.l.style.left=e+"%",v(this)},e.prototype.arrowPosition_changed=e.prototype.L,e.prototype.setZIndex=function(e){this.set("zIndex",e)},e.prototype.setZIndex=e.prototype.setZIndex,e.prototype.getZIndex=function(){return parseInt(this.get("zIndex"),10)||this.g},e.prototype.ua=function(){var e=this.getZIndex();this.c.style.zIndex=this.g=e,this.j.style.zIndex=e+1},e.prototype.zIndex_changed=e.prototype.ua,e.prototype.na=function(e){this.set("shadowStyle",e)},e.prototype.setShadowStyle=e.prototype.na,e.prototype.qa=function(){var e="",t="",i="";switch(parseInt(this.get("shadowStyle"),10)||0){case 0:e="none";break;case 1:t="40px 15px 10px rgba(33,33,33,0.3)",i="transparent";break;case 2:t="0 0 2px rgba(33,33,33,0.3)",i="rgba(33,33,33,0.35)"}this.a.style.boxShadow=this.a.style.webkitBoxShadow=this.a.style.MozBoxShadow=t,this.a.style.backgroundColor=i,this.m&&(this.a.style.display=e,this.draw())},e.prototype.shadowStyle_changed=e.prototype.qa,e.prototype.ra=function(){this.set("hideCloseButton",!1)},e.prototype.showCloseButton=e.prototype.ra,e.prototype.R=function(){this.set("hideCloseButton",!0)},e.prototype.hideCloseButton=e.prototype.R,e.prototype.S=function(){this.j.style.display=this.get("hideCloseButton")?"none":""},e.prototype.hideCloseButton_changed=e.prototype.S,e.prototype.setBackgroundColor=function(e){e&&this.set("backgroundColor",e)},e.prototype.setBackgroundColor=e.prototype.setBackgroundColor,e.prototype.P=function(){var e=this.get("backgroundColor");this.e.style.backgroundColor=e,this.l.style.borderColor=e+" transparent transparent",u(this)},e.prototype.backgroundColor_changed=e.prototype.P,e.prototype.setBorderColor=function(e){e&&this.set("borderColor",e)},e.prototype.setBorderColor=e.prototype.setBorderColor,e.prototype.Q=function(){var e=this.get("borderColor"),t=this.e,i=this.n;t.style.borderColor=e,i.style.borderColor=e+" transparent transparent",t.style.borderStyle=i.style.borderStyle=this.l.style.borderStyle="solid",u(this)},e.prototype.borderColor_changed=e.prototype.Q,e.prototype.fa=function(e){this.set("borderRadius",e)},e.prototype.setBorderRadius=e.prototype.fa,e.prototype.q=function(){var e=n(this),t=s(this);this.e.style.borderRadius=this.e.style.MozBorderRadius=this.e.style.webkitBorderRadius=this.a.style.borderRadius=this.a.style.MozBorderRadius=this.a.style.webkitBorderRadius=r(e),this.i.style.paddingLeft=this.i.style.paddingRight=r(e+t),v(this)},e.prototype.borderRadius_changed=e.prototype.q,e.prototype.ga=function(e){this.set("borderWidth",e)},e.prototype.setBorderWidth=e.prototype.ga,e.prototype.r=function(){var e=s(this);this.e.style.borderWidth=r(e),this.i.style.top=r(e);var e=s(this),t=i(this),n=parseInt(this.get("arrowStyle"),10)||0,o=r(t),a=r(Math.max(0,t-e)),l=this.n,c=this.l;this.N.style.marginTop=r(-e),l.style.borderTopWidth=o,c.style.borderTopWidth=a,0==n||1==n?(l.style.borderLeftWidth=o,c.style.borderLeftWidth=a):l.style.borderLeftWidth=c.style.borderLeftWidth=0,0==n||2==n?(l.style.borderRightWidth=o,c.style.borderRightWidth=a):l.style.borderRightWidth=c.style.borderRightWidth=0,2>n?(l.style.marginLeft=r(-t),c.style.marginLeft=r(-(t-e))):l.style.marginLeft=c.style.marginLeft=0,l.style.display=0==e?"none":"",u(this),this.q(),v(this)},e.prototype.borderWidth_changed=e.prototype.r,e.prototype.ma=function(e){this.set("padding",e)},e.prototype.setPadding=e.prototype.ma,e.prototype.ha=function(e){e&&this.j&&(this.j.src=e)},e.prototype.setCloseSrc=e.prototype.ha,e.prototype.Z=function(){var e=o(this);this.e.style.padding=r(e),u(this),v(this)},e.prototype.padding_changed=e.prototype.Z,e.prototype.onAdd=function(){this.c||t(this),a(this);var e=this.getPanes();e&&(e.floatPane.appendChild(this.c),e.floatShadow.appendChild(this.a))},e.prototype.onAdd=e.prototype.onAdd,e.prototype.draw=function(){var e=this.getProjection();if(e){var t=this.get("position");if(t){var n=0;this.d&&(n=this.d.offsetHeight);var s=b(this),o=i(this),a=parseInt(this.get("arrowPosition"),10)||0,a=a/100,e=e.fromLatLngToDivPixel(t),t=this.e.offsetWidth,l=this.c.offsetHeight;if(t){l=e.y-(l+o),s&&(l-=s);var c=e.x-t*a;switch(this.c.style.top=r(l),this.c.style.left=r(c),parseInt(this.get("shadowStyle"),10)){case 1:this.a.style.top=r(l+n-1),this.a.style.left=r(c),this.a.style.width=r(t),this.a.style.height=r(this.e.offsetHeight-o);break;case 2:t*=.8,this.a.style.top=r(s?e.y:e.y+o),this.a.style.left=r(e.x-t*a),this.a.style.width=r(t),this.a.style.height=r(2)}}}else this.close()}},e.prototype.draw=e.prototype.draw,e.prototype.onRemove=function(){this.c&&this.c.parentNode&&this.c.parentNode.removeChild(this.c),this.a&&this.a.parentNode&&this.a.parentNode.removeChild(this.a);for(var e,t=0;e=this.s[t];t++)google.maps.event.removeListener(e)},e.prototype.onRemove=e.prototype.onRemove,e.prototype.T=function(){return this.m},e.prototype.isOpen=e.prototype.T,e.prototype.close=function(){this.c&&(this.c.style.display="none",this.c.className=this.c.className.replace(this.h,"")),this.a&&(this.a.style.display="none",this.a.className=this.a.className.replace(this.h,"")),this.m=!1},e.prototype.close=e.prototype.close,e.prototype.open=function(e,t){var i=this;window.setTimeout(function(){l(i,e,t)},0)},e.prototype.open=e.prototype.open,e.prototype.setPosition=function(e){e&&this.set("position",e)},e.prototype.setPosition=e.prototype.setPosition,e.prototype.getPosition=function(){return this.get("position")},e.prototype.getPosition=e.prototype.getPosition,e.prototype.$=function(){this.draw()},e.prototype.position_changed=e.prototype.$,e.prototype.o=function(){var e=this.getProjection();if(e&&this.c){var t=b(this),i=this.c.offsetHeight+t,t=this.get("map"),n=t.getDiv().offsetHeight,s=this.getPosition(),o=e.fromLatLngToContainerPixel(t.getCenter()),s=e.fromLatLngToContainerPixel(s),i=o.y-i,n=n-o.y,o=0;0>i&&(o=(-1*i+n)/2),s.y-=o,s=e.fromContainerPixelToLatLng(s),t.getCenter()!=s&&t.panTo(s)}},e.prototype.panToView=e.prototype.o,e.prototype.setContent=function(e){this.set("content",e)},e.prototype.setContent=e.prototype.setContent,e.prototype.getContent=function(){return this.get("content")},e.prototype.getContent=e.prototype.getContent,e.prototype.oa=function(e){(e=this.b[e-1])&&m(this,e.f)},e.prototype.setTabActive=e.prototype.oa,e.prototype.ja=function(e){this.set("maxWidth",e)},e.prototype.setMaxWidth=e.prototype.ja,e.prototype.W=function(){v(this)},e.prototype.maxWidth_changed=e.prototype.W,e.prototype.ia=function(e){this.set("maxHeight",e)},e.prototype.setMaxHeight=e.prototype.ia,e.prototype.V=function(){v(this)},e.prototype.maxHeight_changed=e.prototype.V,e.prototype.la=function(e){this.set("minWidth",e)},e.prototype.setMinWidth=e.prototype.la,e.prototype.Y=function(){v(this)},e.prototype.minWidth_changed=e.prototype.Y,e.prototype.ka=function(e){this.set("minHeight",e)},e.prototype.setMinHeight=e.prototype.ka,e.prototype.X=function(){v(this)},e.prototype.minHeight_changed=e.prototype.X,e.prototype.J=function(e,t){var i=document.createElement("DIV");i.innerHTML=e,p(this,i),f(this,i),this.i.appendChild(i),this.b.push({label:e,content:t,f:i}),i.index=this.b.length-1,i.style.zIndex=this.g-i.index,this.d||m(this,i),i.className=i.className+" "+this.h,v(this)},e.prototype.addTab=e.prototype.J,e.prototype.ta=function(e,t,i){!this.b.length||0>e||e>=this.b.length||(e=this.b[e],void 0!=t&&(e.f.innerHTML=e.label=t),void 0!=i&&(e.content=i),this.d==e.f&&(this.setContent(e.content),h(this)),v(this))},e.prototype.updateTab=e.prototype.ta,e.prototype.aa=function(e){if(!(!this.b.length||0>e||e>=this.b.length)){var t=this.b[e];t.f.parentNode.removeChild(t.f),google.maps.event.removeListener(t.f.U),this.b.splice(e,1),delete t;for(var i,n=0;i=this.b[n];n++)i.f.index=n;t.f==this.d&&(this.d=this.b[e]?this.b[e].f:this.b[e-1]?this.b[e-1].f:void 0,m(this,this.d)),v(this)}},e.prototype.removeTab=e.prototype.aa,e.prototype.K=function(){this.draw()},e.prototype.anchorPoint_changed=e.prototype.K}(),FS.cookies=Cookies.noConflict(),FS.rome=window.rome,FS.moment=window.moment,function(e){"use strict";var t,i=".",n=e.getInternalNS("elements.constants");n.classes={elementContent:"fsElementContent",loadMoreButton:"fsLoadMoreButton",loadMoreClicked:"fsLoadMoreClicked",loadingDotsOverlay:"fsLoadingDotsOverlay",selectAll:"fsSelectAll",stateActive:"fsStateActive",stateExpanded:"fsStateExpanded",stateHidden:"fsStateHidden",stateSelected:"fsStateSelected"},t=n.classes,n.selectors={elementContent:i+t.elementContent,loadMoreButton:i+t.loadMoreButton,loadingDotsOverlay:i+t.loadingDotsOverlay,selectAll:i+t.selectAll,stateActive:i+t.stateActive,stateExpanded:i+t.stateExpanded,stateHidden:i+t.stateHidden,stateSelected:i+t.stateSelected}}(FS),function(e,t,i){"use strict";function n(e,t,i,n,s,o,r){return F.ajax({cache:!1,type:"POST",url:X,data:{copy_element_id:o,copy_timestamp:r,element_type_id:n,is_organizational:i,page_id:s,parent_id:e,sibling_id:t},error:function(){alert("There was an error creating the element. Please try again.")}})}function s(e,t,i){return i=H.defaults(i||{},{elementUpdatedData:[],updateDOM:!0}),F.ajax({cache:!1,data:H.defaults(t||{},{is_draft:g}),type:"GET",url:X+"/"+e}).then(function(t){var n=F(t);return i.updateDOM&&(a(e).replaceWith(n),i.elementUpdatedData.unshift(n),R.triggerElementUpdated.apply(null,i.elementUpdatedData)),n})}function o(){return t.history.state||{}}function r(e){return e.closest('[id^="fsEl_"]')}function a(e){return F("#fsEl_"+e)}function l(e){return e.attr("id").split("_")[1]}function c(e,t){var i,n,s,o=/\/~([\w\-]+)\/([\w\-]+)/,r=/^\/fs\/pages\/(\d+)/;return t||r.test(e)?(s=e.split("?")[1],t||(t=parseInt(e.match(r)[1])),o.test(e)&&(n=e.match(o),i=n[1].replace(/\-/g,"_")+"="+n[2],s=i+(s?"&"+s:"")),{pageID:t,queryString:s}):{}}function d(){return le.data("pageid")}function h(e){var n,s,o={};if(e===i?n=t.location.search.substring(1):(s=e.split("?"),n=s.length>0?s[1]:null),n)for(var r,a,l=0,c=n.split("&"),d=c.length;d>l;l++)a=c[l].split("="),r=F.trim(decodeURIComponent(a[0])),r&&(o[r]=decodeURIComponent(a[1]));return o}function u(){return F(ie).find("> .fsElement.fsStateEditable[data-shared-id]")}function p(e){return e.attr("id").split("_")[2]}function f(e){return e.closest("li").attr("id").split(/-|_/g)[1]}function m(){return le.hasClass(U)}function g(){return le.hasClass(Y)}function v(){return le.hasClass(oe)}function b(){O||(O=F('<div id="fsAthleticsEventElementDialog"></div>').appendTo(document.body),O.dialog({autoOpen:!1,closeOnEscape:!0,draggable:!0,modal:!0,position:["center",15],resizable:!1,buttons:[{text:"Close",click:function(){F(this).dialog("close")}}]}),O.on("click",".fsAlertIcon",function(e){e.preventDefault(),t.open("/cf_directory/cp.cfm?eventtype=Athletics&eventid="+F(this).data("eventid"),"","width=600,height=600")}))}function y(e){return e.hasClass("fsStateEditable")}function w(e,t){var i=H.defaults(t,{is_draft:y(e),is_load_more:!0,parent_id:l(e)});return e.data("element-override")&&(i.element_override=e.data("element-override")),F.ajax({cache:!1,data:i,url:"/fs/elements/"+i.parent_id,error:function(){alert("There was an error with the element. Please try again."),e.children(".fsLoadingDotsOverlay").remove()}})}function _(e){var t,i,n,s=F(this),o={},a=["Constituent","EnotifyArchive"],l=s.data("start-row");t=r(s);for(var c=0;c<a.length;c++)if(t.hasClass("fs"+a[c])){n=a[c];break}if(!t)return!1;switch(i=t.children(K),n){case"Constituent":e.preventDefault(),o.const_page=s.data("page"),o=F.extend(o,s.closest(".fsElementPagination").data("searchparams"));break;case"EnotifyArchive":o.start_row=l}k(i),w(t,o).done(function(e){var o,r=F(e);"EnotifyArchive"==n?(o=r.find(K).children(":not(.fsElementEmpty)"),i.siblings(".fsLoadingDotsOverlay").remove(),i.append(o),t.addClass("fsLoadMoreClicked"),s.remove()):(t.replaceWith(r),R.triggerElementUpdated(r))})}function k(e){e.before('<div class="fsLoadingDotsOverlay" style="height:'+e.height()+"px; width: "+e.width()+'px">'+te+"</div>")}function x(t,i,n){var s=l(t),o=l(n),r=i.length?l(i):0;return F.ajax({cache:!1,dataType:"json",type:"PUT",url:X+"/"+s,data:{page_id:d(),element:{parent_id:o,sibling_id:r}},error:function(){alert("There was an error saving the element. Please refresh and try again.")},success:function(){e.events.triggerElementMoved(t,i),C("element:update",s)}})}function C(e,i){var n,s,o=0==e.indexOf("element:")&&"element:settings:display"!=e;m()&&o?(n=F(q),n.find(".fsElementBannerPublish").removeClass(Q),s={data:l(n),event:"banner:update"}):s=v()&&o?{data:u().data("shared-id"),event:"sharedElement:update"}:{data:i,event:e},t.location.origin||(t.location.origin=t.location.protocol+"//"+t.location.hostname+(t.location.port?":"+t.location.port:"")),t.parent.postMessage(JSON.stringify(s),t.location.origin)}function S(e){b(),O.dialog("option","title","Athletic Event Details"),O.html('<div class="fsLoadingDots"></div>'),O.dialog("open"),F.ajax({cache:!1,data:{action:"getAthleticEventDialogHTML",athleticOccurID:e},dataType:"html",type:"POST",url:"/cf_calendar/ajax/fullcalendar.cfm",error:function(){alert("There was an error loading the Athletic Event Details."),O.dialog("close")},success:function(e){O.html(e)}})}function T(e,i,n){var s="/cf_directory/cp.cfm?eventtype="+e+"&eventid="+i;n&&(s+="&calendar_ids="+n),t.open(s,"","width=600,height=700")}function D(e,t){H.each(e.data("linked-element-ids"),function(e){var i=a(e);i&&s(e,t)})}function P(e){e.each(function(){var e=F(this),t=F("<span>",{"class":"fsClearInputContainer"}),i=F("<span><span></span></span>",{"aria-label":"Clear"});i.toggleClass(Q,!e.val().length),e.on("change input",function(){i.toggleClass(Q,!e.val().length)}),i.on("click",function(){e.val("").trigger("change").focus()}),e.wrap(t).after(i)})}function E(e,t){e.on("click",ne,function(){var e=F(this),t=e.text()==se;e.parent().find(ee).prop("checked",t),e.text(t?V:se)}).on("change",J,function(){F(this).closest(t).find(ne).trigger("updateLabel")}).on("updateLabel",ne,function(){var e=F(this);e.text(0==e.parent().find(ee+Z).length?V:se)})}function M(e,i,n,o){var r,a=e.length?l(e):$.data("element-id"),c=e.length?p(e):0;return c&&(n.shared_element_id=c),r=s(a,n,{updateDOM:!1}),$||($=F('<div id="fsElementPopupDialog"></div>').appendTo(le),$.dialog({modal:!0,resizable:!1,close:function(){var e=F(this),i=e.dialog("option");F(".ui-widget-overlay").off("click"),$.off("click"),F(t).off("message.pageThumbnailSelected"),i.dialogClass&&e.parent().removeClass(i.dialogClass)},open:function(){F(".ui-widget-overlay").on("click",function(){$.dialog("close")})}}).parent().addClass("fsDialog")),$.html(te).dialog("option",H.defaults(o,{position:"center"})).dialog("open").data("element-id",a),r.done(function(e){$.html(e.find(K).html()),$.data("type",i),R.triggerElementDialogShown($)}).fail(function(e,t,i){$.html("<p>An error occurred while retrieving the data:</p><p>"+i+"</p>")}).always(function(){$.dialog("option","position","center")}),$}function A(){return le.hasClass(re)}function I(){return le.hasClass(ae)}function j(e){if(t.history.pushState){var i,n={},s=h();F.each(e,function(e,t){null===t?delete s[e]:s[e]=t}),i=F.param(s),i=i.length>0?"?"+i:i,n[e.element_id]=e,t.history.pushState(F.extend(o(),n),"",i)}}function L(e){if(t.history.replaceState&&e){var i=t.location,n=i.pathname;e.virtualParam&&(n=n.split("~")[0].replace(/\/$/,"")+e.virtualParam),n+=e.queryString?"?"+F.param(H.extend(h(),e.queryString)):i.search,t.history.replaceState({},"",n)}}var O,$,N,F=e.$,H=e._,z=e.getInternalNS("elements.constants.classes"),R=e.events,B=e.getInternalNS("elements.constants.selectors"),W=e.getInternalNS("elements.utils"),q=".fsBannerEdit",U="fsBannerEditMode",V="Deselect All",Y="fsDraftMode",G="fsElementContent",K="."+G,X="/fs/elements",Q=z.stateHidden,J='input[type="checkbox"]',Z=":not(:checked)",ee="li:not("+B.stateHidden+") "+J,te='<div class="fsLoadingDots"></div>',ie="#fsPageContent",ne=B.selectAll,se="Select All",oe="fsSharedElementEditMode",re="fsSuppressGoogleMaps",ae="fsSuppressGoogleSearch",le=F(document.body);N={createElement:n,fetchElementHTML:s,getCurrentHistoryState:o,getElement:r,getElementByID:a,getElementID:l,getInternalLinkProperties:c,getPageID:d,getQueryStringValues:h,getSharedElement:u,getTabID:f,inBannerEditMode:m,inDraftMode:g,inSharedElementEditMode:v,loadElementData:w,loadMoreHandler:_,loadingOverlay:k,moveBehind:x,notifyAdminInterface:C,openAthleticEventPopup:S,openCalendarAlertPopup:T,populateLinkedElements:D,setupClearInputButtons:P,setupSelectAllButtons:E,showElementPopupDialog:M,suppressGoogleMaps:A,suppressGoogleSearch:I,updateQueryStringValueAndHistory:j,updateURLParams:L},F.extend(W,N)}(FS,window),function(e,t){"use strict";function i(e,t,i){var n,o,r=q.data("element"),a=G('<div id="newEl_'+(new Date).getTime()+'" class="'+Me+'">'+et+"</div>");r.hasClass(Me)?"above"==q.find("button."+xt).val()?a.insertBefore(r):a.insertAfter(r):r.replaceWith(a),n=a.prev(Ae),o=n.length?re(n):0,ie(re(se(a.parent())),o,!1,G(e).data("type-id"),le(),t,i).fail(function(){var e=se(a.parent());a.remove(),s(e)}).done(function(e){var i=G(e);a.replaceWith(i),i.find(Et).sortable(Wt),i.hasClass(me)?P(i):i.hasClass(Te)&&i.find(Pt).sortable(Wt),pe("element:create",re(i)),fe.triggerElementAdded(i),t&&i.find(Ae).each(function(){fe.triggerElementAdded(G(this))})}),q.dialog("close")}function n(){var e=G("#fsElementSettingShowBoards"),t=G("#fsElementSettingsDisplayBoardsMethod");e.click(function(){z(e.siblings("#fsConstituentSettingDisplayBoardsLinkContainer"),!this.checked)}),t.find("input:radio").click(function(){z(t.siblings(pt),"fsElementSettingsOpenMethodFolders"!=this.id)}),G("#fsElementSettingLinkedPostFolderPicker").click(function(e){var t=e.originalEvent.target,i={id:t.id,pickerOptions:{selectedItemIDs:G(ut).map(function(){return G(this).val()})}};pe("postFolderPicker:open",i)})}function s(e){var t;switch(e.data("type")){case"Banner":case"Div":case"Tab":t=e;break;case"Container":case"Panel":t=e.find("> "+je);break;default:return}t.find(Ae).length?t.find("> "+Be).remove():t.append('<div class="fsElementAddWrapper '+Re+'"><button class="fsElementAdd">ADD ELEMENT</button></div>')}function o(){sessionStorage.removeItem("copiedElement"),Lt.find(Oe).removeClass(Le)}function r(){Lt.removeClass(ke),B.hide()}function a(e){var t=G.trim(e.redactor("code.get")),i=""==t;e.redactor("core.destroy"),G(De+":has("+wt+")").length||Lt.removeClass(bt),e.prev(".fsContentOverlay").toggleClass("fsStateEmpty",i).find(".fsContentOverlayText").toggleClass("fsAdminWarning",i).text(i?"Click here to add content":"EDIT CONTENT"),e.closest(De).removeClass(bt)}function l(e){e?E(G(ot)):(Q&&G(_e).find(".fsElementBannerExit").click(),W&&W.dialog("isOpen")&&W.dialog("close"),Lt.hasClass(ze)&&q.dialog("close"),d()),Lt.toggleClass(Se,e)}function c(t){var i=G("#fsDateFilterSettingPostCount"),n=i.next("label"),s=G("#fsDateFilterSettingDisplayRange"),o=G("#fsDateFilterSettingDaysAfter"),r=G("#fsDateFilterSettingDaysBefore"),a={autoHideOnBlur:!1,inputFormat:"YYYY-MM-DD",time:!1},l=document.getElementById("fsDateFilterSettingStartDate"),c=document.getElementById("fsDateFilterSettingEndDate");"athletics"!=t&&(i.find("option[value='0']").remove(),s.find("option[value='5']").remove()),"news"!=t?s.find("option[value='0']").remove():(s.find("option[value='1']").remove(),
s.find("option[value='2']").remove(),z(o,!0),z(G('label[for="fsDateFilterSettingDaysAfter"]'),!0)),l&&(e.rome(l,G.extend({dateValidator:e.rome.val.beforeEq(c)},a)),G(".rd-container").on("focusin",function(e){e.stopPropagation()})),c&&e.rome(c,G.extend({dateValidator:e.rome.val.afterEq(l)},a)),s.on("change",function(){var e=G(this),s=e.val(),a=i.val(),l=(1==a?"item":"items")+" from",c=i.find("option[value='0']");z(e.siblings(".fsDateFilterSettingDateRange"),3!=s),z(e.siblings(".fsDateFilterSettingDayRange"),4!=s),z(e.parent().siblings(".fsDateFilterSettingEventYear"),5!=s),n.html(l),"athletics"==t&&(1==s||2==s||5==s?(c.length||(c=G('<option value="0">all</option>'),i.append(c)),5==s&&(c.prop("selected",!0),i.change())):(c.remove(),0==a&&i.change())),r.change(),o.change()}),r.on("change",function(){z(G(".fsDisplayPastEventsToggleContainer"),4==s.val()&&r.val()>0)}),o.on("change",function(){z(G(".fsDisplayUpcomingEventsToggleContainer"),4==s.val()&&o.val()>0)}),i.on("change",function(){var e=G(this),t=(1==e.val()?"item":"items")+" from";n.html(t),z(G(".fsDateFilterSettingDisplayMoreContainer"),0==e.val())})}function d(){G(".ui-sortable").sortable("destroy")}function h(e){e?$t.hasClass(Ee)||($t.addClass(Ee),$t.on("mousewheel DOMMouseScroll",u)):($t.removeClass(Ee),$t.off("mousewheel DOMMouseScroll",u))}function u(e){e=t.event||e.originalEvent,e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,Nt.scrollTop(Nt.scrollTop()+60*Math.max(-1,Math.min(1,-e.wheelDelta||e.detail)))}function p(e){if(0!=e.length){var t,i=re(e),n=b(e),s=e.data("shared-id");if(e.data("use-new"))return void pe("element:settings:display",{elementID:i,isContainer:e.hasClass("fsSharedContainer"),settingsID:g(e),sharedElementID:s});k(),W.dialog("option","title",n.split(/(?=[A-Z])/).join(" ")+("Banner"==n?"":" Element")+" Settings"),W.html(et),W.dialog("open"),t=W.parent().find(".ui-dialog-buttonset"),t.addClass(it),s&&W.data(qe,s),e.hasClass("fsSharedContainer")?W.html('<h3 class="fsSharedElementTitle">This container is shared!</h3><p>Shared containers can only be edited in the Shared Element editor</p>').append(G('<button class="fsSharedElementButton">Edit Shared</button>').on("click",function(){pe("sharedElement:display",s)})):G.ajax({cache:!1,dataType:"html",url:Ue+"/"+i+"/settings"+(0==i?"/"+g(e):""),error:function(e){W.dialog("close"),403==e.status?alert(e.responseText):alert("There was an error loading the settings for this element. Please try again.")},success:function(o){W.data(Fe,i),0==i&&W.data(We,g(e)),!s||Z&&re(ce())==i?(x(o,n,!1),t.removeClass(it)):W.html('<h3 class="fsSharedElementTitle">This element is shared!</h3><p>Would you like to orphan just this element or edit the shared element?</p>').append(G('<button class="fsSharedElementButton">Orphan and Edit</button>').on("click",function(){x(o,n,!0),t.removeClass(it)}),G('<button class="fsSharedElementButton">Edit Shared</button>').on("click",function(){pe("sharedElement:display",s)}))}})}}function f(){var e="fsElementLibraryWrapper",t="fsElementLocation";if(!q){var n,s;q=G('<div id="fsElementLibrary"><div id="'+e+'">'+et+'</div><div id="'+He+'"><div class="fsElementCopiedItem"><span></span><div><p class="name"></p><p class="message">Paste this Element</p></div></div><button value="clear" >Clear</button></div><button class="'+xt+" "+t+'" value="below" >Place Below</button><button class="'+t+'" value="above">Place Above</button></div>'),s=q.find("button."+t),q.dialog(G.extend({},zt,{appendTo:Lt,dialogClass:"fsElementsDialog",width:500,close:function(){Lt.removeClass(ze),q.data("element").removeClass(ve)},open:function(){Lt.addClass(ze),q.data("libraryLoaded")&&s.toggleClass(Ve,!q.data("showLocation")),G(".ui-widget-overlay").bind("click",function(){q.dialog("close")})}})),q.siblings(".ui-dialog-titlebar").remove(),G.ajax({cache:!1,data:{page_id:le()},dataType:"html",url:Ue+"/library",error:function(){alert("There was an error loading the element library. Please try again."),q.remove(),q=!1},success:function(n){q.find("#"+e).html(n),s.toggleClass(Ve,!q.data("showLocation")),q.data("libraryLoaded",!0);var o=q.find(".fsElementLibraryCategoryShared");Z&&(o.find(".fsContainerIcon").parent().remove(),0==o.find(".fsElementLibraryItem").length&&(o.remove(),q.find(".fsTab").eq(o.index()).remove())),ee&&q.find(".fsEmbeddedMapIcon").parent().remove(),te&&q.find(".fsElementLibraryItem:has(span.fsSearchIcon)").find(".fsSearchIcon").parent().remove(),q.on("click","button."+t,function(){G(this).hasClass(xt)||s.toggleClass(xt)}),q.on("click",".fsTab",function(){var e=G(this);return e.addClass(xt).siblings().removeClass(xt),q.find(".fsElementLibraryCategory").addClass(Ve).eq(e.index()).removeClass(Ve),!1}),q.on("click",".fsElementLibraryItem",function(){i(this)})}}),n=G("#"+He),n.find("button[value=clear]").click(function(){o(),H()}),n.click(function(){var e=m();i(this,e.id,e.timestamp)})}return H(),q}function m(){var e=sessionStorage.getItem("copiedElement");return e?JSON.parse(e):void 0}function g(e){return parseInt(e.data("settings-id"))}function v(e){return e.attr("data-title")}function b(e){return e.attr("data-type")}function y(e){var t=W.primaryButtons,i=W.primaryTitle;U.after(e),U.switchClass(ft,mt),e.removeClass(kt,400),W.removeClass(_t),i&&W.dialog("option","title",i),t&&W.dialog("option","buttons",t),W.dialog("open")}function w(){G("#fsAthleticsFilterTypeList").change(function(){var e=G(this),t=e.val(),i=G("#fsAthleticsFilter_"+t.toLowerCase());e.find('option[value="'+t.toUpperCase()+'"]').remove(),i.find("select").prop(Pe,!1),e.parent().before(i.toggleClass(Ve)),1==e.children().length&&G("#fsAthleticsFilterTypes").hide()}),G(".fsRemoveFilter").click(function(){var e=G(this).data("remove"),t=G("#fsAthleticsFilterTypeList"),i=t.find(":first-child"),n=G("#fsAthleticsFilter_"+e);return n.addClass(Ve),n.find('select, input[type="radio"]').prop(Pe,!0),t.append('<option value="'+e.toUpperCase()+'">'+e.charAt(0).toUpperCase()+e.slice(1)+"</option>"),t.html(t.find("option:not(':first-child')").sort(function(e,t){return e.text==t.text?0:e.text<t.text?-1:1})).prepend(i),t.is(":visible")||G("#fsAthleticsFilterTypes").show(),!1})}function _(){G("#fsDateSeparatorSetting").on("change",function(){var e=G("#fsDateSeparatorSetting option:selected").val();G("#fsDateFormatSetting option").each(function(){var t=G(this);t.html(t.html().replace(/[/.-]|&nbsp;|\u2022/g,e))})}),G("#fsDateFormatSetting").on("change",function(){var e=G("#fsDateFormatSetting option:selected").val();z(G("#fsCustomDateContainer"),"custom"!=e)}),G(".fsToggleCustomFormatExample").on("click",function(e){e.preventDefault(),G(".fsCustomFormatExample").toggleClass(Ve)})}function k(){W||(W=G('<div id="fsPageDialog"></div>').appendTo(Lt),W.dialog(G.extend({},zt,{dialogClass:"fsElementSettingsDialog",buttons:[{text:"Cancel",click:function(){G(this).dialog("close")}},{id:"fsElementSettingSaveButton",text:"Save",click:function(){var e,i,n=G(this),s=n.data(Fe),o=Ue+"/"+s+"/",r=le(),a=oe(s).closest(".fsBanner"),l=n.data("orphan");n.hasClass(St)?(i={banner_id:a.length?re(a):0,page_id:r,shared_element_name:n.find("#fsElementShareName").val()},$(!0,"Saving shared element settings"),G.ajax({cache:!1,data:i,dataType:"json",type:"POST",url:o+"shared",error:function(e){var t,i=e.responseJSON;t=403==e.status&&e.responseJSON.message?e.responseJSON.message:i&&i.name?"The shared element name "+i.name:"There was an error creating the shared element",alert(t)},success:function(e){pe("sharedElement:create",e),Q?D(oe(s).closest(".fsBanner")).done(function(){n.dialog("close")}):t.location.reload()}}).always(function(){$(!1)})):(e=G("#fsElementSettings, .fsSecondaryElementSettings").find("input,textarea,select"),i=e.serializeArray(),r&&i.push({name:"page_id",value:r}),l&&i.push({name:"orphan",value:!0}),$(!0,"Saving element settings"),G.ajax({cache:!1,data:i,type:"PUT",url:o+"settings"+(0==s?"/"+n.data(We):""),error:function(e){var t=G.parseJSON(e.responseText);403==e.status?alert(t.message):422==e.status&&"has already been taken"==t.title?alert("This banner name is in use. Please change the name and try again."):alert("There was an error saving the settings for this element. Please try again.")},success:function(e){var t=G(e),o=!l&&n.data(qe);if(n.dialog("close"),oe(s).replaceWith(t),n.removeData(qe),t.hasClass("fsBanner")){var r,a={id:parseInt(s)},c=i.length,d=0;for(d;c>d;d++)r=i[d].name.match(/settings\[(\w*)\]$/),r&&(a[r[1]]=i[d].value);pe("banner:update",a),E(t)}else o?pe("sharedElement:update",o):Z?pe("sharedElement:update",ce().data("shared-id")):(pe("element:update",s),E(G(ot)));fe.triggerElementUpdated(t)}}).always(function(){$(!1)}))}}],close:function(){G(this).hasClass(St)&&R(),Nt.off("keyup.settingsDialog"),G(".fsSecondarySettingsDialog").dialog("close").dialog("destroy").remove(),Lt.removeClass("fsDialogOpen")},open:function(){Nt.on("keyup.settingsDialog",function(e){13!=e.keyCode||G("#fsElementSettingSaveButton").hasClass(Ve)||"TEXTAREA"==document.activeElement.tagName||"true"==G(document.activeElement).attr("contenteditable")||G(".selectize-dropdown-content").is(":visible")||G("#fsElementSettingSaveButton").trigger("click")}),Lt.addClass("fsDialogOpen")}})),W.on("change","#fsElementSubtypeList input[type=radio]",function(e){G("#fsSubtypeSettingsFlag").attr("class","fsSubtypeSelected"+G(e.target).val())}),W.on("click",".fsStyleAccordionHeader",function(){G(this).toggleClass(xt)}),W.on("click",'.fsStyleAccordionHeader input[type="radio"], .fsStyleAccordionHeader label',function(e){e.stopPropagation(),G(this).closest(".fsStyleAccordionHeader").addClass(xt)}),W.on("focus","#fsElementSettingTitle",function(){G(this).select()}),W.on("change","#fsElementSettingShowTitle",function(){G("#fsElementSettingTitle").toggleClass("fsElementTitleHidden",!this.checked)})),G("#fsElementSettingSaveButton").addClass(Ve)}function x(e,i,n){var s=G('<div><div id="fsPageDialogContent">'+e+"</div></div>"),o=s.find(Ct),r=G.extend({},Rt,{buttonsHide:["embed","media","table"],linebreaks:!0,paragraphize:!1});o.length&&s.prepend(o),W.html(s.html()).data("orphan",n),G("#fsElementSettingSaveButton").removeClass(Ve),G("select[multiple]").selectize({hideSelected:!1,plugins:["fsSelectize"],onInitialize:function(){var e=G(this);e[0].settings.create=e[0].$input.data("create");var t=e[0].$input.data("maxitems");isNaN(t)||(e[0].settings.maxItems=t)}}),U=G(gt),Bt[i]&&Bt[i](),G(be).on("change",function(){G(ye).attr("src",G(this).val())}),G("#fsElementSettingBackgroundImageFileManager").on("click",function(){G(t).one("message.pageThumbnailSelected",function(e){var t=JSON.parse(e.originalEvent.data);"fileManager:selected"==t.event&&G(be).val(t.path).trigger("change")}),A("gif,png,jpg,jpeg,svg")}),G("#settings_header_text, #settings_footer_text").redactor(r),y(G(".fsSecondaryElementSettings")),X.setupClearInputButtons(W.find(Ce))}function C(e){function t(t,s){var o,r=s||n.find(".fsGroupPickerTree").jstree(!0).get_selected(!0),a=r.length;e.multiple?o=0==a?"No Groups Selected":1==a?"1 Group Selected":a+" Groups Selected":(o=r[0].text,y(i)),G("#fsSelectedGroupsCount").text(o)}var i=G("#fsSelectGroupsDialogContent"),n=G("#fsSelectGroupsTree"),s={hiddenFieldName:"settings[group_ids][]"};e.multiple=0!=e.multiple,n.fsGroupPicker(G.extend(s,e)).on("groupPicker:selectionLoaded groupPicker:change",t),G("#fsOpenSelectGroupsDialogButton").click(function(){F(i,e.multiple?"Select Groups":"Choose Group")})}function S(){G(Dt).change(function(){1==G(this).val()?G(Tt).prop(Pe,!0).val(1):G(Tt).prop(Pe,!1)})}function T(){G(".fsSettingShowThumbnail").on("change",function(){var e=G(this),t=e.siblings(".fsElementSettingThumbnailOptions");z(t,!e.prop("checked"))}),G(".fsSettingThumbnailPosition").on("change",function(){var e=G(this),t=e.siblings(".fsElementSettingThumbnailAlignShapeContainer");z(t,e.val()>=2)})}function D(e){return I(se(e),!0).done(function(e){Lt.addClass(ke),E(e),N(e.find(Xe))})}function P(e){e.find("> "+je).sortable(G.extend({},X.SORTABLE_CONFIG,{axis:"y",cancel:".fsElementEditSettings, .fsElementDelete, .redactor-editor, .redactor-box",connectWith:!1,containment:"parent",cursorAt:!1,helper:"original",items:at,update:function(e,t){var i=G(t.item),n=i.prev(Ae),s=G(this);ue(i,n,i.parent().parent()).fail(function(){s.sortable("cancel")})}}))}function E(e){e.find(Et).addBack(Et).sortable(Wt),P(e.find(ge))}function M(e){Ht=e,pe("contentElement:unsavedEdits",{unsavedEdits:Ht})}function A(e){var i="/cf_filemanager/adminfiles.cfm?do=refresh&opener=cmsAssets&ext="+e,n="toolbar=no,location=no,directories=no,status=no,menubar=no,scrollbars=yes,resizable=yes,width=750,height=550",s=t.open(i,"popupFileManager",n);s.focus()}function I(e,t){return ne(re(se(e)),{in_draft_mode:!0,is_draft:t,page_id:le()})}function j(e){var t,i,n={settings:{}},s=e.redactor("code.get"),o=le();s!=V?(o&&(n.page_id=o),t=se(e),n.settings.content=s,i=re(t),G.ajax({data:n,dataType:"json",type:"PUT",url:Ue+"/"+i+"/settings"+(0==i?"/"+g(t):""),complete:function(n){200==n.status?(M(!1),0==i?pe("sharedElement:update",t.data("shared-id")):pe("element:update",i),a(e)):403==n.status?alert(n.responseJSON.message):alert("An error occurred saving your content")}})):a(e)}function L(e){G("#fsDateFilterSettingDisplayMoreItemsText").on("change",function(){var t=G(this);""==t.val()&&t.val(e)})}function O(){var e=G(st);G("#fsElementSettingShowLink").on("change",function(){var e=G(this).siblings(vt);e.length&&z(e,!this.checked)}),e.find("input:radio").on("click",function(){z(e.siblings(Ge),"fsElementSettingsOpenMethodPage"!=this.id),z(e.siblings(".fsLinkedElementContainer"),"fsElementSettingsOpenMethodElement"!=this.id)})}function $(e,t){pe("showLoadingOverlay",{message:t,state:e})}function N(e){if(e.length){var t=e.map(function(){return G(this).data("title")}).get();pe("showMissingLinkedPageErrors",{errors:t})}}function F(e,t){W.primaryTitle=W.dialog("option","title"),W.primaryButtons=W.dialog("option","buttons"),U.after(e),U.switchClass(mt,ft),e.addClass(kt,400),W.addClass(_t),W.dialog("option","buttons",[{text:"Back",click:function(){y(e)}}]),t&&W.dialog("option","title",t),W.dialog("open")}function H(){var e=G("#"+He),t=m();t&&(e.find("p.name").text(t.title),e.find("span:first-child").attr("class","fs"+t.type+"Icon"),e.data("elementID",t.id)),e.toggleClass(Ve,!t)}function z(e,t){e.toggleClass(Ve,t)}function R(){var e="Save";W.toggleClass(St),W.hasClass(St)&&(e+=" and Convert to Shared Element"),W.parent().find('button > span:contains("Save")').text(e)}var B,W,q,U,V,Y,G=e.$,K=e._,X=e.getInternalNS("elements.utils"),Q=X.inBannerEditMode(),J=X.inDraftMode(),Z=X.inSharedElementEditMode(),ee=X.suppressGoogleMaps(),te=X.suppressGoogleSearch(),ie=X.createElement,ne=X.fetchElementHTML,se=X.getElement,oe=X.getElementByID,re=X.getElementID,ae=X.getInternalLinkProperties,le=X.getPageID,ce=X.getSharedElement,de=X.getTabID,he=e.getInternalNS("elements.media"),ue=X.moveBehind,pe=X.notifyAdminInterface,fe=e.events,me="fsAccordion",ge="."+me,ve="fsStateActive",be="#fsElementSettingBackgroundImagePath",ye="#fsElementSettingBackgroundImagePreview",we="fsBannerEditOverlay",_e=".fsBannerEdit",ke="fsBannerEditMode",xe="fsClearInput",Ce="."+xe,Se="fsComposeMode",Te="fsContainer",De=".fsContent",Pe="disabled",Ee="fsDevicePreviewMode",Me="fsElement",Ae="."+Me,Ie="fsElementContent",je="."+Ie,Le="fsElementCopied",Oe="."+Le,$e=".fsElementCopy",Ne="fsStateElementDragging",Fe="elementID",He="fsElementLibraryClipboard",ze="fsElementLibraryOpen",Re="fsElementEmptyPlaceholder",Be="."+Re,We="elementSettingsID",qe="sharedElementID",Ue="/fs/elements",Ve="fsStateHidden",Ye=".fsLinkedPageClearButton",Ge=".fsLinkedPageContainer",Ke=".fsLinkedPageID",Xe=".fsElementMissingLinkedPage",Qe=".fsLinkedPageName",Je="fsLinkedPageNameDefault",Ze=[".fsAthleticsEvent",".fsCalendar",".fsNews",".fsPost"],et='<div class="fsLoadingDots"></div>',tt=".fsMediaSettingsSelectedMediaNodes",it="fsOneButton",nt="fsStateOpen",st="#fsElementSettingsOpenMethod",ot="#fsPageContent",rt="fsPanel",at="."+rt,lt="fsPanelGroup",ct="."+lt,dt="fsTabsNavItem",ht=ct+" .fsTabsNav",ut=".fsLinkedPostFolderIDs",pt="#fsElementSettingsDisplayPostFoldersMethod",ft="fsElementSettingsOffScreen",mt="fsElementSettingsOnScreen",gt="#fsElementSettings",vt=".fsElementSettingShowReadMoreContainer",bt="fsStateRedactorEditing",yt="redactor-editor",wt="."+yt,_t="fsSecondaryElementSettingsVisible",kt="fsSecondaryElementSettingsOnScreen",xt="fsStateSelected",Ct="#fsElementShareButton",St="fsElementShareSettings",Tt="#settings_slideshow_slide_count",Dt="#settings_slideshow_transition_effect",Pt="> "+je+".fsStateEditable",Et=_e+", .fsDiv.fsStateEditable, "+at+"."+nt+" "+Pt+", ."+Te+" "+Pt+", .fsTab.fsStateEditable, ."+dt,Mt="#fsSelectedMediaName",At="fsTabs",It="."+At,jt=It+" > "+je,Lt=G(document.body),Ot=G(document),$t=G("html"),Nt=G(t),Ft=G('meta[name="csrf-token"]').attr("content"),Ht=!1,zt={autoOpen:!1,closeOnEscape:!0,draggable:!0,modal:!0,position:["center",15],resizable:!1},Rt={buttonsHide:["media"]},Bt={Account:function(){G(".fsAccountSettingInstructionsType").on("change",function(){z(G("#fsAccountSettingCustomInstructions"),1!=G(this).val())}),G("#fsAccountSettingShowForgotLink").on("change",function(){z(G("#fsAccountSettingForgotLinkOpensIn"),!G(this).is(":checked"))}),G("#fsAccountSettingShowNewLink").on("change",function(){z(G("#fsAccountSettingNewLinkOpensIn, #fsAccountSettingNewLinkOptions"),!G(this).is(":checked"))}),G("#fsAccountSettingForgotLinkOpensIn input, #fsAccountSettingShowForgotLink").on("change",function(){z(G("#fsAccountSettingForgotPasswordInstructions"),!(G("#fsAccountSettingForgotLinkOpensInline").is(":checked")&&G("#fsAccountSettingShowForgotLink").is(":checked")))}),G(".fsAccountSettingShowCustomForgotInstructions").on("change",function(){var e="1"==G(this).val(),t=G("#fsAccountSettingsDefaultForgotPasswordInstructions"),i=G("#fsAccountSettingsCustomForgotPasswordInstructions"),n=t.text();z(t,e),z(i,!e),e&&""==i.val()?i.val(n):e||i.val()!=n||i.val("")})},AthleticsEvent:function(){c("athletics"),w(),_(),O(),L("Load More"),G("#fsAthleticsSettingEventShowTeamName").on("change",function(){z(G("#fsAthleticsSettingEventShowTeamSchoolContainer"),!G(this).prop("checked"))})},AthleticsRoster:function(){var e=G("input[type='radio'][name=\"settings[display_type]\"]"),t=G("#fsAthleticsRosterInformationContainer, #fsAthleticsSettingOutputFormatContainer,#fsAthleticsPlayerDisplayControls, #fsAthleticsCoachDisplayControls");e.on("change",function(){var i=e.filter(":checked"),n="fsAthleticsSettingRosterTypeContent"==i.attr("id");z(t,n)}),O()},AthleticsTeam:function(){w(),G('input[name="settings[subtype]"]').on("change",function(){var e=G(this);z(G("#fsAthleticSettingTeamSchoolContainer"),"Profile"==e.val()&&!G("#fsAthleticSettingTeamName").prop("checked"))}),G("#fsAthleticSettingLinkTeamsToPage").on("change",function(){var e=G(this),t=e.siblings(Ge);z(t,!e.prop("checked"))}),G("#fsAthleticSettingGroupTeams").on("change",function(){var e=G(this),t=e.siblings(".fsAthleticSettingGroupTeamsBy");z(t,!e.prop("checked"))}),G("#fsAthleticSettingTeamName").on("change",function(){z(G("#fsAthleticSettingTeamSchoolContainer"),!G(this).prop("checked"))}),O()},Calendar:function(){c("calendar"),S(),_(),O(),L("Load More Events"),G("#fsCalendarSettingEndDate, #fsCalendarSettingStartDate").datepicker({dateFormat:"yy-mm-dd"}),G("#fsElementSettingSlideshowAutoplay").on("change",function(){var e=G(".fsElementSettingSlideshowDuration");z(e,!G(this).prop("checked"))}),G("#fsCalendarSettingCombineWeekendDays").on("change",function(){G("#fsCalendarSettingWeekStartsOnContainer").toggleClass(Ve,G(this).is(":checked"))}),G("#fsCalendarSettingDisplayAthleticEvents").on("change",function(){G("#fsCalendarSettingsTeamsContainer").toggleClass(Ve,!G(this).is(":checked"))}),G(".fsCalendarSettingEventDisplayType").on("change",function(){z(G(".fsCalendarSettingsCalendars"),1==G(this).val()),z(G(".fsCalendarSettingDisplayTypeSpecific"),0==G(this).val())}),G('input[name="settings[subtype]"]').on("change",function(){var e="Event"==G(this).val();z(G(".fsCalendarSettingsCalendars"),e&&1==G(".fsCalendarSettingEventDisplayType:checked").val())})},Constituent:function(){var e=G("#fsConstituentID"),t=G("#fsConstituentSettingName");T(),O(),n(),C({excludeRoles:!0}),G('input[name="settings[any_roles]"]').on("change",function(){z(G("#fsConstituentSettingRoleSelect"),1==G(this).val())}),G('input[name="settings[use_default_format]"]').on("change",function(){z(G(".fsConstituentCustomFormatSetting"),1==G(this).val())}),G('input[name="settings[display_degrees]"]').on("change",function(){z(G("#fsConstituentSettingDegreeFields"))}),G('input[name="settings[custom_format_display_degrees]"]').on("change",function(){z(G("#fsCustomFormatDegreeFields"))}),G("#fsConstituentSettingDisplayAddress").on("change",function(){var e=G(this);e.siblings(".fsConstituentSettingAddressTypeContainer").toggleClass(Ve,!e.prop("checked"))}),G("#fsConstituentSettingCustomFormatDisplayAddresses").on("change",function(){var e=G(this);e.siblings(".fsConstituentSettingCustomFormatAddressTypeContainer").toggleClass(Ve,!e.prop("checked"))}),G("#fsConstituentSettingDisplayDirectoryEmails, #fsConstituentSettingDisplayProfileEmails").on("change",function(){var e=G(this),t=G(this).siblings(".fsElementSettingEmailOptions");z(t,!e.prop("checked"))}),G("#fsElementSettingShowLink").on("change",function(){z(G("#fsConstituentSettingDisplayProfileLinkContainer"),!G(this).prop("checked"))}),G("#fsConstituentSettingDisplayProfileLink").on("change",function(){G("#fsConstituentSettingProfileLinkText").prop("readonly",!G(this).prop("checked"))}),G('input[name="settings[subtype]"]').on("change",function(){var e=G(this).val();"Directory"==e?G(".fsConstituentFormatSettings").html("<span></span>Pop-Up Details"):"Profile"==e&&G(".fsConstituentFormatSettings").html("<span></span>Field Details")}),t.attr("placeholder","Please enter a name..."),t.autocomplete({minLength:2,change:function(i,n){n.item||(t.val(""),e.val(""))},open:function(){t.autocomplete("widget").addClass("fsConstituentsSettingAutoComplete")},select:function(i,n){return i.stopPropagation(),i.preventDefault(),e.val(n.item.personid),t.val(n.item.name),!1},source:function(e,t){G.ajax({dataType:"json",url:"/cf_endpoints/routes.cfm/constituents/autosuggest.json",data:{filter:e.term},success:function(e){t(e)}})}}).data("ui-autocomplete")._renderItem=function(e,t){return G("<li>").data("item.autocomplete",t).append('<a><div><img src="'+t.avatar+'"> <span>'+t.name+"</span></div></a>").appendTo(e)}},Embed:function(){G("#fsEmbedSettingsCode").redactor(G.extend({},Rt,{codeOnly:!0}))},Groups:function(){C({multiple:!1,onlyGroupSpaces:!0,topLevelDisabled:!1})},Media:function(){var e,t=G("#fsSelectMediaDialogContent");G("#fsMediaSettingsPlayerControls").on("change",function(){var e={disabled:2==G(this).val()};e.disabled&&(e.checked=!0),G("#fsMediaSettingsAutoPlay").prop(e)}),e=G(tt+" input:checked").next("label").text(),G(Mt).text((e?e:"No media")+" selected"),he.initPicker(t),t.on("mediaPicker:change",function(e,t){G(Mt).text(t+" selected")}),G("#fsShowSelectMediaSettingsButton").click(function(){F(t,"Select Media")})},Navigation:function(){var e,t=G("#fsNavStartValue"),i=G("#fsNavStartType"),n=t.find("option"),s=G("#fsNavEndType"),o=s.find("option"),r=t.find('option[selected="selected"]').index(),a=function(){s.html(1==i.val()?o.get(1):o),0==i.val()?t.html(n.slice(1,6)):1==i.val()?t.html(n.slice(1,2)):3==i.val()?(t.html(n.slice(0,2)),0==t.find("option:selected").length&&t.val(0)):t.html(n)},l=function(){if(t.removeAttr("disabled"),s.val(s.find('option[selected="selected"]').index()),1==i.val())t.val(1).attr("disabled","disabled"),s.val(1);else if(2==i.val())t.val(e>=0?e:r);else{if(e>=0)return void t.val(Math.min(e,1));t.val(r)}c()},c=function(){e=t.find("option:selected").index()};t.find("option").remove(),a(),l(),i.change(function(e){z(G(Ge),1!=e.target.value),a(),l()}),t.change(c)},News:function(){c("news"),S(),_(),T(),O(),L("Load More News"),G("#fsElementSubtypeList").on("change",'input[name="settings[subtype]"]',function(){G("#fsNewsSettingDisplayTypeNewsPost").prop("checked")&&"Post"!=G(this).val()&&G("#fsNewsSettingDisplayTypeNews").prop("checked",!0).change()}),G(".fsNewsSettingDisplayType").on("change",function(){var e=G(this),t=e.closest(".fsNewsSettingGeneral").find(".fsNewsSettingCategories");z(t.insertAfter(e.parent()),2==e.val()||4==e.val())}),G("#fsNewsSettingShowBody").on("change",function(){var e=G(this),t=e.siblings(".fsNewsSettingCalloutOption");z(t,!e.prop("checked"))}),G("#fsNewsSettingShowComments").on("change",function(){var e=G(this),t=e.siblings(".fsNewsSettingCommentOptions");z(t,!e.prop("checked"))}),G("#fsElementSettingSlideshowAutoplay").on("change",function(){z(G(".fsElementSettingSlideshowDuration"),!G(this).is(":checked"))}),G("#fsNewsSettingPostShowBody").on("change",function(){var e=G(this),t=e.siblings(".fsNewsSettingPostCalloutOption");z(t,!e.prop("checked"))})},Vimeo:function(){G("#fsVimeoURL").keyup(function(e){z(G("#fsVimeoSettings"),!/com\/\D+/.test(e.currentTarget.value))})},Youtube:function(){var e=function(){var e=0;return function(t,i){clearTimeout(e),e=setTimeout(t,i)}}();G("#fsYoutubeURL").keyup(function(t){e(function(){var e=t.currentTarget.value,i=!(/(list|p)=[\w-]+/.test(e)||/\/(user|channel)\/[\w-]+/.test(e)||/com\/\w+/.test(e)&&!/\/watch.*(?:v)=/.test(e));z(G("#fsYoutubeSettings"),i)},300)})}},Wt={cancel:":input:not(.fsElementMovable),.redactor-box,.fsEmbeddedGoogleMap,"+at+" > header h2,.fsBannerOverlayWrapper",connectWith:Et,cursorAt:{left:5,top:5},distance:10,items:">"+Ae+".fsStateEditable:not("+jt+" > "+at+")",placeholder:"fsElementPlaceholder",scrollSensitivity:125,tolerance:"pointer",helper:function(e,t){return G("<div/>",{height:"auto",id:"fsElementDragHelper",text:t.data("title")+" Element",width:"250px"})},start:function(){G(this).sortable("refreshPositions"),Lt.addClass(Ne)},stop:function(){Lt.removeClass(Ne)},update:function(e,t){var i=G(this);if(s(se(i)),this===t.item.parent()[0]){var n=G(t.item),o=n.parent(),r=n.prev(Ae),a=o.hasClass(dt);a&&(o=oe(de(o)),r=o.find("> "+je+" > "+Ae).last()),ue(n,r,se(o)).fail(function(){i.sortable("cancel"),G(t.sender).sortable("cancel")}).success(function(){a&&(r.length?n.insertAfter(r):n.appendTo(o.find(je)),s(se(o))),fe.triggerElementMoved(n)})}else t.item.parent().parent().hasClass(me)&&!t.item.hasClass(rt)&&i.sortable("cancel")}};if(Ot.ajaxSend(function(e,t,i){/PUT|POST|PATCH|DELETE/.test(i.type)&&t.setRequestHeader("X-CSRF-Token",Ft)}),Ot.ajaxError(function(e,i){401==i.status&&(t.alert("You are not authorized. Please log in and try again."),top.location.href=J?"/admin.cfm":"/fs/login")}),Lt.on("click",De+" > "+je+".fsStateEditable",function(){var e=G(this),t=e.closest(De),i=e.find(".fsContentEditable"),n=G.extend({},Rt,{focus:!0,blurCallback:function(){G(".redactor-image-editter, .redactor-link-tooltip").is(":visible")||j(i)},changeCallback:function(){Ht||M(!0)},initCallback:function(){V=this.code.get()}});Lt.hasClass(Se)&&!i.hasClass(yt)&&(Lt.add(t).addClass(bt),i.redactor(n))}),Lt.on("click",De+"[data-shared-id]:not([data-settings-id])",function(e){var t=se(G(this));Lt.hasClass(Se)&&!G(e.target).hasClass("fsElementAdd")&&p(t)}),Lt.on("click",".fsElementAdd",function(e){var t=G(this).parent(),i=t.hasClass(Re),n=i?t:se(t);n.addClass(ve),f().data("element",n).data("showLocation",!i).dialog("option","position",{at:"center",my:"center top",of:e}).dialog("open")}),Lt.on("mousedown",".fsElementSave",function(){var e=G(this).parent().parent().find(wt);return j(e),!1}),Lt.on("mousedown",".fsElementCancel",function(){var e=G(this).parent().parent().find(wt);return e.redactor("code.set",V),a(e),M(!1),!1}),Lt.on("click",".fsElementBannerEdit",function(){B||(B=G('<div id="'+we+'"></div>'),Lt.append(B)),B.show(),d(),D(G(this))}),Lt.on("click",".fsElementBannerExit, #"+we,function(){d(),E(G(ot)),I(se(G(_e)),!1).done(r)}),Lt.on("click",".fsElementBannerPublish",function(){pe("banner:requestPublish",re(se(G(this))))}),Lt.on("click",".fsElementEditSettings",function(){var e,t=G(this);return e=t.is(jt+" > ul .fsElementEditSettings")?oe(de(t)):se(t),p(e),!1}),Lt.on("click",$e,function(){var e,t=G(this),i=se(t),n="fsElementCopySuccessful",s=b(i);return"SharedContainer"==s?s="Container":"PanelGroup"==s&&(s+=i.hasClass("fsTabs")?"Tabs":"Accordion"),o(),e={id:re(i),timestamp:Date.now(),title:v(i),type:s},sessionStorage.setItem("copiedElement",JSON.stringify(e)),t.addClass(Le).addClass(n),setTimeout(function(){t.removeClass(n)},1e3),!1}),Lt.on("click",".fsElementDelete",function(){var e,t,i,n,o=G(this),r="",a=o.is(jt+" > ul .fsElementDelete")||o.is(ht+" > .fsElementDelete"),l=G('<div id="fsElementDeleteDialog"></div>').appendTo(Lt);if(a){i=o.closest("li");var c=i.parent();if(c.find(".fsTabsNavItem").length<2)return alert("Sorry, you cannot delete at this time. This element requires at least one panel."),!1;t=de(o),e=oe(t)}else e=se(o),t=re(e);return n=v(e),e.find(Ae).not(Ae+at).length>0&&(r+='<p class="fsWarning">WARNING: Deleting this will also delete any elements it contains.</p>'),r+='<p>Are you sure you want to delete "'+n+'"?</p>',l.dialog(G.extend({},zt,{dialogClass:"fsElementDeleteDialog",title:"Delete "+n,buttons:[{text:"Cancel",click:function(){G(this).dialog("close")}},{id:"fsElementDeleteConfirmButton",text:"Delete",click:function(){var n=G(this);n.html(et),G.ajax({cache:!1,dataType:"json",type:"DELETE",url:Ue+"/"+t+"?page_id="+le(),error:function(){n.dialog("close"),alert("There was an error deleting this element. Please try again.")},success:function(){var o=se(e.parent());a&&i.remove(),fe.triggerElementDeleted(e),e.remove(),s(o),pe("element:delete",t),n.dialog("close")}})}}]})),l.html(r),l.dialog("open"),!1}),Lt.on("click",".fsAddTab",function(){var e=G(this),t=e.closest(It),i=re(t),n=e.parent().prev(),s=e.html();e.prop(Pe,!0).html(et),ie(i,n.length>0?re(n):0,!0).done(function(e){var s=G(e).addClass(nt),o=t.find("ul .fsElementActionButtonContainer").first().clone(),r=re(G(e)),a=G("<li>",{id:"fsTab_"+r});a.append(G("<a>",{href:"#"+s.attr("id"),html:"New Tab"})).append(o).addClass(dt),a.insertAfter(n),t.find("> "+je+" > .fsElement").last().after(s),fe.triggerElementUpdated(t),fe.triggerElementAdded(s),E(G(ot)),pe("element:create",i)}).always(function(){e.prop(Pe,!1).html(s)})}),Q&&E(G(_e)),Z&&E(G(ot)),J&&"true"==sessionStorage.getItem("composeModeEnabled")&&!Lt.hasClass("fsBannerPreviewMode")&&l(!0),Lt.on("click",Ct,function(){return R(),!1}),Lt.on("click",Ye,function(e){var t=G(e.originalEvent.target),i=t.closest(Ge),n=i.find(Qe);i.find(Ke).val(0),n.data("defaulttext")?n.text(n.data("defaulttext")).addClass(Je):n.empty().addClass(Ve),t.closest(Ye).addClass(Ve)}),Lt.on("click",".fsLinkedPagePickerButton",function(e){var t=e.originalEvent.target,i={id:t.id,pickerOptions:{allowBranchSelection:!0,depth:G(t).attr("data-depth"),selectedPageIDs:[le()]}};pe("pagePicker:open",i)}),J){var qt=".redactor-box a, .redactor-dropdown a, .redactor-link-tooltip a, #redactor-modal a,.fsMediaGalleryObject a, .fsTabs a, .fsTabsNav .ui-tabs-anchor, .jstree-checkbox-selectall,.fsNotification a, .fsAlternateViewToggleLink, .fsElementPagination a";Lt.on("click","a[href]:not("+qt+")",function(){var e=G(this),i=e.attr("href"),n=ae(i,e.data("page-id"));return/^(javascript:|mailto:|tel:|#)/.test(i)?!0:(n.pageID?pe("page:show",{pageID:n.pageID,queryString:n.queryString}):t.open(i,"fsPopWin"),!1)})}if(Nt.on("message",function(e){var t;try{t=JSON.parse(e.originalEvent.data)}catch(i){t={event:""}}switch(t.event){case"composeMode":l(t.data);break;case"devicePreview:open":h(!0);break;case"devicePreview:close":h(!1);break;case"element:updated":var n=G(t.data.elementHtml),s=oe(t.data.elementID),o="linked-element-ids",r=n.data(o)||[],a=s.data(o)||[];s.replaceWith(n),K.isEqual(r,a)||K.each(K.unique(r.concat(a)),function(e){var t=oe(e);t.length&&ne(e)}),fe.triggerElementUpdated(n);break;case"pagePicker:return":var c=G("#"+t.data.target).closest(Ge);c.find(Ke).val(t.data.pageID),c.find(Qe).text(t.data.pageName).removeClass(Ve+" "+Je),c.find(Ye).removeClass(Ve);break;case"postFolderPicker:return":var d=G("#"+t.data.target).closest(pt),u=G("<input>",{"class":"fsLinkedPostFolderIDs",multiple:"multiple",name:"settings[board_folder_ids][]",type:"hidden"}),p=t.data.selectedItemIDs;d.find(ut).remove(),G.each(p,function(e,t){d.append(u.clone().val(t))}),0==p.length&&d.append(u),d.find(".fsLinkedPostFoldersSelected").text(p.length+" folders selected")}e.preventDefault()}),Lt.on("click",".fsElementPagination a, .fsLoadMoreButton:not("+Ze.map(function(e){return e+" .fsLoadMoreButton"}).join(",")+")",X.loadMoreHandler),Nt.resize(function(){clearInterval(Y),Y=setTimeout(function(){
G(".fsEmbeddedMediaResponsive").each(function(){var e=G(this);e.height(Math.round(e.width()*e.data("aspectratio")))})},250)}),G.widget("ui.dialog",G.ui.dialog,{_allowInteraction:function(e){return this._super(e)?!0:e.target.ownerDocument!=this.document[0]?!0:G(e.target).closest("#redactor-modal, .redactor-dropdown, .redactor-link-tooltip, .redactor-box-fullscreen").length?!0:void 0},_moveToTop:function(e,t){e&&this.options.modal||this._super(e,t)}}),G(function(){var e=m();if(X.setupClearInputButtons(Lt.find(Ce)),N(Lt.find(Xe)),e){var t=oe(e.id);t&&t.find($e+":first").addClass(Le)}}),J){var Ut=K.debounce(function(){Lt.hasClass(Se)&&G(ot).find(Et).sortable(Wt)},750);fe.onElementShown("Panel",Ut),fe.onElementHidden("Panel",Ut)}X.SORTABLE_CONFIG=Wt}(FS,window),function(e){"use strict";function t(t){return e(t).closest(l)}function i(e){var i=t(e);i.find(o).val(""),i.find(c+","+d).addClass(a),i.find(r).removeClass(a),i.find(o).focus()}function n(e){var i=t(e);i.find(r+","+d+","+h).addClass(a),i.find(c).removeClass(a).find(".fsLoginUsername").focus()}function s(e){var i=t(e);i.find(r+","+c).addClass(a),i.find(d).removeClass(a),i.find(d+" .fsLoginNewFirstName").focus()}var o=".fsLoginForgotEmail",r=".fsLoginForgotView",a="fsStateHidden",l=".fsAccount",c=".fsLoginMainView",d=".fsLoginNewView",h=".fsResetPasswordView";e(".fsAccount form").submit(function(){var t=e(this),i=t.find(".fsLoginUsername input"),n=t.find(".fsLoginPassword input");if(i.length){if(0==e.trim(i.val()).length)return alert("Please enter your username to log in."),i.val(""),i.focus(),!1;if(0==n.val().length)return alert("Please enter your password to log in."),n.val(""),n.focus(),!1}return t.find('input[name="authenticity_token"]').length?!0:(e.get("/fs/sessions/user/csrf-token",function(e){t.append(e).submit()}),!1)}),e(".fsLoginForgotPasswordLink a").on("click",function(){var t=e(this);return"#"==t.attr("href")?(i(this),!1):!0}),e(".fsLoginNewAccountLink a").on("click",function(){var t=e(this);return"#"==t.attr("href")?(s(this),!1):!0}),e(".fsLoginForgotCancel, .fsLoginNewCancel, .fsResetCancel").on("click",function(){n(this)}),e(".fsResetContinue").on("click",function(){var i,s=e(this),o=t(s),r=o.find(".fsResetRequestKey"),l=o.find(".fsResetUsername"),c=o.find(".fsResetNewPassword"),d=o.find(".fsResetNewVerifyPassword"),h=e.trim(l.val()),u=e.trim(r.val()),p=e.trim(c.val()),f=e.trim(d.val());return o.find(".fsError").addClass(a),0==h.length?(i="Please enter your username to continue.",alert(i),l.next(".fsError").removeClass(a).html(i),void l.val("").focus()):0==p.length?(i="Please enter a password to continue.",alert(i),c.next(".fsError").removeClass(a).html(i),void c.val("").focus()):0==f.length?(i="Please verify the password by typing it again.",alert(i),d.next(".fsError").removeClass(a).html(i),void d.val("").focus()):p!=f?(i="Please verify the password by ensuring that both passwords match.",c.next(".fsError").removeClass(a).html(i),d.next(".fsError").removeClass(a).html(i),void alert(i)):(s.prop("disabled",!0),void e.ajax({dataType:"json",type:"POST",url:"/cf_endpoints/routes.cfm/constituents/reset_password.json",data:{password:p,password_confirm:f,request_key:u,username:h},error:function(e,t,i){alert(i),s.prop("disabled",!1)},success:function(e){e.success?(alert("You have successfully updated your password. Please log in using your new password."),n(s)):alert(e.error),s.prop("disabled",!1)}}))}),e(".fsLoginForgotSubmit").on("click",function(){var t=e(this),i=t.siblings(o),s=e.trim(i.val());return 0==s.length?(alert("Please enter an email address to continue."),i.val(""),void i.focus()):(t.prop("disabled",!0),void e.ajax({data:{email:s},dataType:"json",type:"POST",url:"/cf_endpoints/routes.cfm/constituents/forgot.json",error:function(e,i,n){alert(n),t.prop("disabled",!1)},success:function(e){e.success?(alert("You have been sent an email with your login information."),n(t)):alert(e.error),t.prop("disabled",!1)}}))}),e(".fsLoginNewContinue").on("click",function(){var i=e(this),n=t(this),s=n.find('.fsLoginNewFirstName input[type="text"]'),o=n.find('.fsLoginNewLastName input[type="text"]'),r=n.find('.fsLoginNewEmail input[type="text"]'),a=n.find('.fsLoginNewVerifyEmail input[type="text"]'),l=n.find('.fsLoginNewPassword input[type="password"]'),d=n.find('.fsLoginNewVerifyPassword input[type="password"]'),h=n.find('.fsLoginNewCaptcha input[name="recaptcha_challenge_field"]'),u=n.find('.fsLoginNewCaptcha input[name="recaptcha_response_field"]'),p=e.trim(s.val()),f=e.trim(o.val()),m=e.trim(r.val()),g=e.trim(a.val()),v=l.val(),b=d.val(),y="",w="";if(0==p.length)return alert("Please enter your first name to continue."),void s.val("").focus();if(0==f.length)return alert("Please enter your last name to continue."),void o.val("").focus();if(0==m.length)return alert("Please enter your email address to continue."),void r.val("").focus();if(0==g.length)return alert("Please verify your email address by typing it again."),void a.val("").focus();if(m!=g)return void alert("Please verify your email address by ensuring that both addresses match.");if(0==v.length)return alert("Please enter a password to continue."),void l.val("").focus();if(0==b.length)return alert("Please verify the password by typing it again."),void d.val("").focus();if(v!=b)return void alert("Please verify the password by ensuring that both passwords match.");if(h.length>0&&u.length>0&&(y=h.val(),w=u.val(),0==w.length))return alert("Please enter the CAPTCHA code to continue."),void u.focus();i.prop("disabled",!0);var _={email:m,first_name:p,last_name:f,password:v,verify_email:g,verify_password:b};y.length>0&&w.length>0&&(_.captcha_challenge=y,_.captcha_response=w),e.ajax({data:_,dataType:"json",type:"POST",url:"/cf_endpoints/routes.cfm/constituents/new.json",error:function(e,t,n){alert(n),i.prop("disabled",!1)},success:function(e){e.success?(alert("You have been sent an email with your new account information."),n.find('[name="username"]').val(m),n.find('[name="password"]').val(v),n.find(c+" form").submit()):alert(e.error),i.prop("disabled",!1)}})})}(jQuery),function(e,t,i){"use strict";function n(){var t=e(this),n=i.getElement(t),s=n.children(r),o=n.hasClass("fsList")?n.find(".fsListItems"):n.find(".fsEventTable"),a={},d=t.data("start-row"),h=o.data("event-year");a.athletics_team_id=t.data("filter-id"),a.start_row=d,t.hasClass(l)?(a.is_load_more=!1,a.start_event_year=e(c).val()):h&&(a.start_event_year=h),i.loadingOverlay(s),i.loadElementData(n,a).done(function(i){var o,a=e(i);t.hasClass(l)?(o=a.find(r),s.replaceWith(o),s=n.children(r)):n.hasClass("fsTable")?(o=a.find(".fsEventTable > tbody").children(),n.find(".fsLoadMoreButtonRow").replaceWith(o),n.addClass("fsLoadMoreClicked")):(o=a.find(r).children(":not(.fsElementEmpty)"),t.replaceWith(o),n.addClass("fsLoadMoreClicked")),s.siblings(".fsLoadingDotsOverlay").remove()})}function s(t){t.on("click",".fsLoadMoreButton",n).on("change",c,n).on("click",".fsAthleticsEventDetailLink, .fsAthleticsEventRecapLink",function(t){var n=e(this),s=i.getElement(n),o=n.data("occurid");s.data("linked-element-ids")?(t.preventDefault(),i.populateLinkedElements(s,{occur_id:o}),i.updateURLParams({virtualParam:"/~occur-id/"+o})):"popup"==n.data("linktype")&&(t.preventDefault(),i.openAthleticEventPopup(o))}).on("click",".fsAlertIcon",function(t){t.preventDefault(),window.open("/cf_directory/cp.cfm?eventtype=Athletics&eventid="+e(this).data("eventid"),"","width=600,height=600")}).on("click",".fsRSSIcon, .fsAlertsIcon",function(e){e.preventDefault(),window.open("/cf_athletics/cms_athletic_feeds.cfm","","width=600,height=600")})}var o="fsElementContent",r="."+o,a="AthleticsEvent",l="fsSelectStartEventYear",c="."+l;t.onElementAdded(a,s),t.onElementUpdated(a,s),s(e(".fs"+a))}(FS.$,FS.events,FS.getInternalNS("elements.utils")),function(e){"use strict";function t(e){e.find(".fsAthleticsBioLink").on("click",function(){var e=n(this),t=e.closest(".fsTable"),i=e.text(),s=e.data("person-id"),o=t.data("team-id"),r=t.data("team-name"),a="toolbar=no,location=no,directories=no,status=no,menubar=no,scrollbars=yes,resizable=yes,width=520,height=400",l="/cf_athletics/components/display.cfc?method=outputBio&view=bio&personid="+s+"&teamID="+o+"&derivedName="+encodeURI(i)+"&teamName="+encodeURI(r),c=window.open(l,"bioPop",a);return c.focus(),!1})}var i="AthleticsRoster",n=e.$,s=e.events;s.onElementAdded(i,t),s.onElementUpdated(i,t),t(n(".fs"+i))}(FS),function(e,t){"use strict";function i(e){e.on("change",".fsAthleticsTeamDirectory",function(){var i=t(this),s=i.val();if(""==s)return!1;if(e.data("linked-element-ids"))n(e,s);else if(a){var o=r(s,i.data("page-id"));l("page:show",{pageID:o.pageID,queryString:o.queryString})}else window.location.href=s}).on("click",".fsAthleticsTeamName > a[data-team-id]",function(){return n(e,t(this).data("team-id")),!1})}function n(e,t){o.populateLinkedElements(e,{athletics_team_id:t}),o.updateURLParams({virtualParam:"/~athletics-team-id/"+t})}var s=e.events,o=e.getInternalNS("elements.utils"),r=o.getInternalLinkProperties,a=o.inDraftMode(),l=o.notifyAdminInterface;t(".fsAthleticsTeam").each(function(){i(t(this))}),s.onElementAdded("athleticsteam",i),s.onElementUpdated("athleticsteam",i)}(FS,FS.$),function(e){"use strict";var t=e.$,i=e.events,n=t("body"),s=".fsMenu",o="fsStateMenuOpen";e.menu={hide:function(){n.hasClass(o)&&(n.removeClass(o),i.triggerElementHidden(t(s)))},show:function(){n.hasClass(o)||(n.addClass(o),i.triggerElementShown(t(s)))},toggle:function(){n.hasClass(o)?e.menu.hide():e.menu.show()}},i.onElementUpdated("Banner",function(e){e.find(".fsElement").each(function(){i.triggerElementUpdated(t(this))})})}(FS),function(e){"use strict";var t=e.$,i=e.getInternalNS("elements.calendar.utils"),n=e.getInternalNS("elements.constants.classes"),s=e.getInternalNS("elements.utils"),o=e.moment;i.getDateDivFromMoment=function(e,t){return e.find('.fsCalendarDate[data-day="'+t.date()+'"][data-year="'+t.year()+'"][data-month="'+t.month()+'"]')},i.getMomentFromDateDiv=function(e){return o({date:e.data("day"),month:e.data("month"),year:e.data("year")})},i.monthPickerClickHandler=function(i,r){var a=i.find(".fsCalendarMonthYearPicker");if(a.length)a.toggleClass(n.stateHidden);else{var l,c,d,h=i.find(".fsCalendarGridShowMonthPickerButton"),u=h.data("month"),p=h.data("year"),f=s.getElementID(i);a=t('<div><div class="fsCalendarMonthYearPicker"><div class="fsCalendarMonthPicker"><ul/></div><div class="fsCalendarYearPicker"><ul/></div><button disabled>GO</button></div></div>'),c=a.find(".fsCalendarMonthPicker ul"),d=a.find(".fsCalendarYearPicker ul"),l=a.find("button"),e._.each(o.months(),function(e,i){var n="fsCalendarGridMonthPickerInput"+e+"-"+f,s=i+1,o=t("<li>"),r=t("<label>",{"for":n,text:e}),a=t("<input>",{checked:s==u,id:n,name:"fsCalendarMonthInput-"+f,type:"radio",value:s});o.append(a),o.append(r),c.append(o)});for(var m=p-5;p+5>=m;m++){var g="fsElementGridYearPickerInput"+m+"-"+f,v=t("<label>",{"for":g,text:m}),b=t("<li>"),y=t("<input>",{checked:m==p,id:g,name:"fsCalendarYearInput-"+f,type:"radio",value:m});b.append(y),b.append(v),d.append(b)}a.find(".fsCalendarMonthYearPicker").on("change","input",function(){var e=c.find("input:checked").val(),t=d.find("input:checked").val();l.prop("disabled",!1).val(t+"-"+e+"-1")}),l.click(function(){a.find(".fsCalendarMonthYearPicker").addClass(n.stateHidden)}).click(r),h.parent().append(a)}}}(FS),function(e,t){"use strict";function i(e,t,i){var n=e.find(M),s="fsCalendar"+t+"Browser";e.find(".fsDisplayNavigation input[value="+t+"]").prop("checked",!0),n.removeClass("fsCalendarMonthBrowser fsCalendarWeekBrowser fsCalendarDayBrowser").addClass(s),"Week"==t?g(e,i):"Day"==t?p(e,i):m(e)}function n(e){var t=e.find(T),i=e.find(S);return t.length?t:z.getDateDivFromMoment(e,z.getMomentFromDateDiv(i))}function s(e){var t=e.find(M);return t.hasClass("fsCalendarDayBrowser")?"Day":t.hasClass("fsCalendarWeekBrowser")?"Week":"Month"}function o(e,t){var i,n,o=e.find(S),r=t.hasClass("fsCalendarPrevMonth")?"previous":"next";return"Day"!=s(e)&&(i=e.find(".fsCalendarRow:not("+x.stateHidden+")"),o=i.find(C+":"+("previous"==r?"first":"last"))),n=z.getMomentFromDateDiv(o),"previous"==r?n.subtract(1,"day"):n.add(1,"day")}function r(e){var t,n=w(e.target),r=U.getElement(n),a=r.children(P),l=n.val(),c=s(r),h={},u=n.data("start-row");return l&&(h.cal_date=l),u&&(h.start_row=u),c.match(/^(Day|Week)$/)&&(t=o(r,n),z.getDateDivFromMoment(r,t).length)?(i(r,c,t),!1):(U.loadingOverlay(a),void U.loadElementData(r,h).done(function(e){t=t||H(n.val());var i=w(e);r.replaceWith(i),W.triggerElementUpdated(i,c,t),q.triggerUpdated(U.getElementID(r),h),d(r,t)}))}function a(e){"complete"==document.readyState?c(e):e.data("willResizeOnLoad")||(e.data("willResizeOnLoad",!0),w(t).one("load",function(){c(e)}))}function l(e,t,i,n,s,o,r){var a=w("<ul>");w.each(e,function(e,o){var r=w("<li>"),l=o[i],c=s+l;r.append(w("<input>",{checked:-1==t.indexOf(l.toString()),id:c,type:"checkbox",value:l})),r.append(w("<label>",{"for":c,text:o[n]})),a.append(r)}),o.html(a).prepend(w("<p><strong>"+r+"</strong></p>"))}function c(t){t.find(".fsCalendarRow").each(function(){var t,i=w(".fsCalendarDaybox",this);i.css("height",""),t=e._.reduce(i,function(e,t){var i,n,s=w(t);return s.hasClass("fsCalendarWeekendDayBox")?(n=s.children("div"),i=2*Math.max(w(n[0]).outerHeight(),w(n[1]).outerHeight())):i=s.outerHeight(),Math.max(e,i)},0),i.css("height",t+"px")})}function d(e,t){var i=B[U.getElementID(e)],n=t.format(j);U.updateURLParams({queryString:{cal_date:n}}),i.filters.cal_date=n,i.date=t}function h(e,t,i,n){e.find(S).data({day:t,month:i,year:n})}function u(e,n,o){var c=e.attr("data-calendar-ids")||"",d=U.getElementID(e),h=e.attr("data-team-ids")||"",u=e.data("trigger-element-ids");n&&o&&e.hasClass("fsGrid")&&i(e,n,o),u&&q.onFilter(d,u,function(t,n){var o=s(e),r=B[d],a=!0;if(_.has(n,"calendarIDsToHide")){var l="hide_cals_el_"+d;n.calendarIDsToHide.length>0?R.set(l,n.calendarIDsToHide.join(":")):R.remove(l)}if(_.has(n,"date")&&(r.date=n.date,r.filters.cal_date=n.date.format(j),e.hasClass("fsList"))){var c=n.date.format(j);r.filters.start_date=c,r.filters.end_date=c}if(_.has(n,"keywords")&&(r.filters.keywords=n.keywords),_.has(n,"rangeStart")&&(r.filters.start_date=n.rangeStart?n.rangeStart.format(j):null),_.has(n,"rangeEnd")&&(r.filters.end_date=n.rangeEnd?n.rangeEnd.format(j):null),_.isEqual(_.keys(n),["date"])){var h=z.getDateDivFromMoment(e,n.date);h.length&&!h.parent().hasClass("fsCalendarOutOfRange")&&(a=!1)}a?(U.loadingOverlay(e.find(P)),U.fetchElementHTML(d,r.filters,{elementUpdatedData:[o,r.date]}).done(function(){q.triggerUpdated(d,r.filters,t)})):i(e,o,r.date)}),e.on("click",".fsAlertIcon",function(e){var t=w(this);e.preventDefault(),U.openCalendarAlertPopup(t.siblings(".fsCalendarEventLink").data("ath-id")?"athletics":"calendar",t.data("eventid"))}).on("click",".fsAlertsIcon",function(e){e.preventDefault(),U.openCalendarAlertPopup("calendar","all",U.getElement(w(this)).data("calendar-ids"))}).on("click",".fsAlternateViewToggleLink",function(i){i.preventDefault();var n=w(this),s=e.find(".fsDayContainer:first > article > time"),o=e.hasClass("fsGrid")?z.getMomentFromDateDiv(e.find(S)):H(s.attr("datetime")),r=e.data("element-override")?e.data("element-override"):U.getElementID(e),a="element_override="+r+"&cal_date="+o.format(j);U.inDraftMode()?U.notifyAdminInterface("page:show",{pageID:n.data("page-id"),queryString:a}):t.location.href=n.attr("href")+"?"+a}).on("click",".fsLoadMoreButton",function(){var t=w(this),i=e.find(P),n={},s=U.getQueryStringValues(),o=t.data("start-row");s.cal_date&&s.cal_date.length&&(n.cal_date=s.cal_date),o&&(n.start_row=o),_.extend(n,B[d].filters),U.loadingOverlay(i),U.loadElementData(e,n).done(function(n){var s=w(n),o=s.find(P).children(":not(.fsElementEmpty)");i.siblings(".fsLoadingDotsOverlay").remove(),i.append(o),e.addClass("fsLoadMoreClicked"),t.remove()})}).on("click",".fsRSSIcon",function(e){e.preventDefault(),t.open("/cf_calendar/cms_calendar_feeds.cfm?calendar_ids="+U.getElement(w(this)).data("calendar-ids"),"","width=550,height=625")}).on("click",".fsRequestEventControl",function(e){e.preventDefault(),t.open("/cf_calendar/postEvent.cfm?calendar_ids="+w(this).data("calendarids"),"","width=625,height=725")}).on("click",".fsDisplayNavigation input",function(){i(e,w(this).val())}).on("click",".fsCalendarFilterIcon",function(e){var t,n=w(this),o=n.closest(".fsElement"),r=n.data("element-id"),a="hide_cals_el_"+r,u="hide_teams_el_"+r,p=w(".fsCalendarFilterDialog[data-element-id='"+r+"']");e.preventDefault(),p.length?p.dialog("open"):(p=w('<div class="fsCalendarFilterDialog" data-element-id="'+r+'"><div class="fsCalendarFilterDialogContent"><div class="fsCalendarFilterDialogCalendars"><div class="fsLoadingDots"></div></div><div class="fsCalendarFilterDialogTeams"><div class="fsLoadingDots"></div></div></div>'),p.dialog({modal:!0,title:"Calendar Filter",buttons:[{text:"Cancel",click:function(){var e,t=w(this),i=(R.get(a)||"").split(":"),n=(R.get(u)||"").split(":");t.find("fsCalendarFilterDialogCalendars input").each(function(){e=w(this),e.prop("checked",-1==i.indexOf(e.val()))}),t.find("fsCalendarFilterDialogTeams input").each(function(){e=w(this),e.prop("checked",-1==n.indexOf(e.val()))}),t.dialog("close")}},{"class":".fsAppModalDialogApply",text:"Apply",click:function(){var e=w(this),t=s(o),n=B[d],l=e.find(".fsCalendarFilterDialogCalendars input:checkbox:not(:checked)").map(function(){return this.value}).get(),c=e.find(".fsCalendarFilterDialogTeams input:checkbox:not(:checked)").map(function(){return this.value}).get();l.length>0?R.set(a,l.join(":")):R.remove(a),c.length>0?R.set(u,c.join(":")):R.remove(u),e.dialog("close"),o.html('<div class="fsLoadingDots"></div>'),U.fetchElementHTML(r,n.filters).done(function(e){o=e,i(o,t,n.date)})}}]}),c.length?(t="/cf_endpoints/routes.cfm/calendars.json?calendar_ids="+c,o.data("display-group-calendars")&&(t+="&include_group_calendars=true"),w.getJSON(t).done(function(e){l(e,(R.get(a)||"").split(":"),"calendarid","calendarname","calendar_filter_id_",p.find(".fsCalendarFilterDialogCalendars"),"Display Calendar Events")})):p.find(".fsCalendarFilterDialogCalendars").html(""),h.length?w.getJSON("/cf_endpoints/routes.cfm/athletics/teams.json?team_ids="+h).done(function(e){l(e,(R.get(u)||"").split(":"),"id","name","team_filter_id_",p.find(".fsCalendarFilterDialogTeams"),"Display Athletic Events by Team")}):p.find(".fsCalendarFilterDialogTeams").html(""))}).on("click",$,f).on("click",".fsCalendarPrevMonth, .fsCalendarNextMonth",r),a(e)}function p(e,t){var i,s;i=t?z.getDateDivFromMoment(e,t):n(e),t=z.getMomentFromDateDiv(i),s=i.parent().find(".fsCalendarInfo"),e.find(".fsCalendarRow").removeClass(I),e.find(".fsCalendarEventGrid").addClass(I),h(e,i.data(D),i.data(L),i.data(N)),e.find(S).html(s.length?s.clone():"<em>no events to show</em>").removeClass(I),v(e,t),q.triggerDisplayChanged(U.getElementID(e),"Day",t)}function f(){z.monthPickerClickHandler(U.getElement(w(this)),r)}function m(e){var t=e.find('.fsCalendarDaybox:not(.fsCalendarOutOfRange) .fsCalendarDate[data-day="1"]');e.find(".fsCalendarEventGrid, .fsCalendarRow").removeClass(I),h(e,t.data(D),t.data(L),t.data(N)),e.find(S).addClass(I),b(e),q.triggerDisplayChanged(U.getElementID(e),"Month")}function g(e,t){var i,s,o;o=t?z.getDateDivFromMoment(e,t):n(e),s=o.parents(".fsCalendarRow"),e.find(".fsCalendarEventGrid").removeClass(I),s.removeClass(I).siblings(".fsCalendarRow").addClass(I),i=s.find(C+":first"),h(e,i.data(D),i.data(L),i.data(N)),e.find(S).addClass(I),y(e),q.triggerDisplayChanged(U.getElementID(e),"Week",z.getMomentFromDateDiv(i))}function v(t,i){var n="md"==e.currentPage.dateFormat?"MMMM D, YYYY":"D MMMM, YYYY";t.find(A).html(i.format(n)),d(t,i)}function b(e){var t=e.find('.fsCalendarDaybox:not(.fsCalendarOutOfRange) .fsCalendarDate[data-day="1"]'),i=e.find(A);i.html(z.getMomentFromDateDiv(t).format("MMMM YYYY"))}function y(t){var i=t.find(".fsCalendarRow:not(."+I+")"),n=i.find(C+":first"),s=i.find(C+":last"),o=t.find(A),r="dm"==e.currentPage.dateFormat?"D MMMM":"MMMM D",a=z.getMomentFromDateDiv(n);o.html(a.format(r)+" - "+z.getMomentFromDateDiv(s).format(r)),d(t,a)}var w=e.$,_=e._,k=e.getInternalNS("elements.constants.classes"),x=e.getInternalNS("elements.constants.selectors"),C=".fsCalendarDate",S=".fsCalendarDayView",T=".fsCalendarToday > .fsCalendarDate",D="day",P=x.elementContent,E="Calendar",M=".fsCalendarGridBrowser",A=".fsCalendarGridBrowser > span",I=k.stateHidden,j="YYYY-MM-DD",L="month",O="fsCalendarGridShowMonthPickerButton",$="."+O,N="year",F=w(document.body),H=e.moment,z=e.getInternalNS("elements.calendar.utils"),R=e.cookies,B={},W=e.events,q=e.getInternalNS("elements.linkedEvents"),U=e.getInternalNS("elements.utils");W.onElementAdded(E,u),W.onElementUpdated(E,u),W.onElementShown(W.ALL_CONTAINERS_TYPE,a),w(".fs"+E).each(function(){var e=w(this);B[U.getElementID(e)]={filters:{}},u(e)}),F.on("click",".fsCalendarEventLink[href=#]",function(){var e=w(this),t=U.getElement(e),i=e.data("occur-id");if(e.data("ath-id"))U.openAthleticEventPopup(i);else if(t.data("linked-element-ids"))U.populateLinkedElements(t,{occur_id:i}),U.updateURLParams({virtualParam:"/~occur_id/"+i});else{var n=U.showElementPopupDialog(t,"Calendar",{occur_id:i,show_event:!0},{title:"Calendar Event"});n.on("click",".fsAlertIcon",function(e){e.preventDefault(),U.openCalendarAlertPopup("calendar",w(this).data("eventid"))})}return!1})}(FS,window),function(e){"use strict";var t=e.getInternalNS("elements.element_tools.utils"),i=e.getInternalNS("elements.linkedEvents"),n=e.getInternalNS("elements.utils");t.setupSearch=function(t){var s,o,r=t.find(".fsElementToolsDateRange"),a=t.find(".fsElementToolsKeyword > input"),l=r.length>0,c=a.length>0;if(l){var d=r.find(".fsElementToolsDateRangeStart"),h=r.find(".fsElementToolsDateRangeEnd");o=e.rome(d[0],{dateValidator:e.rome.val.beforeEq(h[0]),time:!1}),s=e.rome(h[0],{dateValidator:e.rome.val.afterEq(d[0]),time:!1})}c&&t.on("click",".fsButtonClear",function(){a.val("")}),t.on("click",".fsElementToolsSearchButton",function(){var e={};l&&(e.rangeStart=o.getMoment(),e.rangeEnd=s.getMoment()),c&&(e.keywords=a.val()),i.triggerFilter(n.getElementID(t),e)})}}(FS),function(e){"use strict";function t(e){var t=a(e.target),n=m.getElement(t),s=m.getElementID(n),o={cal_date:t.val()};m.loadingOverlay(n.find(v)),m.fetchElementHTML(s,o).done(i)}function i(e){var t=m.getElementID(e),i=x[t]||{};if(e.find(".fsCalendarDaybox").removeClass(g),l.has(i,"displayMode")&&l.has(i,"momentObject")&&"Month"!=i.displayMode){var n=c.getDateDivFromMoment(e,i.momentObject).parent();n.addClass(g),"Week"==i.displayMode&&n.siblings(".fsCalendarDaybox").addClass(g)}}function n(e){e.hasClass("fsLegend")?s(e):e.hasClass("fsSearch")?h.setupSearch(e):e.hasClass("fsMiniGrid")&&o(e)}function s(e){1==e.find(k).length&&(e.on("click",".fsUpdateFilters",function(){var t=e.find(k+" input:checked");p.triggerFilter(m.getElementID(e),{calendarIDsToHide:e.find(w+_).map(function(){return this.value}).get()}),"selected"==t.val()&&t.trigger("change")}).on("change",k+" input",function(){var t=e.find(".fsCalendarGroups > li");"all"==a(this).val()?e.find("li").removeClass(y):(e.find(".fsToolsList > li").each(function(){var e=a(this);e.toggleClass(y,e.find(w).is(_))}),t.each(function(){var e=a(this);e.toggleClass(y,0==e.find(w+":checked").length)})),t.each(function(){a(this).find(f.selectAll).trigger("updateLabel")})}),m.setupSelectAllButtons(e,".fsCalendarGroups > li"))}function o(e){var n=m.getElementID(e),s=e.data("linked-element-ids");e.on("click",".fsCalendarDaybox",function(){var t=a(this),i=c.getMomentFromDateDiv(t.find(".fsCalendarDate"));p.triggerFilter(m.getElementID(e),{date:i}),t.hasClass("fsCalendarOutOfRange")&&(m.loadingOverlay(e.find(v)),m.fetchElementHTML(m.getElementID(e),{cal_date:i.format("YYYY-MM-DD")}))}),e.on("click",".fsCalendarGridShowMonthPickerButton",r).on("click",".fsCalendarPrevMonth, .fsCalendarNextMonth",t),s&&(p.onUpdated(n,s,function(t,s,o){o!=n&&(m.loadingOverlay(e.find(v)),m.fetchElementHTML(n,l.omit(s,["end_date","start_date"])).done(i))}),p.onDisplayChanged(n,s,function(t,s,o){x[n]={displayMode:s,momentObject:o},i(e)}))}function r(){c.monthPickerClickHandler(m.getElement(a(this)),t)}var a=e.$,l=e._,c=e.getInternalNS("elements.calendar.utils"),d=e.getInternalNS("elements.constants.classes"),h=e.getInternalNS("elements.element_tools.utils"),u=e.getNS("events"),p=e.getInternalNS("elements.linkedEvents"),f=e.getInternalNS("elements.constants.selectors"),m=e.getInternalNS("elements.utils"),g=d.stateActive,v=f.elementContent,b="CalendarTools",y=d.stateHidden,w=".fsCalendarFilterInput",_=":not(:checked)",k=".fsElementControls",x={};u.onElementAdded(b,n),u.onElementUpdated(b,n),a(".fs"+b).each(function(){n(a(this))})}(FS),function(e){"use strict";var t=e.$,i=t(document.body),n=e.getInternalNS("elements.utils");i.on("click",".fsConstituentProfileLink[href=#]",function(){var e=t(this),i=n.getElement(e),s=e.data("constituent-id");return i.data("linked-element-ids")?(n.populateLinkedElements(i,{const_id:s}),n.updateURLParams({virtualParam:"/~const-id/"+s})):n.showElementPopupDialog(i,"Constituent",{const_id:s,show_profile:!0},{title:"Constituent Profile"}),!1})}(FS),function(e){"use strict";function t(e){var t=u(e);t.bubbles.forEach(function(e){e.setMap(null)}),t.markers.forEach(function(e){e.setMap(null)}),t.markers=[],t.bubbles=[]}function i(e){var t=u(e);t.startInfoBubble.close(),t.bubbles.forEach(function(e){e.close()})}function n(e,t){var n=new InfoBubble(M),s="",o=e.data("link-email"),r=e.data("link-profile"),a=u(e),l=e.data("profile-url"),c=new google.maps.Marker({icon:"https://maps.google.com/mapfiles/ms/icons/green-dot.png",map:a.map,position:{lat:t.latitude,lng:t.longitude}});t.people.forEach(function(e){s+="<div>",r&&e.is_parent&&(s+='<a href="'+l+"/~const-id/"+e.person_id+'" target="_blank">'),s+=e.first_name+" "+e.last_name,r&&e.is_parent?(s+="</a>",o&&e.email&&(s+=' <a href="mailto:'+e.email+'"><span class="fsEmailIcon"></span></a>')):e.current_grade.length&&(s+=", Grade "+e.current_grade),s+="</div>"}),s+='<div class="'+k+'">'+t.address+"</div>",n.setContent(s),a.markers.push(c),a.bubbles.push(n),google.maps.event.addListener(c,"click",function(){i(e),n.open(a.map,c)})}function s(e,s,o){var r,l=u(e),c=l.errorInfoBubble,d=l.map,p=l.startMarker,f=l.startInfoBubble,m='<div>Find families within <a href="#" data-radius=".25">0.25 miles</a>, <a href="#" data-radius=".5">0.50 miles</a>, <a href="#" data-radius="1">1 mile</a>, <a href="#" data-radius="5">5 miles</a>, <a href="#" data-radius="10">10 miles</a>, or <a href="#" data-radius="20">20 miles</a> of</div><div class="'+k+'">'+o+"</div>",g=D("<div>",{html:m});p.setMap(d),p.setPosition(s),f.setContent(g[0]),google.maps.event.addListener(p,"click",function(){i(e),f.open(d,p)}),g.on("click","a",function(){var i=D(this).data("radius"),o=h(i);return d.setZoom(o),d.setCenter(s),f.close(),a(e,s,i).done(function(i){t(e),i.length?i.forEach(function(t){n(e,t)}):(r=D("<div>",{html:'<p>There are no households to display in the specified area.</p><p><a href="#">Try again</a></p>'}),r.on("click","a",function(){return c.close(),f.open(d,p),!1}),c.setContent(r[0]),c.open(d,p))}).fail(function(){alert("Sorry, there was a problem retrieving the households for the specified bounds. Please try again."),l.startInfoBubble.open()}),!1}),google.maps.event.addListenerOnce(d,"idle",function(){f.open(d,p)}),d.setCenter(s),e.find(C).val(o)}function o(e){var t=e.data("location"),i=e.data("location-latitude"),n=e.data("location-longitude");s(e,{lat:i,lng:n},t)}function r(e){return D.ajax({data:{latlng:e.latitude+","+e.longitude},dataType:"json",method:"GET",url:w})}function a(e,t,i){var n=new google.maps.Circle({center:t,radius:1609.344*i});return D.ajax({dataType:"json",method:"GET",url:"/cf_endpoints/routes.cfm/constituents/household_geolocation.json",data:{bounds:n.getBounds().toUrlValue(),group_ids:e.data("group-ids"),search_by_role:"student"}})}function l(e){var t,i="",n=["address_1","address_2","address_3","city","state_short","zip_code","country_short"];return n.forEach(function(n){t=e[n],t.length&&(i.length&&(i+="zip_code"==n?" ":", "),i+=t)}),i}function c(e){return D.ajax({data:{address:e},dataType:"json",method:"GET",url:w})}function d(){return D.ajax({dataType:"json",method:"GET",url:"/cf_endpoints/routes.cfm/constituents/current/home_address.json"})}function h(e){return Math.round(14-Math.log(e)/Math.LN2)}function u(e){return E[e.attr("id")]}function p(e){var i=D(e.target).closest(y);navigator.geolocation&&(g(i,!0),navigator.geolocation.getCurrentPosition(function(n){r(n.coords).done(function(o){o.results&&o.results.length&&(t(i),s(D(e.target).closest(y),{lat:n.coords.latitude,lng:n.coords.longitude},o.results[0].formatted_address))}).always(function(){g(i,!1)})},function(e){g(i,!1),alert(e.message)},{timeout:1e4}))}function f(e){var i=D(e.target).closest(y),n=i.find(C).val();n.length?(g(i,!0),c(n).done(function(e){e.results&&e.results.length&&(t(i),s(i,e.results[0].geometry.location,n))}).always(function(){g(i,!1)})):alert("Please enter an address first")}function m(t){var i=t.find(S),n=t.data("map-start-radius"),r=1==t.data("map-start"),a={bubbles:[],errorInfoBubble:new InfoBubble(M),markers:[],startInfoBubble:new InfoBubble(M),startMarker:new google.maps.Marker,map:new google.maps.Map(i[0],{clickableIcons:!1,zoom:10})};E[t.attr("id")]=a,a.map.setZoom(h(n)),r?d().done(function(e){var i=l(e);i.length?e.location?s(t,e.location,i):c(i).done(function(e){e.results&&e.results.length&&s(t,e.results[0].geometry.location,e.results[0].formatted_address)}).fail(function(){o(t)}):o(t)}).fail(function(){o(t)}):o(t),navigator.geolocation&&t.find(v).removeClass(_),t.find(T).on("click",f),t.find(v).on("click",p),t.find(C).on("keyup",function(e){13==e.keyCode&&f(e)}),t.on("click",".fsEmbeddedMapHideAddress",function(){return e.util.popup("/cf_directory/cp.cfm","updateProfile",620,600),!1})}function g(e,t){e.find(x).toggleClass(_,!t)}var v=".fsEmbeddedMapCurrentLocationButton",b="ConstituentMap",y=".fsConstituentMap",w="https://maps.googleapis.com/maps/api/geocode/json",_=e.getInternalNS("elements.constants.classes").stateHidden,k="fsGoogleMapInfoBubbleAddress",x=".fsLoadingDotsOverlay",C=".fsEmbeddedMapLocationInput",S=".fsEmbeddedGoogleMap",T=".fsEmbeddedMapUpdateButton",D=e.$,P=e.events,E={},M={backgroundClassName:"fsGoogleMapInfoBubble",borderRadius:0,maxHeight:130,maxWidth:250,minHeight:130,minWidth:250};P.onElementAdded(b,m),P.onElementUpdated(b,m),P.onElementDialogShown(b,m),P.onGoogleMapsReady(function(){D(y).each(function(){m(D(this))})})}(FS),function(e){"use strict";function t(e){var t=e.find(s),i={lat:e.data("location-latitude"),lng:e.data("location-longitude")},n=new google.maps.Map(t[0],{center:i,zoom:10});new google.maps.Marker({map:n,position:i})}var i="EmbeddedMap",n=".fsEmbeddedMap",s=".fsEmbeddedGoogleMap",o=e.$,r=e.events;r.onElementAdded(i,t),r.onElementUpdated(i,t),r.onElementDialogShown(i,t),r.onGoogleMapsReady(function(){o(n).each(function(){t(o(this))})})}(FS),function(e,t){"use strict";function i(t){t.length&&(window.Juicer?Juicer.initialize():n||(n=!0,e('<script type="text/javascript" src="//assets.juicer.io/embed.js"/>').appendTo(document.body)))}var n=!1,s="Feeds";t.onElementUpdated(s,i),t.onElementAdded(s,i),i(e(".fs"+s))}(FS.$,FS.events),/*! iFrame Resizer (iframeSizer.min.js ) - v2.8.5 - 2015-03-25
 *  Desc: Force cross domain iframes to size to content.
 *  Requires: iframeResizer.contentWindow.min.js to be loaded into the target frame.
 *  Copyright: (c) 2015 David J. Bradshaw - dave@bradshaw.net
 *  License: MIT
 */
!function(){"use strict";function e(e,t,i){"addEventListener"in window?e.addEventListener(t,i,!1):"attachEvent"in window&&e.attachEvent("on"+t,i)}function t(){var e,t=["moz","webkit","o","ms"];for(e=0;e<t.length&&!S;e+=1)S=window[t[e]+"RequestAnimationFrame"];S||s(" RequestAnimationFrame not supported")}function i(){var e="Host page";return window.top!==window.self&&(e=window.parentIFrame?window.parentIFrame.getId():"Nested host page"),e}function n(e){return _+"["+i()+"]"+e}function s(e){b&&"object"==typeof window.console&&console.log(n(e))}function o(e){"object"==typeof window.console&&console.warn(n(e))}function r(e){function t(){function e(){d(I),l(),D[j].resizedCallback(I)}r("Height"),r("Width"),h(e,I,"resetPage")}function i(e){var t=e.id;s(" Removing iFrame: "+t),e.parentNode.removeChild(e),D[t].closedCallback(t),s(" --")}function n(){var e=A.substr(k).split(":");return{iframe:document.getElementById(e[0]),id:e[0],height:e[1],width:e[2],type:e[3]}}function r(e){var t=Number(D[j]["max"+e]),i=Number(D[j]["min"+e]),n=e.toLowerCase(),o=Number(I[n]);if(i>t)throw new Error("Value for min"+e+" can not be greater than max"+e);s(" Checking "+n+" is in range "+i+"-"+t),i>o&&(o=i,s(" Set "+n+" to min value")),o>t&&(o=t,s(" Set "+n+" to max value")),I[n]=""+o}function u(){var t=e.origin,i=I.iframe.src.split("/").slice(0,3).join("/");if(D[j].checkOrigin&&(s(" Checking connection is from: "+i),""+t!="null"&&t!==i))throw new Error("Unexpected message received from: "+t+" for "+I.iframe.id+". Message was: "+e.data+". This error can be disabled by adding the checkOrigin: false option.");return!0}function p(){return _===(""+A).substr(0,k)}function f(){var e=I.type in{"true":1,"false":1};return e&&s(" Ignoring init message from meta parent page"),e}function m(e){return A.substr(A.indexOf(":")+w+e)}function g(e){s(" MessageCallback passed: {iframe: "+I.iframe.id+", message: "+e+"}"),D[j].messageCallback({iframe:I.iframe,message:JSON.parse(e)}),s(" --")}function y(){if(null===I.iframe)throw new Error("iFrame ("+I.id+") does not exist on "+x);return!0}function S(e){var t=e.getBoundingClientRect();return a(),{x:parseInt(t.left,10)+parseInt(C.x,10),y:parseInt(t.top,10)+parseInt(C.y,10)}}function T(e){function t(){C=r,P(),s(" --")}function i(){return{x:Number(I.width)+n.x,y:Number(I.height)+n.y}}var n=e?S(I.iframe):{x:0,y:0},r=i();s(" Reposition requested from iFrame (offset x:"+n.x+" y:"+n.y+")"),window.top!==window.self?window.parentIFrame?e?parentIFrame.scrollToOffset(r.x,r.y):parentIFrame.scrollTo(I.width,I.height):o(" Unable to scroll to requested position, window.parentIFrame not found"):t()}function P(){!1!==D[j].scrollCallback(C)&&l()}function E(e){function t(e){var t=S(e);s(" Moving to in page link (#"+i+") at x: "+t.x+" y: "+t.y),C={x:t.x,y:t.y},P(),s(" --")}var i=e.split("#")[1]||"",n=decodeURIComponent(i),o=document.getElementById(n)||document.getElementsByName(n)[0];window.top!==window.self?window.parentIFrame?parentIFrame.moveToAnchor(i):s(" In page link #"+i+" not found and window.parentIFrame not found"):o?t(o):s(" In page link #"+i+" not found")}function M(){switch(I.type){case"close":i(I.iframe),D[j].resizedCallback(I);break;case"message":g(m(6));break;case"scrollTo":T(!1);break;case"scrollToOffset":T(!0);break;case"inPageLink":E(m(9));break;case"reset":c(I);break;case"init":t(),D[j].initCallback(I.iframe);break;default:t()}}var A=e.data,I={},j=null;p()&&(I=n(),j=I.id,b=D[j].log,s(" Received: "+A),!f()&&y()&&u()&&(M(),v=!1))}function a(){null===C&&(C={x:void 0!==window.pageXOffset?window.pageXOffset:document.documentElement.scrollLeft,y:void 0!==window.pageYOffset?window.pageYOffset:document.documentElement.scrollTop},s(" Get page position: "+C.x+","+C.y))}function l(){null!==C&&(window.scrollTo(C.x,C.y),s(" Set page position: "+C.x+","+C.y),C=null)}function c(e){function t(){d(e),u("reset","reset",e.iframe)}s(" Size reset requested by "+("init"===e.type?"host page":"iFrame")),a(),h(t,e,"init")}function d(e){function t(t){e.iframe.style[t]=e[t]+"px",s(" IFrame ("+i+") "+t+" set to "+e[t]+"px")}var i=e.iframe.id;D[i].sizeHeight&&t("height"),D[i].sizeWidth&&t("width")}function h(e,t,i){i!==t.type&&S?(s(" Requesting animation frame"),S(e)):e()}function u(e,t,i){s("["+e+"] Sending msg to iframe ("+t+")"),i.contentWindow.postMessage(_+t,"*")}function p(t){function i(){function e(e){1/0!==D[f][e]&&0!==D[f][e]&&(p.style[e]=D[f][e]+"px",s(" Set "+e+" = "+D[f][e]+"px"))}e("maxHeight"),e("minHeight"),e("maxWidth"),e("minWidth")}function n(e){return""===e&&(p.id=e="iFrameResizer"+g++,b=(t||{}).log,s(" Added missing iframe ID: "+e+" ("+p.src+")")),e}function o(){s(" IFrame scrolling "+(D[f].scrolling?"enabled":"disabled")+" for "+f),p.style.overflow=!1===D[f].scrolling?"hidden":"auto",p.scrolling=!1===D[f].scrolling?"no":"yes"}function r(){("number"==typeof D[f].bodyMargin||"0"===D[f].bodyMargin)&&(D[f].bodyMarginV1=D[f].bodyMargin,D[f].bodyMargin=""+D[f].bodyMargin+"px")}function a(){return f+":"+D[f].bodyMarginV1+":"+D[f].sizeWidth+":"+D[f].log+":"+D[f].interval+":"+D[f].enablePublicMethods+":"+D[f].autoResize+":"+D[f].bodyMargin+":"+D[f].heightCalculationMethod+":"+D[f].bodyBackground+":"+D[f].bodyPadding+":"+D[f].tolerance+":"+D[f].enableInPageLinks}function l(t){e(p,"load",function(){var e=v;u("iFrame.onload",t,p),!e&&D[f].heightCalculationMethod in T&&c({iframe:p,height:0,width:0,type:"init"})}),u("init",t,p)}function d(e){if("object"!=typeof e)throw new TypeError("Options is not an object.")}function h(e){e=e||{},D[f]={},d(e);for(var t in P)P.hasOwnProperty(t)&&(D[f][t]=e.hasOwnProperty(t)?e[t]:P[t]);b=D[f].log}var p=this,f=n(p.id);h(t),o(),i(),r(),l(a())}function f(){function e(e,t){if(!e.tagName)throw new TypeError("Object is not a valid DOM element");if("IFRAME"!==e.tagName.toUpperCase())throw new TypeError("Expected <IFRAME> tag, found <"+e.tagName+">.");p.call(e,t)}return function(t,i){switch(typeof i){case"undefined":case"string":Array.prototype.forEach.call(document.querySelectorAll(i||"iframe"),function(i){e(i,t)});break;case"object":e(i,t);break;default:throw new TypeError("Unexpected data type ("+typeof i+").")}}}function m(e){e.fn.iFrameResize=function(e){return this.filter("iframe").each(function(t,i){p.call(i,e)}).end()}}var g=0,v=!0,b=!1,y="message",w=y.length,_="[iFrameSizer]",k=_.length,x="",C=null,S=window.requestAnimationFrame,T={max:1,scroll:1,bodyScroll:1,documentElementScroll:1},D={},P={autoResize:!0,bodyBackground:null,bodyMargin:null,bodyMarginV1:8,bodyPadding:null,checkOrigin:!0,enableInPageLinks:!1,enablePublicMethods:!1,heightCalculationMethod:"offset",interval:32,log:!1,maxHeight:1/0,maxWidth:1/0,minHeight:0,minWidth:0,scrolling:!1,sizeHeight:!0,sizeWidth:!1,tolerance:0,closedCallback:function(){},initCallback:function(){},messageCallback:function(){},resizedCallback:function(){},scrollCallback:function(){return!0}};t(),e(window,"message",r),window.jQuery&&m(jQuery),"function"==typeof define&&define.amd?define([],f):"object"==typeof module&&"object"==typeof module.exports?module.exports=f():window.iFrameResize=f()}(),function(e,t){"use strict";function i(e){e.find("iframe").iFrameResize({checkOrigin:!1})}var n="Form";t.onElementAdded(n,i),t.onElementUpdated(n,i),i(e(".fs"+n))}(FS.$,FS.events),function(e,t,i,n,s){"use strict";function o(){function e(e){return i[e]||(i[e]=[null])}function t(e,t){var i=!1;return e&&t&&(i=!0,q.each(e,function(n){return t[n]==s||e[n]!=t[n]?(i=!1,!1):void 0})),i}var i={};this.addState=function(t,i){e(t).push(i)},this.getBackLinkState=function(i){for(var n=e(i),s=this.getCurrentState(i),o=0;o<n.length;o++)if(t(n[o],s))return o>0?n[o-1]:null;return null},this.getCurrentState=function(t){var i=e(t);return i.length>1?i[i.length-1]:null},this.didChangeState=function(e){return!t(Vt.getCurrentHistoryState()[e],this.getCurrentState(e))},this.isStatesEmpty=function(){return q.isEmptyObject(i)}}function r(e){var t=q(e).find(ct),i=t.find(Lt),n=t.find(Le).length>0,s=h(e),o=t.find(K).length>0,r=t.width(),a=Ve>r,l=n||s.mediaType==We||s.mediaType==Ue&&Ye>r,c=n&&Ke+(o?30:0)>r||!n&&(s.mediaType==We&&Ge>r||s.mediaType==Ue&&Xe>r),d=n&&!o||Qe>r;i.toggleClass(Ne,c).css("left",n&&o?130:""),t.find(yt).toggleClass(Ne,l),t.find(He+","+Ze+","+mt).toggleClass(Ne,a),t.find(Bt).toggleClass(Ne,d).css("left",a?40:"")}function a(e){var t=q(e),i=t.find(Q);return f()?Y.height():m(t)?F.find(fe).height():Math.round(i.width()*parseFloat(i.data("aspectratio")))}function l(e,n,s,o){var r,a,l,h,v,b,w,_=0,T=q(e),D=[],P=T.find(Q)[0],O=0,H=q(P),z=H.data("autoplay"),R=H.data("loop"),U=H.data("randomstart");if(!H.data("setup-started"))return H.data("setup-started",!0),l=H.data("videoresolution"),h=parseInt(H.data("playercontrols")),b=parseInt(H.data("playlistid")),w=parseInt(H.data("posterscaling")),x(T),isNaN(b)||0>=b?void M(H):void q.ajax("/cf_endpoints/routes.cfm/media/groups/"+b+"/objects.json",{error:function(e){404==e.status?M(H):t.alert("An error occurred while attempting to retrieve the media data.")},success:function(t){var b,M,V={},Y="";for(_=0;_<ti.length;_++)if("function"==typeof P[ti[_]]){ei=ti[_];break}for(_=0;_<Zt.length;_++)if("function"==typeof document[Zt[_]]){Jt=Zt[_];break}switch(H.find("noscript").remove(),a=q(ii.replace("#{timestamp}",(new Date).getTime())),r=a.find(Ht),a.find(st).toggleClass(Ne,h!=lt),a.find(ee).toggleClass(Ne,h!=rt),a.find(se).toggleClass(Ne,h==at),H.append(a),v=a.attr("id"),t.group_type){case We:H.addClass("fsMediaPlaylistAudio");break;case qe:H.addClass("fsMediaPlaylistImage");break;case Ue:H.addClass("fsMediaPlaylistVideo")}if(Gt||(a.find(it).attr("aria-label","Play"),a.find(mt).attr("aria-label","Previous"),a.find(Ze).attr("aria-label","Next"),a.find(Bt).attr("aria-label","Mute"),a.find(yt).attr("aria-label","Quality"),a.find(He).attr("aria-label","Description"),a.find(je).attr("aria-label","Enter Fullscreen")),(o||!c()&&m(a))&&a.find(je).addClass(xe).removeAttr("aria-label"),t.group_type==qe){for(_=0;_<t.objects.length;_++)V={description:t.objects[_].object_description,image:t.objects[_].display_path,objectID:t.objects[_].object_id,thumb:t.objects[_].thumbnail_path,title:t.objects[_].object_title},D.push(V);if(U&&D.length&&(O=Math.floor(Math.random()*D.length)),!isNaN(parseInt(n)))for(_=0;_<D.length;_++)if(D[_].objectID==n){O=_;break}if(i.run(r[0],{autoplay:z,dataSource:D,show:O,showCounter:!1,showImagenav:!1,showInfo:!1,thumbnails:!1,transition:"fade",transitionSpeed:600,extend:function(){var e=!1;this.bind("pause",function(){a.find(K).jPlayer("pause")}),this.bind("play",function(){a.find(K).jPlayer("play")}),this.bind("image",function(t){0==t.index&&e&&!R&&(this.pause(),E(T),a.find(K).jPlayer("pause",0),a.find(it).removeClass(et),e=!1),t.index==D.length-1&&(e=!0),m(r)||(r.find($e+" "+Oe+" img").css("cursor","pointer"),q(t.imageTarget).click(this.proxy(function(e){e.stopPropagation(),f()||this.openLightbox()}))),L("mediaPlayerImageDisplayed",t.galleriaData.title,q(t.imageTarget).attr("src"))}),this.bind("loadstart",function(e){var t=e.galleriaData,i=t.description&&t.description.length>0?t.description:"No description available",n=t.title&&t.title.length>0?t.title:"&nbsp;";a.find(Lt).text(e.index+1+" / "+D.length),a.find($t).html(n),a.find(ce).html(i),m(a)&&(F.find(we).html(n),F.find(ve).html(i))}),this.bind("lightbox_image",function(e){h!=at&&this.pause(),a.find(it).removeClass(et),Gt||a.find(it).attr("aria-label","Play"),L("mediaPlayerLightboxImageDisplayed",q(".galleria-lightbox-title").text(),q(e.imageTarget).attr("src"))})}}),r.find($e).css("bottom",0).css("left",0).css("right",0).css("top",0),t.song_path){M=t.song_path.split("."),Y=M[M.length-1].split("?")[0];var X,Q={loop:!0,preload:h==rt?"metadata":"none",solution:"html,flash",supplied:Y,swfPath:"/assets/jplayer",volume:1,ready:function(){var e=q(this),i={};"m4a"==Y?i.m4a=t.song_path:i.mp3=t.song_path,e.jPlayer("setMedia",i),z&&e.jPlayer("play")}};X=q("<div>",{"class":G}),r.prepend(X),X.jPlayer(Q)}else a.find(Bt).addClass(Ne);z&&(a.find(st).addClass(Ne),a.find(it).addClass(et),Gt||a.find(it).attr("aria-label","Pause"),h!=at&&a.find(ie).removeClass(Ne),u(T,!0))}else if(t.group_type==We||t.group_type==Ue){var J=[];if(w==ht&&t.objects.length){var Z=t.objects.length>O?O:0;$(e,t.group_type==We?t.objects[Z].thumbnail_path:t.objects[Z].display_path)}else p(e);for(_=0;_<t.objects.length;_++)V={desc:t.objects[_].object_description,displayPath:t.objects[_].display_path,objectID:t.objects[_].object_id,title:t.objects[_].object_title,video1080:"",video360:"",video480:"",video720:""},t.group_type==We?(M=t.objects[_].song_path.split("."),b=M[M.length-1].split("?")[0],"m4a"==b?(-1==Y.indexOf("m4a")&&(Y.length&&(Y+=","),Y+="m4a"),V.m4a=t.objects[_].song_path):(-1==Y.indexOf("mp3")&&(Y.length&&(Y+=","),Y+="mp3"),V.mp3=t.objects[_].song_path),w==ut&&(V.poster=t.objects[_].thumbnail_path)):(M=t.objects[_].normal_video_path.split("."),b=M[M.length-1].split("?")[0],w==ut&&(V.poster=t.objects[_].display_path),t.objects[_].mobile_video_path&&t.objects[_].mobile_video_path.length&&(V.video360=t.objects[_].mobile_video_path),t.objects[_].normal_video_path&&t.objects[_].normal_video_path.length&&(V.video480=t.objects[_].normal_video_path),t.objects[_].hd_video_path&&t.objects[_].hd_video_path.length&&(V.video720=t.objects[_].hd_video_path),t.objects[_].fullhd_video_path&&t.objects[_].fullhd_video_path.length&&(V.video1080=t.objects[_].fullhd_video_path),"flv"==b?-1==Y.indexOf("flv")&&(Y.length&&(Y+=","),Y+="flv"):-1==Y.indexOf("m4v")&&(Y.length&&(Y+=","),Y+="m4v")),J.push(V);if(U&&J.length&&(O=Math.floor(Math.random()*J.length)),!isNaN(parseInt(n)))for(_=0;_<J.length;_++)if(J[_].objectID==n){O=_;break}Xt[v]={index:O,mediaType:t.group_type,playing:!1,playlist:J,quality:l||localStorage.getItem(ze)||"1080p"},r.jPlayer({preload:h==rt?"metadata":"none",solution:"html,flash",supplied:Y,swfPath:"/assets/jplayer",volume:1,size:{height:"100%",width:"100%"},ended:function(){y(T);var e=Xt[v].index;e>0||R?r.jPlayer("play"):(w==ht&&H.find(pt).removeClass(Ne),E(T))},error:function(e){e.jPlayer.error.type==q.jPlayer.error.NO_SOLUTION&&(a.addClass(Ne),H.append('<div class="fsMediaSetupError"><h3>Media Error</h3><p>No solution was found for playing this media. You will need to upgrade your browser to one that is compatible with HTML 5 media and supports H.264 video and MP3 audio or you will need to <a href="http://get.adobe.com/flashplayer/" target="_blank">install the latest version of Adobe Flash player </a>.</p></div>'))},loadedmetadata:function(e){N(T,e)},pause:function(e){var i,n=e.jPlayer.status;Xt[v].playing=!1,e.jPlayer.status.ended&&Xt[v].index!=Xt[v].playlist.length-1||(a.find(it).removeClass(et),Gt||a.find(it).attr("aria-label","Play"),e.jPlayer.status.ended||(i=t.group_type==Ue?"mediaPlayerVideoPaused":"mediaPlayerAudioPaused",L(i,n.media.title,n.src,{currentTime:n.currentTime})))},play:function(i){var n,s=i.jPlayer.status;Xt[v].playing=!0,a.find(it).addClass(et),t.group_type==Ue?(p(e),n="mediaPlayerVideoPlayed"):n="mediaPlayerAudioPlayed",L(n,s.media.title,s.src,{currentTime:s.currentTime})},progress:function(e){var t,i,n=0;e.jPlayer.html.active?(i=r.find("audio, video")[0].buffered,t=i.length>0?i.end(i.length-1):0,n=Math.round(t/e.jPlayer.status.duration*100)):n=Math.round(e.jPlayer.status.seekPercent),a.find(vt).css("width",n+"%")},ready:function(){Xt[v].index=O,g(T),z?(r.jPlayer("play",s),u(T,!0),a.find(st).addClass(Ne),h!=at&&a.find(ie).removeClass(Ne)):r.jPlayer("pause",s)},timeupdate:function(e){N(T,e)}})}a.on("click",it,function(e){e.stopPropagation(),j(T)}),a.on("click",st,function(){j(T),q(this).addClass(Ne),a.find(ee).removeClass(Ne)}),a.on("click",ie+","+Ht,function(){h!=at&&(Kt++,1==Kt?B=setTimeout(function(){j(T),Kt=0},250):(Kt=0,clearTimeout(B),a.find(je).hasClass(xe)||I(T)))}),a.on("click",mt,function(e){e.stopPropagation(),k(T)}),a.on("click",Ze,function(e){e.stopPropagation(),y(T)}),a.on("click",_t+" div",function(e){e.stopPropagation(),C(T,q(this).data("resolution"))}),a.on("click",le+","+He,function(e){e.stopPropagation(),A(T)}),a.on("click",Bt,function(e){var t=q(this);e.stopPropagation(),t.hasClass(Wt)?(t.removeClass(Wt),Gt||t.attr("aria-label","Mute"),S(T,1)):(t.addClass(Wt),Gt||t.attr("aria-label","Unmute"),S(T,0))}),a.on("click mousemove",function(){clearTimeout(W),E(T),W=setTimeout(function(){u(T)},3e3)}),a.on("mouseleave",function(){u(T)}),a.on("click",yt,function(e){var t=a.find(ie),i=a.find(_t);e.stopPropagation(),t.addClass(Ne),i.removeClass(Ne),i.height(.5625*i.width())}),a.on("click",Mt,function(e){var t=q(this),i=e.pageX-t.offset().left,n=i/t.width()*100;e.stopPropagation(),r.jPlayer("playHead",n)}),a.on("mouseleave",Mt,function(){var e=q(this);e.removeAttr("aria-label"),e.find(Ct+","+Tt).width(0),a.find(Pt).css("opacity",0)}),a.on("mousemove",Mt,function(e){var t,i,n=q(this),s=n.find(Ct),o=n.find(Tt),l=n.find(It),c=r.data("jPlayer").status.duration,h={left:0,opacity:90,width:80},u=e.pageX-n.offset().left;if(u>=l.width()?(s.width(0),o.width(u)):(s.width(u),o.width(0)),c>0){switch(t=a.find(Pt),i=d(Math.round(c*(u/n.width()))),i.length){case 4:h.width=50;break;case 5:h.width=60;break;case 7:h.width=70}h.left=u-h.width/2+parseInt(t.css("padding-left")),t.css(h).html(i)}}),a.on("click",je,function(e){e.stopPropagation(),q(this).hasClass(xe)||I(T)}),x(T,!0)}})}function c(){return ei.length}function d(e){var t,i,n,s="";return t=e>3600?e%3600:0,i=parseInt(e/60)-(t>0?60*t:0),n=e-(t>0?60*t:0)-60*i,t>0&&(s+=t+":"+(10>i?"0":"")),s+=i+":"+(10>n?"0":"")+n}function h(e){return Xt[q(e).find(ct).attr("id")]}function u(e,t){var i,n,s,o=q(e).find(ct),r=!0;o.find(Le).length?(n=o.find(Ht),r=n.data("galleria")._playing):(s=h(e),r=s?s.playing:!1),(t||r)&&(i=o.find(ie),o.addClass(Nt),"opacity"in document.body.style?i.css("opacity",0):i.addClass(Ne))}function p(e){q(e).find(pt).addClass(Ne)}function f(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement}function m(e){return e.closest(F).length>0}function g(e,t){var i=q(e),n=i.find(Ht),s=i.find(ct),o=i.find(_t),r=i.find(yt),a=s.attr("id"),l=Xt[a].playlist,c=Xt[a].index,d=Xt[a].quality,h=l[c].video360.split("."),u=h[h.length-1].split("?")[0],p="1080p,720p,480p,360p",f=parseInt(d),m=Xt[a].playing,g="";if(o.empty().removeClass("fsMediaResolutionFullHD fsMediaResolutionHD fsMediaResolutionStandard"),l[c].video1080.length?o.addClass("fsMediaResolutionFullHD"):l[c].video720.length?o.addClass("fsMediaResolutionHD"):o.addClass("fsMediaResolutionStandard"),g+=l[c].video1080.length>0?'<div data-resolution="1080p"></div>':"",g+=l[c].video720.length>0?'<div data-resolution="720p"></div>':"",g+='<div data-resolution="480p"></div>',g+='<div data-resolution="360p"></div>',g+='<div class="fsMediaResolutionClose">X</div>',o.append(g),"flv"==u)l[c].flv=l[c].video360;else if("mp4"==u)for(var v=0;4>v;v++){var b=p.split(",")[v],y=parseInt(b);if(l[c]["video"+y]&&f>=y){d=b,l[c].m4v=l[c]["video"+y];break}}r.html(d),n.jPlayer("setMedia",l[c]),n.find("video, object").removeAttr("title"),m?n.jPlayer("play",t):n.jPlayer("pause",t),O(i)}function v(e,i){var n=q(e),s=n.closest(De),o=s.children(Se),r=s.attr("id").split("_").pop(),a={element_id:r,media_category_id:"",media_channel_id:"",media_group_id:""},l="",c=q.extend({},a);n.hasClass("fsMediaFolderLink")?(c[n.data("type")]=n.data("id"),Vt.updateQueryStringValueAndHistory(c),l=n.attr("href")):n.hasClass("fsMediaBackLink")?(l=n.attr("href"),n.data("id")&&(c[n.data("type")]=n.data("id")),Vt.updateQueryStringValueAndHistory(c)):l=i?"?"+q.param(i):t.location.search,Qt.addState(r,q.extend(a,Vt.getQueryStringValues(l))),_(o),q.ajax({cache:!1,url:"/fs/elements/"+r+l+(l?"&":"?")+"is_draft="+s.hasClass("fsStateEditable")}).done(function(e){o.html(q(e).find(Se).html());var t=o.find("a.fsMediaBackLink"),i=Qt.getBackLinkState(r);t.attr("href",i?"?"+q.param(i):""),i&&(i.media_channel_id?t.data("type","media_channel_id").data("id",i.media_channel_id):i.media_category_id&&t.data("type","media_category_id").data("id",i.media_category_id)),T(s)}).fail(function(){s.children(".fsLoadingDotsOverlay").remove(),t.alert("There was an error with the element. Please try again.")})}function b(e,i){var n,s,o,r,a=505;-1!=navigator.userAgent.indexOf("Chrome")&&-1!=navigator.userAgent.indexOf("Mac OS")&&(a=555),n=a+i/1,s="toolbar=no,location=no,directories=no,status=no,menubar=no,scrollbars=yes,resizable=yes,width=805,height="+n,-1!=e.indexOf("grp=")&&(e=e.replace("grp=","g=")),o="/cf_media/index.cfm?"+e,r=t.open(o,"popupmedia",s),!r||r.closed||"undefined"==typeof r.closed?t.alert("The media link popup didn't open! Check your popup blocker settings and try again."):r.focus()}function y(e){var t=q(e),i=t.find(ct),n=t.find(Ht);if(i.find(Le).length)n.data("galleria").pause().next(),i.find(it).removeClass(et);else{var s=i.attr("id"),o=Xt[s].mediaType,r=Xt[s].playing,a=Xt[s].playlist,l=parseInt(t.find(Q).data("posterscaling")),c=Xt[s].index;c<a.length-1?c++:c=0,l!=ht||o!=Ue||r||$(e,a[c].displayPath),Xt[s].index=c,g(t)}}function w(e,t,i,n,o,r,a,c,d){var h="";e&&(t==s&&(t=0),i==s&&(i=!1),r==s&&(r=!1),o||(o=""),F.removeClass(),d&&F.addClass(d),F.toggleClass(ke,a),a&&(h+='<div id="'+ye+'"></div>'),h+='<div id="'+pe+'"><div class="'+Pe+'"><div class="'+X+'" data-autoplay="'+i+'" data-aspectratio="0.5625" data-playercontrols="1" data-playlistid="'+e+'" data-posterscaling="1" data-videoresolution="'+o+'"></div></div></div>',F.toggleClass(_e,c),c&&(h+='<div id="'+ge+'"></div>'),H.html(h),R.showModal(),l(H,t,n,r))}function _(e){e.prepend('<div class="fsLoadingDotsOverlay" style="height:'+e.height()+'px"><div class="fsLoadingDots"></div></div>')}function k(e){var t=q(e),i=t.find(ct),n=t.find(Ht);if(i.find(Le).length)n.data("galleria").pause().prev(),i.find(it).removeClass(et);else{var s=i.attr("id"),o=Xt[s].mediaType,r=Xt[s].playing,a=Xt[s].playlist,l=parseInt(t.find(Q).data("posterscaling")),c=Xt[s].index;c>0?c--:c=a.length-1,l!=ht||o!=Ue||r||$(e,a[c].displayPath),Xt[s].index=c,g(t)}}function x(e,t){var i,n=q(e),s=n.find(ct);s.length&&(s.closest(Q).height(a(n)),t&&r(n),i=n.find(Ht),i.find(Le).length&&i.data("galleria").resize())}function C(e,t){var i=q(e),n=i.find(Ht),o=i.find(ct),r=o.find(ie);o.find(_t).addClass(Ne),r.removeClass(Ne),t!=s&&(Xt[o.attr("id")].quality=t,localStorage.setItem(ze,t),g(i,n.data("jPlayer").status.currentTime))}function S(e,t){var i=q(e),n=i.find(Ht);t>=0&&1>=t&&(Math.round(100*t)>=99&&(t=1),n.jPlayer("volume",t),n.find(K).jPlayer("volume",t))}function T(e){var t,i;e?(i=q(e),t=i.find(Be)):(t=q(Be),i=q(De)),t.each(function(){var e=q(this),t=e.data("mediatype"),i=e.data("playlistid");t!=qe&&e.on("click",".fsMediaGalleryObject[data-objectid]",function(t){var n=q(this),s=e.data("videoresolution"),o=e.data("dialog-show-description"),r=e.data("dialog-show-title");return w(i,n.data("objectid"),!0,0,s,Yt,r,o,"fsMediaGalleryDialog"),t.preventDefault(),!1})}),i.find(".fsMediaFolderLink, .fsMediaBackLink").on("click",function(e){return-1==q(this).attr("href").indexOf("history.back")?(v(this),e.preventDefault(),!1):void 0})}function D(){Qt.isStatesEmpty()&&Y.on("popstate",function(e){q(De).each(function(){if(e.originalEvent.state){var t=q(this),i=t.attr("id").split("_").pop(),n=e.originalEvent.state[i];Qt.didChangeState(i)&&v(t,n)}else v(this)})})}function P(e){q(Q+":visible",e).each(function(){var e=q(this);e.hasClass(oe)||e.closest(Ee).each(function(){l(this)})})}function E(e){var t=q(e).find(ct),i=t.find(ie);t.removeClass(Nt),"opacity"in document.body.style?i.css("opacity",.9):i.removeClass(Ne)}function M(e){q(e).append('<div class="fsAdminWarning">Select a media playlist</div>')}function A(e){var t,i,n=q(e),s=n.find(ie),o=n.find(he),r=n.find(Ht),a="",l="";o.is(":visible")?(s.removeClass(Ne),o.addClass(Ne)):(s.addClass(Ne),o.removeClass(Ne),t=r.data("galleria"),i=r.data("jPlayer"),t?(l=t.getData().title,a=q(t.getActiveImage()).attr("src")):i&&(l=i.status.media.title,a=i.status.src),L("mediaPlayerDescriptionDisplayed",l,a))}function I(e){var t,i,n,s,o,r=q(e),a=r.find(Ht),l=r.find(ct),d=r.find(Q)[0];f()?document[Jt]():c()?d[ei]():(a.find(Le).length?(t=a.data("galleria").getIndex(),s=a.data("galleria")._playing,o=a.data("galleria").getData(t).objectID):(t=Xt[l.attr("id")].index,i=Xt[l.attr("id")].quality,n=a.data("jPlayer").status.currentTime,s=Xt[l.attr("id")].playing,o=Xt[l.attr("id")].playlist[t].objectID),w(r.find(Q).data("playlistid"),o,s,n,i,!0))}function j(e){var t=q(e),i=t.find(Ht),n=t.find(it);if(n.hasClass(et))n.removeClass(et),Gt||n.attr("aria-label","Play"),n.closest(ct).find(Le).length?i.data("galleria").pause():i.jPlayer("pause");else{if(t.width()<300&&!m(t)&&!t.find(Le).length){var s=h(t);if(s.mediaType==Ue){var o=i.data("jPlayer").status.currentTime,r=s.quality,a=s.playlist[s.index].objectID,l=t.find(Q).data("playlistid");return void w(l,a,!0,o,r,Yt)}}n.addClass(et),Gt||n.attr("aria-label","Pause"),n.closest(ct).find(Le).length?i.data("galleria").play(5e3):i.jPlayer("play")}}function L(e,t,i,n){var s={event:e,mediaTitle:t,url:i};n&&q.extend(s,n),qt.push(s)}function O(e){var t=q(e).find(ct),i=t.attr("id"),n=Xt[i].playlist,s=Xt[i].index;t.find($t).text(n[s].title),q.trim(n[s].desc).length?t.find(ce).html(n[s].desc):t.find(ce).html("No description available"),m(t)&&(F.find(we).text(n[s].title),F.find(ve).html(n[s].desc))}function $(e,t){q(e).find(pt).removeClass(Ne).css("background-image",'url("'+t+'")')}function N(e,t){var i=q(e),n=d(Math.round(t.jPlayer.status.currentTime))+" / "+d(Math.round(t.jPlayer.status.duration));i.find(Lt).html(n),i.find(It).css("width",Math.round(t.jPlayer.status.currentPercentAbsolute)+"%")}var F,H,z,R,B,W,q=e.$,U=q(document.body),V=q(document),Y=q(t),G="fsMediaBackgroundAudio",K="."+G,X="fsMediaContainer",Q="."+X,J="fsMediaControl",Z="fsMediaControlsBottom",ee="."+Z,te="fsMediaControlsContainer",ie="."+te,ne="fsMediaControlsTop",se="."+ne,oe="fsMediaCustomPlayer",re="fsMediaDescription",ae="fsMediaDescriptionClose",le="."+ae,ce="."+re,de="fsMediaDescriptionContainer",he="."+de,ue="fsMediaPlayerDialogCloseButton",pe="fsMediaPlayerDialogContainer",fe="#"+pe,me="fsMediaPlayerDialogContent",ge="fsMediaPlayerDialogDescription",ve="#"+ge,be="fsMediaPlayerDialog",ye="fsMediaPlayerDialogTitle",we="#"+ye,_e="fsMediaPlayerDialogWithDescription",ke="fsMediaPlayerDialogWithTitle",xe="fsDisabled",Ce="fsElementContent",Se="."+Ce,Te="fsGallery",De="."+Te,Pe="fsMedia",Ee="."+Pe,Me="media",Ae="fsMediaExitFullscreen",Ie="fsMediaFullscreen",je="."+Ie,Le=".galleria-container",Oe=".galleria-image",$e=".galleria-stage",Ne="fsStateHidden",Fe="fsMediaInfo",He="."+Fe,ze="mediaPlayerQuality",Re="fsMediaGallery",Be="."+Re,We=2,qe=1,Ue=3,Ve=200,Ye=260,Ge=315,Ke=290,Xe=375,Qe=115,Je="fsMediaNext",Ze="."+Je,et="fsMediaPause",tt="fsMediaPlay",it="."+tt,nt="fsMediaPlayOverlay",st="."+nt,ot="fsMediaPlayer",rt=1,at=2,lt=0,ct="."+ot,dt="fsMediaPoster",ht=1,ut=0,pt="."+dt,ft="fsMediaPrevious",mt="."+ft,gt="fsMediaProgressBar",vt="."+gt,bt="fsMediaQuality",yt="."+bt,wt="fsMediaQualityMenu",_t="."+wt,kt="fsMediaSeekBar",xt="fsMediaSeekBarBack",Ct="."+xt,St="fsMediaSeekBarForward",Tt="."+St,Dt="fsMediaSeekPreview",Pt="."+Dt,Et="fsMediaStatusBar",Mt="."+Et,At="fsMediaTimeBar",It="."+At,jt="fsMediaTimeLabel",Lt="."+jt,Ot="fsMediaTitle",$t="."+Ot,Nt="fsMediaTransparentCursor",Ft="fsMediaView",Ht="."+Ft,zt="fsMediaViewContainer",Rt="fsMediaVolume",Bt="."+Rt,Wt="fsMediaVolumeMuted",qt=t.dataLayer||[],Ut=e.events,Vt=e.getInternalNS("elements.utils"),Yt=Vt.inDraftMode(),Gt=!1,Kt=0,Xt={},Qt=null,Jt="",Zt=["exitFullscreen","msExitFullscreen","mozCancelFullScreen","webkitExitFullscreen"],ei="",ti=["requestFullscreen","msRequestFullscreen","mozRequestFullScreen","webkitRequestFullscreen"],ii='<div id="fsMediaPlayer-#{timestamp}" class="'+ot+'"><div class="'+zt+'"><div class="'+Ft+'">Loading media...</div><div class="fsCroppedImage '+dt+'"></div></div><div class="'+ne+" "+te+'"><div class="'+Ot+'">&nbsp;</div></div><div class="'+Z+" "+te+" "+Ne+'"><div class="'+Dt+'"></div><div class="'+Et+'"><div class="'+kt+'"></div><div class="'+gt+'"></div><div class="'+St+'"></div><div class="'+At+'"></div><div class="'+xt+'"></div></div><div class="fsMediaControls"><button class="'+tt+" "+J+'"></button><button class="'+ft+" "+J+'"></button><button class="'+Je+" "+J+'"></button><button class="'+Rt+" "+J+'"></button><button class="'+bt+" "+J+'"><span></span></button><button class="'+Fe+" "+J+'"></button><button class="'+Ie+" "+J+'"></button><div class="'+jt+'"></div></div></div><div class="'+de+" "+Ne+'"><div class="fsMediaDescriptionTransparentLayer"></div><div class="'+re+'"></div><div class="'+ae+'">X</div></div><div class="'+wt+" "+Ne+'"></div><button class="'+nt+'"></button></div>';Y.resize(function(){q(Ee).each(function(){x(this,!0)})}),V.on("fullscreenchange mozfullscreenchange webkitfullscreenchange MSFullscreenChange",function(){var e=q(je),t=q(ct+" "+$e+" "+Oe+" img"),i=f(),n=(i?"Exit":"Enter")+" Fullscreen",s=i?"default":"pointer";e.toggleClass(Ae,i),Gt||e.attr("aria-label",n),t.css("cursor",s)}),V.on("fullscreenerror mozfullscreenerror webkitfullscreenerror MSFullscreenError",function(e){var t,i,n,s,o,r=q(e.originalEvent.srcElement),a=r.find(Ht),l=0;r.find(Le).length?(t=a.data("galleria").getIndex(),s=a.data("galleria").getData(t).objectID,n=a.data("galleria")._playing,r.find(it).removeClass(et),a.data("galleria").pause()):(o=r.find(ct).attr("id"),t=Xt[o].index,i=Xt[o].quality,l=a.data("jPlayer").status.currentTime,n=Xt[o].playing,s=Xt[o].playlist[t].objectID,a.jPlayer("pause")),w(r.data("playlistid"),s,n,l,i,!0)}),Ut.onElementAdded(Me,function(e){var t=e.find(Q);t.length&&!t.hasClass(oe)&&l(e)}),Ut.onElementHidden(Ut.ALL_CONTAINERS_TYPE,function(e){e.find(Ht).each(function(){var e=q(this).data("galleria");e&&e.destroy()}),e.find(ct).remove(),e.find(Q).data("setup-started",!1)}),Ut.onElementMoved(Me,function(){Y.resize()}),Ut.onElementShown(Ut.ALL_CONTAINERS_TYPE,P),Ut.onElementUpdated(Me,function(e){var t=e.find(Q),i=e.find(ct);t.length&&!t.hasClass(oe)?(i.off("click mouseleave mousemove"),l(e)):(T(e),1==q(De).length&&D())}),U.on("mediaPlayer.loadPlaylist",function(e,t){var i=q("#"+t.player).closest(".fsElement"),n=i.find(Q),s=i.find(ct);n.data("playlistid",t.playlist),s.off("click mouseleave mousemove"),l(i)}),n.option({resizeDuration:200,wrapAround:!0}),q(function(){F=q("<dialog>",{id:be}),H=q("<div>",{id:me}),z=q("<button>",{id:ue}),z.click(function(){H.empty(),R.close()}),U.append(F.append(H).append(z)),R=F[0],e.util.ensureDialog(R);try{document.createEvent("TouchEvent"),Gt=!0}catch(t){Gt=!1}U.on("click","a[data-media-playlist-id], a[href*=popMedia\\(]",function(){var e,t,i=q(this),n=i.data("media-playlist-id"),s=/popMedia\(['"]+((g|cat|chnl)=(\d+))['"]+\)/,o=!!i.data("media-dialog-description"),r=!!i.data("media-dialog-title");if(!n){if(t=s.exec(i.prop("href")),"g"!=t[2])return e=i.closest("article"),_(e),q.ajax("/cf_media/popheight.cfm").done(function(e){b(t[1],e)}).fail(function(){b(t[1],80)}).always(function(){e.children(".fsLoadingDotsOverlay").remove()}),!1;n=t[3]}return w(n,null,!0,0,null,Yt,r,o,"fsMediaLinkDialog"),!1}),P(),T(),Qt=new o,q(De).length&&D()})}(FS,window,Galleria,lightbox),function(e,t){"use strict";function i(e){var i=c.getElementID(e),o=e.data("trigger-element-ids");e.on("click",".fsAlertsIcon",function(e){e.preventDefault(),t.open("/cf_directory/cp.cfm?news=0","","width=600,height=700")}).on("click",".fsRSSIcon",function(e){e.preventDefault(),t.open("/cf_news/rss.cfm","","width=600,height=700")}).on("click",".fsCommentCount",function(){var e=n(this),t=e.siblings(".fsCommentList");t.toggleClass(u),e.toggleClass(f,t.hasClass(u))}).on("click",".fsLoadMoreButton",function(){var t=n(this),o=e.find(d),r={},a=t.data("start-row");a&&(r.start_row=a),s.extend(r,g[i].filters),c.loadingOverlay(o),c.loadElementData(e,r).done(function(i){var s=n(i),r=s.find(d).children(":not(.fsElementEmpty)");o.siblings(".fsLoadingDotsOverlay").remove(),o.append(r),e.addClass("fsLoadMoreClicked"),t.remove()})}).on("click",".fsPostComment",function(){var e=n(this),t=e.closest(".fsComments").find(".fsCommentCount"),i=e.siblings(".fsMyComment"),s=e.closest(".fsCommentForm"),o=n.trim(i.val()),r=parseInt(e.closest(".fsComments").data("newsid"));isNaN(r)||0>=r?alert("Sorry, we are unable to determine what news post you are commenting on."):0==o.length?(alert("Please type a comment before submitting!"),i.val(""),i.focus()):(e.prop("disabled",!0),n.ajax({data:{comment:o},dataType:"json",type:"POST",url:"/cf_endpoints/routes.cfm/news/posts/"+r+".json",error:function(t,i,n){alert(n),e.prop("disabled",!1)},success:function(n){if(n.success)if(n.warnings.length>0)s.after('<div class="fsCommentWarning">'+n.warnings+"</div>");else{var r='<div class="fsComment"><div><span class="fsName">';
r+=s.find(".fsName").text(),r+="</span></div><div>"+o+"</div></div>",s.after(r)}else alert(n.warnings);var a=s.siblings(".fsComment").length;t.text(a+" Comment"+(1!=a?"s":"")),i.val(""),e.prop("disabled",!1)}}))}),o&&a.onFilter(i,o,function(t,n){var o=g[i];n.categoryIDs&&(o.filters.category_ids=n.categoryIDs.length?n.categoryIDs:void 0),s.has(n,"keywords")&&(o.filters.keywords=n.keywords.length?n.keywords:void 0),s.has(n,"rangeStart")&&(o.filters.start_date=n.rangeStart?n.rangeStart.format(p):void 0),s.has(n,"rangeEnd")&&(o.filters.end_date=n.rangeEnd?n.rangeEnd.format(p):void 0),c.loadingOverlay(e.find(d)),c.fetchElementHTML(i,o.filters).done(function(){a.triggerUpdated(i,o.filters,t)})}),n(t).resize()}var n=e.$,s=e._,o=e.getInternalNS("elements.constants.classes"),r=e.events,a=e.getInternalNS("elements.linkedEvents"),l=e.getInternalNS("elements.constants.selectors"),c=e.getInternalNS("elements.utils"),d=l.elementContent,h="News",u=o.stateExpanded,p="YYYY-MM-DD",f=o.stateSelected,m=n(document.body),g={};r.onElementAdded(h,i),r.onElementUpdated(h,i),r.onElementDialogShown(h,i),n(".fs"+h).each(function(){var e=n(this);g[c.getElementID(e)]={filters:{}},i(e)}),m.on("click",".fsNewsPostLink[href=#]",function(){var e=n(this),t=e.closest("article"),i=c.getElement(e),s=t.data("news-id");return i.data("linked-element-ids")?(c.populateLinkedElements(i,{news_id:s}),c.updateURLParams({virtualParam:t.data("post-lookup")})):c.showElementPopupDialog(i,"News",{news_id:s,page_id:c.getPageID(),show_post:!0},{dialogClass:"fsNews",title:"News Post"}),!1})}(FS,window),function(e){"use strict";function t(e){e.hasClass("fsCategoryFilter")?i(e):e.hasClass("fsSearch")&&s.setupSearch(e)}function i(e){var t=e.data("linked-element-ids");t&&(a.setupSelectAllButtons(e,".fsElementContent"),e.on("click",".fsStyleUpdateButton",function(){r.triggerFilter(a.getElementID(e),{categoryIDs:e.find("input:checked").map(function(){return this.value}).get()})}))}var n=e.$,s=e.getInternalNS("elements.element_tools.utils"),o=e.getNS("events"),r=e.getInternalNS("elements.linkedEvents"),a=e.getInternalNS("elements.utils"),l="NewsTools";o.onElementAdded(l,t),o.onElementUpdated(l,t),n(".fs"+l).each(function(){t(n(this))})}(FS),function(e){"use strict";function t(){var e=window.location.hash?window.location.hash.match(/^#fs-panel-([0-9_]+)$/):!1;return e?e[1]:!1}function i(e){var t=e,i=t.children(g).children(".fsTabsNav");i.sortable({axis:"x",items:"> li:not(:has(> .fsAddPanelGroupTab))",beforeActivate:function(e){e.preventDefault()},update:function(e,n){var s=r(n.item),o=s.prev(),a=h(s),l=c(a),d=o.length?h(o):0,u=c(d);f(l,u,t).done(function(){0==d?i.after(l):u.after(l)})}})}function n(e){var i=e.find("> "+g+" > .fsPanel.fsStateOpen:first");if(e.children(g).children(".fsTabsNav").children(S).removeClass(b),i.length)r(T+d(i)).addClass(b);else if(e.hasClass(D)&&e.find("ul.fsTabsNav:not(:hidden)").length){var n=t();if(n&&e.find("> "+g+" > #fsEl_"+n+".fsPanel").addClass(y).length)r(T+n).addClass(b);else{var s=e.find("> "+g+" > .fsPanel:first");s.addClass(y),r(T+d(s)).addClass(b),a.triggerElementShown(s)}}}function s(e){var s,f=r(e),b=f.hasClass(D),_=f.data("one-panel");if(f.on("click","> "+g+" > .fsTabsNav > "+S+" > a",function(e){e.preventDefault();var t=r(this),i=h(t.parent()),s=c(i),o=f.find(w+":first");f.children(g).children(".fsPanel").removeClass(y),s.addClass(y),n(f),a.triggerElementHidden(o),a.triggerElementShown(s)}).on("click","> "+g+" > .fsPanel > header",function(){var e=r(this),t=e.parent();if(_){var i=f.find(w);if(i.length&&(o(i),d(i)==d(t)))return!1}return o(t),n(f),!1}).on("click","> "+g+" > .fsAddPanel, .fsAddPanelGroupTab:first",function(){var e=r(this),t=e.parents(x).first(),i=t.hasClass(D),s=d(t),o=t.children(g).children(".fsPanel").last(),a=t.children(g).children(".fsTabsNav").children(S).last(),c=a.clone(),h=e.html();e.prop(m,!0).html(v),u(s,o.length>0?d(o):0,!0).always(function(){e.prop(m,!1).html(h)}).done(function(s){var h=r(s).addClass(y),u=d(h);i?(t.children(g).children(".fsPanel").removeClass(y),h.insertAfter(o)):e.before(h),c.attr("id","fsTab-"+u),c.find("a").attr("href","#fs-panel-"+d(h)).html(h.data("title")),c.insertAfter(a),h.find(g).sortable(l.SORTABLE_CONFIG),p("element:create",u),i&&n(t)})}),b)n(f);else{var k=t();if(k){var C=f.find("#fsEl_"+k);C.find(g).is(":hidden")&&C.find("> header").click()}s=f.find(w),s.length&&a.triggerElementShown(s)}l.inDraftMode()&&i(f)}function o(e){e.find("> "+g).slideToggle({always:function(){var e=r(this);e.is(":hidden")&&e.css("display","")}}),e.toggleClass(y),a["triggerElement"+(e.hasClass(y)?"Shown":"Hidden")](e)}var r=e.$,a=e.events,l=e.getInternalNS("elements.utils"),c=l.getElementByID,d=l.getElementID,h=l.getTabID,u=l.createElement,p=l.notifyAdminInterface,f=l.moveBehind,m="disabled",g=".fsElementContent",v='<div class="fsLoadingDots"></div>',b="fsStateSelected",y="fsStateOpen",w="> "+g+" > .fsPanel."+y,_="panel",k="panelgroup",x=".fsPanelGroup",C="fsTabsNavItem",S="."+C,T="#fsTab-",D="fsTabs";a.onElementAdded(k,s),a.onElementUpdated(k,s),a.onElementUpdated(_,function(e){0==e.siblings(".fsPanel."+y).length&&(e.addClass(y),a.triggerElementShown(e)),r(T+d(e)).find("a").html(e.data("title"))}),a.onElementMoved(_,function(e,t){var i=d(e),n=t.length?d(t):0,s=r(T+i);return s?void(0==n?s.parent().prepend(s):r(T+n).after(s)):!1}),a.onElementDeleted(_,function(e){r(T+d(e)).remove()}),a.onElementShown(_,function(e){var t=e.find(x);t.length&&t.each(function(){n(r(this))})}),r(window).resize(e._.debounce(function(){r(x).each(function(){n(r(this))})},250)),r(x).each(function(){s(r(this))})}(FS,window),function(e){"use strict";var t=e.$;t(".fsPersonalReports").on("click","a",function(){return e.util.popup("/cf_group/report.cfm?reportid="+t(this).data("report-id"),"personalReportsPopup",700,600),!1})}(FS),function(e){"use strict";function t(e){var t=l.getElementID(e),o=e.data("trigger-element-ids");e.on("click",a.loadMoreButton,function(){var t=i(this),n=e.find(a.elementContent),o={},r=t.data("start-row");r&&(o.start_row=r),l.loadingOverlay(n),l.loadElementData(e,o).done(function(o){var r=i(o).find(a.elementContent).children(":not(.fsElementEmpty)");n.siblings(a.loadingDotsOverlay).remove(),n.append(r),e.addClass(s.loadMoreClicked),t.remove()})}),o&&r.onFilter(t,o,function(i,s){n.has(s,"category_id")&&(l.loadingOverlay(e.find(a.elementContent)),l.fetchElementHTML(t,{category_id:s.category_id}).done(function(){r.triggerUpdated(t,null,i)}))})}var i=e.$,n=e._,s=e.getInternalNS("elements.constants.classes"),o=e.events,r=e.getInternalNS("elements.linkedEvents"),a=e.getInternalNS("elements.constants.selectors"),l=e.getInternalNS("elements.utils"),c="Post";o.onElementAdded(c,t),o.onElementUpdated(c,t),o.onElementDialogShown(c,t),i(".fs"+c).each(function(){t(i(this))})}(FS,window),function(e){"use strict";function t(e){e.on("click",".fsCategoryLink",function(){var t=i(this),n={category_id:t.data("category-id")};return o.updateQueryStringValueAndHistory(n),s.triggerFilter(o.getElementID(e),n),t.closest("li").addClass(a).siblings().removeClass(a),!1})}var i=e.$,n=e.getNS("events"),s=e.getInternalNS("elements.linkedEvents"),o=e.getInternalNS("elements.utils"),r="PostTools",a="fsStateSelected";n.onElementAdded(r,t),n.onElementUpdated(r,t),i(".fs"+r).each(function(){t(i(this))})}(FS),function(e,t){"use strict";function i(){!r&&t.google&&t.google.search&&t.google.search.cse&&t.google.search.cse.element.go()}var n="Search",s=e.events,o=e.getInternalNS("elements.utils"),r=o.suppressGoogleSearch();s.onElementAdded(n,i),s.onElementUpdated(n,i)}(FS,window),function(e,t,i){"use strict";function n(e){e.hasClass(l)&&a(e)}function s(t){t.find(c).each(function(){a(e(this))})}function o(t){e(t).find(".fsElementSlideshow").each(function(){var t=e(this).get(0).slick;t.setPosition(),t.slickGoTo(0,!0)})}function r(t){t.each(function(){var t=e(this).children();t.height(e(FS._.max(t,function(t){return e(t).height()})).height())})}function a(e){var t=e.find(".fsElementSlideshow"),i=t.data("arrows"),n=t.data("slides-to-show"),s=t.data("vertical");s&&r(t),t.slick({adaptiveHeight:t.data("adaptive-height"),arrows:i,autoplay:t.data("autoplay"),autoplaySpeed:t.data("autoplay-speed"),dots:t.data("dots"),dotsClass:"fsPager",fade:t.data("fade"),infinite:!0,nextArrow:i?e.find(".fsNextButton"):"",prevArrow:i?e.find(".fsPrevButton"):"",slide:"article",slidesToScroll:n,slidesToShow:n,vertical:s&&!t.data("fade")})}var l="fsSlideshow",c="."+l;i.each(["News","Calendar","Post"],function(e){t.onElementAdded(e,n),t.onElementUpdated(e,n)}),t.onElementShown("Panel",o),t.onElementUpdated(t.ALL_CONTAINERS_TYPE,s),s(e(document.body))}(FS.$,FS.events,FS._),function(e,t,i){"use strict";function n(t){var i,n="https://graph.facebook.com/",s=t.data();s.id&&(i=t.find(".fsElementContent"),""==s.accesstoken&&i.html(a("Unable to connect to Facebook at this time. Please try refreshing in a couple of minutes.")),e.ajax({data:{fields:h,limit:s.maxposts},dataType:"jsonp",url:n+s.id+"/"+s.posttype+"?access_token="+s.accesstoken,error:function(){i.html(a("An error occurred while connecting to the Facebook API"))},success:function(t){var n="http://www.facebook.com/"+s.id;if(t.error)i.html(a("The specified page is not available"));else{t.link&&(n=t.link);var o,r,l,c=0,d=e("<ul>",{"class":"fsFacebookList"}),h=e('<li class="fsFacebookListItem"></li>');for(t=t.data;c<t.length;c++){if(h.html('<span class="fsFacebookFrom">'+t[c].from.name+"</span>"),t[c].to&&t[c].to.name&&h.append(' <strong>to</strong> <span class="fsFacebookTo">'+t[c].to.name+"</span>"),t[c].message){l=t[c].message.match(/https?:\/\/[^\s|"|'|>]*/i),r=t[c].message.replace("<","&lt;"),r=r.replace(">","&gt;");for(o in l)"index"!=o&&"input"!=o&&"lastIndex"!=o&&(r=r.replace(l[o],'<a href="'+l[o]+'" target="_blank">'+l[o]+"</a>"));h.append("&nbsp;"+r)}switch(r=e("<div>",{"class":"fsFacebookExtras fsStyleAutoclear"}),t[c].picture&&r.append('<img class="fsFacebookThumb" src="'+t[c].picture+'">'),t[c].type){case"link":case"photo":case"video":t[c].name?r.append('<a target="_blank" class="fsFacebookTitle" href="'+t[c].link+'">'+t[c].name+"</a>"):t[c].link&&r.append('<a target="_blank" class="fsFacebookTitle" href="'+t[c].link+'">'+t[c].link+"</a>")}t[c].caption&&r.append('<div class="fsFacebookCaption">'+t[c].caption+"</div>"),t[c].description&&r.append('<div class="fsFacebookDesc">'+t[c].description+"</div>"),t[c].likes&&t[c].likes.data&&h.append(r.append('<div class="fsFacebookLikes">'+t[c].likes.data.length+" likes</div>")),h.clone().appendTo(d)}e('<li class="fsFacebookFollow"><a href="'+n+'" target="_blank">View facebook page</a></li>').appendTo(d),i.html(d)}}}))}function s(t){function n(e){l(o,i.location.protocol+"//player.vimeo.com/video/"+e+"?byline=0&api=1")}function s(t){e.ajax({dataType:"jsonp",url:i.location.protocol+"//vimeo.com/api/v2/"+t+r.id+"/videos.json",error:function(){o.html(a("An error occurred while connecting to the Vimeo API"))},success:function(i){var s,l,c=0;if(i.length){if(n(i[0].id),!r.mostrecent){for(s=e('<ul class="fsVimeoList">'),l=e('<li class="fsVimeoListItem fsStyleAutoclear"><img class="fsVimeoThumb"><div class="fsVimeoTitle"></div><div class="fsVimeoViews"></div><div class="fsVimeoDesc"></div></li>');c<i.length&&(l.find("img").attr({alt:i[c].title,src:i[c].thumbnail_medium,title:i[c].title}),l.find(".fsVimeoViews").html(i[c].stats_number_of_plays+" views"),l.find(".fsVimeoTitle").html(i[c].title),l.find(".fsVimeoDesc").html(i[c].description),l.clone().click(function(){n(i[e(this).index()].id)}).appendTo(s),c!=r.maxvideos-1);c++);e('<li class="vimeo_view_link"><a href="http://www.vimeo.com/'+t.replace(/(channel|group)/,"$1s")+r.id+'" target="_blank">View on vimeo</a></li>').appendTo(s),o.append(s)}}else o.html(a("No videos found"))}})}var o,r=t.data();if(r.id&&r.videotype)switch(o=t.find(".fsElementContent"),r.videotype){case"album":s("album/");break;case"channel":s("channel/");break;case"group":s("group/");break;case"user":s("");break;case"video":n(r.id)}}function o(t){var n,s=t.data(),o=function(t){r(t.data.video,!0),e(t.originalEvent.target).closest(".fsElement")[0].scrollIntoView()},r=function(e,t){l(n,i.location.protocol+"//www.youtube.com/embed/"+e+"?enablejsapi=1"+(t?"&autoplay=1":"")+"&origin="+i.location.protocol+i.location.hostname)},c=function(t,i){e.ajax({dataType:"jsonp",url:"https://www.googleapis.com/youtube/v3/"+t+"?"+i,data:{alt:"json",key:u,maxResults:s.mostrecent?1:s.maxvideos,order:"date",part:"channels"==t?"id":"snippet",type:"video"},error:function(){n.html(a("An error occurred while connecting to the YouTube API"))},success:function(t){var i;if(t.error){var s=t.error.errors.map(function(e){return e.reason+": "+e.message});n.html(a(s.join("<br>")))}if("youtube#channelListResponse"==t.kind)return void(t.items.length?c("search","channelId="+t.items[0].id):n.html(a("No channels found for the specified user")));if(t.items.length){if(r(t.items[0].id.videoId||t.items[0].snippet.resourceId.videoId),t.items.length>1){var l=e("<ul>",{"class":"fsYoutubeList"});for(i=0;i<t.items.length;i++){var d=e("<li>",{"class":"fsYoutubeListItem fsStyleAutoclear"});d.append(e("<img>",{"class":"fsYoutubeThumb fsStyleFloatLeft",src:t.items[i].snippet.thumbnails["default"].url})),d.append(e("<div>",{"class":"fsYoutubeTitle",text:t.items[i].snippet.title})),d.append(e("<div>",{"class":"fsYoutubeDesc",text:t.items[i].snippet.description})),d.click({video:t.items[i].id.videoId||t.items[i].snippet.resourceId.videoId},o),l.append(d)}n.append(l)}}else n.html(a("No videos found"))}})};if(s.id)switch(n=t.find(".fsElementContent"),s.videotype){case"channel":c("search","channelId="+s.id);break;case"playlist":c("playlistItems","playlistId="+s.id);break;case"user":c("channels","forUsername="+s.id);break;case"video":r(s.id)}}function r(e){return Math.round(e/16*9)}function a(e){return'<div class="fsElementEmpty">'+e+"</div>"}function l(e,t){var i=e.find("iframe"),n='<iframe class="fsSocialVideoFrame" type="text/html" height="'+r(e.width())+'" src="'+t+'" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>';i.length?i.replaceWith(n):e.html(n)}function c(e){e.hasClass("fsFacebook")?n(e):e.hasClass("fsVimeo")?s(e):e.hasClass("fsYoutube")&&o(e)}function d(t){t.find(".fsVimeo, .fsYoutube").each(function(){var t=e(this).find("iframe");t.height(r(t.outerWidth()))})}var h="caption,description,from,likes,link,message,name,picture,to,type",u="AIzaSyDZOIEiCKAvQN4NM-pPOIjRpwPU5gslVdg";e(function(){e(".fsFacebook, .fsVimeo, .fsYoutube").each(function(){c(e(this))})}),t.onElementUpdated("facebook",c),t.onElementUpdated("vimeo",c),t.onElementUpdated("youtube",c),t.onElementShown("panel",d),e(i).resize(function(){d(e("body"))})}(FS.$,FS.events,window),function(e){"use strict";function t(e){var t=e.find("> .fsElementContent");t.data("ui-tabs")?t.tabs("refresh"):t.tabs({activate:function(e,t){o.triggerElementHidden(t.oldPanel),o.triggerElementShown(t.newPanel)}}),r.inDraftMode()&&e.find(".ui-tabs-nav").sortable({axis:"x",items:"> li:not(:has(> .fsAddTab))",beforeActivate:function(e){e.preventDefault()},update:function(e,t){var i=s(t.item);r.moveBehind(i,i.prev(),i.closest(".fsElement"))}})}var i="tab",n="tabs",s=e.$,o=e.events,r=e.getInternalNS("elements.utils");o.onElementUpdated(n,t),o.onElementUpdated(n,t),o.onElementUpdated(i,function(e){var i=e.parent().find("#fsTab_"+r.getElementID(e)+" > a"),n=e.data("title");i.text(n),e.find("> .fsElementActionButtonContainer").remove(),t(e.closest(".fsTabs"))}),o.onElementAdded(i,function(e){e.closest(".fsElementContent").tabs({active:-1})}),s(".fsTabs:not(.fsPanelGroup)").each(function(){t(s(this))})}(FS),function(e){"use strict";var t=e.$,i=e.getInternalNS("elements.utils"),n=t(document.body);n.on("click",".fsPostLink[href=#]",function(){var e=t(this);return i.showElementPopupDialog(i.getElement(e),"Post",{post_id:e.closest("article").data("post-id"),show_post:!0},{dialogClass:"fsPost",title:"Board Post"}),!1})}(FS),/*!
 * jsTree {{VERSION}}
 * http://jstree.com/
 *
 * Copyright (c) 2014 Ivan Bozhanov (http://vakata.com)
 *
 * Licensed same as jquery - under the terms of the MIT License
 *   http://www.opensource.org/licenses/mit-license.php
 */
/*!
 * if using jslint please allow for the jQuery global and use following options: 
 * jslint: browser: true, ass: true, bitwise: true, continue: true, nomen: true, plusplus: true, regexp: true, unparam: true, todo: true, white: true
 */
function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):e("object"==typeof exports?require("jquery"):jQuery)}(function(e,t){"use strict";if(!e.jstree){var i,n,s=0,o=!1,r=!1,a=!1,l=[],c=e("script:last").attr("src"),d=document,h=d.createElement("LI");h.setAttribute("role","treeitem"),i=d.createElement("I"),i.className="jstree-icon jstree-ocl",i.setAttribute("role","presentation"),h.appendChild(i),i=d.createElement("A"),i.className="jstree-anchor",i.setAttribute("href","#"),i.setAttribute("tabindex","-1"),n=d.createElement("I"),n.className="jstree-icon jstree-themeicon",n.setAttribute("role","presentation"),i.appendChild(n),h.appendChild(i),i=n=null,e.jstree={version:"{{VERSION}}",defaults:{plugins:[]},plugins:{},path:c&&-1!==c.indexOf("/")?c.replace(/\/[^\/]+$/,""):"",idregex:/[\\:&!^|()\[\]<>@*'+~#";.,=\- \/${}%?`]/g},e.jstree.create=function(t,i){var n=new e.jstree.core(++s),o=i;return i=e.extend(!0,{},e.jstree.defaults,i),o&&o.plugins&&(i.plugins=o.plugins),e.each(i.plugins,function(e,t){"core"!==e&&(n=n.plugin(t,i[t]))}),n.init(t,i),n},e.jstree.destroy=function(){e(".jstree:jstree").jstree("destroy"),e(document).off(".jstree")},e.jstree.core=function(e){this._id=e,this._cnt=0,this._wrk=null,this._data={core:{themes:{name:!1,dots:!1,icons:!1},selected:[],last_error:{},working:!1,worker_queue:[],focused:null}}},e.jstree.reference=function(t){var i=null,n=null;if(t&&t.id&&(t=t.id),!n||!n.length)try{n=e(t)}catch(s){}if(!n||!n.length)try{n=e("#"+t.replace(e.jstree.idregex,"\\$&"))}catch(s){}return n&&n.length&&(n=n.closest(".jstree")).length&&(n=n.data("jstree"))?i=n:e(".jstree").each(function(){var n=e(this).data("jstree");return n&&n._model.data[t]?(i=n,!1):void 0}),i},e.fn.jstree=function(i){var n="string"==typeof i,s=Array.prototype.slice.call(arguments,1),o=null;return i!==!0||this.length?(this.each(function(){var r=e.jstree.reference(this),a=n&&r?r[i]:null;return o=n&&a?a.apply(r,s):null,r||n||i!==t&&!e.isPlainObject(i)||e(this).data("jstree",new e.jstree.create(this,i)),(r&&!n||i===!0)&&(o=r||!1),null!==o&&o!==t?!1:void 0}),null!==o&&o!==t?o:this):!1},e.expr[":"].jstree=e.expr.createPseudo(function(){return function(i){return e(i).hasClass("jstree")&&e(i).data("jstree")!==t}}),e.jstree.defaults.core={data:!1,strings:!1,check_callback:!1,error:e.noop,animation:200,multiple:!0,themes:{name:!1,url:!1,dir:!1,dots:!0,icons:!0,stripes:!1,variant:!1,responsive:!1},expand_selected_onload:!0,worker:!0,force_text:!1,dblclick_toggle:!0},e.jstree.core.prototype={plugin:function(t,i){var n=e.jstree.plugins[t];return n?(this._data[t]={},n.prototype=this,new n(i,this)):this},init:function(t,i){this._model={data:{"#":{id:"#",parent:null,parents:[],children:[],children_d:[],state:{loaded:!1}}},changed:[],force_full_redraw:!1,redraw_timeout:!1,default_state:{loaded:!0,opened:!1,selected:!1,disabled:!1}},this.element=e(t).addClass("jstree jstree-"+this._id),this.settings=i,this._data.core.ready=!1,this._data.core.loaded=!1,this._data.core.rtl="rtl"===this.element.css("direction"),this.element[this._data.core.rtl?"addClass":"removeClass"]("jstree-rtl"),this.element.attr("role","tree"),this.settings.core.multiple&&this.element.attr("aria-multiselectable",!0),this.element.attr("tabindex")||this.element.attr("tabindex","0"),this.bind(),this.trigger("init"),this._data.core.original_container_html=this.element.find(" > ul > li").clone(!0),this._data.core.original_container_html.find("li").addBack().contents().filter(function(){return 3===this.nodeType&&(!this.nodeValue||/^\s+$/.test(this.nodeValue))}).remove(),this.element.html("<ul class='jstree-container-ul jstree-children' role='group'><li id='j"+this._id+"_loading' class='jstree-initial-node jstree-loading jstree-leaf jstree-last' role='tree-item'><i class='jstree-icon jstree-ocl'></i><a class='jstree-anchor' href='#'><i class='jstree-icon jstree-themeicon-hidden'></i>"+this.get_string("Loading ...")+"</a></li></ul>"),this.element.attr("aria-activedescendant","j"+this._id+"_loading"),this._data.core.li_height=this.get_container_ul().children("li").first().height()||24,this.trigger("loading"),this.load_node("#")},destroy:function(e){if(this._wrk)try{window.URL.revokeObjectURL(this._wrk),this._wrk=null}catch(t){}e||this.element.empty(),this.teardown()},teardown:function(){this.unbind(),this.element.removeClass("jstree").removeData("jstree").find("[class^='jstree']").addBack().attr("class",function(){return this.className.replace(/jstree[^ ]*|$/gi,"")}),this.element=null},bind:function(){var t="",i=null,n=0;this.element.on("dblclick.jstree",function(){if(document.selection&&document.selection.empty)document.selection.empty();else if(window.getSelection){var e=window.getSelection();try{e.removeAllRanges(),e.collapse()}catch(t){}}}).on("mousedown.jstree",e.proxy(function(e){e.target===this.element[0]&&(e.preventDefault(),n=+new Date)},this)).on("mousedown.jstree",".jstree-ocl",function(e){e.preventDefault()}).on("click.jstree",".jstree-ocl",e.proxy(function(e){this.toggle_node(e.target)},this)).on("dblclick.jstree",".jstree-anchor",e.proxy(function(e){this.settings.core.dblclick_toggle&&this.toggle_node(e.target)},this)).on("click.jstree",".jstree-anchor",e.proxy(function(t){t.preventDefault(),t.currentTarget!==document.activeElement&&e(t.currentTarget).focus(),this.activate_node(t.currentTarget,t)},this)).on("keydown.jstree",".jstree-anchor",e.proxy(function(t){if("INPUT"===t.target.tagName)return!0;var i=null;switch(this._data.core.rtl&&(37===t.which?t.which=39:39===t.which&&(t.which=37)),t.which){case 32:t.ctrlKey&&(t.type="click",e(t.currentTarget).trigger(t));break;case 13:t.type="click",e(t.currentTarget).trigger(t);break;case 37:t.preventDefault(),this.is_open(t.currentTarget)?this.close_node(t.currentTarget):(i=this.get_parent(t.currentTarget),i&&"#"!==i.id&&this.get_node(i,!0).children(".jstree-anchor").focus());break;case 38:t.preventDefault(),i=this.get_prev_dom(t.currentTarget),i&&i.length&&i.children(".jstree-anchor").focus();break;case 39:t.preventDefault(),this.is_closed(t.currentTarget)?this.open_node(t.currentTarget,function(e){this.get_node(e,!0).children(".jstree-anchor").focus()}):this.is_open(t.currentTarget)&&(i=this.get_node(t.currentTarget,!0).children(".jstree-children")[0],i&&e(this._firstChild(i)).children(".jstree-anchor").focus());break;case 40:t.preventDefault(),i=this.get_next_dom(t.currentTarget),i&&i.length&&i.children(".jstree-anchor").focus();break;case 106:this.open_all();break;case 36:t.preventDefault(),i=this._firstChild(this.get_container_ul()[0]),i&&e(i).children(".jstree-anchor").filter(":visible").focus();break;case 35:t.preventDefault(),this.element.find(".jstree-anchor").filter(":visible").last().focus()}},this)).on("load_node.jstree",e.proxy(function(t,i){i.status&&("#"!==i.node.id||this._data.core.loaded||(this._data.core.loaded=!0,this._firstChild(this.get_container_ul()[0])&&this.element.attr("aria-activedescendant",this._firstChild(this.get_container_ul()[0]).id),this.trigger("loaded")),this._data.core.ready||setTimeout(e.proxy(function(){if(!this.get_container_ul().find(".jstree-loading").length){if(this._data.core.ready=!0,this._data.core.selected.length){if(this.settings.core.expand_selected_onload){var t,i,n=[];for(t=0,i=this._data.core.selected.length;i>t;t++)n=n.concat(this._model.data[this._data.core.selected[t]].parents);for(n=e.vakata.array_unique(n),t=0,i=n.length;i>t;t++)this.open_node(n[t],!1,0)}this.trigger("changed",{action:"ready",selected:this._data.core.selected})}this.trigger("ready")}},this),0))},this)).on("keypress.jstree",e.proxy(function(n){if("INPUT"===n.target.tagName)return!0;i&&clearTimeout(i),i=setTimeout(function(){t=""},500);var s=String.fromCharCode(n.which).toLowerCase(),o=this.element.find(".jstree-anchor").filter(":visible"),r=o.index(document.activeElement)||0,a=!1;if(t+=s,t.length>1){if(o.slice(r).each(e.proxy(function(i,n){return 0===e(n).text().toLowerCase().indexOf(t)?(e(n).focus(),a=!0,!1):void 0},this)),a)return;if(o.slice(0,r).each(e.proxy(function(i,n){return 0===e(n).text().toLowerCase().indexOf(t)?(e(n).focus(),a=!0,!1):void 0},this)),a)return}if(new RegExp("^"+s+"+$").test(t)){if(o.slice(r+1).each(e.proxy(function(t,i){return e(i).text().toLowerCase().charAt(0)===s?(e(i).focus(),a=!0,!1):void 0},this)),a)return;if(o.slice(0,r+1).each(e.proxy(function(t,i){return e(i).text().toLowerCase().charAt(0)===s?(e(i).focus(),a=!0,!1):void 0},this)),a)return}},this)).on("init.jstree",e.proxy(function(){var e=this.settings.core.themes;this._data.core.themes.dots=e.dots,this._data.core.themes.stripes=e.stripes,this._data.core.themes.icons=e.icons,this.set_theme(e.name||"default",e.url),this.set_theme_variant(e.variant)},this)).on("loading.jstree",e.proxy(function(){this[this._data.core.themes.dots?"show_dots":"hide_dots"](),this[this._data.core.themes.icons?"show_icons":"hide_icons"](),this[this._data.core.themes.stripes?"show_stripes":"hide_stripes"]()},this)).on("blur.jstree",".jstree-anchor",e.proxy(function(t){this._data.core.focused=null,e(t.currentTarget).filter(".jstree-hovered").mouseleave(),this.element.attr("tabindex","0")},this)).on("focus.jstree",".jstree-anchor",e.proxy(function(t){var i=this.get_node(t.currentTarget);i&&i.id&&(this._data.core.focused=i.id),this.element.find(".jstree-hovered").not(t.currentTarget).mouseleave(),e(t.currentTarget).mouseenter(),this.element.attr("tabindex","-1")},this)).on("focus.jstree",e.proxy(function(){+new Date-n>500&&!this._data.core.focused&&(n=0,this.get_node(this.element.attr("aria-activedescendant"),!0).find("> .jstree-anchor").focus())},this)).on("mouseenter.jstree",".jstree-anchor",e.proxy(function(e){this.hover_node(e.currentTarget)},this)).on("mouseleave.jstree",".jstree-anchor",e.proxy(function(e){this.dehover_node(e.currentTarget)},this))},unbind:function(){this.element.off(".jstree"),e(document).off(".jstree-"+this._id)},trigger:function(e,t){t||(t={}),t.instance=this,this.element.triggerHandler(e.replace(".jstree","")+".jstree",t)},get_container:function(){return this.element},get_container_ul:function(){return this.element.children(".jstree-children").first()},get_string:function(t){var i=this.settings.core.strings;return e.isFunction(i)?i.call(this,t):i&&i[t]?i[t]:t},_firstChild:function(e){for(e=e?e.firstChild:null;null!==e&&1!==e.nodeType;)e=e.nextSibling;return e},_nextSibling:function(e){for(e=e?e.nextSibling:null;null!==e&&1!==e.nodeType;)e=e.nextSibling;return e},_previousSibling:function(e){for(e=e?e.previousSibling:null;null!==e&&1!==e.nodeType;)e=e.previousSibling;return e},get_node:function(t,i){t&&t.id&&(t=t.id);var n;try{if(this._model.data[t])t=this._model.data[t];else if("string"==typeof t&&this._model.data[t.replace(/^#/,"")])t=this._model.data[t.replace(/^#/,"")];else if("string"==typeof t&&(n=e("#"+t.replace(e.jstree.idregex,"\\$&"),this.element)).length&&this._model.data[n.closest(".jstree-node").attr("id")])t=this._model.data[n.closest(".jstree-node").attr("id")];else if((n=e(t,this.element)).length&&this._model.data[n.closest(".jstree-node").attr("id")])t=this._model.data[n.closest(".jstree-node").attr("id")];else{if(!(n=e(t,this.element)).length||!n.hasClass("jstree"))return!1;t=this._model.data["#"]}return i&&(t="#"===t.id?this.element:e("#"+t.id.replace(e.jstree.idregex,"\\$&"),this.element)),t}catch(s){return!1}},get_path:function(e,t,i){if(e=e.parents?e:this.get_node(e),!e||"#"===e.id||!e.parents)return!1;var n,s,o=[];for(o.push(i?e.id:e.text),n=0,s=e.parents.length;s>n;n++)o.push(i?e.parents[n]:this.get_text(e.parents[n]));return o=o.reverse().slice(1),t?o.join(t):o},get_next_dom:function(t,i){var n;if(t=this.get_node(t,!0),t[0]===this.element[0]){for(n=this._firstChild(this.get_container_ul()[0]);n&&0===n.offsetHeight;)n=this._nextSibling(n);return n?e(n):!1}if(!t||!t.length)return!1;if(i){n=t[0];do n=this._nextSibling(n);while(n&&0===n.offsetHeight);return n?e(n):!1}if(t.hasClass("jstree-open")){for(n=this._firstChild(t.children(".jstree-children")[0]);n&&0===n.offsetHeight;)n=this._nextSibling(n);if(null!==n)return e(n)}n=t[0];do n=this._nextSibling(n);while(n&&0===n.offsetHeight);return null!==n?e(n):t.parentsUntil(".jstree",".jstree-node").next(".jstree-node:visible").first()},get_prev_dom:function(t,i){var n;if(t=this.get_node(t,!0),t[0]===this.element[0]){for(n=this.get_container_ul()[0].lastChild;n&&0===n.offsetHeight;)n=this._previousSibling(n);return n?e(n):!1}if(!t||!t.length)return!1;if(i){n=t[0];do n=this._previousSibling(n);while(n&&0===n.offsetHeight);return n?e(n):!1}n=t[0];do n=this._previousSibling(n);while(n&&0===n.offsetHeight);if(null!==n){for(t=e(n);t.hasClass("jstree-open");)t=t.children(".jstree-children").first().children(".jstree-node:visible:last");return t}return n=t[0].parentNode.parentNode,n&&n.className&&-1!==n.className.indexOf("jstree-node")?e(n):!1},get_parent:function(e){return e=this.get_node(e),e&&"#"!==e.id?e.parent:!1},get_children_dom:function(e){return e=this.get_node(e,!0),e[0]===this.element[0]?this.get_container_ul().children(".jstree-node"):e&&e.length?e.children(".jstree-children").children(".jstree-node"):!1},is_parent:function(e){return e=this.get_node(e),e&&(e.state.loaded===!1||e.children.length>0)},is_loaded:function(e){return e=this.get_node(e),e&&e.state.loaded},is_loading:function(e){return e=this.get_node(e),e&&e.state&&e.state.loading},is_open:function(e){return e=this.get_node(e),e&&e.state.opened},is_closed:function(e){return e=this.get_node(e),e&&this.is_parent(e)&&!e.state.opened},is_leaf:function(e){return!this.is_parent(e)},load_node:function(t,i){var n,s,o,r,a;if(e.isArray(t))return this._load_nodes(t.slice(),i),!0;if(t=this.get_node(t),!t)return i&&i.call(this,t,!1),!1;if(t.state.loaded){for(t.state.loaded=!1,n=0,s=t.children_d.length;s>n;n++){for(o=0,r=t.parents.length;r>o;o++)this._model.data[t.parents[o]].children_d=e.vakata.array_remove_item(this._model.data[t.parents[o]].children_d,t.children_d[n]);this._model.data[t.children_d[n]].state.selected&&(a=!0,this._data.core.selected=e.vakata.array_remove_item(this._data.core.selected,t.children_d[n])),delete this._model.data[t.children_d[n]]}t.children=[],t.children_d=[],a&&this.trigger("changed",{action:"load_node",node:t,selected:this._data.core.selected})}return t.state.loading=!0,this.get_node(t,!0).addClass("jstree-loading").attr("aria-busy",!0),this._load_node(t,e.proxy(function(e){t=this._model.data[t.id],t.state.loading=!1,t.state.loaded=e;var n=this.get_node(t,!0);t.state.loaded&&!t.children.length&&n&&n.length&&!n.hasClass("jstree-leaf")&&n.removeClass("jstree-closed jstree-open").addClass("jstree-leaf"),n.removeClass("jstree-loading").attr("aria-busy",!1),this.trigger("load_node",{node:t,status:e}),i&&i.call(this,t,e)},this)),!0},_load_nodes:function(e,t,i){var n,s,o=!0,r=function(){this._load_nodes(e,t,!0)},a=this._model.data;for(n=0,s=e.length;s>n;n++)!a[e[n]]||a[e[n]].state.loaded&&i||(this.is_loading(e[n])||this.load_node(e[n],r),o=!1);o&&t&&!t.done&&(t.call(this,e),t.done=!0)},load_all:function(e,t){if(e||(e="#"),e=this.get_node(e),!e)return!1;var i,n,s=[],o=this._model.data,r=o[e.id].children_d;for(e.state&&!e.state.loaded&&s.push(e.id),i=0,n=r.length;n>i;i++)o[r[i]]&&o[r[i]].state&&!o[r[i]].state.loaded&&s.push(r[i]);s.length?this._load_nodes(s,function(){this.load_all(e,t)}):(t&&t.call(this,e),this.trigger("load_all",{node:e}))},_load_node:function(t,i){var n,s=this.settings.core.data;return s?e.isFunction(s)?s.call(this,t,e.proxy(function(n){n===!1&&i.call(this,!1),this["string"==typeof n?"_append_html_data":"_append_json_data"](t,"string"==typeof n?e(n):n,function(e){i.call(this,e)})},this)):"object"==typeof s?s.url?(s=e.extend(!0,{},s),e.isFunction(s.url)&&(s.url=s.url.call(this,t)),e.isFunction(s.data)&&(s.data=s.data.call(this,t)),e.ajax(s).done(e.proxy(function(n,s,o){var r=o.getResponseHeader("Content-Type");return-1!==r.indexOf("json")||"object"==typeof n?this._append_json_data(t,n,function(e){i.call(this,e)}):-1!==r.indexOf("html")||"string"==typeof n?this._append_html_data(t,e(n),function(e){i.call(this,e)}):(this._data.core.last_error={error:"ajax",plugin:"core",id:"core_04",reason:"Could not load node",data:JSON.stringify({id:t.id,xhr:o})},this.settings.core.error.call(this,this._data.core.last_error),i.call(this,!1))},this)).fail(e.proxy(function(e){i.call(this,!1),this._data.core.last_error={error:"ajax",plugin:"core",id:"core_04",reason:"Could not load node",data:JSON.stringify({id:t.id,xhr:e})},this.settings.core.error.call(this,this._data.core.last_error)},this))):(n=e.isArray(s)||e.isPlainObject(s)?JSON.parse(JSON.stringify(s)):s,"#"===t.id?this._append_json_data(t,n,function(e){i.call(this,e)}):(this._data.core.last_error={error:"nodata",plugin:"core",id:"core_05",reason:"Could not load node",data:JSON.stringify({id:t.id})},this.settings.core.error.call(this,this._data.core.last_error),i.call(this,!1))):"string"==typeof s?"#"===t.id?this._append_html_data(t,e(s),function(e){i.call(this,e)}):(this._data.core.last_error={error:"nodata",plugin:"core",id:"core_06",reason:"Could not load node",data:JSON.stringify({id:t.id})},this.settings.core.error.call(this,this._data.core.last_error),i.call(this,!1)):i.call(this,!1):"#"===t.id?this._append_html_data(t,this._data.core.original_container_html.clone(!0),function(e){i.call(this,e)}):i.call(this,!1)},_node_changed:function(e){e=this.get_node(e),e&&this._model.changed.push(e.id)},_append_html_data:function(t,i,n){t=this.get_node(t),t.children=[],t.children_d=[];var s,o,r,a=i.is("ul")?i.children():i,l=t.id,c=[],d=[],h=this._model.data,u=h[l],p=this._data.core.selected.length;for(a.each(e.proxy(function(t,i){s=this._parse_model_from_html(e(i),l,u.parents.concat()),s&&(c.push(s),d.push(s),h[s].children_d.length&&(d=d.concat(h[s].children_d)))},this)),u.children=c,u.children_d=d,o=0,r=u.parents.length;r>o;o++)h[u.parents[o]].children_d=h[u.parents[o]].children_d.concat(d);this.trigger("model",{nodes:d,parent:l}),"#"!==l?(this._node_changed(l),this.redraw()):(this.get_container_ul().children(".jstree-initial-node").remove(),this.redraw(!0)),this._data.core.selected.length!==p&&this.trigger("changed",{action:"model",selected:this._data.core.selected}),n.call(this,!0)},_append_json_data:function(t,i,n,s){t=this.get_node(t),t.children=[],t.children_d=[],i.d&&(i=i.d,"string"==typeof i&&(i=JSON.parse(i))),e.isArray(i)||(i=[i]);var o=null,r={df:this._model.default_state,dat:i,par:t.id,m:this._model.data,t_id:this._id,t_cnt:this._cnt,sel:this._data.core.selected},a=function(e,t){e.data&&(e=e.data);var i,n,s,o,r=e.dat,a=e.par,l=[],c=[],d=[],h=e.df,u=e.t_id,p=e.t_cnt,f=e.m,m=f[a],g=e.sel,v=function(e,i,n){n=n?n.concat():[],i&&n.unshift(i);var s,o,r,a,l=e.id.toString(),c={id:l,text:e.text||"",icon:e.icon!==t?e.icon:!0,parent:i,parents:n,children:e.children||[],children_d:e.children_d||[],data:e.data,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(s in h)h.hasOwnProperty(s)&&(c.state[s]=h[s]);if(e&&e.data&&e.data.jstree&&e.data.jstree.icon&&(c.icon=e.data.jstree.icon),e&&e.data&&(c.data=e.data,e.data.jstree))for(s in e.data.jstree)e.data.jstree.hasOwnProperty(s)&&(c.state[s]=e.data.jstree[s]);if(e&&"object"==typeof e.state)for(s in e.state)e.state.hasOwnProperty(s)&&(c.state[s]=e.state[s]);if(e&&"object"==typeof e.li_attr)for(s in e.li_attr)e.li_attr.hasOwnProperty(s)&&(c.li_attr[s]=e.li_attr[s]);if(c.li_attr.id||(c.li_attr.id=l),e&&"object"==typeof e.a_attr)for(s in e.a_attr)e.a_attr.hasOwnProperty(s)&&(c.a_attr[s]=e.a_attr[s]);for(e&&e.children&&e.children===!0&&(c.state.loaded=!1,c.children=[],c.children_d=[]),f[c.id]=c,s=0,o=c.children.length;o>s;s++)r=v(f[c.children[s]],c.id,n),a=f[r],c.children_d.push(r),a.children_d.length&&(c.children_d=c.children_d.concat(a.children_d));return delete e.data,delete e.children,f[c.id].original=e,c.state.selected&&d.push(c.id),c.id},b=function(e,i,n){n=n?n.concat():[],i&&n.unshift(i);var s,o,r,a,l,c=!1;do c="j"+u+"_"+ ++p;while(f[c]);l={id:!1,text:"string"==typeof e?e:"",icon:"object"==typeof e&&e.icon!==t?e.icon:!0,parent:i,parents:n,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(s in h)h.hasOwnProperty(s)&&(l.state[s]=h[s]);if(e&&e.id&&(l.id=e.id.toString()),e&&e.text&&(l.text=e.text),e&&e.data&&e.data.jstree&&e.data.jstree.icon&&(l.icon=e.data.jstree.icon),e&&e.data&&(l.data=e.data,e.data.jstree))for(s in e.data.jstree)e.data.jstree.hasOwnProperty(s)&&(l.state[s]=e.data.jstree[s]);if(e&&"object"==typeof e.state)for(s in e.state)e.state.hasOwnProperty(s)&&(l.state[s]=e.state[s]);if(e&&"object"==typeof e.li_attr)for(s in e.li_attr)e.li_attr.hasOwnProperty(s)&&(l.li_attr[s]=e.li_attr[s]);if(l.li_attr.id&&!l.id&&(l.id=l.li_attr.id.toString()),l.id||(l.id=c),l.li_attr.id||(l.li_attr.id=l.id),e&&"object"==typeof e.a_attr)for(s in e.a_attr)e.a_attr.hasOwnProperty(s)&&(l.a_attr[s]=e.a_attr[s]);if(e&&e.children&&e.children.length){for(s=0,o=e.children.length;o>s;s++)r=b(e.children[s],l.id,n),a=f[r],l.children.push(r),a.children_d.length&&(l.children_d=l.children_d.concat(a.children_d));l.children_d=l.children_d.concat(l.children)}return e&&e.children&&e.children===!0&&(l.state.loaded=!1,l.children=[],l.children_d=[]),delete e.data,delete e.children,l.original=e,f[l.id]=l,l.state.selected&&d.push(l.id),l.id};if(r.length&&r[0].id!==t&&r[0].parent!==t){for(n=0,s=r.length;s>n;n++)r[n].children||(r[n].children=[]),f[r[n].id.toString()]=r[n];for(n=0,s=r.length;s>n;n++)f[r[n].parent.toString()].children.push(r[n].id.toString()),m.children_d.push(r[n].id.toString());for(n=0,s=m.children.length;s>n;n++)i=v(f[m.children[n]],a,m.parents.concat()),c.push(i),f[i].children_d.length&&(c=c.concat(f[i].children_d));for(n=0,s=m.parents.length;s>n;n++)f[m.parents[n]].children_d=f[m.parents[n]].children_d.concat(c);o={cnt:p,mod:f,sel:g,par:a,dpc:c,add:d}}else{for(n=0,s=r.length;s>n;n++)i=b(r[n],a,m.parents.concat()),i&&(l.push(i),c.push(i),f[i].children_d.length&&(c=c.concat(f[i].children_d)));for(m.children=l,m.children_d=c,n=0,s=m.parents.length;s>n;n++)f[m.parents[n]].children_d=f[m.parents[n]].children_d.concat(c);o={cnt:p,mod:f,sel:g,par:a,dpc:c,add:d}}return"undefined"!=typeof window&&"undefined"!=typeof window.document?o:void postMessage(o)},l=function(t,i){if(this._cnt=t.cnt,this._model.data=t.mod,i){var s,o,r=t.add,a=t.sel,l=this._data.core.selected.slice(),c=this._model.data;if(a.length!==l.length||e.vakata.array_unique(a.concat(l)).length!==a.length){for(s=0,o=a.length;o>s;s++)-1===e.inArray(a[s],r)&&-1===e.inArray(a[s],l)&&(c[a[s]].state.selected=!1);for(s=0,o=l.length;o>s;s++)-1===e.inArray(l[s],a)&&(c[l[s]].state.selected=!0)}}t.add.length&&(this._data.core.selected=this._data.core.selected.concat(t.add)),this.trigger("model",{nodes:t.dpc,parent:t.par}),"#"!==t.par?(this._node_changed(t.par),this.redraw()):this.redraw(!0),t.add.length&&this.trigger("changed",{action:"model",selected:this._data.core.selected}),n.call(this,!0)};if(this.settings.core.worker&&window.Blob&&window.URL&&window.Worker)try{null===this._wrk&&(this._wrk=window.URL.createObjectURL(new window.Blob(["self.onmessage = "+a.toString()],{type:"text/javascript"}))),!this._data.core.working||s?(this._data.core.working=!0,o=new window.Worker(this._wrk),o.onmessage=e.proxy(function(e){l.call(this,e.data,!0);try{o.terminate(),o=null}catch(t){}this._data.core.worker_queue.length?this._append_json_data.apply(this,this._data.core.worker_queue.shift()):this._data.core.working=!1},this),r.par?o.postMessage(r):this._data.core.worker_queue.length?this._append_json_data.apply(this,this._data.core.worker_queue.shift()):this._data.core.working=!1):this._data.core.worker_queue.push([t,i,n,!0])}catch(c){l.call(this,a(r),!1),this._data.core.worker_queue.length?this._append_json_data.apply(this,this._data.core.worker_queue.shift()):this._data.core.working=!1}else l.call(this,a(r),!1)},_parse_model_from_html:function(t,i,n){n=n?[].concat(n):[],i&&n.unshift(i);var s,o,r,a,l,c=this._model.data,d={id:!1,text:!1,icon:!0,parent:i,parents:n,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(r in this._model.default_state)this._model.default_state.hasOwnProperty(r)&&(d.state[r]=this._model.default_state[r]);if(a=e.vakata.attributes(t,!0),e.each(a,function(t,i){return i=e.trim(i),i.length?(d.li_attr[t]=i,void("id"===t&&(d.id=i.toString()))):!0}),a=t.children("a").first(),a.length&&(a=e.vakata.attributes(a,!0),e.each(a,function(t,i){i=e.trim(i),i.length&&(d.a_attr[t]=i)})),a=t.children("a").first().length?t.children("a").first().clone():t.clone(),a.children("ins, i, ul").remove(),a=a.html(),a=e("<div />").html(a),d.text=this.settings.core.force_text?a.text():a.html(),a=t.data(),d.data=a?e.extend(!0,{},a):null,d.state.opened=t.hasClass("jstree-open"),d.state.selected=t.children("a").hasClass("jstree-clicked"),d.state.disabled=t.children("a").hasClass("jstree-disabled"),d.data&&d.data.jstree)for(r in d.data.jstree)d.data.jstree.hasOwnProperty(r)&&(d.state[r]=d.data.jstree[r]);a=t.children("a").children(".jstree-themeicon"),a.length&&(d.icon=a.hasClass("jstree-themeicon-hidden")?!1:a.attr("rel")),d.state.icon&&(d.icon=d.state.icon),a=t.children("ul").children("li");do l="j"+this._id+"_"+ ++this._cnt;while(c[l]);return d.id=d.li_attr.id?d.li_attr.id.toString():l,a.length?(a.each(e.proxy(function(t,i){s=this._parse_model_from_html(e(i),d.id,n),o=this._model.data[s],d.children.push(s),o.children_d.length&&(d.children_d=d.children_d.concat(o.children_d))},this)),d.children_d=d.children_d.concat(d.children)):t.hasClass("jstree-closed")&&(d.state.loaded=!1),d.li_attr["class"]&&(d.li_attr["class"]=d.li_attr["class"].replace("jstree-closed","").replace("jstree-open","")),d.a_attr["class"]&&(d.a_attr["class"]=d.a_attr["class"].replace("jstree-clicked","").replace("jstree-disabled","")),c[d.id]=d,d.state.selected&&this._data.core.selected.push(d.id),d.id},_parse_model_from_flat_json:function(e,i,n){n=n?n.concat():[],i&&n.unshift(i);var s,o,r,a,l=e.id.toString(),c=this._model.data,d=this._model.default_state,h={id:l,text:e.text||"",icon:e.icon!==t?e.icon:!0,parent:i,parents:n,children:e.children||[],children_d:e.children_d||[],data:e.data,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(s in d)d.hasOwnProperty(s)&&(h.state[s]=d[s]);if(e&&e.data&&e.data.jstree&&e.data.jstree.icon&&(h.icon=e.data.jstree.icon),e&&e.data&&(h.data=e.data,e.data.jstree))for(s in e.data.jstree)e.data.jstree.hasOwnProperty(s)&&(h.state[s]=e.data.jstree[s]);if(e&&"object"==typeof e.state)for(s in e.state)e.state.hasOwnProperty(s)&&(h.state[s]=e.state[s]);if(e&&"object"==typeof e.li_attr)for(s in e.li_attr)e.li_attr.hasOwnProperty(s)&&(h.li_attr[s]=e.li_attr[s]);if(h.li_attr.id||(h.li_attr.id=l),e&&"object"==typeof e.a_attr)for(s in e.a_attr)e.a_attr.hasOwnProperty(s)&&(h.a_attr[s]=e.a_attr[s]);for(e&&e.children&&e.children===!0&&(h.state.loaded=!1,h.children=[],h.children_d=[]),c[h.id]=h,s=0,o=h.children.length;o>s;s++)r=this._parse_model_from_flat_json(c[h.children[s]],h.id,n),a=c[r],h.children_d.push(r),a.children_d.length&&(h.children_d=h.children_d.concat(a.children_d));return delete e.data,delete e.children,c[h.id].original=e,h.state.selected&&this._data.core.selected.push(h.id),h.id},_parse_model_from_json:function(e,i,n){n=n?n.concat():[],i&&n.unshift(i);var s,o,r,a,l,c=!1,d=this._model.data,h=this._model.default_state;do c="j"+this._id+"_"+ ++this._cnt;while(d[c]);l={id:!1,text:"string"==typeof e?e:"",icon:"object"==typeof e&&e.icon!==t?e.icon:!0,parent:i,parents:n,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(s in h)h.hasOwnProperty(s)&&(l.state[s]=h[s]);if(e&&e.id&&(l.id=e.id.toString()),e&&e.text&&(l.text=e.text),e&&e.data&&e.data.jstree&&e.data.jstree.icon&&(l.icon=e.data.jstree.icon),e&&e.data&&(l.data=e.data,e.data.jstree))for(s in e.data.jstree)e.data.jstree.hasOwnProperty(s)&&(l.state[s]=e.data.jstree[s]);if(e&&"object"==typeof e.state)for(s in e.state)e.state.hasOwnProperty(s)&&(l.state[s]=e.state[s]);if(e&&"object"==typeof e.li_attr)for(s in e.li_attr)e.li_attr.hasOwnProperty(s)&&(l.li_attr[s]=e.li_attr[s]);if(l.li_attr.id&&!l.id&&(l.id=l.li_attr.id.toString()),l.id||(l.id=c),l.li_attr.id||(l.li_attr.id=l.id),e&&"object"==typeof e.a_attr)for(s in e.a_attr)e.a_attr.hasOwnProperty(s)&&(l.a_attr[s]=e.a_attr[s]);if(e&&e.children&&e.children.length){for(s=0,o=e.children.length;o>s;s++)r=this._parse_model_from_json(e.children[s],l.id,n),a=d[r],l.children.push(r),a.children_d.length&&(l.children_d=l.children_d.concat(a.children_d));l.children_d=l.children_d.concat(l.children)}return e&&e.children&&e.children===!0&&(l.state.loaded=!1,l.children=[],l.children_d=[]),delete e.data,delete e.children,l.original=e,d[l.id]=l,l.state.selected&&this._data.core.selected.push(l.id),l.id},_redraw:function(){var e,t,i,n=this._model.force_full_redraw?this._model.data["#"].children.concat([]):this._model.changed.concat([]),s=document.createElement("UL"),o=this._data.core.focused;for(t=0,i=n.length;i>t;t++)e=this.redraw_node(n[t],!0,this._model.force_full_redraw),e&&this._model.force_full_redraw&&s.appendChild(e);this._model.force_full_redraw&&(s.className=this.get_container_ul()[0].className,s.setAttribute("role","group"),this.element.empty().append(s)),null!==o&&(e=this.get_node(o,!0),e&&e.length&&e.children(".jstree-anchor")[0]!==document.activeElement?e.children(".jstree-anchor").focus():this._data.core.focused=null),this._model.force_full_redraw=!1,this._model.changed=[],this.trigger("redraw",{nodes:n})},redraw:function(e){e&&(this._model.force_full_redraw=!0),this._redraw()},draw_children:function(e){var t=this.get_node(e),i=!1,n=!1,s=!1,o=document;if(!t)return!1;if("#"===t.id)return this.redraw(!0);if(e=this.get_node(e,!0),!e||!e.length)return!1;if(e.children(".jstree-children").remove(),e=e[0],t.children.length&&t.state.loaded){for(s=o.createElement("UL"),s.setAttribute("role","group"),s.className="jstree-children",i=0,n=t.children.length;n>i;i++)s.appendChild(this.redraw_node(t.children[i],!0,!0));e.appendChild(s)}},redraw_node:function(t,i,n,s){var o=this.get_node(t),r=!1,a=!1,l=!1,c=!1,d=!1,u=!1,p="",f=document,m=this._model.data,g=!1,v=null,b=0,y=0;if(!o)return!1;if("#"===o.id)return this.redraw(!0);if(i=i||0===o.children.length,t=document.querySelector?this.element[0].querySelector("#"+(-1!=="0123456789".indexOf(o.id[0])?"\\3"+o.id[0]+" "+o.id.substr(1).replace(e.jstree.idregex,"\\$&"):o.id.replace(e.jstree.idregex,"\\$&"))):document.getElementById(o.id))t=e(t),n||(r=t.parent().parent()[0],r===this.element[0]&&(r=null),a=t.index()),i||!o.children.length||t.children(".jstree-children").length||(i=!0),i||(l=t.children(".jstree-children")[0]),g=t.children(".jstree-anchor")[0]===document.activeElement,t.remove();else if(i=!0,!n){if(r="#"!==o.parent?e("#"+o.parent.replace(e.jstree.idregex,"\\$&"),this.element)[0]:null,!(null===r||r&&m[o.parent].state.opened))return!1;a=e.inArray(o.id,null===r?m["#"].children:m[o.parent].children)}t=h.cloneNode(!0),p="jstree-node ";for(c in o.li_attr)if(o.li_attr.hasOwnProperty(c)){if("id"===c)continue;"class"!==c?t.setAttribute(c,o.li_attr[c]):p+=o.li_attr[c]}o.a_attr.id||(o.a_attr.id=o.id+"_anchor"),t.setAttribute("aria-selected",!!o.state.selected),t.setAttribute("aria-level",o.parents.length),t.setAttribute("aria-labelledby",o.a_attr.id),o.state.disabled&&t.setAttribute("aria-disabled",!0),o.state.loaded&&!o.children.length?p+=" jstree-leaf":(p+=o.state.opened&&o.state.loaded?" jstree-open":" jstree-closed",t.setAttribute("aria-expanded",o.state.opened&&o.state.loaded)),null!==o.parent&&m[o.parent].children[m[o.parent].children.length-1]===o.id&&(p+=" jstree-last"),t.id=o.id,t.className=p,p=(o.state.selected?" jstree-clicked":"")+(o.state.disabled?" jstree-disabled":"");for(d in o.a_attr)if(o.a_attr.hasOwnProperty(d)){if("href"===d&&"#"===o.a_attr[d])continue;"class"!==d?t.childNodes[1].setAttribute(d,o.a_attr[d]):p+=" "+o.a_attr[d]}if(p.length&&(t.childNodes[1].className="jstree-anchor "+p),(o.icon&&o.icon!==!0||o.icon===!1)&&(o.icon===!1?t.childNodes[1].childNodes[0].className+=" jstree-themeicon-hidden":-1===o.icon.indexOf("/")&&-1===o.icon.indexOf(".")?t.childNodes[1].childNodes[0].className+=" "+o.icon+" jstree-themeicon-custom":(t.childNodes[1].childNodes[0].style.backgroundImage="url("+o.icon+")",t.childNodes[1].childNodes[0].style.backgroundPosition="center center",t.childNodes[1].childNodes[0].style.backgroundSize="auto",t.childNodes[1].childNodes[0].className+=" jstree-themeicon-custom")),this.settings.core.force_text?t.childNodes[1].appendChild(f.createTextNode(o.text)):t.childNodes[1].innerHTML+=o.text,i&&o.children.length&&(o.state.opened||s)&&o.state.loaded){for(u=f.createElement("UL"),u.setAttribute("role","group"),
u.className="jstree-children",c=0,d=o.children.length;d>c;c++)u.appendChild(this.redraw_node(o.children[c],i,!0));t.appendChild(u)}if(l&&t.appendChild(l),!n){for(r||(r=this.element[0]),c=0,d=r.childNodes.length;d>c;c++)if(r.childNodes[c]&&r.childNodes[c].className&&-1!==r.childNodes[c].className.indexOf("jstree-children")){v=r.childNodes[c];break}v||(v=f.createElement("UL"),v.setAttribute("role","group"),v.className="jstree-children",r.appendChild(v)),r=v,a<r.childNodes.length?r.insertBefore(t,r.childNodes[a]):r.appendChild(t),g&&(b=this.element[0].scrollTop,y=this.element[0].scrollLeft,t.childNodes[1].focus(),this.element[0].scrollTop=b,this.element[0].scrollLeft=y)}return o.state.opened&&!o.state.loaded&&(o.state.opened=!1,setTimeout(e.proxy(function(){this.open_node(o.id,!1,0)},this),0)),t},open_node:function(i,n,s){var o,r,a,l;if(e.isArray(i)){for(i=i.slice(),o=0,r=i.length;r>o;o++)this.open_node(i[o],n,s);return!0}if(i=this.get_node(i),!i||"#"===i.id)return!1;if(s=s===t?this.settings.core.animation:s,!this.is_closed(i))return n&&n.call(this,i,!1),!1;if(this.is_loaded(i))a=this.get_node(i,!0),l=this,a.length&&(s&&a.children(".jstree-children").length&&a.children(".jstree-children").stop(!0,!0),i.children.length&&!this._firstChild(a.children(".jstree-children")[0])&&this.draw_children(i),s?(this.trigger("before_open",{node:i}),a.children(".jstree-children").css("display","none").end().removeClass("jstree-closed").addClass("jstree-open").attr("aria-expanded",!0).children(".jstree-children").stop(!0,!0).slideDown(s,function(){this.style.display="",l.trigger("after_open",{node:i})})):(this.trigger("before_open",{node:i}),a[0].className=a[0].className.replace("jstree-closed","jstree-open"),a[0].setAttribute("aria-expanded",!0))),i.state.opened=!0,n&&n.call(this,i,!0),a.length||this.trigger("before_open",{node:i}),this.trigger("open_node",{node:i}),s&&a.length||this.trigger("after_open",{node:i});else{if(this.is_loading(i))return setTimeout(e.proxy(function(){this.open_node(i,n,s)},this),500);this.load_node(i,function(e,t){return t?this.open_node(e,n,s):n?n.call(this,e,!1):!1})}},_open_to:function(t){if(t=this.get_node(t),!t||"#"===t.id)return!1;var i,n,s=t.parents;for(i=0,n=s.length;n>i;i+=1)"#"!==i&&this.open_node(s[i],!1,0);return e("#"+t.id.replace(e.jstree.idregex,"\\$&"),this.element)},close_node:function(i,n){var s,o,r,a;if(e.isArray(i)){for(i=i.slice(),s=0,o=i.length;o>s;s++)this.close_node(i[s],n);return!0}return i=this.get_node(i),i&&"#"!==i.id?this.is_closed(i)?!1:(n=n===t?this.settings.core.animation:n,r=this,a=this.get_node(i,!0),a.length&&(n?a.children(".jstree-children").attr("style","display:block !important").end().removeClass("jstree-open").addClass("jstree-closed").attr("aria-expanded",!1).children(".jstree-children").stop(!0,!0).slideUp(n,function(){this.style.display="",a.children(".jstree-children").remove(),r.trigger("after_close",{node:i})}):(a[0].className=a[0].className.replace("jstree-open","jstree-closed"),a.attr("aria-expanded",!1).children(".jstree-children").remove())),i.state.opened=!1,this.trigger("close_node",{node:i}),void(n&&a.length||this.trigger("after_close",{node:i}))):!1},toggle_node:function(t){var i,n;if(e.isArray(t)){for(t=t.slice(),i=0,n=t.length;n>i;i++)this.toggle_node(t[i]);return!0}return this.is_closed(t)?this.open_node(t):this.is_open(t)?this.close_node(t):void 0},open_all:function(e,t,i){if(e||(e="#"),e=this.get_node(e),!e)return!1;var n,s,o,r="#"===e.id?this.get_container_ul():this.get_node(e,!0);if(!r.length){for(n=0,s=e.children_d.length;s>n;n++)this.is_closed(this._model.data[e.children_d[n]])&&(this._model.data[e.children_d[n]].state.opened=!0);return this.trigger("open_all",{node:e})}i=i||r,o=this,r=this.is_closed(e)?r.find(".jstree-closed").addBack():r.find(".jstree-closed"),r.each(function(){o.open_node(this,function(e,n){n&&this.is_parent(e)&&this.open_all(e,t,i)},t||0)}),0===i.find(".jstree-closed").length&&this.trigger("open_all",{node:this.get_node(i)})},close_all:function(t,i){if(t||(t="#"),t=this.get_node(t),!t)return!1;var n,s,o="#"===t.id?this.get_container_ul():this.get_node(t,!0),r=this;if(!o.length){for(n=0,s=t.children_d.length;s>n;n++)this._model.data[t.children_d[n]].state.opened=!1;return this.trigger("close_all",{node:t})}o=this.is_open(t)?o.find(".jstree-open").addBack():o.find(".jstree-open"),e(o.get().reverse()).each(function(){r.close_node(this,i||0)}),this.trigger("close_all",{node:t})},is_disabled:function(e){return e=this.get_node(e),e&&e.state&&e.state.disabled},enable_node:function(t){var i,n;if(e.isArray(t)){for(t=t.slice(),i=0,n=t.length;n>i;i++)this.enable_node(t[i]);return!0}return t=this.get_node(t),t&&"#"!==t.id?(t.state.disabled=!1,this.get_node(t,!0).children(".jstree-anchor").removeClass("jstree-disabled").attr("aria-disabled",!1),void this.trigger("enable_node",{node:t})):!1},disable_node:function(t){var i,n;if(e.isArray(t)){for(t=t.slice(),i=0,n=t.length;n>i;i++)this.disable_node(t[i]);return!0}return t=this.get_node(t),t&&"#"!==t.id?(t.state.disabled=!0,this.get_node(t,!0).children(".jstree-anchor").addClass("jstree-disabled").attr("aria-disabled",!0),void this.trigger("disable_node",{node:t})):!1},activate_node:function(e,i){if(this.is_disabled(e))return!1;if(this._data.core.last_clicked=this._data.core.last_clicked&&this._data.core.last_clicked.id!==t?this.get_node(this._data.core.last_clicked.id):null,this._data.core.last_clicked&&!this._data.core.last_clicked.state.selected&&(this._data.core.last_clicked=null),!this._data.core.last_clicked&&this._data.core.selected.length&&(this._data.core.last_clicked=this.get_node(this._data.core.selected[this._data.core.selected.length-1])),this.settings.core.multiple&&(i.metaKey||i.ctrlKey||i.shiftKey)&&(!i.shiftKey||this._data.core.last_clicked&&this.get_parent(e)&&this.get_parent(e)===this._data.core.last_clicked.parent))if(i.shiftKey){var n,s,o=this.get_node(e).id,r=this._data.core.last_clicked.id,a=this.get_node(this._data.core.last_clicked.parent).children,l=!1;for(n=0,s=a.length;s>n;n+=1)a[n]===o&&(l=!l),a[n]===r&&(l=!l),l||a[n]===o||a[n]===r?this.select_node(a[n],!0,!1,i):this.deselect_node(a[n],!0,i);this.trigger("changed",{action:"select_node",node:this.get_node(e),selected:this._data.core.selected,event:i})}else this.is_selected(e)?this.deselect_node(e,!1,i):this.select_node(e,!1,!1,i);else!this.settings.core.multiple&&(i.metaKey||i.ctrlKey||i.shiftKey)&&this.is_selected(e)?this.deselect_node(e,!1,i):(this.deselect_all(!0),this.select_node(e,!1,!1,i),this._data.core.last_clicked=this.get_node(e));this.trigger("activate_node",{node:this.get_node(e)})},hover_node:function(e){if(e=this.get_node(e,!0),!e||!e.length||e.children(".jstree-hovered").length)return!1;var t=this.element.find(".jstree-hovered"),i=this.element;t&&t.length&&this.dehover_node(t),e.children(".jstree-anchor").addClass("jstree-hovered"),this.trigger("hover_node",{node:this.get_node(e)}),setTimeout(function(){i.attr("aria-activedescendant",e[0].id)},0)},dehover_node:function(e){return e=this.get_node(e,!0),e&&e.length&&e.children(".jstree-hovered").length?(e.children(".jstree-anchor").removeClass("jstree-hovered"),void this.trigger("dehover_node",{node:this.get_node(e)})):!1},select_node:function(t,i,n,s){var o,r,a;if(e.isArray(t)){for(t=t.slice(),r=0,a=t.length;a>r;r++)this.select_node(t[r],i,n,s);return!0}return t=this.get_node(t),t&&"#"!==t.id?(o=this.get_node(t,!0),void(t.state.selected||(t.state.selected=!0,this._data.core.selected.push(t.id),n||(o=this._open_to(t)),o&&o.length&&o.attr("aria-selected",!0).children(".jstree-anchor").addClass("jstree-clicked"),this.trigger("select_node",{node:t,selected:this._data.core.selected,event:s}),i||this.trigger("changed",{action:"select_node",node:t,selected:this._data.core.selected,event:s})))):!1},deselect_node:function(t,i,n){var s,o,r;if(e.isArray(t)){for(t=t.slice(),s=0,o=t.length;o>s;s++)this.deselect_node(t[s],i,n);return!0}return t=this.get_node(t),t&&"#"!==t.id?(r=this.get_node(t,!0),void(t.state.selected&&(t.state.selected=!1,this._data.core.selected=e.vakata.array_remove_item(this._data.core.selected,t.id),r.length&&r.attr("aria-selected",!1).children(".jstree-anchor").removeClass("jstree-clicked"),this.trigger("deselect_node",{node:t,selected:this._data.core.selected,event:n}),i||this.trigger("changed",{action:"deselect_node",node:t,selected:this._data.core.selected,event:n})))):!1},select_all:function(e){var t,i,n=this._data.core.selected.concat([]);for(this._data.core.selected=this._model.data["#"].children_d.concat(),t=0,i=this._data.core.selected.length;i>t;t++)this._model.data[this._data.core.selected[t]]&&(this._model.data[this._data.core.selected[t]].state.selected=!0);this.redraw(!0),this.trigger("select_all",{selected:this._data.core.selected}),e||this.trigger("changed",{action:"select_all",selected:this._data.core.selected,old_selection:n})},deselect_all:function(e){var t,i,n=this._data.core.selected.concat([]);for(t=0,i=this._data.core.selected.length;i>t;t++)this._model.data[this._data.core.selected[t]]&&(this._model.data[this._data.core.selected[t]].state.selected=!1);this._data.core.selected=[],this.element.find(".jstree-clicked").removeClass("jstree-clicked").parent().attr("aria-selected",!1),this.trigger("deselect_all",{selected:this._data.core.selected,node:n}),e||this.trigger("changed",{action:"deselect_all",selected:this._data.core.selected,old_selection:n})},is_selected:function(e){return e=this.get_node(e),e&&"#"!==e.id?e.state.selected:!1},get_selected:function(t){return t?e.map(this._data.core.selected,e.proxy(function(e){return this.get_node(e)},this)):this._data.core.selected.slice()},get_top_selected:function(t){var i,n,s,o,r=this.get_selected(!0),a={};for(i=0,n=r.length;n>i;i++)a[r[i].id]=r[i];for(i=0,n=r.length;n>i;i++)for(s=0,o=r[i].children_d.length;o>s;s++)a[r[i].children_d[s]]&&delete a[r[i].children_d[s]];r=[];for(i in a)a.hasOwnProperty(i)&&r.push(i);return t?e.map(r,e.proxy(function(e){return this.get_node(e)},this)):r},get_bottom_selected:function(t){var i,n,s=this.get_selected(!0),o=[];for(i=0,n=s.length;n>i;i++)s[i].children.length||o.push(s[i].id);return t?e.map(o,e.proxy(function(e){return this.get_node(e)},this)):o},get_state:function(){var e,t={core:{open:[],scroll:{left:this.element.scrollLeft(),top:this.element.scrollTop()},/*!
					'themes' : {
						'name' : this.get_theme(),
						'icons' : this._data.core.themes.icons,
						'dots' : this._data.core.themes.dots
					},
					*/
selected:[]}};for(e in this._model.data)this._model.data.hasOwnProperty(e)&&"#"!==e&&(this._model.data[e].state.opened&&t.core.open.push(e),this._model.data[e].state.selected&&t.core.selected.push(e));return t},set_state:function(i,n){if(i){if(i.core){var s,o,r,a;if(i.core.open)return e.isArray(i.core.open)?(s=!0,o=!1,r=this,e.each(i.core.open.concat([]),function(t,a){o=r.get_node(a),o&&(r.is_loaded(a)?(r.is_closed(a)&&r.open_node(a,!1,0),i&&i.core&&i.core.open&&e.vakata.array_remove_item(i.core.open,a)):(r.is_loading(a)||r.open_node(a,e.proxy(function(t,s){!s&&i&&i.core&&i.core.open&&e.vakata.array_remove_item(i.core.open,t.id),this.set_state(i,n)},r),0),s=!1))}),s&&(delete i.core.open,this.set_state(i,n)),!1):(delete i.core.open,this.set_state(i,n),!1);if(i.core.scroll)return i.core.scroll&&i.core.scroll.left!==t&&this.element.scrollLeft(i.core.scroll.left),i.core.scroll&&i.core.scroll.top!==t&&this.element.scrollTop(i.core.scroll.top),delete i.core.scroll,this.set_state(i,n),!1;/*!
					if(state.core.themes) {
						if(state.core.themes.name) {
							this.set_theme(state.core.themes.name);
						}
						if(typeof state.core.themes.dots !== 'undefined') {
							this[ state.core.themes.dots ? "show_dots" : "hide_dots" ]();
						}
						if(typeof state.core.themes.icons !== 'undefined') {
							this[ state.core.themes.icons ? "show_icons" : "hide_icons" ]();
						}
						delete state.core.themes;
						delete state.core.open;
						this.set_state(state, callback);
						return false;
					}
					*/
if(i.core.selected)return a=this,this.deselect_all(),e.each(i.core.selected,function(e,t){a.select_node(t)}),delete i.core.selected,this.set_state(i,n),!1;if(e.isEmptyObject(i.core))return delete i.core,this.set_state(i,n),!1}return e.isEmptyObject(i)?(i=null,n&&n.call(this),this.trigger("set_state"),!1):!0}return!1},refresh:function(t,i){this._data.core.state=i===!0?{}:this.get_state(),i&&e.isFunction(i)&&(this._data.core.state=i.call(this,this._data.core.state)),this._cnt=0,this._model.data={"#":{id:"#",parent:null,parents:[],children:[],children_d:[],state:{loaded:!1}}};var n=this.get_container_ul()[0].className;t||(this.element.html("<ul class='"+n+"' role='group'><li class='jstree-initial-node jstree-loading jstree-leaf jstree-last' role='treeitem' id='j"+this._id+"_loading'><i class='jstree-icon jstree-ocl'></i><a class='jstree-anchor' href='#'><i class='jstree-icon jstree-themeicon-hidden'></i>"+this.get_string("Loading ...")+"</a></li></ul>"),this.element.attr("aria-activedescendant","j"+this._id+"_loading")),this.load_node("#",function(t,i){i&&(this.get_container_ul()[0].className=n,this._firstChild(this.get_container_ul()[0])&&this.element.attr("aria-activedescendant",this._firstChild(this.get_container_ul()[0]).id),this.set_state(e.extend(!0,{},this._data.core.state),function(){this.trigger("refresh")})),this._data.core.state=null})},refresh_node:function(t){if(t=this.get_node(t),!t||"#"===t.id)return!1;var i=[],n=[];this._data.core.selected.concat([]);n.push(t.id),t.state.opened===!0&&i.push(t.id),this.get_node(t,!0).find(".jstree-open").each(function(){i.push(this.id)}),this._load_nodes(n,e.proxy(function(e){this.open_node(i,!1,0),this.select_node(this._data.core.selected),this.trigger("refresh_node",{node:t,nodes:e})},this))},set_id:function(t,i){if(t=this.get_node(t),!t||"#"===t.id)return!1;var n,s,o=this._model.data;for(i=i.toString(),o[t.parent].children[e.inArray(t.id,o[t.parent].children)]=i,n=0,s=t.parents.length;s>n;n++)o[t.parents[n]].children_d[e.inArray(t.id,o[t.parents[n]].children_d)]=i;for(n=0,s=t.children.length;s>n;n++)o[t.children[n]].parent=i;for(n=0,s=t.children_d.length;s>n;n++)o[t.children_d[n]].parents[e.inArray(t.id,o[t.children_d[n]].parents)]=i;return n=e.inArray(t.id,this._data.core.selected),-1!==n&&(this._data.core.selected[n]=i),n=this.get_node(t.id,!0),n&&n.attr("id",i),delete o[t.id],t.id=i,o[i]=t,!0},get_text:function(e){return e=this.get_node(e),e&&"#"!==e.id?e.text:!1},set_text:function(t,i){var n,s;if(e.isArray(t)){for(t=t.slice(),n=0,s=t.length;s>n;n++)this.set_text(t[n],i);return!0}return t=this.get_node(t),t&&"#"!==t.id?(t.text=i,this.get_node(t,!0).length&&this.redraw_node(t.id),this.trigger("set_text",{obj:t,text:i}),!0):!1},get_json:function(t,i,n){if(t=this.get_node(t||"#"),!t)return!1;i&&i.flat&&!n&&(n=[]);var s,o,r={id:t.id,text:t.text,icon:this.get_icon(t),li_attr:e.extend(!0,{},t.li_attr),a_attr:e.extend(!0,{},t.a_attr),state:{},data:i&&i.no_data?!1:e.extend(!0,{},t.data)};if(i&&i.flat?r.parent=t.parent:r.children=[],!i||!i.no_state)for(s in t.state)t.state.hasOwnProperty(s)&&(r.state[s]=t.state[s]);if(i&&i.no_id&&(delete r.id,r.li_attr&&r.li_attr.id&&delete r.li_attr.id,r.a_attr&&r.a_attr.id&&delete r.a_attr.id),i&&i.flat&&"#"!==t.id&&n.push(r),!i||!i.no_children)for(s=0,o=t.children.length;o>s;s++)i&&i.flat?this.get_json(t.children[s],i,n):r.children.push(this.get_json(t.children[s],i));return i&&i.flat?n:"#"===t.id?r.children:r},create_node:function(i,n,s,o,r){if(null===i&&(i="#"),i=this.get_node(i),!i)return!1;if(s=s===t?"last":s,!s.toString().match(/^(before|after)$/)&&!r&&!this.is_loaded(i))return this.load_node(i,function(){this.create_node(i,n,s,o,!0)});n||(n={text:this.get_string("New node")}),"string"==typeof n&&(n={text:n}),n.text===t&&(n.text=this.get_string("New node"));var a,l,c,d;switch("#"===i.id&&("before"===s&&(s="first"),"after"===s&&(s="last")),s){case"before":a=this.get_node(i.parent),s=e.inArray(i.id,a.children),i=a;break;case"after":a=this.get_node(i.parent),s=e.inArray(i.id,a.children)+1,i=a;break;case"inside":case"first":s=0;break;case"last":s=i.children.length;break;default:s||(s=0)}if(s>i.children.length&&(s=i.children.length),n.id||(n.id=!0),!this.check("create_node",n,i,s))return this.settings.core.error.call(this,this._data.core.last_error),!1;if(n.id===!0&&delete n.id,n=this._parse_model_from_json(n,i.id,i.parents.concat()),!n)return!1;for(a=this.get_node(n),l=[],l.push(n),l=l.concat(a.children_d),this.trigger("model",{nodes:l,parent:i.id}),i.children_d=i.children_d.concat(l),c=0,d=i.parents.length;d>c;c++)this._model.data[i.parents[c]].children_d=this._model.data[i.parents[c]].children_d.concat(l);for(n=a,a=[],c=0,d=i.children.length;d>c;c++)a[c>=s?c+1:c]=i.children[c];return a[s]=n.id,i.children=a,this.redraw_node(i,!0),o&&o.call(this,this.get_node(n)),this.trigger("create_node",{node:this.get_node(n),parent:i.id,position:s}),n.id},rename_node:function(t,i){var n,s,o;if(e.isArray(t)){for(t=t.slice(),n=0,s=t.length;s>n;n++)this.rename_node(t[n],i);return!0}return t=this.get_node(t),t&&"#"!==t.id?(o=t.text,this.check("rename_node",t,this.get_parent(t),i)?(this.set_text(t,i),this.trigger("rename_node",{node:t,text:i,old:o}),!0):(this.settings.core.error.call(this,this._data.core.last_error),!1)):!1},delete_node:function(t){var i,n,s,o,r,a,l,c,d,h;if(e.isArray(t)){for(t=t.slice(),i=0,n=t.length;n>i;i++)this.delete_node(t[i]);return!0}if(t=this.get_node(t),!t||"#"===t.id)return!1;if(s=this.get_node(t.parent),o=e.inArray(t.id,s.children),h=!1,!this.check("delete_node",t,s,o))return this.settings.core.error.call(this,this._data.core.last_error),!1;for(-1!==o&&(s.children=e.vakata.array_remove(s.children,o)),r=t.children_d.concat([]),r.push(t.id),c=0,d=r.length;d>c;c++){for(a=0,l=t.parents.length;l>a;a++)o=e.inArray(r[c],this._model.data[t.parents[a]].children_d),-1!==o&&(this._model.data[t.parents[a]].children_d=e.vakata.array_remove(this._model.data[t.parents[a]].children_d,o));this._model.data[r[c]].state.selected&&(h=!0,o=e.inArray(r[c],this._data.core.selected),-1!==o&&(this._data.core.selected=e.vakata.array_remove(this._data.core.selected,o)))}for(this.trigger("delete_node",{node:t,parent:s.id}),h&&this.trigger("changed",{action:"delete_node",node:t,selected:this._data.core.selected,parent:s.id}),c=0,d=r.length;d>c;c++)delete this._model.data[r[c]];return this.redraw_node(s,!0),!0},check:function(t,i,n,s,o){i=i&&i.id?i:this.get_node(i),n=n&&n.id?n:this.get_node(n);var r=t.match(/^move_node|copy_node|create_node$/i)?n:i,a=this.settings.core.check_callback;return"move_node"!==t&&"copy_node"!==t||o&&o.is_multi||i.id!==n.id&&e.inArray(i.id,n.children)!==s&&-1===e.inArray(n.id,i.children_d)?(r&&r.data&&(r=r.data),r&&r.functions&&(r.functions[t]===!1||r.functions[t]===!0)?(r.functions[t]===!1&&(this._data.core.last_error={error:"check",plugin:"core",id:"core_02",reason:"Node data prevents function: "+t,data:JSON.stringify({chk:t,pos:s,obj:i&&i.id?i.id:!1,par:n&&n.id?n.id:!1})}),r.functions[t]):a===!1||e.isFunction(a)&&a.call(this,t,i,n,s,o)===!1||a&&a[t]===!1?(this._data.core.last_error={error:"check",plugin:"core",id:"core_03",reason:"User config for core.check_callback prevents function: "+t,data:JSON.stringify({chk:t,pos:s,obj:i&&i.id?i.id:!1,par:n&&n.id?n.id:!1})},!1):!0):(this._data.core.last_error={error:"check",plugin:"core",id:"core_01",reason:"Moving parent inside child",data:JSON.stringify({chk:t,pos:s,obj:i&&i.id?i.id:!1,par:n&&n.id?n.id:!1})},!1)},last_error:function(){return this._data.core.last_error},move_node:function(i,n,s,o,r,a){var l,c,d,h,u,p,f,m,g,v,b,y,w,_;if(n=this.get_node(n),s=s===t?0:s,!n)return!1;if(!s.toString().match(/^(before|after)$/)&&!r&&!this.is_loaded(n))return this.load_node(n,function(){this.move_node(i,n,s,o,!0)});if(e.isArray(i)){for(i=i.slice(),l=0,c=i.length;c>l;l++)this.move_node(i[l],n,s,o,r,!0)&&(n=i[l],s="after");return this.redraw(),!0}if(i=i&&i.id?i:this.get_node(i),!i||"#"===i.id)return!1;if(d=(i.parent||"#").toString(),u=s.toString().match(/^(before|after)$/)&&"#"!==n.id?this.get_node(n.parent):n,p=i.instance?i.instance:this._model.data[i.id]?this:e.jstree.reference(i.id),f=!p||!p._id||this._id!==p._id,h=p&&p._id&&d&&p._model.data[d]&&p._model.data[d].children?e.inArray(i.id,p._model.data[d].children):-1,f)return this.copy_node(i,n,s,o,r)?(p&&p.delete_node(i),!0):!1;switch("#"===n.id&&("before"===s&&(s="first"),"after"===s&&(s="last")),s){case"before":s=e.inArray(n.id,u.children);break;case"after":s=e.inArray(n.id,u.children)+1;break;case"inside":case"first":s=0;break;case"last":s=u.children.length;break;default:s||(s=0)}if(s>u.children.length&&(s=u.children.length),!this.check("move_node",i,u,s,{core:!0,is_multi:p&&p._id&&p._id!==this._id,is_foreign:!p||!p._id}))return this.settings.core.error.call(this,this._data.core.last_error),!1;if(i.parent===u.id){for(m=u.children.concat(),g=e.inArray(i.id,m),-1!==g&&(m=e.vakata.array_remove(m,g),s>g&&s--),g=[],v=0,b=m.length;b>v;v++)g[v>=s?v+1:v]=m[v];g[s]=i.id,u.children=g,this._node_changed(u.id),this.redraw("#"===u.id)}else{for(g=i.children_d.concat(),g.push(i.id),v=0,b=i.parents.length;b>v;v++){for(m=[],_=p._model.data[i.parents[v]].children_d,y=0,w=_.length;w>y;y++)-1===e.inArray(_[y],g)&&m.push(_[y]);p._model.data[i.parents[v]].children_d=m}for(p._model.data[d].children=e.vakata.array_remove_item(p._model.data[d].children,i.id),v=0,b=u.parents.length;b>v;v++)this._model.data[u.parents[v]].children_d=this._model.data[u.parents[v]].children_d.concat(g);for(m=[],v=0,b=u.children.length;b>v;v++)m[v>=s?v+1:v]=u.children[v];for(m[s]=i.id,u.children=m,u.children_d.push(i.id),u.children_d=u.children_d.concat(i.children_d),i.parent=u.id,g=u.parents.concat(),g.unshift(u.id),_=i.parents.length,i.parents=g,g=g.concat(),v=0,b=i.children_d.length;b>v;v++)this._model.data[i.children_d[v]].parents=this._model.data[i.children_d[v]].parents.slice(0,-1*_),Array.prototype.push.apply(this._model.data[i.children_d[v]].parents,g);"#"!==d&&"#"!==u.id||(this._model.force_full_redraw=!0),this._model.force_full_redraw||(this._node_changed(d),this._node_changed(u.id)),a||this.redraw()}return o&&o.call(this,i,u,s),this.trigger("move_node",{node:i,parent:u.id,position:s,old_parent:d,old_position:h,is_multi:p&&p._id&&p._id!==this._id,is_foreign:!p||!p._id,old_instance:p,new_instance:this}),!0},copy_node:function(i,n,s,o,r,a){var l,c,d,h,u,p,f,m,g,v,b;if(n=this.get_node(n),s=s===t?0:s,!n)return!1;if(!s.toString().match(/^(before|after)$/)&&!r&&!this.is_loaded(n))return this.load_node(n,function(){this.copy_node(i,n,s,o,!0)});if(e.isArray(i)){for(i=i.slice(),l=0,c=i.length;c>l;l++)h=this.copy_node(i[l],n,s,o,r,!0),h&&(n=h,s="after");return this.redraw(),!0}if(i=i&&i.id?i:this.get_node(i),!i||"#"===i.id)return!1;switch(m=(i.parent||"#").toString(),g=s.toString().match(/^(before|after)$/)&&"#"!==n.id?this.get_node(n.parent):n,v=i.instance?i.instance:this._model.data[i.id]?this:e.jstree.reference(i.id),b=!v||!v._id||this._id!==v._id,"#"===n.id&&("before"===s&&(s="first"),"after"===s&&(s="last")),s){case"before":s=e.inArray(n.id,g.children);break;case"after":s=e.inArray(n.id,g.children)+1;break;case"inside":case"first":s=0;break;case"last":s=g.children.length;break;default:s||(s=0)}if(s>g.children.length&&(s=g.children.length),!this.check("copy_node",i,g,s,{core:!0,is_multi:v&&v._id&&v._id!==this._id,is_foreign:!v||!v._id}))return this.settings.core.error.call(this,this._data.core.last_error),!1;if(f=v?v.get_json(i,{no_id:!0,no_data:!0,no_state:!0}):i,!f)return!1;if(f.id===!0&&delete f.id,f=this._parse_model_from_json(f,g.id,g.parents.concat()),!f)return!1;for(h=this.get_node(f),i&&i.state&&i.state.loaded===!1&&(h.state.loaded=!1),d=[],d.push(f),d=d.concat(h.children_d),this.trigger("model",{nodes:d,parent:g.id}),u=0,p=g.parents.length;p>u;u++)this._model.data[g.parents[u]].children_d=this._model.data[g.parents[u]].children_d.concat(d);for(d=[],u=0,p=g.children.length;p>u;u++)d[u>=s?u+1:u]=g.children[u];return d[s]=h.id,g.children=d,g.children_d.push(h.id),g.children_d=g.children_d.concat(h.children_d),"#"===g.id&&(this._model.force_full_redraw=!0),this._model.force_full_redraw||this._node_changed(g.id),a||this.redraw("#"===g.id),o&&o.call(this,h,g,s),this.trigger("copy_node",{node:h,original:i,parent:g.id,position:s,old_parent:m,old_position:v&&v._id&&m&&v._model.data[m]&&v._model.data[m].children?e.inArray(i.id,v._model.data[m].children):-1,is_multi:v&&v._id&&v._id!==this._id,is_foreign:!v||!v._id,old_instance:v,new_instance:this}),h.id},cut:function(t){if(t||(t=this._data.core.selected.concat()),e.isArray(t)||(t=[t]),!t.length)return!1;var i,n,s,l=[];for(n=0,s=t.length;s>n;n++)i=this.get_node(t[n]),i&&i.id&&"#"!==i.id&&l.push(i);return l.length?(o=l,a=this,r="move_node",void this.trigger("cut",{node:t})):!1},copy:function(t){if(t||(t=this._data.core.selected.concat()),e.isArray(t)||(t=[t]),!t.length)return!1;var i,n,s,l=[];for(n=0,s=t.length;s>n;n++)i=this.get_node(t[n]),i&&i.id&&"#"!==i.id&&l.push(i);return l.length?(o=l,a=this,r="copy_node",void this.trigger("copy",{node:t})):!1},get_buffer:function(){return{mode:r,node:o,inst:a}},can_paste:function(){return r!==!1&&o!==!1},paste:function(e,t){return e=this.get_node(e),e&&r&&r.match(/^(copy_node|move_node)$/)&&o?(this[r](o,e,t)&&this.trigger("paste",{parent:e.id,node:o,mode:r}),o=!1,r=!1,void(a=!1)):!1},clear_buffer:function(){o=!1,r=!1,a=!1,this.trigger("clear_buffer")},edit:function(t,i){if(t=this.get_node(t),!t)return!1;if(this.settings.core.check_callback===!1)return this._data.core.last_error={error:"check",plugin:"core",id:"core_07",reason:"Could not edit node because of check_callback"},this.settings.core.error.call(this,this._data.core.last_error),!1;i="string"==typeof i?i:t.text,this.set_text(t,""),t=this._open_to(t);var n=this._data.core.rtl,s=this.element.width(),o=t.children(".jstree-anchor"),r=e("<span>"),/*!
				oi = obj.children("i:visible"),
				ai = a.children("i:visible"),
				w1 = oi.width() * oi.length,
				w2 = ai.width() * ai.length,
				*/
a=i,l=e("<div />",{css:{position:"absolute",top:"-200px",left:n?"0px":"-1000px",visibility:"hidden"}}).appendTo("body"),c=e("<input />",{value:a,"class":"jstree-rename-input",css:{padding:"0",border:"1px solid silver","box-sizing":"border-box",display:"inline-block",height:this._data.core.li_height+"px",lineHeight:this._data.core.li_height+"px",width:"150px"},blur:e.proxy(function(){var i=r.children(".jstree-rename-input"),n=i.val();""===n&&(n=a),l.remove(),r.replaceWith(o),r.remove(),this.set_text(t,a),this.rename_node(t,e("<div></div>").text(n)[this.settings.core.force_text?"text":"html"]())===!1&&this.set_text(t,a)},this),keydown:function(e){var t=e.which;27===t&&(this.value=a),27!==t&&13!==t&&37!==t&&38!==t&&39!==t&&40!==t&&32!==t||e.stopImmediatePropagation(),27!==t&&13!==t||(e.preventDefault(),this.blur())},click:function(e){e.stopImmediatePropagation()},mousedown:function(e){e.stopImmediatePropagation()},keyup:function(){c.width(Math.min(l.text("pW"+this.value).width(),s))},keypress:function(e){return 13===e.which?!1:void 0}}),d={fontFamily:o.css("fontFamily")||"",fontSize:o.css("fontSize")||"",fontWeight:o.css("fontWeight")||"",fontStyle:o.css("fontStyle")||"",fontStretch:o.css("fontStretch")||"",fontVariant:o.css("fontVariant")||"",letterSpacing:o.css("letterSpacing")||"",wordSpacing:o.css("wordSpacing")||""};r.attr("class",o.attr("class")).append(o.contents().clone()).append(c),o.replaceWith(r),l.css(d),c.css(d).width(Math.min(l.text("pW"+c[0].value).width(),s))[0].select()},set_theme:function(t,i){if(!t)return!1;if(i===!0){var n=this.settings.core.themes.dir;n||(n=e.jstree.path+"/themes"),i=n+"/"+t+"/style.css"}i&&-1===e.inArray(i,l)&&(e("head").append('<link rel="stylesheet" href="'+i+'" type="text/css" />'),l.push(i)),this._data.core.themes.name&&this.element.removeClass("jstree-"+this._data.core.themes.name),this._data.core.themes.name=t,this.element.addClass("jstree-"+t),this.element[this.settings.core.themes.responsive?"addClass":"removeClass"]("jstree-"+t+"-responsive"),this.trigger("set_theme",{theme:t})},get_theme:function(){return this._data.core.themes.name},set_theme_variant:function(e){this._data.core.themes.variant&&this.element.removeClass("jstree-"+this._data.core.themes.name+"-"+this._data.core.themes.variant),this._data.core.themes.variant=e,e&&this.element.addClass("jstree-"+this._data.core.themes.name+"-"+this._data.core.themes.variant)},get_theme_variant:function(){return this._data.core.themes.variant},show_stripes:function(){this._data.core.themes.stripes=!0,this.get_container_ul().addClass("jstree-striped")},hide_stripes:function(){this._data.core.themes.stripes=!1,this.get_container_ul().removeClass("jstree-striped")},toggle_stripes:function(){this._data.core.themes.stripes?this.hide_stripes():this.show_stripes()},show_dots:function(){this._data.core.themes.dots=!0,this.get_container_ul().removeClass("jstree-no-dots")},hide_dots:function(){this._data.core.themes.dots=!1,this.get_container_ul().addClass("jstree-no-dots")},toggle_dots:function(){this._data.core.themes.dots?this.hide_dots():this.show_dots()},show_icons:function(){this._data.core.themes.icons=!0,this.get_container_ul().removeClass("jstree-no-icons")},hide_icons:function(){this._data.core.themes.icons=!1,this.get_container_ul().addClass("jstree-no-icons")},toggle_icons:function(){this._data.core.themes.icons?this.hide_icons():this.show_icons()},set_icon:function(t,i){var n,s,o,r;if(e.isArray(t)){for(t=t.slice(),n=0,s=t.length;s>n;n++)this.set_icon(t[n],i);return!0}return t=this.get_node(t),t&&"#"!==t.id?(r=t.icon,t.icon=i,o=this.get_node(t,!0).children(".jstree-anchor").children(".jstree-themeicon"),i===!1?this.hide_icon(t):i===!0?(o.removeClass("jstree-themeicon-custom "+r).css("background","").removeAttr("rel"),r===!1&&this.show_icon(t)):-1===i.indexOf("/")&&-1===i.indexOf(".")?(o.removeClass(r).css("background",""),o.addClass(i+" jstree-themeicon-custom").attr("rel",i),r===!1&&this.show_icon(t)):(o.removeClass(r).css("background",""),o.addClass("jstree-themeicon-custom").css("background","url('"+i+"') center center no-repeat").attr("rel",i),r===!1&&this.show_icon(t)),!0):!1},get_icon:function(e){return e=this.get_node(e),e&&"#"!==e.id?e.icon:!1},hide_icon:function(t){var i,n;if(e.isArray(t)){for(t=t.slice(),i=0,n=t.length;n>i;i++)this.hide_icon(t[i]);return!0}return t=this.get_node(t),t&&"#"!==t?(t.icon=!1,this.get_node(t,!0).children(".jstree-anchor").children(".jstree-themeicon").addClass("jstree-themeicon-hidden"),!0):!1},show_icon:function(t){var i,n,s;if(e.isArray(t)){for(t=t.slice(),i=0,n=t.length;n>i;i++)this.show_icon(t[i]);return!0}return t=this.get_node(t),t&&"#"!==t?(s=this.get_node(t,!0),t.icon=s.length?s.children(".jstree-anchor").children(".jstree-themeicon").attr("rel"):!0,t.icon||(t.icon=!0),s.children(".jstree-anchor").children(".jstree-themeicon").removeClass("jstree-themeicon-hidden"),!0):!1}},e.vakata={},e.vakata.attributes=function(t,i){t=e(t)[0];var n=i?{}:[];return t&&t.attributes&&e.each(t.attributes,function(t,s){-1===e.inArray(s.name.toLowerCase(),["style","contenteditable","hasfocus","tabindex"])&&null!==s.value&&""!==e.trim(s.value)&&(i?n[s.name]=s.value:n.push(s.name))}),n},e.vakata.array_unique=function(e){var t,i,n,s=[];for(t=0,n=e.length;n>t;t++){for(i=0;t>=i&&e[t]!==e[i];i++);i===t&&s.push(e[t])}return s},e.vakata.array_remove=function(e,t,i){var n=e.slice((i||t)+1||e.length);return e.length=0>t?e.length+t:t,e.push.apply(e,n),e},e.vakata.array_remove_item=function(t,i){var n=e.inArray(i,t);return-1!==n?e.vakata.array_remove(t,n):t}}}),function(e){"use strict";"function"==typeof define&&define.amd?define("jstree.wholerow",["jquery","jstree"],e):"object"==typeof exports?e(require("jquery"),require("jstree")):e(jQuery,jQuery.jstree)}(function(e){"use strict";if(!e.jstree.plugins.wholerow){var t=document.createElement("DIV");t.setAttribute("unselectable","on"),t.setAttribute("role","presentation"),t.className="jstree-wholerow",t.innerHTML="&#160;",e.jstree.plugins.wholerow=function(i,n){this.bind=function(){n.bind.call(this),this.element.on("ready.jstree set_state.jstree",e.proxy(function(){this.hide_dots()},this)).on("init.jstree loading.jstree ready.jstree",e.proxy(function(){this.get_container_ul().addClass("jstree-wholerow-ul")},this)).on("deselect_all.jstree",e.proxy(function(){this.element.find(".jstree-wholerow-clicked").removeClass("jstree-wholerow-clicked")},this)).on("changed.jstree",e.proxy(function(e,t){this.element.find(".jstree-wholerow-clicked").removeClass("jstree-wholerow-clicked");var i,n,s=!1;for(i=0,n=t.selected.length;n>i;i++)s=this.get_node(t.selected[i],!0),s&&s.length&&s.children(".jstree-wholerow").addClass("jstree-wholerow-clicked")},this)).on("open_node.jstree",e.proxy(function(e,t){this.get_node(t.node,!0).find(".jstree-clicked").parent().children(".jstree-wholerow").addClass("jstree-wholerow-clicked")},this)).on("hover_node.jstree dehover_node.jstree",e.proxy(function(e,t){"hover_node"===e.type&&this.is_disabled(t.node)||this.get_node(t.node,!0).children(".jstree-wholerow")["hover_node"===e.type?"addClass":"removeClass"]("jstree-wholerow-hovered")},this)).on("contextmenu.jstree",".jstree-wholerow",e.proxy(function(t){t.preventDefault();var i=e.Event("contextmenu",{metaKey:t.metaKey,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey,pageX:t.pageX,pageY:t.pageY});e(t.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(i)},this)).on("click.jstree",".jstree-wholerow",function(t){t.stopImmediatePropagation();var i=e.Event("click",{metaKey:t.metaKey,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey});e(t.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(i).focus()}).on("click.jstree",".jstree-leaf > .jstree-ocl",e.proxy(function(t){t.stopImmediatePropagation();var i=e.Event("click",{metaKey:t.metaKey,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey});e(t.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(i).focus()},this)).on("mouseover.jstree",".jstree-wholerow, .jstree-icon",e.proxy(function(e){return e.stopImmediatePropagation(),this.is_disabled(e.currentTarget)||this.hover_node(e.currentTarget),!1},this)).on("mouseleave.jstree",".jstree-node",e.proxy(function(e){this.dehover_node(e.currentTarget)},this))},this.teardown=function(){this.settings.wholerow&&this.element.find(".jstree-wholerow").remove(),n.teardown.call(this)},this.redraw_node=function(i){if(i=n.redraw_node.apply(this,arguments)){var s=t.cloneNode(!0);-1!==e.inArray(i.id,this._data.core.selected)&&(s.className+=" jstree-wholerow-clicked"),this._data.core.focused&&this._data.core.focused===i.id&&(s.className+=" jstree-wholerow-hovered"),i.insertBefore(s,i.childNodes[0])}return i}}}}),function(e){"use strict";"function"==typeof define&&define.amd?define("jstree.checkbox",["jquery","jstree"],e):"object"==typeof exports?e(require("jquery"),require("jstree")):e(jQuery,jQuery.jstree)}(function(e){"use strict";if(!e.jstree.plugins.checkbox){var t=document.createElement("I"),i=document.createElement("a");t.className="jstree-icon jstree-checkbox",i.className="jstree-checkbox-selectall",e.jstree.defaults.checkbox={cascadeDown:!0,cascadeUp:!1,keep_selected_style:!0,select_all_includes_self:!1,select_and_deselect_all_controls:!0,select_and_disable_children:!0,three_state:!0,visible:!0,whole_node:!0},e.jstree.plugins.checkbox=function(n,s){this.bind=function(){s.bind.call(this),this._data.checkbox.uto=!1,this.element.on("init.jstree",e.proxy(function(){this._data.checkbox.visible=this.settings.checkbox.visible,this.settings.checkbox.keep_selected_style||this.element.addClass("jstree-checkbox-no-clicked"),this.settings.checkbox.select_and_disable_children&&this.element.addClass("jstree-select-and-disable-children"),this.settings.checkbox.show_disabled_checkbox_controls&&this.element.addClass("show-disabled-checkbox-controls")},this)).on("loading.jstree",e.proxy(function(){this[this._data.checkbox.visible?"show_checkboxes":"hide_checkboxes"]()},this)),this.settings.checkbox.select_and_deselect_all_controls&&this.element.on("click",".jstree-checkbox-selectall",e.proxy(function(t){var i=e(t.target),n=e.makeArray(e(t.target).parent().find("li.jstree-node").not(function(t,i){return e(i).children().is(".jstree-disabled")}));this.settings.checkbox.select_all_includes_self&&!i.siblings(".jstree-anchor").is(".jstree-disabled")&&(n=[i,n]),i.hasClass("jstree-checkbox-deselectall")?this.deselect_node(n):this.select_node(n)},this)),this.element.on("changed.jstree move_node.jstree copy_node.jstree redraw.jstree open_node.jstree close_node.jstree",e.proxy(function(){this._data.checkbox.uto&&clearTimeout(this._data.checkbox.uto),this._data.checkbox.uto=setTimeout(e.proxy(this._undetermined,this),50)},this)).on("model.jstree",e.proxy(function(t,i){var n,s,o,r,a,l,c=this._model.data,d=c[i.parent],h=i.nodes,u=[];if(this.settings.checkbox.cascadeDown)if(d.state.selected){for(s=0,o=h.length;o>s;s++)c[h[s]].state.selected=!0,this.settings.checkbox.select_and_disable_children&&(c[h[s]].state.selected=!1,c[h[s]].state.disabled=!0);this.settings.checkbox.select_and_disable_children||(this._data.core.selected=this._data.core.selected.concat(h))}else for(s=0,o=h.length;o>s;s++)if(c[h[s]].state.selected){for(r=0,a=c[h[s]].children_d.length;a>r;r++)c[c[h[s]].children_d[r]].state.selected=!0;this.settings.checkbox.select_and_disable_children||(this._data.core.selected=this._data.core.selected.concat(c[h[s]].children_d))}if(!this.settings.checkbox.select_and_disable_children&&this.settings.checkbox.cascadeUp){for(s=0,o=d.children_d.length;o>s;s++)c[d.children_d[s]].children.length||u.push(c[d.children_d[s]].parent);for(u=e.vakata.array_unique(u),r=0,a=u.length;a>r;r++)for(d=c[u[r]];d&&"#"!==d.id;){for(n=0,s=0,o=d.children.length;o>s;s++)n+=c[d.children[s]].state.selected;if(n!==o)break;d.state.selected=!0,this._data.core.selected.push(d.id),l=this.get_node(d,!0),l&&l.length&&l.children(".jstree-anchor").andSelf().addClass("jstree-clicked"),d=this.get_node(d.parent)}}this._data.core.selected=e.vakata.array_unique(this._data.core.selected)},this)).on("select_node.jstree",e.proxy(function(t,i){var n,s,o,r,a=i.node,l=this._model.data,c=this.get_node(a.parent),d=this.get_node(a,!0);if(this.open_node(a),this.settings.checkbox.cascadeDown)for(this.settings.checkbox.select_and_disable_children||(this._data.core.selected=e.vakata.array_unique(this._data.core.selected.concat(a.children_d))),n=0,s=a.children_d.length;s>n;n++)r=l[a.children_d[n]],r.state.selected=!0,this.settings.checkbox.select_and_disable_children&&(r.state.selected=!1,r.state.disabled=!0),r&&r.original&&r.original.state&&r.original.state.undetermined&&(r.original.state.undetermined=!1);if(!this.settings.checkbox.select_and_deselect_all_controls&&this.settings.checkbox.cascadeUp)for(;c&&"#"!==c.id;){for(o=0,n=0,s=c.children.length;s>n;n++)o+=l[c.children[n]].state.selected;if(o!==s)break;c.state.selected=!0,this._data.core.selected.push(c.id),r=this.get_node(c,!0),r&&r.length&&r.children(".jstree-anchor").not(".jstree-disabled").andSelf().addClass("jstree-clicked"),c=this.get_node(c.parent)}this.settings.checkbox.cascadeDown&&d.length&&(d.find(".jstree-anchor").not(".jstree-disabled").not(".jstree-disabled").addClass("jstree-clicked"),this.settings.checkbox.select_and_disable_children&&d.find(".jstree-children .jstree-anchor").addClass("jstree-disabled"))},this)).on("deselect_all.jstree",e.proxy(function(){var e,t,i,n=this.get_node("#"),s=this._model.data;for(e=0,t=n.children_d.length;t>e;e++)i=s[n.children_d[e]],i&&i.original&&i.original.state&&i.original.state.undetermined&&(i.original.state.undetermined=!1)},this)).on("deselect_node.jstree",e.proxy(function(t,i){var n,s,o,r=i.node,a=this.get_node(r,!0);if(r&&r.original&&r.original.state&&r.original.state.undetermined&&(r.original.state.undetermined=!1),this.settings.checkbox.cascadeDown)for(n=0,s=r.children_d.length;s>n;n++)o=this._model.data[r.children_d[n]],o.state.selected=!1,this.settings.checkbox.select_and_disable_children&&(o.state.disabled=!1),o&&o.original&&o.original.state&&o.original.state.undetermined&&(o.original.state.undetermined=!1),this._data.core.selected=e.vakata.array_remove_item(this._data.core.selected,o.id);if(this.settings.checkbox.cascadeUp)for(n=0,s=r.parents.length;s>n;n++)o=this._model.data[r.parents[n]],o&&o.original&&o.original.state&&o.original.state.undetermined&&(o.original.state.undetermined=!1),o=this.get_node(r.parents[n],!0),o&&o.length&&o.children(".jstree-anchor").not(".jstree-disabled").removeClass("jstree-clicked");if(o=[],!this.settings.checkbox.select_and_deselect_all_controls){for(n=0,s=this._data.core.selected.length;s>n;n++)-1===e.inArray(this._data.core.selected[n],r.children_d)&&-1===e.inArray(this._data.core.selected[n],r.parents)&&o.push(this._data.core.selected[n]);this._data.core.selected=e.vakata.array_unique(o)}this.settings.checkbox.cascadeDown&&a.length&&a.length&&a.find(".jstree-anchor, .jstree-node").andSelf().removeClass("jstree-clicked jstree-disabled")},this)).on("delete_node.jstree",e.proxy(function(e,t){for(var i,n,s,o,r=this.get_node(t.parent),a=this._model.data;r&&"#"!==r.id;){for(s=0,i=0,n=r.children.length;n>i;i++)s+=a[r.children[i]].state.selected;if(s!==n)break;r.state.selected=!0,this._data.core.selected.push(r.id),o=this.get_node(r,!0),o&&o.length&&o.children(".jstree-anchor").andSelf().addClass("jstree-clicked"),r=this.get_node(r.parent)}},this)).on("move_node.jstree",e.proxy(function(t,i){var n,s,o,r,a,l=i.is_multi,c=i.old_parent,d=this.get_node(i.parent),h=this._model.data;if(!l)for(n=this.get_node(c);n&&"#"!==n.id;){for(s=0,o=0,r=n.children.length;r>o;o++)s+=h[n.children[o]].state.selected;if(s!==r)break;n.state.selected=!0,this._data.core.selected.push(n.id),a=this.get_node(n,!0),a&&a.length&&a.children(".jstree-anchor").andSelf().addClass("jstree-clicked"),n=this.get_node(n.parent)}for(n=d;n&&"#"!==n.id;){for(s=0,o=0,r=n.children.length;r>o;o++)s+=h[n.children[o]].state.selected;if(s===r)n.state.selected||(n.state.selected=!0,this._data.core.selected.push(n.id),a=this.get_node(n,!0),a&&a.length&&a.children(".jstree-anchor").andSelf().addClass("jstree-clicked"));else{if(!n.state.selected)break;n.state.selected=!1,this._data.core.selected=e.vakata.array_remove_item(this._data.core.selected,n.id),a=this.get_node(n,!0),a&&a.length&&a.children(".jstree-anchor").andSelf().removeClass("jstree-clicked")}n=this.get_node(n.parent)}},this))},this._undetermined=function(){var t,i,n=this._model.data,s=this._data.core.selected,o=[],r=this;for(t=0,i=s.length;i>t;t++)n[s[t]]&&n[s[t]].parents&&(o=o.concat(n[s[t]].parents));if(this.element.find(".jstree-closed").not(":has(.jstree-children)").each(function(){var e,s=r.get_node(this);if(s.state.loaded)for(t=0,i=s.children_d.length;i>t;t++)e=n[s.children_d[t]],!e.state.loaded&&e.original&&e.original.state&&e.original.state.undetermined&&e.original.state.undetermined===!0&&(o.push(e.id),o=o.concat(e.parents));else s.original&&s.original.state&&s.original.state.undetermined&&s.original.state.undetermined===!0&&(o.push(s.id),o=o.concat(s.parents))}),o=e.vakata.array_unique(o),o=e.vakata.array_remove_item(o,"#"),this.element.find(".jstree-undetermined").andSelf().removeClass("jstree-undetermined"),this.settings.checkbox.select_and_deselect_all_controls){var a=this.element.find(".jstree-checkbox-selectall");a.removeClass("jstree-checkbox-deselectall fsStateHidden"),a.filter(function(){var t=e(this).siblings(".jstree-anchor");return(!r.settings.checkbox.select_all_includes_self||t.is(".jstree-clicked")||t.is(".jstree-disabled"))&&0==e(this).siblings(".jstree-children").find(".jstree-anchor").not(".jstree-disabled").not(".jstree-clicked").length}).addClass("jstree-checkbox-deselectall"),a.filter(function(){var t=e(this).siblings(".jstree-children");return t.find(".jstree-anchor.jstree-disabled").not(".jstree-clicked").length>0&&0==t.find(".jstree-open").find(".jstree-anchor").not(".jstree-disabled").length}).addClass("fsStateHidden")}if(this.settings.checkbox.select_and_disable_children&&this.element.find(".jstree-clicked .jstree-children .jstree-anchor").addClass("jstree-clicked"),this.settings.checkbox.three_state)for(t=0,i=o.length;i>t;t++)s=this.get_node(o[t],!0),s&&s.length&&(n[o[t]].state.selected||s&&s.length&&(s.children(".jstree-anchor").children(".jstree-checkbox").addClass("jstree-undetermined"),s.addClass("jstree-undetermined")));this.element.trigger("after_redraw")},this.redraw_node=function(n,o,r){var a=this.get_node(n).id;if(n=s.redraw_node.call(this,n,o,r)){var l,c,d=null;for(l=0,c=n.childNodes.length;c>l;l++)if(n.childNodes[l]&&n.childNodes[l].className&&-1!==n.childNodes[l].className.indexOf("jstree-anchor")){d=n.childNodes[l];break}d&&(d.insertBefore(t.cloneNode(!1),d.childNodes[0]),this.settings.checkbox.select_and_deselect_all_controls&&-1==n.className.indexOf("jstree-leaf")&&n.insertBefore(i.cloneNode(!0),d.nextSibling)),this._model.data[a]&&this._model.data[a].state.selected&&(n.className=[n.className,"jstree-clicked"].join(" "))}return!r&&this.settings.checkbox.three_state&&(this._data.checkbox.uto&&clearTimeout(this._data.checkbox.uto),this._data.checkbox.uto=setTimeout(e.proxy(this._undetermined,this),50)),this.settings.checkbox.node_class_function&&(n.className=[n.className,this.settings.checkbox.node_class_function(this._model.data[a].data)].join(" ")),n},this.activate_node=function(t,i){return(this.settings.checkbox.whole_node||e(i.target).hasClass("jstree-checkbox"))&&(i.ctrlKey=!0),s.activate_node.call(this,t,i)},this.show_checkboxes=function(){this._data.core.themes.checkboxes=!0,this.get_container_ul().removeClass("jstree-no-checkboxes")},this.hide_checkboxes=function(){this._data.core.themes.checkboxes=!1,this.get_container_ul().addClass("jstree-no-checkboxes")},this.toggle_checkboxes=function(){this._data.core.themes.checkboxes?this.hide_checkboxes():this.show_checkboxes()}}}}),function(e){"use strict";function t(){return e.makeArray(e("."+s).map(function(){return parseInt(this.value)}))}function i(t,n,s,o){s=s||[],e.each(t,function(e,t){var r=t.id;t.state=t.state||{},0==r&&(t.li_attr={"class":"fsGroupPickerRoles"}),t.id=n+r,o&&"parent_id"in t?t.parent=null==t.parent_id?"#":n+t.parent_id:!("children"in t)&&"has_children"in t&&(t.children=t.has_children),!("text"in t)&&"name"in t&&(t.text=t.name),t.state.disabled=!!t.disabled,t.state.selected=s.indexOf(r)>-1,"children"in t&&"object"==typeof t.children&&i(t.children,n,s,o)})}var n="fsGroupPickerField",s="fsGroupPickerFieldItem",o="fsGroupPickerTree",r="fsGroupPickerSelectedTree",a="fsStateHidden";e.fn.fsGroupPicker=function(l){l=l||{};var c=l.hiddenFieldName||"selectedGroup",d=0!=l.multiple,h=0!=l.topLevelDisabled,u=l.preselectedValues||[];return"string"==typeof u&&e.trim(u).length&&(u=u.split(",")),this.each(function(){var p=e(this),f=e('<input type="hidden" multiple="multiple" id="'+n+'" name="'+c+'">'),m=e('<div class="'+o+'">'),g=e('<div class="'+r+" "+a+'">'),v=t(),b=e('<button class="fsGroupPickerViewButton">View Selected</button>').on("click",function(){var t=e(this),i="View Selected"==e.trim(t.text());t.text(i?"View All":"View Selected"),m.toggleClass(a,i),g.toggleClass(a,!i),i?(g.jstree(!0)._data.core.ready=!1,g.jstree(!0).load_node("#")):0==p.find("."+s).length&&b.prop("disabled",!0)});if(d&&p.prepend(b,g),p.prepend(m,f),u.length>0)for(var y=0;y<u.length;y++)p.append('<input type="hidden" multiple="multiple" class="'+s+'" name="'+c+'" value="'+u[y]+'">');else 0==p.find("."+s).length&&b.prop("disabled",!0);d&&p.find("."+s).length&&(g.removeClass(a),m.addClass(a),b.text("View All")),m.jstree({plugins:d?["checkbox","wholerow"]:["wholerow"],core:{data:function(n,s){var r=t();e.getJSON("/cf_endpoints/routes.cfm/constituents/groups"+("#"!=n.id?"/"+n.id.replace(o,"")+"/children":"")+".json?"+(h?"":"top_level_disabled=false&")+(l.onlyGroupSpaces?"only_group_spaces":"")).done(function(e){l.excludeRoles&&"#"==n.id&&e.splice(0,1),i(e,o,r),s(e)})}}}).on("select_node.jstree",function(e,t){d||f.nextAll("."+s).remove(),f.after(f.clone().val(t.node.id.replace(o,"")).removeAttr("id").addClass(s)),b.prop("disabled",!1),p.trigger("groupPicker:change")}).on("deselect_node.jstree",function(e,t){f.nextAll("."+s+"[value="+t.node.id.replace(o,"")+"]").remove(),0==p.find("."+s).length&&m.is(":visible")&&b.prop("disabled",!0),p.trigger("groupPicker:change")}),d?g.jstree({plugins:["checkbox","wholerow"],core:{data:function(n,s){var o=t();o.length&&e.getJSON("/cf_endpoints/routes.cfm/constituents/groups.json?include_ancestors&group_ids="+o).done(function(e){i(e,r,o,!0),p.trigger("groupPicker:selectionLoaded",[e]),s(e)})}}}).on("select_node.jstree",function(e,t){var i=t.node.id.replace(r,"");m.find("#"+o+i).length?m.jstree(!0).select_node(o+i):f.after(f.clone().val(i).removeAttr("id").addClass(s)),p.trigger("groupPicker:change")}).on("deselect_node.jstree",function(e,t){var i=t.node.id.replace(r,"");m.find("#"+o+i).length?m.jstree(!0).deselect_node(o+i):f.nextAll("."+s+"[value="+i+"]").remove(),p.trigger("groupPicker:change")}):v.length&&e.getJSON("/cf_endpoints/routes.cfm/constituents/groups.json?include_ancestors&group_ids="+v).done(function(e){i(e),p.trigger("groupPicker:selectionLoaded",[e])})})}}(jQuery),function(e){"use strict";function t(e,t){return e.find(c+'[data-mediatype="'+t+'"]').length>0}var i=e.$,n="fsStateHidden",s=".fsMediaSettingsChannel",o=s+"Node",r=".fsMediaSettingsFolder",a=r+"Node",l=".fsMediaSettingsPlaylist",c=l+"Node",d=".fsMediaSettingsSelectedMediaNodes",h="fsStateSelected";e.getInternalNS("elements.media").initPicker=function(e){e.find(".fsMediaSettingsSelectedMedia input:checked").parents("ul").siblings(".fsStyleAccordionHeader").addClass(h),i(".fsElementSettingMediaPlayer, .fsElementSettingMediaGallery").on("change",'input[name="settings[subtype]"]',function(){var t=i(d),o=t.find(s+":checked"),a=t.find(r+":checked"),c="Player"==i(this).val();if(i(s+":not(#fsMediaChannelAll), "+r).toggleClass(n,c),i("#fsMediaSettingsAllChannelsNode").toggleClass(n,c),c){var u,p,f,m=".fsStyleAccordionHeader:first";o.length>0?f=o:a.length>0&&(f=a),f&&(p="fsMediaChannelAll"==o.attr("id")?f.closest("ul").siblings("ul").first().children("li").first():f.closest("li"),f==o&&(m+=", ul "+m),f.prop("checked",!1),p.find(m).addClass(h),u=p.find(l+":first"),u.prop("checked",!0),e.trigger("mediaPicker:change",u.next("label").text()))}}),e.find(".fsMediaSettingsSelectedMediaNodes").on("change",s,function(t){var s=i(this);return s.hasClass(n)?void s.prop("checked",!1):(i(d).find(r+":checked, "+l+":checked").prop("checked",!1),void e.trigger("mediaPicker:change",i(t.target).next("label").text()))}).on("change",r,function(t){var o=i(this);return o.hasClass(n)?void o.prop("checked",!1):(i(d).find(s+":checked, "+l+":checked").prop("checked",!1),void e.trigger("mediaPicker:change",i(t.target).next("label").text()))}).on("change",l,function(t){i(d).find(s+":checked, "+r+":checked").prop("checked",!1),e.trigger("mediaPicker:change",i(t.target).next("label").text())}),e.on("click",".fsStyleAccordionHeader",function(e){e.stopPropagation(),i(this).toggleClass(h)}),e.on("click",'.fsStyleAccordionHeader input[type="radio"], .fsStyleAccordionHeader label',function(e){e.stopPropagation(),i(this).closest(".fsStyleAccordionHeader").addClass(h)}),e.find(".fsMediaSettingsTypes").on("change","input[type=radio]",function(){var e=i(this).val();i(o+", "+a+", "+c).removeClass(n),e>=1&&3>=e&&i(o).each(function(){var s=i(this);t(s,e)?s.find(a).each(function(){var s=i(this);t(s,e)?s.find(c+'[data-mediatype!="'+e+'"]').addClass(n):s.addClass(n)}):s.addClass(n)})})}}(FS),/**
 * sifter.js
 * Copyright (c) 2013 Brian Reavis & contributors
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this
 * file except in compliance with the License. You may obtain a copy of the License at:
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under
 * the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF
 * ANY KIND, either express or implied. See the License for the specific language
 * governing permissions and limitations under the License.
 *
 * @author Brian Reavis <brian@thirdroute.com>
 */
function(e,t){"function"==typeof define&&define.amd?define("sifter",t):"object"==typeof exports?module.exports=t():e.Sifter=t()}(this,function(){var e=function(e,t){this.items=e,this.settings=t||{diacritics:!0}};e.prototype.tokenize=function(e){if(e=s(String(e||"").toLowerCase()),!e||!e.length)return[];var t,i,n,r,l=[],c=e.split(/ +/);for(t=0,i=c.length;i>t;t++){if(n=o(c[t]),this.settings.diacritics)for(r in a)a.hasOwnProperty(r)&&(n=n.replace(new RegExp(r,"g"),a[r]));l.push({string:c[t],regex:new RegExp(n,"i")})}return l},e.prototype.iterator=function(e,t){var i;i=r(e)?Array.prototype.forEach||function(e){for(var t=0,i=this.length;i>t;t++)e(this[t],t,this)}:function(e){for(var t in this)this.hasOwnProperty(t)&&e(this[t],t,this)},i.apply(e,[t])},e.prototype.getScoreFunction=function(e,t){var i,s,o,r,a;i=this,e=i.prepareSearch(e,t),o=e.tokens,s=e.options.fields,r=o.length,a=e.options.nesting;var l=function(e,t){var i,n;return e?(e=String(e||""),n=e.search(t.regex),-1===n?0:(i=t.string.length/e.length,0===n&&(i+=.5),i)):0},c=function(){var e=s.length;return e?1===e?function(e,t){return l(n(t,s[0],a),e)}:function(t,i){for(var o=0,r=0;e>o;o++)r+=l(n(i,s[o],a),t);return r/e}:function(){return 0}}();return r?1===r?function(e){return c(o[0],e)}:"and"===e.options.conjunction?function(e){for(var t,i=0,n=0;r>i;i++){if(t=c(o[i],e),0>=t)return 0;n+=t}return n/r}:function(e){for(var t=0,i=0;r>t;t++)i+=c(o[t],e);return i/r}:function(){return 0}},e.prototype.getSortFunction=function(e,i){var s,o,r,a,l,c,d,h,u,p,f;if(r=this,e=r.prepareSearch(e,i),f=!e.query&&i.sort_empty||i.sort,u=function(e,t){return"$score"===e?t.score:n(r.items[t.id],e,i.nesting)},l=[],f)for(s=0,o=f.length;o>s;s++)(e.query||"$score"!==f[s].field)&&l.push(f[s]);if(e.query){for(p=!0,s=0,o=l.length;o>s;s++)if("$score"===l[s].field){p=!1;break}p&&l.unshift({field:"$score",direction:"desc"})}else for(s=0,o=l.length;o>s;s++)if("$score"===l[s].field){l.splice(s,1);break}for(h=[],s=0,o=l.length;o>s;s++)h.push("desc"===l[s].direction?-1:1);return c=l.length,c?1===c?(a=l[0].field,d=h[0],function(e,i){return d*t(u(a,e),u(a,i))}):function(e,i){var n,s,o;for(n=0;c>n;n++)if(o=l[n].field,s=h[n]*t(u(o,e),u(o,i)))return s;return 0}:null},e.prototype.prepareSearch=function(e,t){if("object"==typeof e)return e;t=i({},t);var n=t.fields,s=t.sort,o=t.sort_empty;return n&&!r(n)&&(t.fields=[n]),s&&!r(s)&&(t.sort=[s]),o&&!r(o)&&(t.sort_empty=[o]),{options:t,query:String(e||"").toLowerCase(),tokens:this.tokenize(e),total:0,items:[]}},e.prototype.search=function(e,t){var i,n,s,o,r=this;return n=this.prepareSearch(e,t),t=n.options,e=n.query,o=t.score||r.getScoreFunction(n),e.length?r.iterator(r.items,function(e,s){i=o(e),(t.filter===!1||i>0)&&n.items.push({score:i,id:s})}):r.iterator(r.items,function(e,t){n.items.push({score:1,id:t})}),s=r.getSortFunction(n,t),s&&n.items.sort(s),n.total=n.items.length,"number"==typeof t.limit&&(n.items=n.items.slice(0,t.limit)),n};var t=function(e,t){return"number"==typeof e&&"number"==typeof t?e>t?1:t>e?-1:0:(e=l(String(e||"")),t=l(String(t||"")),e>t?1:t>e?-1:0)},i=function(e){var t,i,n,s;for(t=1,i=arguments.length;i>t;t++)if(s=arguments[t])for(n in s)s.hasOwnProperty(n)&&(e[n]=s[n]);return e},n=function(e,t,i){if(e&&t){if(!i)return e[t];for(var n=t.split(".");n.length&&(e=e[n.shift()]););return e}},s=function(e){return(e+"").replace(/^\s+|\s+$|/g,"")},o=function(e){return(e+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")},r=Array.isArray||"undefined"!=typeof $&&$.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},a={a:"[a\u1e00\u1e01\u0102\u0103\xc2\xe2\u01cd\u01ce\u023a\u2c65\u0226\u0227\u1ea0\u1ea1\xc4\xe4\xc0\xe0\xc1\xe1\u0100\u0101\xc3\xe3\xc5\xe5\u0105\u0104\xc3\u0105\u0104]",b:"[b\u2422\u03b2\u0392B\u0e3f\ud800\udf01\u16d2]",c:"[c\u0106\u0107\u0108\u0109\u010c\u010d\u010a\u010bC\u0304c\u0304\xc7\xe7\u1e08\u1e09\u023b\u023c\u0187\u0188\u0255\u1d04\uff23\uff43]",d:"[d\u010e\u010f\u1e0a\u1e0b\u1e10\u1e11\u1e0c\u1e0d\u1e12\u1e13\u1e0e\u1e0f\u0110\u0111D\u0326d\u0326\u0189\u0256\u018a\u0257\u018b\u018c\u1d6d\u1d81\u1d91\u0221\u1d05\uff24\uff44\xf0]",e:"[e\xc9\xe9\xc8\xe8\xca\xea\u1e18\u1e19\u011a\u011b\u0114\u0115\u1ebc\u1ebd\u1e1a\u1e1b\u1eba\u1ebb\u0116\u0117\xcb\xeb\u0112\u0113\u0228\u0229\u0118\u0119\u1d92\u0246\u0247\u0204\u0205\u1ebe\u1ebf\u1ec0\u1ec1\u1ec4\u1ec5\u1ec2\u1ec3\u1e1c\u1e1d\u1e16\u1e17\u1e14\u1e15\u0206\u0207\u1eb8\u1eb9\u1ec6\u1ec7\u2c78\u1d07\uff25\uff45\u0258\u01dd\u018f\u0190\u03b5]",f:"[f\u0191\u0192\u1e1e\u1e1f]",g:"[g\u0262\u20b2\u01e4\u01e5\u011c\u011d\u011e\u011f\u0122\u0123\u0193\u0260\u0120\u0121]",h:"[h\u0124\u0125\u0126\u0127\u1e28\u1e29\u1e96\u1e96\u1e24\u1e25\u1e22\u1e23\u0266\u02b0\u01f6\u0195]",i:"[i\xcd\xed\xcc\xec\u012c\u012d\xce\xee\u01cf\u01d0\xcf\xef\u1e2e\u1e2f\u0128\u0129\u012e\u012f\u012a\u012b\u1ec8\u1ec9\u0208\u0209\u020a\u020b\u1eca\u1ecb\u1e2c\u1e2d\u0197\u0268\u0268\u0306\u1d7b\u1d96\u0130iI\u0131\u026a\uff29\uff49]",j:"[j\u0237\u0134\u0135\u0248\u0249\u029d\u025f\u02b2]",k:"[k\u0198\u0199\ua740\ua741\u1e30\u1e31\u01e8\u01e9\u1e32\u1e33\u1e34\u1e35\u03ba\u03f0\u20ad]",l:"[l\u0141\u0142\u013d\u013e\u013b\u013c\u0139\u013a\u1e36\u1e37\u1e38\u1e39\u1e3c\u1e3d\u1e3a\u1e3b\u013f\u0140\u023d\u019a\u2c60\u2c61\u2c62\u026b\u026c\u1d85\u026d\u0234\u029f\uff2c\uff4c]",n:"[n\u0143\u0144\u01f8\u01f9\u0147\u0148\xd1\xf1\u1e44\u1e45\u0145\u0146\u1e46\u1e47\u1e4a\u1e4b\u1e48\u1e49N\u0308n\u0308\u019d\u0272\u0220\u019e\u1d70\u1d87\u0273\u0235\u0274\uff2e\uff4e\u014a\u014b]",o:"[o\xd8\xf8\xd6\xf6\xd3\xf3\xd2\xf2\xd4\xf4\u01d1\u01d2\u0150\u0151\u014e\u014f\u022e\u022f\u1ecc\u1ecd\u019f\u0275\u01a0\u01a1\u1ece\u1ecf\u014c\u014d\xd5\xf5\u01ea\u01eb\u020c\u020d\u0555\u0585]",p:"[p\u1e54\u1e55\u1e56\u1e57\u2c63\u1d7d\u01a4\u01a5\u1d71]",q:"[q\ua756\ua757\u02a0\u024a\u024b\ua758\ua759q\u0303]",r:"[r\u0154\u0155\u024c\u024d\u0158\u0159\u0156\u0157\u1e58\u1e59\u0210\u0211\u0212\u0213\u1e5a\u1e5b\u2c64\u027d]",s:"[s\u015a\u015b\u1e60\u1e61\u1e62\u1e63\ua7a8\ua7a9\u015c\u015d\u0160\u0161\u015e\u015f\u0218\u0219S\u0308s\u0308]",t:"[t\u0164\u0165\u1e6a\u1e6b\u0162\u0163\u1e6c\u1e6d\u01ae\u0288\u021a\u021b\u1e70\u1e71\u1e6e\u1e6f\u01ac\u01ad]",u:"[u\u016c\u016d\u0244\u0289\u1ee4\u1ee5\xdc\xfc\xda\xfa\xd9\xf9\xdb\xfb\u01d3\u01d4\u0170\u0171\u016c\u016d\u01af\u01b0\u1ee6\u1ee7\u016a\u016b\u0168\u0169\u0172\u0173\u0214\u0215\u222a]",v:"[v\u1e7c\u1e7d\u1e7e\u1e7f\u01b2\u028b\ua75e\ua75f\u2c71\u028b]",w:"[w\u1e82\u1e83\u1e80\u1e81\u0174\u0175\u1e84\u1e85\u1e86\u1e87\u1e88\u1e89]",x:"[x\u1e8c\u1e8d\u1e8a\u1e8b\u03c7]",y:"[y\xdd\xfd\u1ef2\u1ef3\u0176\u0177\u0178\xff\u1ef8\u1ef9\u1e8e\u1e8f\u1ef4\u1ef5\u024e\u024f\u01b3\u01b4]",z:"[z\u0179\u017a\u1e90\u1e91\u017d\u017e\u017b\u017c\u1e92\u1e93\u1e94\u1e95\u01b5\u01b6]"},l=function(){var e,t,i,n,s="",o={};for(i in a)if(a.hasOwnProperty(i))for(n=a[i].substring(2,a[i].length-1),s+=n,e=0,t=n.length;t>e;e++)o[n.charAt(e)]=i;var r=new RegExp("["+s+"]","g");return function(e){return e.replace(r,function(e){return o[e]}).toLowerCase()}}();return e}),/**
 * microplugin.js
 * Copyright (c) 2013 Brian Reavis & contributors
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this
 * file except in compliance with the License. You may obtain a copy of the License at:
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under
 * the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF
 * ANY KIND, either express or implied. See the License for the specific language
 * governing permissions and limitations under the License.
 *
 * @author Brian Reavis <brian@thirdroute.com>
 */
function(e,t){"function"==typeof define&&define.amd?define("microplugin",t):"object"==typeof exports?module.exports=t():e.MicroPlugin=t()}(this,function(){var e={};e.mixin=function(e){e.plugins={},e.prototype.initializePlugins=function(e){var i,n,s,o=this,r=[];if(o.plugins={names:[],settings:{},requested:{},loaded:{}},t.isArray(e))for(i=0,n=e.length;n>i;i++)"string"==typeof e[i]?r.push(e[i]):(o.plugins.settings[e[i].name]=e[i].options,r.push(e[i].name));else if(e)for(s in e)e.hasOwnProperty(s)&&(o.plugins.settings[s]=e[s],r.push(s));for(;r.length;)o.require(r.shift())},e.prototype.loadPlugin=function(t){var i=this,n=i.plugins,s=e.plugins[t];if(!e.plugins.hasOwnProperty(t))throw new Error('Unable to find "'+t+'" plugin');n.requested[t]=!0,n.loaded[t]=s.fn.apply(i,[i.plugins.settings[t]||{}]),n.names.push(t)},e.prototype.require=function(e){var t=this,i=t.plugins;if(!t.plugins.loaded.hasOwnProperty(e)){if(i.requested[e])throw new Error('Plugin has circular dependency ("'+e+'")');t.loadPlugin(e)}return i.loaded[e]},e.define=function(t,i){e.plugins[t]={name:t,fn:i}}};var t={isArray:Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}};return e}),/**
 * selectize.js (v0.12.3)
 * Copyright (c) 20132015 Brian Reavis & contributors
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this
 * file except in compliance with the License. You may obtain a copy of the License at:
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under
 * the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF
 * ANY KIND, either express or implied. See the License for the specific language
 * governing permissions and limitations under the License.
 *
 * @author Brian Reavis <brian@thirdroute.com>
 */
function(e,t){"function"==typeof define&&define.amd?define("selectize",["jquery","sifter","microplugin"],t):"object"==typeof exports?module.exports=t(require("jquery"),require("sifter"),require("microplugin")):e.Selectize=t(e.jQuery,e.Sifter,e.MicroPlugin)}(this,function(e,t,i){"use strict";var n=function(e,t){if("string"!=typeof t||t.length){var i="string"==typeof t?new RegExp(t,"i"):t,n=function(e){var t=0;if(3===e.nodeType){var s=e.data.search(i);if(s>=0&&e.data.length>0){var o=e.data.match(i),r=document.createElement("span");r.className="highlight";var a=e.splitText(s),l=(a.splitText(o[0].length),a.cloneNode(!0));r.appendChild(l),a.parentNode.replaceChild(r,a),t=1}}else if(1===e.nodeType&&e.childNodes&&!/(script|style)/i.test(e.tagName))for(var c=0;c<e.childNodes.length;++c)c+=n(e.childNodes[c]);return t};return e.each(function(){n(this)})}};jQuery.fn.removeHighlight=function(){return this.find("span.highlight").each(function(){this.parentNode.firstChild.nodeName;var e=this.parentNode;e.replaceChild(this.firstChild,this),e.normalize()}).end()};var s=function(){};s.prototype={on:function(e,t){this._events=this._events||{},this._events[e]=this._events[e]||[],this._events[e].push(t)},off:function(e,t){var i=arguments.length;return 0===i?delete this._events:1===i?delete this._events[e]:(this._events=this._events||{},void(e in this._events!=!1&&this._events[e].splice(this._events[e].indexOf(t),1)))},trigger:function(e){if(this._events=this._events||{},e in this._events!=!1)for(var t=0;t<this._events[e].length;t++)this._events[e][t].apply(this,Array.prototype.slice.call(arguments,1))}},s.mixin=function(e){for(var t=["on","off","trigger"],i=0;i<t.length;i++)e.prototype[t[i]]=s.prototype[t[i]]};var o=/Mac/.test(navigator.userAgent),r=65,a=13,l=27,c=37,d=38,h=80,u=39,p=40,f=78,m=8,g=46,v=16,b=o?91:17,y=o?18:17,w=9,_=1,k=2,x=!/android/i.test(window.navigator.userAgent)&&!!document.createElement("input").validity,C=function(e){return"undefined"!=typeof e},S=function(e){return"undefined"==typeof e||null===e?null:"boolean"==typeof e?e?"1":"0":e+""},T=function(e){return(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},D={};D.before=function(e,t,i){var n=e[t];e[t]=function(){return i.apply(e,arguments),n.apply(e,arguments)}},D.after=function(e,t,i){var n=e[t];e[t]=function(){var t=n.apply(e,arguments);return i.apply(e,arguments),t}};var P=function(e){var t=!1;return function(){t||(t=!0,e.apply(this,arguments))}},E=function(e,t){var i;return function(){var n=this,s=arguments;window.clearTimeout(i),i=window.setTimeout(function(){e.apply(n,s)},t)}},M=function(e,t,i){var n,s=e.trigger,o={};e.trigger=function(){var i=arguments[0];return-1===t.indexOf(i)?s.apply(e,arguments):void(o[i]=arguments)},i.apply(e,[]),e.trigger=s;for(n in o)o.hasOwnProperty(n)&&s.apply(e,o[n])},A=function(e,t,i,n){e.on(t,i,function(t){for(var i=t.target;i&&i.parentNode!==e[0];)i=i.parentNode;return t.currentTarget=i,n.apply(this,[t])})},I=function(e){var t={};if("selectionStart"in e)t.start=e.selectionStart,t.length=e.selectionEnd-t.start;else if(document.selection){e.focus();var i=document.selection.createRange(),n=document.selection.createRange().text.length;i.moveStart("character",-e.value.length),t.start=i.text.length-n,t.length=n}return t},j=function(e,t,i){var n,s,o={};if(i)for(n=0,s=i.length;s>n;n++)o[i[n]]=e.css(i[n]);else o=e.css();t.css(o)},L=function(t,i){if(!t)return 0;var n=e("<test>").css({position:"absolute",top:-99999,left:-99999,width:"auto",padding:0,whiteSpace:"pre"}).text(t).appendTo("body");j(i,n,["letterSpacing","fontSize","fontFamily","fontWeight","textTransform"]);var s=n.width();return n.remove(),s},O=function(e){var t=null,i=function(i,n){var s,o,r,a,l,c,d,h;i=i||window.event||{},n=n||{},i.metaKey||i.altKey||(n.force||e.data("grow")!==!1)&&(s=e.val(),i.type&&"keydown"===i.type.toLowerCase()&&(o=i.keyCode,r=o>=97&&122>=o||o>=65&&90>=o||o>=48&&57>=o||32===o,o===g||o===m?(h=I(e[0]),h.length?s=s.substring(0,h.start)+s.substring(h.start+h.length):o===m&&h.start?s=s.substring(0,h.start-1)+s.substring(h.start+1):o===g&&"undefined"!=typeof h.start&&(s=s.substring(0,h.start)+s.substring(h.start+1))):r&&(c=i.shiftKey,d=String.fromCharCode(i.keyCode),d=c?d.toUpperCase():d.toLowerCase(),s+=d)),a=e.attr("placeholder"),!s&&a&&(s=a),l=L(s,e)+4,l!==t&&(t=l,e.width(l),e.triggerHandler("resize")))};e.on("keydown keyup update blur",i),i()},$=function(e){var t=document.createElement("div");return t.appendChild(e.cloneNode(!0)),t.innerHTML},N=function(e,t){t||(t={});var i="Selectize";console.error(i+": "+e),t.explanation&&(console.group&&console.group(),console.error(t.explanation),console.group&&console.groupEnd())},F=function(i,n){var s,o,r,a,l=this;a=i[0],a.selectize=l;var c=window.getComputedStyle&&window.getComputedStyle(a,null);if(r=c?c.getPropertyValue("direction"):a.currentStyle&&a.currentStyle.direction,r=r||i.parents("[dir]:first").attr("dir")||"",e.extend(l,{order:0,settings:n,$input:i,tabIndex:i.attr("tabindex")||"",tagType:"select"===a.tagName.toLowerCase()?_:k,rtl:/rtl/i.test(r),eventNS:".selectize"+ ++F.count,highlightedValue:null,isOpen:!1,isDisabled:!1,isRequired:i.is("[required]"),isInvalid:!1,isLocked:!1,isFocused:!1,isInputHidden:!1,isSetup:!1,isShiftDown:!1,isCmdDown:!1,isCtrlDown:!1,ignoreFocus:!1,ignoreBlur:!1,ignoreHover:!1,hasOptions:!1,currentResults:null,lastValue:"",caretPos:0,loading:0,loadedSearches:{},$activeOption:null,$activeItems:[],optgroups:{},options:{},userOptions:{},items:[],renderCache:{},onSearchChange:null===n.loadThrottle?l.onSearchChange:E(l.onSearchChange,n.loadThrottle)}),l.sifter=new t(this.options,{diacritics:n.diacritics}),l.settings.options){for(s=0,o=l.settings.options.length;o>s;s++)l.registerOption(l.settings.options[s]);delete l.settings.options}if(l.settings.optgroups){for(s=0,o=l.settings.optgroups.length;o>s;s++)l.registerOptionGroup(l.settings.optgroups[s]);delete l.settings.optgroups}l.settings.mode=l.settings.mode||(1===l.settings.maxItems?"single":"multi"),"boolean"!=typeof l.settings.hideSelected&&(l.settings.hideSelected="multi"===l.settings.mode),l.initializePlugins(l.settings.plugins),l.setupCallbacks(),l.setupTemplates(),l.setup()};return s.mixin(F),"undefined"!=typeof i?i.mixin(F):N("Dependency MicroPlugin is missing",{explanation:'Make sure you either: (1) are using the "standalone" version of Selectize, or (2) require MicroPlugin before you load Selectize.'}),e.extend(F.prototype,{setup:function(){var t,i,n,s,r,a,l,c,d,h,u=this,p=u.settings,f=u.eventNS,m=e(window),g=e(document),w=u.$input;if(l=u.settings.mode,c=w.attr("class")||"",t=e("<div>").addClass(p.wrapperClass).addClass(c).addClass(l),i=e("<div>").addClass(p.inputClass).addClass("items").appendTo(t),n=e('<input type="text" autocomplete="off" />').appendTo(i).attr("tabindex",w.is(":disabled")?"-1":u.tabIndex),a=e(p.dropdownParent||t),s=e("<div>").addClass(p.dropdownClass).addClass(l).hide().appendTo(a),r=e("<div>").addClass(p.dropdownContentClass).appendTo(s),(h=w.attr("id"))&&(n.attr("id",h+"-selectized"),e("label[for='"+h+"']").attr("for",h+"-selectized")),u.settings.copyClassesToDropdown&&s.addClass(c),t.css({width:w[0].style.width}),u.plugins.names.length&&(d="plugin-"+u.plugins.names.join(" plugin-"),t.addClass(d),s.addClass(d)),(null===p.maxItems||p.maxItems>1)&&u.tagType===_&&w.attr("multiple","multiple"),u.settings.placeholder&&n.attr("placeholder",p.placeholder),!u.settings.splitOn&&u.settings.delimiter){var k=u.settings.delimiter.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");u.settings.splitOn=new RegExp("\\s*"+k+"+\\s*")}w.attr("autocorrect")&&n.attr("autocorrect",w.attr("autocorrect")),w.attr("autocapitalize")&&n.attr("autocapitalize",w.attr("autocapitalize")),u.$wrapper=t,u.$control=i,u.$control_input=n,u.$dropdown=s,u.$dropdown_content=r,s.on("mouseenter","[data-selectable]",function(){return u.onOptionHover.apply(u,arguments)}),s.on("mousedown click","[data-selectable]",function(){return u.onOptionSelect.apply(u,arguments)}),A(i,"mousedown","*:not(input)",function(){return u.onItemSelect.apply(u,arguments)}),O(n),i.on({mousedown:function(){return u.onMouseDown.apply(u,arguments)},click:function(){return u.onClick.apply(u,arguments)}}),n.on({mousedown:function(e){e.stopPropagation()},keydown:function(){return u.onKeyDown.apply(u,arguments)},keyup:function(){return u.onKeyUp.apply(u,arguments)},keypress:function(){return u.onKeyPress.apply(u,arguments)},resize:function(){u.positionDropdown.apply(u,[])},blur:function(){return u.onBlur.apply(u,arguments)},focus:function(){return u.ignoreBlur=!1,u.onFocus.apply(u,arguments)},paste:function(){return u.onPaste.apply(u,arguments)}}),g.on("keydown"+f,function(e){u.isCmdDown=e[o?"metaKey":"ctrlKey"],u.isCtrlDown=e[o?"altKey":"ctrlKey"],u.isShiftDown=e.shiftKey}),g.on("keyup"+f,function(e){e.keyCode===y&&(u.isCtrlDown=!1),e.keyCode===v&&(u.isShiftDown=!1),e.keyCode===b&&(u.isCmdDown=!1)}),g.on("mousedown"+f,function(e){if(u.isFocused){if(e.target===u.$dropdown[0]||e.target.parentNode===u.$dropdown[0])return!1;u.$control.has(e.target).length||e.target===u.$control[0]||u.blur(e.target)}}),m.on(["scroll"+f,"resize"+f].join(" "),function(){u.isOpen&&u.positionDropdown.apply(u,arguments)}),m.on("mousemove"+f,function(){u.ignoreHover=!1}),this.revertSettings={$children:w.children().detach(),tabindex:w.attr("tabindex")},w.attr("tabindex",-1).hide().after(u.$wrapper),e.isArray(p.items)&&(u.setValue(p.items),delete p.items),x&&w.on("invalid"+f,function(e){e.preventDefault(),u.isInvalid=!0,u.refreshState()}),u.updateOriginalInput(),u.refreshItems(),u.refreshState(),u.updatePlaceholder(),u.isSetup=!0,w.is(":disabled")&&u.disable(),u.on("change",this.onChange),w.data("selectize",u),w.addClass("selectized"),u.trigger("initialize"),p.preload===!0&&u.onSearchChange("")},setupTemplates:function(){var t=this,i=t.settings.labelField,n=t.settings.optgroupLabelField,s={optgroup:function(e){return'<div class="optgroup">'+e.html+"</div>"},optgroup_header:function(e,t){return'<div class="optgroup-header">'+t(e[n])+"</div>"},option:function(e,t){return'<div class="option">'+t(e[i])+"</div>"},item:function(e,t){return'<div class="item">'+t(e[i])+"</div>"},option_create:function(e,t){return'<div class="create">Add <strong>'+t(e.input)+"</strong>&hellip;</div>"}};t.settings.render=e.extend({},s,t.settings.render)},setupCallbacks:function(){var e,t,i={initialize:"onInitialize",change:"onChange",item_add:"onItemAdd",item_remove:"onItemRemove",clear:"onClear",option_add:"onOptionAdd",option_remove:"onOptionRemove",option_clear:"onOptionClear",optgroup_add:"onOptionGroupAdd",optgroup_remove:"onOptionGroupRemove",optgroup_clear:"onOptionGroupClear",dropdown_open:"onDropdownOpen",dropdown_close:"onDropdownClose",type:"onType",load:"onLoad",focus:"onFocus",blur:"onBlur"};for(e in i)i.hasOwnProperty(e)&&(t=this.settings[i[e]],t&&this.on(e,t))},onClick:function(e){var t=this;t.isFocused||(t.focus(),e.preventDefault())},onMouseDown:function(t){var i=this,n=t.isDefaultPrevented();e(t.target);if(i.isFocused){if(t.target!==i.$control_input[0])return"single"===i.settings.mode?i.isOpen?i.close():i.open():n||i.setActiveItem(null),!1}else n||window.setTimeout(function(){i.focus()},0)},onChange:function(){this.$input.trigger("change")},onPaste:function(t){var i=this;return i.isFull()||i.isInputHidden||i.isLocked?void t.preventDefault():void(i.settings.splitOn&&setTimeout(function(){var t=i.$control_input.val();if(t.match(i.settings.splitOn))for(var n=e.trim(t).split(i.settings.splitOn),s=0,o=n.length;o>s;s++)i.createItem(n[s])},0))},onKeyPress:function(e){if(this.isLocked)return e&&e.preventDefault();var t=String.fromCharCode(e.keyCode||e.which);return this.settings.create&&"multi"===this.settings.mode&&t===this.settings.delimiter?(this.createItem(),e.preventDefault(),!1):void 0},onKeyDown:function(e){var t=(e.target===this.$control_input[0],this);if(t.isLocked)return void(e.keyCode!==w&&e.preventDefault());switch(e.keyCode){case r:if(t.isCmdDown)return void t.selectAll();break;case l:return void(t.isOpen&&(e.preventDefault(),e.stopPropagation(),t.close()));case f:if(!e.ctrlKey||e.altKey)break;case p:if(!t.isOpen&&t.hasOptions)t.open();else if(t.$activeOption){t.ignoreHover=!0;var i=t.getAdjacentOption(t.$activeOption,1);i.length&&t.setActiveOption(i,!0,!0)}return void e.preventDefault();case h:if(!e.ctrlKey||e.altKey)break;case d:if(t.$activeOption){t.ignoreHover=!0;var n=t.getAdjacentOption(t.$activeOption,-1);n.length&&t.setActiveOption(n,!0,!0)}return void e.preventDefault();case a:return void(t.isOpen&&t.$activeOption&&(t.onOptionSelect({currentTarget:t.$activeOption}),e.preventDefault()));case c:return void t.advanceSelection(-1,e);case u:return void t.advanceSelection(1,e);case w:return t.settings.selectOnTab&&t.isOpen&&t.$activeOption&&(t.onOptionSelect({currentTarget:t.$activeOption}),t.isFull()||e.preventDefault()),void(t.settings.create&&t.createItem()&&e.preventDefault());case m:case g:return void t.deleteSelection(e)}return!t.isFull()&&!t.isInputHidden||(o?e.metaKey:e.ctrlKey)?void 0:void e.preventDefault()},onKeyUp:function(e){var t=this;if(t.isLocked)return e&&e.preventDefault();var i=t.$control_input.val()||"";t.lastValue!==i&&(t.lastValue=i,t.onSearchChange(i),t.refreshOptions(),t.trigger("type",i))},onSearchChange:function(e){var t=this,i=t.settings.load;i&&(t.loadedSearches.hasOwnProperty(e)||(t.loadedSearches[e]=!0,t.load(function(n){i.apply(t,[e,n])})))},onFocus:function(e){var t=this,i=t.isFocused;return t.isDisabled?(t.blur(),e&&e.preventDefault(),!1):void(t.ignoreFocus||(t.isFocused=!0,"focus"===t.settings.preload&&t.onSearchChange(""),i||t.trigger("focus"),t.$activeItems.length||(t.showInput(),t.setActiveItem(null),t.refreshOptions(!!t.settings.openOnFocus)),t.refreshState()))},onBlur:function(e,t){var i=this;if(i.isFocused&&(i.isFocused=!1,!i.ignoreFocus)){if(!i.ignoreBlur&&document.activeElement===i.$dropdown_content[0])return i.ignoreBlur=!0,void i.onFocus(e);var n=function(){i.close(),i.setTextboxValue(""),i.setActiveItem(null),i.setActiveOption(null),i.setCaret(i.items.length),i.refreshState(),t&&t.focus(),i.ignoreFocus=!1,i.trigger("blur")};i.ignoreFocus=!0,i.settings.create&&i.settings.createOnBlur?i.createItem(null,!1,n):n()}},onOptionHover:function(e){this.ignoreHover||this.setActiveOption(e.currentTarget,!1)},onOptionSelect:function(t){var i,n,s=this;t.preventDefault&&(t.preventDefault(),t.stopPropagation()),n=e(t.currentTarget),n.hasClass("create")?s.createItem(null,function(){s.settings.closeAfterSelect&&s.close()}):(i=n.attr("data-value"),"undefined"!=typeof i&&(s.lastQuery=null,s.setTextboxValue(""),s.addItem(i),s.settings.closeAfterSelect?s.close():!s.settings.hideSelected&&t.type&&/mouse/.test(t.type)&&s.setActiveOption(s.getOption(i))))},onItemSelect:function(e){var t=this;t.isLocked||"multi"===t.settings.mode&&(e.preventDefault(),t.setActiveItem(e.currentTarget,e))},load:function(e){var t=this,i=t.$wrapper.addClass(t.settings.loadingClass);t.loading++,e.apply(t,[function(e){t.loading=Math.max(t.loading-1,0),e&&e.length&&(t.addOption(e),t.refreshOptions(t.isFocused&&!t.isInputHidden)),t.loading||i.removeClass(t.settings.loadingClass),t.trigger("load",e)}])},setTextboxValue:function(e){var t=this.$control_input,i=t.val()!==e;i&&(t.val(e).triggerHandler("update"),this.lastValue=e)},getValue:function(){return this.tagType===_&&this.$input.attr("multiple")?this.items:this.items.join(this.settings.delimiter)},setValue:function(e,t){var i=t?[]:["change"];M(this,i,function(){this.clear(t),this.addItems(e,t)})},setActiveItem:function(t,i){var n,s,o,r,a,l,c,d,h=this;if("single"!==h.settings.mode){if(t=e(t),!t.length)return e(h.$activeItems).removeClass("active"),h.$activeItems=[],void(h.isFocused&&h.showInput());if(n=i&&i.type.toLowerCase(),"mousedown"===n&&h.isShiftDown&&h.$activeItems.length){for(d=h.$control.children(".active:last"),r=Array.prototype.indexOf.apply(h.$control[0].childNodes,[d[0]]),a=Array.prototype.indexOf.apply(h.$control[0].childNodes,[t[0]]),r>a&&(c=r,r=a,a=c),s=r;a>=s;s++)l=h.$control[0].childNodes[s],-1===h.$activeItems.indexOf(l)&&(e(l).addClass("active"),h.$activeItems.push(l));i.preventDefault()}else"mousedown"===n&&h.isCtrlDown||"keydown"===n&&this.isShiftDown?t.hasClass("active")?(o=h.$activeItems.indexOf(t[0]),h.$activeItems.splice(o,1),t.removeClass("active")):h.$activeItems.push(t.addClass("active")[0]):(e(h.$activeItems).removeClass("active"),h.$activeItems=[t.addClass("active")[0]]);h.hideInput(),this.isFocused||h.focus()}},setActiveOption:function(t,i,n){var s,o,r,a,l,c=this;c.$activeOption&&c.$activeOption.removeClass("active"),c.$activeOption=null,t=e(t),t.length&&(c.$activeOption=t.addClass("active"),!i&&C(i)||(s=c.$dropdown_content.height(),o=c.$activeOption.outerHeight(!0),i=c.$dropdown_content.scrollTop()||0,r=c.$activeOption.offset().top-c.$dropdown_content.offset().top+i,a=r,l=r-s+o,r+o>s+i?c.$dropdown_content.stop().animate({scrollTop:l},n?c.settings.scrollDuration:0):i>r&&c.$dropdown_content.stop().animate({scrollTop:a},n?c.settings.scrollDuration:0)))},selectAll:function(){var e=this;"single"!==e.settings.mode&&(e.$activeItems=Array.prototype.slice.apply(e.$control.children(":not(input)").addClass("active")),e.$activeItems.length&&(e.hideInput(),e.close()),e.focus())},hideInput:function(){var e=this;e.setTextboxValue(""),e.$control_input.css({opacity:0,position:"absolute",left:e.rtl?1e4:-1e4}),e.isInputHidden=!0},showInput:function(){this.$control_input.css({opacity:1,position:"relative",left:0}),this.isInputHidden=!1},focus:function(){var e=this;e.isDisabled||(e.ignoreFocus=!0,e.$control_input[0].focus(),window.setTimeout(function(){e.ignoreFocus=!1,e.onFocus()},0))},blur:function(e){this.$control_input[0].blur(),this.onBlur(null,e)},getScoreFunction:function(e){return this.sifter.getScoreFunction(e,this.getSearchOptions())},getSearchOptions:function(){var e=this.settings,t=e.sortField;return"string"==typeof t&&(t=[{field:t}]),{fields:e.searchField,conjunction:e.searchConjunction,sort:t}},search:function(t){var i,n,s,o=this,r=o.settings,a=this.getSearchOptions();if(r.score&&(s=o.settings.score.apply(this,[t]),"function"!=typeof s))throw new Error('Selectize "score" setting must be a function that returns a function');if(t!==o.lastQuery?(o.lastQuery=t,n=o.sifter.search(t,e.extend(a,{score:s})),o.currentResults=n):n=e.extend(!0,{},o.currentResults),r.hideSelected)for(i=n.items.length-1;i>=0;i--)-1!==o.items.indexOf(S(n.items[i].id))&&n.items.splice(i,1);return n},refreshOptions:function(t){var i,s,o,r,a,l,c,d,h,u,p,f,m,g,v,b;"undefined"==typeof t&&(t=!0);var y=this,w=e.trim(y.$control_input.val()),_=y.search(w),k=y.$dropdown_content,x=y.$activeOption&&S(y.$activeOption.attr("data-value"));for(r=_.items.length,"number"==typeof y.settings.maxOptions&&(r=Math.min(r,y.settings.maxOptions)),a={},l=[],i=0;r>i;i++)for(c=y.options[_.items[i].id],d=y.render("option",c),h=c[y.settings.optgroupField]||"",u=e.isArray(h)?h:[h],s=0,o=u&&u.length;o>s;s++)h=u[s],y.optgroups.hasOwnProperty(h)||(h=""),a.hasOwnProperty(h)||(a[h]=document.createDocumentFragment(),l.push(h)),a[h].appendChild(d);for(this.settings.lockOptgroupOrder&&l.sort(function(e,t){var i=y.optgroups[e].$order||0,n=y.optgroups[t].$order||0;return i-n}),p=document.createDocumentFragment(),i=0,r=l.length;r>i;i++)h=l[i],y.optgroups.hasOwnProperty(h)&&a[h].childNodes.length?(f=document.createDocumentFragment(),f.appendChild(y.render("optgroup_header",y.optgroups[h])),f.appendChild(a[h]),p.appendChild(y.render("optgroup",e.extend({},y.optgroups[h],{html:$(f),dom:f})))):p.appendChild(a[h]);if(k.html(p),y.settings.highlight&&_.query.length&&_.tokens.length)for(k.removeHighlight(),i=0,r=_.tokens.length;r>i;i++)n(k,_.tokens[i].regex);if(!y.settings.hideSelected)for(i=0,r=y.items.length;r>i;i++)y.getOption(y.items[i]).addClass("selected");m=y.canCreate(w),m&&(k.prepend(y.render("option_create",{input:w})),b=e(k[0].childNodes[0])),y.hasOptions=_.items.length>0||m,y.hasOptions?(_.items.length>0?(v=x&&y.getOption(x),v&&v.length?g=v:"single"===y.settings.mode&&y.items.length&&(g=y.getOption(y.items[0])),g&&g.length||(g=b&&!y.settings.addPrecedence?y.getAdjacentOption(b,1):k.find("[data-selectable]:first"))):g=b,y.setActiveOption(g),t&&!y.isOpen&&y.open()):(y.setActiveOption(null),t&&y.isOpen&&y.close())},addOption:function(t){var i,n,s,o=this;if(e.isArray(t))for(i=0,n=t.length;n>i;i++)o.addOption(t[i]);else(s=o.registerOption(t))&&(o.userOptions[s]=!0,o.lastQuery=null,o.trigger("option_add",s,t))},registerOption:function(e){var t=S(e[this.settings.valueField]);return"undefined"==typeof t||null===t||this.options.hasOwnProperty(t)?!1:(e.$order=e.$order||++this.order,this.options[t]=e,t)},registerOptionGroup:function(e){var t=S(e[this.settings.optgroupValueField]);return t?(e.$order=e.$order||++this.order,this.optgroups[t]=e,t):!1},addOptionGroup:function(e,t){t[this.settings.optgroupValueField]=e,(e=this.registerOptionGroup(t))&&this.trigger("optgroup_add",e,t)},removeOptionGroup:function(e){this.optgroups.hasOwnProperty(e)&&(delete this.optgroups[e],this.renderCache={},this.trigger("optgroup_remove",e))},clearOptionGroups:function(){this.optgroups={},this.renderCache={},this.trigger("optgroup_clear")},updateOption:function(t,i){var n,s,o,r,a,l,c,d=this;if(t=S(t),o=S(i[d.settings.valueField]),null!==t&&d.options.hasOwnProperty(t)){if("string"!=typeof o)throw new Error("Value must be set in option data");c=d.options[t].$order,o!==t&&(delete d.options[t],r=d.items.indexOf(t),-1!==r&&d.items.splice(r,1,o)),i.$order=i.$order||c,d.options[o]=i,a=d.renderCache.item,l=d.renderCache.option,a&&(delete a[t],delete a[o]),l&&(delete l[t],delete l[o]),-1!==d.items.indexOf(o)&&(n=d.getItem(t),s=e(d.render("item",i)),n.hasClass("active")&&s.addClass("active"),n.replaceWith(s)),d.lastQuery=null,d.isOpen&&d.refreshOptions(!1)}},removeOption:function(e,t){var i=this;e=S(e);var n=i.renderCache.item,s=i.renderCache.option;n&&delete n[e],s&&delete s[e],delete i.userOptions[e],delete i.options[e],i.lastQuery=null,i.trigger("option_remove",e),i.removeItem(e,t)},clearOptions:function(e){var t=this;t.loadedSearches={},t.userOptions={},t.renderCache={},t.options=t.sifter.items={},t.lastQuery=null,t.trigger("option_clear"),t.clear(e)},getOption:function(e){return this.getElementWithValue(e,this.$dropdown_content.find("[data-selectable]"))},getAdjacentOption:function(t,i){var n=this.$dropdown.find("[data-selectable]"),s=n.index(t)+i;return s>=0&&s<n.length?n.eq(s):e()},getElementWithValue:function(t,i){if(t=S(t),"undefined"!=typeof t&&null!==t)for(var n=0,s=i.length;s>n;n++)if(i[n].getAttribute("data-value")===t)return e(i[n]);return e()},getItem:function(e){return this.getElementWithValue(e,this.$control.children())},addItems:function(t,i){for(var n=e.isArray(t)?t:[t],s=0,o=n.length;o>s;s++)this.isPending=o-1>s,this.addItem(n[s],i)},addItem:function(t,i){var n=i?[]:["change"];M(this,n,function(){var n,s,o,r,a,l=this,c=l.settings.mode;return t=S(t),-1!==l.items.indexOf(t)?void("single"===c&&l.close()):void(l.options.hasOwnProperty(t)&&("single"===c&&l.clear(i),"multi"===c&&l.isFull()||(n=e(l.render("item",l.options[t])),a=l.isFull(),l.items.splice(l.caretPos,0,t),l.insertAtCaret(n),(!l.isPending||!a&&l.isFull())&&l.refreshState(),l.isSetup&&(o=l.$dropdown_content.find("[data-selectable]"),l.isPending||(s=l.getOption(t),r=l.getAdjacentOption(s,1).attr("data-value"),l.refreshOptions(l.isFocused&&"single"!==c),r&&l.setActiveOption(l.getOption(r))),!o.length||l.isFull()?l.close():l.positionDropdown(),l.updatePlaceholder(),l.trigger("item_add",t,n),l.updateOriginalInput({silent:i})))))})},removeItem:function(e,t){var i,n,s,o=this;i="object"==typeof e?e:o.getItem(e),e=S(i.attr("data-value")),n=o.items.indexOf(e),-1!==n&&(i.remove(),i.hasClass("active")&&(s=o.$activeItems.indexOf(i[0]),o.$activeItems.splice(s,1)),o.items.splice(n,1),o.lastQuery=null,!o.settings.persist&&o.userOptions.hasOwnProperty(e)&&o.removeOption(e,t),n<o.caretPos&&o.setCaret(o.caretPos-1),o.refreshState(),o.updatePlaceholder(),o.updateOriginalInput({silent:t}),o.positionDropdown(),o.trigger("item_remove",e,i))},createItem:function(t,i){var n=this,s=n.caretPos;t=t||e.trim(n.$control_input.val()||"");var o=arguments[arguments.length-1];if("function"!=typeof o&&(o=function(){}),"boolean"!=typeof i&&(i=!0),!n.canCreate(t))return o(),!1;n.lock();var r="function"==typeof n.settings.create?this.settings.create:function(e){var t={};return t[n.settings.labelField]=e,t[n.settings.valueField]=e,t},a=P(function(e){if(n.unlock(),!e||"object"!=typeof e)return o();var t=S(e[n.settings.valueField]);return"string"!=typeof t?o():(n.setTextboxValue(""),n.addOption(e),n.setCaret(s),n.addItem(t),n.refreshOptions(i&&"single"!==n.settings.mode),void o(e))}),l=r.apply(this,[t,a]);return"undefined"!=typeof l&&a(l),!0},refreshItems:function(){this.lastQuery=null,this.isSetup&&this.addItem(this.items),this.refreshState(),this.updateOriginalInput()},refreshState:function(){this.refreshValidityState(),this.refreshClasses()},refreshValidityState:function(){if(!this.isRequired)return!1;var e=!this.items.length;this.isInvalid=e,this.$control_input.prop("required",e),this.$input.prop("required",!e)},refreshClasses:function(){var t=this,i=t.isFull(),n=t.isLocked;t.$wrapper.toggleClass("rtl",t.rtl),t.$control.toggleClass("focus",t.isFocused).toggleClass("disabled",t.isDisabled).toggleClass("required",t.isRequired).toggleClass("invalid",t.isInvalid).toggleClass("locked",n).toggleClass("full",i).toggleClass("not-full",!i).toggleClass("input-active",t.isFocused&&!t.isInputHidden).toggleClass("dropdown-active",t.isOpen).toggleClass("has-options",!e.isEmptyObject(t.options)).toggleClass("has-items",t.items.length>0),t.$control_input.data("grow",!i&&!n)},isFull:function(){return null!==this.settings.maxItems&&this.items.length>=this.settings.maxItems},updateOriginalInput:function(e){var t,i,n,s,o=this;if(e=e||{},o.tagType===_){for(n=[],t=0,i=o.items.length;i>t;t++)s=o.options[o.items[t]][o.settings.labelField]||"",n.push('<option value="'+T(o.items[t])+'" selected="selected">'+T(s)+"</option>");n.length||this.$input.attr("multiple")||n.push('<option value="" selected="selected"></option>'),o.$input.html(n.join(""))}else o.$input.val(o.getValue()),o.$input.attr("value",o.$input.val());o.isSetup&&(e.silent||o.trigger("change",o.$input.val()))},updatePlaceholder:function(){if(this.settings.placeholder){var e=this.$control_input;this.items.length?e.removeAttr("placeholder"):e.attr("placeholder",this.settings.placeholder),e.triggerHandler("update",{force:!0})}},open:function(){var e=this;e.isLocked||e.isOpen||"multi"===e.settings.mode&&e.isFull()||(e.focus(),e.isOpen=!0,e.refreshState(),e.$dropdown.css({visibility:"hidden",display:"block"}),e.positionDropdown(),e.$dropdown.css({visibility:"visible"}),e.trigger("dropdown_open",e.$dropdown))},close:function(){var e=this,t=e.isOpen;"single"===e.settings.mode&&e.items.length&&(e.hideInput(),e.$control_input.blur()),e.isOpen=!1,e.$dropdown.hide(),e.setActiveOption(null),e.refreshState(),t&&e.trigger("dropdown_close",e.$dropdown)},positionDropdown:function(){var e=this.$control,t="body"===this.settings.dropdownParent?e.offset():e.position();t.top+=e.outerHeight(!0),this.$dropdown.css({width:e.outerWidth(),top:t.top,left:t.left})},clear:function(e){var t=this;t.items.length&&(t.$control.children(":not(input)").remove(),t.items=[],t.lastQuery=null,t.setCaret(0),t.setActiveItem(null),t.updatePlaceholder(),t.updateOriginalInput({silent:e}),t.refreshState(),t.showInput(),t.trigger("clear"))},insertAtCaret:function(t){var i=Math.min(this.caretPos,this.items.length);0===i?this.$control.prepend(t):e(this.$control[0].childNodes[i]).before(t),this.setCaret(i+1)},deleteSelection:function(t){var i,n,s,o,r,a,l,c,d,h=this;if(s=t&&t.keyCode===m?-1:1,o=I(h.$control_input[0]),h.$activeOption&&!h.settings.hideSelected&&(l=h.getAdjacentOption(h.$activeOption,-1).attr("data-value")),r=[],h.$activeItems.length){for(d=h.$control.children(".active:"+(s>0?"last":"first")),a=h.$control.children(":not(input)").index(d),s>0&&a++,i=0,n=h.$activeItems.length;n>i;i++)r.push(e(h.$activeItems[i]).attr("data-value"));t&&(t.preventDefault(),t.stopPropagation())}else(h.isFocused||"single"===h.settings.mode)&&h.items.length&&(0>s&&0===o.start&&0===o.length?r.push(h.items[h.caretPos-1]):s>0&&o.start===h.$control_input.val().length&&r.push(h.items[h.caretPos]));if(!r.length||"function"==typeof h.settings.onDelete&&h.settings.onDelete.apply(h,[r])===!1)return!1;for("undefined"!=typeof a&&h.setCaret(a);r.length;)h.removeItem(r.pop());return h.showInput(),h.positionDropdown(),h.refreshOptions(!0),l&&(c=h.getOption(l),c.length&&h.setActiveOption(c)),!0},advanceSelection:function(e,t){var i,n,s,o,r,a,l=this;0!==e&&(l.rtl&&(e*=-1),i=e>0?"last":"first",n=I(l.$control_input[0]),l.isFocused&&!l.isInputHidden?(o=l.$control_input.val().length,r=0>e?0===n.start&&0===n.length:n.start===o,r&&!o&&l.advanceCaret(e,t)):(a=l.$control.children(".active:"+i),a.length&&(s=l.$control.children(":not(input)").index(a),l.setActiveItem(null),l.setCaret(e>0?s+1:s))))},advanceCaret:function(e,t){var i,n,s=this;0!==e&&(i=e>0?"next":"prev",s.isShiftDown?(n=s.$control_input[i](),n.length&&(s.hideInput(),s.setActiveItem(n),t&&t.preventDefault())):s.setCaret(s.caretPos+e))},setCaret:function(t){var i=this;if(t="single"===i.settings.mode?i.items.length:Math.max(0,Math.min(i.items.length,t)),!i.isPending){var n,s,o,r;for(o=i.$control.children(":not(input)"),n=0,s=o.length;s>n;n++)r=e(o[n]).detach(),t>n?i.$control_input.before(r):i.$control.append(r)}i.caretPos=t},lock:function(){this.close(),this.isLocked=!0,this.refreshState()},unlock:function(){this.isLocked=!1,this.refreshState()},disable:function(){var e=this;e.$input.prop("disabled",!0),e.$control_input.prop("disabled",!0).prop("tabindex",-1),e.isDisabled=!0,e.lock()},enable:function(){var e=this;e.$input.prop("disabled",!1),e.$control_input.prop("disabled",!1).prop("tabindex",e.tabIndex),e.isDisabled=!1,e.unlock()},destroy:function(){var t=this,i=t.eventNS,n=t.revertSettings;t.trigger("destroy"),t.off(),t.$wrapper.remove(),t.$dropdown.remove(),t.$input.html("").append(n.$children).removeAttr("tabindex").removeClass("selectized").attr({tabindex:n.tabindex}).show(),t.$control_input.removeData("grow"),t.$input.removeData("selectize"),e(window).off(i),e(document).off(i),e(document.body).off(i),delete t.$input[0].selectize},render:function(t,i){var n,s,o="",r=!1,a=this;return"option"!==t&&"item"!==t||(n=S(i[a.settings.valueField]),r=!!n),r&&(C(a.renderCache[t])||(a.renderCache[t]={}),a.renderCache[t].hasOwnProperty(n))?a.renderCache[t][n]:(o=e(a.settings.render[t].apply(this,[i,T])),"option"===t||"option_create"===t?o.attr("data-selectable",""):"optgroup"===t&&(s=i[a.settings.optgroupValueField]||"",o.attr("data-group",s)),"option"!==t&&"item"!==t||o.attr("data-value",n||""),r&&(a.renderCache[t][n]=o[0]),o[0])},clearCache:function(e){var t=this;"undefined"==typeof e?t.renderCache={}:delete t.renderCache[e]},canCreate:function(e){var t=this;if(!t.settings.create)return!1;var i=t.settings.createFilter;return e.length&&("function"!=typeof i||i.apply(t,[e]))&&("string"!=typeof i||new RegExp(i).test(e))&&(!(i instanceof RegExp)||i.test(e))}}),F.count=0,F.defaults={options:[],optgroups:[],plugins:[],delimiter:",",splitOn:null,persist:!0,diacritics:!0,create:!1,createOnBlur:!1,createFilter:null,highlight:!0,openOnFocus:!0,maxOptions:1e3,maxItems:null,hideSelected:null,addPrecedence:!1,selectOnTab:!1,preload:!1,allowEmptyOption:!1,closeAfterSelect:!1,scrollDuration:60,loadThrottle:300,loadingClass:"loading",dataAttr:"data-data",optgroupField:"optgroup",valueField:"value",labelField:"text",optgroupLabelField:"label",optgroupValueField:"value",lockOptgroupOrder:!1,sortField:"$order",searchField:["text"],searchConjunction:"and",mode:null,wrapperClass:"selectize-control",inputClass:"selectize-input",dropdownClass:"selectize-dropdown",dropdownContentClass:"selectize-dropdown-content",dropdownParent:null,copyClassesToDropdown:!0,render:{}},e.fn.selectize=function(t){var i=e.fn.selectize.defaults,n=e.extend({},i,t),s=n.dataAttr,o=n.labelField,r=n.valueField,a=n.optgroupField,l=n.optgroupLabelField,c=n.optgroupValueField,d=function(t,i){var a,l,c,d,h=t.attr(s);if(h)for(i.options=JSON.parse(h),a=0,l=i.options.length;l>a;a++)i.items.push(i.options[a][r]);else{var u=e.trim(t.val()||"");if(!n.allowEmptyOption&&!u.length)return;for(c=u.split(n.delimiter),a=0,l=c.length;l>a;a++)d={},d[o]=c[a],d[r]=c[a],i.options.push(d);i.items=c}},h=function(t,i){var d,h,u,p,f=i.options,m={},g=function(e){var t=s&&e.attr(s);return"string"==typeof t&&t.length?JSON.parse(t):null},v=function(t,s){t=e(t);var l=S(t.val());
if(l||n.allowEmptyOption)if(m.hasOwnProperty(l)){if(s){var c=m[l][a];c?e.isArray(c)?c.push(s):m[l][a]=[c,s]:m[l][a]=s}}else{var d=g(t)||{};d[o]=d[o]||t.text(),d[r]=d[r]||l,d[a]=d[a]||s,m[l]=d,f.push(d),t.is(":selected")&&i.items.push(l)}},b=function(t){var n,s,o,r,a;for(t=e(t),o=t.attr("label"),o&&(r=g(t)||{},r[l]=o,r[c]=o,i.optgroups.push(r)),a=e("option",t),n=0,s=a.length;s>n;n++)v(a[n],o)};for(i.maxItems=t.attr("multiple")?null:1,p=t.children(),d=0,h=p.length;h>d;d++)u=p[d].tagName.toLowerCase(),"optgroup"===u?b(p[d]):"option"===u&&v(p[d])};return this.each(function(){if(!this.selectize){var s,o=e(this),r=this.tagName.toLowerCase(),a=o.attr("placeholder")||o.attr("data-placeholder");a||n.allowEmptyOption||(a=o.children('option[value=""]').text());var l={placeholder:a,options:[],optgroups:[],items:[]};"select"===r?h(o,l):d(o,l),s=new F(o,e.extend(!0,{},i,l,t))}})},e.fn.selectize.defaults=F.defaults,e.fn.selectize.support={validity:x},F.define("drag_drop",function(){if(!e.fn.sortable)throw new Error('The "drag_drop" plugin requires jQuery UI "sortable".');if("multi"===this.settings.mode){var t=this;t.lock=function(){var e=t.lock;return function(){var i=t.$control.data("sortable");return i&&i.disable(),e.apply(t,arguments)}}(),t.unlock=function(){var e=t.unlock;return function(){var i=t.$control.data("sortable");return i&&i.enable(),e.apply(t,arguments)}}(),t.setup=function(){var i=t.setup;return function(){i.apply(this,arguments);var n=t.$control.sortable({items:"[data-value]",forcePlaceholderSize:!0,disabled:t.isLocked,start:function(e,t){t.placeholder.css("width",t.helper.css("width")),n.css({overflow:"visible"})},stop:function(){n.css({overflow:"hidden"});var i=t.$activeItems?t.$activeItems.slice():null,s=[];n.children("[data-value]").each(function(){s.push(e(this).attr("data-value"))}),t.setValue(s),t.setActiveItem(i)}})}}()}}),F.define("dropdown_header",function(t){var i=this;t=e.extend({title:"Untitled",headerClass:"selectize-dropdown-header",titleRowClass:"selectize-dropdown-header-title",labelClass:"selectize-dropdown-header-label",closeClass:"selectize-dropdown-header-close",html:function(e){return'<div class="'+e.headerClass+'"><div class="'+e.titleRowClass+'"><span class="'+e.labelClass+'">'+e.title+'</span><a href="javascript:void(0)" class="'+e.closeClass+'">&times;</a></div></div>'}},t),i.setup=function(){var n=i.setup;return function(){n.apply(i,arguments),i.$dropdown_header=e(t.html(t)),i.$dropdown.prepend(i.$dropdown_header)}}()}),F.define("optgroup_columns",function(t){var i=this;t=e.extend({equalizeWidth:!0,equalizeHeight:!0},t),this.getAdjacentOption=function(t,i){var n=t.closest("[data-group]").find("[data-selectable]"),s=n.index(t)+i;return s>=0&&s<n.length?n.eq(s):e()},this.onKeyDown=function(){var e=i.onKeyDown;return function(t){var n,s,o,r;return!this.isOpen||t.keyCode!==c&&t.keyCode!==u?e.apply(this,arguments):(i.ignoreHover=!0,r=this.$activeOption.closest("[data-group]"),n=r.find("[data-selectable]").index(this.$activeOption),r=t.keyCode===c?r.prev("[data-group]"):r.next("[data-group]"),o=r.find("[data-selectable]"),s=o.eq(Math.min(o.length-1,n)),void(s.length&&this.setActiveOption(s)))}}();var n=function(){var e,t=n.width,i=document;return"undefined"==typeof t&&(e=i.createElement("div"),e.innerHTML='<div style="width:50px;height:50px;position:absolute;left:-50px;top:-50px;overflow:auto;"><div style="width:1px;height:100px;"></div></div>',e=e.firstChild,i.body.appendChild(e),t=n.width=e.offsetWidth-e.clientWidth,i.body.removeChild(e)),t},s=function(){var s,o,r,a,l,c,d;if(d=e("[data-group]",i.$dropdown_content),o=d.length,o&&i.$dropdown_content.width()){if(t.equalizeHeight){for(r=0,s=0;o>s;s++)r=Math.max(r,d.eq(s).height());d.css({height:r})}t.equalizeWidth&&(c=i.$dropdown_content.innerWidth()-n(),a=Math.round(c/o),d.css({width:a}),o>1&&(l=c-a*(o-1),d.eq(o-1).css({width:l})))}};(t.equalizeHeight||t.equalizeWidth)&&(D.after(this,"positionDropdown",s),D.after(this,"refreshOptions",s))}),F.define("remove_button",function(t){t=e.extend({label:"&times;",title:"Remove",className:"remove",append:!0},t);var i=function(t,i){i.className="remove-single";var n=t,s='<a href="javascript:void(0)" class="'+i.className+'" tabindex="-1" title="'+T(i.title)+'">'+i.label+"</a>",o=function(e,t){return e+t};t.setup=function(){var r=n.setup;return function(){if(i.append){var a=e(n.$input.context).attr("id"),l=(e("#"+a),n.settings.render.item);n.settings.render.item=function(){return o(l.apply(t,arguments),s)}}r.apply(t,arguments),t.$control.on("click","."+i.className,function(e){e.preventDefault(),n.isLocked||n.clear()})}}()},n=function(t,i){var n=t,s='<a href="javascript:void(0)" class="'+i.className+'" tabindex="-1" title="'+T(i.title)+'">'+i.label+"</a>",o=function(e,t){var i=e.search(/(<\/[^>]+>\s*)$/);return e.substring(0,i)+t+e.substring(i)};t.setup=function(){var r=n.setup;return function(){if(i.append){var a=n.settings.render.item;n.settings.render.item=function(){return o(a.apply(t,arguments),s)}}r.apply(t,arguments),t.$control.on("click","."+i.className,function(t){if(t.preventDefault(),!n.isLocked){var i=e(t.currentTarget).parent();n.setActiveItem(i),n.deleteSelection()&&n.setCaret(n.items.length)}})}}()};return"single"===this.settings.mode?void i(this,t):void n(this,t)}),F.define("restore_on_backspace",function(e){var t=this;e.text=e.text||function(e){return e[this.settings.labelField]},this.onKeyDown=function(){var i=t.onKeyDown;return function(t){var n,s;return t.keyCode===m&&""===this.$control_input.val()&&!this.$activeItems.length&&(n=this.caretPos-1,n>=0&&n<this.items.length)?(s=this.options[this.items[n]],this.deleteSelection(t)&&(this.setTextboxValue(e.text.apply(this,[s])),this.refreshOptions(!0)),void t.preventDefault()):i.apply(this,arguments)}}()}),F}),Selectize.define("fsSelectize",function(){"use strict";function e(e){var i,n=$(t.$control[0]).find(".fsNumSelected");i=e+" selected",n.length?e>0?n.html(i):n.remove():t.$control.prepend('<div class="fsNumSelected">'+i+"</div>")}var t=this,i=37,n=39,s=8,o=46;t.onKeyDown=function(){var e=t.onKeyDown;return function(r){switch(r.keyCode){case s:case o:"single"==t.settings.mode?t.clear():$(r.target.parentElement).find(".active").length>0&&(t.clear(),t.trigger("item_remove","multiselect-none"));break;case i:case n:return;default:return e.apply(t,[r])}}}(),t.onOptionSelect=function(){var i=t.onOptionSelect,n=!1;return function(s){var o;if(s.preventDefault&&(s.preventDefault(),s.stopPropagation()),"mousedown"==s.type)n=!0;else if("click"==s.type&&n)return void(n=!1);if(o=$(s.currentTarget),o.hasClass("selected")){if("single"==t.settings.mode)return;t.removeItem(o),o.removeClass("selected"),t.refreshOptions(),e(t.items.length),t.positionDropdown()}else{var r=o.attr("data-value");"selectAll"==r?(t.addAllItems(),t.trigger("item_add","multiselect-all","x")):"selectNone"==r?(t.clear(),$(t.$dropdown_content[0]).find(".option.selected").removeClass("selected"),t.trigger("item_remove","multiselect-none")):i.apply(t,[s])}}}(),t.refreshOptions=function(){var e=t.refreshOptions;return function(i){if(e.apply(t,[i]),"multi"==t.settings.mode&&0==t.$control_input.val().length){var n,s=$(t)[0].$input.data("maxitems"),o=$(t.$dropdown_content[0]).find(".option:not(.fsSelectAll)").length;o==t.items.length?n="None":(null==s||s>o)&&(n="All"),n&&$('<div class="fsSelectAll option" data-selectable="" data-value="select'+n+'"> - Select '+n+" - </div>").prependTo(t.$dropdown_content)}var r=$.map(t.items,function(e){return t.options[e].text});$(t.$control).prop("title",r.join(", "))}}(),t.addItem=function(){var e=t.addItem;return function(){if("multi"==t.settings.mode){if(t.isFull())return void alert("This field is limited to "+t.settings.maxItems+" items.");var i=t.settings.maxItems;t.settings.maxItems=null,e.apply(t,arguments),t.settings.maxItems=i}else e.apply(t,arguments)}}(),t.open=function(){var e=t.open;return function(){var i=t.settings.maxItems;t.settings.maxItems=null,e.apply(t),t.settings.maxItems=i}}(),t.insertAtCaret=function(){return function(){e(t.items.length)}}(),t.clear=function(){var e=t.clear;return function(){var i=t.items.length;e.apply(t,arguments),i&&(t.refreshOptions(),t.positionDropdown())}}(),t.addAllItems=function(){var i;$(t.$dropdown_content[0]).find(".option:not(.selected, .fsSelectAll)").each(function(e,n){i=$(n).attr("data-value"),-1==t.items.indexOf(i)&&t.options.hasOwnProperty(i)&&!t.isFull()&&t.items.splice(t.caretPos,0,i)}),e(t.items.length),t.refreshState(),t.positionDropdown(),t.updatePlaceholder(),t.updateOriginalInput(),t.refreshOptions()}}),function(){function e(e){for(;e;){if("DIALOG"==e.nodeName.toUpperCase())return e;e=e.parentElement}return null}function t(e){e&&e.blur&&e!=document.body&&e.blur()}function i(e,t){for(var i=0;i<e.length;++i)if(e[i]==t)return!0;return!1}function n(e){if(this.dialog_=e,this.replacedStyleTop_=!1,this.openAsModal_=!1,e.hasAttribute("role")||e.setAttribute("role","dialog"),e.show=this.show.bind(this),e.showModal=this.showModal.bind(this),e.close=this.close.bind(this),"returnValue"in e||(e.returnValue=""),this.maybeHideModal=this.maybeHideModal.bind(this),"MutationObserver"in window){var t=new MutationObserver(this.maybeHideModal);t.observe(e,{attributes:!0,attributeFilter:["open"]})}else e.addEventListener("DOMAttrModified",this.maybeHideModal);Object.defineProperty(e,"open",{set:this.setOpen.bind(this),get:e.hasAttribute.bind(e,"open")}),this.backdrop_=document.createElement("div"),this.backdrop_.className="fsDialogBackdrop",this.backdropClick_=this.backdropClick_.bind(this)}var s=window.CustomEvent;s&&"object"!=typeof s||(s=function(e,t){t=t||{};var i=document.createEvent("CustomEvent");return i.initCustomEvent(e,!!t.bubbles,!!t.cancelable,t.detail||null),i},s.prototype=window.Event.prototype),n.prototype={get dialog(){return this.dialog_},maybeHideModal:function(){this.openAsModal_&&(this.dialog_.hasAttribute("open")&&document.body.contains(this.dialog_)||(this.openAsModal_=!1,this.dialog_.style.zIndex="",this.replacedStyleTop_&&(this.dialog_.style.top="",this.replacedStyleTop_=!1),this.backdrop_.removeEventListener("click",this.backdropClick_),this.backdrop_.parentElement&&this.backdrop_.parentElement.removeChild(this.backdrop_),o.dm.removeDialog(this)))},setOpen:function(e){e?this.dialog_.hasAttribute("open")||this.dialog_.setAttribute("open",""):(this.dialog_.removeAttribute("open"),this.maybeHideModal())},backdropClick_:function(e){var t=document.createEvent("MouseEvents");t.initMouseEvent(e.type,e.bubbles,e.cancelable,window,e.detail,e.screenX,e.screenY,e.clientX,e.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.button,e.relatedTarget),this.dialog_.dispatchEvent(t),e.stopPropagation()},updateZIndex:function(e,t){this.backdrop_.style.zIndex=e,this.dialog_.style.zIndex=t},show:function(){this.setOpen(!0)},showModal:function(){if(this.dialog_.hasAttribute("open"))throw new Error("Failed to execute 'showModal' on dialog: The element is already open, and therefore cannot be opened modally.");if(!document.body.contains(this.dialog_))throw new Error("Failed to execute 'showModal' on dialog: The element is not in a Document.");if(!o.dm.pushDialog(this))throw new Error("Failed to execute 'showModal' on dialog: There are too many open modal dialogs.");this.show(),this.openAsModal_=!0,o.needsCentering(this.dialog_)?(o.reposition(this.dialog_),this.replacedStyleTop_=!0):this.replacedStyleTop_=!1,this.backdrop_.addEventListener("click",this.backdropClick_),this.dialog_.parentNode.insertBefore(this.backdrop_,this.dialog_.nextSibling);var e=this.dialog_.querySelector("[autofocus]:not([disabled])");if(!e){var i=["button","input","keygen","select","textarea"],n=i.map(function(e){return e+":not([disabled])"}).join(", ");e=this.dialog_.querySelector(n)}t(document.activeElement),e&&e.focus()},close:function(e){if(!this.dialog_.hasAttribute("open"))throw new Error("Failed to execute 'close' on dialog: The element does not have an 'open' attribute, and therefore cannot be closed.");this.setOpen(!1),void 0!==e&&(this.dialog_.returnValue=e);var t=new s("close",{bubbles:!1,cancelable:!1});this.dialog_.dispatchEvent(t)}};var o={};o.reposition=function(e){var t=document.body.scrollTop||document.documentElement.scrollTop,i=t+(window.innerHeight-e.offsetHeight)/2;e.style.top=Math.max(t,i)+"px"},o.isInlinePositionSetByStylesheet=function(e){for(var t=0;t<document.styleSheets.length;++t){var n=document.styleSheets[t],s=null;try{s=n.cssRules}catch(o){}if(s)for(var r=0;r<s.length;++r){var a=s[r],l=null;try{l=document.querySelectorAll(a.selectorText)}catch(o){}if(l&&i(l,e)){var c=a.style.getPropertyValue("top"),d=a.style.getPropertyValue("bottom");if(c&&"auto"!=c||d&&"auto"!=d)return!0}}}return!1},o.needsCentering=function(e){var t=window.getComputedStyle(e);return"absolute"!=t.position?!1:"auto"!=e.style.top&&""!=e.style.top||"auto"!=e.style.bottom&&""!=e.style.bottom?!1:!o.isInlinePositionSetByStylesheet(e)},o.forceRegisterDialog=function(e){if(e.showModal&&console.warn("This browser already supports <dialog>, the polyfill may not work correctly",e),"DIALOG"!=e.nodeName.toUpperCase())throw new Error("Failed to register dialog: The element is not a dialog.");new n(e)},o.registerDialog=function(e){e.showModal?console.warn("Can't upgrade <dialog>: already supported",e):o.forceRegisterDialog(e)},o.DialogManager=function(){this.pendingDialogStack=[],this.overlay=document.createElement("div"),this.overlay.className="fsDialogOverlay",this.overlay.addEventListener("click",function(e){e.stopPropagation()}),this.handleKey_=this.handleKey_.bind(this),this.handleFocus_=this.handleFocus_.bind(this),this.handleRemove_=this.handleRemove_.bind(this),this.zIndexLow_=1e5,this.zIndexHigh_=100150},o.DialogManager.prototype.topDialogElement=function(){if(this.pendingDialogStack.length){var e=this.pendingDialogStack[this.pendingDialogStack.length-1];return e.dialog}return null},o.DialogManager.prototype.blockDocument=function(){document.body.appendChild(this.overlay),document.body.addEventListener("focus",this.handleFocus_,!0),document.addEventListener("keydown",this.handleKey_),document.addEventListener("DOMNodeRemoved",this.handleRemove_)},o.DialogManager.prototype.unblockDocument=function(){document.body.removeChild(this.overlay),document.body.removeEventListener("focus",this.handleFocus_,!0),document.removeEventListener("keydown",this.handleKey_),document.removeEventListener("DOMNodeRemoved",this.handleRemove_)},o.DialogManager.prototype.updateStacking=function(){for(var e=this.zIndexLow_,t=0;t<this.pendingDialogStack.length;t++)t==this.pendingDialogStack.length-1&&(this.overlay.style.zIndex=e++),this.pendingDialogStack[t].updateZIndex(e++,e++)},o.DialogManager.prototype.handleFocus_=function(i){var n=e(i.target);return n!=this.topDialogElement()?(i.preventDefault(),i.stopPropagation(),t(i.target),!1):void 0},o.DialogManager.prototype.handleKey_=function(e){if(27==e.keyCode){e.preventDefault(),e.stopPropagation();var t=new s("cancel",{bubbles:!1,cancelable:!0}),i=this.topDialogElement();i.dispatchEvent(t)&&i.close()}},o.DialogManager.prototype.handleRemove_=function(e){if("DIALOG"==e.target.nodeName.toUpperCase()){var t=e.target;t.open&&this.pendingDialogStack.some(function(e){return e.dialog==t?(e.maybeHideModal(),!0):void 0})}},o.DialogManager.prototype.pushDialog=function(e){var t=(this.zIndexHigh_-this.zIndexLow_)/2-1;return this.pendingDialogStack.length>=t?!1:(this.pendingDialogStack.push(e),1==this.pendingDialogStack.length&&this.blockDocument(),this.updateStacking(),!0)},o.DialogManager.prototype.removeDialog=function(e){var t=this.pendingDialogStack.indexOf(e);-1!=t&&(this.pendingDialogStack.splice(t,1),this.updateStacking(),0==this.pendingDialogStack.length&&this.unblockDocument())},o.dm=new o.DialogManager,document.addEventListener("submit",function(t){var i=t.target;if(i&&i.hasAttribute("method")&&"dialog"==i.getAttribute("method").toLowerCase()){t.preventDefault();var n=e(t.target);if(n){var s,o=[document.activeElement,t.explicitOriginalTarget],r=["BUTTON","INPUT"];o.some(function(e){return e&&e.form==t.target&&-1!=r.indexOf(e.nodeName.toUpperCase())?(s=e.value,!0):void 0}),n.close(s)}}},!0),o.forceRegisterDialog=o.forceRegisterDialog,o.registerDialog=o.registerDialog,"object"==typeof module&&"object"==typeof module.exports?module.exports=o:"function"==typeof define&&"amd"in define?define(function(){return o}):window.dialogPolyfill=o}(),function(e,t,i){"use strict";i.util.ensureDialog=e.createElement("DIALOG").showModal?i._.noop:t.dialogPolyfill.registerDialog,delete t.dialogPolyfill}(document,window,FS),function(e,t,i){"use strict";function n(e,t){if(!(e.length<=1)){var i=o('<span id="fsPagePopDotsContainer"></span>'),n=o('<button data-role="none" id="fsPagePopNextButton" aria-label="Next" tabindex="0" role="button"><span>&#8250;</span></button>'),s=o('<button data-role="none" id="fsPagePopPrevButton" aria-label="Previous" tabindex="0" role="button"><span>&#8249;</span></button>'),r=e.parent();return o('<div id="fsPagePopPaging"></div>').append(s).append(i).append(n).prependTo(t),r.slick({appendDots:i,dots:!0,dotsClass:"fsPagePopDots",infinite:!1,nextArrow:n,prevArrow:s}),r}}function s(e){return"page_pop_"+e.data("id")}var o=e.$,r=i.getElementById("fsPagePopDialog"),a=e.getInternalNS("elements.utils").inDraftMode(),l=t.localStorage;r&&(e.util.ensureDialog(r),o("#fsPagePopCloseButton").click(function(){r.close()}),o(function(){var e,t,c=o("#fsPagePopControls"),d=o(".fsPagePop",r),h=d.parent(),u=!1;if(d.length){if(o('<button id="fsPagePopNotification" aria-label="View Page Pops"><span>'+d.length+"</span></button>").appendTo(i.body).click(function(){r.showModal(),e||(e=n(d,c))}),l&&o('<button id="fsPagePopHideButton">Don\'t Show Again</button>').appendTo(c).click(function(){var t;t=e?e.find(".slick-current"):d,l.setItem(s(t),new Date),r.close()}),d.length>1)t=d.get().sort(function(e,t){var i,n,r=o(e),a=o(t),c=l.getItem(s(r)),d=l.getItem(s(a)),h=!!c,p=!!d,f=r.data("reset-at"),m=a.data("reset-at");return f&&h&&new Date(f)>new Date(c)&&(h=!1),m&&p&&new Date(m)>new Date(d)&&(p=!1),u=u||!h||!p,h==p?(i=new Date(r.data("visible-at")),n=new Date(a.data("visible-at")),n-i):c?1:-1});else{var p=d.first(),f=l.getItem(s(p)),m=!!f,g=p.data("reset-at");u=!m||new Date(g)>new Date(f),t=d}d=o(t),h.empty().append(d),!a&&u&&(r.showModal(),e=n(d,c))}}))}(FS,window,document),function(e){"use strict";var t,i=e.$,n=e.getNS("SSO"),s="fsStateLoaded";n.embedFaria=function(){var e=i(".fsFariaLinks:not(."+s+")");e.length&&(t||(t=i.get("/fs/sso/fariaLinks.cfm")),t.done(function(t){e.addClass(s).html(t)}))}}(FS),window.jQuery=FS._jQueryTemp;