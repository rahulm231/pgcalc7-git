(function(factory){if(!window.rrequire){factory(window)}}(function(scope){var base="//www.scorpioncms.com/common/",loaded={},loading={},waiting=[],timer=0,op=Object.prototype,ostring=op.toString,hasOwn=op.hasOwnProperty,packages={jquery:[["j/jquery","j/jquery.ui"]],behavior:[["behaviors"],["cms-behave"]],googlemap:[["https://maps.googleapis.com/maps/api/js?v=3.exp&signed_in=true&callback=registermap"]],map:[["m/gmap"]],loading:[["c/loading2"],["cms-5"]],jwplayer:[["//jwpsrv.com/library/mzZ7nHxvEeKSEiIACp8kUw.js"]],tools:[["jquery","behavior","extensions","uri","chart","c/cms","c/scrollbar","loading","form"],["cms-tools","opensans"]],opensans:[["//fonts.googleapis.com/css?family=Open+Sans:300,400italic,400,600,700|Montserrat:400,700"]],ckeditor:[["../ckeditor/ckeditor"]],ace:[["//cdn.jsdelivr.net/ace/1.1.9/min/ace.js"]],weather:[["m/weather"]],cookie:[["j/jquery.cookie"]]},detect={"j/jquery":function(){return !!scope.jQuery},"j/jquery.1.x":function(){return !!scope.jQuery},"j/jquery.2.x":function(){return !!scope.jQuery},"j/jquery.ui":function(){return !!(scope.jQuery&&scope.jQuery.widget)},googlemap:function(){return !!(scope.google&&scope.google.maps)},jwplayer:function(){return !!scope.jwplayer},ckeditor:function(){return !!scope.CKEDITOR},ace:function(){return !!scope.ace},weather:function(){return !!(scope.jQuery&&scope.jQuery.weather)}},detectCSS={"cms-5":/\.ui\-widget\-overlay3\b/,"cms-behave":/\.ui\-conditional\-panel\b/,"cms-toolbar":/#SMSTop\b/,cms:/\.ui\-dialog\-titlebar\-fullscreen\b/},r_url=/^(https?:)?(?:\/\/([\w\-\.]+))?(\/.+)/i;(function(){var pkg;for(var p in detect){if(hasOwn.call(detect,p)){pkg=packages[p];if(pkg&&pkg[0]&&pkg[0][0]){detect[pkg[0][0]]=detect[p]}}}})();function isFunction(it){return it&&ostring.call(it)==="[object Function]"}function isArray(it){return it&&ostring.call(it)==="[object Array]"}function checkStylesheets(reg){var sheet,rules,index2,rule,text,sheets=document.styleSheets,index1=sheets&&sheets.length;while(index1--){sheet=sheets[index1];try{rules=sheet&&(sheet.cssRules||sheet.rules)}catch(ex){continue}index2=rules&&rules.length;while(index2--){rule=rules[index2];text=rule&&(rule.selectorText||rule.cssText);if(text&&reg.test(text)){return true}}}return false}function onLoad(el,path,file,ext,register){var success=function(){if(register){scope.register(file)}else{if(ext==="css"){loaded[file]=true}}};var error=function(){if(ext==="js"){console.log('error - "'+path+'" could not be loaded, rrequire will not fire.')}};if(el.addEventListener){el.addEventListener("load",success,false);el.addEventListener("error",error,false)}else{el.onload=el.onreadystatechange=function(_,isAbort){var state=el.readyState;if(isAbort||!state||/loaded|complete/.test(state)){if(state==="loaded"){el.children;if(el.readyState==="loading"){state="error"}}el.onload=el.onreadystatechange=null;el=null;if(register&&state!=="error"){setTimeout(function(){var det=detect[file];if(!det||det()){success()}else{error()}success=null;error=null},1);return}else{if(state==="error"){error()}else{success()}}error=null;sucess=null}}}}function loadElement(file,tagName,attribute,ext){var tags,size,tag,attr,data,index,pos,name,det;if(!file||!scope.document){return}tags=scope.document.getElementsByTagName(tagName);size=tags.length;while(size--){tag=tags[size];attr=tag.getAttribute(attribute);if(attr){attr=attr.toLowerCase();if(loading[attr]){continue}else{loading[attr]=true}data=tag.getAttribute("data-require");if(data){try{data=JSON.parse(data)}catch(ex){}if(isArray(data)){index=data.length;while(index--){loading[data[index]]=true}}}pos=attr.indexOf(base+ext+"/");if(pos>=0){name=attr.substring(pos+base.length+ext.length+1).replace(new RegExp("\\."+ext+"$"),"");switch(name){case"j/jquery.1.x":case"j/jquery.2.x":name="j/jquery";break}loading[name]=true}attr.replace(r_url,function(m,m1,m2,m3){if(m2){loading["//"+m2+m3]=true;if(m2==window.location.hostname){loading[m3]=true}}else{loading[m3]=true}})}}if(!loading[file]){if((file==="cms"&&loading["cms-5"])||(file==="cms-5"&&loading.cms)){loading[file]=true;return}if(ext==="js"){addFile(file,"script","src","js")}else{if(ext==="css"){det=detectCSS[file];if(det&&checkStylesheets(det)){loaded[file]=true;return}addFile(file,"link","href","css")}}}}function addFile(file,tagName,attribute,ext){var path,tag,m,head=scope.document.getElementsByTagName("head")[0],register=false;if(!head){head=scope.document.body}if(!head){return}if(document.documentElement.classList){document.documentElement.classList.add("requiring")}switch(file){case"j/jquery":file="j/jquery.2.x";break}if(file==="j/jquery.2.x"&&(!scope.Modernizr||!scope.Modernizr.canvas)){file="j/jquery.1.x"}tag=scope.document.createElement(tagName);if(m=r_url.exec(file)){if(m[1]||!m[2]){path=file}else{path=scope.location.protocol+"//"+m[2]+m[3]}if(ext==="js"&&file!==packages.googlemap[0][0]){register=true}}else{path=base+ext+"/"+file+"."+ext}switch(ext){case"js":tag.setAttribute("type","text/javascript");tag.setAttribute("async","async");break;case"css":tag.setAttribute("type","text/css");tag.setAttribute("rel","stylesheet");break}onLoad(tag,path,file,ext,register);tag.setAttribute(attribute,path);head.appendChild(tag);tag=null;head=null;loading[file]=true}function isReady(scripts){var script,size=scripts.length,ready=true;while(size--){script=scripts[size];if(script&&!loaded[script]){return false}}return true}function cleanWaiting(){var args,size=waiting.length;if(timer){clearTimeout(timer);timer=0}while(size--){args=waiting[size];if(args[2]===true){waiting.splice(size,1)}}if(waiting.length===0&&document.documentElement.classList){document.documentElement.classList.remove("requiring")}}function checkWaiting(){var args,size=0,len=waiting.length;while(size<len){args=waiting[size++];if(args[2]===true){continue}if(isReady(args[0])){args[2]=true;args[1](scope.jQuery,scope);if(timer){clearTimeout(timer)}timer=setTimeout(cleanWaiting,1)}}}function cleanArray(arr){var size;if(!arr){return null}else{if(typeof arr==="string"){return[arr.toLowerCase()]}else{if(isArray(arr)){size=arr.length;while(size--){arr[size]=(""+(arr[size]||"")).toLowerCase()}return arr}else{return null}}}}function addPackages(scripts,styles){var pkg,size;for(var i=0;i<scripts.length;i++){pkg=packages[scripts[i]];if(pkg){scripts.splice(i,1);i--;size=pkg[0].length;while(size--){scripts.push(pkg[0][size])}if(pkg[1]&&styles){size=pkg[1].length;while(size--){styles.push(pkg[1][size])}}}}if(styles&&styles.length){addPackages(styles)}}scope.registerLoading=function(script){loading[script]=true};scope.register=function(script){if(script&&typeof script==="string"){loaded[script]=true;checkWaiting()}};scope.registermap=function(){var script=packages.googlemap[0][0];register(script)};scope.rrequire=function(scripts,callback,styles){var fn,size,ready,script,det,style;scripts=cleanArray(scripts);if(!scripts){return}if(isFunction(styles)){fn=styles;styles=callback;callback=fn;fn=null}styles=cleanArray(styles);if(!styles){styles=[]}addPackages(scripts,styles);size=scripts.length;ready=true;while(size--){script=scripts[size];if(!script){continue}if(!loaded[script]){det=detect[script];if(det&&det()){loaded[script]=true;continue}ready=false;if(!loading[script]){loadElement(script,"script","src","js")}}}size=0;while(size<styles.length){style=styles[size];if(!style){continue}if(!loaded[style]){loadElement(style,"link","href","css")}size++}if(!isFunction(callback)){return}if(ready||isReady(scripts)){callback(scope.jQuery,scope)}else{waiting.push([scripts,callback,false])}};scope.rrequire.setBase=function(path){base=path};scope.rrequire.setDetect=function(script,det){if(script&&typeof script==="string"&&isFunction(det)){detect[script]=det}};if(!scope.require){scope.require=scope.rrequire}}));