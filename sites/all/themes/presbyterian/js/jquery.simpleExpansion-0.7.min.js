!function(e){e.fn.simpleExpansion=function(s){var i=this;if(1!=i.length)return i;i.addClass("simpleExpansionList"),s=s?s:{},s=n(e.extend({},e.fn.simpleExpansion.defaults,s)),i.attr("id").length<1&&i.attr("id","simpleExpansion_"+Math.floor(1e3*Math.random()));var a=s.questionClass,t=s.answerClass,o=s.nodeType;if(null!=s.data){var l=s.data;i.html("");for(var r=0,p=l.length;p>r;++r)i.append("<"+o+" class='simpleExpansion'> <p class='"+a+"'>"+l[r].question+"</p> <div class='"+t+"'>"+l[r].answer+"<p class='"+s.tagClass+"'>"+l[r].tags+"</p></div></"+o+">")}var f=e("#"+i.attr("id")+" > "+o);if(f.find("."+a).css("cursor","pointer").hover(function(){e(this).addClass("simpleExpansionHover")},function(){e(this).removeClass("simpleExpansionHover")}).bind("click.simpleExpansion",function(n){e(document).trigger("body_resize");var a=e(this).parent();s.showOnlyOne&&i.find(o).not(a).find("."+t).slideUp(s.speed,function(){e(this).parent().removeClass("simpleExpansionShowing")}),e(this).siblings("."+t).slideToggle(s.speed,function(){if(e(this).is(":visible")){a.addClass("simpleExpansionShowing");var n=a.attr("id");n&&n.length>0&&(document.location.hash=escape(n)),i.trigger("show.simpleExpansion",[a[0]])}else a.removeClass("simpleExpansionShowing")})}),f.find("."+t).hide(),s.allowSearch){var h=function(n){e(n).hide().removeClass("simpleExpansionResult").find("."+t).hide().parent().removeClass("simpleExpansionShowing")},c=e(s.searchNode);if(c.length>0&&"function"==typeof e.score){h(i.find(o));var d;c.append("<input type='text' id='simpleExpansionSearch' />").find("#simpleExpansionSearch").keyup(function(n){clearTimeout(d);var a=this;return a.value.length<1?void h(i.find(o)):void(d=setTimeout(function(){i.trigger("searchStart.simpleExpansion",[]);var n=[];f.each(function(i){var t=e(this),o=t.find("."+s.tagClass).text();o=s.caseSensitive?o:o.toLowerCase();var l=t.text();l=s.caseSensitive?l:l.toLowerCase();var r=m(a.value,s),p=0;r.length>0&&(p=e.score(l,r),p+=u(r,o)),p>s.minSearchScore?n.push([p,t]):h(e(this))}),s.sortSearch&&n.sort(function(e,n){return n[0]-e[0]});var t=[];e.each(n,function(){i.append(this[1].show().addClass("simpleExpansionResult")),t.push(this[1][0])}),i.trigger("sort.simpleExpansion",[t]),i.trigger("searchEnd.simpleExpansion",[t])},e.fn.simpleExpansion.keyTimeout))})}}var u=function(n,s){var i=0;if(s.length<1)return i;for(var a=n.split(" "),t=0,o=a.length;o>t;++t)a[t].length<1||s.indexOf(a[t])>-1&&(i+=e.fn.simpleExpansion.tagMatchScore);return i},m=function(e,n){var s="";e=n.caseSensitive?e:e.toLowerCase();var i=n.ignore;if(i.length>0){for(var a=e.split(" "),t=0;t<a.length;++t)if(a[t].length>0)if("function"==typeof i.indexOf)i.indexOf(a[t])<0&&(s+=a[t]+" ");else{for(var o=!1,l=0;l<i.length;++l)if(i[l]==a[t]){o=!0;break}o||(s+=a[t]+" ")}s.length>0&&(s=s.substr(0,s.length-1))}else s=e;return s},d=document.location.hash;if(d&&d.length>0){var g=e(d);g&&g.is(".simpleExpansionList>*")&&g.find("."+a).trigger("click.simpleExpansion")}return i};var n=function(n){var s=n.data;s&&s.length&&"function"==typeof s.splice||(n.data=e.fn.simpleExpansion.defaults.data),"string"!=typeof n.nodeType&&(n.nodeType=e.fn.simpleExpansion.defaults.nodeType),"string"!=typeof n.questionClass&&(n.questionClass=e.fn.simpleExpansion.defaults.questionClass),"string"!=typeof n.answerClass&&(n.answerClass=e.fn.simpleExpansion.defaults.answerClass),"string"!=typeof n.tagClass&&(n.tagClass=e.fn.simpleExpansion.defaults.tagClass),"boolean"!=typeof n.showOnlyOne&&(n.showOnlyOne=e.fn.simpleExpansion.defaults.showOnlyOne),"boolean"!=typeof n.allowSearch&&(n.allowSearch=e.fn.simpleExpansion.defaults.allowSearch),"number"!=typeof n.minSearchScore&&(n.minSearchScore=e.fn.simpleExpansion.defaults.minSearchScore),"boolean"!=typeof n.sortSearch&&(n.sortSearch=e.fn.simpleExpansion.defaults.sortSearch),"boolean"!=typeof n.caseSensitive&&(n.caseSensitive=e.fn.simpleExpansion.defaults.caseSensitive),"number"!=typeof n.speed&&(n.speed=e.fn.simpleExpansion.defaults.speed);var i=n.ignore;return i&&i.length&&"function"==typeof i.splice||(n.ignore=e.fn.simpleExpansion.defaults.ignore),n};e.fn.simpleExpansion.keyTimeout=400,e.fn.simpleExpansion.tagMatchScore=.1,e.fn.simpleExpansion.defaults={data:null,nodeType:"li",questionClass:"question",answerClass:"answer",tagClass:"tags",showOnlyOne:!1,allowSearch:!1,searchNode:null,minSearchScore:0,sortSearch:!1,caseSensitive:!1,speed:500,ignore:["the","a","an","i","we","you","it","that","those","these","them","to","and","or","as","at","by","for","of","so"]}}(jQuery);