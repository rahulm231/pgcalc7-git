(function(){function a(b,d,c){this.$=b;this.startEngine=function(e,f){return undefined};this.init=function(h,g,e,f){onMessage.settings=h;onMessage.blocks=e;onMessage.CdnUrls={};onMessage.PhotonUrl="";onMessage.CommonUrl="";onMessage.LibrariesUrl="";if(f!==undefined){onMessage.CdnUrls=f;onMessage.commonObject=b.grep(f,function(i){return i.FilePathTypeId===5})[0];onMessage.photonObject=b.grep(f,function(i){return i.FilePathTypeId===6})[0];onMessage.librariesObject=b.grep(f,function(i){return i.FilePathTypeId===13})[0];if(onMessage.photonObject!==undefined){if(onMessage.photonObject.Url!==undefined){onMessage.PhotonUrl=onMessage.photonObject.Url}}if(onMessage.commonObject!==undefined){if(onMessage.commonObject.Url!==undefined){onMessage.CommonUrl=onMessage.commonObject.Url}}if(onMessage.librariesObject!==undefined){if(onMessage.librariesObject.Url!==undefined){onMessage.LibrariesUrl=onMessage.librariesObject.Url}}}onMessage.log("onMessage Init Started");onMessage.log(g,true);onMessage.initsCalled=[];b(c).ready(function(){onMessage.tools.init(onMessage.$);onMessage.App.init();onMessage.sizePhotos();onMessage.sizeIframes();onMessage.resizeIframesPollHeight();b(d).resize(function(){onMessage.sizePhotos();onMessage.resizeIframes();onMessage.fixRegion()});onMessage.tools.listenForWindowMessage(onMessage.listenForInquiryResize);b("#layout_region_0").on("onMessage.ContentLoaded",function(){onMessage.fixRegion();onMessage.scrollSpyInit();onMessage.animationInit();onMessage.fixPageLinks()});onMessage.ContentInit(g)});onMessage.log(onMessage.initsCalled);onMessage.log("onMessage Finished")};this.animationInit=function(){var e=b(".region, .row, .page-block, .layout-block, .group"),f=false;onMessage.tools.checkViewStatus(e);b(d).on("scroll",function(){f=true});setInterval(function(){if(f){f=false;onMessage.tools.checkViewStatus(e)}},250)};this.scrollSpyInit=function(){var e=b("nav ul li.scrollspy-item a[href*='#']");if(e.length>0){onMessage.pluginManager.load(onMessage.pluginManager.plugins.jQueryUI,function(){onMessage.pluginManager.load(onMessage.pluginManager.plugins.WaitForImages,function(){e.on("click",function(g){g.preventDefault();onMessage.scrollSpy(b(this),this.hash.substring(1))});b("body").waitForImages(function(){if(d.location.hash.length>0){e.filter(function(g){return(b(this).prop("hash")===d.location.hash)}).click()}});var f=false;b(d).on("scroll",function(){f=true});setInterval(function(){if(f){f=false;onMessage.scrollSpyCheck()}},250)})})}};this.scrollSpyCheck=function(){var g=b("*[data_scrollspy]"),i,f,h=120,e="";e=g.filter(function(){var l=b(this).offset().top,k=b(d).scrollTop(),j=false;if(onMessage.hasFixedHeader&&onMessage.fixedHeaderHeight>=h){k+=onMessage.fixedHeaderHeight;j=(l<=k&&((l+b(this).outerHeight()-k)>0))}else{l=onMessage.fixedHeaderHeight?(l-onMessage.fixedHeaderHeight):l;j=(l<=k&&((l+b(this).offsetParent().outerHeight()-k)>0))}return j});if(e.length>0){i=e.attr("data_scrollspy");f=b("nav ul li a[href*='#"+i+"']").closest("li");f.closest("ul").find("li").removeClass("active");f.addClass("active");d.location.hash="#"+i}};this.scrollSpy=function(e,f){var g=b("*[data_scrollspy="+f+"]").offset().top;if(onMessage.hasFixedHeader){g-=onMessage.fixedHeaderHeight}b("html,body").animate({scrollTop:g},1000,"easeOutCirc",function(){e.closest("ul").find("li").removeClass("active");e.closest("li").addClass("active");d.location.hash="#"+f})};this.fixRegion=function(){onMessage.log("Begin Fix Region");onMessage.hasFixedHeader=false;var g=b(".fixed-region"),f=g.next(),k=b(d).width(),e=b(".emergencybulletinbanner").closest(".page-block"),j=e.length>0,i=g.outerHeight(),h=0;if(g.length>0&&k>979){onMessage.hasFixedHeader=true;if(j){e.addClass("fixed-bulletin").css({"z-index":"2000"});h=e.outerHeight();i+=h;e.find(".close").on("click",function(){onMessage.fixRegion()})}g.css({top:h+"px"});onMessage.fixedHeaderHeight=i;onMessage.log("Fix Region Height:"+i);f.css({"margin-top":i+"px"})}else{if(f.length>0){f.css({"margin-top":"0px"})}if(j){e.removeClass("fixed-bulletin")}}onMessage.log("End Fix Region")};this.ContentInit=function(j){onMessage.log("Begin Content Init");var h=[{name:"logo",blockInitalizer:onMessage.blockInit},{name:"block",blockInitalizer:onMessage.blockInit},{name:"menu",blockInitalizer:onMessage.menuInit},{name:"carousel",blockInitalizer:onMessage.carouselInit},{name:"global",blockInitalizer:onMessage.blockInit},{name:"area",blockInitalizer:onMessage.blockInit},{name:"emergencybulletin",blockInitalizer:onMessage.blockInit}],e=j.slice(0),g;for(g=j.length-1;g>=0;g--){if(j[g].StyleTypeId===3){j.splice(g,1)}}for(g=e.length-1;g>=0;g--){if(e[g].StyleTypeId!==3){e.splice(g,1)}}for(g=0;g<j.length;g++){try{h[j[g].StyleTypeId].blockInitalizer.call(h[j[g].StyleTypeId].blockInitalizer,j[g],b)}catch(f){onMessage.log("Error: "+f.message)}}onMessage.mobilemenu.init(b);onMessage.carouselInit.call(onMessage.carouselInit,e,b);b("#layout_region_0").trigger("onMessage.ContentLoaded");setTimeout(function(){onMessage.tools.fixVideoIE()},500);onMessage.log("End Content Init")};this.blockInit=function(e){if(b.inArray(e.content,onMessage.initsCalled)===-1){switch(e.content){case"sitemap":onMessage.sitemap.init(b);break;case"annualfund":onMessage.annualfund.init(b);break;case"photo":break;case"facultystaffdirectory":onMessage.facultyDirectory.init(b);break;case"video":onMessage.video.init(b);break;case"forms":onMessage.formsDetail.init.call(onMessage.forms,b);break;case"emergencybulletin":onMessage.bulletinLightbox.init(b);break;case"emergencybulletinbanner":onMessage.bulletinBanner.init(b);break;case"audio":onMessage.audio.init(b);break;case"search":case"searchresults":onMessage.search.init(b);break;case"poll":onMessage.poll.init(b);break;case"athleticrecentgames":onMessage.athleticrecentgames.init(b);break;case"storeproducts":onMessage.storeproducts.init(b);break;case"newsarchivedatepicker":onMessage.newsarchivedatepicker.init(b);break;case"newsarchivefilter":onMessage.newsarchivefilter.init(b);break;case"newscommententry":onMessage.forms.init(b);break;case"calendargrid":onMessage.calendargrid.init(b);break;case"trivia":onMessage.trivia.init(b);break}onMessage.initsCalled.push(e.content)}};this.menuInit=function(e){onMessage.log("menuinit called");onMessage.log(e);var f=[{name:"dropdown-flyout",pluginInitalizer:onMessage.menu},{name:"horizontal",pluginInitalizer:onMessage.horizontalMenu},{name:"accordion",pluginInitalizer:onMessage.accordionMenu},{name:"dropdown-flyout",pluginInitalizer:onMessage.menu},{name:"mega",pluginInitalizer:onMessage.megaMenu}];if(b.inArray(f[e.StyleModeId-1].name,onMessage.initsCalled)===-1){f[e.StyleModeId-1].pluginInitalizer.init.call(f[e.StyleModeId-1].pluginInitalizer.init,b);onMessage.log(f[e.StyleModeId-1].name);onMessage.initsCalled.push(f[e.StyleModeId-1].name)}onMessage.log(onMessage.initsCalled)};this.carouselInit=function(g){var j=false,h=false,k,l,e,f;onMessage.log("new carousel init");onMessage.log(g);l=function(){var o=false,n=false,m,i;for(k=g.length-1;k>=0;k--){if(g[k].StyleModeId<5){o=true}if(g[k].StyleModeId==5){n=true}}if(o){onMessage.log("carousel script loaded");m=b(".carousel");if(m.length>0){m.each(function(){var p=b(this);p.carousel()})}}if(n){i=b(".background-carousel");if(i.length>0){i.bgcarousel()}}};f=function(i){if(j&&b.inArray("AWSVideo",onMessage.initsCalled)===-1){onMessage.pluginManager.load(onMessage.pluginManager.plugins.AWSVideo,function(){onMessage.log("AWSVideo Loaded");return i()});onMessage.initsCalled.push("AWSVideo")}else{return i()}};e=function(i){if(h&&b.inArray("jplayer",onMessage.initsCalled)===-1){onMessage.pluginManager.load(onMessage.pluginManager.plugins.jPlayer,function(){onMessage.log("jPlayer Loaded");return i()});onMessage.initsCalled.push("jplayer")}else{return i()}};for(k=g.length-1;k>=0;k--){switch(g[k].content){case"video":j=true;break;case"audio":h=true;break}}f(function(){e(function(){l()})})};this.log=function(e,f){if(d.console!==undefined&&(onMessage.tools.getParameterByName("debug")=="true")){if(f){d.console.table(e)}else{d.console.log(e)}}};this.tools={recaptchaCount:0,init:function(e){var f,h,g;e(".mailto").on("click",function(j){var i=e(this),k=i.attr("href");if(!i.hasClass("prevented")){if(i.hasClass("mailto")){j.preventDefault();i.addClass("prevented");k="mailto:"+k.replace(/[a-zA-Z]/g,function(l){var m=l.charCodeAt(0)+13;return String.fromCharCode((l<="Z"?90:122)>=m?m:m-26)});i.attr("href",k);d.location.href=k}}});e(".expand").on("click",function(l){l.preventDefault();var i=e(this),j=i.parent(),m="#"+i.attr("rel"),k;if(j.find(m).length===1){k=j.find(m)}else{k=j.parent().find(m)}if(!i.hasClass("sample-template")){if(!k.is(":visible")){k.slideDown(250);j.addClass("on-state");j.removeClass("off-state");if(!i.hasClass("no-replace")){i.data("old-btn-text",i.html()).html("close")}}else{k.slideUp(250);j.addClass("off-state");j.removeClass("on-state");if(!i.hasClass("no-replace")){i.html(i.data("old-btn-text"))}}}});e(".newscommententry .submit-button").on("click",function(k){k.preventDefault();var i=e(this),m=i.data("id"),j=i.data("cid"),l=onMessage.App.module("NewsComments");if(!i.hasClass("styler")){l.Utilities.postComment(m,j)}});e(".newscommentlist .sort-button").on("click",function(j){j.preventDefault();var i=e(this),k=e(".news-comment-list");if(!i.hasClass("styler")){k.children().each(function(l,m){k.prepend(m)})}});e(".athleticteamschedule .schedule-directions, .athletic-event .calendar-directions, .athleticupcominggames .schedule-directions").on("click",function(k){k.preventDefault();var i=e(this),m=i.data("scheduleid"),n=i.data("showtrans"),l=i.data("practice"),j=onMessage.App.module("AthleticSchedule");if(!i.hasClass("styler")){j.Utilities.showDirections(m,n,l)}});e(".mini-sitemap:not(.sample-template) .toggle").on("click",function(l){l.preventDefault();var j=e(this),i=j.closest("nav"),k=j.next("ul");if(i.attr("state")==="open"){i.attr("state","closed");k.slideUp();j.html(i.attr("toggle_open")).addClass("mini-sitemap-open").removeClass("mini-sitemap-close")}else{i.attr("state","open");k.slideDown(400,function(){e("body,html").animate({scrollTop:e(c).height()-e(d).height()},400)});j.html(i.attr("toggle_close")).addClass("mini-sitemap-close").removeClass("mini-sitemap-open")}});h=".team-list a";e(h).on("click",function(i){i.preventDefault();if(e(this).closest("html").hasClass("styler")){return false}var j=e(this).attr("href"),k=onMessage.tools.getParameterByName("siteid");if(isNaN(k)){if(k.length>0){j+="&siteid="+k}}d.location=j;return false});e(".print-button").on("click",function(k){k.preventDefault();var i=e(this),l=i.data("blockid"),j=d.location;if(i.closest("html").hasClass("styler")){return false}d.location=j+((d.location.search.length>0)?"&":"?")+"print=true&blockid="+l;return false});e(".lazy-load").on("click",function(n){n.preventDefault();var i=e(this),j=i.data("blockid"),m=parseInt(i.data("pagecount"),10),o=parseInt(i.data("marker"),10)+m,l=i.data("container"),p=i.data("running"),k=i.data("cachekey"),q=onMessage.tools.getUrlParams();if(i.closest("html").hasClass("styler")){return false}if(!p){i.data("running",true);e.ajax({url:q.base+"?lazyLoad=true&blockid="+j+"&marker="+o+"&ck="+k+q.querystring,context:c.body}).done(function(u){var r=e(u),t=r.find(".content").html(),s=r.find("[data-cachekey]").data("cachekey"),v=(r.find("[data-cachekey]").data("more-albums")==="True")?true:false;e("."+l).append(t);if(!v){i.hide()}i.data("marker",o);i.data("cachekey",s);i.data("running",false)})}return false});f=".photo .album-select, .audio .album-select, .video .album-select";e(f).change(function(i){i.preventDefault();d.location.href=onMessage.tools.getUrlForAlbumSelect(e(this));return false});g=e(".obscure-email");_.each(g,function(i,j){e(i).on("click",function(k){k.preventDefault();try{d.location.href="mailto:"+e(this).attr("data-username")+"@"+e(this).attr("data-domain");return false}catch(l){return false}})})},checkViewStatus:function(e){e.each(function(){var f=b(this),g=onMessage.tools.getElementInfo(f);f.toggleClass("in-view",g.inView);f.toggleClass("top-of-page",g.topOfPage);f.toggleClass("bottom-of-page",g.bottomOfPage);f.toggleClass("center-of-page",g.midCenterOfPage);f.toggleClass("top-center-of-page",g.topCenterOfPage);if(f.hasClass("bottom-of-page")){f.addClass("has-been-viewed")}if(f.hasClass("center-of-page")){f.addClass("center-has-been-viewed")}})},getElementInfo:function(f){var e={pageTop:b(d).scrollTop(),pageBottom:b(d).scrollTop()+b(d).height(),pageCenterTop:b(d).scrollTop()+((b(d).height()/2)-50),pageCenterbottom:b(d).scrollTop()+((b(d).height()/2)+50),elementTop:b(f).offset().top,elementBottom:b(f).offset().top+b(f).outerHeight(),elementCenter:b(f).offset().top+(b(f).outerHeight()/2)},g={};g.inView=(e.elementTop<=e.pageBottom)&&(e.elementBottom>=e.pageTop);g.topOfPage=g.inView&&e.pageTop>=e.elementTop;g.bottomOfPage=g.inView&&e.pageBottom>=e.elementBottom;g.midCenterOfPage=(e.elementCenter<=e.pageCenterbottom)&&(e.elementCenter>=e.pageCenterTop);g.topCenterOfPage=(e.elementTop<=e.pageCenterbottom)&&(e.elementTop>=e.pageCenterTop);return g},getUrlForAlbumSelect:function(e){var f=onMessage.tools.getUrlParams({exclude:["albumid"]});return f.base+"?albumid="+e.val()+f.querystring},getParameterByName:function(f){var e=(new RegExp("[?&]"+f+"=([^&]*)","i")).exec(d.location.search);return e&&decodeURIComponent(e[1].replace(/\+/g," "))},getRandomNumberBetween:function(f,e){return Math.round(Math.random()*(e-f))+f},setCookie:function(e,h,g){var f=new Date();f.setDate(f.getDate()+g);c.cookie=e+"="+escape(h)+((g==null)?"":";expires="+f.toGMTString())+"; path=/"},getCookie:function(f){if(c.cookie.length>0){var g=c.cookie.indexOf(f+"="),e;if(g!=-1){g=g+f.length+1;e=c.cookie.indexOf(";",g);if(e==-1){e=c.cookie.length}return unescape(c.cookie.substring(g,e))}}return""},scrollTop:function(){b("html, body").animate({scrollTop:0},"normal")},setFrameHeight:function(g){try{var f=g.contents().find("BODY"),i=f.outerHeight()+100;g.css({height:i+"px"})}catch(h){g.css({height:"2000px"});g.attr("scrolling","yes")}},getUrlParams:function(j){var q=d.location.href,e=q.split("?")[0],l=q.split("?")[1],g={},n="",k={exclude:[]},h,f,p,m;b.extend(true,k,j);e=e.replace("#","");if(l===undefined){return{base:e,querystring:""}}if(l.length>0){h=l.split("&");for(f=0;f<h.length;f++){p=h[f].split("=");if(b.inArray(p[0],k.exclude)===-1){g[p[0]]=p[1]}}}for(m in g){if(g.hasOwnProperty(m)){n+="&"+m+"="+g[m]}}return{base:e,querystring:n,params:g}},redirectWindow:function(e){d.location.href=e},hideElement:function(e){jQuery(e).hide()},listenForWindowMessage:function(h,e){var g=d.addEventListener?"addEventListener":"attachEvent",f=d[g],i=(g==="attachEvent")?"onmessage":"message";f(i,function(j){h.call(e||this,j)},false)},removeWindowMessageListener:function(g){var f=d.removeEventListener?"removeEventListener":"detachEvent",e=d[f],h=(f==="detachEvent")?"onmessage":"message";e(h,g)},showEmergencyBulletin:function(g){var f=decodeURI(this.getCookie(g)).split(",").map(function(i){return parseInt(i,10)}),e=b(".bulletin-item").map(function(){return b(this).data("bid")}).get(),h=0,j=false;for(h=0;h<e.length;h++){if(_.indexOf(f,e[h])===-1){j=true}}return j},getReCaptchaKey:function(e){b.post(onMessage.App.Config.ApiPath+"Captcha/GetReCaptchaKey",{message:"raw"},function(f){e.append('<div class="g-recaptcha" id="grecaptcha-'+onMessage.tools.recaptchaCount+'"></div>');setTimeout(function(){grecaptcha.render("grecaptcha-"+onMessage.tools.recaptchaCount,{sitekey:f.SiteKey});onMessage.tools.recaptchaCount++},500)},"json").fail(function(g,h,f){onMessage.log("error : "+h+" : "+f)})},detectIE:function(){var i=d.navigator.userAgent,f=i.indexOf("MSIE "),h=i.indexOf("Trident/"),e=i.indexOf("Edge/"),g;if(f>0){return parseInt(i.substring(f+5,i.indexOf(".",f)),10)}if(h>0){g=i.indexOf("rv:");return parseInt(i.substring(g+3,i.indexOf(".",g)),10)}if(e>0){return parseInt(i.substring(e+5,i.indexOf(".",e)),10)}return false},fixVideoIE:function(){var f=onMessage.tools.detectIE(),e;if(f>=11){e=b(".aws-player");e.each(function(){var g=b(this),n=g.attr("id"),k=g.attr("poster")||"",j=g.data("mp4"),l=g.data("setup"),i=(g.closest("html").hasClass("ismodal"))?'autoplay="true"':"",m,h=g.parent();m="<video";m+=' style="width: 100%; height: 100%; position: absolute; top: 0px; bottom: 0px; right: 0px; left: 0px;"';m+=' id="'+n+'"';m+=' class="video-js vjs-default-skin vjs-big-play-centered aws-player"';m+=" controls "+i+' preload="none"';m+=' data-setup="'+l+'"';m+=' poster="'+k+'"';if(g.attr("loop")){m+=' loop="'+g.attr("loop")+'"'}if(g.attr("muted")){m+=' muted="'+g.attr("muted")+'"'}if(g.attr("autoplay")){m+=' autoplay="true" '}m+=">";m+='<source src="//'+j+'" type="video/mp4">';m+="</video>";videojs(n).pause().dispose();h.append(m);videojs(n,{},function(){videojs.initShareing()})})}}};this.findBlock=function(e){return _.find(onMessage.blocks,function(f){return f.ClientId==e})};this.pluginManager={plugins:{AWSVideo:{Url:"{libs_url}/video/5.18.4.1/video.min.js,{libs_url}/video/hls/5.5.3/videojs-contrib-hls.min.js,{libs_url}/video/share/1.3/share.video.js,https://use.fontawesome.com/0b9087bd6d.js",Css:"{libs_url}/video/5.18.4/video-js.css",isLoaded:function(){return d.videojs}},SimpleModal:{Url:"{libs_url}/jquery-simplemodal/1.4.5/jquery.simplemodal.1.4.5.min.js",isLoaded:function(){return jQuery().modal}},FlexSlider:{Url:"{libs_url}/jquery-flexslider/2.4/jquery.flexslider.js,{libs_url}/jquery-flexslider/2.4/jquery.carousel.js",Css:"{libs_url}/jquery-flexslider/2.4/flexslider.css,{libs_url}/jquery-flexslider/2.4/carousel.css",isLoaded:function(){return jQuery.carousel}},BackgroundCarousel:{Url:"{libs_url}/jquery-background-carousel/1.2/jquery.background.carousel.js",Css:"{libs_url}/jquery-background-carousel/1.2/background-carousel.css",isLoaded:function(){return jQuery.bgcarousel}},FancyBox:{Url:"{libs_url}/jquery-fancybox/1.3.3/jquery.fancybox-1.3.3.js",Css:"{libs_url}/jquery-fancybox/1.3.3/jquery.fancybox-1.3.3.css",isLoaded:function(){return jQuery.fancybox}},jPlayer:{Url:"{libs_url}/jquery-jplayer/2.4.0/jquery.jplayer.js",Css:"{libs_url}/images/jPlayer/p3.morning.light.css,{libs_url}/jquery-jplayer/2.4.0/morning.light/jplayer.morning.light.css",swfPath:"{libs_url}/jquery-jplayer/2.4.0/",isLoaded:function(){return jQuery.jPlayer}},jQueryUI:{Url:"{libs_url}/jqueryui/1.9.2/jquery-ui-1.9.2.min.js",isLoaded:function(){return jQuery.ui}},WaitForImages:{Url:"{libs_url}/jquery-waitforimages/1.5/jquery.waitforimages.js",isLoaded:function(){return jQuery().waitforimages}}},load:function(h,e,g){if(typeof h.isLoaded==="function"){if(h.isLoaded()){return e(g)}}var j=h.Url,i,f;if(h.SslUrl&&location.protocol==="https:"){j=h.SslUrl}i=j.split(",");for(f=0;f<i.length;f++){i[f]=i[f].replace("{libs_url}",onMessage.LibrariesUrl);if(i[f].indexOf("ftpimages")>-1){i[f]=onMessage.CommonUrl+i[f]}}i.push(function(){if(h.Css){var l=h.Css.split(","),k;for(k=l.length-1;k>=0;k--){l[k]=l[k].replace("{libs_url}",onMessage.LibrariesUrl);if(l[k].indexOf("ftpimages")>-1){l[k]=onMessage.CommonUrl+l[k]}if(l[k]&&b('link[href="'+l[k]+'"]').length===0){b("<link>").appendTo(b("head")).attr({type:"text/css",rel:"stylesheet"}).attr("href",l[k])}}}return e(g)});head.js.apply(this,i)}};this.sizePhotos=function(f){var e=b(".resp-photo"),g=function(k,h){var j;for(j=0;j<k.length;j++){if(h>=k[j].MinWidth&&h<=k[j].MaxWidth){return k[j]}}};e.each(function(l){onMessage.log("Resize Photo: "+l);var j=b(this),h=j.closest(".col"),n=j.data("colWidth"),k=h.width(),p=[],m=0,i,o;if(n&&n==k){return}j.data("colWidth",k);i=j.find("img.resp-image");if(j.data("renditions")){p=j.data("renditions")}else{j.find("SPAN").each(function(){p.push({Src:b(this).data("src"),MinWidth:m,MaxWidth:b(this).data("width")});m=b(this).data("width")+1});if(p.length>0){p[p.length-1].MaxWidth=9999}j.data("renditions",p)}o=g(p,k);if(o){if(i.length>0){i.attr("src",o.Src);return}i=b("<img>",{src:o.Src,"class":"resp-image",alt:j.data("caption")||j.data("title")||""}).appendTo(j)}});if(jQuery.isFunction(f)){return f()}};this.sizeIframes=function(){b(".iframe-autoheight").each(function(){var e=b(this),f=e.data("src");if(f===undefined){f=e.attr("src")}e.on("load",function(){onMessage.tools.setFrameHeight(e)});e.attr("src",f)})};this.resizeIframes=function(){b(".iframe-autoheight").each(function(){onMessage.tools.setFrameHeight(b(this))})};this.resizeIframesPollHeight=function(){var e=b(".iframe-pollheight");if(e.length){setInterval(function(){e.each(function(){onMessage.tools.setFrameHeight(b(this))})},1000)}};this.listenForInquiryResize=function(g){var f=g.data||{};if((f.eventName==="OnBoard.InquiryForm.Resize"||f.eventName==="OnMessage.GivingForm.Resize")&&f.newHeight&&f.selector){b(f.selector).css({height:f.newHeight})}};this.fixPageLinks=function(){var e=onMessage.tools.getParameterByName("siteid");if(e){b('a[href^="/"]').each(function(){var f=b(this),i=f.attr("href"),h,g;if(f.parents(".adminbar").length===0){if(i!=="#"&&i.toLowerCase().indexOf("siteid")===-1){h=i.indexOf("#");g=(h>-1)?i.substring(h):"";i=(h>-1)?i.substring(0,h):i;i+=(i.indexOf("?")>-1?"&":"?")+"siteId="+e+g;f.attr("href",i)}}});b("form").each(function(){var g=b(this),h=g.attr("action"),i=g.attr("method"),f;if(i&&i.toLowerCase()=="get"){f=g.find('input[name="siteId"]');if(f.length===0){f=b("<input>").attr({type:"hidden",name:"siteId"}).val(e);g.append(f)}}else{if(h&&h.indexOf("/")===0){if(h.toLowerCase().indexOf("siteid")===-1){h+=(h.indexOf("?")>-1?"&":"?")+"siteId="+e;g.attr("action",h)}}}})}};this.menu={init:function(e){var f=e(".menu nav");if(f.length>0){f.menu()}onMessage.log("menu init called")}};this.accordionMenu={init:function(e){var f=e("nav.menu-accordion");if(f.length>0){f.accordionmenu()}onMessage.log("accordion init called")}};this.horizontalMenu={init:function(e){var f=e("nav.menu-type-horizontal-flat");if(f.length>0){f.horizontalmenu()}onMessage.log("horizontal init called")}};this.megaMenu={init:function(e){var f=e("nav.menu-type-mega:not(.sample-template)");if(f.length>0){f.megamenu()}onMessage.log("megamenu init called")}};this.sitemap={init:function(e){var f=e(".sitemap nav:not(.sample-template)");if(f.length>0){f.sitemap()}onMessage.log("sitemap init called")}};this.annualfund={init:function(e){var f=e(".annualfund .fund");if(f.length>0){f.annual_fund()}onMessage.log("annual fund init called")}};this.photoList={init:function(e){var f=e(".photo .use-gallery");if(f.length>0){f.photolist_manager()}}};this.facultyDirectory={init:function(e){e(".faculty-select").change(function(){var h=e(this).val(),g=e(this).attr("id"),f=location.href;f="?"+g+"="+h;location.href=f})}};this.video={init:function(e){if(e.fancybox){e(".lightboxTrigger").fancybox({inline:true})}onMessage.pluginManager.load(onMessage.pluginManager.plugins.AWSVideo,function(){onMessage.log("AWS Video Loaded")});onMessage.log("video init called")}};this.forms={init:function(e){var g=e(".forms"),f=e(".newscommententry form");if(f.length>0){onMessage.tools.getReCaptchaKey(f.find("#captcha"))}if(g.length>0){g.forms()}onMessage.log("forms init called")}};this.formsDetail={init:function(e){var f=e(".forms");if(f.length>0){f.forms_detail();f.each(function(){var h=e(this),g=h.find("#captcha");if(g.length>0){onMessage.tools.getReCaptchaKey(g)}})}onMessage.log("forms_detail init called")}};this.bulletinLightbox={init:function(e){onMessage.pluginManager.load(onMessage.pluginManager.plugins.SimpleModal,function(){var f=e("#content_398");if(f.length>0&&onMessage.tools.showEmergencyBulletin("om-ebl")){f.bulletinLightbox()}});onMessage.log("bulletinLightbox init called")}};this.bulletinBanner={init:function(e){var f=e("#content_399");if(onMessage.tools.showEmergencyBulletin("om-ebb")){f.removeClass("hide")}if(f.length>0){f.bulletinBanner()}onMessage.log("bulletinBanner init called")}};this.audio={init:function(e){e(".audio .album-select").change(function(f){f.preventDefault();d.location=onMessage.tools.getUrlForAlbumSelect(e(this));return false});onMessage.pluginManager.load(onMessage.pluginManager.plugins.jPlayer,function(){e(".jp-jplayer").each(function(k,j){var i=e(this),f=e(i.data("container-id")),g=f.find("a.jp-pause"),h=f.find("a.jp-repeat-off");i.jPlayer({ready:function(){i.jPlayer("setMedia",{mp3:i.data("filename-url")})},play:function(){i.jPlayer("pauseOthers");g.css("display","block")},repeat:function(l){if(l.jPlayer.options.loop){e(this).unbind(".jPlayerRepeat").bind(e.jPlayer.event.ended+".jPlayer.jPlayerRepeat",function(){e(this).jPlayer("play")});h.css("display","block")}else{e(this).unbind(".jPlayerRepeat")}},cssSelectorAncestor:i.data("container-id"),swfPath:onMessage.pluginManager.plugins.jPlayer.swfPath,supplied:"mp3",volume:0.5,preload:"none"})})});onMessage.log("audio init called")}};this.search={init:function(e){e(".search-box").pageSearch()}};this.poll={init:function(e){e(".poll").poll()}};this.athleticteamschedule={init:function(e){e(".athleticteamschedule").athleticteamschedule();onMessage.pluginManager.load(onMessage.pluginManager.plugins.SimpleModal,function(){return undefined})}};this.athleticrecentgames={init:function(e){e(".athleticrecentgames").athleticteamschedule();onMessage.pluginManager.load(onMessage.pluginManager.plugins.SimpleModal,function(){return undefined})}};this.storeproducts={init:function(e){e(".storeproducts").storeproducts();onMessage.pluginManager.load(onMessage.pluginManager.plugins.SimpleModal,function(){return undefined})}};this.newsarchivedatepicker={init:function(e){e(".newsarchivedatepicker").newsarchivedatepicker()}};this.newsarchivefilter={init:function(e){e(".newsarchivefilter").newsarchivefilter()}};this.calendargrid={init:function(){var e=b(".page-calendar-grid");if(e.length>0){e.calendarGrid()}}};this.trivia={init:function(){var e=b(".trivia");if(e.length>0){e.trivia()}}};this.mobilemenu={init:function(e){var f=e(".mobilemenu");if(f.length>0){f.dlmenu()}}};this.startEngine(b,c)}window.onMessage=window.onMessage||{};a.call(window.onMessage,jQuery,window,document)}());(function(a){var b={init:function(f){if(f===undefined){f={}}var g=a.extend({},f),e,c=a(this),d=(c.attr("class")!==undefined)?c.attr("class").split(" "):"";for(e=0;e<d.length;e++){if(d[e].indexOf("fund-indicator")!==-1){g.scale=d[e].split("-")[2]}g.animate=false;if(d[e].indexOf("fund-animate")!==-1){g.animate=true}}c.data("options",g)},fixHeight:function(c){c.baric.height(function(){var d=(c.baric.outerHeight()-c.baric.height())+c.li.height();return c.scale.outerHeight()-d})},getFundElements:function(d){var c=a(d);return{obj:c,barc:c.find(".bar-container-outer"),baric:c.find(".bar-container"),scale:c.find(".scale"),li:c.find(".scale li:eq(2)"),bar:c.find(".bar-container .bar")}},version:function(){return"onMessage Annual Fund: Version 1.0"},log:function(c){if(window.console){window.console.debug(c)}}};a.fn.annual_fund=function(c){if(b[c]){return b[c].apply(this,Array.prototype.slice.call(arguments,1))}if(typeof c==="object"||!c){return this.each(function(j){this.method=j;b.init.apply(this,arguments);var d=b.getFundElements(this),k=d.obj.data("options"),h,g,e,f,i;switch(k.scale){case"center":b.fixHeight(d);d.barc.css({bottom:(d.li.height()/2)});break;case"top":d.baric.height(function(){var l=d.baric.outerHeight()-d.baric.height();return d.scale.outerHeight()-l});d.barc.css({top:0});break;default:d.baric.height(function(){var l=d.baric.outerHeight()-d.baric.height();return d.scale.outerHeight()-l});break}h=parseInt(d.obj.attr("goal"),10);g=parseInt(d.obj.attr("current"),10);e=Math.round(d.baric.height()*(g/h));f=d.baric.height()-e;if(g>=h){e=d.barc.height();f=0}if(d.bar.outerHeight()>0){e=e-d.bar.outerHeight()}if(k.animate){i=f+e;d.bar.css({"margin-top":i});setTimeout(function(){d.bar.animate({height:e,"margin-top":f},500)},1000)}else{d.bar.css({height:e,"margin-top":f})}})}a.error("Method "+c+" does not exist on jQuery.annual_fund")}}(jQuery));(function(a){a("document").ready(function(){var n=window.onMessage,h=a(".calendardatepicker"),i=h.find("#sDate"),c=h.find("#eDate"),j=h.find("#siteId"),d=h.find("form"),b=h.find("li.day"),e=h.find("select"),g=h.find(".month-pager a"),m=h.closest("html").hasClass("styler"),f,k,l,p,o,r;function q(t,s){i.val(t);c.val(s);r=n.tools.getUrlParams();if(r.params!==undefined){if(r.params.siteId!==undefined){j.val(r.params.siteId)}else{j.remove()}}d.submit()}e.change(function(u){u.preventDefault();if(m){return}var s=a(u.currentTarget),t=s.val().split(",");q(t[0],t[1])});b.click(function(t){t.preventDefault();if(m){return}var s=a(t.currentTarget);q(s.data("date"),s.data("date"))});g.click(function(t){t.preventDefault();if(m){return}var s=a(t.currentTarget);q(s.data("sdate"),s.data("edate"))});a(".switch-to-grid").on("click",function(s){s.preventDefault();f=a(this);d=f.closest("form");j=d.find("#siteId");k=d.find("#tab");l=!f.hasClass("styler-bypass");p=d.find("#selStartDate").val();o=d.find("#selEndDate").val();if(m&&l){return}k.val(1);r=n.tools.getUrlParams();if(r.params!==undefined){if(r.params.siteId!==undefined){j.val(r.params.siteId)}else{j.remove()}}i.val(p);c.val(o);d.submit()})})}(jQuery));(function(a){a("document").ready(function(){var c=a(".calendarfilter"),e=c.find(".filter-item input[type=checkbox]"),g=c.find(".select-all.button"),b=c.find(".clear-all.button"),f=c.find(".refresh.button"),h=c.find("#siteId"),d=c.find("form"),i=c.closest("html").hasClass("styler");g.on("click",function(j){j.preventDefault();e.prop("checked",true);d.find("#showAll").val("1")});b.on("click",function(j){j.preventDefault();e.prop("checked",false);d.find("#showAll").val("0")});e.on("click",function(j){d.find("#showAll").val("0")});f.on("click",function(j){j.preventDefault();if(!i){var k=onMessage.tools.getUrlParams();if(k.params!==undefined){if(k.params.siteId!==undefined){h.val(k.params.siteId)}else{h.remove()}}d.submit()}})})}(jQuery));(function(a){var b=window.onMessage;a.fn.calendarGrid=function(c){var d={init:function(f){if(f==="undefined"){f={}}var g,e=a(this);g=a.extend({},f);e.data("options",g)},version:function(){return"onMessage : Version 1.0"}};if(d[c]){return d[c].apply(this,Array.prototype.slice.call(arguments,1))}if(typeof c==="object"||!c){return this.each(function(l){var m,n,g,i,h,f,k,e,j;d.init.apply(this,arguments);g=a(this);n={openMobileEvents:function(q,s){var r=q.closest("li").data("date"),o=q.next(".event-data"),p=q.closest("ol").next(".calendar-list");if(s===r){return}g.find(".active").removeClass("active");if(o.length>0){p.html(o.html());p.find("*").removeAttr("style");p.slideDown()}g.data("open-day",r);q.addClass("active")},setEventCats:function(q){var o=q.find(".filter-item input:checked"),p=q.find("#ec"),r=q.find("#ts"),s="",u="",t;for(t=0;t<o.length;t++){if(o.eq(t).hasClass("event-category")){s+=","+o.eq(t).val()}if(o.eq(t).hasClass("team")){u+=","+o.eq(t).val()}}p.val(s.substr(1,s.length));r.val(u.substr(1,u.length))},setShowAll:function(q){var o=h.closest("form"),p=o.find("#showAll");p.val(q)}};if(!a("html").hasClass("styler")){g.find(".date").on("click",function(o){o.preventDefault()});g.find(".date").on("mouseup",function(o){if(a(".event-data").css("display")==="none"){h=a(this);m=g.data("open-day");i="";if(m!==undefined){i=g.find("li[data-date="+m+"]").closest("ol").next(".calendar-list")}if(i.length>0){i.slideUp(400,function(){g.data("open-day",null);n.openMobileEvents(h,m)})}else{n.openMobileEvents(h)}return}});g.find(".calendar-grid-buttons .prev-button,.calendar-grid-buttons .next-button").on("click",function(t){t.preventDefault();h=a(this);var p=h.closest("form"),q=p.find("#sDate"),o=p.find("#eDate"),r=p.find("#siteId"),v=p.closest("html").hasClass("styler"),s=a(t.currentTarget),u=window.location.href,w;if(v){return}q.val(s.data("sdate"));o.val(s.data("edate"));if(u.indexOf("siteId")!==-1){w=b.tools.getParameterByName("siteId");r.val(w)}else{r.remove()}p.submit()})}g.find(".switch-to-list").on("click",function(r){r.preventDefault();h=a(this);var o=h.closest("form"),p=o.find("#siteId"),q=o.find("#tab"),u=o.closest("html").hasClass("styler"),t=!h.hasClass("styler-bypass"),s,v;if(u&&t){return}q.val(0);s=window.location.href;if(s.indexOf("siteId")!==-1){v=b.tools.getParameterByName("siteId");p.val(v)}else{p.remove()}o.submit()});g.find(".grid-filter-button").on("click",function(o){o.preventDefault();var p;h=a(this);f=a(".grid-filter");p=f.closest("html").hasClass("styler");if(p){return}if(f.is(":visible")){h.removeClass("active").html("Filter");f.slideUp()}else{h.addClass("active").html("Close Filter");f.slideDown()}});f=g.find(".grid-filter");k=f.find(".select-all.button");e=f.find(".clear-all.button");j=f.find(".refresh.button");k.click(function(){f=a(".grid-filter");var o=f.find(".filter-item input[type=checkbox]");o.prop("checked",true);n.setEventCats(g.find("form"));n.setShowAll("1")});e.click(function(){f=a(".grid-filter");var o=f.find(".filter-item input[type=checkbox]");o.prop("checked",false);n.setEventCats(g.find("form"));n.setShowAll("0")});f.find(".filter-item input").on("click",function(){n.setEventCats(g.find("form"));n.setShowAll("0")});j.click(function(){var o=a(this).closest("form"),p=o.find("#siteId"),r=o.closest("html").hasClass("styler"),q,s;if(!r){q=window.location.href;if(q.indexOf("siteId")!==-1){s=b.tools.getParameterByName("siteId");p.val(s)}else{p.remove()}o.submit()}})})}}}(jQuery));(function(a){a(".video select").change(function(){a(this).parents("form").submit()})}(jQuery));(function(a){var b={init:function(){var c=a(this);c.find(".close").on("click",function(){var e=a(this),d=e.closest(".bulletin-item"),f=d.data("bid"),h=onMessage.tools.getCookie("om-ebb"),g=(h&&h.length>0)?h.split(","):[];if(f){g.push(f)}h=g.toString();onMessage.tools.setCookie("om-ebb",h,30);d.remove();if(c.find(".bulletin-item").length===0){c.remove()}})},version:function(){return"onMessage bulletinBanner: Version 1.0"},log:function(c){if(window.console){window.console.debug(c)}}};a.fn.bulletinBanner=function(c){if(b[c]){return b[c].apply(this,Array.prototype.slice.call(arguments,1))}if(typeof c==="object"||!c){return this.each(function(d){this.method=d;b.init.apply(this,arguments)})}a.error("Method "+c+" does not exist on jQuery.bulletinBanner")}}(jQuery));(function(a){var b={init:function(){var c=a(this);c.modal({escClose:false,autoResize:true,zIndex:500000000,onClose:function(){a.modal.close();a("#content_398").remove()}});c.find(".close,.emergencybulletin-lightbox").on("click",function(f){if(f.target.className!=="button addinfo"){var e=onMessage.tools.getCookie("om-ebl"),d=(e&&e.length>0)?e.split(","):[];c.find(".bulletin-item").each(function(){var g=a(this),h=g.data("bid");if(h){d.push(h)}});e=d.toString();onMessage.tools.setCookie("om-ebl",e,30);a.modal.close()}})},version:function(){return"onMessage bulletinLightbox: Version 1.0"},log:function(c){if(window.console){window.console.debug(c)}}};a.fn.bulletinLightbox=function(c){if(b[c]){return b[c].apply(this,Array.prototype.slice.call(arguments,1))}if(typeof c==="object"||!c){return this.each(function(d){this.method=d;b.init.apply(this,arguments)})}a.error("Method "+c+" does not exist on jQuery.bulletinLightbox")}}(jQuery));(function(a){var b=function(){var e=new Date().getTime(),f="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(d){var g=(e+Math.random()*16)%16|0;e=Math.floor(e/16);return(d==="x"?g:(g&7|8)).toString(16)});return f},c={init:function(){var f=a(this),e=f.find("form"),d=e.find("#captcharefresh");e.on("submit",function(){if(!c.validate(e)){f.find(".field-error-message").show();e.find(".field-error INPUT:eq(0)").focus();return false}f.find(".field-error-message").hide();e.find(".field-error").removeClass("field-error")});d.on("click",function(){var h=b(),g="/page/utilities/captcha.ashx?prefix="+h;a("#captcha_image").attr("src",g);a("#Captcha").val("");a("#captcha_guid").val(h)})},version:function(){return"onMessage Forms: Version 1.0"},log:function(d){if(window.console){window.console.debug(d)}},validate:function(d){var e=d.find(".required"),f=true;e.each(function(){var g=a(this);if(g.find("input").length>0){if(g.find("input").val().length===0){g.addClass("field-error");f=false}}if(g.find("select").length>0){if(g.find("select").val().length===0){g.addClass("field-error");f=false}}});return f}};a.fn.forms_detail=function(d){if(c[d]){return c[d].apply(this,Array.prototype.slice.call(arguments,1))}if(typeof d==="object"||!d){return this.each(function(e){this.method=e;c.init.apply(this,arguments)})}a.error("Method "+d+" does not exist on jQuery.forms")}}(jQuery));(function(a){var c=(function(){var g,d,f={hidden:"visibilitychange",webkitHidden:"webkitvisibilitychange",mozHidden:"mozvisibilitychange",msHidden:"msvisibilitychange"},e=0;for(e=0;e<f.length-1;e++){if(document.hasOwnProperty(f[e])){g=f[e];d=f[g];break}}return function(h){if(h){document.addEventListener(d,h)}return !document[g]}}()),b={init:function(i){i=i||{};var j=a.extend({},i),f=a(this),h=f.attr("class").split(" "),e,d,g;j.loop=(a.inArray("loop-animation",h)!==-1)?true:false;j.autoAdvance=(a.inArray("no-auto-advance",h)!==-1)?false:true;j.pauseOnHover=(a.inArray("pause-on-hover",h)!==-1)?true:false;j.pauseOnAction=(a.inArray("pause-on-action",h)!==-1)?true:false;j.haveDetails=(a.inArray("no-details",h)!==-1)?false:true;j.random=(a.inArray("randomize",h)!==-1)?true:false;j.slideshowSpeed=(!isNaN(parseFloat(f.attr("slideshowspeed"),10)))?b.convertToMiliseconds(parseFloat(f.attr("slideshowspeed"),10)):5000;j.animationSpeed=(!isNaN(parseFloat(f.attr("animationspeed"),10)))?b.convertToMiliseconds(parseFloat(f.attr("animationspeed"),10)):1000;if(f.closest("html").hasClass("styler")){j.autoAdvance=false}if(j.random){f.find(".bg-image").shuffle()}f.data({options:j,index:0,finished:false});e=f.find(".bg-image").eq(0);d=f.find(".details-"+e.data("id"));g=f.find(".details-viewport");f.closest(".region").css({position:"relative"});e.addClass("current-slide");f.find(".pager li a").eq(0).addClass("current-pager-item");d.addClass("current-details");g.height(d.outerHeight());return f},convertToMiliseconds:function(d){return d*1000},version:function(){return"Background Carousel : Version 1.2"},log:function(d){if(window.console){console.debug(d)}}};a.fn.bgcarousel=function(d){if(b[d]){return b[d].apply(this,Array.prototype.slice.call(arguments,1))}if(typeof d==="object"||!d){return this.each(function(f){var e=b.init.apply(this,arguments),g={obj:e,slides:e.find(".bg-image"),pager:e.find(".pager"),options:e.data("options"),queue:[],timeout:"",animating:false,isVisible:function(){var h=true;if(!c()){h=false}return h},go:function(h){if(!g.animating&&g.isVisible()){g.animating=true;var i=g.obj.data("index")+h;if(h>0){i=(i>=g.slides.length)?0:i}g.obj.data("next",i);g.maybeLoadNextImages(i);g.animate()}},animate:function(){var j=g.slides.eq(g.obj.data("index")),l=g.slides.eq(g.obj.data("next")),h=g.obj.find(".details"),i=g.obj.find(".details-"+j.data("id")),k=g.obj.find(".details-"+l.data("id")),m=g.obj.find(".details-viewport");if(k.hasClass("no-details")){k.closest(".details-content").animate({opacity:0},{duration:g.options.animationSpeed/2,easing:"swing"})}i.animate({opacity:0},{duration:g.options.animationSpeed/2,easing:"swing",queue:false,complete:function(){m.animate({height:k.outerHeight()},{duration:g.options.animationSpeed/2,easing:"swing",queue:false,complete:function(){h.removeClass("current-details").css({opacity:0});k.animate({opacity:1},{duration:g.options.animationSpeed/2,easing:"swing",queue:false,complete:function(){a(this).addClass("current-details");if(!k.hasClass("no-details")){k.closest(".details-content").animate({opacity:1},{duration:g.options.animationSpeed/2,easing:"swing"})}}})}})}});l.animate({opacity:1},{duration:g.options.animationSpeed/2,easing:"swing",queue:false,complete:function(){j.animate({opacity:0},{duration:g.options.animationSpeed/2,easing:"swing",queue:false,complete:function(){a(this).removeClass("current-slide")}});a(this).addClass("current-slide");g.obj.data("index",g.obj.data("next"));g.pager.find(".current-pager-item").removeClass("current-pager-item");g.pager.find("a").eq(g.obj.data("index")).addClass("current-pager-item");g.animating=false}})},autoAdvance:function(){g.timeout=setTimeout(function(){var i=g.obj.data("index"),h=true;if(!g.options.loop&&i===g.slides.length-1){h=false;g.obj.data("finished",true)}if(h){g.go(1);g.autoAdvance()}},g.options.slideshowSpeed)},maybeLoadNextImages:function(k){var i=g.obj.find(".bg-resp-photo"),h="",l=1,m=1,j;if(k===0){m=0;h=i.slice(i.length-1)}j=i.slice(k-m,k+l).add(h);j.each(function(){var n=a(this);g.loadImage(n)})},loadImage:function(i){var h=i.closest(".region"),k=i.data("colWidth"),j=h.width(),m,l;if(k&&k===j){return}i.data("colWidth",j);m=g.setRenditions(i);l=g.selectRendition(m,j);if(l){i.css({"background-image":"url("+l.Src+")"});return}},selectRendition:function(k,h){var j;for(j=0;j<k.length;j++){if(h>=k[j].MinWidth&&h<=k[j].MaxWidth){return k[j]}}},setRenditions:function(h){if(h.data("renditions")){return h.data("renditions")}var j=[],i=0;h.find("SPAN").each(function(){j.push({Src:a(this).data("src"),MinWidth:i,MaxWidth:a(this).data("width")});i=a(this).data("width")+1});if(j.length>0){j[j.length-1].MaxWidth=9999}h.data("renditions",j);return j}};g.maybeLoadNextImages(0);if(g.slides.length>1){e.find(".controls a").on("click",function(i){i.preventDefault();var h=a(this);if(h.hasClass("control-next")){g.go(1)}else{g.go(-1)}});e.find(".pager a").on({click:function(j){j.preventDefault();var h=a(this),i=h.closest("ul"),k=i.find("a").index(h);if(g.obj.data("index")!==k){g.go(k-g.obj.data("index"))}},mouseenter:function(){var h=a(this),i=h.closest("ul"),j=i.find("a").index(h);g.maybeLoadNextImages(j)}});if(g.options.autoAdvance){g.autoAdvance();if(g.options.haveDetails){if(g.options.pauseOnHover){g.obj.find(".details-content").on({mouseenter:function(h){clearTimeout(g.timeout)},mouseleave:function(h){var i=g.obj.data("finished");if(!i){setTimeout(function(){g.autoAdvance()},g.options.animationSpeed)}}})}if(g.options.pauseOnAction){g.obj.find(".controls a, .pager a").on("click",function(h){h.preventDefault();clearTimeout(g.timeout)})}}}}else{g.obj.find(".bg-carousel-nav").remove();g.obj.find(".controls").remove()}})}};a.fn.shuffle=function(){var d=this.get(),e=function(g){return Math.floor(Math.random()*g)},f=a.map(d,function(){var h=e(d.length),g=a(d[h]).clone(true)[0];d.splice(h,1);return g});this.each(function(g){a(this).replaceWith(a(f[g]))});return a(f)}}(jQuery));(function(a){var b={convertToMiliseconds:function(c){return c*1000},get_current_viewport:function(){var d=b.get_viewports(),e=a(window).width(),c=d.desktop;if(e>d.large_desktop){c=d.large_desktop}else{if(e<d.portrait&&e>d.mobile){c=d.portrait}else{if(e<=d.mobile){c=d.mobile}}}return c},get_viewports:function(){return{mobile:767,portrait:979,desktop:0,large_desktop:1200}},init:function(g){g=g||{};var h=a.extend({arrows:false,podiumStyle:false},g),c=a(this),d=(c.attr("class")!==undefined)?c.attr("class").split(" "):"",f=parseInt(c.attr("minItem"),10),e=parseInt(c.attr("maxItem"),10);h.carouselType=(a.inArray("carousel-type-text",d)!==-1)?"text":"photo";h.contentType=(c.attr("type")!==undefined)?c.attr("type"):undefined;h.StyleModeId=(!isNaN(parseInt(c.attr("mode"),10)))?parseInt(c.attr("mode"),10):1;h.arrows=(a.inArray("arrows",d)!==-1)?true:false;h.counter=(a.inArray("show-counter",d)!==-1&&!a("HTML").hasClass("ismodal"))?true:false;h.randomize=(a.inArray("randomize",d)!==-1)?true:false;h.loop=(a.inArray("loop-animation",d)!==-1)?true:false;h.startAt=(!isNaN(parseInt(c.attr("startat"),10)))?parseInt(c.attr("startat"),10):1;h.smoothheight=(a.inArray("smoothheight",d)!==-1)?true:false;h.showArrowsAlways=(a.inArray("show-arrows-always",d)!==-1)?true:false;h.min=(!isNaN(f)&&f!==0)?f:1;h.max=(!isNaN(e)&&e!==0)?e:1;h.slideWidth=(!isNaN(parseInt(c.attr("slideWidth"),10)))?parseInt(c.attr("slideWidth"),10):1;h.showCaption=(a.inArray("show-caption",d)!==-1)?true:false;h.showCaptionOnHover=(a.inArray("caption-hover",d)!==-1)?true:false;h.captionTop=(a.inArray("caption-position-top",d)!==-1)?true:false;h.captionBottom=(a.inArray("caption-position-bottom",d)!==-1)?true:false;h.captionInside=(a.inArray("caption-location-inside",d)!==-1)?true:false;h.captionOutside=(a.inArray("caption-location-outside",d)!==-1)?true:false;h.pagerArrows=(a.inArray("pager-arrows",d)!==-1)?true:false;h.pager=(a.inArray("pager",d)!==-1)?true:false;h.pagerThumbnails=(a.inArray("pager-type-thumbnails",d)!==-1)?true:false;h.pagertop=(a.inArray("pager-position-top",d)!==-1)?true:false;h.pagerbottom=(a.inArray("pager-position-bottom",d)!==-1)?true:false;h.pagerleft=(a.inArray("pager-position-left",d)!==-1)?true:false;h.pagerright=(a.inArray("pager-position-right",d)!==-1)?true:false;h.pagerAlignLeft=(a.inArray("pager-alignment-right",d)!==-1)?true:false;h.pagerAlignCenter=(a.inArray("pager-alignment-center",d)!==-1)?true:false;h.pagerAlignRight=(a.inArray("pager-alignment-right",d)!==-1)?true:false;h.pagerAlignTop=(a.inArray("pager-alignment-top",d)!==-1)?true:false;h.pagerAlignBottom=(a.inArray("pager-alignment-bottom",d)!==-1)?true:false;h.pagerType=(a.inArray("pager-type-thumbnails",d)!==-1)?"thumbnails":"shapes";if(h.pagerThumbnails){h.pager=false;h.thumbMargin=(!isNaN(parseInt(c.attr("thumbMargin"),10)))?parseInt(c.attr("thumbMargin"),10):0;h.thumbHeight=(!isNaN(parseInt(c.attr("thumbHeight"),10)))?parseInt(c.attr("thumbHeight"),10):100;h.thumbWidth=(!isNaN(parseInt(c.attr("thumbWidth"),10)))?parseInt(c.attr("thumbWidth"),10):100;h.thumbstop=(a.inArray("thumbs-position-top",d)!==-1)?true:false;h.thumbsbottom=(a.inArray("thumbs-position-bottom",d)!==-1)?true:false;h.thumbsleft=(a.inArray("thumbs-position-left",d)!==-1)?true:false;h.thumbsright=(a.inArray("thumbs-position-right",d)!==-1)?true:false}h.autoAdvance=(a.inArray("no-auto-advance",d)!==-1)?false:true;h.pauseOnHover=(a.inArray("pause-on-hover",d)!==-1)?true:false;h.pauseOnAction=(a.inArray("pause-on-action",d)!==-1)?true:false;h.slideshowSpeed=(!isNaN(parseFloat(c.attr("slideshowSpeed"),10)))?b.convertToMiliseconds(parseFloat(c.attr("slideshowSpeed"),10)):5000;h.animationSpeed=(!isNaN(parseFloat(c.attr("animationSpeed"),10)))?b.convertToMiliseconds(parseFloat(c.attr("animationSpeed"),10)):1000;h.animationType=(a.inArray("animation-slide",d)!==-1)?"slide":"fade";h.direction="horizontal";if((h.pagerleft||h.pagerright||h.thumbsleft||h.thumbsright)&&(h.animationType==="slide"||h.pagerType==="thumbnails")){h.direction="vertical"}h.heightResetUseLi=false;h.podiumStyle=(a.inArray("gallery-style",d)!==-1)?true:false;if(h.podiumStyle){h.pager=false;h.direction="horizontal"}h.videoContentType=false;if(h.contentType==="video"){h.videoContentType=true}if(h.StyleModeId===4||h.StyleModeId===2){h.direction="horizontal";h.counter=false;c.find(".counter").remove();c.find("li").css({width:h.slideWidth})}else{h.slideWidth=0}h.defaultArgs={animation:h.animationType,smoothHeight:h.smoothheight,easing:"swing",direction:h.direction,reverse:false,animationLoop:h.loop,slideshow:h.autoAdvance,slideshowSpeed:h.slideshowSpeed,animationSpeed:h.animationSpeed,startAt:h.startAt-1,randomize:h.randomize,pauseOnAction:h.pauseOnAction,pauseOnHover:h.pauseOnHover,useCSS:true,touch:true,video:h.videoContentType,controlNav:h.pager,directionNav:h.arrows,prevText:"back",nextText:"next",itemWidth:h.slideWidth,itemMargin:0,minItems:h.min,maxItems:h.max,move:0};c.addClass("flex-"+h.direction);c.addClass("carousel-direction-"+h.direction);if(h.counter){c.find(".counter").show()}c.data("options",h);c.data("vars",{pagerIndex:h.defaultArgs.startAt,pagerCurrentPage:1});b.$obj=c;c.find(".carousel-photo").data("loaded",false);b.maybeLoadNextImages(c,0)},loadAudio:function(c){a(".jp-jplayer").each(function(f,e){var d=a(e);d.jPlayer({ready:function(){d.jPlayer("setMedia",{mp3:d.data("filename-url")})},play:function(){c.flexslider("pause");d.jPlayer("pauseOthers")},ended:function(){c.flexslider("play")},pause:function(){c.flexslider("play")},cssSelectorAncestor:d.data("container-id"),swfPath:onMessage.pluginManager.plugins.jPlayer.swfPath,supplied:"mp3",volume:0.5})})},loadImage:function(e,f){var i=f.data("options"),c=(i.StyleModeId===2)?e.closest("li"):e.closest(".col"),h=e.data("colWidth"),g=c.width(),k,d,j;if(h&&h===g){return}e.data("colWidth",g);k=b.setRenditions(e);d=e.find("img.carousel-image");j=b.selectRendition(k,g);if(j){if(d.length>0){d.attr("src",j.Src);return}d=a("<img>",{src:j.Src,"class":"carousel-image",alt:(e.data("caption")||e.data("title")||"")});d.appendTo(e).load(function(){if(f!==undefined){var n=f.data("options"),m=(n.animationType==="slide")?f.find(".flex-viewport"):f.find(".slides").parent(),l=d.closest("li");if(l.index()===1&&!n.smoothheight){m.animate({height:l.height()},(n.smoothheight)?200:1)}}});d.css("display","none").height();d.css("display","block");if(a("HTML").hasClass("ismodal")){d.height(a("HTML").height())}}if(f!==undefined){f.resize()}},log:function(c){if(window.console){console.debug(c)}},maybeHideCaptionAll:function(d){var c=d.find("figcaption");if(c.length>0){c.each(function(){if(a(this).find(".caption-spacing").is(":empty")){a(this).hide()}})}},maybeHideCaption:function(d){var c=(d.slides===undefined)?d.find("figcaption"):d.slides.eq(d.animatingTo).find("figcaption");if(c.length>0){if(c.find(".caption-spacing").is(":empty")){c.hide()}}},maybeLoadNextImages:function(f,g){var i=f.data("options"),d=f.find("li:not(.clone) .carousel-photo"),c="",h=i.max,j=i.max,e;if(g===0||g===d.length){if(g===0){j=0}c=f.find(".clone .carousel-photo")}e=d.slice((g*i.max)-j,(g*i.max)+i.max+h).add(c);e.each(function(){var k=a(this);b.loadImage(k,f)})},selectRendition:function(e,c){var d;for(d=0;d<e.length;d++){if(c>=e[d].MinWidth&&c<=e[d].MaxWidth){return e[d]}}},setCaption:function(e){var c=e.find(".caption-spacing"),d=e.find(".flex-active-slide figure"),f="",l,j,i,g,h,k;if(e.slides===undefined||e.slides.length===1){d=e.find("figure")}l=d.data("title")||"";j=d.data("detailurl")||"";i=d.data("date")||"";g=d.data("author")||"";h=d.data("caption")||"";k=d.data("long")||"";if(l.length>0){if(j.length>0){f+='<h4 class="crl-title"><a href="'+j+'">'+l+"</a></h4>"}else{f+='<h4 class="crl-title">'+l+"</h4>"}}if(i.length>0){f+='<time class="crl-date">'+i+"</time>"}if(g.length>0){f+='<h4 class="crl-author">'+g+"</h4>"}if(h.length>0){f+='<div class="crl-caption">'+h+"</div>"}if(k.length>0){f+='<div class="crl-description">'+k+"</div>"}if(f.length>0){c.html("").append(f).show()}else{c.hide()}},setRenditions:function(c){if(c.data("renditions")){return c.data("renditions")}var e=[],d=0;c.find("SPAN").each(function(){e.push({Src:a(this).data("src"),MinWidth:d,MaxWidth:a(this).data("width")});d=a(this).data("width")+1});if(e.length>0){e[e.length-1].MaxWidth=9999}c.data("renditions",e);return e},updateCounter:function(d){if(d.slides===undefined){return}var c=d.find(".counter .current-image"),e=d.slides.index(d.find(".flex-active-slide"));c.html(e+1)},version:function(){return"onMessage Carousel: Version 2.8"}};a.fn.carousel=function(c){if(b[c]){return b[c].apply(this,Array.prototype.slice.call(arguments,1))}if(typeof c==="object"||!c){return this.each(function(h){this.method=h;b.init.apply(this,arguments);var e=a(this),f=e.find("li"),i=e.data("options"),j=e.data("vars"),g=-1,d;j.carouselID=e.attr("id").split("-")[1];e.data("vars",j);if(i.direction==="vertical"&&i.animationType==="slide"){if(i.captionOutside&&(i.captionBottom||i.captionTop)){i.heightResetUseLi=true}f.each(function(){var l=a(this),k=(i.heightResetUseLi)?l:l.find("img"),m=k.height();g=(g<m)?m:g});f.height(g)}i.defaultArgs.start=function(l){j=l.data("vars");var k,m=l.find("li.autoplay:not(.clone) .vjs-big-play-button");if(i.contentType==="video"){l.find(".vjs-big-play-button, .vjs-play-control.vjs-paused").on("click",function(){l.flexslider("pause")});l.on("mouseleave",function(){var n=l.find(".vjs-play-control.vjs-playing");if(n.length>0){l.flexslider("pause")}});if(m.length>0){m.click()}}if(i.contentType==="audio"){b.loadAudio(l)}if(i.StyleModeId<=2){b.maybeLoadNextImages(l,0)}if(i.direction==="vertical"&&i.pagerType==="thumbnails"){a(i.defaultArgs.sync+" .flex-viewport").height(l.height())}if(l.hasClass("sample-template")){a(i.defaultArgs.sync).addClass("sample-template")}if(i.podiumStyle){if(i.counter){k=l.find(".counter");d=l.find(".flex-direction-nav");d.append('<li class="counter crl-counter show">'+k.html()+"</li>");k.remove()}if(i.showCaption){l.append('<div class="caption"><div class="caption-spacing crl-inner-details"></div></div>');b.setCaption(l)}}else{if(i.StyleModeId<=2){b.maybeHideCaptionAll(l)}}if(i.pagerType!=="thumbnails"){l.find(".flex-control-nav").addClass("crl-pager")}if(i.carouselType==="photo"){l.find("img").on("click",function(){l.flexslider("next")})}l.data("vars",j);if(i.animationType==="fade"){l.find("ul.slides li.flex-active-slide").css({display:"list-item"})}if(i.StyleModeId===2){l.find("figure").css({"min-height":l.find(".carousel-photo img").eq(0).height()})}if(l.controlNav!==undefined){l.controlNav.on({mouseenter:function(){b.maybeLoadNextImages(l,a(this).parent().prevAll().length)}})}setTimeout(function(){l.resize()},750)};i.defaultArgs.before=function(l){switch(i.contentType){case"video":var k=l.find(".vjs-play-control.vjs-playing");if(k.length>0){k.click()}l.find("li:not(.autoplay) .video-js.vjs-controls-disabled").removeClass("vjs-controls-disabled");break;case"audio":l.find(".jp-jplayer").jPlayer("pause");break}if(!i.podiumStyle){b.maybeHideCaption(l)}};i.defaultArgs.after=function(k){j=k.data("vars");i=k.data("options");var l=k.find(".flex-active-slide").index();if(i.direction==="vertical"&&i.pagerType==="thumbnails"){a(i.defaultArgs.sync+" .flex-viewport").height(k.height())}if(i.podiumStyle){b.setCaption(k)}j.pagerIndex=l;if(i.counter){b.updateCounter(k)}if(i.StyleModeId<=2){b.maybeLoadNextImages(k,k.currentSlide)}k.data("vars",j);k.resize()};if(i.showCaptionOnHover){e.find("li").on({mouseenter:function(){a(this).find(".details").fadeIn()},mouseleave:function(){a(this).find(".details").fadeOut()}})}if(i.pagerThumbnails){d=a("#carousel-nav-"+j.carouselID);d.flexslider({animation:"slide",direction:i.direction,controlNav:false,animationLoop:i.loop,slideshow:false,itemHeight:i.thumbHeight,itemWidth:i.thumbWidth,itemMargin:i.thumbMargin,start:function(k){k.addClass("crl-pager")},asNavFor:"#carousel-"+j.carouselID});i.defaultArgs.sync="#carousel-nav-"+j.carouselID}e.flexslider(i.defaultArgs)})}}}(jQuery));(function(a){var b={init:function(f){if(f===undefined){f={}}var e,g=a.extend({animate:true},f),c=a(this),d=c.attr("class").split(" ");g.plusminus=false;for(e=0;e<d.length;e++){if(d[e].indexOf("menu-animate")!==-1){g.animate=(d[e].split("-")[2]==="true")?true:false}if(d[e].indexOf("menu-always-show")!==-1){g.show=(d[e].split("-")[3]==="true")?true:false}if(d[e]==="use-plusminus"){g.plusminus=true}}if(c.hasClass("sample-template")){g.show=true}g.offLabel=(c.attr("sub_off").length>0)?c.attr("sub_off"):false;g.hoverLabel=(c.attr("sub_hover").length>0)?c.attr("sub_hover"):false;g.onLabel=(c.attr("sub_on").length>0)?c.attr("sub_on"):false;c.data("options",g);b.$menu=c;a("body").on("resize",function(h){h.stopPropagation()})},open:function(c,e){var d=this.getMenuObject(c),f=b.$menu.data("options");d.li.addClass("on");if(f.onLabel){d.ind.removeClass("arrow").html(f.onLabel)}else{d.ind.addClass("arrow").html("")}if(e){d.sub.slideDown()}else{d.sub.css("display","block")}},close:function(c,d){var e=c.length;c.each(function(){var f=b.getMenuObject(c),g=b.$menu.data("options");f.li.removeClass("on");if(g.offLabel){f.ind.removeClass("arrow").html(g.offLabel)}else{f.ind.addClass("arrow").html("")}if(d){f.sub.slideUp(250)}else{f.sub.css("display","none")}if(e===1){b.$menu.css("min-height","")}e--})},getMenuObject:function(c){var d={};switch(c.prop("tagName").toLowerCase()){case"a":d.sub=c.next("ul");d.a=c;d.li=c.parent();d.ind=c.find("i");break;case"ul":d.sub=c;d.a=c.siblings("span.toggle");d.li=c.parent();break;case"span":d.sub=c.parent().next("ul");d.a=c.parent();d.li=c.closest("li");d.ind=c.siblings("i");break;default:d.sub=c.find("ul:eq(0)");d.a=c.find("span.toggle");d.li=c;d.ind=c.find("i");break}return d},version:function(){return"onMessage Accordion Menu: Version 1.0"},log:function(c){if(window.console){window.console.debug(c)}},debug:function(){var c=a(this);if(c.hasClass("debug")){c.removeClass("debug")}else{c.addClass("debug")}return"Debug Settings Changed."}};a.fn.accordionmenu=function(c){if(b[c]){return b[c].apply(this,Array.prototype.slice.call(arguments,1))}if(typeof c==="object"||!c){return this.each(function(f){b.init.apply(this,arguments);var e=a(this),g=e.data("options"),d;e.find("span.toggle").on("click",function(j){j.stopPropagation();j.preventDefault();var i=a(this),h=i.closest("li");if(!h.hasClass("active")){h.siblings().each(function(){var k=a(this),l=(g.show&&k.closest("li").hasClass("active"))?false:true;if(l){b.close(k,g.animate)}})}if(h.hasClass("on")){b.close(i,g.animate)}else{b.open(i,g.animate)}});if(g.hoverLabel){e.find("li.has-sub-menu").find("a:eq(0)").on({mouseenter:function(){var j=a(this),i=j.parent(),h=j.find("i");if(!i.hasClass("on")){h.removeClass("arrow").html(g.hoverLabel)}},mouseleave:function(){var j=a(this),i=j.parent(),h=j.find("i");if(!i.hasClass("on")){if(g.offLabel){h.html(g.offLabel)}else{h.html("").addClass("arrow")}}else{if(g.onLabel){h.html(g.onLabel)}else{h.html("").addClass("arrow")}}}})}if(g.show){d=e.find("li.active");if(d.length>0){b.open(d,g.animate)}}})}a.error("Method "+c+" does not exist on jQuery.accmenu")}}(jQuery));(function(a){var b=a(".breadcrumb .home");if(b.length===0){a(".breadcrumb ul").find("li.separator").eq(0).hide()}}(jQuery));(function(a){var b={init:function(f){if(f===undefined){f={}}var e,g=a.extend({action:"hover",type:"horizontal",animate:true},f),c=a(this),d;if(c.hasClass("menu-type-vertical")&&c.closest(".layout-col").hasClass("last-col")){c.removeClass("menu-direction-left").addClass("menu-direction-right")}d=c.attr("class").split(" ");for(e=0;e<d.length;e++){if(d[e].indexOf("menu-type")!==-1){g.type=d[e].split("-")[2]}if(d[e].indexOf("menu-action")!==-1){g.action=d[e].split("-")[2]}if(d[e].indexOf("menu-animate")!==-1){g.animate=(d[e].split("-")[2]==="true")?true:false}if(d[e].indexOf("menu-direction")!==-1){g.direction=d[e].split("-")[2]}}c.data("options",g);return c},open:function(c,d){if(d){c.fadeIn()}else{c.css("display","block")}},close:function(c,d){if(d){c.fadeOut()}else{c.css("display","none")}c.css({left:-1000000})},positionSubMenus:function(c){return undefined},version:function(){return"onMessage Menu: Version 1.0"},log:function(c){if(window.console){window.console.debug(c)}},debug:function(){var c=a(this);if(c.hasClass("debug")){c.removeClass("debug")}else{c.addClass("debug")}return"Debug Settings Changed."},positionMe:function(){return undefined}};a.fn.menu=function(c){if(b[c]){return b[c].apply(this,Array.prototype.slice.call(arguments,1))}if(typeof c==="object"||!c){return this.each(function(h){var f=b.init.apply(this,arguments),i=f.data("options"),e=f.find(".submenu").parent(":not(nav)"),g,d;switch(i.action){case"click":e.find("a").on("click",function(m){var j=a(this),l=j.next(".submenu"),n=j.offset(),o=parseInt(a(window).width(),10),k;n.right=parseInt(l.outerWidth()*2+n.left,10);n.left=parseInt(j.outerWidth()*2+n.left,10);if(l.length===0){b.close(f.find(".submenu:visible"),i.animate);return}if(l.length>0&&!l.is(":visible")){m.preventDefault();k=j.closest(".submenu");if(k.length>=1){b.close(j.find(".submenu"),i.animate)}else{b.close(f.find(".submenu:visible"),i.animate)}if(!l.parents("ul:eq(0)").hasClass("menu-container")){if(o<=n.right){l.css({"z-index":n.right,left:-(j.outerWidth())})}}b.open(l,i.animate)}});e.find(".submenu").on({mouseleave:function(){b.close(a(this),i.animate)}});f.find(".menu-container > li").on({mouseleave:function(){b.close(a(this).children(".submenu"),i.animate)}});break;default:d=f.find("ul.menu-container li.has-sub-menu");d.on({"mouseenter touchstart":function(){var j=a(this),k=j.children(".submenu"),l=k.offset(),n=parseInt(a(window).width(),10),m=0;l.right=parseInt(k.outerWidth()+l.left,10);m=k.outerWidth()*-1;if(j.hasClass("level-1")){m+=j.outerWidth()}if(l.left!==0){if(n<=l.right){k.css({left:m})}}},mouseleave:function(){var j=a(this),k=j.children(".submenu");k.css({left:""})}});break}switch(i.direction){case"up":g=f.find(".menu-container > li").find(".submenu:eq(0)");g.each(function(){var j=a(this);j.css({top:-(j.height())})});d=f.find("ul.menu-container ul li.has-sub-menu");d.on({mouseenter:function(){var j=a(this),k=j.children(".submenu");k.css({top:-(k.height()-j.outerHeight())})}});break;case"right":g=f.find(".menu-container li.has-sub-menu");g.on({mouseenter:function(){var j=a(this),k=j.children(".submenu"),l=j.outerWidth(),n=k.outerWidth(),m=(l<n)?l+(n-l):l;k.css({left:-1*m})},mouseleave:function(){var j=a(this),k=j.children(".submenu");k.css({left:-1000000})}});break;case"left":g=f.find(".menu-container li");g.on({mouseenter:function(){var j=a(this),k=j.children(".submenu");k.css({left:(k.outerWidth())})},mouseleave:function(){var j=a(this),k=j.children(".submenu");k.css({left:-1000000})}});break}a(window).resize(function(){d=f.find("ul.menu-container ul li.has-sub-menu");d.each(function(){var j=a(this),k=j.children(".submenu");k.attr("style","")})});f.find("li.has-sub-menu > a").on({touchstart:function(l){var k=a(this),j=k.closest(".nav-menu").find(".level-1 > a");if(!k.data("clicked")){l.preventDefault()}j.data("clicked",false);k.data("clicked",true)}})})}a.error("Method "+c+" does not exist on jQuery.menu")}}(jQuery));(function(a){var b={init:function(f){if(f===undefined){f={}}var e,g=a.extend({action:"hover",type:"horizontal",animate:true},f),c=a(this),d;if(c.hasClass("menu-type-vertical")&&c.closest(".col").hasClass("last-col")){c.removeClass("menu-direction-left").addClass("menu-direction-right")}d=c.attr("class").split(" ");for(e=0;e<d.length;e++){if(d[e].indexOf("menu-type")!==-1){g.type=d[e].split("-")[2]}if(d[e].indexOf("menu-action")!==-1){g.action=d[e].split("-")[2]}if(d[e].indexOf("menu-animate")!==-1){g.animate=(d[e].split("-")[2]==="true")?true:false}if(d[e].indexOf("menu-direction")!==-1){g.direction=d[e].split("-")[2]}}c.data("options",g);return c},open:function(c,d){if(d){c.fadeIn()}else{c.css("display","block")}},close:function(c,d){if(d){c.fadeOut()}else{c.css("display","none")}c.css({left:-1000000})},positionSubMenus:function(c){return undefined},version:function(){return"onMessage Menu: Version 1.0"},log:function(c){if(window.console){window.console.debug(c)}},debug:function(){var c=a(this);if(c.hasClass("debug")){c.removeClass("debug")}else{c.addClass("debug")}return"Debug Settings Changed."}};a.fn.menu=function(c){if(b[c]){return b[c].apply(this,Array.prototype.slice.call(arguments,1))}if(typeof c==="object"||!c){return this.each(function(f){var e=b.init.apply(this,arguments),g=e.data("options"),d=e.find(".submenu").parent(":not(nav)");switch(g.action){case"click":d.find("a").on("click",function(k){var h=a(this),j=h.next(".submenu"),l=h.offset(),m=parseInt(a(window).width(),10),i;l.right=parseInt(j.outerWidth()*2+l.left,10);l.left=parseInt(h.outerWidth()*2+l.left,10);if(j.length===0){b.close(e.find(".submenu:visible"),g.animate);return}if(j.length>0&&!j.is(":visible")){k.preventDefault();i=h.closest(".submenu");if(i.length>=1){b.close(h.find(".submenu"),g.animate)}else{b.close(e.find(".submenu:visible"),g.animate)}if(!j.parents("ul:eq(0)").hasClass("menu-container")){if(m<=l.right){j.css({"z-index":l.right,left:-(h.outerWidth())})}}b.open(j,g.animate)}});d.find(".submenu").on({mouseleave:function(){b.close(a(this),g.animate)}});e.find(".menu-container > li").on({mouseleave:function(){b.close(a(this).children(".submenu"),g.animate)}});break;default:e.find("ul.menu-container li.has-sub-menu").on({"touchstart mouseenter":function(){var h=a(this),i=h.children(".submenu"),j=i.offset(),l=parseInt(a(window).width(),10),k=0;j.right=parseInt(i.outerWidth()+j.left,10);k=i.outerWidth()*-1;if(h.hasClass("level-1")){k+=h.outerWidth()}if(j.left!==0){if(l<=j.right){i.css({left:k})}}}});break}switch(g.direction){case"up":e.find(".menu-container > li").find(".submenu:eq(0)").each(function(){var h=a(this);h.css({top:-(h.height())})});e.find("ul.menu-container ul li.has-sub-menu").on({mouseenter:function(){var h=a(this),i=h.children(".submenu");i.css({top:-(i.height()-h.outerHeight())})}});break;case"right":e.find(".menu-container li.has-sub-menu").on({mouseenter:function(){var h=a(this),i=h.children(".submenu"),j=h.outerWidth(),l=i.outerWidth(),k=(j<l)?j+(l-j):j;i.css({left:-1*k})},mouseleave:function(){var h=a(this),i=h.children(".submenu");i.css({left:-1000000})}});break;case"left":e.find(".menu-container li").on({mouseenter:function(){var h=a(this),i=h.children(".submenu");i.css({left:(i.outerWidth())})},mouseleave:function(){var h=a(this),i=h.children(".submenu");i.css({left:-1000000})}});break}a(window).resize(function(){e.find("ul.menu-container ul li.has-sub-menu").each(function(){var h=a(this),i=h.children(".submenu");i.attr("style","")})});e.find("li.has-sub-menu > a").on({touchstart:function(j){var i=a(this),h=i.closest(".nav-menu").find(".level-1 > a");if(!i.data("clicked")){j.preventDefault()}h.data("clicked",false);i.data("clicked",true)}})})}a.error("Method "+c+" does not exist on jQuery.menu")}}(jQuery));(function(a){var b={version:function(){return"Horizontal Menu : Version 1.0"},log:function(c){if(window.console){window.console.debug(c)}}};a.fn.equals=function(c){var d;if(!c||this.length!=c.length){return false}for(d=0;d<this.length;++d){if(this[d]!==c[d]){return false}}return true};a.fn.horizontalmenu=function(c){if(b[c]){return b[c].apply(this,Array.prototype.slice.call(arguments,1))}if(typeof c==="object"||!c){return this.each(function(f){var g={menu:"",init:function(l){if(l===undefined){l={}}var k,m=a.extend({},l),h=a(this),j=(h.attr("class")!==undefined)?h.attr("class").split(" "):"";m.show=false;for(k=0;k<j.length;k++){if(j[k].indexOf("menu-action")!==-1){m.action=j[k].split("-")[2]}if(j[k].indexOf("menu-animate")!==-1){m.animate=(j[k].split("-")[2]==="true")?true:false}if(j[k].indexOf("menu-always-show")!==-1){m.show=true}}h.data("options",m);return h},open:function(h,i){if(i){h.fadeIn(250)}else{h.css({display:"block",opacity:"1"})}},close:function(h,i){if(i){h.fadeOut(50)}else{h.css({display:"none",opacity:"0"})}},openCurrent:function(h){var i=h.find("li.active .submenu.level2");if(g.options.show){if(i.length>0){i.css({left:"0%",opacity:"1"});g.open(i,g.options.animate);h.css({"margin-bottom":i.outerHeight()+20})}}},killAll:function(i,l){var j=i.closest(".menu-type-horizontal-flat"),h=j.find(".submenu"),k=i.siblings().find(".submenu");k.each(function(){g.close(a(this),g.options.animate,true)});if(l){h.each(function(){g.close(a(this),g.options.animate,true)})}}},e,d;g.menu=g.init.apply(this,arguments);g.options=g.menu.data("options");e=g.menu.width();g.menu.find("li.l1-item > .submenu").width(e);d=g.menu.find("li");d.on({mouseenter:function(){var h=a(this),i=h.children(".submenu");g.killAll(h);if(i.length>0&&g.options.action=="hover"){g.open(i,g.options.animate)}}});if(g.options.action=="click"){d.find("a").on("click",function(j){var h=a(this),i=h.next(".submenu");g.killAll(h.parent());if(i.length>0&&!i.is(":visible")){j.preventDefault();if(i.hasClass("level2")||i.parent("li").hasClass("l2-item")){i.css({left:"0%"})}else{i.css({left:"100%"})}g.open(i,g.options.animate)}})}g.openCurrent(g.menu);g.menu.on({mouseleave:function(){g.killAll(a(this).find("li.has-sub-menu"),true);g.openCurrent(a(this))}})})}a.error("Method "+c+" does not exist on jQuery.horizontalmenu")}}(jQuery));(function(a){var b={version:function(){return"Mega Menu : Version 1.0"},log:function(c){if(window.console){window.console.debug(c)}}};a.fn.equals=function(c){var d;if(!c||this.length!=c.length){return false}for(d=0;d<this.length;++d){if(this[d]!==c[d]){return false}}return true};a.fn.megamenu=function(c){if(b[c]){return b[c].apply(this,Array.prototype.slice.call(arguments,1))}if(typeof c==="object"||!c){return this.each(function(e){var f={menu:"",init:function(k){if(k===undefined){k={}}var j,l=a.extend({},k),g=a(this),h=(g.attr("class")!==undefined)?g.attr("class").split(" "):"";l.show=false;for(j=0;j<h.length;j++){if(h[j].indexOf("menu-action")!==-1){l.action=h[j].split("-")[2]}if(h[j].indexOf("menu-animate")!==-1){l.animate=(h[j].split("-")[2]==="true")?true:false}}g.data("options",l);return g},open:function(g,h){if(h){g.fadeIn(250)}else{g.css({display:"block",opacity:"1"})}},close:function(g,h){if(h){g.fadeOut(50)}else{g.css({display:"none",opacity:"0"})}},openCurrent:function(g){var h=g.find("li.active .mega-menu-panel");if(f.options.show){if(h.length>0){h.css({left:"0%",opacity:"1"});f.open(h,f.options.animate);g.css({"margin-bottom":h.outerHeight()+20})}}},killAll:function(h,k){var i=h.closest(".menu-type-mega"),g=i.find(".mega-menu-panel"),j=h.siblings().find(".mega-menu-panel");j.each(function(){f.close(a(this),f.options.animate,true)});if(k){g.each(function(){f.close(a(this),f.options.animate,true)})}}},d;f.menu=f.init.apply(this,arguments);f.options=f.menu.data("options");d=f.menu.find("li");d.on({mouseenter:function(){var g=a(this),h=g.children(".mega-menu-panel");f.killAll(g);if(h.length>0&&f.options.action=="hover"){f.open(h,f.options.animate)}}});if(f.options.action=="click"){d.find("a").on("click",function(i){var g=a(this),h=g.next(".mega-menu-panel");f.killAll(g.parent());if(h.length>0&&!h.is(":visible")){i.preventDefault();if(h.hasClass("level2")||h.parent("li").hasClass("l2-item")){h.css({left:"0%"})}else{h.css({left:"100%"})}f.open(h,f.options.animate)}})}f.openCurrent(f.menu);f.menu.on({mouseleave:function(g){if(g.target.tagName.toLowerCase()!=="select"){f.killAll(a(this).find("li"),true)}}})})}a.error("Method "+c+" does not exist on jQuery.megamenu")}}(jQuery));(function(a){var b={init:function(f){if(f===undefined){f={}}var e,g=a.extend({animate:true},f),c=a(this),d=c.attr("class").split(" ");for(e=0;e<d.length;e++){if(d[e].indexOf("menu-animate")!==-1){g.animate=(d[e].split("-")[2]==="true")?true:false}}g.openToggle=c.attr("toggle_open");g.closeToggle=c.attr("toggle_close");g.defExpAll=(c.attr("def_exp_all").toLowerCase()==="true")?true:false;c.data("options",g);b.$menu=c},toggle:function(c,d){c.each(function(){var f=a(this),e=f.closest("li").children("ul"),g=f.closest("nav").data("options");switch(d){case"open":if(g.animate){e.slideDown()}else{e.show()}f.html(g.openToggle).removeClass("closed").addClass("open");b.$menu.data("state","open");break;case"close":if(g.animate){e.slideUp()}else{e.hide()}f.html(g.closeToggle).removeClass("open").addClass("closed");b.$menu.data("state","closed");break}})},version:function(){return"onMessage Sitemap: Version 1.0"},log:function(c){if(window.console){window.console.debug(c)}}};a.fn.sitemap=function(c){if(b[c]){return b[c].apply(this,Array.prototype.slice.call(arguments,1))}if(typeof c==="object"||!c){return this.each(function(f){b.init.apply(this,arguments);var d=a(this),e;d.data("state","open");e=d.find("ul:eq(0) li").children(".single-toggle");e.on("click",function(i){i.preventDefault();var h=a(this),g=h.closest("li").children("ul");if(g.is(":visible")){b.toggle(h,"close")}else{b.toggle(h,"open")}});d.find(".toggle:eq(0)").on("click",function(g){g.preventDefault();if(d.data("state")==="open"){b.toggle(e,"close")}else{b.toggle(e,"open")}});e.each(function(h){var g=a(this);if(d.data("options").defExpAll){b.toggle(g,"open")}else{b.toggle(g,"close")}})})}a.error("Method "+c+" does not exist on jQuery.sitemap")}}(jQuery));(function(a,e){var c=e.head,b=a("body"),d;a.DLMenu=function(g,f){this.$el=a(f);this._init(g)};a.DLMenu.defaults={animationClasses:{classin:"dl-animate-in-1",classout:"dl-animate-out-1"},onLevelClick:function(){return false},onLinkClick:function(){return false}};a.DLMenu.prototype={_init:function(g){this.options=a.extend(true,{},a.DLMenu.defaults,g);this._config();if(c!=="undefined"){var f={chrome:"webkitAnimationEnd",safari:"webkitAnimationEnd",ios:"webkitAnimationEnd",android:"webkitAnimationEnd",OAnimation:"oAnimationEnd",ie:"MSAnimationEnd",ff:"animationend",animation:"animationend"},h={chrome:"webkitTransitionEnd",safari:"webkitTransitionEnd",ios:"webkitTransitionEnd",android:"webkitTransitionEnd",ff:"transitionend",OTransition:"oTransitionEnd",ie:"MSTransitionEnd",transition:"transitionend"};this.animEndEventName=f[c.browser.name]+".dlmenu";this.transEndEventName=h[c.browser.name]+".dlmenu";this.supportAnimations=c.csstransitions;this.supportTransitions=c.csstransitions}this._initEvents()},_config:function(){this.open=false;this.$trigger=this.$el.find(".dl-trigger");this.$menu=this.$el.find("ul.dl-menu");this.$menuitems=this.$menu.find("li:not(.dl-back,.mm-parent-item)");var f=this.$el.find("ul.dl-submenu");f.each(function(){var i=a(this),g=i.prev("a").clone(),h;g.find("span").remove();h=a('<li class="mm-parent-item mm-item"></li>').append(g);i.prepend(h)});f.prepend('<li class="dl-back mm-item"><a href="#" class="mm-back"><span class="mm-back-sub-ind">arrow</span>Back</a></li>');this.$back=this.$menu.find("li.dl-back");this.$rents=this.$menu.find("li.mm-parent-item")},_initEvents:function(){var f=this;this.$trigger.on("click.dlmenu",function(){if(f.open){f._closeMenu()}else{f._openMenu()}return false});this.$menuitems.on("click.dlmenu",function(j){j.stopPropagation();var h=a(this),i=h.children("ul.dl-submenu"),g,k;if(i.length>0){g=i.clone().css("opacity",0).insertAfter(f.$menu);k=function(){f.$menu.off(f.animEndEventName).removeClass(f.options.animationClasses.classout).addClass("dl-subview");h.addClass("dl-subviewopen").parents(".dl-subviewopen:first").removeClass("dl-subviewopen").addClass("dl-subview");g.remove()};setTimeout(function(){g.addClass(f.options.animationClasses.classin);f.$menu.addClass(f.options.animationClasses.classout);if(f.supportAnimations){k.call()}a("body").scrollTop(0);f.options.onLevelClick(h,h.children("a:first").text())});return false}f.options.onLinkClick(h,j)});this.$back.on("click.dlmenu",function(){var j=a(this),i=j.parents("ul.dl-submenu:first"),h=i.parent(),k,g=i.clone().insertAfter(f.$menu);k=function(){f.$menu.off(f.animEndEventName).removeClass(f.options.animationClasses.classin);g.remove()};setTimeout(function(){g.addClass(f.options.animationClasses.classout);f.$menu.addClass(f.options.animationClasses.classin);if(f.supportAnimations){k.call()}h.removeClass("dl-subviewopen");var l=j.parents(".dl-subview:first");if(l.is("li")){l.addClass("dl-subviewopen")}l.removeClass("dl-subview")});return false});this.$rents.on("click.dlmenu",function(h){h.stopPropagation();var g=a(this);f.options.onLinkClick(g,h)})},closeMenu:function(){if(this.open){this._closeMenu()}},_closeMenu:function(){var g=this,f=function(){g.$menu.off(g.transEndEventName);g._resetMenu()};this.$menu.removeClass("dl-menuopen");this.$menu.addClass("dl-menu-toggle");this.$trigger.removeClass("dl-active");if(this.supportTransitions){this.$menu.on(this.transEndEventName,f)}else{f.call()}this.open=false},openMenu:function(){if(!this.open){this._openMenu()}},_openMenu:function(){var f=this;b.off("click").on("click.dlmenu",function(){f._closeMenu()});this.$menu.addClass("dl-menuopen dl-menu-toggle").on(this.transEndEventName,function(){a(this).removeClass("dl-menu-toggle")});this.$trigger.addClass("dl-active");this.open=true},_resetMenu:function(){this.$menu.removeClass("dl-subview");this.$menuitems.removeClass("dl-subview dl-subviewopen")}};d=function(f){if(e.console){e.console.error(f)}};a.fn.dlmenu=function(g){if(typeof g==="string"){var f=Array.prototype.slice.call(arguments,1);this.each(function(){var h=a.data(this,"dlmenu");if(!h){d("cannot call methods on dlmenu prior to initialization; attempted to call method '"+g+"'");return}if(!a.isFunction(h[g])||g.charAt(0)==="_"){d("no such method '"+g+"' for dlmenu instance");return}h[g].apply(h,f)})}else{this.each(function(){var h=a.data(this,"dlmenu");if(h){h._init()}else{h=a.data(this,"dlmenu",new a.DLMenu(g,this))}})}return this}}(jQuery,window));(function(a){var b={init:function(){var d=a(this),c=d.find("form");c.on("submit",function(){if(!b.validate(c)){d.find(".field-error-message").show();c.find(".field-error INPUT:eq(0)").focus();return false}d.find(".field-error-message").hide();c.find(".field-error").removeClass("field-error")})},version:function(){return"onMessage Forms: Version 1.0"},log:function(c){if(window.console){window.console.debug(c)}},validate:function(c){var d=c.find(".required"),e=true;d.each(function(){var f=a(this);if(f.find("input").val().length===0){f.addClass("field-error");e=false}});return e}};a.fn.forms=function(c){if(b[c]){return b[c].apply(this,Array.prototype.slice.call(arguments,1))}if(typeof c==="object"||!c){return this.each(function(d){this.method=d;b.init.apply(this,arguments)})}a.error("Method "+c+" does not exist on jQuery.forms")}}(jQuery));(function(a){var b={init:function(d){if(d===undefined){d={}}var c=a(this);b.$newsarchivedatepicker=c},has_styler_class:function(){var d,c=(a("html").attr("class")!==undefined)?a("html").attr("class").split(" "):"";for(d=0;d<c.length;d++){if(c[d].indexOf("styler")!==-1){return true}}return false}};a.fn.newsarchivedatepicker=function(c){if(b[c]){return b[c].apply(this,Array.prototype.slice.call(arguments,1))}if(typeof c==="object"||!c){return this.each(function(e){b.init.apply(this,arguments);var d=a(this);d.find(".year-number").on("click",function(h){h.stopPropagation();h.preventDefault();var g=a(this),i,f;if(b.has_styler_class()==false){i=g.data("year");f=g.closest("form.datepicker-control");f.find("#YearNumber").val(i);f.submit()}});d.find(".month-number").on("click",function(h){h.stopPropagation();h.preventDefault();var g=a(this),i,f;if(b.has_styler_class()==false){i=g.val();f=g.closest("form.datepicker-control");f.find("#MonthNumber").val(i);f.submit()}})})}a.error("Method "+c+" does not exist")}}(jQuery));(function(a){var b={init:function(d){if(d===undefined){d={}}var c=a(this);b.$newsarchivefilter=c},has_styler_class:function(){var d,c=(a("html").attr("class")!==undefined)?a("html").attr("class").split(" "):"";for(d=0;d<c.length;d++){if(c[d].indexOf("styler")!==-1){return true}}return false}};a.fn.newsarchivefilter=function(c){if(b[c]){return b[c].apply(this,Array.prototype.slice.call(arguments,1))}if(typeof c==="object"||!c){return this.each(function(e){b.init.apply(this,arguments);var d=a(this);d.find("a.select-all.button").on("click",function(f){f.stopPropagation();f.preventDefault();if(b.has_styler_class()==false){a(".newsarchivefilter .filter-item input[type=checkbox]").prop("checked",true)}});d.find("a.clear-all.button").on("click",function(f){f.stopPropagation();f.preventDefault();if(b.has_styler_class()==false){a(".newsarchivefilter .filter-item input[type=checkbox]").prop("checked",false)}});d.find("a.refresh.button").on("click",function(f){f.stopPropagation();f.preventDefault();if(b.has_styler_class()==false){a(".refresh.button").closest(".newsarchive-filter-form").submit()}})})}a.error("Method "+c+" does not exist")}}(jQuery));(function(a){var b={init:function(f){if(f===undefined){f={}}var e,g=a.extend({gallery:false},f),c=a(this),d=(c.attr("class")!==undefined)?c.attr("class").split(" "):"";for(e=0;e<d.length;e++){if(d[e].indexOf("use-gallery")!==-1){g.gallery=true}}c.data("options",g);b.$obj=c},state:"off",get_current_viewport:function(){var d=b.get_viewports(),e=a(window).width(),c=d.desktop;if(e>d.large_desktop){c=d.large_desktop}else{if(e<d.portrait&&e>d.mobile){c=d.portrait}else{if(e<=d.mobile){c=d.mobile}}}return c},get_viewports:function(){return{mobile:767,portrait:979,desktop:0,large_desktop:1200}},flexdestroy:function(e){var c=a(e),d=c.clone();d.find(".flex-viewport").children().unwrap();d.removeClass("flexslider").find(".clone, .flex-direction-nav, .flex-control-nav").remove().end().find("*").removeAttr("style").removeClass(function(g,f){return(f.match(/\bflex\S+/g)||[]).join(" ")});d.insertBefore(c);c.remove();b.state="off"},version:function(){return"onMessage Photo List Manager: Version 1.0"},log:function(c){if(window.console){window.console.debug(c)}}};a.fn.photolist_manager=function(c){if(b[c]){return b[c].apply(this,Array.prototype.slice.call(arguments,1))}if(typeof c==="object"||!c){return this.each(function(e){b.init.apply(this,arguments);var d=a(this),f=d.data("options");if(d.find("li").length>1&&f.gallery){setInterval(function(){var g=b.get_current_viewport(),h=b.get_viewports();if(g===h.mobile||g===h.portrait){if(b.state==="off"){a(".mobile-slider").addClass("flexslider").flexslider({animation:"slide",animationLoop:true,slideshow:false,useCSS:true,touch:true,controlNav:true,directionNav:true,itemWidth:g,itemMargin:0,minItems:1,maxItems:1});b.state="on"}}else{if(b.state==="on"){b.flexdestroy(".mobile-slider")}}},50)}})}a.error("Method "+c+" does not exist on jQuery.photolist_manager")}}(jQuery));(function(a){var b={init:function(d){if(d===undefined){d={}}var c=a(this);b.$poll=c},has_styler_class:function(){var d,c=(a("html").attr("class")!==undefined)?a("html").attr("class").split(" "):"";for(d=0;d<c.length;d++){if(c[d].indexOf("styler")!==-1){return true}}return false},show_questions:function(c,d){a(".questions#poll-ques-"+d).removeClass("hide");a(".questions#poll-ques-"+d).addClass("show");a(".results#poll-res-"+d).removeClass("show");a(".results#poll-res-"+d).addClass("hide")},submit_vote:function(c,d){var e=a(".questions#poll-ques-"+d+" ul li input[type='radio']:checked").val();if(e!=undefined){a(".questions#poll-ques-"+d+" form").submit()}else{alert("Please indicate your selection")}},show_results:function(c,d){a(".questions#poll-ques-"+d).removeClass("show");a(".questions#poll-ques-"+d).addClass("hide");a(".results#poll-res-"+d).removeClass("hide");a(".results#poll-res-"+d).addClass("show")}};a.fn.poll=function(c){if(b[c]){return b[c].apply(this,Array.prototype.slice.call(arguments,1))}if(typeof c==="object"||!c){return this.each(function(e){b.init.apply(this,arguments);var d=a(this);d.find(".show-questions-button").on("click",function(g){g.stopPropagation();g.preventDefault();var f=a(this),h;if(b.has_styler_class()==false){h=f.parents("li.results").data("poll");b.show_questions(f,h)}});d.find(".submit-vote-button").on("click",function(g){g.stopPropagation();g.preventDefault();var f=a(this),h;if(b.has_styler_class()==false){h=f.parents("li.questions").data("poll");b.submit_vote(f,h)}});d.find(".show-results-button").on("click",function(g){g.stopPropagation();g.preventDefault();var f=a(this),h;if(b.has_styler_class()==false){h=f.parents("li.questions").data("poll");b.show_results(f,h)}})})}a.error("Method "+c+" does not exist")}}(jQuery));(function(a){var b={init:function(d){if(d===undefined){d={}}var e=a.extend({},d),c=a(this);c.data("options",e)},version:function(){return"onMessage Search: Version 1.0"},log:function(c){if(window.console){window.console.debug(c)}}};a.fn.pageSearch=function(c){if(b[c]){return b[c].apply(this,Array.prototype.slice.call(arguments,1))}if(typeof c==="object"||!c){return this.each(function(e){b.init.apply(this,arguments);var d=a(this),f=function(i){i.preventDefault();var g=a(this),h=g.find(".search-box"),j=h.val();j=j.replace(/[`()|;:",<>]/gi," ").trim();h.val(j);g.off("submit",f);g.submit()};d.closest(".searchresults-control").on("submit",f);d.closest(".search-container").on("submit",f)})}a.error("Method "+c+" does not exist on jQuery.pageSearch")}}(jQuery));(function(a){var b={init:function(d){if(d===undefined){d={}}var c=a(this);b.$storeproducts=c},has_styler_class:function(){var d,c=(a("html").attr("class")!==undefined)?a("html").attr("class").split(" "):"";for(d=0;d<c.length;d++){if(c[d].indexOf("styler")!==-1){return true}}return false}};a.fn.storeproducts=function(c){if(b[c]){return b[c].apply(this,Array.prototype.slice.call(arguments,1))}if(typeof c==="object"||!c){return this.each(function(e){b.init.apply(this,arguments);var d=a(this);d.find(".item-image").on("click",function(g){g.stopPropagation();g.preventDefault();if(b.has_styler_class()==false){var f=a(this),j=f.data("zoom"),i=f.data("height")||360,k=f.data("width")||600,h='<div id="pageengine-modal" class="flush tall" ><a class="simplemodal-close modalCloseImg"></a><img src="'+j+'"></div>';a.modal(h,{containerCss:{height:i,width:k}})}});d.find("li.page-number").on("click",function(h){h.stopPropagation();h.preventDefault();var f=a(this),i=f.attr("data-page"),g=a("#PgNbr");g.val(i);g.parents("form").submit()});d.find("A.add-to-cart").on("click",function(g){g.stopPropagation();g.preventDefault();var f=a(this),h=f.data("id"),i=onMessage.App.module("store");i.Utilities.addToCart(h);return false})})}a.error("Method "+c+" does not exist")}}(jQuery));(function(a){var b={init:function(d){if(d===undefined){d={}}var e=a.extend({},d),c=a(this);c.data("options",e);c.data("current-question",a(".question:visible").data("id"));c.data("phase-two",false)},version:function(){return"onMessage Trivia : Version 1.0"},log:function(c){if(window.console){window.console.debug(c)}}};a.fn.trivia=function(c){if(a("html").hasClass("styler")){return}if(b[c]){return b[c].apply(this,Array.prototype.slice.call(arguments,1))}if(typeof c==="object"||!c){return this.each(function(e){b.init.apply(this,arguments);var d=a(this);d.find(".next").on("click",function(i){i.preventDefault();var g=a(".question[data-id="+d.data("current-question")+"]"),f=a(this),h;if(d.data("phase-two")){g.fadeOut(500,function(){g.find(".part-one").show();g.find(".part-two").hide();g.find("input").prop("checked",false);var j=g.next();if(j.length===0){j=d.find(".question").eq(0)}j.fadeIn();d.data("current-question",j.data("id"));if(j.hasClass("end")){f.html("Go to beginning");return false}d.data("phase-two",false);f.html("submit")})}else{h=g.find("input:checked").closest(".answer-container");if(h.length===0){d.find(".trivia-error").show();return false}d.find(".trivia-error").hide();g.find(".part-one").fadeOut(500,function(){h.find(".part-two").fadeIn();d.data("phase-two",true);f.html("Next Question")})}return false})})}a.error("Method "+c+" does not exist on jQuery.trivia")}}(jQuery));Backbone.View=(function(a){return a.extend({constructor:function(b){this.options=b||{};a.apply(this,arguments)}})}(Backbone.View));Backbone.Collection=(function(a){var b=function(d,e){var c=e.error;e.error=function(f){if(c){c(d,f,e)}d.trigger("error",d,f,e)}};return a.extend({fetch:function(d){d=d?_.clone(d):{};if(d.parse===undefined){d.parse=true}var e=d.success,c=this;d.success=function(g){var f=d.update?"set":"reset";c[f](g,d);if(e){e(c,g,d)}c.trigger("sync",c,g,d)};b(this,d);return this.sync("read",this,d)},update:function(c,d){return this.set(c,d)}})}(Backbone.Collection));var MQMap;(function(c){c.App=c.App||{};var a=c.App;a._modules={};a.Config={TemplatePath:"/page/pagesrc/",ApiPath:"/api/"};a.init=function(d){a.createRoutes();a.createHelpers();a.Utilities.logPageView();a.Utilities.checkFromHash();a.Config.ApiPath=c.settings.AppDomain+"/api/"};a.createRoutes=function(){var d=Backbone.Router.extend({});a.Router=new d();a.Router.route("*path","home",function(e){a.Utilities.closeModal()});a.Router.route("photo/:id","photo",function(e){var f=a.module("media");f.Utilities.displayPhotoAlbum(e)});a.Router.route("audio/:id","audio",function(e){var f=a.module("media");f.Utilities.displayAudioAlbum(e)});a.Router.route("video/:id","video",function(e){var f=a.module("media");f.Utilities.displayVideoAlbum(e)});a.Router.route("giving/:id","giving",function(f){var e=a.module("forms");e.Utilities.displayGivingForm(f)});a.Router.route("inquiry/:id","inquiry",function(f){var e=a.module("forms");e.Utilities.displayInquiryForm(f)});a.Router.route("register/:id","register",function(f){var e=a.module("forms");e.Utilities.displayRegForm(f,c)});a.Router.route("store/cart","storeCart",function(){var e=a.module("store");e.Utilities.displayCart()});a.Router.route(/^store\/checkout(r[0|1])?$/,"storeCheckout",function(){var e=a.module("store");e.Utilities.displayCheckout(c)});Backbone.history.start()};a.createHelpers=function(){Handlebars.registerHelper("comparator",function(d,e,h,g){var f={"==":function(i,j){return i===j},"===":function(i,j){return i===j},"!=":function(i,j){return i!==j},"!==":function(i,j){return i!==j},"<":function(i,j){return i<j},">":function(i,j){return i>j},"<=":function(i,j){return i<=j},">=":function(i,j){return i>=j},"typeof":function(i,k){var j=typeof i;return(j===k)}};if(arguments.length<4){throw new Error("Handlerbars Helper 'comparator' needs 3 parameters")}if(!f[e]){throw new Error("Handlerbars Helper 'comparator' doesn't know the operator "+e)}return(f[e](d,h))?g.fn(this):g.inverse(this)});Handlebars.registerHelper("currency",function(d){return d?a.Utilities.formatCurrency(d):""});Handlebars.registerHelper("totalPrice",function(e,d){return a.Utilities.formatCurrency(e*d)})};a.module=(function(){return function(d){if(a._modules[d]){return a._modules[d]}a._modules[d]=_.extend({Models:{},Collections:{},Views:{},Utilities:{}},Backbone.Events);return a._modules[d]}}());a.Tools={leadingZero:function(d){return d<10?"0"+d:d},parseDate:function(d){var e;if(_.isString(d)&&d.substring(0,1)==="/"){e=new Date(parseInt(d.substr(6),10))}else{e=new Date(d)}return e},shortDateDisplayNoTime:function(d){var e;d=this.parseDate(d);e=d.getMonth()+1+"/"+d.getDate()+"/"+d.getFullYear();return e},timeDisplay:function(e){var d,f,g;e=this.parseDate(e);d=e.getHours();if(d>12){d=d-12;g="PM"}else{if(d===12){g="PM"}else{if(d===0){d=12;g="AM"}else{g="AM"}}}f=this.leadingZero(e.getMinutes());return d+":"+f+" "+g}};a.Utilities={openIframeModal:function(e,d){d=d||{};d.Url=e;a.Utilities.showModal(d)},renderModalView:function(e,d){d=d||{};d.View=e;a.Utilities.showModal(d)},showModal:function(f){f=f||{};f.ContainerId=f.ContainerId||"pageengine-modal";var e=$("#modal_container"),d;if(e.length===0){e=$('<div id="modal_container">');if($("html").hasClass("touch")){e.css({overflow:"auto","-webkit-overflow-scrolling":"touch"})}}e.removeClass();$("#"+f.ContainerId).css({height:"",top:""});c.pluginManager.load(c.pluginManager.plugins.SimpleModal,function(){var h,g;e.modal({containerId:f.ContainerId,zIndex:10000});if(f.View){f.View.render(e)}else{if(f.Url){f.attributes=f.attributes||"";g=$('<iframe class="engine-iframe" src="about:blank" width="100%" height="100%" frameborder="0" '+f.attributes+">");e.html("").append(g);g.on("load",function(){try{if(f.Flush){var i=g.contents().find("BODY");i.css({overflow:"hidden"})}}catch(j){}});g.attr("src",f.Url)}}d=$("#"+f.ContainerId);if(f.Bootstrap){d.addClass("bootstrap")}else{d.removeClass("bootstrap")}if(f.Tall){d.addClass("tall")}else{d.removeClass("Tall")}if(f.Flush){d.addClass("flush")}else{d.removeClass("Flush")}if(f.Lightbox){$(".simplemodal-wrap").addClass("lightbox")}$.modal.setContainerDimensions();$.modal.setPosition();$(document).unbind().on("keyup",function(i){if(i.keyCode===27){a.Utilities.clearHash();clearInterval(h)}});$(".simplemodal-close").click(function(i){i.preventDefault();a.Utilities.clearHash();clearInterval(h);return false});h=setInterval(function(){try{$.modal.setPosition()}catch(i){}},250)})},renderView:function(e,d){e.render(d)},closeModal:function(){try{if($.modal){$.modal.close()}}catch(d){}},cancelRegistration:function(){window.location.reload()},clearHash:function(){localStorage.ScrollPosition=$(window).scrollTop();a.Router.navigate("",true);if(localStorage){var d=localStorage.ScrollPosition;if(d){$(window).scrollTop(d);localStorage.removeItem("ScrollPosition")}}},loadData:function(f,d,e){return $.ajax({url:a.Config.ApiPath+f,dataType:"json",success:function(g){d(g)}})},fetchTemplate:function(f,d,e){if(Handlebars.templates&&Handlebars.templates[f]){return d(Handlebars.templates[f])}return $.ajax({url:a.Config.TemplatePath+f,cache:false,dataType:"html",success:function(h){var g;h=h.replace(/(\r\n|\n|\r|\t)/gm,"");g=Handlebars.compile(h);if(!Handlebars.templates){Handlebars.templates={}}Handlebars.templates[f]=g;d(g)}})},formatCurrency:function(d){return"$"+d.toFixed(2)},getQueryString:function(d,h){var e=h||window.location.href,f=new RegExp("[?&]"+d+"=([^&#]*)","i"),g=f.exec(e);return g?g[1]:null},urlParse:function(e){var d=$("<a>",{href:e})[0];return{host:d.hostname,path:d.pathname,query:d.search,hash:d.hash}},ensureSsl:function(){if(c.settings.SslInd){var d=document.location.toString(),e,h,g,f=a.Utilities.urlParse(c.settings.SslUrl);if(d.indexOf(f.host)===-1){if(c.settings.SslUrl){h=c.settings.SslUrl;if(h.indexOf("ssl=1")===-1){g=(h.indexOf("?")>-1?"&":"?")+"ssl=1";if((h.indexOf("#")>-1)){h=h.replace("#",g+"#")}else{h+=g}}e=h+((h.indexOf("#")>-1)?"":document.location.hash);location.replace(e);return false}}}return true},logPageView:function(){try{if(!c.settings.PageTaskId||c.settings.PageTaskId<=0||!c.settings.PageName){return}var h=$("#__AjaxAntiForgery").children().val(),d=new XMLHttpRequest(),i=c.settings.AppDomain+"/api/page/logview",g={TaskId:c.settings.PageTaskId,TaskName:c.settings.PageName,SiteId:c.settings.SiteId,Url:window.location.href},f=JSON.stringify(g);d.open("PUT",i,true);d.setRequestHeader("Content-type","application/json");if(h){d.setRequestHeader("RequestVerificationToken",h)}d.send(f)}catch(e){}},logAlbumView:function(e){try{if(!c.settings.PageTaskId||c.settings.PageTaskId<=0||!c.settings.PageName){return}var d=new XMLHttpRequest(),g=c.settings.AppDomain+"/api/page/logalbumview/"+e;d.open("GET",g,true);d.send()}catch(f){}},checkFromHash:function(){var e=a.Utilities.getQueryString("fromHash"),d=Backbone.history.fragment;if(e){e=e.replace("%2f","/")}if(e&&(e!==d)){a.Router.navigate(e,true)}}};function b(){var e=$("#__AjaxAntiForgery").children().val(),d;if(e){d=Backbone.sync;Backbone.sync=function(f,g,h){if(f!=="fetch"&&f!=="read"){h.beforeSend=function(i){i.setRequestHeader("RequestVerificationToken",e)}}return d(f,g,h)};$.ajaxSetup({beforeSend:function(g,f){if((!/^(GET|HEAD|OPTIONS|TRACE)$/i.test(f.type))&&f.url&&f.url.indexOf("/api/")>0){g.setRequestHeader("RequestVerificationToken",e)}}})}}b()}(onMessage));(function(a){a.Captcha={Settings:{ScriptLoaded:false,SiteKey:"6LcYjggTAAAAAFZixPQotuvtEmFn-MSObAelDNa8",ContainerId:"g_recaptcha",ErrorContainerId:"g_recaptcha_error",WidgetId:null,RenderOptions:{}},GetContainer:function(){return'<div id="'+a.Captcha.Settings.ContainerId+'"></div><div class="alert alert-danger" id="'+a.Captcha.Settings.ErrorContainerId+'">Please complete the Captcha test.</div>'},Initialize:function(b){a.Captcha.Dispose();b=b||{};if(!b.sitekey){b.sitekey=a.Captcha.Settings.SiteKey}a.Captcha.Settings.RenderOptions=b;if(a.Captcha.Settings.ScriptLoaded){a.Captcha.Render();return true}var c=document.createElement("script");c.src="https://www.google.com/recaptcha/api.js?onload=reCaptchaCallback&render=explicit";c.async=true;c.defer=true;document.head.appendChild(c);a.Captcha.Settings.ScriptLoaded=true;return true},Dispose:function(){a.Captcha.Settings.RenderOptions={};a.Captcha.Settings.WidgetId=null;$("#"+a.Captcha.Settings.ContainerId).empty();a.Captcha.HideError()},Render:function(){if(a.Captcha.Settings.WidgetId!==null){grecaptcha.reset(a.Captcha.Settings.WidgetId)}else{a.Captcha.Settings.WidgetId=grecaptcha.render(a.Captcha.Settings.ContainerId,a.Captcha.Settings.RenderOptions)}},GetResponse:function(){return grecaptcha.getResponse(a.Captcha.Settings.WidgetId)},DisplayError:function(){$("#"+a.Captcha.Settings.ErrorContainerId).show()},HideError:function(){$("#"+a.Captcha.Settings.ErrorContainerId).hide()}}}(onMessage.App.Utilities));var reCaptchaCallback=function(){onMessage.App.Utilities.Captcha.Render()};(function(a,b){b.Utilities.displayPhotoAlbum=function(d){var c={Id:0,ContentTypeId:31,Style:{Id:0,StyleTypeId:3,StyleModeId:1,ContentTypeId:31,Options:{Header:{Visible:false},Title:{Visible:true},Caption:{Visible:true},LongDescription:{Visible:true},Description:{Visible:true},Details:{Visible:true,Location:"inside",Position:"bottom",Shows:"hover"},Counter:{Visible:true,Alignment:"left",Position:"top"},Pager:{Visible:false,Type:"shapes",Alignment:"center",Position:"bottom",Location:"outside"},Arrows:{Visible:true}}}};a.Utilities.openIframeModal("/page/tmpl?albumid="+d+"&ismodal=true&block="+encodeURI(JSON.stringify(c)),{Flush:true});a.Utilities.logAlbumView(d)};b.Utilities.displayAudioAlbum=function(d){var c={Id:0,ContentTypeId:165,Style:{Id:0,StyleTypeId:1,StyleModeId:1,ContentTypeId:165,Options:{Header:{Visible:false},Title:{Visible:true},Caption:{Visible:true},LongDescription:{Visible:true},AlbumSelect:{Visible:true},AlbumName:{Visible:true}}}};a.Utilities.openIframeModal("/page/tmpl?albumid="+d+"&ismodal=true&block="+encodeURI(JSON.stringify(c)));a.Utilities.logAlbumView(d)};b.Utilities.displayVideoAlbum=function(d){var c={Id:0,ContentTypeId:167,Style:{Id:0,StyleTypeId:3,StyleModeId:1,ContentTypeId:167,Options:{Header:{Visible:false},Title:{Visible:true},Caption:{Visible:true},LongDescription:{Visible:true},Description:{Visible:true},Details:{Visible:false,Location:"inside",Position:"bottom",Shows:"hover"},Counter:{Visible:true,Alignment:"left",Position:"top"},Pager:{Visible:false,Type:"shapes",Alignment:"center",Position:"bottom",Location:"outside"},Arrows:{Visible:true}}}};a.Utilities.openIframeModal("/page/tmpl?albumid="+d+"&ismodal=true&block="+encodeURI(JSON.stringify(c)),{Flush:true,attributes:"allowfullscreen webkitallowfullscreen mozallowfullscreen"});a.Utilities.logAlbumView(d)}}(onMessage.App,onMessage.App.module("media")));(function(a,b){b.Utilities.displayGivingForm=function(f){if(a.Utilities.ensureSsl()){var d="",e=null,g=f,c=null;if(f.indexOf("r")>0){c=f.split("r");if(c.length>1){g=c[0];e=c[1]}}if(e!==undefined&&e!==null){d="&r="+e}a.Utilities.openIframeModal("/podium/default.aspx?t=1706&pe=1&pem=1&co=1&wapp=1&pk="+g+d+"&invuri="+encodeURIComponent(window.location.href),{Tall:true})}};b.Utilities.displayInquiryForm=function(c){if(a.Utilities.ensureSsl()){a.Utilities.openIframeModal("/podium/default.aspx?t=1705&pe=1&pem=1&co=1&wapp=1&pk="+c,{Tall:true})}};b.Utilities.displayRegForm=function(f,g){if(a.Utilities.ensureSsl()){var d="",e=null,h=f,c=null;if(f.indexOf("r")>0){c=f.split("r");if(c.length>1){h=c[0];e=c[1]}}if(e!==undefined&&e!==null){d="&r="+e}a.Utilities.openIframeModal("/podium/default.aspx?t=36644&pe=1&pem=1&co=1&wapp=1&rid="+h+d+"&invuri="+encodeURIComponent(window.location.href),{Tall:true})}}}(onMessage.App,onMessage.App.module("forms"),onMessage));(function(a,b){b.Data={ProductOptions:{}};b.Models.ProductOptions=Backbone.Model.extend({idAttribute:"ProductId",urlRoot:function(){return a.Config.ApiPath+"store/productoptions"}});b.Models.CartGuid=Backbone.Model.extend({urlRoot:function(){return a.Config.ApiPath+"store/cartguid"}});b.Models.CartItem=Backbone.Model.extend({idAttribute:"StoreCartId",urlRoot:function(){return a.Config.ApiPath+"store/cartitem"}});b.Models.CartTotal=Backbone.Model.extend({url:function(){return a.Config.ApiPath+"store/carttotal"}});b.Collections.Cart=Backbone.Collection.extend({model:b.Models.CartItem,url:function(){return a.Config.ApiPath+"store/cart"}});b.Views.Cart=Backbone.View.extend({template:"Store/Cart/store.cart.template.html",initialize:function(){this.collection.on("reset",this.renderTemplate,this);this.itemViews=[]},render:function(c){var d=this;$(c).html(d.el)},renderTemplate:function(){var c=this;a.Utilities.fetchTemplate(c.template,function(d){c.$el.html(d({cart:c.collection.toJSON()}));c.renderItems();c.renderTotal();c.$el.find(".close").click(function(f){f.preventDefault();if(c.isValid()){a.Utilities.clearHash();return false}})})},renderItems:function(){var d=this,c=d.$el.find("#cart_product_list");d.itemViews=[];d.collection.each(function(f){var e=new b.Views.CartItem({model:f});e.on("save",function(){d.renderTotal()}).on("error",function(){d.isValid()}).on("remove",function(){d.collection.fetch()});d.itemViews.push(e);a.Utilities.renderView(e,c)})},renderTotal:function(){var e=this,c=e.$el.find("#cart_total"),d=new b.Models.CartTotal();
d.fetch({success:function(){var f=new b.Views.CartTotal({model:d});f.on("gocheckout",function(){if(e.isValid()){a.Router.navigate("store/checkout",true)}});a.Utilities.renderView(f,c)}})},isValid:function(){var e=this,d=true,c=0;_.each(e.itemViews,function(f){d=f.isValid();if(!d){c++;return}});if(!d){$("#cart_error").show()}else{$("#cart_error").show()}return(c===0)}});b.Views.CartItem=Backbone.View.extend({template:"Store/Cart/store.cart.item.template.html",tagName:"tr",events:{"change .cartitem-logo":"updateItem","change .cartitem-size":"updateItem","change .cartitem-color":"updateItem","change .cartitem-ship":"updateItem","change .cartitem-qty":"updateItem","click .cartitem-delete":"removeItem"},initialize:function(){this.model.on("change",this.renderTemplate,this)},render:function(c){var d=this;$(c).append(d.el);d.renderTemplate()},renderTemplate:function(){var c=this;a.Utilities.fetchTemplate(c.template,function(d){c.loadProductOptions(function(f){c.$el.html(d({cartItem:c.model.toJSON(),itemOptions:f}));if(f.Logos&&f.Logos.length>0&&!c.model.get("Logo")){var e=c.$el.find(".cartitem-logo:first");if(e.length>0){c.model.set({Logo:e.val()},{silent:true});e.attr("checked",true)}}$.modal.setPosition()})})},loadProductOptions:function(c){var f=this,d=f.model.get("ProductId"),e;if(b.Data.ProductOptions[d]){return c(b.Data.ProductOptions[d])}e=new b.Models.ProductOptions({ProductId:d});e.fetch({success:function(){b.Data.ProductOptions[d]=e.toJSON();return c(b.Data.ProductOptions[d])}})},updateItem:function(i){var l=this,d=l.$el.find(".cartitem-logo"),h=l.$el.find(".cartitem-size"),c=l.$el.find(".cartitem-color"),g=l.$el.find(".cartitem-ship"),f=l.$el.find(".cartitem-qty"),k={},j;if(d.length>0){k.Logo=d.filter(":checked").val()}if(h.length>0){k.Size=h.val()}if(c.length>0){k.Color=c.val()}if(g.length>0){k.StoreCartShipping=g.val()}if(f.length>0){k.Quantity=f.val()}l.model.set(k,{silent:true});if(isNaN(f.val())||f.val()<1){l.trigger("error")}else{j=l.model.get("SalePrice");if(j===undefined||j===null||isNaN(j)||parseInt(j,10)<0){l.model.set("SalePrice",0)}l.model.save({},{success:function(){l.trigger("save")},error:function(){l.trigger("error")}})}},removeItem:function(c){c.stopPropagation();c.preventDefault();var d=this;d.model.destroy({success:function(){d.trigger("remove")}});return false},isValid:function(){var f=this,c=true,d=f.model.get("ProductId"),e=b.Data.ProductOptions[d];f.$el.find("td").removeClass("bootstrap-error");if(f.model.get("Quantity")<=0){f.$el.find(".cartitem-qty").closest("td").addClass("bootstrap-error");c=false}if(e){if(e.Sizes&&e.Sizes.length>0){if(!f.model.get("Size")){f.$el.find(".cartitem-size").closest("td").addClass("bootstrap-error");c=false}}if(e.Colors&&e.Colors.length>0){if(!f.model.get("Color")){f.$el.find(".cartitem-color").closest("td").addClass("bootstrap-error");c=false}}if(e.Logos&&e.Logos.length>0){if(!f.model.get("Logo")){f.$el.find(".cartitem-logo").closest("td").addClass("bootstrap-error");c=false}}}return c}});b.Views.CartTotal=Backbone.View.extend({template:"Store/Cart/store.cart.total.template.html",events:{"click #cart_checkout":"sendToCheckout"},render:function(c){var d=this;$(c).html(d.el);d.renderTemplate()},renderTemplate:function(){var c=this;a.Utilities.fetchTemplate(c.template,function(d){c.$el.html(d({cartTotal:c.model.toJSON()}))})},sendToCheckout:function(){var c=this;c.trigger("gocheckout")}});b.Utilities.addToCart=function(d){var c=new b.Models.CartItem({ProductId:d});c.save({},{success:function(){a.Router.navigate("store/cart",true)}})};b.Utilities.displayCart=function(){if(a.Utilities.ensureSsl()){var c=new b.Collections.Cart();a.Utilities.renderModalView(new b.Views.Cart({collection:c}),{Bootstrap:true});c.fetch({})}};b.Utilities.displayCheckout=function(){if(a.Utilities.ensureSsl()){var f="",g=null,i=window.location.href,c="",e=null,d=null,h=null;if(i.indexOf("#")>-1){e=i.split("#store/");if(e.length>0){c=e[1];if(c.indexOf("r")>-1){d=c.split("r");if(d.length>0){g=d[1]}}}}if(g!==undefined&&g!==null){f="&r="+g}h=new b.Models.CartGuid();h.fetch({success:function(){a.Utilities.openIframeModal("/podium/default.aspx?t=8984&pe=1&pem=1&co=1&wapp=1&cartguid="+h.get("CartGuid")+f+"&invuri="+encodeURIComponent(i),{Tall:true})}})}}}(onMessage.App,onMessage.App.module("store"),onMessage));(function(a,b){b.Models.Comment=Backbone.Model.extend({idAttribute:"Id",url:function(){return a.Config.ApiPath+"news/commentsave/?format=json"}});b.Collections.Comments=Backbone.Collection.extend({model:b.Models.Comment,initialize:function(c){this.newsId=c.NewsId||0;this.dateSortOrder=c.DateSortOrder||0},url:function(){return a.Config.ApiPath+"news/commentsget/"+this.newsId+"?format=json&sortOrder="+this.dateSortOrder}});b.Views.Comment=Backbone.View.extend({el:$(".newscommententry"),events:{"click #saveComment":"saveComment","change input":"clearError","change textarea":"clearError","click #captcharefresh":"captchaRefresh"},initialize:function(){this.newsId=this.options.NewsId||0},saveComment:function(c){$("span").removeClass("bootstrap-error");var h=this,d,g="",f=grecaptcha.getResponse();if(f.length>0){h.model.set({Id:1,NewsId:h.newsId,FirstName:$(".newscommententry #FirstName").val(),LastName:$(".newscommententry #LastName").val(),Email:$(".newscommententry #Email").val(),Comment:$(".newscommententry #Comment").val(),Captcha:f});if(h.isModelValid()){h.model.save({},{error:function(e,i){$("#saveMessage").hide();b.Utilities.displayError(i,$(".newscommententry #message"))},success:function(e,i){$("input").val("");$(".comment").val("");d=new b.Models.Comment(i);switch(d.get("ApprovalType")){case 0:g="Your comment was submitted successfully!";break;case 1:g="Your comment was submitted and will appear once approved.";break;case 2:g="You will be e-mailed a confirmation link that you must click to post your comment.";break}$("#saveMessage").html("<h5>"+g+"</h5><br />");$("#saveMessage").show();h.trigger("commentSaved",h.model)}})}else{b.Utilities.displayError("Please enter all required information",$(".newscommententry #message"))}}else{b.Utilities.displayError("Captcha is incorrect",$(".newscommententry #message"))}return false},clearError:function(c){$("#"+c.target.id+"Group").removeClass("error");$("#saveMessage").hide()},isModelValid:function(){var d=this,c=true;d.$el.find("#FirstName").closest("div").removeClass("bootstrap-error");if(d.model.get("FirstName").trim().length===0){d.$el.find("#FirstName").closest("div").addClass("bootstrap-error");c=false}d.$el.find("#LastName").closest("div").removeClass("bootstrap-error");d.$el.find("#LasttName").removeClass("bootstrap-error");if(d.model.get("LastName").trim().length===0){d.$el.find("#LastName").closest("div").addClass("bootstrap-error");c=false}d.$el.find("#Email").closest("div").removeClass("bootstrap-error");d.$el.find("#Email").removeClass("bootstrap-error");if(d.model.get("Email").trim().length===0){d.$el.find("#Email").closest("div").addClass("bootstrap-error");c=false}else{if(!/^([^@]+@[^\.@\+'][^@\'\+]*\.[a-z]{2,})*$/.test(d.model.get("Email"))){d.$el.find("#Email").closest("div").addClass("bootstrap-error");c=false}}d.$el.find("#Comment").closest("div").removeClass("bootstrap-error");d.$el.find("#Comment").removeClass("bootstrap-error");if(d.model.get("Comment").trim().length===0){d.$el.find("#Comment").closest("div").addClass("bootstrap-error");c=false}return c}});b.Utilities.postComment=function(f,c){var d=new b.Models.Comment({NewsId:f}),e=new b.Views.Comment({model:d,NewsId:f,Cid:c});e.saveComment()};b.Views.Error=Backbone.View.extend({className:"alert",render:function(c){this.$el.html(this.options.message).addClass(this.options.messageClass);$(c).append(this.el).fadeIn(1000).delay(3000).fadeOut(1000)}});b.Utilities.displayError=function(d,c){c.html("");a.Utilities.renderView(new b.Views.Error({message:d,messageClass:"alert-error"}),c)}}(onMessage.App,onMessage.App.module("NewsComments")));(function(a,b){b.Models.GameGet=Backbone.Model.extend({idAttribute:"ScheduleId",url:function(){return a.Config.ApiPath+"athleticschedule/gameview?format=json&scheduleId="+this.get("ScheduleId")}});b.Models.PracticeDetailsGet=Backbone.Model.extend({idAttribute:"ScheduleId",url:function(){return a.Config.ApiPath+"datadirect/practicedetailsget?format=json&scheduleId="+this.get("ScheduleId")}});b.Views.GameScheduleDetailsView=Backbone.View.extend({template:"athletics/teamschedule/athleticschedule.details.template.html",events:{"click .close":"closeModal"},closeModal:function(c){c.preventDefault();a.Utilities.closeModal();return false},initialize:function(){this.scheduleItem=this.options.scheduleItem},render:function(c){var h=this,f=false,g=false,e=h.scheduleItem,d;if(h.options.showTransprtation){if(e.DismissalTime||e.Vehicles.length>0||e.DepartureNote||e.DepartureTime||e.PickupNote||e.PickupTime||e.AdditionalNotes){f=true}}d=e.LocationDetail;if(d.Directions||d.MapUrl||d.AddressLine1){g=true;if(d.Directions){d.Directions=d.Directions.replace(/\r/g,"<br />")}}a.Utilities.fetchTemplate(h.template,function(k){var j="",i="";if(d.AddressLine1){j=d.AddressLine1;i=d.AddressLine1;if(d.AddressLine2){j+=" "+d.AddressLine2;i+="<br />"+d.AddressLine2}if(d.AddressLine3){j+=" "+d.AddressLine3;i+="<br />"+d.AddressLine3}if(d.City){j+=" "+d.City;i+="<br />"+d.City}if(d.StateShort){j+=" "+d.StateShort;if(d.City){i+=", "+d.StateShort}else{i+="<br />"+d.StateShort}}if(d.Zip){j+=" "+d.Zip;if(d.City||d.State){i+=" "+d.Zip}else{i+="<br />"+d.Zip}}}h.$el.html(k({scheduleItem:e,showDetail:f,showDirections:g,address:i}));$(c).html(h.el);if(d.AddressLine1){b.Utilities.addMapScript(j)}})}});b.Views.PracticeDetailsView=Backbone.View.extend({template:"athletics/teamschedule/practice.details.template.html",events:{"click .close":"closeModal"},closeModal:function(c){c.preventDefault();a.Utilities.closeModal();return false},initialize:function(){this.scheduleItem=this.options.scheduleItem},render:function(c){var g=this,e=false,f=false,d=g.scheduleItem;if(g.options.showTransprtation){if(d.DismissalTime||d.transportation_name||d.DepartureTime||d.PickupTime){e=true}}if(d.directions||d.map_url||d.line_one){f=true;if(d.directions){d.directions=d.directions.replace(/\r/g,"<br />")}}a.Utilities.fetchTemplate(g.template,function(j){var i="",h="";if(d.line_one){i=d.line_one;h=d.line_one;if(d.line_two){i+=" "+d.line_two;h+="<br />"+d.line_two}if(d.line_three){i+=" "+d.line_three;h+="<br />"+d.line_three}if(d.city){i+=" "+d.city;h+="<br />"+d.city}if(d.state_short){i+=" "+d.state_short;if(d.city){h+=", "+d.state_short}else{h+="<br />"+d.state_short}}if(d.zip){i+=" "+d.zip;if(d.city||d.state_short){h+=" "+d.zip}else{h+="<br />"+d.zip}}}g.$el.html(j({scheduleItem:d,showDetail:e,showDirections:f,address:h}));$(c).html(g.el);if(d.line_one){b.Utilities.addMapScript(i)}})}});b.Views.Error=Backbone.View.extend({className:"alert",render:function(c){this.$el.html(this.options.message).addClass(this.options.messageClass);$(c).append(this.el).fadeIn(1000).delay(3000).fadeOut(1000)}});b.Utilities.showDirections=function(e,g,c){var f,d;if(c){f=b.Utilities.getPracticeDetails(e);d=new b.Views.PracticeDetailsView({scheduleItem:f.toJSON(),showTransprtation:g})}else{f=b.Utilities.getGameDetails(e);d=new b.Views.GameScheduleDetailsView({scheduleItem:f.toJSON(),showTransprtation:g})}a.Utilities.renderModalView(d,{Bootstrap:false,Lightbox:true})};b.Utilities.getGameDetails=function(d){var c=new b.Models.GameGet({ScheduleId:d});c.fetch({async:false,error:function(e,f){b.Utilities.displayError("Error loading game")},success:function(){var f=new Date(c.get("Gamedate")),e=a.Tools.shortDateDisplayNoTime(f),h=a.Tools.timeDisplay(f),g=0,j;c.set("StartTime",h);c.set("StartDisplay",h);c.set("Gamedate",e);c.set("OpponentId",0);c.set("Team",c.get("Team"));if(c.get("ScheduleType")===0&&c.get("Opponents").length===1){c.set("OpponentId",c.get("Opponents")[0].Id)}if(c.get("Opponents").length>0&&c.get("Opponents").length<2){c.set("OpponentName",c.get("Opponents")[0].Name)}else{if(c.get("Opponents").length>1){c.set("OpponentName","Multiple")}else{c.set("OpponentName","")}}if(c.get("Vehicles").length>0){j=c.get("Vehicles");for(g=0;g<j.length;g++){j[g].BeginTime=j[g].BeginDate.split(" ",2)[1];j[g].BeginDate=j[g].BeginDate.split(" ",2)[0];j[g].EndTime=j[g].EndDate.split(" ",2)[1];j[g].EndDate=j[g].EndDate.split(" ",2)[0]}}if(c.get("DismissalTime")==="00:00:00"){c.set("DismissalTime","")}else{c.set("DismissalTime",a.Tools.timeDisplay(e+" "+c.get("DismissalTime")))}if(c.get("DepartureTime")==="00:00:00"){c.set("DepartureTime","")}else{c.set("DepartureTime",a.Tools.timeDisplay(e+" "+c.get("DepartureTime")))}if(c.get("PickupTime")==="00:00:00"){c.set("PickupTime","")}else{c.set("PickupTime",a.Tools.timeDisplay(e+" "+c.get("PickupTime")))}if(c.get("LeagueInd")){c.set("Classification","League")}else{c.set("Classification","Non-League")}if(c.get("ScrimmageInd")){c.set("Category","Scrimmage")}if(c.get("TournamentInd")){c.set("Category","Tournament")}if(c.get("InvitationalInd")){c.set("Category","Invitational")}if(c.get("PlayoffInd")){c.set("Category","Playoff")}if((!c.get("ScrimmageInd"))&&(!c.get("TournamentInd"))&&(!c.get("InvitationalInd"))&&(!c.get("PlayoffInd"))){c.set("Category","")}}});return c};b.Utilities.getPracticeDetails=function(d){var c=new b.Models.PracticeDetailsGet({ScheduleId:d});c.fetch({async:false,error:function(e,f){b.Utilities.displayError("Error loading practice")},success:function(){var h=new Date(c.get("event_date_start")),f,e,g;c.set("PracticeDate",a.Tools.shortDateDisplayNoTime(h));c.set("StartTime",a.Tools.timeDisplay(new Date("01/01/2000 "+c.get("start_time"))));c.set("EndTime",a.Tools.timeDisplay(new Date("01/01/2000 "+c.get("end_time"))));if(c.get("student_dismissal_time")){f=new Date(c.get("student_dismissal_time"));c.set("DismissalTime",a.Tools.timeDisplay(f))}if(c.get("departure_time")){e=new Date(c.get("departure_time"));c.set("DepartureTime",a.Tools.timeDisplay(e))}if(c.get("pickuptime")){g=new Date(c.get("pickuptime"));c.set("PickupTime",a.Tools.timeDisplay(g))}}});return c};b.Utilities.displayError=function(d,c){c.html("");a.Utilities.renderView(new b.Views.Error({message:d,messageClass:"alert-error"}),c)};b.Utilities.addMapScript=function(c){var f,d=$("#map-container"),e=$("#map-link");if(b.MapData.MQMap){d.show();b.MapData.MQMap=new Microsoft.Maps.Map("#bing-map",{zoom:12});b.MapData.MQMap.entities.clear();b.MapData.geocodeQuery(c)}else{if(window.location.protocol==="https:"){f="https://www.bing.com/api/maps/mapcontrol?callback=GetMap&key=SOg3kx9B8b8QFO8qTAi6~aMoA9TLDaXoobrXJe8N9qg~AnFujmbftpAk0WjCGdragIldj-ac_00Qk8VXMb4HFwPyWXIRb2ckmwJdzusI2fiD"}else{f="http://www.bing.com/api/maps/mapcontrol?callback=GetMap&key=SOg3kx9B8b8QFO8qTAi6~aMoA9TLDaXoobrXJe8N9qg~AnFujmbftpAk0WjCGdragIldj-ac_00Qk8VXMb4HFwPyWXIRb2ckmwJdzusI2fiD"}head.js(f,function(){window.GetMap=function(){d.show();b.MapData.MQMap=new Microsoft.Maps.Map("#bing-map",{zoom:12});b.MapData.geocodeQuery(c)}})}e.show();e.attr("href","http://bing.com/maps/default.aspx?rtp=~adr."+encodeURIComponent(c))};b.MapData={geocodeQuery:function(c){if(!b.MapData.searchManager){Microsoft.Maps.loadModule("Microsoft.Maps.Search",function(){b.MapData.searchManager=new Microsoft.Maps.Search.SearchManager(b.MapData.MQMap);b.MapData.geocodeQuery(c)})}else{var d={where:c,callback:function(f){if(f&&f.results&&f.results.length>0){var e=new Microsoft.Maps.Pushpin(f.results[0].location,{icon:"/podium/images/mapMarker.png",title:c});b.MapData.MQMap.entities.push(e);b.MapData.MQMap.setView({bounds:f.results[0].bestView,padding:80})}}};b.MapData.searchManager.geocode(d)}}}}(onMessage.App,onMessage.App.module("AthleticSchedule")));function ical_download(r,i,q,g,u,f,l,d,c,p,t,o,a,b){$("a.calendarAnchor").remove();var s,n,m,h,j,v,k,e;v=$("#calendarType option:selected").val();if(v===""){return false}s=r.split(" ");if(s[1]==="PM"){s=s[0].split(":");if(12+parseInt(s[0],10)!==24){r=12+parseInt(s[0],10)+":"+s[1]+":00"}else{r="12:"+s[1]+":00"}}else{s=s[0].split(":");if(s[0].length===1){s[0]="0"+s[0]}if(s[0]==="12"){r="00:"+s[1]+":00"}else{r=s[0]+":"+s[1]+":00"}}if(u===""&&p==="game"){if(o!==""&&a===""){u=t+" vs. "+o+" - "+b}else{if(o!==""&&a!==""){u=t+" vs. "+o+" - "+b+" - "+a}else{if(o===""&&a===""){u=t+" - "+b}else{u=t+" - "+b+" - "+a}}}}if(p==="game"){n=r.split(":");m=parseInt(n[0],10)+3;if(m<10){m="0"+m}if(m>24){h=g.split("/");g=h[0]+"/"+(parseInt(h[1],10)+1)+"/"+h[2];i="0"+(parseInt(m,10)-24)+":"+n[1]+":"+n[2]}else{i=m+":"+n[1]+":"+n[2]}}if(r===""){r="00:00:00"}j=i;j=i.split(" ");if(j[1]==="PM"){j=j[0].split(":");i=12+parseInt(j[0],10)+":"+j[1]+":00"}else{j=j[0].split(":");i=j[0]+":"+j[1]+":00"}q=q.split(" ");q=q[0].split("/");if(q[0].length===1){q[0]="0"+q[0]}if(q[1].length===1){q[1]="0"+q[1]}q=q[2]+"/"+q[0]+"/"+q[1];g=g.split(" ");g=g[0].split("/");if(g[0].length===1){g[0]="0"+g[0]}if(g[1].length===1){g[1]="0"+g[1]}g=g[2]+"/"+g[0]+"/"+g[1];k={title:u,location:l,description:f,dateAlpha:q.replace(/[^0-9]+/g,""),dateOmega:g.replace(/[^0-9]+/g,""),timeAlpha:r.replace(/[^0-9]+/g,""),timeOmega:i.replace(/[^0-9]+/g,"")};k.getAlpha=function(){var w=this.dateAlpha;if(this.timeAlpha!==""){if(this.timeAlpha.length===3){this.timeAlpha="0"+this.timeAlpha}w+="T"+this.timeAlpha}return w};k.getOmega=function(){var w=this.dateOmega;if(this.timeOmega!==""){if(this.timeOmega.length===3){this.timeOmega="0"+this.timeOmega}w+="T"+this.timeOmega}return w};$(".athletic-directions").append('<a href="" target="_blank" class="calendarAnchor"></a>');if(v==="google"){e=["action=TEMPLATE","text="+encodeURIComponent(k.title),"dates="+k.getAlpha()+"/"+k.getOmega(),"details="+encodeURIComponent(k.description),"location="+encodeURIComponent(k.location)];$("a.calendarAnchor").attr("href","https://www.google.com/calendar/event?"+e.join("&"))}else{e=["BEGIN:VCALENDAR","VERSION:2.0","METHOD:REQUEST","BEGIN:VEVENT","DTSTAMP:"+d,"DTSTART:"+k.getAlpha(),"DTEND:"+k.getOmega(),"LOCATION:"+k.location,"DESCRIPTION:"+k.description,"SUMMARY:"+k.title,"SEQUENCE:0","END:VEVENT","END:VCALENDAR"];if(v==="outlook"){$("a.calendarAnchor").attr("download","event.ics").attr("href","data:text/calendar;charset=utf8,"+encodeURI(e.join("\n")))}if(v==="outlookcom"){$("a.calendarAnchor").attr("download","event.ics").attr("href","data:text/calendar;charset=utf8,"+encodeURI(e.join("\n")))}if(v==="ateappleical"){$("a.calendarAnchor").attr("download","event.ics").attr("href","data:text/calendar;charset=utf8,"+encodeURI(e.join("\n")))}}$("a.calendarAnchor")[0].click()};