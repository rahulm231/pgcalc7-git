FS._jQueryTemp=window.jQuery,window.jQuery=FS.$,/*! jQuery UI - v1.10.3 - 2013-05-03
* http://jqueryui.com
* Includes: jquery.ui.core.js, jquery.ui.widget.js, jquery.ui.mouse.js, jquery.ui.draggable.js, jquery.ui.droppable.js, jquery.ui.resizable.js, jquery.ui.selectable.js, jquery.ui.sortable.js, jquery.ui.effect.js, jquery.ui.accordion.js, jquery.ui.autocomplete.js, jquery.ui.button.js, jquery.ui.datepicker.js, jquery.ui.dialog.js, jquery.ui.effect-blind.js, jquery.ui.effect-bounce.js, jquery.ui.effect-clip.js, jquery.ui.effect-drop.js, jquery.ui.effect-explode.js, jquery.ui.effect-fade.js, jquery.ui.effect-fold.js, jquery.ui.effect-highlight.js, jquery.ui.effect-pulsate.js, jquery.ui.effect-scale.js, jquery.ui.effect-shake.js, jquery.ui.effect-slide.js, jquery.ui.effect-transfer.js, jquery.ui.menu.js, jquery.ui.position.js, jquery.ui.progressbar.js, jquery.ui.slider.js, jquery.ui.spinner.js, jquery.ui.tabs.js, jquery.ui.tooltip.js
* Copyright 2013 jQuery Foundation and other contributors; Licensed MIT */
function(t,e){function i(e,i){var s,o,r,a=e.nodeName.toLowerCase();return"area"===a?(s=e.parentNode,o=s.name,!(!e.href||!o||"map"!==s.nodeName.toLowerCase())&&(r=t("img[usemap=#"+o+"]")[0],!!r&&n(r))):(/input|select|textarea|button|object/.test(a)?!e.disabled:"a"===a?e.href||i:i)&&n(e)}function n(e){return t.expr.filters.visible(e)&&!t(e).parents().addBack().filter(function(){return"hidden"===t.css(this,"visibility")}).length}var s=0,o=/^ui-id-\d+$/;t.ui=t.ui||{},t.extend(t.ui,{version:"1.10.3",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),t.fn.extend({focus:function(e){return function(i,n){return"number"==typeof i?this.each(function(){var e=this;setTimeout(function(){t(e).focus(),n&&n.call(e)},i)}):e.apply(this,arguments)}}(t.fn.focus),scrollParent:function(){var e;return e=t.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(t.css(this,"position"))&&/(auto|scroll)/.test(t.css(this,"overflow")+t.css(this,"overflow-y")+t.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(t.css(this,"overflow")+t.css(this,"overflow-y")+t.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!e.length?t(document):e},zIndex:function(i){if(i!==e)return this.css("zIndex",i);if(this.length)for(var n,s,o=t(this[0]);o.length&&o[0]!==document;){if(n=o.css("position"),("absolute"===n||"relative"===n||"fixed"===n)&&(s=parseInt(o.css("zIndex"),10),!isNaN(s)&&0!==s))return s;o=o.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++s)})},removeUniqueId:function(){return this.each(function(){o.test(this.id)&&t(this).removeAttr("id")})}}),t.extend(t.expr[":"],{data:t.expr.createPseudo?t.expr.createPseudo(function(e){return function(i){return!!t.data(i,e)}}):function(e,i,n){return!!t.data(e,n[3])},focusable:function(e){return i(e,!isNaN(t.attr(e,"tabindex")))},tabbable:function(e){var n=t.attr(e,"tabindex"),s=isNaN(n);return(s||n>=0)&&i(e,!s)}}),t("<a>").outerWidth(1).jquery||t.each(["Width","Height"],function(i,n){function s(e,i,n,s){return t.each(o,function(){i-=parseFloat(t.css(e,"padding"+this))||0,n&&(i-=parseFloat(t.css(e,"border"+this+"Width"))||0),s&&(i-=parseFloat(t.css(e,"margin"+this))||0)}),i}var o="Width"===n?["Left","Right"]:["Top","Bottom"],r=n.toLowerCase(),a={innerWidth:t.fn.innerWidth,innerHeight:t.fn.innerHeight,outerWidth:t.fn.outerWidth,outerHeight:t.fn.outerHeight};t.fn["inner"+n]=function(i){return i===e?a["inner"+n].call(this):this.each(function(){t(this).css(r,s(this,i)+"px")})},t.fn["outer"+n]=function(e,i){return"number"!=typeof e?a["outer"+n].call(this,e):this.each(function(){t(this).css(r,s(this,e,!0,i)+"px")})}}),t.fn.addBack||(t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),t("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(t.fn.removeData=function(e){return function(i){return arguments.length?e.call(this,t.camelCase(i)):e.call(this)}}(t.fn.removeData)),t.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),t.support.selectstart="onselectstart"in document.createElement("div"),t.fn.extend({disableSelection:function(){return this.bind((t.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(t){t.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),t.extend(t.ui,{plugin:{add:function(e,i,n){var s,o=t.ui[e].prototype;for(s in n)o.plugins[s]=o.plugins[s]||[],o.plugins[s].push([i,n[s]])},call:function(t,e,i){var n,s=t.plugins[e];if(s&&t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType)for(n=0;s.length>n;n++)t.options[s[n][0]]&&s[n][1].apply(t.element,i)}},hasScroll:function(e,i){if("hidden"===t(e).css("overflow"))return!1;var n=i&&"left"===i?"scrollLeft":"scrollTop",s=!1;return e[n]>0||(e[n]=1,s=e[n]>0,e[n]=0,s)}})}(jQuery),function(t,e){var i=0,n=Array.prototype.slice,s=t.cleanData;t.cleanData=function(e){for(var i,n=0;null!=(i=e[n]);n++)try{t(i).triggerHandler("remove")}catch(t){}s(e)},t.widget=function(i,n,s){var o,r,a,l,c={},d=i.split(".")[0];i=i.split(".")[1],o=d+"-"+i,s||(s=n,n=t.Widget),t.expr[":"][o.toLowerCase()]=function(e){return!!t.data(e,o)},t[d]=t[d]||{},r=t[d][i],a=t[d][i]=function(t,i){return this._createWidget?(arguments.length&&this._createWidget(t,i),e):new a(t,i)},t.extend(a,r,{version:s.version,_proto:t.extend({},s),_childConstructors:[]}),l=new n,l.options=t.widget.extend({},l.options),t.each(s,function(i,s){return t.isFunction(s)?(c[i]=function(){var t=function(){return n.prototype[i].apply(this,arguments)},e=function(t){return n.prototype[i].apply(this,t)};return function(){var i,n=this._super,o=this._superApply;return this._super=t,this._superApply=e,i=s.apply(this,arguments),this._super=n,this._superApply=o,i}}(),e):(c[i]=s,e)}),a.prototype=t.widget.extend(l,{widgetEventPrefix:r?l.widgetEventPrefix:i},c,{constructor:a,namespace:d,widgetName:i,widgetFullName:o}),r?(t.each(r._childConstructors,function(e,i){var n=i.prototype;t.widget(n.namespace+"."+n.widgetName,a,i._proto)}),delete r._childConstructors):n._childConstructors.push(a),t.widget.bridge(i,a)},t.widget.extend=function(i){for(var s,o,r=n.call(arguments,1),a=0,l=r.length;l>a;a++)for(s in r[a])o=r[a][s],r[a].hasOwnProperty(s)&&o!==e&&(i[s]=t.isPlainObject(o)?t.isPlainObject(i[s])?t.widget.extend({},i[s],o):t.widget.extend({},o):o);return i},t.widget.bridge=function(i,s){var o=s.prototype.widgetFullName||i;t.fn[i]=function(r){var a="string"==typeof r,l=n.call(arguments,1),c=this;return r=!a&&l.length?t.widget.extend.apply(null,[r].concat(l)):r,a?this.each(function(){var n,s=t.data(this,o);return s?t.isFunction(s[r])&&"_"!==r.charAt(0)?(n=s[r].apply(s,l),n!==s&&n!==e?(c=n&&n.jquery?c.pushStack(n.get()):n,!1):e):t.error("no such method '"+r+"' for "+i+" widget instance"):t.error("cannot call methods on "+i+" prior to initialization; attempted to call method '"+r+"'")}):this.each(function(){var e=t.data(this,o);e?e.option(r||{})._init():t.data(this,o,new s(r,this))}),c}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(e,n){n=t(n||this.defaultElement||this)[0],this.element=t(n),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=t.widget.extend({},this.options,this._getCreateOptions(),e),this.bindings=t(),this.hoverable=t(),this.focusable=t(),n!==this&&(t.data(n,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===n&&this.destroy()}}),this.document=t(n.style?n.ownerDocument:n.document||n),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:t.noop,_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(t.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:t.noop,widget:function(){return this.element},option:function(i,n){var s,o,r,a=i;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof i)if(a={},s=i.split("."),i=s.shift(),s.length){for(o=a[i]=t.widget.extend({},this.options[i]),r=0;s.length-1>r;r++)o[s[r]]=o[s[r]]||{},o=o[s[r]];if(i=s.pop(),n===e)return o[i]===e?null:o[i];o[i]=n}else{if(n===e)return this.options[i]===e?null:this.options[i];a[i]=n}return this._setOptions(a),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return this.options[t]=e,"disabled"===t&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!e).attr("aria-disabled",e),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(i,n,s){var o,r=this;"boolean"!=typeof i&&(s=n,n=i,i=!1),s?(n=o=t(n),this.bindings=this.bindings.add(n)):(s=n,n=this.element,o=this.widget()),t.each(s,function(s,a){function l(){return i||r.options.disabled!==!0&&!t(this).hasClass("ui-state-disabled")?("string"==typeof a?r[a]:a).apply(r,arguments):e}"string"!=typeof a&&(l.guid=a.guid=a.guid||l.guid||t.guid++);var c=s.match(/^(\w+)\s*(.*)$/),d=c[1]+r.eventNamespace,h=c[2];h?o.delegate(h,d,l):n.bind(d,l)})},_off:function(t,e){e=(e||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(e).undelegate(e)},_delay:function(t,e){function i(){return("string"==typeof t?n[t]:t).apply(n,arguments)}var n=this;return setTimeout(i,e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){t(e.currentTarget).addClass("ui-state-hover")},mouseleave:function(e){t(e.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){t(e.currentTarget).addClass("ui-state-focus")},focusout:function(e){t(e.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(e,i,n){var s,o,r=this.options[e];if(n=n||{},i=t.Event(i),i.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),i.target=this.element[0],o=i.originalEvent)for(s in o)s in i||(i[s]=o[s]);return this.element.trigger(i,n),!(t.isFunction(r)&&r.apply(this.element[0],[i].concat(n))===!1||i.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},function(e,i){t.Widget.prototype["_"+e]=function(n,s,o){"string"==typeof s&&(s={effect:s});var r,a=s?s===!0||"number"==typeof s?i:s.effect||i:e;s=s||{},"number"==typeof s&&(s={duration:s}),r=!t.isEmptyObject(s),s.complete=o,s.delay&&n.delay(s.delay),r&&t.effects&&t.effects.effect[a]?n[e](s):a!==e&&n[a]?n[a](s.duration,s.easing,o):n.queue(function(i){t(this)[e](),o&&o.call(n[0]),i()})}})}(jQuery),function(t){var e=!1;t(document).mouseup(function(){e=!1}),t.widget("ui.mouse",{version:"1.10.3",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.bind("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).bind("click."+this.widgetName,function(i){return!0===t.data(i.target,e.widgetName+".preventClickEvent")?(t.removeData(i.target,e.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&t(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(i){if(!e){this._mouseStarted&&this._mouseUp(i),this._mouseDownEvent=i;var n=this,s=1===i.which,o=!("string"!=typeof this.options.cancel||!i.target.nodeName)&&t(i.target).closest(this.options.cancel).length;return!(s&&!o&&this._mouseCapture(i))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){n.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(i)&&this._mouseDelayMet(i)&&(this._mouseStarted=this._mouseStart(i)!==!1,!this._mouseStarted)?(i.preventDefault(),!0):(!0===t.data(i.target,this.widgetName+".preventClickEvent")&&t.removeData(i.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return n._mouseMove(t)},this._mouseUpDelegate=function(t){return n._mouseUp(t)},t(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),i.preventDefault(),e=!0,!0))}},_mouseMove:function(e){return t.ui.ie&&(!document.documentMode||9>document.documentMode)&&!e.button?this._mouseUp(e):this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,e)!==!1,this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted)},_mouseUp:function(e){return t(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,e.target===this._mouseDownEvent.target&&t.data(e.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(e)),!1},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(t){t.widget("ui.draggable",t.ui.mouse,{version:"1.10.3",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"!==this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(e){var i=this.options;return!(this.helper||i.disabled||t(e.target).closest(".ui-resizable-handle").length>0)&&(this.handle=this._getHandle(e),!!this.handle&&(t(i.iframeFix===!0?"iframe":i.iframeFix).each(function(){t("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(t(this).offset()).appendTo("body")}),!0))},_mouseStart:function(e){var i=this.options;return this.helper=this._createHelper(e),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),t.ui.ddmanager&&(t.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offsetParent=this.helper.offsetParent(),this.offsetParentCssPosition=this.offsetParent.css("position"),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.offset.scroll=!1,t.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(e),this.originalPageX=e.pageX,this.originalPageY=e.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this._setContainment(),this._trigger("start",e)===!1?(this._clear(),!1):(this._cacheHelperProportions(),t.ui.ddmanager&&!i.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this._mouseDrag(e,!0),t.ui.ddmanager&&t.ui.ddmanager.dragStart(this,e),!0)},_mouseDrag:function(e,i){if("fixed"===this.offsetParentCssPosition&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo("absolute"),!i){var n=this._uiHash();if(this._trigger("drag",e,n)===!1)return this._mouseUp({}),!1;this.position=n.position}return this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),!1},_mouseStop:function(e){var i=this,n=!1;return t.ui.ddmanager&&!this.options.dropBehaviour&&(n=t.ui.ddmanager.drop(this,e)),this.dropped&&(n=this.dropped,this.dropped=!1),!("original"===this.options.helper&&!t.contains(this.element[0].ownerDocument,this.element[0]))&&("invalid"===this.options.revert&&!n||"valid"===this.options.revert&&n||this.options.revert===!0||t.isFunction(this.options.revert)&&this.options.revert.call(this.element,n)?t(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){i._trigger("stop",e)!==!1&&i._clear()}):this._trigger("stop",e)!==!1&&this._clear(),!1)},_mouseUp:function(e){return t("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),t.ui.ddmanager&&t.ui.ddmanager.dragStop(this,e),t.ui.mouse.prototype._mouseUp.call(this,e)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(e){return!this.options.handle||!!t(e.target).closest(this.element.find(this.options.handle)).length},_createHelper:function(e){var i=this.options,n=t.isFunction(i.helper)?t(i.helper.apply(this.element[0],[e])):"clone"===i.helper?this.element.clone().removeAttr("id"):this.element;return n.parents("body").length||n.appendTo("parent"===i.appendTo?this.element[0].parentNode:i.appendTo),n[0]===this.element[0]||/(fixed|absolute)/.test(n.css("position"))||n.css("position","absolute"),n},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){var e=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&t.ui.ie)&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var t=this.element.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,i,n,s=this.options;return s.containment?"window"===s.containment?void(this.containment=[t(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,t(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,t(window).scrollLeft()+t(window).width()-this.helperProportions.width-this.margins.left,t(window).scrollTop()+(t(window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===s.containment?void(this.containment=[0,0,t(document).width()-this.helperProportions.width-this.margins.left,(t(document).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):s.containment.constructor===Array?void(this.containment=s.containment):("parent"===s.containment&&(s.containment=this.helper[0].parentNode),i=t(s.containment),n=i[0],void(n&&(e="hidden"!==i.css("overflow"),this.containment=[(parseInt(i.css("borderLeftWidth"),10)||0)+(parseInt(i.css("paddingLeft"),10)||0),(parseInt(i.css("borderTopWidth"),10)||0)+(parseInt(i.css("paddingTop"),10)||0),(e?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(i.css("borderRightWidth"),10)||0)-(parseInt(i.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(i.css("borderBottomWidth"),10)||0)-(parseInt(i.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=i))):void(this.containment=null)},_convertPositionTo:function(e,i){i||(i=this.position);var n="absolute"===e?1:-1,s="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent;return this.offset.scroll||(this.offset.scroll={top:s.scrollTop(),left:s.scrollLeft()}),{top:i.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top)*n,left:i.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)*n}},_generatePosition:function(e){var i,n,s,o,r=this.options,a="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=e.pageX,c=e.pageY;return this.offset.scroll||(this.offset.scroll={top:a.scrollTop(),left:a.scrollLeft()}),this.originalPosition&&(this.containment&&(this.relative_container?(n=this.relative_container.offset(),i=[this.containment[0]+n.left,this.containment[1]+n.top,this.containment[2]+n.left,this.containment[3]+n.top]):i=this.containment,e.pageX-this.offset.click.left<i[0]&&(l=i[0]+this.offset.click.left),e.pageY-this.offset.click.top<i[1]&&(c=i[1]+this.offset.click.top),e.pageX-this.offset.click.left>i[2]&&(l=i[2]+this.offset.click.left),e.pageY-this.offset.click.top>i[3]&&(c=i[3]+this.offset.click.top)),r.grid&&(s=r.grid[1]?this.originalPageY+Math.round((c-this.originalPageY)/r.grid[1])*r.grid[1]:this.originalPageY,c=i?s-this.offset.click.top>=i[1]||s-this.offset.click.top>i[3]?s:s-this.offset.click.top>=i[1]?s-r.grid[1]:s+r.grid[1]:s,o=r.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/r.grid[0])*r.grid[0]:this.originalPageX,l=i?o-this.offset.click.left>=i[0]||o-this.offset.click.left>i[2]?o:o-this.offset.click.left>=i[0]?o-r.grid[0]:o+r.grid[0]:o)),{top:c-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(e,i,n){return n=n||this._uiHash(),t.ui.plugin.call(this,e,[i,n]),"drag"===e&&(this.positionAbs=this._convertPositionTo("absolute")),t.Widget.prototype._trigger.call(this,e,i,n)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),t.ui.plugin.add("draggable","connectToSortable",{start:function(e,i){var n=t(this).data("ui-draggable"),s=n.options,o=t.extend({},i,{item:n.element});n.sortables=[],t(s.connectToSortable).each(function(){var i=t.data(this,"ui-sortable");i&&!i.options.disabled&&(n.sortables.push({instance:i,shouldRevert:i.options.revert}),i.refreshPositions(),i._trigger("activate",e,o))})},stop:function(e,i){var n=t(this).data("ui-draggable"),s=t.extend({},i,{item:n.element});t.each(n.sortables,function(){this.instance.isOver?(this.instance.isOver=0,n.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=this.shouldRevert),this.instance._mouseStop(e),this.instance.options.helper=this.instance.options._helper,"original"===n.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",e,s))})},drag:function(e,i){var n=t(this).data("ui-draggable"),s=this;t.each(n.sortables,function(){var o=!1,r=this;this.instance.positionAbs=n.positionAbs,this.instance.helperProportions=n.helperProportions,this.instance.offset.click=n.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(o=!0,t.each(n.sortables,function(){return this.instance.positionAbs=n.positionAbs,this.instance.helperProportions=n.helperProportions,this.instance.offset.click=n.offset.click,this!==r&&this.instance._intersectsWith(this.instance.containerCache)&&t.contains(r.instance.element[0],this.instance.element[0])&&(o=!1),o})),o?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=t(s).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return i.helper[0]},e.target=this.instance.currentItem[0],this.instance._mouseCapture(e,!0),this.instance._mouseStart(e,!0,!0),this.instance.offset.click.top=n.offset.click.top,this.instance.offset.click.left=n.offset.click.left,this.instance.offset.parent.left-=n.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=n.offset.parent.top-this.instance.offset.parent.top,n._trigger("toSortable",e),n.dropped=this.instance.element,n.currentItem=n.element,this.instance.fromOutside=n),this.instance.currentItem&&this.instance._mouseDrag(e)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",e,this.instance._uiHash(this.instance)),this.instance._mouseStop(e,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),n._trigger("fromSortable",e),n.dropped=!1)})}}),t.ui.plugin.add("draggable","cursor",{start:function(){var e=t("body"),i=t(this).data("ui-draggable").options;e.css("cursor")&&(i._cursor=e.css("cursor")),e.css("cursor",i.cursor)},stop:function(){var e=t(this).data("ui-draggable").options;e._cursor&&t("body").css("cursor",e._cursor)}}),t.ui.plugin.add("draggable","opacity",{start:function(e,i){var n=t(i.helper),s=t(this).data("ui-draggable").options;n.css("opacity")&&(s._opacity=n.css("opacity")),n.css("opacity",s.opacity)},stop:function(e,i){var n=t(this).data("ui-draggable").options;n._opacity&&t(i.helper).css("opacity",n._opacity)}}),t.ui.plugin.add("draggable","scroll",{start:function(){var e=t(this).data("ui-draggable");e.scrollParent[0]!==document&&"HTML"!==e.scrollParent[0].tagName&&(e.overflowOffset=e.scrollParent.offset())},drag:function(e){var i=t(this).data("ui-draggable"),n=i.options,s=!1;i.scrollParent[0]!==document&&"HTML"!==i.scrollParent[0].tagName?(n.axis&&"x"===n.axis||(i.overflowOffset.top+i.scrollParent[0].offsetHeight-e.pageY<n.scrollSensitivity?i.scrollParent[0].scrollTop=s=i.scrollParent[0].scrollTop+n.scrollSpeed:e.pageY-i.overflowOffset.top<n.scrollSensitivity&&(i.scrollParent[0].scrollTop=s=i.scrollParent[0].scrollTop-n.scrollSpeed)),n.axis&&"y"===n.axis||(i.overflowOffset.left+i.scrollParent[0].offsetWidth-e.pageX<n.scrollSensitivity?i.scrollParent[0].scrollLeft=s=i.scrollParent[0].scrollLeft+n.scrollSpeed:e.pageX-i.overflowOffset.left<n.scrollSensitivity&&(i.scrollParent[0].scrollLeft=s=i.scrollParent[0].scrollLeft-n.scrollSpeed))):(n.axis&&"x"===n.axis||(e.pageY-t(document).scrollTop()<n.scrollSensitivity?s=t(document).scrollTop(t(document).scrollTop()-n.scrollSpeed):t(window).height()-(e.pageY-t(document).scrollTop())<n.scrollSensitivity&&(s=t(document).scrollTop(t(document).scrollTop()+n.scrollSpeed))),n.axis&&"y"===n.axis||(e.pageX-t(document).scrollLeft()<n.scrollSensitivity?s=t(document).scrollLeft(t(document).scrollLeft()-n.scrollSpeed):t(window).width()-(e.pageX-t(document).scrollLeft())<n.scrollSensitivity&&(s=t(document).scrollLeft(t(document).scrollLeft()+n.scrollSpeed)))),s!==!1&&t.ui.ddmanager&&!n.dropBehaviour&&t.ui.ddmanager.prepareOffsets(i,e)}}),t.ui.plugin.add("draggable","snap",{start:function(){var e=t(this).data("ui-draggable"),i=e.options;e.snapElements=[],t(i.snap.constructor!==String?i.snap.items||":data(ui-draggable)":i.snap).each(function(){var i=t(this),n=i.offset();this!==e.element[0]&&e.snapElements.push({item:this,width:i.outerWidth(),height:i.outerHeight(),top:n.top,left:n.left})})},drag:function(e,i){var n,s,o,r,a,l,c,d,h,u,f=t(this).data("ui-draggable"),p=f.options,m=p.snapTolerance,g=i.offset.left,v=g+f.helperProportions.width,y=i.offset.top,b=y+f.helperProportions.height;for(h=f.snapElements.length-1;h>=0;h--)a=f.snapElements[h].left,l=a+f.snapElements[h].width,c=f.snapElements[h].top,d=c+f.snapElements[h].height,a-m>v||g>l+m||c-m>b||y>d+m||!t.contains(f.snapElements[h].item.ownerDocument,f.snapElements[h].item)?(f.snapElements[h].snapping&&f.options.snap.release&&f.options.snap.release.call(f.element,e,t.extend(f._uiHash(),{snapItem:f.snapElements[h].item})),f.snapElements[h].snapping=!1):("inner"!==p.snapMode&&(n=m>=Math.abs(c-b),s=m>=Math.abs(d-y),o=m>=Math.abs(a-v),r=m>=Math.abs(l-g),n&&(i.position.top=f._convertPositionTo("relative",{top:c-f.helperProportions.height,left:0}).top-f.margins.top),s&&(i.position.top=f._convertPositionTo("relative",{top:d,left:0}).top-f.margins.top),o&&(i.position.left=f._convertPositionTo("relative",{top:0,left:a-f.helperProportions.width}).left-f.margins.left),r&&(i.position.left=f._convertPositionTo("relative",{top:0,left:l}).left-f.margins.left)),u=n||s||o||r,"outer"!==p.snapMode&&(n=m>=Math.abs(c-y),s=m>=Math.abs(d-b),o=m>=Math.abs(a-g),r=m>=Math.abs(l-v),n&&(i.position.top=f._convertPositionTo("relative",{top:c,left:0}).top-f.margins.top),s&&(i.position.top=f._convertPositionTo("relative",{top:d-f.helperProportions.height,left:0}).top-f.margins.top),o&&(i.position.left=f._convertPositionTo("relative",{top:0,left:a}).left-f.margins.left),r&&(i.position.left=f._convertPositionTo("relative",{top:0,left:l-f.helperProportions.width}).left-f.margins.left)),!f.snapElements[h].snapping&&(n||s||o||r||u)&&f.options.snap.snap&&f.options.snap.snap.call(f.element,e,t.extend(f._uiHash(),{snapItem:f.snapElements[h].item})),f.snapElements[h].snapping=n||s||o||r||u)}}),t.ui.plugin.add("draggable","stack",{start:function(){var e,i=this.data("ui-draggable").options,n=t.makeArray(t(i.stack)).sort(function(e,i){return(parseInt(t(e).css("zIndex"),10)||0)-(parseInt(t(i).css("zIndex"),10)||0)});n.length&&(e=parseInt(t(n[0]).css("zIndex"),10)||0,t(n).each(function(i){t(this).css("zIndex",e+i)}),this.css("zIndex",e+n.length))}}),t.ui.plugin.add("draggable","zIndex",{start:function(e,i){var n=t(i.helper),s=t(this).data("ui-draggable").options;n.css("zIndex")&&(s._zIndex=n.css("zIndex")),n.css("zIndex",s.zIndex)},stop:function(e,i){var n=t(this).data("ui-draggable").options;n._zIndex&&t(i.helper).css("zIndex",n._zIndex)}})}(jQuery),function(t){function e(t,e,i){return t>e&&e+i>t}t.widget("ui.droppable",{version:"1.10.3",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var e=this.options,i=e.accept;this.isover=!1,this.isout=!0,this.accept=t.isFunction(i)?i:function(t){return t.is(i)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},t.ui.ddmanager.droppables[e.scope]=t.ui.ddmanager.droppables[e.scope]||[],t.ui.ddmanager.droppables[e.scope].push(this),e.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){for(var e=0,i=t.ui.ddmanager.droppables[this.options.scope];i.length>e;e++)i[e]===this&&i.splice(e,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(e,i){"accept"===e&&(this.accept=t.isFunction(i)?i:function(t){return t.is(i)}),t.Widget.prototype._setOption.apply(this,arguments)},_activate:function(e){var i=t.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),i&&this._trigger("activate",e,this.ui(i));
},_deactivate:function(e){var i=t.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),i&&this._trigger("deactivate",e,this.ui(i))},_over:function(e){var i=t.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",e,this.ui(i)))},_out:function(e){var i=t.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",e,this.ui(i)))},_drop:function(e,i){var n=i||t.ui.ddmanager.current,s=!1;return!(!n||(n.currentItem||n.element)[0]===this.element[0])&&(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var e=t.data(this,"ui-droppable");return e.options.greedy&&!e.options.disabled&&e.options.scope===n.options.scope&&e.accept.call(e.element[0],n.currentItem||n.element)&&t.ui.intersect(n,t.extend(e,{offset:e.element.offset()}),e.options.tolerance)?(s=!0,!1):void 0}),!s&&(!!this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",e,this.ui(n)),this.element)))},ui:function(t){return{draggable:t.currentItem||t.element,helper:t.helper,position:t.position,offset:t.positionAbs}}}),t.ui.intersect=function(t,i,n){if(!i.offset)return!1;var s,o,r=(t.positionAbs||t.position.absolute).left,a=r+t.helperProportions.width,l=(t.positionAbs||t.position.absolute).top,c=l+t.helperProportions.height,d=i.offset.left,h=d+i.proportions.width,u=i.offset.top,f=u+i.proportions.height;switch(n){case"fit":return r>=d&&h>=a&&l>=u&&f>=c;case"intersect":return r+t.helperProportions.width/2>d&&h>a-t.helperProportions.width/2&&l+t.helperProportions.height/2>u&&f>c-t.helperProportions.height/2;case"pointer":return s=(t.positionAbs||t.position.absolute).left+(t.clickOffset||t.offset.click).left,o=(t.positionAbs||t.position.absolute).top+(t.clickOffset||t.offset.click).top,e(o,u,i.proportions.height)&&e(s,d,i.proportions.width);case"touch":return(l>=u&&f>=l||c>=u&&f>=c||u>l&&c>f)&&(r>=d&&h>=r||a>=d&&h>=a||d>r&&a>h);default:return!1}},t.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(e,i){var n,s,o=t.ui.ddmanager.droppables[e.options.scope]||[],r=i?i.type:null,a=(e.currentItem||e.element).find(":data(ui-droppable)").addBack();t:for(n=0;o.length>n;n++)if(!(o[n].options.disabled||e&&!o[n].accept.call(o[n].element[0],e.currentItem||e.element))){for(s=0;a.length>s;s++)if(a[s]===o[n].element[0]){o[n].proportions.height=0;continue t}o[n].visible="none"!==o[n].element.css("display"),o[n].visible&&("mousedown"===r&&o[n]._activate.call(o[n],i),o[n].offset=o[n].element.offset(),o[n].proportions={width:o[n].element[0].offsetWidth,height:o[n].element[0].offsetHeight})}},drop:function(e,i){var n=!1;return t.each((t.ui.ddmanager.droppables[e.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&t.ui.intersect(e,this,this.options.tolerance)&&(n=this._drop.call(this,i)||n),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],e.currentItem||e.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,i)))}),n},dragStart:function(e,i){e.element.parentsUntil("body").bind("scroll.droppable",function(){e.options.refreshPositions||t.ui.ddmanager.prepareOffsets(e,i)})},drag:function(e,i){e.options.refreshPositions&&t.ui.ddmanager.prepareOffsets(e,i),t.each(t.ui.ddmanager.droppables[e.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var n,s,o,r=t.ui.intersect(e,this,this.options.tolerance),a=!r&&this.isover?"isout":r&&!this.isover?"isover":null;a&&(this.options.greedy&&(s=this.options.scope,o=this.element.parents(":data(ui-droppable)").filter(function(){return t.data(this,"ui-droppable").options.scope===s}),o.length&&(n=t.data(o[0],"ui-droppable"),n.greedyChild="isover"===a)),n&&"isover"===a&&(n.isover=!1,n.isout=!0,n._out.call(n,i)),this[a]=!0,this["isout"===a?"isover":"isout"]=!1,this["isover"===a?"_over":"_out"].call(this,i),n&&"isout"===a&&(n.isout=!1,n.isover=!0,n._over.call(n,i)))}})},dragStop:function(e,i){e.element.parentsUntil("body").unbind("scroll.droppable"),e.options.refreshPositions||t.ui.ddmanager.prepareOffsets(e,i)}}}(jQuery),function(t){function e(t){return parseInt(t,10)||0}function i(t){return!isNaN(parseInt(t,10))}t.widget("ui.resizable",t.ui.mouse,{version:"1.10.3",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_create:function(){var e,i,n,s,o,r=this,a=this.options;if(this.element.addClass("ui-resizable"),t.extend(this,{_aspectRatio:!!a.aspectRatio,aspectRatio:a.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:a.helper||a.ghost||a.animate?a.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(t("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.data("ui-resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=a.handles||(t(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),e=this.handles.split(","),this.handles={},i=0;e.length>i;i++)n=t.trim(e[i]),o="ui-resizable-"+n,s=t("<div class='ui-resizable-handle "+o+"'></div>"),s.css({zIndex:a.zIndex}),"se"===n&&s.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[n]=".ui-resizable-"+n,this.element.append(s);this._renderAxis=function(e){var i,n,s,o;e=e||this.element;for(i in this.handles)this.handles[i].constructor===String&&(this.handles[i]=t(this.handles[i],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(n=t(this.handles[i],this.element),o=/sw|ne|nw|se|n|s/.test(i)?n.outerHeight():n.outerWidth(),s=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join(""),e.css(s,o),this._proportionallyResize()),t(this.handles[i]).length},this._renderAxis(this.element),this._handles=t(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){r.resizing||(this.className&&(s=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),r.axis=s&&s[1]?s[1]:"se")}),a.autoHide&&(this._handles.hide(),t(this.element).addClass("ui-resizable-autohide").mouseenter(function(){a.disabled||(t(this).removeClass("ui-resizable-autohide"),r._handles.show())}).mouseleave(function(){a.disabled||r.resizing||(t(this).addClass("ui-resizable-autohide"),r._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var e,i=function(e){t(e).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(i(this.element),e=this.element,this.originalElement.css({position:e.css("position"),width:e.outerWidth(),height:e.outerHeight(),top:e.css("top"),left:e.css("left")}).insertAfter(e),e.remove()),this.originalElement.css("resize",this.originalResizeStyle),i(this.originalElement),this},_mouseCapture:function(e){var i,n,s=!1;for(i in this.handles)n=t(this.handles[i])[0],(n===e.target||t.contains(n,e.target))&&(s=!0);return!this.options.disabled&&s},_mouseStart:function(i){var n,s,o,r=this.options,a=this.element.position(),l=this.element;return this.resizing=!0,/absolute/.test(l.css("position"))?l.css({position:"absolute",top:l.css("top"),left:l.css("left")}):l.is(".ui-draggable")&&l.css({position:"absolute",top:a.top,left:a.left}),this._renderProxy(),n=e(this.helper.css("left")),s=e(this.helper.css("top")),r.containment&&(n+=t(r.containment).scrollLeft()||0,s+=t(r.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:n,top:s},this.size=this._helper?{width:l.outerWidth(),height:l.outerHeight()}:{width:l.width(),height:l.height()},this.originalSize=this._helper?{width:l.outerWidth(),height:l.outerHeight()}:{width:l.width(),height:l.height()},this.originalPosition={left:n,top:s},this.sizeDiff={width:l.outerWidth()-l.width(),height:l.outerHeight()-l.height()},this.originalMousePosition={left:i.pageX,top:i.pageY},this.aspectRatio="number"==typeof r.aspectRatio?r.aspectRatio:this.originalSize.width/this.originalSize.height||1,o=t(".ui-resizable-"+this.axis).css("cursor"),t("body").css("cursor","auto"===o?this.axis+"-resize":o),l.addClass("ui-resizable-resizing"),this._propagate("start",i),!0},_mouseDrag:function(e){var i,n=this.helper,s={},o=this.originalMousePosition,r=this.axis,a=this.position.top,l=this.position.left,c=this.size.width,d=this.size.height,h=e.pageX-o.left||0,u=e.pageY-o.top||0,f=this._change[r];return!!f&&(i=f.apply(this,[e,h,u]),this._updateVirtualBoundaries(e.shiftKey),(this._aspectRatio||e.shiftKey)&&(i=this._updateRatio(i,e)),i=this._respectSize(i,e),this._updateCache(i),this._propagate("resize",e),this.position.top!==a&&(s.top=this.position.top+"px"),this.position.left!==l&&(s.left=this.position.left+"px"),this.size.width!==c&&(s.width=this.size.width+"px"),this.size.height!==d&&(s.height=this.size.height+"px"),n.css(s),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),t.isEmptyObject(s)||this._trigger("resize",e,this.ui()),!1)},_mouseStop:function(e){this.resizing=!1;var i,n,s,o,r,a,l,c=this.options,d=this;return this._helper&&(i=this._proportionallyResizeElements,n=i.length&&/textarea/i.test(i[0].nodeName),s=n&&t.ui.hasScroll(i[0],"left")?0:d.sizeDiff.height,o=n?0:d.sizeDiff.width,r={width:d.helper.width()-o,height:d.helper.height()-s},a=parseInt(d.element.css("left"),10)+(d.position.left-d.originalPosition.left)||null,l=parseInt(d.element.css("top"),10)+(d.position.top-d.originalPosition.top)||null,c.animate||this.element.css(t.extend(r,{top:l,left:a})),d.helper.height(d.size.height),d.helper.width(d.size.width),this._helper&&!c.animate&&this._proportionallyResize()),t("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",e),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(t){var e,n,s,o,r,a=this.options;r={minWidth:i(a.minWidth)?a.minWidth:0,maxWidth:i(a.maxWidth)?a.maxWidth:1/0,minHeight:i(a.minHeight)?a.minHeight:0,maxHeight:i(a.maxHeight)?a.maxHeight:1/0},(this._aspectRatio||t)&&(e=r.minHeight*this.aspectRatio,s=r.minWidth/this.aspectRatio,n=r.maxHeight*this.aspectRatio,o=r.maxWidth/this.aspectRatio,e>r.minWidth&&(r.minWidth=e),s>r.minHeight&&(r.minHeight=s),r.maxWidth>n&&(r.maxWidth=n),r.maxHeight>o&&(r.maxHeight=o)),this._vBoundaries=r},_updateCache:function(t){this.offset=this.helper.offset(),i(t.left)&&(this.position.left=t.left),i(t.top)&&(this.position.top=t.top),i(t.height)&&(this.size.height=t.height),i(t.width)&&(this.size.width=t.width)},_updateRatio:function(t){var e=this.position,n=this.size,s=this.axis;return i(t.height)?t.width=t.height*this.aspectRatio:i(t.width)&&(t.height=t.width/this.aspectRatio),"sw"===s&&(t.left=e.left+(n.width-t.width),t.top=null),"nw"===s&&(t.top=e.top+(n.height-t.height),t.left=e.left+(n.width-t.width)),t},_respectSize:function(t){var e=this._vBoundaries,n=this.axis,s=i(t.width)&&e.maxWidth&&e.maxWidth<t.width,o=i(t.height)&&e.maxHeight&&e.maxHeight<t.height,r=i(t.width)&&e.minWidth&&e.minWidth>t.width,a=i(t.height)&&e.minHeight&&e.minHeight>t.height,l=this.originalPosition.left+this.originalSize.width,c=this.position.top+this.size.height,d=/sw|nw|w/.test(n),h=/nw|ne|n/.test(n);return r&&(t.width=e.minWidth),a&&(t.height=e.minHeight),s&&(t.width=e.maxWidth),o&&(t.height=e.maxHeight),r&&d&&(t.left=l-e.minWidth),s&&d&&(t.left=l-e.maxWidth),a&&h&&(t.top=c-e.minHeight),o&&h&&(t.top=c-e.maxHeight),t.width||t.height||t.left||!t.top?t.width||t.height||t.top||!t.left||(t.left=null):t.top=null,t},_proportionallyResize:function(){if(this._proportionallyResizeElements.length){var t,e,i,n,s,o=this.helper||this.element;for(t=0;this._proportionallyResizeElements.length>t;t++){if(s=this._proportionallyResizeElements[t],!this.borderDif)for(this.borderDif=[],i=[s.css("borderTopWidth"),s.css("borderRightWidth"),s.css("borderBottomWidth"),s.css("borderLeftWidth")],n=[s.css("paddingTop"),s.css("paddingRight"),s.css("paddingBottom"),s.css("paddingLeft")],e=0;i.length>e;e++)this.borderDif[e]=(parseInt(i[e],10)||0)+(parseInt(n[e],10)||0);s.css({height:o.height()-this.borderDif[0]-this.borderDif[2]||0,width:o.width()-this.borderDif[1]-this.borderDif[3]||0})}}},_renderProxy:function(){var e=this.element,i=this.options;this.elementOffset=e.offset(),this._helper?(this.helper=this.helper||t("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++i.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(t,e){return{width:this.originalSize.width+e}},w:function(t,e){var i=this.originalSize,n=this.originalPosition;return{left:n.left+e,width:i.width-e}},n:function(t,e,i){var n=this.originalSize,s=this.originalPosition;return{top:s.top+i,height:n.height-i}},s:function(t,e,i){return{height:this.originalSize.height+i}},se:function(e,i,n){return t.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[e,i,n]))},sw:function(e,i,n){return t.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[e,i,n]))},ne:function(e,i,n){return t.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[e,i,n]))},nw:function(e,i,n){return t.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[e,i,n]))}},_propagate:function(e,i){t.ui.plugin.call(this,e,[i,this.ui()]),"resize"!==e&&this._trigger(e,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),t.ui.plugin.add("resizable","animate",{stop:function(e){var i=t(this).data("ui-resizable"),n=i.options,s=i._proportionallyResizeElements,o=s.length&&/textarea/i.test(s[0].nodeName),r=o&&t.ui.hasScroll(s[0],"left")?0:i.sizeDiff.height,a=o?0:i.sizeDiff.width,l={width:i.size.width-a,height:i.size.height-r},c=parseInt(i.element.css("left"),10)+(i.position.left-i.originalPosition.left)||null,d=parseInt(i.element.css("top"),10)+(i.position.top-i.originalPosition.top)||null;i.element.animate(t.extend(l,d&&c?{top:d,left:c}:{}),{duration:n.animateDuration,easing:n.animateEasing,step:function(){var n={width:parseInt(i.element.css("width"),10),height:parseInt(i.element.css("height"),10),top:parseInt(i.element.css("top"),10),left:parseInt(i.element.css("left"),10)};s&&s.length&&t(s[0]).css({width:n.width,height:n.height}),i._updateCache(n),i._propagate("resize",e)}})}}),t.ui.plugin.add("resizable","containment",{start:function(){var i,n,s,o,r,a,l,c=t(this).data("ui-resizable"),d=c.options,h=c.element,u=d.containment,f=u instanceof t?u.get(0):/parent/.test(u)?h.parent().get(0):u;f&&(c.containerElement=t(f),/document/.test(u)||u===document?(c.containerOffset={left:0,top:0},c.containerPosition={left:0,top:0},c.parentData={element:t(document),left:0,top:0,width:t(document).width(),height:t(document).height()||document.body.parentNode.scrollHeight}):(i=t(f),n=[],t(["Top","Right","Left","Bottom"]).each(function(t,s){n[t]=e(i.css("padding"+s))}),c.containerOffset=i.offset(),c.containerPosition=i.position(),c.containerSize={height:i.innerHeight()-n[3],width:i.innerWidth()-n[1]},s=c.containerOffset,o=c.containerSize.height,r=c.containerSize.width,a=t.ui.hasScroll(f,"left")?f.scrollWidth:r,l=t.ui.hasScroll(f)?f.scrollHeight:o,c.parentData={element:f,left:s.left,top:s.top,width:a,height:l}))},resize:function(e){var i,n,s,o,r=t(this).data("ui-resizable"),a=r.options,l=r.containerOffset,c=r.position,d=r._aspectRatio||e.shiftKey,h={top:0,left:0},u=r.containerElement;u[0]!==document&&/static/.test(u.css("position"))&&(h=l),c.left<(r._helper?l.left:0)&&(r.size.width=r.size.width+(r._helper?r.position.left-l.left:r.position.left-h.left),d&&(r.size.height=r.size.width/r.aspectRatio),r.position.left=a.helper?l.left:0),c.top<(r._helper?l.top:0)&&(r.size.height=r.size.height+(r._helper?r.position.top-l.top:r.position.top),d&&(r.size.width=r.size.height*r.aspectRatio),r.position.top=r._helper?l.top:0),r.offset.left=r.parentData.left+r.position.left,r.offset.top=r.parentData.top+r.position.top,i=Math.abs((r._helper?r.offset.left-h.left:r.offset.left-h.left)+r.sizeDiff.width),n=Math.abs((r._helper?r.offset.top-h.top:r.offset.top-l.top)+r.sizeDiff.height),s=r.containerElement.get(0)===r.element.parent().get(0),o=/relative|absolute/.test(r.containerElement.css("position")),s&&o&&(i-=r.parentData.left),i+r.size.width>=r.parentData.width&&(r.size.width=r.parentData.width-i,d&&(r.size.height=r.size.width/r.aspectRatio)),n+r.size.height>=r.parentData.height&&(r.size.height=r.parentData.height-n,d&&(r.size.width=r.size.height*r.aspectRatio))},stop:function(){var e=t(this).data("ui-resizable"),i=e.options,n=e.containerOffset,s=e.containerPosition,o=e.containerElement,r=t(e.helper),a=r.offset(),l=r.outerWidth()-e.sizeDiff.width,c=r.outerHeight()-e.sizeDiff.height;e._helper&&!i.animate&&/relative/.test(o.css("position"))&&t(this).css({left:a.left-s.left-n.left,width:l,height:c}),e._helper&&!i.animate&&/static/.test(o.css("position"))&&t(this).css({left:a.left-s.left-n.left,width:l,height:c})}}),t.ui.plugin.add("resizable","alsoResize",{start:function(){var e=t(this).data("ui-resizable"),i=e.options,n=function(e){t(e).each(function(){var e=t(this);e.data("ui-resizable-alsoresize",{width:parseInt(e.width(),10),height:parseInt(e.height(),10),left:parseInt(e.css("left"),10),top:parseInt(e.css("top"),10)})})};"object"!=typeof i.alsoResize||i.alsoResize.parentNode?n(i.alsoResize):i.alsoResize.length?(i.alsoResize=i.alsoResize[0],n(i.alsoResize)):t.each(i.alsoResize,function(t){n(t)})},resize:function(e,i){var n=t(this).data("ui-resizable"),s=n.options,o=n.originalSize,r=n.originalPosition,a={height:n.size.height-o.height||0,width:n.size.width-o.width||0,top:n.position.top-r.top||0,left:n.position.left-r.left||0},l=function(e,n){t(e).each(function(){var e=t(this),s=t(this).data("ui-resizable-alsoresize"),o={},r=n&&n.length?n:e.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];t.each(r,function(t,e){var i=(s[e]||0)+(a[e]||0);i&&i>=0&&(o[e]=i||null)}),e.css(o)})};"object"!=typeof s.alsoResize||s.alsoResize.nodeType?l(s.alsoResize):t.each(s.alsoResize,function(t,e){l(t,e)})},stop:function(){t(this).removeData("resizable-alsoresize")}}),t.ui.plugin.add("resizable","ghost",{start:function(){var e=t(this).data("ui-resizable"),i=e.options,n=e.size;e.ghost=e.originalElement.clone(),e.ghost.css({opacity:.25,display:"block",position:"relative",height:n.height,width:n.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof i.ghost?i.ghost:""),e.ghost.appendTo(e.helper)},resize:function(){var e=t(this).data("ui-resizable");e.ghost&&e.ghost.css({position:"relative",height:e.size.height,width:e.size.width})},stop:function(){var e=t(this).data("ui-resizable");e.ghost&&e.helper&&e.helper.get(0).removeChild(e.ghost.get(0))}}),t.ui.plugin.add("resizable","grid",{resize:function(){var e=t(this).data("ui-resizable"),i=e.options,n=e.size,s=e.originalSize,o=e.originalPosition,r=e.axis,a="number"==typeof i.grid?[i.grid,i.grid]:i.grid,l=a[0]||1,c=a[1]||1,d=Math.round((n.width-s.width)/l)*l,h=Math.round((n.height-s.height)/c)*c,u=s.width+d,f=s.height+h,p=i.maxWidth&&u>i.maxWidth,m=i.maxHeight&&f>i.maxHeight,g=i.minWidth&&i.minWidth>u,v=i.minHeight&&i.minHeight>f;i.grid=a,g&&(u+=l),v&&(f+=c),p&&(u-=l),m&&(f-=c),/^(se|s|e)$/.test(r)?(e.size.width=u,e.size.height=f):/^(ne)$/.test(r)?(e.size.width=u,e.size.height=f,e.position.top=o.top-h):/^(sw)$/.test(r)?(e.size.width=u,e.size.height=f,e.position.left=o.left-d):(e.size.width=u,e.size.height=f,e.position.top=o.top-h,e.position.left=o.left-d)}})}(jQuery),function(t){t.widget("ui.selectable",t.ui.mouse,{version:"1.10.3",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var e,i=this;this.element.addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){e=t(i.options.filter,i.element[0]),e.addClass("ui-selectee"),e.each(function(){var e=t(this),i=e.offset();t.data(this,"selectable-item",{element:this,$element:e,left:i.left,top:i.top,right:i.left+e.outerWidth(),bottom:i.top+e.outerHeight(),startselected:!1,selected:e.hasClass("ui-selected"),selecting:e.hasClass("ui-selecting"),unselecting:e.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=e.addClass("ui-selectee"),this._mouseInit(),this.helper=t("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(e){var i=this,n=this.options;this.opos=[e.pageX,e.pageY],this.options.disabled||(this.selectees=t(n.filter,this.element[0]),this._trigger("start",e),t(n.appendTo).append(this.helper),this.helper.css({left:e.pageX,top:e.pageY,width:0,height:0}),n.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var n=t.data(this,"selectable-item");n.startselected=!0,e.metaKey||e.ctrlKey||(n.$element.removeClass("ui-selected"),n.selected=!1,n.$element.addClass("ui-unselecting"),n.unselecting=!0,i._trigger("unselecting",e,{unselecting:n.element}))}),t(e.target).parents().addBack().each(function(){var n,s=t.data(this,"selectable-item");return s?(n=!e.metaKey&&!e.ctrlKey||!s.$element.hasClass("ui-selected"),s.$element.removeClass(n?"ui-unselecting":"ui-selected").addClass(n?"ui-selecting":"ui-unselecting"),s.unselecting=!n,s.selecting=n,s.selected=n,n?i._trigger("selecting",e,{selecting:s.element}):i._trigger("unselecting",e,{unselecting:s.element}),!1):void 0}))},_mouseDrag:function(e){if(this.dragged=!0,!this.options.disabled){var i,n=this,s=this.options,o=this.opos[0],r=this.opos[1],a=e.pageX,l=e.pageY;return o>a&&(i=a,a=o,o=i),r>l&&(i=l,l=r,r=i),this.helper.css({left:o,top:r,width:a-o,height:l-r}),this.selectees.each(function(){var i=t.data(this,"selectable-item"),c=!1;i&&i.element!==n.element[0]&&("touch"===s.tolerance?c=!(i.left>a||o>i.right||i.top>l||r>i.bottom):"fit"===s.tolerance&&(c=i.left>o&&a>i.right&&i.top>r&&l>i.bottom),c?(i.selected&&(i.$element.removeClass("ui-selected"),i.selected=!1),i.unselecting&&(i.$element.removeClass("ui-unselecting"),i.unselecting=!1),i.selecting||(i.$element.addClass("ui-selecting"),i.selecting=!0,n._trigger("selecting",e,{selecting:i.element}))):(i.selecting&&((e.metaKey||e.ctrlKey)&&i.startselected?(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.$element.addClass("ui-selected"),i.selected=!0):(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.startselected&&(i.$element.addClass("ui-unselecting"),i.unselecting=!0),n._trigger("unselecting",e,{unselecting:i.element}))),i.selected&&(e.metaKey||e.ctrlKey||i.startselected||(i.$element.removeClass("ui-selected"),i.selected=!1,i.$element.addClass("ui-unselecting"),i.unselecting=!0,n._trigger("unselecting",e,{unselecting:i.element})))))}),!1}},_mouseStop:function(e){var i=this;return this.dragged=!1,t(".ui-unselecting",this.element[0]).each(function(){var n=t.data(this,"selectable-item");n.$element.removeClass("ui-unselecting"),n.unselecting=!1,n.startselected=!1,i._trigger("unselected",e,{unselected:n.element})}),t(".ui-selecting",this.element[0]).each(function(){var n=t.data(this,"selectable-item");n.$element.removeClass("ui-selecting").addClass("ui-selected"),n.selecting=!1,n.selected=!0,n.startselected=!0,i._trigger("selected",e,{selected:n.element})}),this._trigger("stop",e),this.helper.remove(),!1}})}(jQuery),function(t){function e(t,e,i){return t>e&&e+i>t}function i(t){return/left|right/.test(t.css("float"))||/inline|table-cell/.test(t.css("display"))}t.widget("ui.sortable",t.ui.mouse,{version:"1.10.3",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_create:function(){var t=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=!!this.items.length&&("x"===t.axis||i(this.items[0].item)),this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var t=this.items.length-1;t>=0;t--)this.items[t].item.removeData(this.widgetName+"-item");return this},_setOption:function(e,i){"disabled"===e?(this.options[e]=i,this.widget().toggleClass("ui-sortable-disabled",!!i)):t.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(e,i){var n=null,s=!1,o=this;return!this.reverting&&(!this.options.disabled&&"static"!==this.options.type&&(this._refreshItems(e),t(e.target).parents().each(function(){return t.data(this,o.widgetName+"-item")===o?(n=t(this),!1):void 0}),t.data(e.target,o.widgetName+"-item")===o&&(n=t(e.target)),!!n&&(!(this.options.handle&&!i&&(t(this.options.handle,n).find("*").addBack().each(function(){this===e.target&&(s=!0)}),!s))&&(this.currentItem=n,this._removeCurrentsFromItems(),!0))))},_mouseStart:function(e,i,n){var s,o,r=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(e),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},t.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(e),this.originalPageX=e.pageX,this.originalPageY=e.pageY,r.cursorAt&&this._adjustOffsetFromHelper(r.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),r.containment&&this._setContainment(),r.cursor&&"auto"!==r.cursor&&(o=this.document.find("body"),this.storedCursor=o.css("cursor"),o.css("cursor",r.cursor),this.storedStylesheet=t("<style>*{ cursor: "+r.cursor+" !important; }</style>").appendTo(o)),r.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",r.opacity)),r.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",r.zIndex)),this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",e,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!n)for(s=this.containers.length-1;s>=0;s--)this.containers[s]._trigger("activate",e,this._uiHash(this));return t.ui.ddmanager&&(t.ui.ddmanager.current=this),t.ui.ddmanager&&!r.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(e),!0},_mouseDrag:function(e){var i,n,s,o,r=this.options,a=!1;for(this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-e.pageY<r.scrollSensitivity?this.scrollParent[0].scrollTop=a=this.scrollParent[0].scrollTop+r.scrollSpeed:e.pageY-this.overflowOffset.top<r.scrollSensitivity&&(this.scrollParent[0].scrollTop=a=this.scrollParent[0].scrollTop-r.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-e.pageX<r.scrollSensitivity?this.scrollParent[0].scrollLeft=a=this.scrollParent[0].scrollLeft+r.scrollSpeed:e.pageX-this.overflowOffset.left<r.scrollSensitivity&&(this.scrollParent[0].scrollLeft=a=this.scrollParent[0].scrollLeft-r.scrollSpeed)):(e.pageY-t(document).scrollTop()<r.scrollSensitivity?a=t(document).scrollTop(t(document).scrollTop()-r.scrollSpeed):t(window).height()-(e.pageY-t(document).scrollTop())<r.scrollSensitivity&&(a=t(document).scrollTop(t(document).scrollTop()+r.scrollSpeed)),e.pageX-t(document).scrollLeft()<r.scrollSensitivity?a=t(document).scrollLeft(t(document).scrollLeft()-r.scrollSpeed):t(window).width()-(e.pageX-t(document).scrollLeft())<r.scrollSensitivity&&(a=t(document).scrollLeft(t(document).scrollLeft()+r.scrollSpeed))),a!==!1&&t.ui.ddmanager&&!r.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),i=this.items.length-1;i>=0;i--)if(n=this.items[i],s=n.item[0],o=this._intersectsWithPointer(n),o&&n.instance===this.currentContainer&&s!==this.currentItem[0]&&this.placeholder[1===o?"next":"prev"]()[0]!==s&&!t.contains(this.placeholder[0],s)&&("semi-dynamic"!==this.options.type||!t.contains(this.element[0],s))){if(this.direction=1===o?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(n))break;this._rearrange(e,n),this._trigger("change",e,this._uiHash());break}return this._contactContainers(e),t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),this._trigger("sort",e,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(e,i){if(e){if(t.ui.ddmanager&&!this.options.dropBehaviour&&t.ui.ddmanager.drop(this,e),this.options.revert){var n=this,s=this.placeholder.offset(),o=this.options.axis,r={};o&&"x"!==o||(r.left=s.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft)),o&&"y"!==o||(r.top=s.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,t(this.helper).animate(r,parseInt(this.options.revert,10)||500,function(){n._clear(e)})}else this._clear(e,i);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var e=this.containers.length-1;e>=0;e--)this.containers[e]._trigger("deactivate",null,this._uiHash(this)),this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",null,this._uiHash(this)),
this.containers[e].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),t.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?t(this.domPosition.prev).after(this.currentItem):t(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(e){var i=this._getItemsAsjQuery(e&&e.connected),n=[];return e=e||{},t(i).each(function(){var i=(t(e.item||this).attr(e.attribute||"id")||"").match(e.expression||/(.+)[\-=_](.+)/);i&&n.push((e.key||i[1]+"[]")+"="+(e.key&&e.expression?i[1]:i[2]))}),!n.length&&e.key&&n.push(e.key+"="),n.join("&")},toArray:function(e){var i=this._getItemsAsjQuery(e&&e.connected),n=[];return e=e||{},i.each(function(){n.push(t(e.item||this).attr(e.attribute||"id")||"")}),n},_intersectsWith:function(t){var e=this.positionAbs.left,i=e+this.helperProportions.width,n=this.positionAbs.top,s=n+this.helperProportions.height,o=t.left,r=o+t.width,a=t.top,l=a+t.height,c=this.offset.click.top,d=this.offset.click.left,h="x"===this.options.axis||n+c>a&&l>n+c,u="y"===this.options.axis||e+d>o&&r>e+d,f=h&&u;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>t[this.floating?"width":"height"]?f:e+this.helperProportions.width/2>o&&r>i-this.helperProportions.width/2&&n+this.helperProportions.height/2>a&&l>s-this.helperProportions.height/2},_intersectsWithPointer:function(t){var i="x"===this.options.axis||e(this.positionAbs.top+this.offset.click.top,t.top,t.height),n="y"===this.options.axis||e(this.positionAbs.left+this.offset.click.left,t.left,t.width),s=i&&n,o=this._getDragVerticalDirection(),r=this._getDragHorizontalDirection();return!!s&&(this.floating?r&&"right"===r||"down"===o?2:1:o&&("down"===o?2:1))},_intersectsWithSides:function(t){var i=e(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),n=e(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),s=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return this.floating&&o?"right"===o&&n||"left"===o&&!n:s&&("down"===s&&i||"up"===s&&!i)},_getDragVerticalDirection:function(){var t=this.positionAbs.top-this.lastPositionAbs.top;return 0!==t&&(t>0?"down":"up")},_getDragHorizontalDirection:function(){var t=this.positionAbs.left-this.lastPositionAbs.left;return 0!==t&&(t>0?"right":"left")},refresh:function(t){return this._refreshItems(t),this.refreshPositions(),this},_connectWith:function(){var t=this.options;return t.connectWith.constructor===String?[t.connectWith]:t.connectWith},_getItemsAsjQuery:function(e){var i,n,s,o,r=[],a=[],l=this._connectWith();if(l&&e)for(i=l.length-1;i>=0;i--)for(s=t(l[i]),n=s.length-1;n>=0;n--)o=t.data(s[n],this.widgetFullName),o&&o!==this&&!o.options.disabled&&a.push([t.isFunction(o.options.items)?o.options.items.call(o.element):t(o.options.items,o.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),o]);for(a.push([t.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):t(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),i=a.length-1;i>=0;i--)a[i][0].each(function(){r.push(this)});return t(r)},_removeCurrentsFromItems:function(){var e=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=t.grep(this.items,function(t){for(var i=0;e.length>i;i++)if(e[i]===t.item[0])return!1;return!0})},_refreshItems:function(e){this.items=[],this.containers=[this];var i,n,s,o,r,a,l,c,d=this.items,h=[[t.isFunction(this.options.items)?this.options.items.call(this.element[0],e,{item:this.currentItem}):t(this.options.items,this.element),this]],u=this._connectWith();if(u&&this.ready)for(i=u.length-1;i>=0;i--)for(s=t(u[i]),n=s.length-1;n>=0;n--)o=t.data(s[n],this.widgetFullName),o&&o!==this&&!o.options.disabled&&(h.push([t.isFunction(o.options.items)?o.options.items.call(o.element[0],e,{item:this.currentItem}):t(o.options.items,o.element),o]),this.containers.push(o));for(i=h.length-1;i>=0;i--)for(r=h[i][1],a=h[i][0],n=0,c=a.length;c>n;n++)l=t(a[n]),l.data(this.widgetName+"-item",r),d.push({item:l,instance:r,width:0,height:0,left:0,top:0})},refreshPositions:function(e){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var i,n,s,o;for(i=this.items.length-1;i>=0;i--)n=this.items[i],n.instance!==this.currentContainer&&this.currentContainer&&n.item[0]!==this.currentItem[0]||(s=this.options.toleranceElement?t(this.options.toleranceElement,n.item):n.item,e||(n.width=s.outerWidth(),n.height=s.outerHeight()),o=s.offset(),n.left=o.left,n.top=o.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(i=this.containers.length-1;i>=0;i--)o=this.containers[i].element.offset(),this.containers[i].containerCache.left=o.left,this.containers[i].containerCache.top=o.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight();return this},_createPlaceholder:function(e){e=e||this;var i,n=e.options;n.placeholder&&n.placeholder.constructor!==String||(i=n.placeholder,n.placeholder={element:function(){var n=e.currentItem[0].nodeName.toLowerCase(),s=t("<"+n+">",e.document[0]).addClass(i||e.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tr"===n?e.currentItem.children().each(function(){t("<td>&#160;</td>",e.document[0]).attr("colspan",t(this).attr("colspan")||1).appendTo(s)}):"img"===n&&s.attr("src",e.currentItem.attr("src")),i||s.css("visibility","hidden"),s},update:function(t,s){(!i||n.forcePlaceholderSize)&&(s.height()||s.height(e.currentItem.innerHeight()-parseInt(e.currentItem.css("paddingTop")||0,10)-parseInt(e.currentItem.css("paddingBottom")||0,10)),s.width()||s.width(e.currentItem.innerWidth()-parseInt(e.currentItem.css("paddingLeft")||0,10)-parseInt(e.currentItem.css("paddingRight")||0,10)))}}),e.placeholder=t(n.placeholder.element.call(e.element,e.currentItem)),e.currentItem.after(e.placeholder),n.placeholder.update(e,e.placeholder)},_contactContainers:function(n){var s,o,r,a,l,c,d,h,u,f,p=null,m=null;for(s=this.containers.length-1;s>=0;s--)if(!t.contains(this.currentItem[0],this.containers[s].element[0]))if(this._intersectsWith(this.containers[s].containerCache)){if(p&&t.contains(this.containers[s].element[0],p.element[0]))continue;p=this.containers[s],m=s}else this.containers[s].containerCache.over&&(this.containers[s]._trigger("out",n,this._uiHash(this)),this.containers[s].containerCache.over=0);if(p)if(1===this.containers.length)this.containers[m].containerCache.over||(this.containers[m]._trigger("over",n,this._uiHash(this)),this.containers[m].containerCache.over=1);else{for(r=1e4,a=null,f=p.floating||i(this.currentItem),l=f?"left":"top",c=f?"width":"height",d=this.positionAbs[l]+this.offset.click[l],o=this.items.length-1;o>=0;o--)t.contains(this.containers[m].element[0],this.items[o].item[0])&&this.items[o].item[0]!==this.currentItem[0]&&(!f||e(this.positionAbs.top+this.offset.click.top,this.items[o].top,this.items[o].height))&&(h=this.items[o].item.offset()[l],u=!1,Math.abs(h-d)>Math.abs(h+this.items[o][c]-d)&&(u=!0,h+=this.items[o][c]),r>Math.abs(h-d)&&(r=Math.abs(h-d),a=this.items[o],this.direction=u?"up":"down"));if(!a&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[m])return;a?this._rearrange(n,a,null,!0):this._rearrange(n,null,this.containers[m].element,!0),this._trigger("change",n,this._uiHash()),this.containers[m]._trigger("change",n,this._uiHash(this)),this.currentContainer=this.containers[m],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[m]._trigger("over",n,this._uiHash(this)),this.containers[m].containerCache.over=1}},_createHelper:function(e){var i=this.options,n=t.isFunction(i.helper)?t(i.helper.apply(this.element[0],[e,this.currentItem])):"clone"===i.helper?this.currentItem.clone():this.currentItem;return n.parents("body").length||t("parent"!==i.appendTo?i.appendTo:this.currentItem[0].parentNode)[0].appendChild(n[0]),n[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!n[0].style.width||i.forceHelperSize)&&n.width(this.currentItem.width()),(!n[0].style.height||i.forceHelperSize)&&n.height(this.currentItem.height()),n},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var e=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&t.ui.ie)&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var t=this.currentItem.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,i,n,s=this.options;"parent"===s.containment&&(s.containment=this.helper[0].parentNode),("document"===s.containment||"window"===s.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,t("document"===s.containment?document:window).width()-this.helperProportions.width-this.margins.left,(t("document"===s.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(s.containment)||(e=t(s.containment)[0],i=t(s.containment).offset(),n="hidden"!==t(e).css("overflow"),this.containment=[i.left+(parseInt(t(e).css("borderLeftWidth"),10)||0)+(parseInt(t(e).css("paddingLeft"),10)||0)-this.margins.left,i.top+(parseInt(t(e).css("borderTopWidth"),10)||0)+(parseInt(t(e).css("paddingTop"),10)||0)-this.margins.top,i.left+(n?Math.max(e.scrollWidth,e.offsetWidth):e.offsetWidth)-(parseInt(t(e).css("borderLeftWidth"),10)||0)-(parseInt(t(e).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,i.top+(n?Math.max(e.scrollHeight,e.offsetHeight):e.offsetHeight)-(parseInt(t(e).css("borderTopWidth"),10)||0)-(parseInt(t(e).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(e,i){i||(i=this.position);var n="absolute"===e?1:-1,s="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(s[0].tagName);return{top:i.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():o?0:s.scrollTop())*n,left:i.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():o?0:s.scrollLeft())*n}},_generatePosition:function(e){var i,n,s=this.options,o=e.pageX,r=e.pageY,a="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=/(html|body)/i.test(a[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(e.pageX-this.offset.click.left<this.containment[0]&&(o=this.containment[0]+this.offset.click.left),e.pageY-this.offset.click.top<this.containment[1]&&(r=this.containment[1]+this.offset.click.top),e.pageX-this.offset.click.left>this.containment[2]&&(o=this.containment[2]+this.offset.click.left),e.pageY-this.offset.click.top>this.containment[3]&&(r=this.containment[3]+this.offset.click.top)),s.grid&&(i=this.originalPageY+Math.round((r-this.originalPageY)/s.grid[1])*s.grid[1],r=this.containment?i-this.offset.click.top>=this.containment[1]&&i-this.offset.click.top<=this.containment[3]?i:i-this.offset.click.top>=this.containment[1]?i-s.grid[1]:i+s.grid[1]:i,n=this.originalPageX+Math.round((o-this.originalPageX)/s.grid[0])*s.grid[0],o=this.containment?n-this.offset.click.left>=this.containment[0]&&n-this.offset.click.left<=this.containment[2]?n:n-this.offset.click.left>=this.containment[0]?n-s.grid[0]:n+s.grid[0]:n)),{top:r-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():l?0:a.scrollTop()),left:o-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():l?0:a.scrollLeft())}},_rearrange:function(t,e,i,n){i?i[0].appendChild(this.placeholder[0]):e.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?e.item[0]:e.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var s=this.counter;this._delay(function(){s===this.counter&&this.refreshPositions(!n)})},_clear:function(t,e){this.reverting=!1;var i,n=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(i in this._storedCSS)("auto"===this._storedCSS[i]||"static"===this._storedCSS[i])&&(this._storedCSS[i]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!e&&n.push(function(t){this._trigger("receive",t,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||e||n.push(function(t){this._trigger("update",t,this._uiHash())}),this!==this.currentContainer&&(e||(n.push(function(t){this._trigger("remove",t,this._uiHash())}),n.push(function(t){return function(e){t._trigger("receive",e,this._uiHash(this))}}.call(this,this.currentContainer)),n.push(function(t){return function(e){t._trigger("update",e,this._uiHash(this))}}.call(this,this.currentContainer)))),i=this.containers.length-1;i>=0;i--)e||n.push(function(t){return function(e){t._trigger("deactivate",e,this._uiHash(this))}}.call(this,this.containers[i])),this.containers[i].containerCache.over&&(n.push(function(t){return function(e){t._trigger("out",e,this._uiHash(this))}}.call(this,this.containers[i])),this.containers[i].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!e){for(this._trigger("beforeStop",t,this._uiHash()),i=0;n.length>i;i++)n[i].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!1}if(e||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null,!e){for(i=0;n.length>i;i++)n[i].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){t.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(e){var i=e||this;return{helper:i.helper,placeholder:i.placeholder||t([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:e?e.element:null}}})}(jQuery),function(t,e){var i="ui-effects-";t.effects={effect:{}},function(t,e){function i(t,e,i){var n=h[e.type]||{};return null==t?i||!e.def?null:e.def:(t=n.floor?~~t:parseFloat(t),isNaN(t)?e.def:n.mod?(t+n.mod)%n.mod:0>t?0:t>n.max?n.max:t)}function n(i){var n=c(),s=n._rgba=[];return i=i.toLowerCase(),p(l,function(t,o){var r,a=o.re.exec(i),l=a&&o.parse(a),c=o.space||"rgba";return l?(r=n[c](l),n[d[c].cache]=r[d[c].cache],s=n._rgba=r._rgba,!1):e}),s.length?("0,0,0,0"===s.join()&&t.extend(s,o.transparent),n):o[i]}function s(t,e,i){return i=(i+1)%1,1>6*i?t+6*(e-t)*i:1>2*i?e:2>3*i?t+6*(e-t)*(2/3-i):t}var o,r="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",a=/^([\-+])=\s*(\d+\.?\d*)/,l=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[t[1],t[2],t[3],t[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[2.55*t[1],2.55*t[2],2.55*t[3],t[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(t){return[t[1],t[2]/100,t[3]/100,t[4]]}}],c=t.Color=function(e,i,n,s){return new t.Color.fn.parse(e,i,n,s)},d={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},h={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},u=c.support={},f=t("<p>")[0],p=t.each;f.style.cssText="background-color:rgba(1,1,1,.5)",u.rgba=f.style.backgroundColor.indexOf("rgba")>-1,p(d,function(t,e){e.cache="_"+t,e.props.alpha={idx:3,type:"percent",def:1}}),c.fn=t.extend(c.prototype,{parse:function(s,r,a,l){if(s===e)return this._rgba=[null,null,null,null],this;(s.jquery||s.nodeType)&&(s=t(s).css(r),r=e);var h=this,u=t.type(s),f=this._rgba=[];return r!==e&&(s=[s,r,a,l],u="array"),"string"===u?this.parse(n(s)||o._default):"array"===u?(p(d.rgba.props,function(t,e){f[e.idx]=i(s[e.idx],e)}),this):"object"===u?(s instanceof c?p(d,function(t,e){s[e.cache]&&(h[e.cache]=s[e.cache].slice())}):p(d,function(e,n){var o=n.cache;p(n.props,function(t,e){if(!h[o]&&n.to){if("alpha"===t||null==s[t])return;h[o]=n.to(h._rgba)}h[o][e.idx]=i(s[t],e,!0)}),h[o]&&0>t.inArray(null,h[o].slice(0,3))&&(h[o][3]=1,n.from&&(h._rgba=n.from(h[o])))}),this):e},is:function(t){var i=c(t),n=!0,s=this;return p(d,function(t,o){var r,a=i[o.cache];return a&&(r=s[o.cache]||o.to&&o.to(s._rgba)||[],p(o.props,function(t,i){return null!=a[i.idx]?n=a[i.idx]===r[i.idx]:e})),n}),n},_space:function(){var t=[],e=this;return p(d,function(i,n){e[n.cache]&&t.push(i)}),t.pop()},transition:function(t,e){var n=c(t),s=n._space(),o=d[s],r=0===this.alpha()?c("transparent"):this,a=r[o.cache]||o.to(r._rgba),l=a.slice();return n=n[o.cache],p(o.props,function(t,s){var o=s.idx,r=a[o],c=n[o],d=h[s.type]||{};null!==c&&(null===r?l[o]=c:(d.mod&&(c-r>d.mod/2?r+=d.mod:r-c>d.mod/2&&(r-=d.mod)),l[o]=i((c-r)*e+r,s)))}),this[s](l)},blend:function(e){if(1===this._rgba[3])return this;var i=this._rgba.slice(),n=i.pop(),s=c(e)._rgba;return c(t.map(i,function(t,e){return(1-n)*s[e]+n*t}))},toRgbaString:function(){var e="rgba(",i=t.map(this._rgba,function(t,e){return null==t?e>2?1:0:t});return 1===i[3]&&(i.pop(),e="rgb("),e+i.join()+")"},toHslaString:function(){var e="hsla(",i=t.map(this.hsla(),function(t,e){return null==t&&(t=e>2?1:0),e&&3>e&&(t=Math.round(100*t)+"%"),t});return 1===i[3]&&(i.pop(),e="hsl("),e+i.join()+")"},toHexString:function(e){var i=this._rgba.slice(),n=i.pop();return e&&i.push(~~(255*n)),"#"+t.map(i,function(t){return t=(t||0).toString(16),1===t.length?"0"+t:t}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),c.fn.parse.prototype=c.fn,d.hsla.to=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e,i,n=t[0]/255,s=t[1]/255,o=t[2]/255,r=t[3],a=Math.max(n,s,o),l=Math.min(n,s,o),c=a-l,d=a+l,h=.5*d;return e=l===a?0:n===a?60*(s-o)/c+360:s===a?60*(o-n)/c+120:60*(n-s)/c+240,i=0===c?0:.5>=h?c/d:c/(2-d),[Math.round(e)%360,i,h,null==r?1:r]},d.hsla.from=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e=t[0]/360,i=t[1],n=t[2],o=t[3],r=.5>=n?n*(1+i):n+i-n*i,a=2*n-r;return[Math.round(255*s(a,r,e+1/3)),Math.round(255*s(a,r,e)),Math.round(255*s(a,r,e-1/3)),o]},p(d,function(n,s){var o=s.props,r=s.cache,l=s.to,d=s.from;c.fn[n]=function(n){if(l&&!this[r]&&(this[r]=l(this._rgba)),n===e)return this[r].slice();var s,a=t.type(n),h="array"===a||"object"===a?n:arguments,u=this[r].slice();return p(o,function(t,e){var n=h["object"===a?t:e.idx];null==n&&(n=u[e.idx]),u[e.idx]=i(n,e)}),d?(s=c(d(u)),s[r]=u,s):c(u)},p(o,function(e,i){c.fn[e]||(c.fn[e]=function(s){var o,r=t.type(s),l="alpha"===e?this._hsla?"hsla":"rgba":n,c=this[l](),d=c[i.idx];return"undefined"===r?d:("function"===r&&(s=s.call(this,d),r=t.type(s)),null==s&&i.empty?this:("string"===r&&(o=a.exec(s),o&&(s=d+parseFloat(o[2])*("+"===o[1]?1:-1))),c[i.idx]=s,this[l](c)))})})}),c.hook=function(e){var i=e.split(" ");p(i,function(e,i){t.cssHooks[i]={set:function(e,s){var o,r,a="";if("transparent"!==s&&("string"!==t.type(s)||(o=n(s)))){if(s=c(o||s),!u.rgba&&1!==s._rgba[3]){for(r="backgroundColor"===i?e.parentNode:e;(""===a||"transparent"===a)&&r&&r.style;)try{a=t.css(r,"backgroundColor"),r=r.parentNode}catch(t){}s=s.blend(a&&"transparent"!==a?a:"_default")}s=s.toRgbaString()}try{e.style[i]=s}catch(t){}}},t.fx.step[i]=function(e){e.colorInit||(e.start=c(e.elem,i),e.end=c(e.end),e.colorInit=!0),t.cssHooks[i].set(e.elem,e.start.transition(e.end,e.pos))}})},c.hook(r),t.cssHooks.borderColor={expand:function(t){var e={};return p(["Top","Right","Bottom","Left"],function(i,n){e["border"+n+"Color"]=t}),e}},o=t.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(jQuery),function(){function i(e){var i,n,s=e.ownerDocument.defaultView?e.ownerDocument.defaultView.getComputedStyle(e,null):e.currentStyle,o={};if(s&&s.length&&s[0]&&s[s[0]])for(n=s.length;n--;)i=s[n],"string"==typeof s[i]&&(o[t.camelCase(i)]=s[i]);else for(i in s)"string"==typeof s[i]&&(o[i]=s[i]);return o}function n(e,i){var n,s,r={};for(n in i)s=i[n],e[n]!==s&&(o[n]||(t.fx.step[n]||!isNaN(parseFloat(s)))&&(r[n]=s));return r}var s=["add","remove","toggle"],o={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};t.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(e,i){t.fx.step[i]=function(t){("none"!==t.end&&!t.setAttr||1===t.pos&&!t.setAttr)&&(jQuery.style(t.elem,i,t.end),t.setAttr=!0)}}),t.fn.addBack||(t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),t.effects.animateClass=function(e,o,r,a){var l=t.speed(o,r,a);return this.queue(function(){var o,r=t(this),a=r.attr("class")||"",c=l.children?r.find("*").addBack():r;c=c.map(function(){var e=t(this);return{el:e,start:i(this)}}),o=function(){t.each(s,function(t,i){e[i]&&r[i+"Class"](e[i])})},o(),c=c.map(function(){return this.end=i(this.el[0]),this.diff=n(this.start,this.end),this}),r.attr("class",a),c=c.map(function(){var e=this,i=t.Deferred(),n=t.extend({},l,{queue:!1,complete:function(){i.resolve(e)}});return this.el.animate(this.diff,n),i.promise()}),t.when.apply(t,c.get()).done(function(){o(),t.each(arguments,function(){var e=this.el;t.each(this.diff,function(t){e.css(t,"")})}),l.complete.call(r[0])})})},t.fn.extend({addClass:function(e){return function(i,n,s,o){return n?t.effects.animateClass.call(this,{add:i},n,s,o):e.apply(this,arguments)}}(t.fn.addClass),removeClass:function(e){return function(i,n,s,o){return arguments.length>1?t.effects.animateClass.call(this,{remove:i},n,s,o):e.apply(this,arguments)}}(t.fn.removeClass),toggleClass:function(i){return function(n,s,o,r,a){return"boolean"==typeof s||s===e?o?t.effects.animateClass.call(this,s?{add:n}:{remove:n},o,r,a):i.apply(this,arguments):t.effects.animateClass.call(this,{toggle:n},s,o,r)}}(t.fn.toggleClass),switchClass:function(e,i,n,s,o){return t.effects.animateClass.call(this,{add:i,remove:e},n,s,o)}})}(),function(){function n(e,i,n,s){return t.isPlainObject(e)&&(i=e,e=e.effect),e={effect:e},null==i&&(i={}),t.isFunction(i)&&(s=i,n=null,i={}),("number"==typeof i||t.fx.speeds[i])&&(s=n,n=i,i={}),t.isFunction(n)&&(s=n,n=null),i&&t.extend(e,i),n=n||i.duration,e.duration=t.fx.off?0:"number"==typeof n?n:n in t.fx.speeds?t.fx.speeds[n]:t.fx.speeds._default,e.complete=s||i.complete,e}function s(e){return!(e&&"number"!=typeof e&&!t.fx.speeds[e])||("string"==typeof e&&!t.effects.effect[e]||(!!t.isFunction(e)||"object"==typeof e&&!e.effect))}t.extend(t.effects,{version:"1.10.3",save:function(t,e){for(var n=0;e.length>n;n++)null!==e[n]&&t.data(i+e[n],t[0].style[e[n]])},restore:function(t,n){var s,o;for(o=0;n.length>o;o++)null!==n[o]&&(s=t.data(i+n[o]),s===e&&(s=""),t.css(n[o],s))},setMode:function(t,e){return"toggle"===e&&(e=t.is(":hidden")?"show":"hide"),e},getBaseline:function(t,e){var i,n;switch(t[0]){case"top":i=0;break;case"middle":i=.5;break;case"bottom":i=1;break;default:i=t[0]/e.height}switch(t[1]){case"left":n=0;break;case"center":n=.5;break;case"right":n=1;break;default:n=t[1]/e.width}return{x:n,y:i}},createWrapper:function(e){if(e.parent().is(".ui-effects-wrapper"))return e.parent();var i={width:e.outerWidth(!0),height:e.outerHeight(!0),"float":e.css("float")},n=t("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),s={width:e.width(),height:e.height()},o=document.activeElement;try{o.id}catch(t){o=document.body}return e.wrap(n),(e[0]===o||t.contains(e[0],o))&&t(o).focus(),n=e.parent(),"static"===e.css("position")?(n.css({position:"relative"}),e.css({position:"relative"})):(t.extend(i,{position:e.css("position"),zIndex:e.css("z-index")}),t.each(["top","left","bottom","right"],function(t,n){i[n]=e.css(n),isNaN(parseInt(i[n],10))&&(i[n]="auto")}),e.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),e.css(s),n.css(i).show()},removeWrapper:function(e){var i=document.activeElement;return e.parent().is(".ui-effects-wrapper")&&(e.parent().replaceWith(e),(e[0]===i||t.contains(e[0],i))&&t(i).focus()),e},setTransition:function(e,i,n,s){return s=s||{},t.each(i,function(t,i){var o=e.cssUnit(i);o[0]>0&&(s[i]=o[0]*n+o[1])}),s}}),t.fn.extend({effect:function(){function e(e){function n(){t.isFunction(o)&&o.call(s[0]),t.isFunction(e)&&e()}var s=t(this),o=i.complete,a=i.mode;(s.is(":hidden")?"hide"===a:"show"===a)?(s[a](),n()):r.call(s[0],i,n)}var i=n.apply(this,arguments),s=i.mode,o=i.queue,r=t.effects.effect[i.effect];return t.fx.off||!r?s?this[s](i.duration,i.complete):this.each(function(){i.complete&&i.complete.call(this)}):o===!1?this.each(e):this.queue(o||"fx",e)},show:function(t){return function(e){if(s(e))return t.apply(this,arguments);var i=n.apply(this,arguments);return i.mode="show",this.effect.call(this,i)}}(t.fn.show),hide:function(t){return function(e){if(s(e))return t.apply(this,arguments);var i=n.apply(this,arguments);return i.mode="hide",this.effect.call(this,i)}}(t.fn.hide),toggle:function(t){return function(e){if(s(e)||"boolean"==typeof e)return t.apply(this,arguments);var i=n.apply(this,arguments);return i.mode="toggle",this.effect.call(this,i)}}(t.fn.toggle),cssUnit:function(e){var i=this.css(e),n=[];return t.each(["em","px","%","pt"],function(t,e){i.indexOf(e)>0&&(n=[parseFloat(i),e])}),n}})}(),function(){var e={};t.each(["Quad","Cubic","Quart","Quint","Expo"],function(t,i){e[i]=function(e){return Math.pow(e,t+2)}}),t.extend(e,{Sine:function(t){return 1-Math.cos(t*Math.PI/2)},Circ:function(t){return 1-Math.sqrt(1-t*t)},Elastic:function(t){return 0===t||1===t?t:-Math.pow(2,8*(t-1))*Math.sin((80*(t-1)-7.5)*Math.PI/15)},Back:function(t){return t*t*(3*t-2)},Bounce:function(t){for(var e,i=4;((e=Math.pow(2,--i))-1)/11>t;);return 1/Math.pow(4,3-i)-7.5625*Math.pow((3*e-2)/22-t,2)}}),t.each(e,function(e,i){t.easing["easeIn"+e]=i,t.easing["easeOut"+e]=function(t){return 1-i(1-t)},t.easing["easeInOut"+e]=function(t){return.5>t?i(2*t)/2:1-i(-2*t+2)/2}})}()}(jQuery),function(t){var e=0,i={},n={};i.height=i.paddingTop=i.paddingBottom=i.borderTopWidth=i.borderBottomWidth="hide",n.height=n.paddingTop=n.paddingBottom=n.borderTopWidth=n.borderBottomWidth="show",t.widget("ui.accordion",{version:"1.10.3",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},_create:function(){var e=this.options;this.prevShow=this.prevHide=t(),this.element.addClass("ui-accordion ui-widget ui-helper-reset").attr("role","tablist"),e.collapsible||e.active!==!1&&null!=e.active||(e.active=0),this._processPanels(),0>e.active&&(e.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():t(),content:this.active.length?this.active.next():t()}},_createIcons:function(){var e=this.options.icons;e&&(t("<span>").addClass("ui-accordion-header-icon ui-icon "+e.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(e.header).addClass(e.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var t;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),this._destroyIcons(),t=this.headers.next().css("display","").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),"content"!==this.options.heightStyle&&t.css("height","")},_setOption:function(t,e){return"active"===t?void this._activate(e):("event"===t&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(e)),this._super(t,e),"collapsible"!==t||e||this.options.active!==!1||this._activate(0),"icons"===t&&(this._destroyIcons(),e&&this._createIcons()),void("disabled"===t&&this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!e)))},_keydown:function(e){if(!e.altKey&&!e.ctrlKey){var i=t.ui.keyCode,n=this.headers.length,s=this.headers.index(e.target),o=!1;switch(e.keyCode){case i.RIGHT:case i.DOWN:o=this.headers[(s+1)%n];break;case i.LEFT:case i.UP:o=this.headers[(s-1+n)%n];break;case i.SPACE:case i.ENTER:this._eventHandler(e);break;case i.HOME:o=this.headers[0];break;case i.END:o=this.headers[n-1]}o&&(t(e.target).attr("tabIndex",-1),t(o).attr("tabIndex",0),o.focus(),e.preventDefault())}},_panelKeyDown:function(e){
e.keyCode===t.ui.keyCode.UP&&e.ctrlKey&&t(e.currentTarget).prev().focus()},refresh:function(){var e=this.options;this._processPanels(),e.active===!1&&e.collapsible===!0||!this.headers.length?(e.active=!1,this.active=t()):e.active===!1?this._activate(0):this.active.length&&!t.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(e.active=!1,this.active=t()):this._activate(Math.max(0,e.active-1)):e.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){this.headers=this.element.find(this.options.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all"),this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").filter(":not(.ui-accordion-content-active)").hide()},_refresh:function(){var i,n=this.options,s=n.heightStyle,o=this.element.parent(),r=this.accordionId="ui-accordion-"+(this.element.attr("id")||++e);this.active=this._findActive(n.active).addClass("ui-accordion-header-active ui-state-active ui-corner-top").removeClass("ui-corner-all"),this.active.next().addClass("ui-accordion-content-active").show(),this.headers.attr("role","tab").each(function(e){var i=t(this),n=i.attr("id"),s=i.next(),o=s.attr("id");n||(n=r+"-header-"+e,i.attr("id",n)),o||(o=r+"-panel-"+e,s.attr("id",o)),i.attr("aria-controls",o),s.attr("aria-labelledby",n)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false",tabIndex:-1}).next().attr({"aria-expanded":"false","aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true",tabIndex:0}).next().attr({"aria-expanded":"true","aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(n.event),"fill"===s?(i=o.height(),this.element.siblings(":visible").each(function(){var e=t(this),n=e.css("position");"absolute"!==n&&"fixed"!==n&&(i-=e.outerHeight(!0))}),this.headers.each(function(){i-=t(this).outerHeight(!0)}),this.headers.next().each(function(){t(this).height(Math.max(0,i-t(this).innerHeight()+t(this).height()))}).css("overflow","auto")):"auto"===s&&(i=0,this.headers.next().each(function(){i=Math.max(i,t(this).css("height","").height())}).height(i))},_activate:function(e){var i=this._findActive(e)[0];i!==this.active[0]&&(i=i||this.active[0],this._eventHandler({target:i,currentTarget:i,preventDefault:t.noop}))},_findActive:function(e){return"number"==typeof e?this.headers.eq(e):t()},_setupEvents:function(e){var i={keydown:"_keydown"};e&&t.each(e.split(" "),function(t,e){i[e]="_eventHandler"}),this._off(this.headers.add(this.headers.next())),this._on(this.headers,i),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(e){var i=this.options,n=this.active,s=t(e.currentTarget),o=s[0]===n[0],r=o&&i.collapsible,a=r?t():s.next(),l=n.next(),c={oldHeader:n,oldPanel:l,newHeader:r?t():s,newPanel:a};e.preventDefault(),o&&!i.collapsible||this._trigger("beforeActivate",e,c)===!1||(i.active=!r&&this.headers.index(s),this.active=o?t():s,this._toggle(c),n.removeClass("ui-accordion-header-active ui-state-active"),i.icons&&n.children(".ui-accordion-header-icon").removeClass(i.icons.activeHeader).addClass(i.icons.header),o||(s.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),i.icons&&s.children(".ui-accordion-header-icon").removeClass(i.icons.header).addClass(i.icons.activeHeader),s.next().addClass("ui-accordion-content-active")))},_toggle:function(e){var i=e.newPanel,n=this.prevShow.length?this.prevShow:e.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=i,this.prevHide=n,this.options.animate?this._animate(i,n,e):(n.hide(),i.show(),this._toggleComplete(e)),n.attr({"aria-expanded":"false","aria-hidden":"true"}),n.prev().attr("aria-selected","false"),i.length&&n.length?n.prev().attr("tabIndex",-1):i.length&&this.headers.filter(function(){return 0===t(this).attr("tabIndex")}).attr("tabIndex",-1),i.attr({"aria-expanded":"true","aria-hidden":"false"}).prev().attr({"aria-selected":"true",tabIndex:0})},_animate:function(t,e,s){var o,r,a,l=this,c=0,d=t.length&&(!e.length||t.index()<e.index()),h=this.options.animate||{},u=d&&h.down||h,f=function(){l._toggleComplete(s)};return"number"==typeof u&&(a=u),"string"==typeof u&&(r=u),r=r||u.easing||h.easing,a=a||u.duration||h.duration,e.length?t.length?(o=t.show().outerHeight(),e.animate(i,{duration:a,easing:r,step:function(t,e){e.now=Math.round(t)}}),void t.hide().animate(n,{duration:a,easing:r,complete:f,step:function(t,i){i.now=Math.round(t),"height"!==i.prop?c+=i.now:"content"!==l.options.heightStyle&&(i.now=Math.round(o-e.outerHeight()-c),c=0)}})):e.animate(i,a,r,f):t.animate(n,a,r,f)},_toggleComplete:function(t){var e=t.oldPanel;e.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all"),e.length&&(e.parent()[0].className=e.parent()[0].className),this._trigger("activate",null,t)}})}(jQuery),function(t){var e=0;t.widget("ui.autocomplete",{version:"1.10.3",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},pending:0,_create:function(){var e,i,n,s=this.element[0].nodeName.toLowerCase(),o="textarea"===s,r="input"===s;this.isMultiLine=!!o||!r&&this.element.prop("isContentEditable"),this.valueMethod=this.element[o||r?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(s){if(this.element.prop("readOnly"))return e=!0,n=!0,void(i=!0);e=!1,n=!1,i=!1;var o=t.ui.keyCode;switch(s.keyCode){case o.PAGE_UP:e=!0,this._move("previousPage",s);break;case o.PAGE_DOWN:e=!0,this._move("nextPage",s);break;case o.UP:e=!0,this._keyEvent("previous",s);break;case o.DOWN:e=!0,this._keyEvent("next",s);break;case o.ENTER:case o.NUMPAD_ENTER:this.menu.active&&(e=!0,s.preventDefault(),this.menu.select(s));break;case o.TAB:this.menu.active&&this.menu.select(s);break;case o.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(s),s.preventDefault());break;default:i=!0,this._searchTimeout(s)}},keypress:function(n){if(e)return e=!1,void((!this.isMultiLine||this.menu.element.is(":visible"))&&n.preventDefault());if(!i){var s=t.ui.keyCode;switch(n.keyCode){case s.PAGE_UP:this._move("previousPage",n);break;case s.PAGE_DOWN:this._move("nextPage",n);break;case s.UP:this._keyEvent("previous",n);break;case s.DOWN:this._keyEvent("next",n)}}},input:function(t){return n?(n=!1,void t.preventDefault()):void this._searchTimeout(t)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(t){return this.cancelBlur?void delete this.cancelBlur:(clearTimeout(this.searching),this.close(t),void this._change(t))}}),this._initSource(),this.menu=t("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().data("ui-menu"),this._on(this.menu.element,{mousedown:function(e){e.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var i=this.menu.element[0];t(e.target).closest(".ui-menu-item").length||this._delay(function(){var e=this;this.document.one("mousedown",function(n){n.target===e.element[0]||n.target===i||t.contains(i,n.target)||e.close()})})},menufocus:function(e,i){if(this.isNewMenu&&(this.isNewMenu=!1,e.originalEvent&&/^mouse/.test(e.originalEvent.type)))return this.menu.blur(),void this.document.one("mousemove",function(){t(e.target).trigger(e.originalEvent)});var n=i.item.data("ui-autocomplete-item");!1!==this._trigger("focus",e,{item:n})?e.originalEvent&&/^key/.test(e.originalEvent.type)&&this._value(n.value):this.liveRegion.text(n.value)},menuselect:function(t,e){var i=e.item.data("ui-autocomplete-item"),n=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=n,this._delay(function(){this.previous=n,this.selectedItem=i})),!1!==this._trigger("select",t,{item:i})&&this._value(i.value),this.term=this._value(),this.close(t),this.selectedItem=i}}),this.liveRegion=t("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertBefore(this.element),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(t,e){this._super(t,e),"source"===t&&this._initSource(),"appendTo"===t&&this.menu.element.appendTo(this._appendTo()),"disabled"===t&&e&&this.xhr&&this.xhr.abort()},_appendTo:function(){var e=this.options.appendTo;return e&&(e=e.jquery||e.nodeType?t(e):this.document.find(e).eq(0)),e||(e=this.element.closest(".ui-front")),e.length||(e=this.document[0].body),e},_initSource:function(){var e,i,n=this;t.isArray(this.options.source)?(e=this.options.source,this.source=function(i,n){n(t.ui.autocomplete.filter(e,i.term))}):"string"==typeof this.options.source?(i=this.options.source,this.source=function(e,s){n.xhr&&n.xhr.abort(),n.xhr=t.ajax({url:i,data:e,dataType:"json",success:function(t){s(t)},error:function(){s([])}})}):this.source=this.options.source},_searchTimeout:function(t){clearTimeout(this.searching),this.searching=this._delay(function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,t))},this.options.delay)},search:function(t,e){return t=null!=t?t:this._value(),this.term=this._value(),t.length<this.options.minLength?this.close(e):this._trigger("search",e)!==!1?this._search(t):void 0},_search:function(t){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:t},this._response())},_response:function(){var t=this,i=++e;return function(n){i===e&&t.__response(n),t.pending--,t.pending||t.element.removeClass("ui-autocomplete-loading")}},__response:function(t){t&&(t=this._normalize(t)),this._trigger("response",null,{content:t}),!this.options.disabled&&t&&t.length&&!this.cancelSearch?(this._suggest(t),this._trigger("open")):this._close()},close:function(t){this.cancelSearch=!0,this._close(t)},_close:function(t){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",t))},_change:function(t){this.previous!==this._value()&&this._trigger("change",t,{item:this.selectedItem})},_normalize:function(e){return e.length&&e[0].label&&e[0].value?e:t.map(e,function(e){return"string"==typeof e?{label:e,value:e}:t.extend({label:e.label||e.value,value:e.value||e.label},e)})},_suggest:function(e){var i=this.menu.element.empty();this._renderMenu(i,e),this.isNewMenu=!0,this.menu.refresh(),i.show(),this._resizeMenu(),i.position(t.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var t=this.menu.element;t.outerWidth(Math.max(t.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(e,i){var n=this;t.each(i,function(t,i){n._renderItemData(e,i)})},_renderItemData:function(t,e){return this._renderItem(t,e).data("ui-autocomplete-item",e)},_renderItem:function(e,i){return t("<li>").append(t("<a>").text(i.label)).appendTo(e)},_move:function(t,e){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(t)||this.menu.isLastItem()&&/^next/.test(t)?(this._value(this.term),void this.menu.blur()):void this.menu[t](e):void this.search(null,e)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(t,e){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(t,e),e.preventDefault())}}),t.extend(t.ui.autocomplete,{escapeRegex:function(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(e,i){var n=RegExp(t.ui.autocomplete.escapeRegex(i),"i");return t.grep(e,function(t){return n.test(t.label||t.value||t)})}}),t.widget("ui.autocomplete",t.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(t){return t+(t>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(t){var e;this._superApply(arguments),this.options.disabled||this.cancelSearch||(e=t&&t.length?this.options.messages.results(t.length):this.options.messages.noResults,this.liveRegion.text(e))}})}(jQuery),function(t){var e,i,n,s,o="ui-button ui-widget ui-state-default ui-corner-all",r="ui-state-hover ui-state-active ",a="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",l=function(){var e=t(this);setTimeout(function(){e.find(":ui-button").button("refresh")},1)},c=function(e){var i=e.name,n=e.form,s=t([]);return i&&(i=i.replace(/'/g,"\\'"),s=n?t(n).find("[name='"+i+"']"):t("[name='"+i+"']",e.ownerDocument).filter(function(){return!this.form})),s};t.widget("ui.button",{version:"1.10.3",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,l),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var r=this,a=this.options,d="checkbox"===this.type||"radio"===this.type,h=d?"":"ui-state-active",u="ui-state-focus";null===a.label&&(a.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(o).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){a.disabled||this===e&&t(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){a.disabled||t(this).removeClass(h)}).bind("click"+this.eventNamespace,function(t){a.disabled&&(t.preventDefault(),t.stopImmediatePropagation())}),this.element.bind("focus"+this.eventNamespace,function(){r.buttonElement.addClass(u)}).bind("blur"+this.eventNamespace,function(){r.buttonElement.removeClass(u)}),d&&(this.element.bind("change"+this.eventNamespace,function(){s||r.refresh()}),this.buttonElement.bind("mousedown"+this.eventNamespace,function(t){a.disabled||(s=!1,i=t.pageX,n=t.pageY)}).bind("mouseup"+this.eventNamespace,function(t){a.disabled||(i!==t.pageX||n!==t.pageY)&&(s=!0)})),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){return!a.disabled&&!s&&void 0}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(a.disabled||s)return!1;t(this).addClass("ui-state-active"),r.buttonElement.attr("aria-pressed","true");var e=r.element[0];c(e).not(e).map(function(){return t(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){return!a.disabled&&(t(this).addClass("ui-state-active"),e=this,void r.document.one("mouseup",function(){e=null}))}).bind("mouseup"+this.eventNamespace,function(){return!a.disabled&&void t(this).removeClass("ui-state-active")}).bind("keydown"+this.eventNamespace,function(e){return!a.disabled&&void((e.keyCode===t.ui.keyCode.SPACE||e.keyCode===t.ui.keyCode.ENTER)&&t(this).addClass("ui-state-active"))}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){t(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(e){e.keyCode===t.ui.keyCode.SPACE&&t(this).click()})),this._setOption("disabled",a.disabled),this._resetButton()},_determineButtonType:function(){var t,e,i;this.type=this.element.is("[type=checkbox]")?"checkbox":this.element.is("[type=radio]")?"radio":this.element.is("input")?"input":"button","checkbox"===this.type||"radio"===this.type?(t=this.element.parents().last(),e="label[for='"+this.element.attr("id")+"']",this.buttonElement=t.find(e),this.buttonElement.length||(t=t.length?t.siblings():this.element.siblings(),this.buttonElement=t.filter(e),this.buttonElement.length||(this.buttonElement=t.find(e))),this.element.addClass("ui-helper-hidden-accessible"),i=this.element.is(":checked"),i&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",i)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(o+" "+r+" "+a).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(t,e){return this._super(t,e),"disabled"===t?void(e?this.element.prop("disabled",!0):this.element.prop("disabled",!1)):void this._resetButton()},refresh:function(){var e=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");e!==this.options.disabled&&this._setOption("disabled",e),"radio"===this.type?c(this.element[0]).each(function(){t(this).is(":checked")?t(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):t(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)return void(this.options.label&&this.element.val(this.options.label));var e=this.buttonElement.removeClass(a),i=t("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(e.empty()).text(),n=this.options.icons,s=n.primary&&n.secondary,o=[];n.primary||n.secondary?(this.options.text&&o.push("ui-button-text-icon"+(s?"s":n.primary?"-primary":"-secondary")),n.primary&&e.prepend("<span class='ui-button-icon-primary ui-icon "+n.primary+"'></span>"),n.secondary&&e.append("<span class='ui-button-icon-secondary ui-icon "+n.secondary+"'></span>"),this.options.text||(o.push(s?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||e.attr("title",t.trim(i)))):o.push("ui-button-text-only"),e.addClass(o.join(" "))}}),t.widget("ui.buttonset",{version:"1.10.3",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(t,e){"disabled"===t&&this.buttons.button("option",t,e),this._super(t,e)},refresh:function(){var e="rtl"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return t(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(e?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(e?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return t(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})}(jQuery),function(t,e){function i(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},t.extend(this._defaults,this.regional[""]),this.dpDiv=n(t("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function n(e){var i="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return e.delegate(i,"mouseout",function(){t(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&t(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&t(this).removeClass("ui-datepicker-next-hover")}).delegate(i,"mouseover",function(){t.datepicker._isDisabledDatepicker(o.inline?e.parent()[0]:o.input[0])||(t(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),t(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&t(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&t(this).addClass("ui-datepicker-next-hover"))})}function s(e,i){t.extend(e,i);for(var n in i)null==i[n]&&(e[n]=i[n]);return e}t.extend(t.ui,{datepicker:{version:"1.10.3"}});var o,r="datepicker";t.extend(i.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(t){return s(this._defaults,t||{}),this},_attachDatepicker:function(e,i){var n,s,o;n=e.nodeName.toLowerCase(),s="div"===n||"span"===n,e.id||(this.uuid+=1,e.id="dp"+this.uuid),o=this._newInst(t(e),s),o.settings=t.extend({},i||{}),"input"===n?this._connectDatepicker(e,o):s&&this._inlineDatepicker(e,o)},_newInst:function(e,i){var s=e[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:s,input:e,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:i,dpDiv:i?n(t("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(e,i){var n=t(e);i.append=t([]),i.trigger=t([]),n.hasClass(this.markerClassName)||(this._attachments(n,i),n.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(i),t.data(e,r,i),i.settings.disabled&&this._disableDatepicker(e))},_attachments:function(e,i){var n,s,o,r=this._get(i,"appendText"),a=this._get(i,"isRTL");i.append&&i.append.remove(),r&&(i.append=t("<span class='"+this._appendClass+"'>"+r+"</span>"),e[a?"before":"after"](i.append)),e.unbind("focus",this._showDatepicker),i.trigger&&i.trigger.remove(),n=this._get(i,"showOn"),("focus"===n||"both"===n)&&e.focus(this._showDatepicker),("button"===n||"both"===n)&&(s=this._get(i,"buttonText"),o=this._get(i,"buttonImage"),i.trigger=t(this._get(i,"buttonImageOnly")?t("<img/>").addClass(this._triggerClass).attr({src:o,alt:s,title:s}):t("<button type='button'></button>").addClass(this._triggerClass).html(o?t("<img/>").attr({src:o,alt:s,title:s}):s)),e[a?"before":"after"](i.trigger),i.trigger.click(function(){return t.datepicker._datepickerShowing&&t.datepicker._lastInput===e[0]?t.datepicker._hideDatepicker():t.datepicker._datepickerShowing&&t.datepicker._lastInput!==e[0]?(t.datepicker._hideDatepicker(),t.datepicker._showDatepicker(e[0])):t.datepicker._showDatepicker(e[0]),!1}))},_autoSize:function(t){if(this._get(t,"autoSize")&&!t.inline){var e,i,n,s,o=new Date(2009,11,20),r=this._get(t,"dateFormat");r.match(/[DM]/)&&(e=function(t){for(i=0,n=0,s=0;t.length>s;s++)t[s].length>i&&(i=t[s].length,n=s);return n},o.setMonth(e(this._get(t,r.match(/MM/)?"monthNames":"monthNamesShort"))),o.setDate(e(this._get(t,r.match(/DD/)?"dayNames":"dayNamesShort"))+20-o.getDay())),t.input.attr("size",this._formatDate(t,o).length)}},_inlineDatepicker:function(e,i){var n=t(e);n.hasClass(this.markerClassName)||(n.addClass(this.markerClassName).append(i.dpDiv),t.data(e,r,i),this._setDate(i,this._getDefaultDate(i),!0),this._updateDatepicker(i),this._updateAlternate(i),i.settings.disabled&&this._disableDatepicker(e),i.dpDiv.css("display","block"))},_dialogDatepicker:function(e,i,n,o,a){var l,c,d,h,u,f=this._dialogInst;return f||(this.uuid+=1,l="dp"+this.uuid,this._dialogInput=t("<input type='text' id='"+l+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),t("body").append(this._dialogInput),f=this._dialogInst=this._newInst(this._dialogInput,!1),f.settings={},t.data(this._dialogInput[0],r,f)),s(f.settings,o||{}),i=i&&i.constructor===Date?this._formatDate(f,i):i,this._dialogInput.val(i),this._pos=a?a.length?a:[a.pageX,a.pageY]:null,this._pos||(c=document.documentElement.clientWidth,d=document.documentElement.clientHeight,h=document.documentElement.scrollLeft||document.body.scrollLeft,u=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[c/2-100+h,d/2-150+u]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),f.settings.onSelect=n,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),t.blockUI&&t.blockUI(this.dpDiv),t.data(this._dialogInput[0],r,f),this},_destroyDatepicker:function(e){var i,n=t(e),s=t.data(e,r);n.hasClass(this.markerClassName)&&(i=e.nodeName.toLowerCase(),t.removeData(e,r),"input"===i?(s.append.remove(),s.trigger.remove(),n.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"===i||"span"===i)&&n.removeClass(this.markerClassName).empty())},_enableDatepicker:function(e){var i,n,s=t(e),o=t.data(e,r);s.hasClass(this.markerClassName)&&(i=e.nodeName.toLowerCase(),"input"===i?(e.disabled=!1,o.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):("div"===i||"span"===i)&&(n=s.children("."+this._inlineClass),n.children().removeClass("ui-state-disabled"),n.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=t.map(this._disabledInputs,function(t){return t===e?null:t}))},_disableDatepicker:function(e){var i,n,s=t(e),o=t.data(e,r);s.hasClass(this.markerClassName)&&(i=e.nodeName.toLowerCase(),"input"===i?(e.disabled=!0,o.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):("div"===i||"span"===i)&&(n=s.children("."+this._inlineClass),n.children().addClass("ui-state-disabled"),n.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=t.map(this._disabledInputs,function(t){return t===e?null:t}),this._disabledInputs[this._disabledInputs.length]=e)},_isDisabledDatepicker:function(t){if(!t)return!1;for(var e=0;this._disabledInputs.length>e;e++)if(this._disabledInputs[e]===t)return!0;return!1},_getInst:function(e){try{return t.data(e,r)}catch(t){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(i,n,o){var r,a,l,c,d=this._getInst(i);return 2===arguments.length&&"string"==typeof n?"defaults"===n?t.extend({},t.datepicker._defaults):d?"all"===n?t.extend({},d.settings):this._get(d,n):null:(r=n||{},"string"==typeof n&&(r={},r[n]=o),d&&(this._curInst===d&&this._hideDatepicker(),a=this._getDateDatepicker(i,!0),l=this._getMinMaxDate(d,"min"),c=this._getMinMaxDate(d,"max"),s(d.settings,r),null!==l&&r.dateFormat!==e&&r.minDate===e&&(d.settings.minDate=this._formatDate(d,l)),null!==c&&r.dateFormat!==e&&r.maxDate===e&&(d.settings.maxDate=this._formatDate(d,c)),"disabled"in r&&(r.disabled?this._disableDatepicker(i):this._enableDatepicker(i)),this._attachments(t(i),d),this._autoSize(d),this._setDate(d,a),this._updateAlternate(d),this._updateDatepicker(d)),e)},_changeDatepicker:function(t,e,i){this._optionDatepicker(t,e,i)},_refreshDatepicker:function(t){var e=this._getInst(t);e&&this._updateDatepicker(e)},_setDateDatepicker:function(t,e){var i=this._getInst(t);i&&(this._setDate(i,e),this._updateDatepicker(i),this._updateAlternate(i))},_getDateDatepicker:function(t,e){var i=this._getInst(t);return i&&!i.inline&&this._setDateFromField(i,e),i?this._getDate(i):null},_doKeyDown:function(e){var i,n,s,o=t.datepicker._getInst(e.target),r=!0,a=o.dpDiv.is(".ui-datepicker-rtl");if(o._keyEvent=!0,t.datepicker._datepickerShowing)switch(e.keyCode){case 9:t.datepicker._hideDatepicker(),r=!1;break;case 13:return s=t("td."+t.datepicker._dayOverClass+":not(."+t.datepicker._currentClass+")",o.dpDiv),s[0]&&t.datepicker._selectDay(e.target,o.selectedMonth,o.selectedYear,s[0]),i=t.datepicker._get(o,"onSelect"),i?(n=t.datepicker._formatDate(o),i.apply(o.input?o.input[0]:null,[n,o])):t.datepicker._hideDatepicker(),!1;case 27:t.datepicker._hideDatepicker();break;case 33:t.datepicker._adjustDate(e.target,e.ctrlKey?-t.datepicker._get(o,"stepBigMonths"):-t.datepicker._get(o,"stepMonths"),"M");break;case 34:t.datepicker._adjustDate(e.target,e.ctrlKey?+t.datepicker._get(o,"stepBigMonths"):+t.datepicker._get(o,"stepMonths"),"M");break;case 35:(e.ctrlKey||e.metaKey)&&t.datepicker._clearDate(e.target),r=e.ctrlKey||e.metaKey;break;case 36:(e.ctrlKey||e.metaKey)&&t.datepicker._gotoToday(e.target),r=e.ctrlKey||e.metaKey;break;case 37:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,a?1:-1,"D"),r=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&t.datepicker._adjustDate(e.target,e.ctrlKey?-t.datepicker._get(o,"stepBigMonths"):-t.datepicker._get(o,"stepMonths"),"M");break;case 38:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,-7,"D"),r=e.ctrlKey||e.metaKey;break;case 39:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,a?-1:1,"D"),r=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&t.datepicker._adjustDate(e.target,e.ctrlKey?+t.datepicker._get(o,"stepBigMonths"):+t.datepicker._get(o,"stepMonths"),"M");break;case 40:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,7,"D"),r=e.ctrlKey||e.metaKey;break;default:r=!1}else 36===e.keyCode&&e.ctrlKey?t.datepicker._showDatepicker(this):r=!1;r&&(e.preventDefault(),e.stopPropagation())},_doKeyPress:function(i){var n,s,o=t.datepicker._getInst(i.target);return t.datepicker._get(o,"constrainInput")?(n=t.datepicker._possibleChars(t.datepicker._get(o,"dateFormat")),s=String.fromCharCode(null==i.charCode?i.keyCode:i.charCode),i.ctrlKey||i.metaKey||" ">s||!n||n.indexOf(s)>-1):e},_doKeyUp:function(e){var i,n=t.datepicker._getInst(e.target);if(n.input.val()!==n.lastVal)try{i=t.datepicker.parseDate(t.datepicker._get(n,"dateFormat"),n.input?n.input.val():null,t.datepicker._getFormatConfig(n)),i&&(t.datepicker._setDateFromField(n),t.datepicker._updateAlternate(n),t.datepicker._updateDatepicker(n))}catch(t){}return!0},_showDatepicker:function(e){if(e=e.target||e,"input"!==e.nodeName.toLowerCase()&&(e=t("input",e.parentNode)[0]),!t.datepicker._isDisabledDatepicker(e)&&t.datepicker._lastInput!==e){var i,n,o,r,a,l,c;i=t.datepicker._getInst(e),t.datepicker._curInst&&t.datepicker._curInst!==i&&(t.datepicker._curInst.dpDiv.stop(!0,!0),i&&t.datepicker._datepickerShowing&&t.datepicker._hideDatepicker(t.datepicker._curInst.input[0])),n=t.datepicker._get(i,"beforeShow"),o=n?n.apply(e,[e,i]):{},o!==!1&&(s(i.settings,o),i.lastVal=null,t.datepicker._lastInput=e,t.datepicker._setDateFromField(i),t.datepicker._inDialog&&(e.value=""),t.datepicker._pos||(t.datepicker._pos=t.datepicker._findPos(e),t.datepicker._pos[1]+=e.offsetHeight),r=!1,t(e).parents().each(function(){return r|="fixed"===t(this).css("position"),!r}),a={left:t.datepicker._pos[0],
top:t.datepicker._pos[1]},t.datepicker._pos=null,i.dpDiv.empty(),i.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),t.datepicker._updateDatepicker(i),a=t.datepicker._checkOffset(i,a,r),i.dpDiv.css({position:t.datepicker._inDialog&&t.blockUI?"static":r?"fixed":"absolute",display:"none",left:a.left+"px",top:a.top+"px"}),i.inline||(l=t.datepicker._get(i,"showAnim"),c=t.datepicker._get(i,"duration"),i.dpDiv.zIndex(t(e).zIndex()+1),t.datepicker._datepickerShowing=!0,t.effects&&t.effects.effect[l]?i.dpDiv.show(l,t.datepicker._get(i,"showOptions"),c):i.dpDiv[l||"show"](l?c:null),t.datepicker._shouldFocusInput(i)&&i.input.focus(),t.datepicker._curInst=i))}},_updateDatepicker:function(e){this.maxRows=4,o=e,e.dpDiv.empty().append(this._generateHTML(e)),this._attachHandlers(e),e.dpDiv.find("."+this._dayOverClass+" a").mouseover();var i,n=this._getNumberOfMonths(e),s=n[1],r=17;e.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),s>1&&e.dpDiv.addClass("ui-datepicker-multi-"+s).css("width",r*s+"em"),e.dpDiv[(1!==n[0]||1!==n[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),e.dpDiv[(this._get(e,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),e===t.datepicker._curInst&&t.datepicker._datepickerShowing&&t.datepicker._shouldFocusInput(e)&&e.input.focus(),e.yearshtml&&(i=e.yearshtml,setTimeout(function(){i===e.yearshtml&&e.yearshtml&&e.dpDiv.find("select.ui-datepicker-year:first").replaceWith(e.yearshtml),i=e.yearshtml=null},0))},_shouldFocusInput:function(t){return t.input&&t.input.is(":visible")&&!t.input.is(":disabled")&&!t.input.is(":focus")},_checkOffset:function(e,i,n){var s=e.dpDiv.outerWidth(),o=e.dpDiv.outerHeight(),r=e.input?e.input.outerWidth():0,a=e.input?e.input.outerHeight():0,l=document.documentElement.clientWidth+(n?0:t(document).scrollLeft()),c=document.documentElement.clientHeight+(n?0:t(document).scrollTop());return i.left-=this._get(e,"isRTL")?s-r:0,i.left-=n&&i.left===e.input.offset().left?t(document).scrollLeft():0,i.top-=n&&i.top===e.input.offset().top+a?t(document).scrollTop():0,i.left-=Math.min(i.left,i.left+s>l&&l>s?Math.abs(i.left+s-l):0),i.top-=Math.min(i.top,i.top+o>c&&c>o?Math.abs(o+a):0),i},_findPos:function(e){for(var i,n=this._getInst(e),s=this._get(n,"isRTL");e&&("hidden"===e.type||1!==e.nodeType||t.expr.filters.hidden(e));)e=e[s?"previousSibling":"nextSibling"];return i=t(e).offset(),[i.left,i.top]},_hideDatepicker:function(e){var i,n,s,o,a=this._curInst;!a||e&&a!==t.data(e,r)||this._datepickerShowing&&(i=this._get(a,"showAnim"),n=this._get(a,"duration"),s=function(){t.datepicker._tidyDialog(a)},t.effects&&(t.effects.effect[i]||t.effects[i])?a.dpDiv.hide(i,t.datepicker._get(a,"showOptions"),n,s):a.dpDiv["slideDown"===i?"slideUp":"fadeIn"===i?"fadeOut":"hide"](i?n:null,s),i||s(),this._datepickerShowing=!1,o=this._get(a,"onClose"),o&&o.apply(a.input?a.input[0]:null,[a.input?a.input.val():"",a]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),t.blockUI&&(t.unblockUI(),t("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(t){t.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(e){if(t.datepicker._curInst){var i=t(e.target),n=t.datepicker._getInst(i[0]);(i[0].id!==t.datepicker._mainDivId&&0===i.parents("#"+t.datepicker._mainDivId).length&&!i.hasClass(t.datepicker.markerClassName)&&!i.closest("."+t.datepicker._triggerClass).length&&t.datepicker._datepickerShowing&&(!t.datepicker._inDialog||!t.blockUI)||i.hasClass(t.datepicker.markerClassName)&&t.datepicker._curInst!==n)&&t.datepicker._hideDatepicker()}},_adjustDate:function(e,i,n){var s=t(e),o=this._getInst(s[0]);this._isDisabledDatepicker(s[0])||(this._adjustInstDate(o,i+("M"===n?this._get(o,"showCurrentAtPos"):0),n),this._updateDatepicker(o))},_gotoToday:function(e){var i,n=t(e),s=this._getInst(n[0]);this._get(s,"gotoCurrent")&&s.currentDay?(s.selectedDay=s.currentDay,s.drawMonth=s.selectedMonth=s.currentMonth,s.drawYear=s.selectedYear=s.currentYear):(i=new Date,s.selectedDay=i.getDate(),s.drawMonth=s.selectedMonth=i.getMonth(),s.drawYear=s.selectedYear=i.getFullYear()),this._notifyChange(s),this._adjustDate(n)},_selectMonthYear:function(e,i,n){var s=t(e),o=this._getInst(s[0]);o["selected"+("M"===n?"Month":"Year")]=o["draw"+("M"===n?"Month":"Year")]=parseInt(i.options[i.selectedIndex].value,10),this._notifyChange(o),this._adjustDate(s)},_selectDay:function(e,i,n,s){var o,r=t(e);t(s).hasClass(this._unselectableClass)||this._isDisabledDatepicker(r[0])||(o=this._getInst(r[0]),o.selectedDay=o.currentDay=t("a",s).html(),o.selectedMonth=o.currentMonth=i,o.selectedYear=o.currentYear=n,this._selectDate(e,this._formatDate(o,o.currentDay,o.currentMonth,o.currentYear)))},_clearDate:function(e){var i=t(e);this._selectDate(i,"")},_selectDate:function(e,i){var n,s=t(e),o=this._getInst(s[0]);i=null!=i?i:this._formatDate(o),o.input&&o.input.val(i),this._updateAlternate(o),n=this._get(o,"onSelect"),n?n.apply(o.input?o.input[0]:null,[i,o]):o.input&&o.input.trigger("change"),o.inline?this._updateDatepicker(o):(this._hideDatepicker(),this._lastInput=o.input[0],"object"!=typeof o.input[0]&&o.input.focus(),this._lastInput=null)},_updateAlternate:function(e){var i,n,s,o=this._get(e,"altField");o&&(i=this._get(e,"altFormat")||this._get(e,"dateFormat"),n=this._getDate(e),s=this.formatDate(i,n,this._getFormatConfig(e)),t(o).each(function(){t(this).val(s)}))},noWeekends:function(t){var e=t.getDay();return[e>0&&6>e,""]},iso8601Week:function(t){var e,i=new Date(t.getTime());return i.setDate(i.getDate()+4-(i.getDay()||7)),e=i.getTime(),i.setMonth(0),i.setDate(1),Math.floor(Math.round((e-i)/864e5)/7)+1},parseDate:function(i,n,s){if(null==i||null==n)throw"Invalid arguments";if(n="object"==typeof n?""+n:n+"",""===n)return null;var o,r,a,l,c=0,d=(s?s.shortYearCutoff:null)||this._defaults.shortYearCutoff,h="string"!=typeof d?d:(new Date).getFullYear()%100+parseInt(d,10),u=(s?s.dayNamesShort:null)||this._defaults.dayNamesShort,f=(s?s.dayNames:null)||this._defaults.dayNames,p=(s?s.monthNamesShort:null)||this._defaults.monthNamesShort,m=(s?s.monthNames:null)||this._defaults.monthNames,g=-1,v=-1,y=-1,b=-1,w=!1,_=function(t){var e=i.length>o+1&&i.charAt(o+1)===t;return e&&o++,e},k=function(t){var e=_(t),i="@"===t?14:"!"===t?20:"y"===t&&e?4:"o"===t?3:2,s=RegExp("^\\d{1,"+i+"}"),o=n.substring(c).match(s);if(!o)throw"Missing number at position "+c;return c+=o[0].length,parseInt(o[0],10)},x=function(i,s,o){var r=-1,a=t.map(_(i)?o:s,function(t,e){return[[e,t]]}).sort(function(t,e){return-(t[1].length-e[1].length)});if(t.each(a,function(t,i){var s=i[1];return n.substr(c,s.length).toLowerCase()===s.toLowerCase()?(r=i[0],c+=s.length,!1):e}),-1!==r)return r+1;throw"Unknown name at position "+c},C=function(){if(n.charAt(c)!==i.charAt(o))throw"Unexpected literal at position "+c;c++};for(o=0;i.length>o;o++)if(w)"'"!==i.charAt(o)||_("'")?C():w=!1;else switch(i.charAt(o)){case"d":y=k("d");break;case"D":x("D",u,f);break;case"o":b=k("o");break;case"m":v=k("m");break;case"M":v=x("M",p,m);break;case"y":g=k("y");break;case"@":l=new Date(k("@")),g=l.getFullYear(),v=l.getMonth()+1,y=l.getDate();break;case"!":l=new Date((k("!")-this._ticksTo1970)/1e4),g=l.getFullYear(),v=l.getMonth()+1,y=l.getDate();break;case"'":_("'")?C():w=!0;break;default:C()}if(n.length>c&&(a=n.substr(c),!/^\s+/.test(a)))throw"Extra/unparsed characters found in date: "+a;if(-1===g?g=(new Date).getFullYear():100>g&&(g+=(new Date).getFullYear()-(new Date).getFullYear()%100+(h>=g?0:-100)),b>-1)for(v=1,y=b;r=this._getDaysInMonth(g,v-1),!(r>=y);)v++,y-=r;if(l=this._daylightSavingAdjust(new Date(g,v-1,y)),l.getFullYear()!==g||l.getMonth()+1!==v||l.getDate()!==y)throw"Invalid date";return l},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:864e9*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(t,e,i){if(!e)return"";var n,s=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,o=(i?i.dayNames:null)||this._defaults.dayNames,r=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,a=(i?i.monthNames:null)||this._defaults.monthNames,l=function(e){var i=t.length>n+1&&t.charAt(n+1)===e;return i&&n++,i},c=function(t,e,i){var n=""+e;if(l(t))for(;i>n.length;)n="0"+n;return n},d=function(t,e,i,n){return l(t)?n[e]:i[e]},h="",u=!1;if(e)for(n=0;t.length>n;n++)if(u)"'"!==t.charAt(n)||l("'")?h+=t.charAt(n):u=!1;else switch(t.charAt(n)){case"d":h+=c("d",e.getDate(),2);break;case"D":h+=d("D",e.getDay(),s,o);break;case"o":h+=c("o",Math.round((new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime()-new Date(e.getFullYear(),0,0).getTime())/864e5),3);break;case"m":h+=c("m",e.getMonth()+1,2);break;case"M":h+=d("M",e.getMonth(),r,a);break;case"y":h+=l("y")?e.getFullYear():(10>e.getYear()%100?"0":"")+e.getYear()%100;break;case"@":h+=e.getTime();break;case"!":h+=1e4*e.getTime()+this._ticksTo1970;break;case"'":l("'")?h+="'":u=!0;break;default:h+=t.charAt(n)}return h},_possibleChars:function(t){var e,i="",n=!1,s=function(i){var n=t.length>e+1&&t.charAt(e+1)===i;return n&&e++,n};for(e=0;t.length>e;e++)if(n)"'"!==t.charAt(e)||s("'")?i+=t.charAt(e):n=!1;else switch(t.charAt(e)){case"d":case"m":case"y":case"@":i+="0123456789";break;case"D":case"M":return null;case"'":s("'")?i+="'":n=!0;break;default:i+=t.charAt(e)}return i},_get:function(t,i){return t.settings[i]!==e?t.settings[i]:this._defaults[i]},_setDateFromField:function(t,e){if(t.input.val()!==t.lastVal){var i=this._get(t,"dateFormat"),n=t.lastVal=t.input?t.input.val():null,s=this._getDefaultDate(t),o=s,r=this._getFormatConfig(t);try{o=this.parseDate(i,n,r)||s}catch(t){n=e?"":n}t.selectedDay=o.getDate(),t.drawMonth=t.selectedMonth=o.getMonth(),t.drawYear=t.selectedYear=o.getFullYear(),t.currentDay=n?o.getDate():0,t.currentMonth=n?o.getMonth():0,t.currentYear=n?o.getFullYear():0,this._adjustInstDate(t)}},_getDefaultDate:function(t){return this._restrictMinMax(t,this._determineDate(t,this._get(t,"defaultDate"),new Date))},_determineDate:function(e,i,n){var s=function(t){var e=new Date;return e.setDate(e.getDate()+t),e},o=function(i){try{return t.datepicker.parseDate(t.datepicker._get(e,"dateFormat"),i,t.datepicker._getFormatConfig(e))}catch(t){}for(var n=(i.toLowerCase().match(/^c/)?t.datepicker._getDate(e):null)||new Date,s=n.getFullYear(),o=n.getMonth(),r=n.getDate(),a=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,l=a.exec(i);l;){switch(l[2]||"d"){case"d":case"D":r+=parseInt(l[1],10);break;case"w":case"W":r+=7*parseInt(l[1],10);break;case"m":case"M":o+=parseInt(l[1],10),r=Math.min(r,t.datepicker._getDaysInMonth(s,o));break;case"y":case"Y":s+=parseInt(l[1],10),r=Math.min(r,t.datepicker._getDaysInMonth(s,o))}l=a.exec(i)}return new Date(s,o,r)},r=null==i||""===i?n:"string"==typeof i?o(i):"number"==typeof i?isNaN(i)?n:s(i):new Date(i.getTime());return r=r&&"Invalid Date"==""+r?n:r,r&&(r.setHours(0),r.setMinutes(0),r.setSeconds(0),r.setMilliseconds(0)),this._daylightSavingAdjust(r)},_daylightSavingAdjust:function(t){return t?(t.setHours(t.getHours()>12?t.getHours()+2:0),t):null},_setDate:function(t,e,i){var n=!e,s=t.selectedMonth,o=t.selectedYear,r=this._restrictMinMax(t,this._determineDate(t,e,new Date));t.selectedDay=t.currentDay=r.getDate(),t.drawMonth=t.selectedMonth=t.currentMonth=r.getMonth(),t.drawYear=t.selectedYear=t.currentYear=r.getFullYear(),s===t.selectedMonth&&o===t.selectedYear||i||this._notifyChange(t),this._adjustInstDate(t),t.input&&t.input.val(n?"":this._formatDate(t))},_getDate:function(t){var e=!t.currentYear||t.input&&""===t.input.val()?null:this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay));return e},_attachHandlers:function(e){var i=this._get(e,"stepMonths"),n="#"+e.id.replace(/\\\\/g,"\\");e.dpDiv.find("[data-handler]").map(function(){var e={prev:function(){t.datepicker._adjustDate(n,-i,"M")},next:function(){t.datepicker._adjustDate(n,+i,"M")},hide:function(){t.datepicker._hideDatepicker()},today:function(){t.datepicker._gotoToday(n)},selectDay:function(){return t.datepicker._selectDay(n,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return t.datepicker._selectMonthYear(n,this,"M"),!1},selectYear:function(){return t.datepicker._selectMonthYear(n,this,"Y"),!1}};t(this).bind(this.getAttribute("data-event"),e[this.getAttribute("data-handler")])})},_generateHTML:function(t){var e,i,n,s,o,r,a,l,c,d,h,u,f,p,m,g,v,y,b,w,_,k,x,C,S,T,E,D,P,M,A,I,L,j,O,$,N,F,H,R=new Date,z=this._daylightSavingAdjust(new Date(R.getFullYear(),R.getMonth(),R.getDate())),B=this._get(t,"isRTL"),W=this._get(t,"showButtonPanel"),q=this._get(t,"hideIfNoPrevNext"),U=this._get(t,"navigationAsDateFormat"),V=this._getNumberOfMonths(t),Y=this._get(t,"showCurrentAtPos"),G=this._get(t,"stepMonths"),K=1!==V[0]||1!==V[1],X=this._daylightSavingAdjust(t.currentDay?new Date(t.currentYear,t.currentMonth,t.currentDay):new Date(9999,9,9)),Q=this._getMinMaxDate(t,"min"),J=this._getMinMaxDate(t,"max"),Z=t.drawMonth-Y,tt=t.drawYear;if(0>Z&&(Z+=12,tt--),J)for(e=this._daylightSavingAdjust(new Date(J.getFullYear(),J.getMonth()-V[0]*V[1]+1,J.getDate())),e=Q&&Q>e?Q:e;this._daylightSavingAdjust(new Date(tt,Z,1))>e;)Z--,0>Z&&(Z=11,tt--);for(t.drawMonth=Z,t.drawYear=tt,i=this._get(t,"prevText"),i=U?this.formatDate(i,this._daylightSavingAdjust(new Date(tt,Z-G,1)),this._getFormatConfig(t)):i,n=this._canAdjustMonth(t,-1,tt,Z)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(B?"e":"w")+"'>"+i+"</span></a>":q?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(B?"e":"w")+"'>"+i+"</span></a>",s=this._get(t,"nextText"),s=U?this.formatDate(s,this._daylightSavingAdjust(new Date(tt,Z+G,1)),this._getFormatConfig(t)):s,o=this._canAdjustMonth(t,1,tt,Z)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+s+"'><span class='ui-icon ui-icon-circle-triangle-"+(B?"w":"e")+"'>"+s+"</span></a>":q?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+s+"'><span class='ui-icon ui-icon-circle-triangle-"+(B?"w":"e")+"'>"+s+"</span></a>",r=this._get(t,"currentText"),a=this._get(t,"gotoCurrent")&&t.currentDay?X:z,r=U?this.formatDate(r,a,this._getFormatConfig(t)):r,l=t.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(t,"closeText")+"</button>",c=W?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(B?l:"")+(this._isInRange(t,a)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+r+"</button>":"")+(B?"":l)+"</div>":"",d=parseInt(this._get(t,"firstDay"),10),d=isNaN(d)?0:d,h=this._get(t,"showWeek"),u=this._get(t,"dayNames"),f=this._get(t,"dayNamesMin"),p=this._get(t,"monthNames"),m=this._get(t,"monthNamesShort"),g=this._get(t,"beforeShowDay"),v=this._get(t,"showOtherMonths"),y=this._get(t,"selectOtherMonths"),b=this._getDefaultDate(t),w="",k=0;V[0]>k;k++){for(x="",this.maxRows=4,C=0;V[1]>C;C++){if(S=this._daylightSavingAdjust(new Date(tt,Z,t.selectedDay)),T=" ui-corner-all",E="",K){if(E+="<div class='ui-datepicker-group",V[1]>1)switch(C){case 0:E+=" ui-datepicker-group-first",T=" ui-corner-"+(B?"right":"left");break;case V[1]-1:E+=" ui-datepicker-group-last",T=" ui-corner-"+(B?"left":"right");break;default:E+=" ui-datepicker-group-middle",T=""}E+="'>"}for(E+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+T+"'>"+(/all|left/.test(T)&&0===k?B?o:n:"")+(/all|right/.test(T)&&0===k?B?n:o:"")+this._generateMonthYearHeader(t,Z,tt,Q,J,k>0||C>0,p,m)+"</div><table class='ui-datepicker-calendar'><thead><tr>",D=h?"<th class='ui-datepicker-week-col'>"+this._get(t,"weekHeader")+"</th>":"",_=0;7>_;_++)P=(_+d)%7,D+="<th"+((_+d+6)%7>=5?" class='ui-datepicker-week-end'":"")+"><span title='"+u[P]+"'>"+f[P]+"</span></th>";for(E+=D+"</tr></thead><tbody>",M=this._getDaysInMonth(tt,Z),tt===t.selectedYear&&Z===t.selectedMonth&&(t.selectedDay=Math.min(t.selectedDay,M)),A=(this._getFirstDayOfMonth(tt,Z)-d+7)%7,I=Math.ceil((A+M)/7),L=K&&this.maxRows>I?this.maxRows:I,this.maxRows=L,j=this._daylightSavingAdjust(new Date(tt,Z,1-A)),O=0;L>O;O++){for(E+="<tr>",$=h?"<td class='ui-datepicker-week-col'>"+this._get(t,"calculateWeek")(j)+"</td>":"",_=0;7>_;_++)N=g?g.apply(t.input?t.input[0]:null,[j]):[!0,""],F=j.getMonth()!==Z,H=F&&!y||!N[0]||Q&&Q>j||J&&j>J,$+="<td class='"+((_+d+6)%7>=5?" ui-datepicker-week-end":"")+(F?" ui-datepicker-other-month":"")+(j.getTime()===S.getTime()&&Z===t.selectedMonth&&t._keyEvent||b.getTime()===j.getTime()&&b.getTime()===S.getTime()?" "+this._dayOverClass:"")+(H?" "+this._unselectableClass+" ui-state-disabled":"")+(F&&!v?"":" "+N[1]+(j.getTime()===X.getTime()?" "+this._currentClass:"")+(j.getTime()===z.getTime()?" ui-datepicker-today":""))+"'"+(F&&!v||!N[2]?"":" title='"+N[2].replace(/'/g,"&#39;")+"'")+(H?"":" data-handler='selectDay' data-event='click' data-month='"+j.getMonth()+"' data-year='"+j.getFullYear()+"'")+">"+(F&&!v?"&#xa0;":H?"<span class='ui-state-default'>"+j.getDate()+"</span>":"<a class='ui-state-default"+(j.getTime()===z.getTime()?" ui-state-highlight":"")+(j.getTime()===X.getTime()?" ui-state-active":"")+(F?" ui-priority-secondary":"")+"' href='#'>"+j.getDate()+"</a>")+"</td>",j.setDate(j.getDate()+1),j=this._daylightSavingAdjust(j);E+=$+"</tr>"}Z++,Z>11&&(Z=0,tt++),E+="</tbody></table>"+(K?"</div>"+(V[0]>0&&C===V[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),x+=E}w+=x}return w+=c,t._keyEvent=!1,w},_generateMonthYearHeader:function(t,e,i,n,s,o,r,a){var l,c,d,h,u,f,p,m,g=this._get(t,"changeMonth"),v=this._get(t,"changeYear"),y=this._get(t,"showMonthAfterYear"),b="<div class='ui-datepicker-title'>",w="";if(o||!g)w+="<span class='ui-datepicker-month'>"+r[e]+"</span>";else{for(l=n&&n.getFullYear()===i,c=s&&s.getFullYear()===i,w+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",d=0;12>d;d++)(!l||d>=n.getMonth())&&(!c||s.getMonth()>=d)&&(w+="<option value='"+d+"'"+(d===e?" selected='selected'":"")+">"+a[d]+"</option>");w+="</select>"}if(y||(b+=w+(!o&&g&&v?"":"&#xa0;")),!t.yearshtml)if(t.yearshtml="",o||!v)b+="<span class='ui-datepicker-year'>"+i+"</span>";else{for(h=this._get(t,"yearRange").split(":"),u=(new Date).getFullYear(),f=function(t){var e=t.match(/c[+\-].*/)?i+parseInt(t.substring(1),10):t.match(/[+\-].*/)?u+parseInt(t,10):parseInt(t,10);return isNaN(e)?u:e},p=f(h[0]),m=Math.max(p,f(h[1]||"")),p=n?Math.max(p,n.getFullYear()):p,m=s?Math.min(m,s.getFullYear()):m,t.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";m>=p;p++)t.yearshtml+="<option value='"+p+"'"+(p===i?" selected='selected'":"")+">"+p+"</option>";t.yearshtml+="</select>",b+=t.yearshtml,t.yearshtml=null}return b+=this._get(t,"yearSuffix"),y&&(b+=(!o&&g&&v?"":"&#xa0;")+w),b+="</div>"},_adjustInstDate:function(t,e,i){var n=t.drawYear+("Y"===i?e:0),s=t.drawMonth+("M"===i?e:0),o=Math.min(t.selectedDay,this._getDaysInMonth(n,s))+("D"===i?e:0),r=this._restrictMinMax(t,this._daylightSavingAdjust(new Date(n,s,o)));t.selectedDay=r.getDate(),t.drawMonth=t.selectedMonth=r.getMonth(),t.drawYear=t.selectedYear=r.getFullYear(),("M"===i||"Y"===i)&&this._notifyChange(t)},_restrictMinMax:function(t,e){var i=this._getMinMaxDate(t,"min"),n=this._getMinMaxDate(t,"max"),s=i&&i>e?i:e;return n&&s>n?n:s},_notifyChange:function(t){var e=this._get(t,"onChangeMonthYear");e&&e.apply(t.input?t.input[0]:null,[t.selectedYear,t.selectedMonth+1,t])},_getNumberOfMonths:function(t){var e=this._get(t,"numberOfMonths");return null==e?[1,1]:"number"==typeof e?[1,e]:e},_getMinMaxDate:function(t,e){return this._determineDate(t,this._get(t,e+"Date"),null)},_getDaysInMonth:function(t,e){return 32-this._daylightSavingAdjust(new Date(t,e,32)).getDate()},_getFirstDayOfMonth:function(t,e){return new Date(t,e,1).getDay()},_canAdjustMonth:function(t,e,i,n){var s=this._getNumberOfMonths(t),o=this._daylightSavingAdjust(new Date(i,n+(0>e?e:s[0]*s[1]),1));return 0>e&&o.setDate(this._getDaysInMonth(o.getFullYear(),o.getMonth())),this._isInRange(t,o)},_isInRange:function(t,e){var i,n,s=this._getMinMaxDate(t,"min"),o=this._getMinMaxDate(t,"max"),r=null,a=null,l=this._get(t,"yearRange");return l&&(i=l.split(":"),n=(new Date).getFullYear(),r=parseInt(i[0],10),a=parseInt(i[1],10),i[0].match(/[+\-].*/)&&(r+=n),i[1].match(/[+\-].*/)&&(a+=n)),(!s||e.getTime()>=s.getTime())&&(!o||e.getTime()<=o.getTime())&&(!r||e.getFullYear()>=r)&&(!a||a>=e.getFullYear())},_getFormatConfig:function(t){var e=this._get(t,"shortYearCutoff");return e="string"!=typeof e?e:(new Date).getFullYear()%100+parseInt(e,10),{shortYearCutoff:e,dayNamesShort:this._get(t,"dayNamesShort"),dayNames:this._get(t,"dayNames"),monthNamesShort:this._get(t,"monthNamesShort"),monthNames:this._get(t,"monthNames")}},_formatDate:function(t,e,i,n){e||(t.currentDay=t.selectedDay,t.currentMonth=t.selectedMonth,t.currentYear=t.selectedYear);var s=e?"object"==typeof e?e:this._daylightSavingAdjust(new Date(n,i,e)):this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay));return this.formatDate(this._get(t,"dateFormat"),s,this._getFormatConfig(t))}}),t.fn.datepicker=function(e){if(!this.length)return this;t.datepicker.initialized||(t(document).mousedown(t.datepicker._checkExternalClick),t.datepicker.initialized=!0),0===t("#"+t.datepicker._mainDivId).length&&t("body").append(t.datepicker.dpDiv);var i=Array.prototype.slice.call(arguments,1);return"string"!=typeof e||"isDisabled"!==e&&"getDate"!==e&&"widget"!==e?"option"===e&&2===arguments.length&&"string"==typeof arguments[1]?t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this[0]].concat(i)):this.each(function(){"string"==typeof e?t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this].concat(i)):t.datepicker._attachDatepicker(this,e)}):t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this[0]].concat(i))},t.datepicker=new i,t.datepicker.initialized=!1,t.datepicker.uuid=(new Date).getTime(),t.datepicker.version="1.10.3"}(jQuery),function(t){var e={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},i={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};t.widget("ui.dialog",{version:"1.10.3",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(e){var i=t(this).css(e).offset().top;0>i&&t(this).css("top",e.top-i)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title=this.options.title||this.originalTitle,this._createWrapper(),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&t.fn.draggable&&this._makeDraggable(),this.options.resizable&&t.fn.resizable&&this._makeResizable(),this._isOpen=!1},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var e=this.options.appendTo;return e&&(e.jquery||e.nodeType)?t(e):this.document.find(e||"body").eq(0)},_destroy:function(){var t,e=this.originalPosition;this._destroyOverlay(),this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(),this.uiDialog.stop(!0,!0).remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),t=e.parent.children().eq(e.index),t.length&&t[0]!==this.element[0]?t.before(this.element):e.parent.append(this.element)},widget:function(){return this.uiDialog},disable:t.noop,enable:t.noop,close:function(e){var i=this;this._isOpen&&this._trigger("beforeClose",e)!==!1&&(this._isOpen=!1,this._destroyOverlay(),this.opener.filter(":focusable").focus().length||t(this.document[0].activeElement).blur(),this._hide(this.uiDialog,this.options.hide,function(){i._trigger("close",e)}))},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(t,e){var i=!!this.uiDialog.nextAll(":visible").insertBefore(this.uiDialog).length;return i&&!e&&this._trigger("focus",t),i},open:function(){var e=this;return this._isOpen?void(this._moveToTop()&&this._focusTabbable()):(this._isOpen=!0,this.opener=t(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this._show(this.uiDialog,this.options.show,function(){e._focusTabbable(),e._trigger("focus")}),void this._trigger("open"))},_focusTabbable:function(){var t=this.element.find("[autofocus]");t.length||(t=this.element.find(":tabbable")),t.length||(t=this.uiDialogButtonPane.find(":tabbable")),t.length||(t=this.uiDialogTitlebarClose.filter(":tabbable")),t.length||(t=this.uiDialog),t.eq(0).focus()},_keepFocus:function(e){function i(){var e=this.document[0].activeElement,i=this.uiDialog[0]===e||t.contains(this.uiDialog[0],e);i||this._focusTabbable()}e.preventDefault(),i.call(this),this._delay(i)},_createWrapper:function(){this.uiDialog=t("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._on(this.uiDialog,{keydown:function(e){if(this.options.closeOnEscape&&!e.isDefaultPrevented()&&e.keyCode&&e.keyCode===t.ui.keyCode.ESCAPE)return e.preventDefault(),void this.close(e);if(e.keyCode===t.ui.keyCode.TAB){var i=this.uiDialog.find(":tabbable"),n=i.filter(":first"),s=i.filter(":last");e.target!==s[0]&&e.target!==this.uiDialog[0]||e.shiftKey?e.target!==n[0]&&e.target!==this.uiDialog[0]||!e.shiftKey||(s.focus(1),e.preventDefault()):(n.focus(1),e.preventDefault())}},mousedown:function(t){this._moveToTop(t)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var e;this.uiDialogTitlebar=t("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog),this._on(this.uiDialogTitlebar,{mousedown:function(e){t(e.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.focus()}}),this.uiDialogTitlebarClose=t("<button></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:!1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar),this._on(this.uiDialogTitlebarClose,{click:function(t){t.preventDefault(),this.close(t)}}),e=t("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar),this._title(e),this.uiDialog.attr({"aria-labelledby":e.attr("id")})},_title:function(t){this.options.title||t.html("&#160;"),t.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=t("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),this.uiButtonSet=t("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane),this._createButtons()},_createButtons:function(){var e=this,i=this.options.buttons;return this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),t.isEmptyObject(i)||t.isArray(i)&&!i.length?void this.uiDialog.removeClass("ui-dialog-buttons"):(t.each(i,function(i,n){var s,o;n=t.isFunction(n)?{click:n,text:i}:n,n=t.extend({type:"button"},n),s=n.click,n.click=function(){s.apply(e.element[0],arguments)},o={icons:n.icons,text:n.showText},delete n.icons,delete n.showText,t("<button></button>",n).button(o).appendTo(e.uiButtonSet)}),this.uiDialog.addClass("ui-dialog-buttons"),void this.uiDialogButtonPane.appendTo(this.uiDialog))},_makeDraggable:function(){function e(t){return{position:t.position,offset:t.offset}}var i=this,n=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(n,s){t(this).addClass("ui-dialog-dragging"),i._blockFrames(),i._trigger("dragStart",n,e(s))},drag:function(t,n){i._trigger("drag",t,e(n))},stop:function(s,o){n.position=[o.position.left-i.document.scrollLeft(),o.position.top-i.document.scrollTop()],t(this).removeClass("ui-dialog-dragging"),i._unblockFrames(),i._trigger("dragStop",s,e(o))}})},_makeResizable:function(){function e(t){return{originalPosition:t.originalPosition,originalSize:t.originalSize,position:t.position,size:t.size}}var i=this,n=this.options,s=n.resizable,o=this.uiDialog.css("position"),r="string"==typeof s?s:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:n.maxWidth,maxHeight:n.maxHeight,minWidth:n.minWidth,minHeight:this._minHeight(),handles:r,start:function(n,s){t(this).addClass("ui-dialog-resizing"),i._blockFrames(),i._trigger("resizeStart",n,e(s))},resize:function(t,n){i._trigger("resize",t,e(n))},stop:function(s,o){n.height=t(this).height(),n.width=t(this).width(),t(this).removeClass("ui-dialog-resizing"),i._unblockFrames(),i._trigger("resizeStop",s,e(o))}}).css("position",o)},_minHeight:function(){var t=this.options;return"auto"===t.height?t.minHeight:Math.min(t.minHeight,t.height)},_position:function(){var t=this.uiDialog.is(":visible");t||this.uiDialog.show(),this.uiDialog.position(this.options.position),t||this.uiDialog.hide()},_setOptions:function(n){var s=this,o=!1,r={};t.each(n,function(t,n){s._setOption(t,n),t in e&&(o=!0),t in i&&(r[t]=n)}),o&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",r)},_setOption:function(t,e){var i,n,s=this.uiDialog;"dialogClass"===t&&s.removeClass(this.options.dialogClass).addClass(e),"disabled"!==t&&(this._super(t,e),"appendTo"===t&&this.uiDialog.appendTo(this._appendTo()),"buttons"===t&&this._createButtons(),"closeText"===t&&this.uiDialogTitlebarClose.button({label:""+e}),"draggable"===t&&(i=s.is(":data(ui-draggable)"),i&&!e&&s.draggable("destroy"),!i&&e&&this._makeDraggable()),"position"===t&&this._position(),"resizable"===t&&(n=s.is(":data(ui-resizable)"),n&&!e&&s.resizable("destroy"),n&&"string"==typeof e&&s.resizable("option","handles",e),n||e===!1||this._makeResizable()),"title"===t&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var t,e,i,n=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),n.minWidth>n.width&&(n.width=n.minWidth),t=this.uiDialog.css({height:"auto",width:n.width}).outerHeight(),e=Math.max(0,n.minHeight-t),i="number"==typeof n.maxHeight?Math.max(0,n.maxHeight-t):"none","auto"===n.height?this.element.css({minHeight:e,maxHeight:i,height:"auto"}):this.element.height(Math.max(0,n.height-t)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var e=t(this);return t("<div>").css({position:"absolute",width:e.outerWidth(),height:e.outerHeight()}).appendTo(e.parent()).offset(e.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(e){return!!t(e.target).closest(".ui-dialog").length||!!t(e.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var e=this,i=this.widgetFullName;t.ui.dialog.overlayInstances||this._delay(function(){t.ui.dialog.overlayInstances&&this.document.bind("focusin.dialog",function(n){e._allowInteraction(n)||(n.preventDefault(),t(".ui-dialog:visible:last .ui-dialog-content").data(i)._focusTabbable())})}),this.overlay=t("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo()),this._on(this.overlay,{mousedown:"_keepFocus"}),t.ui.dialog.overlayInstances++}},_destroyOverlay:function(){this.options.modal&&this.overlay&&(t.ui.dialog.overlayInstances--,t.ui.dialog.overlayInstances||this.document.unbind("focusin.dialog"),
this.overlay.remove(),this.overlay=null)}}),t.ui.dialog.overlayInstances=0,t.uiBackCompat!==!1&&t.widget("ui.dialog",t.ui.dialog,{_position:function(){var e,i=this.options.position,n=[],s=[0,0];i?(("string"==typeof i||"object"==typeof i&&"0"in i)&&(n=i.split?i.split(" "):[i[0],i[1]],1===n.length&&(n[1]=n[0]),t.each(["left","top"],function(t,e){+n[t]===n[t]&&(s[t]=n[t],n[t]=e)}),i={my:n[0]+(0>s[0]?s[0]:"+"+s[0])+" "+n[1]+(0>s[1]?s[1]:"+"+s[1]),at:n.join(" ")}),i=t.extend({},t.ui.dialog.prototype.options.position,i)):i=t.ui.dialog.prototype.options.position,e=this.uiDialog.is(":visible"),e||this.uiDialog.show(),this.uiDialog.position(i),e||this.uiDialog.hide()}})}(jQuery),function(t){var e=/up|down|vertical/,i=/up|left|vertical|horizontal/;t.effects.effect.blind=function(n,s){var o,r,a,l=t(this),c=["position","top","bottom","left","right","height","width"],d=t.effects.setMode(l,n.mode||"hide"),h=n.direction||"up",u=e.test(h),f=u?"height":"width",p=u?"top":"left",m=i.test(h),g={},v="show"===d;l.parent().is(".ui-effects-wrapper")?t.effects.save(l.parent(),c):t.effects.save(l,c),l.show(),o=t.effects.createWrapper(l).css({overflow:"hidden"}),r=o[f](),a=parseFloat(o.css(p))||0,g[f]=v?r:0,m||(l.css(u?"bottom":"right",0).css(u?"top":"left","auto").css({position:"absolute"}),g[p]=v?a:r+a),v&&(o.css(f,0),m||o.css(p,a+r)),o.animate(g,{duration:n.duration,easing:n.easing,queue:!1,complete:function(){"hide"===d&&l.hide(),t.effects.restore(l,c),t.effects.removeWrapper(l),s()}})}}(jQuery),function(t){t.effects.effect.bounce=function(e,i){var n,s,o,r=t(this),a=["position","top","bottom","left","right","height","width"],l=t.effects.setMode(r,e.mode||"effect"),c="hide"===l,d="show"===l,h=e.direction||"up",u=e.distance,f=e.times||5,p=2*f+(d||c?1:0),m=e.duration/p,g=e.easing,v="up"===h||"down"===h?"top":"left",y="up"===h||"left"===h,b=r.queue(),w=b.length;for((d||c)&&a.push("opacity"),t.effects.save(r,a),r.show(),t.effects.createWrapper(r),u||(u=r["top"===v?"outerHeight":"outerWidth"]()/3),d&&(o={opacity:1},o[v]=0,r.css("opacity",0).css(v,y?2*-u:2*u).animate(o,m,g)),c&&(u/=Math.pow(2,f-1)),o={},o[v]=0,n=0;f>n;n++)s={},s[v]=(y?"-=":"+=")+u,r.animate(s,m,g).animate(o,m,g),u=c?2*u:u/2;c&&(s={opacity:0},s[v]=(y?"-=":"+=")+u,r.animate(s,m,g)),r.queue(function(){c&&r.hide(),t.effects.restore(r,a),t.effects.removeWrapper(r),i()}),w>1&&b.splice.apply(b,[1,0].concat(b.splice(w,p+1))),r.dequeue()}}(jQuery),function(t){t.effects.effect.clip=function(e,i){var n,s,o,r=t(this),a=["position","top","bottom","left","right","height","width"],l=t.effects.setMode(r,e.mode||"hide"),c="show"===l,d=e.direction||"vertical",h="vertical"===d,u=h?"height":"width",f=h?"top":"left",p={};t.effects.save(r,a),r.show(),n=t.effects.createWrapper(r).css({overflow:"hidden"}),s="IMG"===r[0].tagName?n:r,o=s[u](),c&&(s.css(u,0),s.css(f,o/2)),p[u]=c?o:0,p[f]=c?0:o/2,s.animate(p,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){c||r.hide(),t.effects.restore(r,a),t.effects.removeWrapper(r),i()}})}}(jQuery),function(t){t.effects.effect.drop=function(e,i){var n,s=t(this),o=["position","top","bottom","left","right","opacity","height","width"],r=t.effects.setMode(s,e.mode||"hide"),a="show"===r,l=e.direction||"left",c="up"===l||"down"===l?"top":"left",d="up"===l||"left"===l?"pos":"neg",h={opacity:a?1:0};t.effects.save(s,o),s.show(),t.effects.createWrapper(s),n=e.distance||s["top"===c?"outerHeight":"outerWidth"](!0)/2,a&&s.css("opacity",0).css(c,"pos"===d?-n:n),h[c]=(a?"pos"===d?"+=":"-=":"pos"===d?"-=":"+=")+n,s.animate(h,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){"hide"===r&&s.hide(),t.effects.restore(s,o),t.effects.removeWrapper(s),i()}})}}(jQuery),function(t){t.effects.effect.explode=function(e,i){function n(){b.push(this),b.length===h*u&&s()}function s(){f.css({visibility:"visible"}),t(b).remove(),m||f.hide(),i()}var o,r,a,l,c,d,h=e.pieces?Math.round(Math.sqrt(e.pieces)):3,u=h,f=t(this),p=t.effects.setMode(f,e.mode||"hide"),m="show"===p,g=f.show().css("visibility","hidden").offset(),v=Math.ceil(f.outerWidth()/u),y=Math.ceil(f.outerHeight()/h),b=[];for(o=0;h>o;o++)for(l=g.top+o*y,d=o-(h-1)/2,r=0;u>r;r++)a=g.left+r*v,c=r-(u-1)/2,f.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-r*v,top:-o*y}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:v,height:y,left:a+(m?c*v:0),top:l+(m?d*y:0),opacity:m?0:1}).animate({left:a+(m?0:c*v),top:l+(m?0:d*y),opacity:m?1:0},e.duration||500,e.easing,n)}}(jQuery),function(t){t.effects.effect.fade=function(e,i){var n=t(this),s=t.effects.setMode(n,e.mode||"toggle");n.animate({opacity:s},{queue:!1,duration:e.duration,easing:e.easing,complete:i})}}(jQuery),function(t){t.effects.effect.fold=function(e,i){var n,s,o=t(this),r=["position","top","bottom","left","right","height","width"],a=t.effects.setMode(o,e.mode||"hide"),l="show"===a,c="hide"===a,d=e.size||15,h=/([0-9]+)%/.exec(d),u=!!e.horizFirst,f=l!==u,p=f?["width","height"]:["height","width"],m=e.duration/2,g={},v={};t.effects.save(o,r),o.show(),n=t.effects.createWrapper(o).css({overflow:"hidden"}),s=f?[n.width(),n.height()]:[n.height(),n.width()],h&&(d=parseInt(h[1],10)/100*s[c?0:1]),l&&n.css(u?{height:0,width:d}:{height:d,width:0}),g[p[0]]=l?s[0]:d,v[p[1]]=l?s[1]:0,n.animate(g,m,e.easing).animate(v,m,e.easing,function(){c&&o.hide(),t.effects.restore(o,r),t.effects.removeWrapper(o),i()})}}(jQuery),function(t){t.effects.effect.highlight=function(e,i){var n=t(this),s=["backgroundImage","backgroundColor","opacity"],o=t.effects.setMode(n,e.mode||"show"),r={backgroundColor:n.css("backgroundColor")};"hide"===o&&(r.opacity=0),t.effects.save(n,s),n.show().css({backgroundImage:"none",backgroundColor:e.color||"#ffff99"}).animate(r,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){"hide"===o&&n.hide(),t.effects.restore(n,s),i()}})}}(jQuery),function(t){t.effects.effect.pulsate=function(e,i){var n,s=t(this),o=t.effects.setMode(s,e.mode||"show"),r="show"===o,a="hide"===o,l=r||"hide"===o,c=2*(e.times||5)+(l?1:0),d=e.duration/c,h=0,u=s.queue(),f=u.length;for((r||!s.is(":visible"))&&(s.css("opacity",0).show(),h=1),n=1;c>n;n++)s.animate({opacity:h},d,e.easing),h=1-h;s.animate({opacity:h},d,e.easing),s.queue(function(){a&&s.hide(),i()}),f>1&&u.splice.apply(u,[1,0].concat(u.splice(f,c+1))),s.dequeue()}}(jQuery),function(t){t.effects.effect.puff=function(e,i){var n=t(this),s=t.effects.setMode(n,e.mode||"hide"),o="hide"===s,r=parseInt(e.percent,10)||150,a=r/100,l={height:n.height(),width:n.width(),outerHeight:n.outerHeight(),outerWidth:n.outerWidth()};t.extend(e,{effect:"scale",queue:!1,fade:!0,mode:s,complete:i,percent:o?r:100,from:o?l:{height:l.height*a,width:l.width*a,outerHeight:l.outerHeight*a,outerWidth:l.outerWidth*a}}),n.effect(e)},t.effects.effect.scale=function(e,i){var n=t(this),s=t.extend(!0,{},e),o=t.effects.setMode(n,e.mode||"effect"),r=parseInt(e.percent,10)||(0===parseInt(e.percent,10)?0:"hide"===o?0:100),a=e.direction||"both",l=e.origin,c={height:n.height(),width:n.width(),outerHeight:n.outerHeight(),outerWidth:n.outerWidth()},d={y:"horizontal"!==a?r/100:1,x:"vertical"!==a?r/100:1};s.effect="size",s.queue=!1,s.complete=i,"effect"!==o&&(s.origin=l||["middle","center"],s.restore=!0),s.from=e.from||("show"===o?{height:0,width:0,outerHeight:0,outerWidth:0}:c),s.to={height:c.height*d.y,width:c.width*d.x,outerHeight:c.outerHeight*d.y,outerWidth:c.outerWidth*d.x},s.fade&&("show"===o&&(s.from.opacity=0,s.to.opacity=1),"hide"===o&&(s.from.opacity=1,s.to.opacity=0)),n.effect(s)},t.effects.effect.size=function(e,i){var n,s,o,r=t(this),a=["position","top","bottom","left","right","width","height","overflow","opacity"],l=["position","top","bottom","left","right","overflow","opacity"],c=["width","height","overflow"],d=["fontSize"],h=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],u=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],f=t.effects.setMode(r,e.mode||"effect"),p=e.restore||"effect"!==f,m=e.scale||"both",g=e.origin||["middle","center"],v=r.css("position"),y=p?a:l,b={height:0,width:0,outerHeight:0,outerWidth:0};"show"===f&&r.show(),n={height:r.height(),width:r.width(),outerHeight:r.outerHeight(),outerWidth:r.outerWidth()},"toggle"===e.mode&&"show"===f?(r.from=e.to||b,r.to=e.from||n):(r.from=e.from||("show"===f?b:n),r.to=e.to||("hide"===f?b:n)),o={from:{y:r.from.height/n.height,x:r.from.width/n.width},to:{y:r.to.height/n.height,x:r.to.width/n.width}},("box"===m||"both"===m)&&(o.from.y!==o.to.y&&(y=y.concat(h),r.from=t.effects.setTransition(r,h,o.from.y,r.from),r.to=t.effects.setTransition(r,h,o.to.y,r.to)),o.from.x!==o.to.x&&(y=y.concat(u),r.from=t.effects.setTransition(r,u,o.from.x,r.from),r.to=t.effects.setTransition(r,u,o.to.x,r.to))),("content"===m||"both"===m)&&o.from.y!==o.to.y&&(y=y.concat(d).concat(c),r.from=t.effects.setTransition(r,d,o.from.y,r.from),r.to=t.effects.setTransition(r,d,o.to.y,r.to)),t.effects.save(r,y),r.show(),t.effects.createWrapper(r),r.css("overflow","hidden").css(r.from),g&&(s=t.effects.getBaseline(g,n),r.from.top=(n.outerHeight-r.outerHeight())*s.y,r.from.left=(n.outerWidth-r.outerWidth())*s.x,r.to.top=(n.outerHeight-r.to.outerHeight)*s.y,r.to.left=(n.outerWidth-r.to.outerWidth)*s.x),r.css(r.from),("content"===m||"both"===m)&&(h=h.concat(["marginTop","marginBottom"]).concat(d),u=u.concat(["marginLeft","marginRight"]),c=a.concat(h).concat(u),r.find("*[width]").each(function(){var i=t(this),n={height:i.height(),width:i.width(),outerHeight:i.outerHeight(),outerWidth:i.outerWidth()};p&&t.effects.save(i,c),i.from={height:n.height*o.from.y,width:n.width*o.from.x,outerHeight:n.outerHeight*o.from.y,outerWidth:n.outerWidth*o.from.x},i.to={height:n.height*o.to.y,width:n.width*o.to.x,outerHeight:n.height*o.to.y,outerWidth:n.width*o.to.x},o.from.y!==o.to.y&&(i.from=t.effects.setTransition(i,h,o.from.y,i.from),i.to=t.effects.setTransition(i,h,o.to.y,i.to)),o.from.x!==o.to.x&&(i.from=t.effects.setTransition(i,u,o.from.x,i.from),i.to=t.effects.setTransition(i,u,o.to.x,i.to)),i.css(i.from),i.animate(i.to,e.duration,e.easing,function(){p&&t.effects.restore(i,c)})})),r.animate(r.to,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){0===r.to.opacity&&r.css("opacity",r.from.opacity),"hide"===f&&r.hide(),t.effects.restore(r,y),p||("static"===v?r.css({position:"relative",top:r.to.top,left:r.to.left}):t.each(["top","left"],function(t,e){r.css(e,function(e,i){var n=parseInt(i,10),s=t?r.to.left:r.to.top;return"auto"===i?s+"px":n+s+"px"})})),t.effects.removeWrapper(r),i()}})}}(jQuery),function(t){t.effects.effect.shake=function(e,i){var n,s=t(this),o=["position","top","bottom","left","right","height","width"],r=t.effects.setMode(s,e.mode||"effect"),a=e.direction||"left",l=e.distance||20,c=e.times||3,d=2*c+1,h=Math.round(e.duration/d),u="up"===a||"down"===a?"top":"left",f="up"===a||"left"===a,p={},m={},g={},v=s.queue(),y=v.length;for(t.effects.save(s,o),s.show(),t.effects.createWrapper(s),p[u]=(f?"-=":"+=")+l,m[u]=(f?"+=":"-=")+2*l,g[u]=(f?"-=":"+=")+2*l,s.animate(p,h,e.easing),n=1;c>n;n++)s.animate(m,h,e.easing).animate(g,h,e.easing);s.animate(m,h,e.easing).animate(p,h/2,e.easing).queue(function(){"hide"===r&&s.hide(),t.effects.restore(s,o),t.effects.removeWrapper(s),i()}),y>1&&v.splice.apply(v,[1,0].concat(v.splice(y,d+1))),s.dequeue()}}(jQuery),function(t){t.effects.effect.slide=function(e,i){var n,s=t(this),o=["position","top","bottom","left","right","width","height"],r=t.effects.setMode(s,e.mode||"show"),a="show"===r,l=e.direction||"left",c="up"===l||"down"===l?"top":"left",d="up"===l||"left"===l,h={};t.effects.save(s,o),s.show(),n=e.distance||s["top"===c?"outerHeight":"outerWidth"](!0),t.effects.createWrapper(s).css({overflow:"hidden"}),a&&s.css(c,d?isNaN(n)?"-"+n:-n:n),h[c]=(a?d?"+=":"-=":d?"-=":"+=")+n,s.animate(h,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){"hide"===r&&s.hide(),t.effects.restore(s,o),t.effects.removeWrapper(s),i()}})}}(jQuery),function(t){t.effects.effect.transfer=function(e,i){var n=t(this),s=t(e.to),o="fixed"===s.css("position"),r=t("body"),a=o?r.scrollTop():0,l=o?r.scrollLeft():0,c=s.offset(),d={top:c.top-a,left:c.left-l,height:s.innerHeight(),width:s.innerWidth()},h=n.offset(),u=t("<div class='ui-effects-transfer'></div>").appendTo(document.body).addClass(e.className).css({top:h.top-a,left:h.left-l,height:n.innerHeight(),width:n.innerWidth(),position:o?"fixed":"absolute"}).animate(d,e.duration,e.easing,function(){u.remove(),i()})}}(jQuery),function(t){t.widget("ui.menu",{version:"1.10.3",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,t.proxy(function(t){this.options.disabled&&t.preventDefault()},this)),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item > a":function(t){t.preventDefault()},"click .ui-state-disabled > a":function(t){t.preventDefault()},"click .ui-menu-item:has(a)":function(e){var i=t(e.target).closest(".ui-menu-item");!this.mouseHandled&&i.not(".ui-state-disabled").length&&(this.mouseHandled=!0,this.select(e),i.has(".ui-menu").length?this.expand(e):this.element.is(":focus")||(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(e){var i=t(e.currentTarget);i.siblings().children(".ui-state-active").removeClass("ui-state-active"),this.focus(e,i)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(t,e){var i=this.active||this.element.children(".ui-menu-item").eq(0);e||this.focus(t,i)},blur:function(e){this._delay(function(){t.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(e)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(e){t(e.target).closest(".ui-menu").length||this.collapseAll(e),this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var e=t(this);e.data("ui-menu-submenu-carat")&&e.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(e){function i(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var n,s,o,r,a,l=!0;switch(e.keyCode){case t.ui.keyCode.PAGE_UP:this.previousPage(e);break;case t.ui.keyCode.PAGE_DOWN:this.nextPage(e);break;case t.ui.keyCode.HOME:this._move("first","first",e);break;case t.ui.keyCode.END:this._move("last","last",e);break;case t.ui.keyCode.UP:this.previous(e);break;case t.ui.keyCode.DOWN:this.next(e);break;case t.ui.keyCode.LEFT:this.collapse(e);break;case t.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(e);break;case t.ui.keyCode.ENTER:case t.ui.keyCode.SPACE:this._activate(e);break;case t.ui.keyCode.ESCAPE:this.collapse(e);break;default:l=!1,s=this.previousFilter||"",o=String.fromCharCode(e.keyCode),r=!1,clearTimeout(this.filterTimer),o===s?r=!0:o=s+o,a=RegExp("^"+i(o),"i"),n=this.activeMenu.children(".ui-menu-item").filter(function(){return a.test(t(this).children("a").text())}),n=r&&-1!==n.index(this.active.next())?this.active.nextAll(".ui-menu-item"):n,n.length||(o=String.fromCharCode(e.keyCode),a=RegExp("^"+i(o),"i"),n=this.activeMenu.children(".ui-menu-item").filter(function(){return a.test(t(this).children("a").text())})),n.length?(this.focus(e,n),n.length>1?(this.previousFilter=o,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter):delete this.previousFilter}l&&e.preventDefault()},_activate:function(t){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(t):this.select(t))},refresh:function(){var e,i=this.options.icons.submenu,n=this.element.find(this.options.menus);n.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var e=t(this),n=e.prev("a"),s=t("<span>").addClass("ui-menu-icon ui-icon "+i).data("ui-menu-submenu-carat",!0);n.attr("aria-haspopup","true").prepend(s),e.attr("aria-labelledby",n.attr("id"))}),e=n.add(this.element),e.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()}),e.children(":not(.ui-menu-item)").each(function(){var e=t(this);/[^\-\u2014\u2013\s]/.test(e.text())||e.addClass("ui-widget-content ui-menu-divider")}),e.children(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!t.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(t,e){"icons"===t&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(e.submenu),this._super(t,e)},focus:function(t,e){var i,n;this.blur(t,t&&"focus"===t.type),this._scrollIntoView(e),this.active=e.first(),n=this.active.children("a").addClass("ui-state-focus"),this.options.role&&this.element.attr("aria-activedescendant",n.attr("id")),this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"),t&&"keydown"===t.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),i=e.children(".ui-menu"),i.length&&/^mouse/.test(t.type)&&this._startOpening(i),this.activeMenu=e.parent(),this._trigger("focus",t,{item:e})},_scrollIntoView:function(e){var i,n,s,o,r,a;this._hasScroll()&&(i=parseFloat(t.css(this.activeMenu[0],"borderTopWidth"))||0,n=parseFloat(t.css(this.activeMenu[0],"paddingTop"))||0,s=e.offset().top-this.activeMenu.offset().top-i-n,o=this.activeMenu.scrollTop(),r=this.activeMenu.height(),a=e.height(),0>s?this.activeMenu.scrollTop(o+s):s+a>r&&this.activeMenu.scrollTop(o+s-r+a))},blur:function(t,e){e||clearTimeout(this.timer),this.active&&(this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",t,{item:this.active}))},_startOpening:function(t){clearTimeout(this.timer),"true"===t.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(t)},this.delay))},_open:function(e){var i=t.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(e.parents(".ui-menu")).hide().attr("aria-hidden","true"),e.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(i)},collapseAll:function(e,i){clearTimeout(this.timer),this.timer=this._delay(function(){var n=i?this.element:t(e&&e.target).closest(this.element.find(".ui-menu"));n.length||(n=this.element),this._close(n),this.blur(e),this.activeMenu=n},this.delay)},_close:function(t){t||(t=this.active?this.active.parent():this.element),t.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(t){var e=this.active&&this.active.parent().closest(".ui-menu-item",this.element);e&&e.length&&(this._close(),this.focus(t,e))},expand:function(t){var e=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();e&&e.length&&(this._open(e.parent()),this._delay(function(){this.focus(t,e)}))},next:function(t){this._move("next","first",t)},previous:function(t){this._move("prev","last",t)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(t,e,i){var n;this.active&&(n="first"===t||"last"===t?this.active["first"===t?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[t+"All"](".ui-menu-item").eq(0)),n&&n.length&&this.active||(n=this.activeMenu.children(".ui-menu-item")[e]()),this.focus(i,n)},nextPage:function(e){var i,n,s;return this.active?void(this.isLastItem()||(this._hasScroll()?(n=this.active.offset().top,s=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return i=t(this),0>i.offset().top-n-s}),this.focus(e,i)):this.focus(e,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]()))):void this.next(e)},previousPage:function(e){var i,n,s;return this.active?void(this.isFirstItem()||(this._hasScroll()?(n=this.active.offset().top,s=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return i=t(this),i.offset().top-n+s>0}),this.focus(e,i)):this.focus(e,this.activeMenu.children(".ui-menu-item").first()))):void this.next(e)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(e){this.active=this.active||t(e.target).closest(".ui-menu-item");var i={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(e,!0),this._trigger("select",e,i)}})}(jQuery),function(t,e){function i(t,e,i){return[parseFloat(t[0])*(f.test(t[0])?e/100:1),parseFloat(t[1])*(f.test(t[1])?i/100:1)]}function n(e,i){return parseInt(t.css(e,i),10)||0}function s(e){var i=e[0];return 9===i.nodeType?{width:e.width(),height:e.height(),offset:{top:0,left:0}}:t.isWindow(i)?{width:e.width(),height:e.height(),offset:{top:e.scrollTop(),left:e.scrollLeft()}}:i.preventDefault?{width:0,height:0,offset:{top:i.pageY,left:i.pageX}}:{width:e.outerWidth(),height:e.outerHeight(),offset:e.offset()}}t.ui=t.ui||{};var o,r=Math.max,a=Math.abs,l=Math.round,c=/left|center|right/,d=/top|center|bottom/,h=/[\+\-]\d+(\.[\d]+)?%?/,u=/^\w+/,f=/%$/,p=t.fn.position;t.position={scrollbarWidth:function(){if(o!==e)return o;var i,n,s=t("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),r=s.children()[0];return t("body").append(s),i=r.offsetWidth,s.css("overflow","scroll"),n=r.offsetWidth,i===n&&(n=s[0].clientWidth),s.remove(),o=i-n},getScrollInfo:function(e){var i=e.isWindow?"":e.element.css("overflow-x"),n=e.isWindow?"":e.element.css("overflow-y"),s="scroll"===i||"auto"===i&&e.width<e.element[0].scrollWidth,o="scroll"===n||"auto"===n&&e.height<e.element[0].scrollHeight;return{width:o?t.position.scrollbarWidth():0,height:s?t.position.scrollbarWidth():0}},getWithinInfo:function(e){var i=t(e||window),n=t.isWindow(i[0]);return{element:i,isWindow:n,offset:i.offset()||{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:n?i.width():i.outerWidth(),height:n?i.height():i.outerHeight()}}},t.fn.position=function(e){if(!e||!e.of)return p.apply(this,arguments);e=t.extend({},e);var o,f,m,g,v,y,b=t(e.of),w=t.position.getWithinInfo(e.within),_=t.position.getScrollInfo(w),k=(e.collision||"flip").split(" "),x={};return y=s(b),b[0].preventDefault&&(e.at="left top"),f=y.width,m=y.height,g=y.offset,v=t.extend({},g),t.each(["my","at"],function(){var t,i,n=(e[this]||"").split(" ");1===n.length&&(n=c.test(n[0])?n.concat(["center"]):d.test(n[0])?["center"].concat(n):["center","center"]),n[0]=c.test(n[0])?n[0]:"center",n[1]=d.test(n[1])?n[1]:"center",t=h.exec(n[0]),i=h.exec(n[1]),x[this]=[t?t[0]:0,i?i[0]:0],e[this]=[u.exec(n[0])[0],u.exec(n[1])[0]]}),1===k.length&&(k[1]=k[0]),"right"===e.at[0]?v.left+=f:"center"===e.at[0]&&(v.left+=f/2),"bottom"===e.at[1]?v.top+=m:"center"===e.at[1]&&(v.top+=m/2),o=i(x.at,f,m),v.left+=o[0],v.top+=o[1],this.each(function(){var s,c,d=t(this),h=d.outerWidth(),u=d.outerHeight(),p=n(this,"marginLeft"),y=n(this,"marginTop"),C=h+p+n(this,"marginRight")+_.width,S=u+y+n(this,"marginBottom")+_.height,T=t.extend({},v),E=i(x.my,d.outerWidth(),d.outerHeight());"right"===e.my[0]?T.left-=h:"center"===e.my[0]&&(T.left-=h/2),"bottom"===e.my[1]?T.top-=u:"center"===e.my[1]&&(T.top-=u/2),T.left+=E[0],T.top+=E[1],t.support.offsetFractions||(T.left=l(T.left),T.top=l(T.top)),s={marginLeft:p,marginTop:y},t.each(["left","top"],function(i,n){t.ui.position[k[i]]&&t.ui.position[k[i]][n](T,{targetWidth:f,targetHeight:m,elemWidth:h,elemHeight:u,collisionPosition:s,collisionWidth:C,collisionHeight:S,offset:[o[0]+E[0],o[1]+E[1]],my:e.my,at:e.at,within:w,elem:d})}),e.using&&(c=function(t){var i=g.left-T.left,n=i+f-h,s=g.top-T.top,o=s+m-u,l={target:{element:b,left:g.left,top:g.top,width:f,height:m},element:{element:d,left:T.left,top:T.top,width:h,height:u},horizontal:0>n?"left":i>0?"right":"center",vertical:0>o?"top":s>0?"bottom":"middle"};h>f&&f>a(i+n)&&(l.horizontal="center"),u>m&&m>a(s+o)&&(l.vertical="middle"),l.important=r(a(i),a(n))>r(a(s),a(o))?"horizontal":"vertical",e.using.call(this,t,l)}),d.offset(t.extend(T,{using:c}))})},t.ui.position={fit:{left:function(t,e){var i,n=e.within,s=n.isWindow?n.scrollLeft:n.offset.left,o=n.width,a=t.left-e.collisionPosition.marginLeft,l=s-a,c=a+e.collisionWidth-o-s;e.collisionWidth>o?l>0&&0>=c?(i=t.left+l+e.collisionWidth-o-s,t.left+=l-i):t.left=c>0&&0>=l?s:l>c?s+o-e.collisionWidth:s:l>0?t.left+=l:c>0?t.left-=c:t.left=r(t.left-a,t.left)},top:function(t,e){var i,n=e.within,s=n.isWindow?n.scrollTop:n.offset.top,o=e.within.height,a=t.top-e.collisionPosition.marginTop,l=s-a,c=a+e.collisionHeight-o-s;e.collisionHeight>o?l>0&&0>=c?(i=t.top+l+e.collisionHeight-o-s,t.top+=l-i):t.top=c>0&&0>=l?s:l>c?s+o-e.collisionHeight:s:l>0?t.top+=l:c>0?t.top-=c:t.top=r(t.top-a,t.top)}},flip:{left:function(t,e){var i,n,s=e.within,o=s.offset.left+s.scrollLeft,r=s.width,l=s.isWindow?s.scrollLeft:s.offset.left,c=t.left-e.collisionPosition.marginLeft,d=c-l,h=c+e.collisionWidth-r-l,u="left"===e.my[0]?-e.elemWidth:"right"===e.my[0]?e.elemWidth:0,f="left"===e.at[0]?e.targetWidth:"right"===e.at[0]?-e.targetWidth:0,p=-2*e.offset[0];0>d?(i=t.left+u+f+p+e.collisionWidth-r-o,(0>i||a(d)>i)&&(t.left+=u+f+p)):h>0&&(n=t.left-e.collisionPosition.marginLeft+u+f+p-l,(n>0||h>a(n))&&(t.left+=u+f+p))},top:function(t,e){var i,n,s=e.within,o=s.offset.top+s.scrollTop,r=s.height,l=s.isWindow?s.scrollTop:s.offset.top,c=t.top-e.collisionPosition.marginTop,d=c-l,h=c+e.collisionHeight-r-l,u="top"===e.my[1],f=u?-e.elemHeight:"bottom"===e.my[1]?e.elemHeight:0,p="top"===e.at[1]?e.targetHeight:"bottom"===e.at[1]?-e.targetHeight:0,m=-2*e.offset[1];0>d?(n=t.top+f+p+m+e.collisionHeight-r-o,t.top+f+p+m>d&&(0>n||a(d)>n)&&(t.top+=f+p+m)):h>0&&(i=t.top-e.collisionPosition.marginTop+f+p+m-l,t.top+f+p+m>h&&(i>0||h>a(i))&&(t.top+=f+p+m))}},flipfit:{left:function(){t.ui.position.flip.left.apply(this,arguments),t.ui.position.fit.left.apply(this,arguments)},top:function(){t.ui.position.flip.top.apply(this,arguments),t.ui.position.fit.top.apply(this,arguments)}}},function(){var e,i,n,s,o,r=document.getElementsByTagName("body")[0],a=document.createElement("div");e=document.createElement(r?"div":"body"),n={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},r&&t.extend(n,{position:"absolute",left:"-1000px",top:"-1000px"});for(o in n)e.style[o]=n[o];e.appendChild(a),i=r||document.documentElement,i.insertBefore(e,i.firstChild),a.style.cssText="position: absolute; left: 10.7432222px;",s=t(a).offset().left,t.support.offsetFractions=s>10&&11>s,e.innerHTML="",i.removeChild(e)}()}(jQuery),function(t,e){t.widget("ui.progressbar",{version:"1.10.3",options:{max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue(),this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min}),this.valueDiv=t("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove()},value:function(t){return t===e?this.options.value:(this.options.value=this._constrainedValue(t),this._refreshValue(),e)},_constrainedValue:function(t){return t===e&&(t=this.options.value),this.indeterminate=t===!1,"number"!=typeof t&&(t=0),!this.indeterminate&&Math.min(this.options.max,Math.max(this.min,t))},_setOptions:function(t){var e=t.value;delete t.value,this._super(t),this.options.value=this._constrainedValue(e),this._refreshValue()},_setOption:function(t,e){"max"===t&&(e=Math.max(this.min,e)),this._super(t,e)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var e=this.options.value,i=this._percentage();this.valueDiv.toggle(this.indeterminate||e>this.min).toggleClass("ui-corner-right",e===this.options.max).width(i.toFixed(0)+"%"),this.element.toggleClass("ui-progressbar-indeterminate",this.indeterminate),this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=t("<div class='ui-progressbar-overlay'></div>").appendTo(this.valueDiv))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":e}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this.oldValue!==e&&(this.oldValue=e,this._trigger("change")),e===this.options.max&&this._trigger("complete")}})}(jQuery),function(t){var e=5;t.widget("ui.slider",t.ui.mouse,{version:"1.10.3",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"),this._refresh(),this._setOption("disabled",this.options.disabled),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var e,i,n=this.options,s=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),o="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",r=[];for(i=n.values&&n.values.length||1,s.length>i&&(s.slice(i).remove(),s=s.slice(0,i)),e=s.length;i>e;e++)r.push(o);this.handles=s.add(t(r.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.each(function(e){t(this).data("ui-slider-handle-index",e)})},_createRange:function(){var e=this.options,i="";e.range?(e.range===!0&&(e.values?e.values.length&&2!==e.values.length?e.values=[e.values[0],e.values[0]]:t.isArray(e.values)&&(e.values=e.values.slice(0)):e.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""}):(this.range=t("<div></div>").appendTo(this.element),i="ui-slider-range ui-widget-header ui-corner-all"),this.range.addClass(i+("min"===e.range||"max"===e.range?" ui-slider-range-"+e.range:""))):this.range=t([])},_setupEvents:function(){var t=this.handles.add(this.range).filter("a");this._off(t),this._on(t,this._handleEvents),this._hoverable(t),this._focusable(t)},_destroy:function(){this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(e){var i,n,s,o,r,a,l,c,d=this,h=this.options;return!h.disabled&&(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),i={x:e.pageX,y:e.pageY},n=this._normValueFromMouse(i),s=this._valueMax()-this._valueMin()+1,this.handles.each(function(e){var i=Math.abs(n-d.values(e));(s>i||s===i&&(e===d._lastChangedValue||d.values(e)===h.min))&&(s=i,o=t(this),r=e)}),a=this._start(e,r),a!==!1&&(this._mouseSliding=!0,this._handleIndex=r,o.addClass("ui-state-active").focus(),l=o.offset(),c=!t(e.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=c?{left:0,top:0}:{left:e.pageX-l.left-o.width()/2,
top:e.pageY-l.top-o.height()/2-(parseInt(o.css("borderTopWidth"),10)||0)-(parseInt(o.css("borderBottomWidth"),10)||0)+(parseInt(o.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(e,r,n),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(t){var e={x:t.pageX,y:t.pageY},i=this._normValueFromMouse(e);return this._slide(t,this._handleIndex,i),!1},_mouseStop:function(t){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(t,this._handleIndex),this._change(t,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(t){var e,i,n,s,o;return"horizontal"===this.orientation?(e=this.elementSize.width,i=t.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(e=this.elementSize.height,i=t.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),n=i/e,n>1&&(n=1),0>n&&(n=0),"vertical"===this.orientation&&(n=1-n),s=this._valueMax()-this._valueMin(),o=this._valueMin()+n*s,this._trimAlignValue(o)},_start:function(t,e){var i={handle:this.handles[e],value:this.value()};return this.options.values&&this.options.values.length&&(i.value=this.values(e),i.values=this.values()),this._trigger("start",t,i)},_slide:function(t,e,i){var n,s,o;this.options.values&&this.options.values.length?(n=this.values(e?0:1),2===this.options.values.length&&this.options.range===!0&&(0===e&&i>n||1===e&&n>i)&&(i=n),i!==this.values(e)&&(s=this.values(),s[e]=i,o=this._trigger("slide",t,{handle:this.handles[e],value:i,values:s}),n=this.values(e?0:1),o!==!1&&this.values(e,i,!0))):i!==this.value()&&(o=this._trigger("slide",t,{handle:this.handles[e],value:i}),o!==!1&&this.value(i))},_stop:function(t,e){var i={handle:this.handles[e],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(e),i.values=this.values()),this._trigger("stop",t,i)},_change:function(t,e){if(!this._keySliding&&!this._mouseSliding){var i={handle:this.handles[e],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(e),i.values=this.values()),this._lastChangedValue=e,this._trigger("change",t,i)}},value:function(t){return arguments.length?(this.options.value=this._trimAlignValue(t),this._refreshValue(),void this._change(null,0)):this._value()},values:function(e,i){var n,s,o;if(arguments.length>1)return this.options.values[e]=this._trimAlignValue(i),this._refreshValue(),void this._change(null,e);if(!arguments.length)return this._values();if(!t.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(e):this.value();for(n=this.options.values,s=arguments[0],o=0;n.length>o;o+=1)n[o]=this._trimAlignValue(s[o]),this._change(null,o);this._refreshValue()},_setOption:function(e,i){var n,s=0;switch("range"===e&&this.options.range===!0&&("min"===i?(this.options.value=this._values(0),this.options.values=null):"max"===i&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),t.isArray(this.options.values)&&(s=this.options.values.length),t.Widget.prototype._setOption.apply(this,arguments),e){case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),n=0;s>n;n+=1)this._change(null,n);this._animateOff=!1;break;case"min":case"max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_value:function(){var t=this.options.value;return t=this._trimAlignValue(t)},_values:function(t){var e,i,n;if(arguments.length)return e=this.options.values[t],e=this._trimAlignValue(e);if(this.options.values&&this.options.values.length){for(i=this.options.values.slice(),n=0;i.length>n;n+=1)i[n]=this._trimAlignValue(i[n]);return i}return[]},_trimAlignValue:function(t){if(this._valueMin()>=t)return this._valueMin();if(t>=this._valueMax())return this._valueMax();var e=this.options.step>0?this.options.step:1,i=(t-this._valueMin())%e,n=t-i;return 2*Math.abs(i)>=e&&(n+=i>0?e:-e),parseFloat(n.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var e,i,n,s,o,r=this.options.range,a=this.options,l=this,c=!this._animateOff&&a.animate,d={};this.options.values&&this.options.values.length?this.handles.each(function(n){i=100*((l.values(n)-l._valueMin())/(l._valueMax()-l._valueMin())),d["horizontal"===l.orientation?"left":"bottom"]=i+"%",t(this).stop(1,1)[c?"animate":"css"](d,a.animate),l.options.range===!0&&("horizontal"===l.orientation?(0===n&&l.range.stop(1,1)[c?"animate":"css"]({left:i+"%"},a.animate),1===n&&l.range[c?"animate":"css"]({width:i-e+"%"},{queue:!1,duration:a.animate})):(0===n&&l.range.stop(1,1)[c?"animate":"css"]({bottom:i+"%"},a.animate),1===n&&l.range[c?"animate":"css"]({height:i-e+"%"},{queue:!1,duration:a.animate}))),e=i}):(n=this.value(),s=this._valueMin(),o=this._valueMax(),i=o!==s?100*((n-s)/(o-s)):0,d["horizontal"===this.orientation?"left":"bottom"]=i+"%",this.handle.stop(1,1)[c?"animate":"css"](d,a.animate),"min"===r&&"horizontal"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({width:i+"%"},a.animate),"max"===r&&"horizontal"===this.orientation&&this.range[c?"animate":"css"]({width:100-i+"%"},{queue:!1,duration:a.animate}),"min"===r&&"vertical"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({height:i+"%"},a.animate),"max"===r&&"vertical"===this.orientation&&this.range[c?"animate":"css"]({height:100-i+"%"},{queue:!1,duration:a.animate}))},_handleEvents:{keydown:function(i){var n,s,o,r,a=t(i.target).data("ui-slider-handle-index");switch(i.keyCode){case t.ui.keyCode.HOME:case t.ui.keyCode.END:case t.ui.keyCode.PAGE_UP:case t.ui.keyCode.PAGE_DOWN:case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(i.preventDefault(),!this._keySliding&&(this._keySliding=!0,t(i.target).addClass("ui-state-active"),n=this._start(i,a),n===!1))return}switch(r=this.options.step,s=o=this.options.values&&this.options.values.length?this.values(a):this.value(),i.keyCode){case t.ui.keyCode.HOME:o=this._valueMin();break;case t.ui.keyCode.END:o=this._valueMax();break;case t.ui.keyCode.PAGE_UP:o=this._trimAlignValue(s+(this._valueMax()-this._valueMin())/e);break;case t.ui.keyCode.PAGE_DOWN:o=this._trimAlignValue(s-(this._valueMax()-this._valueMin())/e);break;case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:if(s===this._valueMax())return;o=this._trimAlignValue(s+r);break;case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(s===this._valueMin())return;o=this._trimAlignValue(s-r)}this._slide(i,a,o)},click:function(t){t.preventDefault()},keyup:function(e){var i=t(e.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(e,i),this._change(e,i),t(e.target).removeClass("ui-state-active"))}}})}(jQuery),function(t){function e(t){return function(){var e=this.element.val();t.apply(this,arguments),this._refresh(),e!==this.element.val()&&this._trigger("change")}}t.widget("ui.spinner",{version:"1.10.3",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var e={},i=this.element;return t.each(["min","max","step"],function(t,n){var s=i.attr(n);void 0!==s&&s.length&&(e[n]=s)}),e},_events:{keydown:function(t){this._start(t)&&this._keydown(t)&&t.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(t){return this.cancelBlur?void delete this.cancelBlur:(this._stop(),this._refresh(),void(this.previous!==this.element.val()&&this._trigger("change",t)))},mousewheel:function(t,e){if(e){if(!this.spinning&&!this._start(t))return!1;this._spin((e>0?1:-1)*this.options.step,t),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(t)},100),t.preventDefault()}},"mousedown .ui-spinner-button":function(e){function i(){var t=this.element[0]===this.document[0].activeElement;t||(this.element.focus(),this.previous=n,this._delay(function(){this.previous=n}))}var n;n=this.element[0]===this.document[0].activeElement?this.previous:this.element.val(),e.preventDefault(),i.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,i.call(this)}),this._start(e)!==!1&&this._repeat(null,t(e.currentTarget).hasClass("ui-spinner-up")?1:-1,e)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(e){return t(e.currentTarget).hasClass("ui-state-active")?this._start(e)!==!1&&void this._repeat(null,t(e.currentTarget).hasClass("ui-spinner-up")?1:-1,e):void 0},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var t=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this.element.attr("role","spinbutton"),this.buttons=t.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all"),this.buttons.height()>Math.ceil(.5*t.height())&&t.height()>0&&t.height(t.height()),this.options.disabled&&this.disable()},_keydown:function(e){var i=this.options,n=t.ui.keyCode;switch(e.keyCode){case n.UP:return this._repeat(null,1,e),!0;case n.DOWN:return this._repeat(null,-1,e),!0;case n.PAGE_UP:return this._repeat(null,i.page,e),!0;case n.PAGE_DOWN:return this._repeat(null,-i.page,e),!0}return!1},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon "+this.options.icons.up+"'>&#9650;</span></a><a class='ui-spinner-button ui-spinner-down ui-corner-br'><span class='ui-icon "+this.options.icons.down+"'>&#9660;</span></a>"},_start:function(t){return!(!this.spinning&&this._trigger("start",t)===!1)&&(this.counter||(this.counter=1),this.spinning=!0,!0)},_repeat:function(t,e,i){t=t||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,e,i)},t),this._spin(e*this.options.step,i)},_spin:function(t,e){var i=this.value()||0;this.counter||(this.counter=1),i=this._adjustValue(i+t*this._increment(this.counter)),this.spinning&&this._trigger("spin",e,{value:i})===!1||(this._value(i),this.counter++)},_increment:function(e){var i=this.options.incremental;return i?t.isFunction(i)?i(e):Math.floor(e*e*e/5e4-e*e/500+17*e/200+1):1},_precision:function(){var t=this._precisionOf(this.options.step);return null!==this.options.min&&(t=Math.max(t,this._precisionOf(this.options.min))),t},_precisionOf:function(t){var e=""+t,i=e.indexOf(".");return-1===i?0:e.length-i-1},_adjustValue:function(t){var e,i,n=this.options;return e=null!==n.min?n.min:0,i=t-e,i=Math.round(i/n.step)*n.step,t=e+i,t=parseFloat(t.toFixed(this._precision())),null!==n.max&&t>n.max?n.max:null!==n.min&&n.min>t?n.min:t},_stop:function(t){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",t))},_setOption:function(t,e){if("culture"===t||"numberFormat"===t){var i=this._parse(this.element.val());return this.options[t]=e,void this.element.val(this._format(i))}("max"===t||"min"===t||"step"===t)&&"string"==typeof e&&(e=this._parse(e)),"icons"===t&&(this.buttons.first().find(".ui-icon").removeClass(this.options.icons.up).addClass(e.up),this.buttons.last().find(".ui-icon").removeClass(this.options.icons.down).addClass(e.down)),this._super(t,e),"disabled"===t&&(e?(this.element.prop("disabled",!0),this.buttons.button("disable")):(this.element.prop("disabled",!1),this.buttons.button("enable")))},_setOptions:e(function(t){this._super(t),this._value(this.element.val())}),_parse:function(t){return"string"==typeof t&&""!==t&&(t=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(t,10,this.options.culture):+t),""===t||isNaN(t)?null:t},_format:function(t){return""===t?"":window.Globalize&&this.options.numberFormat?Globalize.format(t,this.options.numberFormat,this.options.culture):t},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},_value:function(t,e){var i;""!==t&&(i=this._parse(t),null!==i&&(e||(i=this._adjustValue(i)),t=this._format(i))),this.element.val(t),this._refresh()},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:e(function(t){this._stepUp(t)}),_stepUp:function(t){this._start()&&(this._spin((t||1)*this.options.step),this._stop())},stepDown:e(function(t){this._stepDown(t)}),_stepDown:function(t){this._start()&&(this._spin((t||1)*-this.options.step),this._stop())},pageUp:e(function(t){this._stepUp((t||1)*this.options.page)}),pageDown:e(function(t){this._stepDown((t||1)*this.options.page)}),value:function(t){return arguments.length?void e(this._value).call(this,t):this._parse(this.element.val())},widget:function(){return this.uiSpinner}})}(jQuery),function(t,e){function i(){return++s}function n(t){return t.hash.length>1&&decodeURIComponent(t.href.replace(o,""))===decodeURIComponent(location.href.replace(o,""))}var s=0,o=/#.*$/;t.widget("ui.tabs",{version:"1.10.3",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_create:function(){var e=this,i=this.options;this.running=!1,this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",i.collapsible).delegate(".ui-tabs-nav > li","mousedown"+this.eventNamespace,function(e){t(this).is(".ui-state-disabled")&&e.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){t(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this._processTabs(),i.active=this._initialActive(),t.isArray(i.disabled)&&(i.disabled=t.unique(i.disabled.concat(t.map(this.tabs.filter(".ui-state-disabled"),function(t){return e.tabs.index(t)}))).sort()),this.active=this.options.active!==!1&&this.anchors.length?this._findActive(i.active):t(),this._refresh(),this.active.length&&this.load(i.active)},_initialActive:function(){var i=this.options.active,n=this.options.collapsible,s=location.hash.substring(1);return null===i&&(s&&this.tabs.each(function(n,o){return t(o).attr("aria-controls")===s?(i=n,!1):e}),null===i&&(i=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),(null===i||-1===i)&&(i=!!this.tabs.length&&0)),i!==!1&&(i=this.tabs.index(this.tabs.eq(i)),-1===i&&(i=!n&&0)),!n&&i===!1&&this.anchors.length&&(i=0),i},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):t()}},_tabKeydown:function(i){var n=t(this.document[0].activeElement).closest("li"),s=this.tabs.index(n),o=!0;if(!this._handlePageNav(i)){switch(i.keyCode){case t.ui.keyCode.RIGHT:case t.ui.keyCode.DOWN:s++;break;case t.ui.keyCode.UP:case t.ui.keyCode.LEFT:o=!1,s--;break;case t.ui.keyCode.END:s=this.anchors.length-1;break;case t.ui.keyCode.HOME:s=0;break;case t.ui.keyCode.SPACE:return i.preventDefault(),clearTimeout(this.activating),this._activate(s),e;case t.ui.keyCode.ENTER:return i.preventDefault(),clearTimeout(this.activating),this._activate(s!==this.options.active&&s),e;default:return}i.preventDefault(),clearTimeout(this.activating),s=this._focusNextTab(s,o),i.ctrlKey||(n.attr("aria-selected","false"),this.tabs.eq(s).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",s)},this.delay))}},_panelKeydown:function(e){this._handlePageNav(e)||e.ctrlKey&&e.keyCode===t.ui.keyCode.UP&&(e.preventDefault(),this.active.focus())},_handlePageNav:function(i){return i.altKey&&i.keyCode===t.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):i.altKey&&i.keyCode===t.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):e},_findNextTab:function(e,i){function n(){return e>s&&(e=0),0>e&&(e=s),e}for(var s=this.tabs.length-1;-1!==t.inArray(n(),this.options.disabled);)e=i?e+1:e-1;return e},_focusNextTab:function(t,e){return t=this._findNextTab(t,e),this.tabs.eq(t).focus(),t},_setOption:function(t,i){return"active"===t?(this._activate(i),e):"disabled"===t?(this._setupDisabled(i),e):(this._super(t,i),"collapsible"===t&&(this.element.toggleClass("ui-tabs-collapsible",i),i||this.options.active!==!1||this._activate(0)),"event"===t&&this._setupEvents(i),"heightStyle"===t&&this._setupHeightStyle(i),e)},_tabId:function(t){return t.attr("aria-controls")||"ui-tabs-"+i()},_sanitizeSelector:function(t){return t?t.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var e=this.options,i=this.tablist.children(":has(a[href])");e.disabled=t.map(i.filter(".ui-state-disabled"),function(t){return i.index(t)}),this._processTabs(),e.active!==!1&&this.anchors.length?this.active.length&&!t.contains(this.tablist[0],this.active[0])?this.tabs.length===e.disabled.length?(e.active=!1,this.active=t()):this._activate(this._findNextTab(Math.max(0,e.active-1),!1)):e.active=this.tabs.index(this.active):(e.active=!1,this.active=t()),this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-expanded":"false","aria-hidden":"true"}),this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-expanded":"true","aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var e=this;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist"),this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1}),this.anchors=this.tabs.map(function(){return t("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1}),this.panels=t(),this.anchors.each(function(i,s){var o,r,a,l=t(s).uniqueId().attr("id"),c=t(s).closest("li"),d=c.attr("aria-controls");n(s)?(o=s.hash,r=e.element.find(e._sanitizeSelector(o))):(a=e._tabId(c),o="#"+a,r=e.element.find(o),r.length||(r=e._createPanel(a),r.insertAfter(e.panels[i-1]||e.tablist)),r.attr("aria-live","polite")),r.length&&(e.panels=e.panels.add(r)),d&&c.data("ui-tabs-aria-controls",d),c.attr({"aria-controls":o.substring(1),"aria-labelledby":l}),r.attr("aria-labelledby",l)}),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel")},_getList:function(){return this.element.find("ol,ul").eq(0)},_createPanel:function(e){return t("<div>").attr("id",e).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(e){t.isArray(e)&&(e.length?e.length===this.anchors.length&&(e=!0):e=!1);for(var i,n=0;i=this.tabs[n];n++)e===!0||-1!==t.inArray(n,e)?t(i).addClass("ui-state-disabled").attr("aria-disabled","true"):t(i).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=e},_setupEvents:function(e){var i={click:function(t){t.preventDefault()}};e&&t.each(e.split(" "),function(t,e){i[e]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(this.anchors,i),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(e){var i,n=this.element.parent();"fill"===e?(i=n.height(),i-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var e=t(this),n=e.css("position");"absolute"!==n&&"fixed"!==n&&(i-=e.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){i-=t(this).outerHeight(!0)}),this.panels.each(function(){t(this).height(Math.max(0,i-t(this).innerHeight()+t(this).height()))}).css("overflow","auto")):"auto"===e&&(i=0,this.panels.each(function(){i=Math.max(i,t(this).height("").height())}).height(i))},_eventHandler:function(e){var i=this.options,n=this.active,s=t(e.currentTarget),o=s.closest("li"),r=o[0]===n[0],a=r&&i.collapsible,l=a?t():this._getPanelForTab(o),c=n.length?this._getPanelForTab(n):t(),d={oldTab:n,oldPanel:c,newTab:a?t():o,newPanel:l};e.preventDefault(),o.hasClass("ui-state-disabled")||o.hasClass("ui-tabs-loading")||this.running||r&&!i.collapsible||this._trigger("beforeActivate",e,d)===!1||(i.active=!a&&this.tabs.index(o),this.active=r?t():o,this.xhr&&this.xhr.abort(),c.length||l.length||t.error("jQuery UI Tabs: Mismatching fragment identifier."),l.length&&this.load(this.tabs.index(o),e),this._toggle(e,d))},_toggle:function(e,i){function n(){o.running=!1,o._trigger("activate",e,i)}function s(){i.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),r.length&&o.options.show?o._show(r,o.options.show,n):(r.show(),n())}var o=this,r=i.newPanel,a=i.oldPanel;this.running=!0,a.length&&this.options.hide?this._hide(a,this.options.hide,function(){i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),s()}):(i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),a.hide(),s()),a.attr({"aria-expanded":"false","aria-hidden":"true"}),i.oldTab.attr("aria-selected","false"),r.length&&a.length?i.oldTab.attr("tabIndex",-1):r.length&&this.tabs.filter(function(){return 0===t(this).attr("tabIndex")}).attr("tabIndex",-1),r.attr({"aria-expanded":"true","aria-hidden":"false"}),i.newTab.attr({"aria-selected":"true",tabIndex:0})},_activate:function(e){var i,n=this._findActive(e);n[0]!==this.active[0]&&(n.length||(n=this.active),i=n.find(".ui-tabs-anchor")[0],this._eventHandler({target:i,currentTarget:i,preventDefault:t.noop}))},_findActive:function(e){return e===!1?t():this.tabs.eq(e)},_getIndex:function(t){return"string"==typeof t&&(t=this.anchors.index(this.anchors.filter("[href$='"+t+"']"))),t},_destroy:function(){this.xhr&&this.xhr.abort(),this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"),this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"),this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId(),this.tabs.add(this.panels).each(function(){t.data(this,"ui-tabs-destroy")?t(this).remove():t(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")}),this.tabs.each(function(){var e=t(this),i=e.data("ui-tabs-aria-controls");i?e.attr("aria-controls",i).removeData("ui-tabs-aria-controls"):e.removeAttr("aria-controls")}),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(i){var n=this.options.disabled;n!==!1&&(i===e?n=!1:(i=this._getIndex(i),n=t.isArray(n)?t.map(n,function(t){return t!==i?t:null}):t.map(this.tabs,function(t,e){return e!==i?e:null})),this._setupDisabled(n))},disable:function(i){var n=this.options.disabled;if(n!==!0){if(i===e)n=!0;else{if(i=this._getIndex(i),-1!==t.inArray(i,n))return;n=t.isArray(n)?t.merge([i],n).sort():[i]}this._setupDisabled(n)}},load:function(e,i){e=this._getIndex(e);var s=this,o=this.tabs.eq(e),r=o.find(".ui-tabs-anchor"),a=this._getPanelForTab(o),l={tab:o,panel:a};n(r[0])||(this.xhr=t.ajax(this._ajaxSettings(r,i,l)),this.xhr&&"canceled"!==this.xhr.statusText&&(o.addClass("ui-tabs-loading"),a.attr("aria-busy","true"),this.xhr.success(function(t){setTimeout(function(){a.html(t),s._trigger("load",i,l)},1)}).complete(function(t,e){setTimeout(function(){"abort"===e&&s.panels.stop(!1,!0),o.removeClass("ui-tabs-loading"),a.removeAttr("aria-busy"),t===s.xhr&&delete s.xhr},1)})))},_ajaxSettings:function(e,i,n){var s=this;return{url:e.attr("href"),beforeSend:function(e,o){return s._trigger("beforeLoad",i,t.extend({jqXHR:e,ajaxSettings:o},n))}}},_getPanelForTab:function(e){var i=t(e).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+i))}})}(jQuery),function(t){function e(e,i){var n=(e.attr("aria-describedby")||"").split(/\s+/);n.push(i),e.data("ui-tooltip-id",i).attr("aria-describedby",t.trim(n.join(" ")))}function i(e){var i=e.data("ui-tooltip-id"),n=(e.attr("aria-describedby")||"").split(/\s+/),s=t.inArray(i,n);-1!==s&&n.splice(s,1),e.removeData("ui-tooltip-id"),n=t.trim(n.join(" ")),n?e.attr("aria-describedby",n):e.removeAttr("aria-describedby")}var n=0;t.widget("ui.tooltip",{version:"1.10.3",options:{content:function(){var e=t(this).attr("title")||"";return t("<a>").text(e).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.options.disabled&&this._disable()},_setOption:function(e,i){var n=this;return"disabled"===e?(this[i?"_disable":"_enable"](),void(this.options[e]=i)):(this._super(e,i),void("content"===e&&t.each(this.tooltips,function(t,e){n._updateContent(e)})))},_disable:function(){var e=this;t.each(this.tooltips,function(i,n){var s=t.Event("blur");s.target=s.currentTarget=n[0],e.close(s,!0)}),this.element.find(this.options.items).addBack().each(function(){var e=t(this);e.is("[title]")&&e.data("ui-tooltip-title",e.attr("title")).attr("title","")})},_enable:function(){this.element.find(this.options.items).addBack().each(function(){var e=t(this);e.data("ui-tooltip-title")&&e.attr("title",e.data("ui-tooltip-title"))})},open:function(e){var i=this,n=t(e?e.target:this.element).closest(this.options.items);n.length&&!n.data("ui-tooltip-id")&&(n.attr("title")&&n.data("ui-tooltip-title",n.attr("title")),n.data("ui-tooltip-open",!0),e&&"mouseover"===e.type&&n.parents().each(function(){var e,n=t(this);n.data("ui-tooltip-open")&&(e=t.Event("blur"),e.target=e.currentTarget=this,i.close(e,!0)),n.attr("title")&&(n.uniqueId(),i.parents[this.id]={element:this,title:n.attr("title")},n.attr("title",""))}),this._updateContent(n,e))},_updateContent:function(t,e){var i,n=this.options.content,s=this,o=e?e.type:null;return"string"==typeof n?this._open(e,t,n):(i=n.call(t[0],function(i){t.data("ui-tooltip-open")&&s._delay(function(){e&&(e.type=o),this._open(e,t,i)})}),void(i&&this._open(e,t,i)))},_open:function(i,n,s){function o(t){c.of=t,r.is(":hidden")||r.position(c)}var r,a,l,c=t.extend({},this.options.position);if(s){if(r=this._find(n),r.length)return void r.find(".ui-tooltip-content").html(s);n.is("[title]")&&(i&&"mouseover"===i.type?n.attr("title",""):n.removeAttr("title")),r=this._tooltip(n),e(n,r.attr("id")),r.find(".ui-tooltip-content").html(s),this.options.track&&i&&/^mouse/.test(i.type)?(this._on(this.document,{mousemove:o}),o(i)):r.position(t.extend({of:n},this.options.position)),r.hide(),this._show(r,this.options.show),this.options.show&&this.options.show.delay&&(l=this.delayedShow=setInterval(function(){r.is(":visible")&&(o(c.of),clearInterval(l))},t.fx.interval)),this._trigger("open",i,{tooltip:r}),a={keyup:function(e){if(e.keyCode===t.ui.keyCode.ESCAPE){var i=t.Event(e);i.currentTarget=n[0],this.close(i,!0)}},remove:function(){this._removeTooltip(r)}},i&&"mouseover"!==i.type||(a.mouseleave="close"),i&&"focusin"!==i.type||(a.focusout="close"),this._on(!0,n,a)}},close:function(e){var n=this,s=t(e?e.currentTarget:this.element),o=this._find(s);this.closing||(clearInterval(this.delayedShow),s.data("ui-tooltip-title")&&s.attr("title",s.data("ui-tooltip-title")),i(s),o.stop(!0),this._hide(o,this.options.hide,function(){n._removeTooltip(t(this))}),s.removeData("ui-tooltip-open"),this._off(s,"mouseleave focusout keyup"),s[0]!==this.element[0]&&this._off(s,"remove"),this._off(this.document,"mousemove"),e&&"mouseleave"===e.type&&t.each(this.parents,function(e,i){t(i.element).attr("title",i.title),delete n.parents[e]}),this.closing=!0,this._trigger("close",e,{tooltip:o}),this.closing=!1)},_tooltip:function(e){var i="ui-tooltip-"+n++,s=t("<div>").attr({id:i,role:"tooltip"}).addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||""));return t("<div>").addClass("ui-tooltip-content").appendTo(s),s.appendTo(this.document[0].body),this.tooltips[i]=e,s},_find:function(e){var i=e.data("ui-tooltip-id");return i?t("#"+i):t()},_removeTooltip:function(t){t.remove(),delete this.tooltips[t.attr("id")]},_destroy:function(){var e=this;t.each(this.tooltips,function(i,n){var s=t.Event("blur");s.target=s.currentTarget=n[0],e.close(s,!0),t("#"+i).remove(),n.data("ui-tooltip-title")&&(n.attr("title",n.data("ui-tooltip-title")),n.removeData("ui-tooltip-title"))})}})}(jQuery),/*! jPlayer 2.9.2 for jQuery ~ (c) 2009-2014 Happyworm Ltd ~ MIT License */
!function(t,e){"function"==typeof define&&define.amd?define(["jquery"],e):e("object"==typeof exports?require("jquery"):t.jQuery?t.jQuery:t.Zepto)}(this,function(t,e){t.fn.jPlayer=function(i){var n="jPlayer",s="string"==typeof i,o=Array.prototype.slice.call(arguments,1),r=this;return i=!s&&o.length?t.extend.apply(null,[!0,i].concat(o)):i,s&&"_"===i.charAt(0)?r:(this.each(s?function(){var s=t(this).data(n),a=s&&t.isFunction(s[i])?s[i].apply(s,o):s;return a!==s&&a!==e?(r=a,!1):void 0}:function(){var e=t(this).data(n);e?e.option(i||{}):t(this).data(n,new t.jPlayer(i,this))}),r)},t.jPlayer=function(e,i){if(arguments.length){this.element=t(i),this.options=t.extend(!0,{},this.options,e);var n=this;this.element.bind("remove.jPlayer",function(){n.destroy()}),this._init()}},"function"!=typeof t.fn.stop&&(t.fn.stop=function(){}),t.jPlayer.emulateMethods="load play pause",t.jPlayer.emulateStatus="src readyState networkState currentTime duration paused ended playbackRate",t.jPlayer.emulateOptions="muted volume",t.jPlayer.reservedEvent="ready flashreset resize repeat error warning",t.jPlayer.event={},t.each(["ready","setmedia","flashreset","resize","repeat","click","error","warning","loadstart","progress","suspend","abort","emptied","stalled","play","pause","loadedmetadata","loadeddata","waiting","playing","canplay","canplaythrough","seeking","seeked","timeupdate","ended","ratechange","durationchange","volumechange"],function(){t.jPlayer.event[this]="jPlayer_"+this}),t.jPlayer.htmlEvent=["loadstart","abort","emptied","stalled","loadedmetadata","canplay","canplaythrough"],t.jPlayer.pause=function(){t.jPlayer.prototype.destroyRemoved(),t.each(t.jPlayer.prototype.instances,function(t,e){e.data("jPlayer").status.srcSet&&e.jPlayer("pause")})},t.jPlayer.timeFormat={showHour:!1,showMin:!0,showSec:!0,padHour:!1,padMin:!0,padSec:!0,sepHour:":",sepMin:":",sepSec:""};var i=function(){this.init()};i.prototype={init:function(){this.options={timeFormat:t.jPlayer.timeFormat}},time:function(t){t=t&&"number"==typeof t?t:0;var e=new Date(1e3*t),i=e.getUTCHours(),n=this.options.timeFormat.showHour?e.getUTCMinutes():e.getUTCMinutes()+60*i,s=this.options.timeFormat.showMin?e.getUTCSeconds():e.getUTCSeconds()+60*n,o=this.options.timeFormat.padHour&&10>i?"0"+i:i,r=this.options.timeFormat.padMin&&10>n?"0"+n:n,a=this.options.timeFormat.padSec&&10>s?"0"+s:s,l="";return l+=this.options.timeFormat.showHour?o+this.options.timeFormat.sepHour:"",l+=this.options.timeFormat.showMin?r+this.options.timeFormat.sepMin:"",l+=this.options.timeFormat.showSec?a+this.options.timeFormat.sepSec:""}};var n=new i;t.jPlayer.convertTime=function(t){return n.time(t)},t.jPlayer.uaBrowser=function(t){var e=t.toLowerCase(),i=/(webkit)[ \/]([\w.]+)/,n=/(opera)(?:.*version)?[ \/]([\w.]+)/,s=/(msie) ([\w.]+)/,o=/(mozilla)(?:.*? rv:([\w.]+))?/,r=i.exec(e)||n.exec(e)||s.exec(e)||e.indexOf("compatible")<0&&o.exec(e)||[];return{browser:r[1]||"",version:r[2]||"0"}},t.jPlayer.uaPlatform=function(t){var e=t.toLowerCase(),i=/(ipad|iphone|ipod|android|blackberry|playbook|windows ce|webos)/,n=/(ipad|playbook)/,s=/(android)/,o=/(mobile)/,r=i.exec(e)||[],a=n.exec(e)||!o.exec(e)&&s.exec(e)||[];return r[1]&&(r[1]=r[1].replace(/\s/g,"_")),{platform:r[1]||"",tablet:a[1]||""}},t.jPlayer.browser={},t.jPlayer.platform={};var s=t.jPlayer.uaBrowser(navigator.userAgent);s.browser&&(t.jPlayer.browser[s.browser]=!0,t.jPlayer.browser.version=s.version);var o=t.jPlayer.uaPlatform(navigator.userAgent);o.platform&&(t.jPlayer.platform[o.platform]=!0,t.jPlayer.platform.mobile=!o.tablet,t.jPlayer.platform.tablet=!!o.tablet),t.jPlayer.getDocMode=function(){var e;return t.jPlayer.browser.msie&&(document.documentMode?e=document.documentMode:(e=5,document.compatMode&&"CSS1Compat"===document.compatMode&&(e=7))),e},t.jPlayer.browser.documentMode=t.jPlayer.getDocMode(),t.jPlayer.nativeFeatures={init:function(){var t,e,i,n=document,s=n.createElement("video"),o={w3c:["fullscreenEnabled","fullscreenElement","requestFullscreen","exitFullscreen","fullscreenchange","fullscreenerror"],moz:["mozFullScreenEnabled","mozFullScreenElement","mozRequestFullScreen","mozCancelFullScreen","mozfullscreenchange","mozfullscreenerror"],webkit:["","webkitCurrentFullScreenElement","webkitRequestFullScreen","webkitCancelFullScreen","webkitfullscreenchange",""],webkitVideo:["webkitSupportsFullscreen","webkitDisplayingFullscreen","webkitEnterFullscreen","webkitExitFullscreen","",""],ms:["","msFullscreenElement","msRequestFullscreen","msExitFullscreen","MSFullscreenChange","MSFullscreenError"]},r=["w3c","moz","webkit","webkitVideo","ms"];for(this.fullscreen=t={support:{w3c:!!n[o.w3c[0]],moz:!!n[o.moz[0]],webkit:"function"==typeof n[o.webkit[3]],webkitVideo:"function"==typeof s[o.webkitVideo[2]],ms:"function"==typeof s[o.ms[2]]},used:{}},e=0,i=r.length;i>e;e++){var a=r[e];if(t.support[a]){t.spec=a,t.used[a]=!0;break}}if(t.spec){var l=o[t.spec];t.api={fullscreenEnabled:!0,fullscreenElement:function(t){return t=t?t:n,t[l[1]]},requestFullscreen:function(t){return t[l[2]]()},exitFullscreen:function(t){return t=t?t:n,t[l[3]]()}},t.event={fullscreenchange:l[4],fullscreenerror:l[5]}}else t.api={fullscreenEnabled:!1,fullscreenElement:function(){return null},requestFullscreen:function(){},exitFullscreen:function(){}},t.event={}}},t.jPlayer.nativeFeatures.init(),t.jPlayer.focus=null,t.jPlayer.keyIgnoreElementNames="A INPUT TEXTAREA SELECT BUTTON";var r=function(e){var i,n=t.jPlayer.focus;n&&(t.each(t.jPlayer.keyIgnoreElementNames.split(/\s+/g),function(t,n){return e.target.nodeName.toUpperCase()===n.toUpperCase()?(i=!0,!1):void 0}),i||t.each(n.options.keyBindings,function(i,s){return s&&t.isFunction(s.fn)&&("number"==typeof s.key&&e.which===s.key||"string"==typeof s.key&&e.key===s.key)?(e.preventDefault(),s.fn(n),!1):void 0}))};t.jPlayer.keys=function(e){var i="keydown.jPlayer";t(document.documentElement).unbind(i),e&&t(document.documentElement).bind(i,r)},t.jPlayer.keys(!0),t.jPlayer.prototype={count:0,version:{script:"2.9.2",needFlash:"2.9.0",flash:"unknown"},options:{swfPath:"js",solution:"html, flash",supplied:"mp3",auroraFormats:"wav",preload:"metadata",volume:.8,muted:!1,remainingDuration:!1,toggleDuration:!1,captureDuration:!0,playbackRate:1,defaultPlaybackRate:1,minPlaybackRate:.5,maxPlaybackRate:4,wmode:"opaque",backgroundColor:"#000000",cssSelectorAncestor:"#jp_container_1",cssSelector:{videoPlay:".jp-video-play",play:".jp-play",pause:".jp-pause",stop:".jp-stop",seekBar:".jp-seek-bar",playBar:".jp-play-bar",mute:".jp-mute",unmute:".jp-unmute",volumeBar:".jp-volume-bar",volumeBarValue:".jp-volume-bar-value",volumeMax:".jp-volume-max",playbackRateBar:".jp-playback-rate-bar",playbackRateBarValue:".jp-playback-rate-bar-value",currentTime:".jp-current-time",duration:".jp-duration",title:".jp-title",fullScreen:".jp-full-screen",restoreScreen:".jp-restore-screen",repeat:".jp-repeat",repeatOff:".jp-repeat-off",gui:".jp-gui",noSolution:".jp-no-solution"},stateClass:{playing:"jp-state-playing",seeking:"jp-state-seeking",muted:"jp-state-muted",looped:"jp-state-looped",fullScreen:"jp-state-full-screen",noVolume:"jp-state-no-volume"},useStateClassSkin:!1,autoBlur:!0,smoothPlayBar:!1,fullScreen:!1,fullWindow:!1,autohide:{restored:!1,full:!0,fadeIn:200,fadeOut:600,hold:1e3},loop:!1,repeat:function(e){e.jPlayer.options.loop?t(this).unbind(".jPlayerRepeat").bind(t.jPlayer.event.ended+".jPlayer.jPlayerRepeat",function(){t(this).jPlayer("play")}):t(this).unbind(".jPlayerRepeat")},nativeVideoControls:{},noFullWindow:{msie:/msie [0-6]\./,ipad:/ipad.*?os [0-4]\./,iphone:/iphone/,ipod:/ipod/,android_pad:/android [0-3]\.(?!.*?mobile)/,android_phone:/(?=.*android)(?!.*chrome)(?=.*mobile)/,blackberry:/blackberry/,windows_ce:/windows ce/,iemobile:/iemobile/,webos:/webos/},noVolume:{ipad:/ipad/,iphone:/iphone/,ipod:/ipod/,android_pad:/android(?!.*?mobile)/,android_phone:/android.*?mobile/,blackberry:/blackberry/,windows_ce:/windows ce/,iemobile:/iemobile/,webos:/webos/,playbook:/playbook/},timeFormat:{},keyEnabled:!1,audioFullScreen:!1,keyBindings:{play:{key:80,fn:function(t){t.status.paused?t.play():t.pause()}},fullScreen:{key:70,fn:function(t){(t.status.video||t.options.audioFullScreen)&&t._setOption("fullScreen",!t.options.fullScreen)}},muted:{key:77,fn:function(t){t._muted(!t.options.muted)}},volumeUp:{key:190,fn:function(t){t.volume(t.options.volume+.1)}},volumeDown:{key:188,fn:function(t){t.volume(t.options.volume-.1)}},loop:{key:76,fn:function(t){t._loop(!t.options.loop)}}},verticalVolume:!1,verticalPlaybackRate:!1,globalVolume:!1,idPrefix:"jp",noConflict:"jQuery",emulateHtml:!1,consoleAlerts:!0,errorAlerts:!1,warningAlerts:!1},optionsAudio:{size:{width:"0px",height:"0px",cssClass:""},sizeFull:{width:"0px",height:"0px",cssClass:""}},optionsVideo:{size:{width:"480px",height:"270px",cssClass:"jp-video-270p"},sizeFull:{width:"100%",height:"100%",cssClass:"jp-video-full"}},instances:{},status:{src:"",media:{},paused:!0,format:{},formatType:"",waitForPlay:!0,waitForLoad:!0,srcSet:!1,video:!1,seekPercent:0,currentPercentRelative:0,currentPercentAbsolute:0,currentTime:0,duration:0,remaining:0,videoWidth:0,videoHeight:0,readyState:0,networkState:0,playbackRate:1,ended:0},internal:{ready:!1},solution:{html:!0,aurora:!0,flash:!0},format:{mp3:{codec:"audio/mpeg",flashCanPlay:!0,media:"audio"},m4a:{codec:'audio/mp4; codecs="mp4a.40.2"',flashCanPlay:!0,media:"audio"},m3u8a:{codec:'application/vnd.apple.mpegurl; codecs="mp4a.40.2"',flashCanPlay:!1,media:"audio"},m3ua:{codec:"audio/mpegurl",flashCanPlay:!1,media:"audio"},oga:{codec:'audio/ogg; codecs="vorbis, opus"',flashCanPlay:!1,media:"audio"},flac:{codec:"audio/x-flac",flashCanPlay:!1,media:"audio"},wav:{codec:'audio/wav; codecs="1"',flashCanPlay:!1,media:"audio"},webma:{codec:'audio/webm; codecs="vorbis"',flashCanPlay:!1,media:"audio"},fla:{codec:"audio/x-flv",flashCanPlay:!0,media:"audio"},rtmpa:{codec:'audio/rtmp; codecs="rtmp"',flashCanPlay:!0,media:"audio"},m4v:{codec:'video/mp4; codecs="avc1.42E01E, mp4a.40.2"',flashCanPlay:!0,media:"video"},m3u8v:{codec:'application/vnd.apple.mpegurl; codecs="avc1.42E01E, mp4a.40.2"',flashCanPlay:!1,media:"video"},m3uv:{codec:"audio/mpegurl",flashCanPlay:!1,media:"video"},ogv:{codec:'video/ogg; codecs="theora, vorbis"',flashCanPlay:!1,media:"video"},webmv:{codec:'video/webm; codecs="vorbis, vp8"',flashCanPlay:!1,media:"video"},flv:{codec:"video/x-flv",flashCanPlay:!0,media:"video"},rtmpv:{codec:'video/rtmp; codecs="rtmp"',flashCanPlay:!0,media:"video"}},_init:function(){var i=this;if(this.element.empty(),this.status=t.extend({},this.status),this.internal=t.extend({},this.internal),this.options.timeFormat=t.extend({},t.jPlayer.timeFormat,this.options.timeFormat),this.internal.cmdsIgnored=t.jPlayer.platform.ipad||t.jPlayer.platform.iphone||t.jPlayer.platform.ipod,this.internal.domNode=this.element.get(0),this.options.keyEnabled&&!t.jPlayer.focus&&(t.jPlayer.focus=this),this.androidFix={setMedia:!1,play:!1,pause:!1,time:NaN},t.jPlayer.platform.android&&(this.options.preload="auto"!==this.options.preload?"metadata":"auto"),this.formats=[],this.solutions=[],this.require={},this.htmlElement={},this.html={},this.html.audio={},this.html.video={},this.aurora={},this.aurora.formats=[],this.aurora.properties=[],this.flash={},this.css={},this.css.cs={},this.css.jq={},this.ancestorJq=[],this.options.volume=this._limitValue(this.options.volume,0,1),t.each(this.options.supplied.toLowerCase().split(","),function(e,n){var s=n.replace(/^\s+|\s+$/g,"");if(i.format[s]){var o=!1;t.each(i.formats,function(t,e){return s===e?(o=!0,!1):void 0}),o||i.formats.push(s)}}),t.each(this.options.solution.toLowerCase().split(","),function(e,n){var s=n.replace(/^\s+|\s+$/g,"");if(i.solution[s]){var o=!1;t.each(i.solutions,function(t,e){return s===e?(o=!0,!1):void 0}),o||i.solutions.push(s)}}),t.each(this.options.auroraFormats.toLowerCase().split(","),function(e,n){var s=n.replace(/^\s+|\s+$/g,"");if(i.format[s]){var o=!1;t.each(i.aurora.formats,function(t,e){return s===e?(o=!0,!1):void 0}),o||i.aurora.formats.push(s)}}),this.internal.instance="jp_"+this.count,this.instances[this.internal.instance]=this.element,this.element.attr("id")||this.element.attr("id",this.options.idPrefix+"_jplayer_"+this.count),this.internal.self=t.extend({},{id:this.element.attr("id"),jq:this.element}),this.internal.audio=t.extend({},{id:this.options.idPrefix+"_audio_"+this.count,jq:e}),this.internal.video=t.extend({},{id:this.options.idPrefix+"_video_"+this.count,jq:e}),this.internal.flash=t.extend({},{id:this.options.idPrefix+"_flash_"+this.count,jq:e,swf:this.options.swfPath+(".swf"!==this.options.swfPath.toLowerCase().slice(-4)?(this.options.swfPath&&"/"!==this.options.swfPath.slice(-1)?"/":"")+"jquery.jplayer.swf":"")}),this.internal.poster=t.extend({},{id:this.options.idPrefix+"_poster_"+this.count,jq:e}),t.each(t.jPlayer.event,function(t,n){i.options[t]!==e&&(i.element.bind(n+".jPlayer",i.options[t]),i.options[t]=e)}),this.require.audio=!1,this.require.video=!1,t.each(this.formats,function(t,e){i.require[i.format[e].media]=!0}),this.options=this.require.video?t.extend(!0,{},this.optionsVideo,this.options):t.extend(!0,{},this.optionsAudio,this.options),this._setSize(),this.status.nativeVideoControls=this._uaBlocklist(this.options.nativeVideoControls),this.status.noFullWindow=this._uaBlocklist(this.options.noFullWindow),this.status.noVolume=this._uaBlocklist(this.options.noVolume),t.jPlayer.nativeFeatures.fullscreen.api.fullscreenEnabled&&this._fullscreenAddEventListeners(),this._restrictNativeVideoControls(),this.htmlElement.poster=document.createElement("img"),this.htmlElement.poster.id=this.internal.poster.id,this.htmlElement.poster.onload=function(){(!i.status.video||i.status.waitForPlay)&&i.internal.poster.jq.show()},this.element.append(this.htmlElement.poster),this.internal.poster.jq=t("#"+this.internal.poster.id),this.internal.poster.jq.css({width:this.status.width,height:this.status.height}),this.internal.poster.jq.hide(),this.internal.poster.jq.bind("click.jPlayer",function(){i._trigger(t.jPlayer.event.click)}),this.html.audio.available=!1,this.require.audio&&(this.htmlElement.audio=document.createElement("audio"),this.htmlElement.audio.id=this.internal.audio.id,this.html.audio.available=!!this.htmlElement.audio.canPlayType&&this._testCanPlayType(this.htmlElement.audio)),this.html.video.available=!1,this.require.video&&(this.htmlElement.video=document.createElement("video"),this.htmlElement.video.id=this.internal.video.id,this.html.video.available=!!this.htmlElement.video.canPlayType&&this._testCanPlayType(this.htmlElement.video)),this.flash.available=this._checkForFlash(10.1),this.html.canPlay={},this.aurora.canPlay={},this.flash.canPlay={},t.each(this.formats,function(e,n){i.html.canPlay[n]=i.html[i.format[n].media].available&&""!==i.htmlElement[i.format[n].media].canPlayType(i.format[n].codec),i.aurora.canPlay[n]=t.inArray(n,i.aurora.formats)>-1,i.flash.canPlay[n]=i.format[n].flashCanPlay&&i.flash.available}),this.html.desired=!1,this.aurora.desired=!1,this.flash.desired=!1,t.each(this.solutions,function(e,n){if(0===e)i[n].desired=!0;else{var s=!1,o=!1;t.each(i.formats,function(t,e){i[i.solutions[0]].canPlay[e]&&("video"===i.format[e].media?o=!0:s=!0)}),i[n].desired=i.require.audio&&!s||i.require.video&&!o}}),this.html.support={},this.aurora.support={},this.flash.support={},t.each(this.formats,function(t,e){i.html.support[e]=i.html.canPlay[e]&&i.html.desired,i.aurora.support[e]=i.aurora.canPlay[e]&&i.aurora.desired,i.flash.support[e]=i.flash.canPlay[e]&&i.flash.desired}),this.html.used=!1,this.aurora.used=!1,this.flash.used=!1,t.each(this.solutions,function(e,n){t.each(i.formats,function(t,e){return i[n].support[e]?(i[n].used=!0,!1):void 0})}),this._resetActive(),this._resetGate(),this._cssSelectorAncestor(this.options.cssSelectorAncestor),this.html.used||this.aurora.used||this.flash.used?this.css.jq.noSolution.length&&this.css.jq.noSolution.hide():(this._error({type:t.jPlayer.error.NO_SOLUTION,context:"{solution:'"+this.options.solution+"', supplied:'"+this.options.supplied+"'}",message:t.jPlayer.errorMsg.NO_SOLUTION,hint:t.jPlayer.errorHint.NO_SOLUTION}),this.css.jq.noSolution.length&&this.css.jq.noSolution.show()),this.flash.used){var n,s="jQuery="+encodeURI(this.options.noConflict)+"&id="+encodeURI(this.internal.self.id)+"&vol="+this.options.volume+"&muted="+this.options.muted;if(t.jPlayer.browser.msie&&(Number(t.jPlayer.browser.version)<9||t.jPlayer.browser.documentMode<9)){var o='<object id="'+this.internal.flash.id+'" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" width="0" height="0" tabindex="-1"></object>',r=['<param name="movie" value="'+this.internal.flash.swf+'" />','<param name="FlashVars" value="'+s+'" />','<param name="allowScriptAccess" value="always" />','<param name="bgcolor" value="'+this.options.backgroundColor+'" />','<param name="wmode" value="'+this.options.wmode+'" />'];n=document.createElement(o);for(var a=0;a<r.length;a++)n.appendChild(document.createElement(r[a]))}else{var l=function(t,e,i){var n=document.createElement("param");n.setAttribute("name",e),n.setAttribute("value",i),t.appendChild(n)};n=document.createElement("object"),n.setAttribute("id",this.internal.flash.id),n.setAttribute("name",this.internal.flash.id),n.setAttribute("data",this.internal.flash.swf),n.setAttribute("type","application/x-shockwave-flash"),n.setAttribute("width","1"),n.setAttribute("height","1"),n.setAttribute("tabindex","-1"),l(n,"flashvars",s),l(n,"allowscriptaccess","always"),l(n,"bgcolor",this.options.backgroundColor),l(n,"wmode",this.options.wmode)}this.element.append(n),this.internal.flash.jq=t(n)}this.status.playbackRateEnabled=!(!this.html.used||this.flash.used)&&this._testPlaybackRate("audio"),this._updatePlaybackRate(),this.html.used&&(this.html.audio.available&&(this._addHtmlEventListeners(this.htmlElement.audio,this.html.audio),this.element.append(this.htmlElement.audio),this.internal.audio.jq=t("#"+this.internal.audio.id)),this.html.video.available&&(this._addHtmlEventListeners(this.htmlElement.video,this.html.video),this.element.append(this.htmlElement.video),this.internal.video.jq=t("#"+this.internal.video.id),this.internal.video.jq.css(this.status.nativeVideoControls?{width:this.status.width,height:this.status.height}:{width:"0px",height:"0px"}),this.internal.video.jq.bind("click.jPlayer",function(){i._trigger(t.jPlayer.event.click)}))),this.aurora.used,this.options.emulateHtml&&this._emulateHtmlBridge(),!this.html.used&&!this.aurora.used||this.flash.used||setTimeout(function(){i.internal.ready=!0,i.version.flash="n/a",i._trigger(t.jPlayer.event.repeat),i._trigger(t.jPlayer.event.ready)},100),this._updateNativeVideoControls(),this.css.jq.videoPlay.length&&this.css.jq.videoPlay.hide(),t.jPlayer.prototype.count++},destroy:function(){this.clearMedia(),this._removeUiClass(),this.css.jq.currentTime.length&&this.css.jq.currentTime.text(""),this.css.jq.duration.length&&this.css.jq.duration.text(""),t.each(this.css.jq,function(t,e){e.length&&e.unbind(".jPlayer")}),this.internal.poster.jq.unbind(".jPlayer"),this.internal.video.jq&&this.internal.video.jq.unbind(".jPlayer"),this._fullscreenRemoveEventListeners(),this===t.jPlayer.focus&&(t.jPlayer.focus=null),this.options.emulateHtml&&this._destroyHtmlBridge(),this.element.removeData("jPlayer"),this.element.unbind(".jPlayer"),this.element.empty(),delete this.instances[this.internal.instance]},destroyRemoved:function(){var e=this;t.each(this.instances,function(t,i){e.element!==i&&(i.data("jPlayer")||(i.jPlayer("destroy"),delete e.instances[t]))})},enable:function(){},disable:function(){},_testCanPlayType:function(t){try{return t.canPlayType(this.format.mp3.codec),!0}catch(t){return!1}},_testPlaybackRate:function(t){var e,i=.5;t="string"==typeof t?t:"audio",e=document.createElement(t);try{return"playbackRate"in e&&(e.playbackRate=i,e.playbackRate===i)}catch(t){return!1}},_uaBlocklist:function(e){var i=navigator.userAgent.toLowerCase(),n=!1;return t.each(e,function(t,e){return e&&e.test(i)?(n=!0,!1):void 0}),n},_restrictNativeVideoControls:function(){this.require.audio&&this.status.nativeVideoControls&&(this.status.nativeVideoControls=!1,this.status.noFullWindow=!0)},_updateNativeVideoControls:function(){this.html.video.available&&this.html.used&&(this.htmlElement.video.controls=this.status.nativeVideoControls,this._updateAutohide(),this.status.nativeVideoControls&&this.require.video?(this.internal.poster.jq.hide(),this.internal.video.jq.css({width:this.status.width,height:this.status.height})):this.status.waitForPlay&&this.status.video&&(this.internal.poster.jq.show(),this.internal.video.jq.css({width:"0px",height:"0px"})))},_addHtmlEventListeners:function(e,i){var n=this;e.preload=this.options.preload,e.muted=this.options.muted,e.volume=this.options.volume,this.status.playbackRateEnabled&&(e.defaultPlaybackRate=this.options.defaultPlaybackRate,e.playbackRate=this.options.playbackRate),e.addEventListener("progress",function(){i.gate&&(n.internal.cmdsIgnored&&this.readyState>0&&(n.internal.cmdsIgnored=!1),n._getHtmlStatus(e),n._updateInterface(),n._trigger(t.jPlayer.event.progress))},!1),e.addEventListener("loadeddata",function(){i.gate&&(n.androidFix.setMedia=!1,n.androidFix.play&&(n.androidFix.play=!1,n.play(n.androidFix.time)),n.androidFix.pause&&(n.androidFix.pause=!1,n.pause(n.androidFix.time)),n._trigger(t.jPlayer.event.loadeddata))},!1),e.addEventListener("timeupdate",function(){i.gate&&(n._getHtmlStatus(e),n._updateInterface(),n._trigger(t.jPlayer.event.timeupdate))},!1),e.addEventListener("durationchange",function(){i.gate&&(n._getHtmlStatus(e),n._updateInterface(),n._trigger(t.jPlayer.event.durationchange))},!1),e.addEventListener("play",function(){i.gate&&(n._updateButtons(!0),n._html_checkWaitForPlay(),n._trigger(t.jPlayer.event.play))},!1),e.addEventListener("playing",function(){i.gate&&(n._updateButtons(!0),n._seeked(),n._trigger(t.jPlayer.event.playing))},!1),e.addEventListener("pause",function(){i.gate&&(n._updateButtons(!1),n._trigger(t.jPlayer.event.pause))},!1),e.addEventListener("waiting",function(){i.gate&&(n._seeking(),n._trigger(t.jPlayer.event.waiting))},!1),e.addEventListener("seeking",function(){i.gate&&(n._seeking(),n._trigger(t.jPlayer.event.seeking))},!1),e.addEventListener("seeked",function(){i.gate&&(n._seeked(),n._trigger(t.jPlayer.event.seeked))},!1),e.addEventListener("volumechange",function(){i.gate&&(n.options.volume=e.volume,n.options.muted=e.muted,n._updateMute(),n._updateVolume(),n._trigger(t.jPlayer.event.volumechange))},!1),e.addEventListener("ratechange",function(){i.gate&&(n.options.defaultPlaybackRate=e.defaultPlaybackRate,n.options.playbackRate=e.playbackRate,n._updatePlaybackRate(),n._trigger(t.jPlayer.event.ratechange))},!1),e.addEventListener("suspend",function(){i.gate&&(n._seeked(),n._trigger(t.jPlayer.event.suspend))},!1),e.addEventListener("ended",function(){i.gate&&(t.jPlayer.browser.webkit||(n.htmlElement.media.currentTime=0),n.htmlElement.media.pause(),n._updateButtons(!1),n._getHtmlStatus(e,!0),n._updateInterface(),n._trigger(t.jPlayer.event.ended))},!1),e.addEventListener("error",function(){i.gate&&(n._updateButtons(!1),n._seeked(),n.status.srcSet&&(clearTimeout(n.internal.htmlDlyCmdId),n.status.waitForLoad=!0,n.status.waitForPlay=!0,n.status.video&&!n.status.nativeVideoControls&&n.internal.video.jq.css({width:"0px",height:"0px"}),n._validString(n.status.media.poster)&&!n.status.nativeVideoControls&&n.internal.poster.jq.show(),n.css.jq.videoPlay.length&&n.css.jq.videoPlay.show(),n._error({type:t.jPlayer.error.URL,context:n.status.src,message:t.jPlayer.errorMsg.URL,hint:t.jPlayer.errorHint.URL})))},!1),t.each(t.jPlayer.htmlEvent,function(s,o){e.addEventListener(this,function(){i.gate&&n._trigger(t.jPlayer.event[o])},!1)})},_addAuroraEventListeners:function(e,i){var n=this;e.volume=100*this.options.volume,e.on("progress",function(){i.gate&&(n.internal.cmdsIgnored&&this.readyState>0&&(n.internal.cmdsIgnored=!1),n._getAuroraStatus(e),n._updateInterface(),n._trigger(t.jPlayer.event.progress),e.duration>0&&n._trigger(t.jPlayer.event.timeupdate))},!1),e.on("ready",function(){i.gate&&n._trigger(t.jPlayer.event.loadeddata)},!1),e.on("duration",function(){i.gate&&(n._getAuroraStatus(e),n._updateInterface(),n._trigger(t.jPlayer.event.durationchange))},!1),e.on("end",function(){i.gate&&(n._updateButtons(!1),n._getAuroraStatus(e,!0),n._updateInterface(),n._trigger(t.jPlayer.event.ended))},!1),e.on("error",function(){i.gate&&(n._updateButtons(!1),n._seeked(),n.status.srcSet&&(n.status.waitForLoad=!0,n.status.waitForPlay=!0,n.status.video&&!n.status.nativeVideoControls&&n.internal.video.jq.css({width:"0px",height:"0px"}),n._validString(n.status.media.poster)&&!n.status.nativeVideoControls&&n.internal.poster.jq.show(),n.css.jq.videoPlay.length&&n.css.jq.videoPlay.show(),n._error({type:t.jPlayer.error.URL,context:n.status.src,message:t.jPlayer.errorMsg.URL,hint:t.jPlayer.errorHint.URL})))},!1)},_getHtmlStatus:function(t,e){var i=0,n=0,s=0,o=0;isFinite(t.duration)&&(this.status.duration=t.duration),i=t.currentTime,n=this.status.duration>0?100*i/this.status.duration:0,"object"==typeof t.seekable&&t.seekable.length>0?(s=this.status.duration>0?100*t.seekable.end(t.seekable.length-1)/this.status.duration:100,o=this.status.duration>0?100*t.currentTime/t.seekable.end(t.seekable.length-1):0):(s=100,o=n),e&&(i=0,o=0,n=0),this.status.seekPercent=s,this.status.currentPercentRelative=o,this.status.currentPercentAbsolute=n,this.status.currentTime=i,this.status.remaining=this.status.duration-this.status.currentTime,this.status.videoWidth=t.videoWidth,this.status.videoHeight=t.videoHeight,this.status.readyState=t.readyState,this.status.networkState=t.networkState,this.status.playbackRate=t.playbackRate,this.status.ended=t.ended},_getAuroraStatus:function(t,e){var i=0,n=0,s=0,o=0;this.status.duration=t.duration/1e3,i=t.currentTime/1e3,n=this.status.duration>0?100*i/this.status.duration:0,t.buffered>0?(s=this.status.duration>0?t.buffered*this.status.duration/this.status.duration:100,o=this.status.duration>0?i/(t.buffered*this.status.duration):0):(s=100,o=n),e&&(i=0,o=0,n=0),this.status.seekPercent=s,this.status.currentPercentRelative=o,this.status.currentPercentAbsolute=n,this.status.currentTime=i,this.status.remaining=this.status.duration-this.status.currentTime,this.status.readyState=4,this.status.networkState=0,this.status.playbackRate=1,this.status.ended=!1},_resetStatus:function(){this.status=t.extend({},this.status,t.jPlayer.prototype.status)},_trigger:function(e,i,n){var s=t.Event(e);s.jPlayer={},s.jPlayer.version=t.extend({},this.version),s.jPlayer.options=t.extend(!0,{},this.options),s.jPlayer.status=t.extend(!0,{},this.status),s.jPlayer.html=t.extend(!0,{},this.html),s.jPlayer.aurora=t.extend(!0,{},this.aurora),s.jPlayer.flash=t.extend(!0,{},this.flash),i&&(s.jPlayer.error=t.extend({},i)),n&&(s.jPlayer.warning=t.extend({},n)),this.element.trigger(s)},jPlayerFlashEvent:function(e,i){if(e===t.jPlayer.event.ready)if(this.internal.ready){if(this.flash.gate){if(this.status.srcSet){var n=this.status.currentTime,s=this.status.paused;this.setMedia(this.status.media),this.volumeWorker(this.options.volume),n>0&&(s?this.pause(n):this.play(n))}this._trigger(t.jPlayer.event.flashreset)}}else this.internal.ready=!0,this.internal.flash.jq.css({width:"0px",height:"0px"}),this.version.flash=i.version,this.version.needFlash!==this.version.flash&&this._error({type:t.jPlayer.error.VERSION,context:this.version.flash,message:t.jPlayer.errorMsg.VERSION+this.version.flash,hint:t.jPlayer.errorHint.VERSION}),this._trigger(t.jPlayer.event.repeat),this._trigger(e);if(this.flash.gate)switch(e){case t.jPlayer.event.progress:this._getFlashStatus(i),this._updateInterface(),this._trigger(e);break;case t.jPlayer.event.timeupdate:this._getFlashStatus(i),this._updateInterface(),this._trigger(e);break;case t.jPlayer.event.play:this._seeked(),this._updateButtons(!0),this._trigger(e);break;case t.jPlayer.event.pause:this._updateButtons(!1),this._trigger(e);break;case t.jPlayer.event.ended:this._updateButtons(!1),this._trigger(e);break;case t.jPlayer.event.click:this._trigger(e);break;case t.jPlayer.event.error:this.status.waitForLoad=!0,this.status.waitForPlay=!0,this.status.video&&this.internal.flash.jq.css({width:"0px",height:"0px"}),this._validString(this.status.media.poster)&&this.internal.poster.jq.show(),this.css.jq.videoPlay.length&&this.status.video&&this.css.jq.videoPlay.show(),this.status.video?this._flash_setVideo(this.status.media):this._flash_setAudio(this.status.media),this._updateButtons(!1),this._error({type:t.jPlayer.error.URL,context:i.src,message:t.jPlayer.errorMsg.URL,hint:t.jPlayer.errorHint.URL});break;case t.jPlayer.event.seeking:this._seeking(),this._trigger(e);break;case t.jPlayer.event.seeked:this._seeked(),this._trigger(e);break;case t.jPlayer.event.ready:break;default:this._trigger(e)}return!1},_getFlashStatus:function(t){this.status.seekPercent=t.seekPercent,this.status.currentPercentRelative=t.currentPercentRelative,this.status.currentPercentAbsolute=t.currentPercentAbsolute,this.status.currentTime=t.currentTime,this.status.duration=t.duration,this.status.remaining=t.duration-t.currentTime,this.status.videoWidth=t.videoWidth,this.status.videoHeight=t.videoHeight,this.status.readyState=4,this.status.networkState=0,this.status.playbackRate=1,this.status.ended=!1},_updateButtons:function(t){t===e?t=!this.status.paused:this.status.paused=!t,t?this.addStateClass("playing"):this.removeStateClass("playing"),!this.status.noFullWindow&&this.options.fullWindow?this.addStateClass("fullScreen"):this.removeStateClass("fullScreen"),this.options.loop?this.addStateClass("looped"):this.removeStateClass("looped"),this.css.jq.play.length&&this.css.jq.pause.length&&(t?(this.css.jq.play.hide(),this.css.jq.pause.show()):(this.css.jq.play.show(),this.css.jq.pause.hide())),this.css.jq.restoreScreen.length&&this.css.jq.fullScreen.length&&(this.status.noFullWindow?(this.css.jq.fullScreen.hide(),this.css.jq.restoreScreen.hide()):this.options.fullWindow?(this.css.jq.fullScreen.hide(),this.css.jq.restoreScreen.show()):(this.css.jq.fullScreen.show(),this.css.jq.restoreScreen.hide())),this.css.jq.repeat.length&&this.css.jq.repeatOff.length&&(this.options.loop?(this.css.jq.repeat.hide(),this.css.jq.repeatOff.show()):(this.css.jq.repeat.show(),this.css.jq.repeatOff.hide()))},_updateInterface:function(){this.css.jq.seekBar.length&&this.css.jq.seekBar.width(this.status.seekPercent+"%"),this.css.jq.playBar.length&&(this.options.smoothPlayBar?this.css.jq.playBar.stop().animate({width:this.status.currentPercentAbsolute+"%"},250,"linear"):this.css.jq.playBar.width(this.status.currentPercentRelative+"%"));var t="";this.css.jq.currentTime.length&&(t=this._convertTime(this.status.currentTime),t!==this.css.jq.currentTime.text()&&this.css.jq.currentTime.text(this._convertTime(this.status.currentTime)));var e="",i=this.status.duration,n=this.status.remaining;this.css.jq.duration.length&&("string"==typeof this.status.media.duration?e=this.status.media.duration:("number"==typeof this.status.media.duration&&(i=this.status.media.duration,n=i-this.status.currentTime),e=this.options.remainingDuration?(n>0?"-":"")+this._convertTime(n):this._convertTime(i)),e!==this.css.jq.duration.text()&&this.css.jq.duration.text(e))},_convertTime:i.prototype.time,_seeking:function(){this.css.jq.seekBar.length&&this.css.jq.seekBar.addClass("jp-seeking-bg"),this.addStateClass("seeking")},_seeked:function(){this.css.jq.seekBar.length&&this.css.jq.seekBar.removeClass("jp-seeking-bg"),this.removeStateClass("seeking")},_resetGate:function(){this.html.audio.gate=!1,this.html.video.gate=!1,this.aurora.gate=!1,this.flash.gate=!1},_resetActive:function(){this.html.active=!1,this.aurora.active=!1,this.flash.active=!1},_escapeHtml:function(t){return t.split("&").join("&amp;").split("<").join("&lt;").split(">").join("&gt;").split('"').join("&quot;")},_qualifyURL:function(t){var e=document.createElement("div");return e.innerHTML='<a href="'+this._escapeHtml(t)+'">x</a>',e.firstChild.href},_absoluteMediaUrls:function(e){var i=this;return t.each(e,function(t,n){n&&i.format[t]&&"data:"!==n.substr(0,5)&&(e[t]=i._qualifyURL(n))}),e},addStateClass:function(t){this.ancestorJq.length&&this.ancestorJq.addClass(this.options.stateClass[t])},removeStateClass:function(t){this.ancestorJq.length&&this.ancestorJq.removeClass(this.options.stateClass[t])},setMedia:function(e){var i=this,n=!1,s=this.status.media.poster!==e.poster;this._resetMedia(),this._resetGate(),this._resetActive(),this.androidFix.setMedia=!1,this.androidFix.play=!1,this.androidFix.pause=!1,e=this._absoluteMediaUrls(e),t.each(this.formats,function(s,o){var r="video"===i.format[o].media;return t.each(i.solutions,function(s,a){
if(i[a].support[o]&&i._validString(e[o])){var l="html"===a,c="aurora"===a;return r?(l?(i.html.video.gate=!0,i._html_setVideo(e),i.html.active=!0):(i.flash.gate=!0,i._flash_setVideo(e),i.flash.active=!0),i.css.jq.videoPlay.length&&i.css.jq.videoPlay.show(),i.status.video=!0):(l?(i.html.audio.gate=!0,i._html_setAudio(e),i.html.active=!0,t.jPlayer.platform.android&&(i.androidFix.setMedia=!0)):c?(i.aurora.gate=!0,i._aurora_setAudio(e),i.aurora.active=!0):(i.flash.gate=!0,i._flash_setAudio(e),i.flash.active=!0),i.css.jq.videoPlay.length&&i.css.jq.videoPlay.hide(),i.status.video=!1),n=!0,!1}}),!n&&void 0}),n?(this.status.nativeVideoControls&&this.html.video.gate||this._validString(e.poster)&&(s?this.htmlElement.poster.src=e.poster:this.internal.poster.jq.show()),"string"==typeof e.title&&(this.css.jq.title.length&&this.css.jq.title.html(e.title),this.htmlElement.audio&&this.htmlElement.audio.setAttribute("title",e.title),this.htmlElement.video&&this.htmlElement.video.setAttribute("title",e.title)),this.status.srcSet=!0,this.status.media=t.extend({},e),this._updateButtons(!1),this._updateInterface(),this._trigger(t.jPlayer.event.setmedia)):this._error({type:t.jPlayer.error.NO_SUPPORT,context:"{supplied:'"+this.options.supplied+"'}",message:t.jPlayer.errorMsg.NO_SUPPORT,hint:t.jPlayer.errorHint.NO_SUPPORT})},_resetMedia:function(){this._resetStatus(),this._updateButtons(!1),this._updateInterface(),this._seeked(),this.internal.poster.jq.hide(),clearTimeout(this.internal.htmlDlyCmdId),this.html.active?this._html_resetMedia():this.aurora.active?this._aurora_resetMedia():this.flash.active&&this._flash_resetMedia()},clearMedia:function(){this._resetMedia(),this.html.active?this._html_clearMedia():this.aurora.active?this._aurora_clearMedia():this.flash.active&&this._flash_clearMedia(),this._resetGate(),this._resetActive()},load:function(){this.status.srcSet?this.html.active?this._html_load():this.aurora.active?this._aurora_load():this.flash.active&&this._flash_load():this._urlNotSetError("load")},focus:function(){this.options.keyEnabled&&(t.jPlayer.focus=this)},play:function(t){var e="object"==typeof t;e&&this.options.useStateClassSkin&&!this.status.paused?this.pause(t):(t="number"==typeof t?t:NaN,this.status.srcSet?(this.focus(),this.html.active?this._html_play(t):this.aurora.active?this._aurora_play(t):this.flash.active&&this._flash_play(t)):this._urlNotSetError("play"))},videoPlay:function(){this.play()},pause:function(t){t="number"==typeof t?t:NaN,this.status.srcSet?this.html.active?this._html_pause(t):this.aurora.active?this._aurora_pause(t):this.flash.active&&this._flash_pause(t):this._urlNotSetError("pause")},tellOthers:function(e,i){var n=this,s="function"==typeof i,o=Array.prototype.slice.call(arguments);"string"==typeof e&&(s&&o.splice(1,1),t.jPlayer.prototype.destroyRemoved(),t.each(this.instances,function(){n.element!==this&&(!s||i.call(this.data("jPlayer"),n))&&this.jPlayer.apply(this,o)}))},pauseOthers:function(t){this.tellOthers("pause",function(){return this.status.srcSet},t)},stop:function(){this.status.srcSet?this.html.active?this._html_pause(0):this.aurora.active?this._aurora_pause(0):this.flash.active&&this._flash_pause(0):this._urlNotSetError("stop")},playHead:function(t){t=this._limitValue(t,0,100),this.status.srcSet?this.html.active?this._html_playHead(t):this.aurora.active?this._aurora_playHead(t):this.flash.active&&this._flash_playHead(t):this._urlNotSetError("playHead")},_muted:function(t){this.mutedWorker(t),this.options.globalVolume&&this.tellOthers("mutedWorker",function(){return this.options.globalVolume},t)},mutedWorker:function(e){this.options.muted=e,this.html.used&&this._html_setProperty("muted",e),this.aurora.used&&this._aurora_mute(e),this.flash.used&&this._flash_mute(e),this.html.video.gate||this.html.audio.gate||(this._updateMute(e),this._updateVolume(this.options.volume),this._trigger(t.jPlayer.event.volumechange))},mute:function(t){var i="object"==typeof t;i&&this.options.useStateClassSkin&&this.options.muted?this._muted(!1):(t=t===e||!!t,this._muted(t))},unmute:function(t){t=t===e||!!t,this._muted(!t)},_updateMute:function(t){t===e&&(t=this.options.muted),t?this.addStateClass("muted"):this.removeStateClass("muted"),this.css.jq.mute.length&&this.css.jq.unmute.length&&(this.status.noVolume?(this.css.jq.mute.hide(),this.css.jq.unmute.hide()):t?(this.css.jq.mute.hide(),this.css.jq.unmute.show()):(this.css.jq.mute.show(),this.css.jq.unmute.hide()))},volume:function(t){this.volumeWorker(t),this.options.globalVolume&&this.tellOthers("volumeWorker",function(){return this.options.globalVolume},t)},volumeWorker:function(e){e=this._limitValue(e,0,1),this.options.volume=e,this.html.used&&this._html_setProperty("volume",e),this.aurora.used&&this._aurora_volume(e),this.flash.used&&this._flash_volume(e),this.html.video.gate||this.html.audio.gate||(this._updateVolume(e),this._trigger(t.jPlayer.event.volumechange))},volumeBar:function(e){if(this.css.jq.volumeBar.length){var i=t(e.currentTarget),n=i.offset(),s=e.pageX-n.left,o=i.width(),r=i.height()-e.pageY+n.top,a=i.height();this.volume(this.options.verticalVolume?r/a:s/o)}this.options.muted&&this._muted(!1)},_updateVolume:function(t){t===e&&(t=this.options.volume),t=this.options.muted?0:t,this.status.noVolume?(this.addStateClass("noVolume"),this.css.jq.volumeBar.length&&this.css.jq.volumeBar.hide(),this.css.jq.volumeBarValue.length&&this.css.jq.volumeBarValue.hide(),this.css.jq.volumeMax.length&&this.css.jq.volumeMax.hide()):(this.removeStateClass("noVolume"),this.css.jq.volumeBar.length&&this.css.jq.volumeBar.show(),this.css.jq.volumeBarValue.length&&(this.css.jq.volumeBarValue.show(),this.css.jq.volumeBarValue[this.options.verticalVolume?"height":"width"](100*t+"%")),this.css.jq.volumeMax.length&&this.css.jq.volumeMax.show())},volumeMax:function(){this.volume(1),this.options.muted&&this._muted(!1)},_cssSelectorAncestor:function(e){var i=this;this.options.cssSelectorAncestor=e,this._removeUiClass(),this.ancestorJq=e?t(e):[],e&&1!==this.ancestorJq.length&&this._warning({type:t.jPlayer.warning.CSS_SELECTOR_COUNT,context:e,message:t.jPlayer.warningMsg.CSS_SELECTOR_COUNT+this.ancestorJq.length+" found for cssSelectorAncestor.",hint:t.jPlayer.warningHint.CSS_SELECTOR_COUNT}),this._addUiClass(),t.each(this.options.cssSelector,function(t,e){i._cssSelector(t,e)}),this._updateInterface(),this._updateButtons(),this._updateAutohide(),this._updateVolume(),this._updateMute()},_cssSelector:function(e,i){var n=this;if("string"==typeof i)if(t.jPlayer.prototype.options.cssSelector[e]){if(this.css.jq[e]&&this.css.jq[e].length&&this.css.jq[e].unbind(".jPlayer"),this.options.cssSelector[e]=i,this.css.cs[e]=this.options.cssSelectorAncestor+" "+i,this.css.jq[e]=i?t(this.css.cs[e]):[],this.css.jq[e].length&&this[e]){var s=function(i){i.preventDefault(),n[e](i),n.options.autoBlur?t(this).blur():t(this).focus()};this.css.jq[e].bind("click.jPlayer",s)}i&&1!==this.css.jq[e].length&&this._warning({type:t.jPlayer.warning.CSS_SELECTOR_COUNT,context:this.css.cs[e],message:t.jPlayer.warningMsg.CSS_SELECTOR_COUNT+this.css.jq[e].length+" found for "+e+" method.",hint:t.jPlayer.warningHint.CSS_SELECTOR_COUNT})}else this._warning({type:t.jPlayer.warning.CSS_SELECTOR_METHOD,context:e,message:t.jPlayer.warningMsg.CSS_SELECTOR_METHOD,hint:t.jPlayer.warningHint.CSS_SELECTOR_METHOD});else this._warning({type:t.jPlayer.warning.CSS_SELECTOR_STRING,context:i,message:t.jPlayer.warningMsg.CSS_SELECTOR_STRING,hint:t.jPlayer.warningHint.CSS_SELECTOR_STRING})},duration:function(t){this.options.toggleDuration&&(this.options.captureDuration&&t.stopPropagation(),this._setOption("remainingDuration",!this.options.remainingDuration))},seekBar:function(e){if(this.css.jq.seekBar.length){var i=t(e.currentTarget),n=i.offset(),s=e.pageX-n.left,o=i.width(),r=100*s/o;this.playHead(r)}},playbackRate:function(t){this._setOption("playbackRate",t)},playbackRateBar:function(e){if(this.css.jq.playbackRateBar.length){var i,n,s=t(e.currentTarget),o=s.offset(),r=e.pageX-o.left,a=s.width(),l=s.height()-e.pageY+o.top,c=s.height();i=this.options.verticalPlaybackRate?l/c:r/a,n=i*(this.options.maxPlaybackRate-this.options.minPlaybackRate)+this.options.minPlaybackRate,this.playbackRate(n)}},_updatePlaybackRate:function(){var t=this.options.playbackRate,e=(t-this.options.minPlaybackRate)/(this.options.maxPlaybackRate-this.options.minPlaybackRate);this.status.playbackRateEnabled?(this.css.jq.playbackRateBar.length&&this.css.jq.playbackRateBar.show(),this.css.jq.playbackRateBarValue.length&&(this.css.jq.playbackRateBarValue.show(),this.css.jq.playbackRateBarValue[this.options.verticalPlaybackRate?"height":"width"](100*e+"%"))):(this.css.jq.playbackRateBar.length&&this.css.jq.playbackRateBar.hide(),this.css.jq.playbackRateBarValue.length&&this.css.jq.playbackRateBarValue.hide())},repeat:function(t){var e="object"==typeof t;this._loop(!(e&&this.options.useStateClassSkin&&this.options.loop))},repeatOff:function(){this._loop(!1)},_loop:function(e){this.options.loop!==e&&(this.options.loop=e,this._updateButtons(),this._trigger(t.jPlayer.event.repeat))},option:function(i,n){var s=i;if(0===arguments.length)return t.extend(!0,{},this.options);if("string"==typeof i){var o=i.split(".");if(n===e){for(var r=t.extend(!0,{},this.options),a=0;a<o.length;a++){if(r[o[a]]===e)return this._warning({type:t.jPlayer.warning.OPTION_KEY,context:i,message:t.jPlayer.warningMsg.OPTION_KEY,hint:t.jPlayer.warningHint.OPTION_KEY}),e;r=r[o[a]]}return r}s={};for(var l=s,c=0;c<o.length;c++)c<o.length-1?(l[o[c]]={},l=l[o[c]]):l[o[c]]=n}return this._setOptions(s),this},_setOptions:function(e){var i=this;return t.each(e,function(t,e){i._setOption(t,e)}),this},_setOption:function(e,i){var n=this;switch(e){case"volume":this.volume(i);break;case"muted":this._muted(i);break;case"globalVolume":this.options[e]=i;break;case"cssSelectorAncestor":this._cssSelectorAncestor(i);break;case"cssSelector":t.each(i,function(t,e){n._cssSelector(t,e)});break;case"playbackRate":this.options[e]=i=this._limitValue(i,this.options.minPlaybackRate,this.options.maxPlaybackRate),this.html.used&&this._html_setProperty("playbackRate",i),this._updatePlaybackRate();break;case"defaultPlaybackRate":this.options[e]=i=this._limitValue(i,this.options.minPlaybackRate,this.options.maxPlaybackRate),this.html.used&&this._html_setProperty("defaultPlaybackRate",i),this._updatePlaybackRate();break;case"minPlaybackRate":this.options[e]=i=this._limitValue(i,.1,this.options.maxPlaybackRate-.1),this._updatePlaybackRate();break;case"maxPlaybackRate":this.options[e]=i=this._limitValue(i,this.options.minPlaybackRate+.1,16),this._updatePlaybackRate();break;case"fullScreen":if(this.options[e]!==i){var s=t.jPlayer.nativeFeatures.fullscreen.used.webkitVideo;(!s||s&&!this.status.waitForPlay)&&(s||(this.options[e]=i),i?this._requestFullscreen():this._exitFullscreen(),s||this._setOption("fullWindow",i))}break;case"fullWindow":this.options[e]!==i&&(this._removeUiClass(),this.options[e]=i,this._refreshSize());break;case"size":this.options.fullWindow||this.options[e].cssClass===i.cssClass||this._removeUiClass(),this.options[e]=t.extend({},this.options[e],i),this._refreshSize();break;case"sizeFull":this.options.fullWindow&&this.options[e].cssClass!==i.cssClass&&this._removeUiClass(),this.options[e]=t.extend({},this.options[e],i),this._refreshSize();break;case"autohide":this.options[e]=t.extend({},this.options[e],i),this._updateAutohide();break;case"loop":this._loop(i);break;case"remainingDuration":this.options[e]=i,this._updateInterface();break;case"toggleDuration":this.options[e]=i;break;case"nativeVideoControls":this.options[e]=t.extend({},this.options[e],i),this.status.nativeVideoControls=this._uaBlocklist(this.options.nativeVideoControls),this._restrictNativeVideoControls(),this._updateNativeVideoControls();break;case"noFullWindow":this.options[e]=t.extend({},this.options[e],i),this.status.nativeVideoControls=this._uaBlocklist(this.options.nativeVideoControls),this.status.noFullWindow=this._uaBlocklist(this.options.noFullWindow),this._restrictNativeVideoControls(),this._updateButtons();break;case"noVolume":this.options[e]=t.extend({},this.options[e],i),this.status.noVolume=this._uaBlocklist(this.options.noVolume),this._updateVolume(),this._updateMute();break;case"emulateHtml":this.options[e]!==i&&(this.options[e]=i,i?this._emulateHtmlBridge():this._destroyHtmlBridge());break;case"timeFormat":this.options[e]=t.extend({},this.options[e],i);break;case"keyEnabled":this.options[e]=i,i||this!==t.jPlayer.focus||(t.jPlayer.focus=null);break;case"keyBindings":this.options[e]=t.extend(!0,{},this.options[e],i);break;case"audioFullScreen":this.options[e]=i;break;case"autoBlur":this.options[e]=i}return this},_refreshSize:function(){this._setSize(),this._addUiClass(),this._updateSize(),this._updateButtons(),this._updateAutohide(),this._trigger(t.jPlayer.event.resize)},_setSize:function(){this.options.fullWindow?(this.status.width=this.options.sizeFull.width,this.status.height=this.options.sizeFull.height,this.status.cssClass=this.options.sizeFull.cssClass):(this.status.width=this.options.size.width,this.status.height=this.options.size.height,this.status.cssClass=this.options.size.cssClass),this.element.css({width:this.status.width,height:this.status.height})},_addUiClass:function(){this.ancestorJq.length&&this.ancestorJq.addClass(this.status.cssClass)},_removeUiClass:function(){this.ancestorJq.length&&this.ancestorJq.removeClass(this.status.cssClass)},_updateSize:function(){this.internal.poster.jq.css({width:this.status.width,height:this.status.height}),!this.status.waitForPlay&&this.html.active&&this.status.video||this.html.video.available&&this.html.used&&this.status.nativeVideoControls?this.internal.video.jq.css({width:this.status.width,height:this.status.height}):!this.status.waitForPlay&&this.flash.active&&this.status.video&&this.internal.flash.jq.css({width:this.status.width,height:this.status.height})},_updateAutohide:function(){var t=this,e="mousemove.jPlayer",i=".jPlayerAutohide",n=e+i,s=function(e){var i,n,s=!1;"undefined"!=typeof t.internal.mouse?(i=t.internal.mouse.x-e.pageX,n=t.internal.mouse.y-e.pageY,s=Math.floor(i)>0||Math.floor(n)>0):s=!0,t.internal.mouse={x:e.pageX,y:e.pageY},s&&t.css.jq.gui.fadeIn(t.options.autohide.fadeIn,function(){clearTimeout(t.internal.autohideId),t.internal.autohideId=setTimeout(function(){t.css.jq.gui.fadeOut(t.options.autohide.fadeOut)},t.options.autohide.hold)})};this.css.jq.gui.length&&(this.css.jq.gui.stop(!0,!0),clearTimeout(this.internal.autohideId),delete this.internal.mouse,this.element.unbind(i),this.css.jq.gui.unbind(i),this.status.nativeVideoControls?this.css.jq.gui.hide():this.options.fullWindow&&this.options.autohide.full||!this.options.fullWindow&&this.options.autohide.restored?(this.element.bind(n,s),this.css.jq.gui.bind(n,s),this.css.jq.gui.hide()):this.css.jq.gui.show())},fullScreen:function(t){var e="object"==typeof t;e&&this.options.useStateClassSkin&&this.options.fullScreen?this._setOption("fullScreen",!1):this._setOption("fullScreen",!0)},restoreScreen:function(){this._setOption("fullScreen",!1)},_fullscreenAddEventListeners:function(){var e=this,i=t.jPlayer.nativeFeatures.fullscreen;i.api.fullscreenEnabled&&i.event.fullscreenchange&&("function"!=typeof this.internal.fullscreenchangeHandler&&(this.internal.fullscreenchangeHandler=function(){e._fullscreenchange()}),document.addEventListener(i.event.fullscreenchange,this.internal.fullscreenchangeHandler,!1))},_fullscreenRemoveEventListeners:function(){var e=t.jPlayer.nativeFeatures.fullscreen;this.internal.fullscreenchangeHandler&&document.removeEventListener(e.event.fullscreenchange,this.internal.fullscreenchangeHandler,!1)},_fullscreenchange:function(){this.options.fullScreen&&!t.jPlayer.nativeFeatures.fullscreen.api.fullscreenElement()&&this._setOption("fullScreen",!1)},_requestFullscreen:function(){var e=this.ancestorJq.length?this.ancestorJq[0]:this.element[0],i=t.jPlayer.nativeFeatures.fullscreen;i.used.webkitVideo&&(e=this.htmlElement.video),i.api.fullscreenEnabled&&i.api.requestFullscreen(e)},_exitFullscreen:function(){var e,i=t.jPlayer.nativeFeatures.fullscreen;i.used.webkitVideo&&(e=this.htmlElement.video),i.api.fullscreenEnabled&&i.api.exitFullscreen(e)},_html_initMedia:function(e){var i=t(this.htmlElement.media).empty();t.each(e.track||[],function(t,e){var n=document.createElement("track");n.setAttribute("kind",e.kind?e.kind:""),n.setAttribute("src",e.src?e.src:""),n.setAttribute("srclang",e.srclang?e.srclang:""),n.setAttribute("label",e.label?e.label:""),e.def&&n.setAttribute("default",e.def),i.append(n)}),this.htmlElement.media.src=this.status.src,"none"!==this.options.preload&&this._html_load(),this._trigger(t.jPlayer.event.timeupdate)},_html_setFormat:function(e){var i=this;t.each(this.formats,function(t,n){return i.html.support[n]&&e[n]?(i.status.src=e[n],i.status.format[n]=!0,i.status.formatType=n,!1):void 0})},_html_setAudio:function(t){this._html_setFormat(t),this.htmlElement.media=this.htmlElement.audio,this._html_initMedia(t)},_html_setVideo:function(t){this._html_setFormat(t),this.status.nativeVideoControls&&(this.htmlElement.video.poster=this._validString(t.poster)?t.poster:""),this.htmlElement.media=this.htmlElement.video,this._html_initMedia(t)},_html_resetMedia:function(){this.htmlElement.media&&(this.htmlElement.media.id!==this.internal.video.id||this.status.nativeVideoControls||this.internal.video.jq.css({width:"0px",height:"0px"}),this.htmlElement.media.pause())},_html_clearMedia:function(){this.htmlElement.media&&(this.htmlElement.media.src="about:blank",this.htmlElement.media.load())},_html_load:function(){this.status.waitForLoad&&(this.status.waitForLoad=!1,this.htmlElement.media.load()),clearTimeout(this.internal.htmlDlyCmdId)},_html_play:function(t){var e=this,i=this.htmlElement.media;if(this.androidFix.pause=!1,this._html_load(),this.androidFix.setMedia)this.androidFix.play=!0,this.androidFix.time=t;else if(isNaN(t))i.play();else{this.internal.cmdsIgnored&&i.play();try{if(i.seekable&&!("object"==typeof i.seekable&&i.seekable.length>0))throw 1;i.currentTime=t,i.play()}catch(i){return void(this.internal.htmlDlyCmdId=setTimeout(function(){e.play(t)},250))}}this._html_checkWaitForPlay()},_html_pause:function(t){var e=this,i=this.htmlElement.media;if(this.androidFix.play=!1,t>0?this._html_load():clearTimeout(this.internal.htmlDlyCmdId),i.pause(),this.androidFix.setMedia)this.androidFix.pause=!0,this.androidFix.time=t;else if(!isNaN(t))try{if(i.seekable&&!("object"==typeof i.seekable&&i.seekable.length>0))throw 1;i.currentTime=t}catch(i){return void(this.internal.htmlDlyCmdId=setTimeout(function(){e.pause(t)},250))}t>0&&this._html_checkWaitForPlay()},_html_playHead:function(t){var e=this,i=this.htmlElement.media;this._html_load();try{if("object"==typeof i.seekable&&i.seekable.length>0)i.currentTime=t*i.seekable.end(i.seekable.length-1)/100;else{if(!(i.duration>0)||isNaN(i.duration))throw"e";i.currentTime=t*i.duration/100}}catch(i){return void(this.internal.htmlDlyCmdId=setTimeout(function(){e.playHead(t)},250))}this.status.waitForLoad||this._html_checkWaitForPlay()},_html_checkWaitForPlay:function(){this.status.waitForPlay&&(this.status.waitForPlay=!1,this.css.jq.videoPlay.length&&this.css.jq.videoPlay.hide(),this.status.video&&(this.internal.poster.jq.hide(),this.internal.video.jq.css({width:this.status.width,height:this.status.height})))},_html_setProperty:function(t,e){this.html.audio.available&&(this.htmlElement.audio[t]=e),this.html.video.available&&(this.htmlElement.video[t]=e)},_aurora_setAudio:function(e){var i=this;t.each(this.formats,function(t,n){return i.aurora.support[n]&&e[n]?(i.status.src=e[n],i.status.format[n]=!0,i.status.formatType=n,!1):void 0}),this.aurora.player=new AV.Player.fromURL(this.status.src),this._addAuroraEventListeners(this.aurora.player,this.aurora),"auto"===this.options.preload&&(this._aurora_load(),this.status.waitForLoad=!1)},_aurora_resetMedia:function(){this.aurora.player&&this.aurora.player.stop()},_aurora_clearMedia:function(){},_aurora_load:function(){this.status.waitForLoad&&(this.status.waitForLoad=!1,this.aurora.player.preload())},_aurora_play:function(e){this.status.waitForLoad||isNaN(e)||this.aurora.player.seek(e),this.aurora.player.playing||this.aurora.player.play(),this.status.waitForLoad=!1,this._aurora_checkWaitForPlay(),this._updateButtons(!0),this._trigger(t.jPlayer.event.play)},_aurora_pause:function(e){isNaN(e)||this.aurora.player.seek(1e3*e),this.aurora.player.pause(),e>0&&this._aurora_checkWaitForPlay(),this._updateButtons(!1),this._trigger(t.jPlayer.event.pause)},_aurora_playHead:function(t){this.aurora.player.duration>0&&this.aurora.player.seek(t*this.aurora.player.duration/100),this.status.waitForLoad||this._aurora_checkWaitForPlay()},_aurora_checkWaitForPlay:function(){this.status.waitForPlay&&(this.status.waitForPlay=!1)},_aurora_volume:function(t){this.aurora.player.volume=100*t},_aurora_mute:function(t){t?(this.aurora.properties.lastvolume=this.aurora.player.volume,this.aurora.player.volume=0):this.aurora.player.volume=this.aurora.properties.lastvolume,this.aurora.properties.muted=t},_flash_setAudio:function(e){var i=this;try{t.each(this.formats,function(t,n){if(i.flash.support[n]&&e[n]){switch(n){case"m4a":case"fla":i._getMovie().fl_setAudio_m4a(e[n]);break;case"mp3":i._getMovie().fl_setAudio_mp3(e[n]);break;case"rtmpa":i._getMovie().fl_setAudio_rtmp(e[n])}return i.status.src=e[n],i.status.format[n]=!0,i.status.formatType=n,!1}}),"auto"===this.options.preload&&(this._flash_load(),this.status.waitForLoad=!1)}catch(t){this._flashError(t)}},_flash_setVideo:function(e){var i=this;try{t.each(this.formats,function(t,n){if(i.flash.support[n]&&e[n]){switch(n){case"m4v":case"flv":i._getMovie().fl_setVideo_m4v(e[n]);break;case"rtmpv":i._getMovie().fl_setVideo_rtmp(e[n])}return i.status.src=e[n],i.status.format[n]=!0,i.status.formatType=n,!1}}),"auto"===this.options.preload&&(this._flash_load(),this.status.waitForLoad=!1)}catch(t){this._flashError(t)}},_flash_resetMedia:function(){this.internal.flash.jq.css({width:"0px",height:"0px"}),this._flash_pause(NaN)},_flash_clearMedia:function(){try{this._getMovie().fl_clearMedia()}catch(t){this._flashError(t)}},_flash_load:function(){try{this._getMovie().fl_load()}catch(t){this._flashError(t)}this.status.waitForLoad=!1},_flash_play:function(t){try{this._getMovie().fl_play(t)}catch(t){this._flashError(t)}this.status.waitForLoad=!1,this._flash_checkWaitForPlay()},_flash_pause:function(t){try{this._getMovie().fl_pause(t)}catch(t){this._flashError(t)}t>0&&(this.status.waitForLoad=!1,this._flash_checkWaitForPlay())},_flash_playHead:function(t){try{this._getMovie().fl_play_head(t)}catch(t){this._flashError(t)}this.status.waitForLoad||this._flash_checkWaitForPlay()},_flash_checkWaitForPlay:function(){this.status.waitForPlay&&(this.status.waitForPlay=!1,this.css.jq.videoPlay.length&&this.css.jq.videoPlay.hide(),this.status.video&&(this.internal.poster.jq.hide(),this.internal.flash.jq.css({width:this.status.width,height:this.status.height})))},_flash_volume:function(t){try{this._getMovie().fl_volume(t)}catch(t){this._flashError(t)}},_flash_mute:function(t){try{this._getMovie().fl_mute(t)}catch(t){this._flashError(t)}},_getMovie:function(){return document[this.internal.flash.id]},_getFlashPluginVersion:function(){var t,e=0;if(window.ActiveXObject)try{if(t=new ActiveXObject("ShockwaveFlash.ShockwaveFlash")){var i=t.GetVariable("$version");i&&(i=i.split(" ")[1].split(","),e=parseInt(i[0],10)+"."+parseInt(i[1],10))}}catch(t){}else navigator.plugins&&navigator.mimeTypes.length>0&&(t=navigator.plugins["Shockwave Flash"],t&&(e=navigator.plugins["Shockwave Flash"].description.replace(/.*\s(\d+\.\d+).*/,"$1")));return 1*e},_checkForFlash:function(t){var e=!1;return this._getFlashPluginVersion()>=t&&(e=!0),e},_validString:function(t){return t&&"string"==typeof t},_limitValue:function(t,e,i){return e>t?e:t>i?i:t},_urlNotSetError:function(e){this._error({type:t.jPlayer.error.URL_NOT_SET,context:e,message:t.jPlayer.errorMsg.URL_NOT_SET,hint:t.jPlayer.errorHint.URL_NOT_SET})},_flashError:function(e){var i;i=this.internal.ready?"FLASH_DISABLED":"FLASH",this._error({type:t.jPlayer.error[i],context:this.internal.flash.swf,message:t.jPlayer.errorMsg[i]+e.message,hint:t.jPlayer.errorHint[i]}),this.internal.flash.jq.css({width:"1px",height:"1px"})},_error:function(e){this._trigger(t.jPlayer.event.error,e),this.options.errorAlerts&&this._alert("Error!"+(e.message?"\n"+e.message:"")+(e.hint?"\n"+e.hint:"")+"\nContext: "+e.context)},_warning:function(i){this._trigger(t.jPlayer.event.warning,e,i),this.options.warningAlerts&&this._alert("Warning!"+(i.message?"\n"+i.message:"")+(i.hint?"\n"+i.hint:"")+"\nContext: "+i.context)},_alert:function(t){var e="jPlayer "+this.version.script+" : id='"+this.internal.self.id+"' : "+t;this.options.consoleAlerts?window.console&&window.console.log&&window.console.log(e):alert(e)},_emulateHtmlBridge:function(){var e=this;t.each(t.jPlayer.emulateMethods.split(/\s+/g),function(t,i){e.internal.domNode[i]=function(t){e[i](t)}}),t.each(t.jPlayer.event,function(i,n){var s=!0;t.each(t.jPlayer.reservedEvent.split(/\s+/g),function(t,e){return e===i?(s=!1,!1):void 0}),s&&e.element.bind(n+".jPlayer.jPlayerHtml",function(){e._emulateHtmlUpdate();var t=document.createEvent("Event");t.initEvent(i,!1,!0),e.internal.domNode.dispatchEvent(t)})})},_emulateHtmlUpdate:function(){var e=this;t.each(t.jPlayer.emulateStatus.split(/\s+/g),function(t,i){e.internal.domNode[i]=e.status[i]}),t.each(t.jPlayer.emulateOptions.split(/\s+/g),function(t,i){e.internal.domNode[i]=e.options[i]})},_destroyHtmlBridge:function(){var e=this;this.element.unbind(".jPlayerHtml");var i=t.jPlayer.emulateMethods+" "+t.jPlayer.emulateStatus+" "+t.jPlayer.emulateOptions;t.each(i.split(/\s+/g),function(t,i){delete e.internal.domNode[i]})}},t.jPlayer.error={FLASH:"e_flash",FLASH_DISABLED:"e_flash_disabled",NO_SOLUTION:"e_no_solution",NO_SUPPORT:"e_no_support",URL:"e_url",URL_NOT_SET:"e_url_not_set",VERSION:"e_version"},t.jPlayer.errorMsg={FLASH:"jPlayer's Flash fallback is not configured correctly, or a command was issued before the jPlayer Ready event. Details: ",FLASH_DISABLED:"jPlayer's Flash fallback has been disabled by the browser due to the CSS rules you have used. Details: ",NO_SOLUTION:"No solution can be found by jPlayer in this browser. Neither HTML nor Flash can be used.",NO_SUPPORT:"It is not possible to play any media format provided in setMedia() on this browser using your current options.",URL:"Media URL could not be loaded.",URL_NOT_SET:"Attempt to issue media playback commands, while no media url is set.",VERSION:"jPlayer "+t.jPlayer.prototype.version.script+" needs Jplayer.swf version "+t.jPlayer.prototype.version.needFlash+" but found "},t.jPlayer.errorHint={FLASH:"Check your swfPath option and that Jplayer.swf is there.",FLASH_DISABLED:"Check that you have not display:none; the jPlayer entity or any ancestor.",NO_SOLUTION:"Review the jPlayer options: support and supplied.",NO_SUPPORT:"Video or audio formats defined in the supplied option are missing.",URL:"Check media URL is valid.",URL_NOT_SET:"Use setMedia() to set the media URL.",VERSION:"Update jPlayer files."},t.jPlayer.warning={CSS_SELECTOR_COUNT:"e_css_selector_count",CSS_SELECTOR_METHOD:"e_css_selector_method",CSS_SELECTOR_STRING:"e_css_selector_string",OPTION_KEY:"e_option_key"},t.jPlayer.warningMsg={CSS_SELECTOR_COUNT:"The number of css selectors found did not equal one: ",CSS_SELECTOR_METHOD:"The methodName given in jPlayer('cssSelector') is not a valid jPlayer method.",CSS_SELECTOR_STRING:"The methodCssSelector given in jPlayer('cssSelector') is not a String or is empty.",OPTION_KEY:"The option requested in jPlayer('option') is undefined."},t.jPlayer.warningHint={CSS_SELECTOR_COUNT:"Check your css selector and the ancestor.",CSS_SELECTOR_METHOD:"Check your method name.",CSS_SELECTOR_STRING:"Check your css selector is a string.",OPTION_KEY:"Check your option name."}}),!function(t,e,i,n){var s=e.document,o=t(s),r=t(e),a=Array.prototype,l=1.41,c=!0,d=3e4,h=!1,u=navigator.userAgent.toLowerCase(),f=e.location.hash.replace(/#\//,""),p=e.location.protocol,m=Math,g=function(){},v=function(){return!1},y=function(){var t=3,e=s.createElement("div"),i=e.getElementsByTagName("i");do e.innerHTML="<!--[if gt IE "+ ++t+"]><i></i><![endif]-->";while(i[0]);return t>4?t:s.documentMode||n}(),b=function(){return{html:s.documentElement,body:s.body,head:s.getElementsByTagName("head")[0],title:s.title}},w=e.parent!==e.self,_="data ready thumbnail loadstart loadfinish image play pause progress fullscreen_enter fullscreen_exit idle_enter idle_exit rescale lightbox_open lightbox_close lightbox_image",k=function(){var e=[];return t.each(_.split(" "),function(t,i){e.push(i),/_/.test(i)&&e.push(i.replace(/_/g,""))}),e}(),x=function(e){var i;return"object"!=typeof e?e:(t.each(e,function(n,s){/^[a-z]+_/.test(n)&&(i="",t.each(n.split("_"),function(t,e){i+=t>0?e.substr(0,1).toUpperCase()+e.substr(1):e}),e[i]=s,delete e[n])}),e)},C=function(e){return t.inArray(e,k)>-1?i[e.toUpperCase()]:e},S={youtube:{reg:/https?:\/\/(?:[a-zA_Z]{2,3}.)?(?:youtube\.com\/watch\?)((?:[\w\d\-\_\=]+&amp;(?:amp;)?)*v(?:&lt;[A-Z]+&gt;)?=([0-9a-zA-Z\-\_]+))/i,embed:function(){return"http://www.youtube.com/embed/"+this.id},getUrl:function(){return p+"//gdata.youtube.com/feeds/api/videos/"+this.id+"?v=2&alt=json-in-script&callback=?"},get_thumb:function(t){return t.entry.media$group.media$thumbnail[2].url},get_image:function(t){return t.entry.yt$hd?p+"//img.youtube.com/vi/"+this.id+"/maxresdefault.jpg":t.entry.media$group.media$thumbnail[3].url}},vimeo:{reg:/https?:\/\/(?:www\.)?(vimeo\.com)\/(?:hd#)?([0-9]+)/i,embed:function(){return"http://player.vimeo.com/video/"+this.id},getUrl:function(){return p+"//vimeo.com/api/v2/video/"+this.id+".json?callback=?"},get_thumb:function(t){return t[0].thumbnail_medium},get_image:function(t){return t[0].thumbnail_large}},dailymotion:{reg:/https?:\/\/(?:www\.)?(dailymotion\.com)\/video\/([^_]+)/,embed:function(){return p+"//www.dailymotion.com/embed/video/"+this.id},getUrl:function(){return"https://api.dailymotion.com/video/"+this.id+"?fields=thumbnail_240_url,thumbnail_720_url&callback=?"},get_thumb:function(t){return t.thumbnail_240_url},get_image:function(t){return t.thumbnail_720_url}},_inst:[]},T=function(e,i){for(var n=0;n<S._inst.length;n++)if(S._inst[n].id===i&&S._inst[n].type==e)return S._inst[n];this.type=e,this.id=i,this.readys=[],S._inst.push(this);var s=this;t.extend(this,S[e]),t.getJSON(this.getUrl(),function(e){s.data=e,t.each(s.readys,function(t,e){e(s.data)}),s.readys=[]}),this.getMedia=function(t,e,i){i=i||g;var n=this,s=function(i){e(n["get_"+t](i))};try{n.data?s(n.data):n.readys.push(s)}catch(t){i()}}},E=function(t){var e;for(var i in S)if(e=t&&S[i].reg&&t.match(S[i].reg),e&&e.length)return{id:e[2],provider:i};return!1},D={support:function(){var t=b().html;return!w&&(t.requestFullscreen||t.msRequestFullscreen||t.mozRequestFullScreen||t.webkitRequestFullScreen)}(),callback:g,enter:function(t,e,i){this.instance=t,this.callback=e||g,i=i||b().html,i.requestFullscreen?i.requestFullscreen():i.msRequestFullscreen?i.msRequestFullscreen():i.mozRequestFullScreen?i.mozRequestFullScreen():i.webkitRequestFullScreen&&i.webkitRequestFullScreen()},exit:function(t){this.callback=t||g,s.exitFullscreen?s.exitFullscreen():s.msExitFullscreen?s.msExitFullscreen():s.mozCancelFullScreen?s.mozCancelFullScreen():s.webkitCancelFullScreen&&s.webkitCancelFullScreen()},instance:null,listen:function(){if(this.support){var t=function(){if(D.instance){var t=D.instance._fullscreen;s.fullscreen||s.mozFullScreen||s.webkitIsFullScreen||s.msFullscreenElement&&null!==s.msFullscreenElement?t._enter(D.callback):t._exit(D.callback)}};s.addEventListener("fullscreenchange",t,!1),s.addEventListener("MSFullscreenChange",t,!1),s.addEventListener("mozfullscreenchange",t,!1),s.addEventListener("webkitfullscreenchange",t,!1)}}},P=[],M=[],A=!1,I=!1,L=[],j=[],O=function(e){j.push(e),t.each(L,function(t,i){i._options.theme!=e.name&&(i._initialized||i._options.theme)||(i.theme=e,i._init.call(i))})},$=function(){return{clearTimer:function(e){t.each(i.get(),function(){this.clearTimer(e)})},addTimer:function(e){t.each(i.get(),function(){this.addTimer(e)})},array:function(t){return a.slice.call(t,0)},create:function(t,e){e=e||"div";var i=s.createElement(e);return i.className=t,i},removeFromArray:function(e,i){return t.each(e,function(t,n){if(n==i)return e.splice(t,1),!1}),e},getScriptPath:function(e){e=e||t("script:last").attr("src");var i=e.split("/");return 1==i.length?"":(i.pop(),i.join("/")+"/")},animate:function(){var n,o,r,a,l,c,d,h=function(t){
var i,n="transition WebkitTransition MozTransition OTransition".split(" ");if(e.opera)return!1;for(i=0;n[i];i++)if("undefined"!=typeof t[n[i]])return n[i];return!1}((s.body||s.documentElement).style),u={MozTransition:"transitionend",OTransition:"oTransitionEnd",WebkitTransition:"webkitTransitionEnd",transition:"transitionend"}[h],f={_default:[.25,.1,.25,1],galleria:[.645,.045,.355,1],galleriaIn:[.55,.085,.68,.53],galleriaOut:[.25,.46,.45,.94],ease:[.25,0,.25,1],linear:[.25,.25,.75,.75],"ease-in":[.42,0,1,1],"ease-out":[0,0,.58,1],"ease-in-out":[.42,0,.58,1]},p=function(e,i,n){var s={};n=n||"transition",t.each("webkit moz ms o".split(" "),function(){s["-"+this+"-"+n]=i}),e.css(s)},m=function(t){p(t,"none","transition"),i.WEBKIT&&i.TOUCH&&(p(t,"translate3d(0,0,0)","transform"),t.data("revert")&&(t.css(t.data("revert")),t.data("revert",null)))};return function(s,v,y){return y=t.extend({duration:400,complete:g,stop:!1},y),s=t(s),y.duration?h?(y.stop&&(s.off(u),m(s)),n=!1,t.each(v,function(t,e){d=s.css(t),$.parseValue(d)!=$.parseValue(e)&&(n=!0),s.css(t,d)}),n?(o=[],r=y.easing in f?f[y.easing]:f._default,a=" "+y.duration+"ms cubic-bezier("+r.join(",")+")",void e.setTimeout(function(e,n,s,r){return function(){e.one(n,function(t){return function(){m(t),y.complete.call(t[0])}}(e)),i.WEBKIT&&i.TOUCH&&(l={},c=[0,0,0],t.each(["left","top"],function(t,i){i in s&&(c[t]=$.parseValue(s[i])-$.parseValue(e.css(i))+"px",l[i]=s[i],delete s[i])}),(c[0]||c[1])&&(e.data("revert",l),o.push("-webkit-transform"+r),p(e,"translate3d("+c.join(",")+")","transform"))),t.each(s,function(t){o.push(t+r)}),p(e,o.join(",")),e.css(s)}}(s,u,v,a),2)):void e.setTimeout(function(){y.complete.call(s[0])},y.duration)):void s.animate(v,y):(s.css(v),void y.complete.call(s[0]))}}(),removeAlpha:function(t){if(t instanceof jQuery&&(t=t[0]),y<9&&t){var e=t.style,i=t.currentStyle,n=i&&i.filter||e.filter||"";/alpha/.test(n)&&(e.filter=n.replace(/alpha\([^)]*\)/i,""))}},forceStyles:function(e,i){e=t(e),e.attr("style")&&e.data("styles",e.attr("style")).removeAttr("style"),e.css(i)},revertStyles:function(){t.each($.array(arguments),function(e,i){i=t(i),i.removeAttr("style"),i.attr("style",""),i.data("styles")&&i.attr("style",i.data("styles")).data("styles",null)})},moveOut:function(t){$.forceStyles(t,{position:"absolute",left:-1e4})},moveIn:function(){$.revertStyles.apply($,$.array(arguments))},hide:function(e,i,n){n=n||g;var s=t(e);e=s[0],s.data("opacity")||s.data("opacity",s.css("opacity"));var o={opacity:0};if(i){var r=y<9&&e?function(){$.removeAlpha(e),e.style.visibility="hidden",n.call(e)}:n;$.animate(e,o,{duration:i,complete:r,stop:!0})}else y<9&&e?($.removeAlpha(e),e.style.visibility="hidden"):s.css(o)},show:function(e,i,n){n=n||g;var s=t(e);e=s[0];var o=parseFloat(s.data("opacity"))||1,r={opacity:o};if(i){y<9&&(s.css("opacity",0),e.style.visibility="visible");var a=y<9&&e?function(){1==r.opacity&&$.removeAlpha(e),n.call(e)}:n;$.animate(e,r,{duration:i,complete:a,stop:!0})}else y<9&&1==r.opacity&&e?($.removeAlpha(e),e.style.visibility="visible"):s.css(r)},wait:function(n){i._waiters=i._waiters||[],n=t.extend({until:v,success:g,error:function(){i.raise("Could not complete wait function.")},timeout:3e3},n);var s,o,r,a=$.timestamp(),l=function(){return o=$.timestamp(),s=o-a,$.removeFromArray(i._waiters,r),n.until(s)?(n.success(),!1):"number"==typeof n.timeout&&o>=a+n.timeout?(n.error(),!1):void i._waiters.push(r=e.setTimeout(l,10))};i._waiters.push(r=e.setTimeout(l,10))},toggleQuality:function(t,e){7!==y&&8!==y||!t||"IMG"!=t.nodeName.toUpperCase()||("undefined"==typeof e&&(e="nearest-neighbor"===t.style.msInterpolationMode),t.style.msInterpolationMode=e?"bicubic":"nearest-neighbor")},insertStyleTag:function(e,i){if(!i||!t("#"+i).length){var n=s.createElement("style");if(i&&(n.id=i),b().head.appendChild(n),n.styleSheet)n.styleSheet.cssText=e;else{var o=s.createTextNode(e);n.appendChild(o)}}},loadScript:function(e,i){var n=!1,s=t("<script>").attr({src:e,async:!0}).get(0);s.onload=s.onreadystatechange=function(){n||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(n=!0,s.onload=s.onreadystatechange=null,"function"==typeof i&&i.call(this,this))},b().head.appendChild(s)},parseValue:function(t){if("number"==typeof t)return t;if("string"==typeof t){var e=t.match(/\-?\d|\./g);return e&&e.constructor===Array?1*e.join(""):0}return 0},timestamp:function(){return(new Date).getTime()},loadCSS:function(e,o,r){var a,l;if(t("link[rel=stylesheet]").each(function(){if(new RegExp(e).test(this.href))return a=this,!1}),"function"==typeof o&&(r=o,o=n),r=r||g,a)return r.call(a,a),a;if(l=s.styleSheets.length,t("#"+o).length)t("#"+o).attr("href",e),l--;else{a=t("<link>").attr({rel:"stylesheet",href:e,id:o}).get(0);var c=t('link[rel="stylesheet"], style');if(c.length?c.get(0).parentNode.insertBefore(a,c[0]):b().head.appendChild(a),y&&l>=31)return void i.raise("You have reached the browser stylesheet limit (31)",!0)}if("function"==typeof r){var d=t("<s>").attr("id","galleria-loader").hide().appendTo(b().body);$.wait({until:function(){return 1==d.height()},success:function(){d.remove(),r.call(a,a)},error:function(){d.remove(),i.raise("Theme CSS could not load after 20 sec. "+(i.QUIRK?"Your browser is in Quirks Mode, please add a correct doctype.":"Please download the latest theme at http://galleria.io/customer/."),!0)},timeout:5e3})}return a}}}(),N=function(e){var i=".galleria-videoicon{width:60px;height:60px;position:absolute;top:50%;left:50%;z-index:1;margin:-30px 0 0 -30px;cursor:pointer;background:#000;background:rgba(0,0,0,.8);border-radius:3px;-webkit-transition:all 150ms}.galleria-videoicon i{width:0px;height:0px;border-style:solid;border-width:10px 0 10px 16px;display:block;border-color:transparent transparent transparent #ffffff;margin:20px 0 0 22px}.galleria-image:hover .galleria-videoicon{background:#000}";return $.insertStyleTag(i,"galleria-videoicon"),t($.create("galleria-videoicon")).html("<i></i>").appendTo(e).click(function(){t(this).siblings("img").mouseup()})},F=function(){var e=function(e,i,n,s){var o=this.getOptions("easing"),r=this.getStageWidth(),a={left:r*(e.rewind?-1:1)},l={left:0};n?(a.opacity=0,l.opacity=1):a.opacity=1,t(e.next).css(a),$.animate(e.next,l,{duration:e.speed,complete:function(t){return function(){i(),t.css({left:0})}}(t(e.next).add(e.prev)),queue:!1,easing:o}),s&&(e.rewind=!e.rewind),e.prev&&(a={left:0},l={left:r*(e.rewind?1:-1)},n&&(a.opacity=1,l.opacity=0),t(e.prev).css(a),$.animate(e.prev,l,{duration:e.speed,queue:!1,easing:o,complete:function(){t(this).css("opacity",0)}}))};return{active:!1,init:function(t,e,i){F.effects.hasOwnProperty(t)&&F.effects[t].call(this,e,i)},effects:{fade:function(e,i){t(e.next).css({opacity:0,left:0}),$.animate(e.next,{opacity:1},{duration:e.speed,complete:i}),e.prev&&(t(e.prev).css("opacity",1).show(),$.animate(e.prev,{opacity:0},{duration:e.speed}))},flash:function(e,i){t(e.next).css({opacity:0,left:0}),e.prev?$.animate(e.prev,{opacity:0},{duration:e.speed/2,complete:function(){$.animate(e.next,{opacity:1},{duration:e.speed,complete:i})}}):$.animate(e.next,{opacity:1},{duration:e.speed,complete:i})},pulse:function(e,i){e.prev&&t(e.prev).hide(),t(e.next).css({opacity:0,left:0}).show(),$.animate(e.next,{opacity:1},{duration:e.speed,complete:i})},slide:function(){e.apply(this,$.array(arguments))},fadeslide:function(){e.apply(this,$.array(arguments).concat([!0]))},doorslide:function(){e.apply(this,$.array(arguments).concat([!1,!0]))}}}}();D.listen(),t.event.special["click:fast"]={propagate:!0,add:function(i){var n=function(t){if(t.touches&&t.touches.length){var e=t.touches[0];return{x:e.pageX,y:e.pageY}}},s={touched:!1,touchdown:!1,coords:{x:0,y:0},evObj:{}};t(this).data({clickstate:s,timer:0}).on("touchstart.fast",function(i){e.clearTimeout(t(this).data("timer")),t(this).data("clickstate",{touched:!0,touchdown:!0,coords:n(i.originalEvent),evObj:i})}).on("touchmove.fast",function(e){var i=n(e.originalEvent),s=t(this).data("clickstate"),o=Math.max(Math.abs(s.coords.x-i.x),Math.abs(s.coords.y-i.y));o>6&&t(this).data("clickstate",t.extend(s,{touchdown:!1}))}).on("touchend.fast",function(n){var o=t(this),r=o.data("clickstate");r.touchdown&&i.handler.call(this,n),o.data("timer",e.setTimeout(function(){o.data("clickstate",s)},400))}).on("click.fast",function(e){var n=t(this).data("clickstate");return!n.touched&&(t(this).data("clickstate",s),void i.handler.call(this,e))})},remove:function(){t(this).off("touchstart.fast touchmove.fast touchend.fast click.fast")}},r.on("orientationchange",function(){t(this).resize()}),i=function(){var a=this;this._options={},this._playing=!1,this._playtime=5e3,this._active=null,this._queue={length:0},this._data=[],this._dom={},this._thumbnails=[],this._layers=[],this._initialized=!1,this._firstrun=!1,this._stageWidth=0,this._stageHeight=0,this._target=n,this._binds=[],this._id=parseInt(1e4*m.random(),10);var l="container stage images image-nav image-nav-left image-nav-right info info-text info-title info-description thumbnails thumbnails-list thumbnails-container thumb-nav-left thumb-nav-right loader counter tooltip",c="current total";t.each(l.split(" "),function(t,e){a._dom[e]=$.create("galleria-"+e)}),t.each(c.split(" "),function(t,e){a._dom[e]=$.create("galleria-"+e,"span")});var d=this._keyboard={keys:{UP:38,DOWN:40,LEFT:37,RIGHT:39,RETURN:13,ESCAPE:27,BACKSPACE:8,SPACE:32},map:{},bound:!1,press:function(t){var e=t.keyCode||t.which;e in d.map&&"function"==typeof d.map[e]&&d.map[e].call(a,t)},attach:function(t){var e,i;for(e in t)t.hasOwnProperty(e)&&(i=e.toUpperCase(),i in d.keys?d.map[d.keys[i]]=t[e]:d.map[i]=t[e]);d.bound||(d.bound=!0,o.on("keydown",d.press))},detach:function(){d.bound=!1,d.map={},o.off("keydown",d.press)}},h=this._controls={0:n,1:n,active:0,swap:function(){h.active=h.active?0:1},getActive:function(){return a._options.swipe?h.slides[a._active]:h[h.active]},getNext:function(){return a._options.swipe?h.slides[a.getNext(a._active)]:h[1-h.active]},slides:[],frames:[],layers:[]},f=this._carousel={next:a.$("thumb-nav-right"),prev:a.$("thumb-nav-left"),width:0,current:0,max:0,hooks:[],update:function(){var e=0,i=0,n=[0];t.each(a._thumbnails,function(s,o){if(o.ready){e+=o.outerWidth||t(o.container).outerWidth(!0);var r=t(o.container).width();e+=r-m.floor(r),n[s+1]=e,i=m.max(i,o.outerHeight||t(o.container).outerHeight(!0))}}),a.$("thumbnails").css({width:e,height:i}),f.max=e,f.hooks=n,f.width=a.$("thumbnails-list").width(),f.setClasses(),a.$("thumbnails-container").toggleClass("galleria-carousel",e>f.width),f.width=a.$("thumbnails-list").width()},bindControls:function(){var t;f.next.on("click:fast",function(e){if(e.preventDefault(),"auto"===a._options.carouselSteps){for(t=f.current;t<f.hooks.length;t++)if(f.hooks[t]-f.hooks[f.current]>f.width){f.set(t-2);break}}else f.set(f.current+a._options.carouselSteps)}),f.prev.on("click:fast",function(e){if(e.preventDefault(),"auto"===a._options.carouselSteps)for(t=f.current;t>=0;t--){if(f.hooks[f.current]-f.hooks[t]>f.width){f.set(t+2);break}if(0===t){f.set(0);break}}else f.set(f.current-a._options.carouselSteps)})},set:function(t){for(t=m.max(t,0);f.hooks[t-1]+f.width>=f.max&&t>=0;)t--;f.current=t,f.animate()},getLast:function(t){return(t||f.current)-1},follow:function(t){if(0===t||t===f.hooks.length-2)return void f.set(t);for(var e=f.current;f.hooks[e]-f.hooks[f.current]<f.width&&e<=f.hooks.length;)e++;t-1<f.current?f.set(t-1):t+2>e&&f.set(t-e+f.current+2)},setClasses:function(){f.prev.toggleClass("disabled",!f.current),f.next.toggleClass("disabled",f.hooks[f.current]+f.width>=f.max)},animate:function(){f.setClasses();var e=f.hooks[f.current]*-1;isNaN(e)||(a.$("thumbnails").css("left",function(){return t(this).css("left")}),$.animate(a.get("thumbnails"),{left:e},{duration:a._options.carouselSpeed,easing:a._options.easing,queue:!1}))}},p=this._tooltip={initialized:!1,open:!1,timer:"tooltip"+a._id,swapTimer:"swap"+a._id,init:function(){p.initialized=!0;var t=".galleria-tooltip{padding:3px 8px;max-width:50%;background:#ffe;color:#000;z-index:3;position:absolute;font-size:11px;line-height:1.3;opacity:0;box-shadow:0 0 2px rgba(0,0,0,.4);-moz-box-shadow:0 0 2px rgba(0,0,0,.4);-webkit-box-shadow:0 0 2px rgba(0,0,0,.4);}";$.insertStyleTag(t,"galleria-tooltip"),a.$("tooltip").css({opacity:.8,visibility:"visible",display:"none"})},move:function(t){var e=a.getMousePosition(t).x,i=a.getMousePosition(t).y,n=a.$("tooltip"),s=e,o=i,r=n.outerHeight(!0)+1,l=n.outerWidth(!0),c=r+15,d=a.$("container").width()-l-2,h=a.$("container").height()-r-2;isNaN(s)||isNaN(o)||(s+=10,o-=r+8,s=m.max(0,m.min(d,s)),o=m.max(0,m.min(h,o)),i<c&&(o=c),n.css({left:s,top:o}))},bind:function(e,n){if(!i.TOUCH){p.initialized||p.init();var s=function(){a.$("container").off("mousemove",p.move),a.clearTimer(p.timer),a.$("tooltip").stop().animate({opacity:0},200,function(){a.$("tooltip").hide(),a.addTimer(p.swapTimer,function(){p.open=!1},1e3)})},o=function(e,i){p.define(e,i),t(e).hover(function(){a.clearTimer(p.swapTimer),a.$("container").off("mousemove",p.move).on("mousemove",p.move).trigger("mousemove"),p.show(e),a.addTimer(p.timer,function(){a.$("tooltip").stop().show().animate({opacity:1}),p.open=!0},p.open?0:500)},s).click(s)};"string"==typeof n?o(e in a._dom?a.get(e):e,n):t.each(e,function(t,e){o(a.get(t),e)})}},show:function(i){i=t(i in a._dom?a.get(i):i);var n=i.data("tt"),s=function(t){e.setTimeout(function(t){return function(){p.move(t)}}(t),10),i.off("mouseup",s)};n="function"==typeof n?n():n,n&&(a.$("tooltip").html(n.replace(/\s/,"&#160;")),i.on("mouseup",s))},define:function(e,i){if("function"!=typeof i){var n=i;i=function(){return n}}e=t(e in a._dom?a.get(e):e).data("tt",i),p.show(e)}},g=this._fullscreen={scrolled:0,crop:n,active:!1,prev:t(),beforeEnter:function(t){t()},beforeExit:function(t){t()},keymap:a._keyboard.map,parseCallback:function(e,i){return F.active?function(){"function"==typeof e&&e.call(a);var n=a._controls.getActive(),s=a._controls.getNext();a._scaleImage(s),a._scaleImage(n),i&&a._options.trueFullscreen&&t(n.container).add(s.container).trigger("transitionend")}:e},enter:function(t){g.beforeEnter(function(){t=g.parseCallback(t,!0),a._options.trueFullscreen&&D.support?(g.active=!0,$.forceStyles(a.get("container"),{width:"100%",height:"100%"}),a.rescale(),i.MAC?i.SAFARI&&/version\/[1-5]/.test(u)?(a.$("stage").css("opacity",0),e.setTimeout(function(){g.scale(),a.$("stage").css("opacity",1)},4)):(a.$("container").css("opacity",0).addClass("fullscreen"),e.setTimeout(function(){g.scale(),a.$("container").css("opacity",1)},50)):a.$("container").addClass("fullscreen"),r.resize(g.scale),D.enter(a,t,a.get("container"))):(g.scrolled=r.scrollTop(),i.TOUCH||e.scrollTo(0,0),g._enter(t))})},_enter:function(o){g.active=!0,w&&(g.iframe=function(){var n,o=s.referrer,r=s.createElement("a"),a=e.location;return r.href=o,r.protocol!=a.protocol||r.hostname!=a.hostname||r.port!=a.port?(i.raise("Parent fullscreen not available. Iframe protocol, domains and ports must match."),!1):(g.pd=e.parent.document,t(g.pd).find("iframe").each(function(){var t=this.contentDocument||this.contentWindow.document;if(t===s)return n=this,!1}),n)}()),$.hide(a.getActiveImage()),w&&g.iframe&&(g.iframe.scrolled=t(e.parent).scrollTop(),e.parent.scrollTo(0,0));var l=a.getData(),c=a._options,d=!a._options.trueFullscreen||!D.support,h={height:"100%",overflow:"hidden",margin:0,padding:0};if(d&&(a.$("container").addClass("fullscreen"),g.prev=a.$("container").prev(),g.prev.length||(g.parent=a.$("container").parent()),a.$("container").appendTo("body"),$.forceStyles(a.get("container"),{position:i.TOUCH?"absolute":"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:1e4}),$.forceStyles(b().html,h),$.forceStyles(b().body,h)),w&&g.iframe&&($.forceStyles(g.pd.documentElement,h),$.forceStyles(g.pd.body,h),$.forceStyles(g.iframe,t.extend(h,{width:"100%",height:"100%",top:0,left:0,position:"fixed",zIndex:1e4,border:"none"}))),g.keymap=t.extend({},a._keyboard.map),a.attachKeyboard({escape:a.exitFullscreen,right:a.next,left:a.prev}),g.crop=c.imageCrop,c.fullscreenCrop!=n&&(c.imageCrop=c.fullscreenCrop),l&&l.big&&l.image!==l.big){var u=new i.Picture,f=u.isCached(l.big),p=a.getIndex(),m=a._thumbnails[p];a.trigger({type:i.LOADSTART,cached:f,rewind:!1,index:p,imageTarget:a.getActiveImage(),thumbTarget:m,galleriaData:l}),u.load(l.big,function(e){a._scaleImage(e,{complete:function(e){a.trigger({type:i.LOADFINISH,cached:f,index:p,rewind:!1,imageTarget:e.image,thumbTarget:m});var n=a._controls.getActive().image;n&&t(n).width(e.image.width).height(e.image.height).attr("style",t(e.image).attr("style")).attr("src",e.image.src)}})});var v=a.getNext(p),y=new i.Picture,_=a.getData(v);y.preload(a.isFullscreen()&&_.big?_.big:_.image)}a.rescale(function(){a.addTimer(!1,function(){d&&$.show(a.getActiveImage()),"function"==typeof o&&o.call(a),a.rescale()},100),a.trigger(i.FULLSCREEN_ENTER)}),d?r.resize(g.scale):$.show(a.getActiveImage())},scale:function(){a.rescale()},exit:function(t){g.beforeExit(function(){t=g.parseCallback(t),a._options.trueFullscreen&&D.support?D.exit(t):g._exit(t)})},_exit:function(t){g.active=!1;var n=!a._options.trueFullscreen||!D.support,s=a.$("container").removeClass("fullscreen");if(g.parent?g.parent.prepend(s):s.insertAfter(g.prev),n){$.hide(a.getActiveImage()),$.revertStyles(a.get("container"),b().html,b().body),i.TOUCH||e.scrollTo(0,g.scrolled);var o=a._controls.frames[a._controls.active];o&&o.image&&(o.image.src=o.image.src)}w&&g.iframe&&($.revertStyles(g.pd.documentElement,g.pd.body,g.iframe),g.iframe.scrolled&&e.parent.scrollTo(0,g.iframe.scrolled)),a.detachKeyboard(),a.attachKeyboard(g.keymap),a._options.imageCrop=g.crop;var l=a.getData().big,c=a._controls.getActive().image;!a.getData().iframe&&c&&l&&l==c.src&&e.setTimeout(function(t){return function(){c.src=t}}(a.getData().image),1),a.rescale(function(){a.addTimer(!1,function(){n&&$.show(a.getActiveImage()),"function"==typeof t&&t.call(a),r.trigger("resize")},50),a.trigger(i.FULLSCREEN_EXIT)}),r.off("resize",g.scale)}},v=this._idle={trunk:[],bound:!1,active:!1,add:function(e,n,s,o){if(e&&!i.TOUCH){v.bound||v.addEvent(),e=t(e),"boolean"==typeof s&&(o=s,s={}),s=s||{};var r,a={};for(r in n)n.hasOwnProperty(r)&&(a[r]=e.css(r));e.data("idle",{from:t.extend(a,s),to:n,complete:!0,busy:!1}),o?e.css(n):v.addTimer(),v.trunk.push(e)}},remove:function(e){e=t(e),t.each(v.trunk,function(t,i){i&&i.length&&!i.not(e).length&&(e.css(e.data("idle").from),v.trunk.splice(t,1))}),v.trunk.length||(v.removeEvent(),a.clearTimer(v.timer))},addEvent:function(){v.bound=!0,a.$("container").on("mousemove click",v.showAll),"hover"==a._options.idleMode&&a.$("container").on("mouseleave",v.hide)},removeEvent:function(){v.bound=!1,a.$("container").on("mousemove click",v.showAll),"hover"==a._options.idleMode&&a.$("container").off("mouseleave",v.hide)},addTimer:function(){"hover"!=a._options.idleMode&&a.addTimer("idle",function(){v.hide()},a._options.idleTime)},hide:function(){if(a._options.idleMode&&a.getIndex()!==!1){a.trigger(i.IDLE_ENTER);var e=v.trunk.length;t.each(v.trunk,function(t,i){var n=i.data("idle");n&&(i.data("idle").complete=!1,$.animate(i,n.to,{duration:a._options.idleSpeed,complete:function(){t==e-1&&(v.active=!1)}}))})}},showAll:function(){a.clearTimer("idle"),t.each(v.trunk,function(t,e){v.show(e)})},show:function(e){var n=e.data("idle");v.active&&(n.busy||n.complete)||(n.busy=!0,a.trigger(i.IDLE_EXIT),a.clearTimer("idle"),$.animate(e,n.from,{duration:a._options.idleSpeed/2,complete:function(){v.active=!0,t(e).data("idle").busy=!1,t(e).data("idle").complete=!0}})),v.addTimer()}},_=this._lightbox={width:0,height:0,initialized:!1,active:null,image:null,elems:{},keymap:!1,init:function(){if(!_.initialized){_.initialized=!0;var e="overlay box content shadow title info close prevholder prev nextholder next counter image",n={},s=a._options,o="",r="position:absolute;",l="lightbox-",c={overlay:"position:fixed;display:none;opacity:"+s.overlayOpacity+";filter:alpha(opacity="+100*s.overlayOpacity+");top:0;left:0;width:100%;height:100%;background:"+s.overlayBackground+";z-index:99990",box:"position:fixed;display:none;width:400px;height:400px;top:50%;left:50%;margin-top:-200px;margin-left:-200px;z-index:99991",shadow:r+"background:#000;width:100%;height:100%;",content:r+"background-color:#fff;top:10px;left:10px;right:10px;bottom:10px;overflow:hidden",info:r+"bottom:10px;left:10px;right:10px;color:#444;font:11px/13px arial,sans-serif;height:13px",close:r+"top:10px;right:10px;height:20px;width:20px;background:#fff;text-align:center;cursor:pointer;color:#444;font:16px/22px arial,sans-serif;z-index:99999",image:r+"top:10px;left:10px;right:10px;bottom:30px;overflow:hidden;display:block;",prevholder:r+"width:50%;top:0;bottom:40px;cursor:pointer;",nextholder:r+"width:50%;top:0;bottom:40px;right:-1px;cursor:pointer;",prev:r+"top:50%;margin-top:-20px;height:40px;width:30px;background:#fff;left:20px;display:none;text-align:center;color:#000;font:bold 16px/36px arial,sans-serif",next:r+"top:50%;margin-top:-20px;height:40px;width:30px;background:#fff;right:20px;left:auto;display:none;font:bold 16px/36px arial,sans-serif;text-align:center;color:#000",title:"float:left",counter:"float:right;margin-left:8px;"},d=function(e){return e.hover(function(){t(this).css("color","#bbb")},function(){t(this).css("color","#444")})},h={},u="";u=y>7?y<9?"background:#000;filter:alpha(opacity=0);":"background:rgba(0,0,0,0);":"z-index:99999",c.nextholder+=u,c.prevholder+=u,t.each(c,function(t,e){o+=".galleria-"+l+t+"{"+e+"}"}),o+=".galleria-"+l+"box.iframe .galleria-"+l+"prevholder,.galleria-"+l+"box.iframe .galleria-"+l+"nextholder{width:100px;height:100px;top:50%;margin-top:-70px}",$.insertStyleTag(o,"galleria-lightbox"),t.each(e.split(" "),function(t,e){a.addElement("lightbox-"+e),n[e]=_.elems[e]=a.get("lightbox-"+e)}),_.image=new i.Picture,t.each({box:"shadow content close prevholder nextholder",info:"title counter",content:"info image",prevholder:"prev",nextholder:"next"},function(e,i){var n=[];t.each(i.split(" "),function(t,e){n.push(l+e)}),h[l+e]=n}),a.append(h),t(n.image).append(_.image.container),t(b().body).append(n.overlay,n.box),d(t(n.close).on("click:fast",_.hide).html("&#215;")),t.each(["Prev","Next"],function(e,s){var o=t(n[s.toLowerCase()]).html(/v/.test(s)?"&#8249;&#160;":"&#160;&#8250;"),r=t(n[s.toLowerCase()+"holder"]);return r.on("click:fast",function(){_["show"+s]()}),y<8||i.TOUCH?void o.show():void r.hover(function(){o.show()},function(){o.stop().fadeOut(200)})}),t(n.overlay).on("click:fast",_.hide),i.IPAD&&(a._options.lightboxTransitionSpeed=0)}},rescale:function(e){var n=m.min(r.width()-40,_.width),s=m.min(r.height()-60,_.height),o=m.min(n/_.width,s/_.height),l=m.round(_.width*o)+40,c=m.round(_.height*o)+60,d={width:l,height:c,"margin-top":m.ceil(c/2)*-1,"margin-left":m.ceil(l/2)*-1};e?t(_.elems.box).css(d):t(_.elems.box).animate(d,{duration:a._options.lightboxTransitionSpeed,easing:a._options.easing,complete:function(){var e=_.image,n=a._options.lightboxFadeSpeed;a.trigger({type:i.LIGHTBOX_IMAGE,imageTarget:e.image}),t(e.container).show(),t(e.image).animate({opacity:1},n),$.show(_.elems.info,n)}})},hide:function(){_.image.image=null,r.off("resize",_.rescale),t(_.elems.box).hide().find("iframe").remove(),$.hide(_.elems.info),a.detachKeyboard(),a.attachKeyboard(_.keymap),_.keymap=!1,$.hide(_.elems.overlay,200,function(){t(this).hide().css("opacity",a._options.overlayOpacity),a.trigger(i.LIGHTBOX_CLOSE)})},showNext:function(){_.show(a.getNext(_.active))},showPrev:function(){_.show(a.getPrev(_.active))},show:function(n){_.active=n="number"==typeof n?n:a.getIndex()||0,_.initialized||_.init(),a.trigger(i.LIGHTBOX_OPEN),_.keymap||(_.keymap=t.extend({},a._keyboard.map),a.attachKeyboard({escape:_.hide,right:_.showNext,left:_.showPrev})),r.off("resize",_.rescale);var s,o,l,c=a.getData(n),d=a.getDataLength(),h=a.getNext(n);$.hide(_.elems.info);try{for(l=a._options.preload;l>0;l--)o=new i.Picture,s=a.getData(h),o.preload(s.big?s.big:s.image),h=a.getNext(h)}catch(t){}_.image.isIframe=c.iframe&&!c.image,t(_.elems.box).toggleClass("iframe",_.image.isIframe),t(_.image.container).find(".galleria-videoicon").remove(),_.image.load(c.big||c.image||c.iframe,function(i){if(i.isIframe){var s=t(e).width(),o=t(e).height();if(i.video&&a._options.maxVideoSize){var l=m.min(a._options.maxVideoSize/s,a._options.maxVideoSize/o);l<1&&(s*=l,o*=l)}_.width=s,_.height=o}else _.width=i.original.width,_.height=i.original.height;if(t(i.image).css({width:i.isIframe?"100%":"100.1%",height:i.isIframe?"100%":"100.1%",top:0,bottom:0,zIndex:99998,opacity:0,visibility:"visible"}).parent().height("100%"),_.elems.title.innerHTML=c.title||"",_.elems.counter.innerHTML=n+1+" / "+d,r.resize(_.rescale),_.rescale(),c.image&&c.iframe){if(t(_.elems.box).addClass("iframe"),c.video){var h=N(i.container).hide();e.setTimeout(function(){h.fadeIn(200)},200)}t(i.image).css("cursor","pointer").mouseup(function(e,i){return function(n){t(_.image.container).find(".galleria-videoicon").remove(),n.preventDefault(),i.isIframe=!0,i.load(e.iframe+(e.video?"&autoplay=1":""),{width:"100%",height:y<8?t(_.image.container).height():"100%"})}}(c,i))}}),t(_.elems.overlay).show().css("visibility","visible"),t(_.elems.box).show()}},k=this._timer={trunk:{},add:function(t,i,n,s){if(t=t||(new Date).getTime(),s=s||!1,this.clear(t),s){var o=i;i=function(){o(),k.add(t,i,n)}}this.trunk[t]=e.setTimeout(i,n)},clear:function(t){var i,n=function(t){e.clearTimeout(this.trunk[t]),delete this.trunk[t]};if(t&&t in this.trunk)n.call(this,t);else if("undefined"==typeof t)for(i in this.trunk)this.trunk.hasOwnProperty(i)&&n.call(this,i)}};return this},i.prototype={constructor:i,init:function(e,s){if(s=x(s),this._original={target:e,options:s,data:null},this._target=this._dom.target=e.nodeName?e:t(e).get(0),this._original.html=this._target.innerHTML,M.push(this),!this._target)return void i.raise("Target not found",!0);if(this._options={autoplay:!1,carousel:!0,carouselFollow:!0,carouselSpeed:400,carouselSteps:"auto",clicknext:!1,dailymotion:{foreground:"%23EEEEEE",highlight:"%235BCEC5",background:"%23222222",logo:0,hideInfos:1},dataConfig:function(){return{}},dataSelector:"img",dataSort:!1,dataSource:this._target,debug:n,dummy:n,easing:"galleria",extend:function(){},fullscreenCrop:n,fullscreenDoubleTap:!0,fullscreenTransition:n,height:0,idleMode:!0,idleTime:3e3,idleSpeed:200,imageCrop:!1,imageMargin:0,imagePan:!1,imagePanSmoothness:12,imagePosition:"50%",imageTimeout:n,initialTransition:n,keepSource:!1,layerFollow:!0,lightbox:!1,lightboxFadeSpeed:200,lightboxTransitionSpeed:200,linkSourceImages:!0,maxScaleRatio:n,maxVideoSize:n,minScaleRatio:n,overlayOpacity:.85,overlayBackground:"#0b0b0b",pauseOnInteraction:!0,popupLinks:!1,preload:2,queue:!0,responsive:!0,show:0,showInfo:!0,showCounter:!0,showImagenav:!0,swipe:"auto",theme:null,thumbCrop:!0,thumbEventType:"click:fast",thumbMargin:0,thumbQuality:"auto",thumbDisplayOrder:!0,thumbPosition:"50%",thumbnails:!0,touchTransition:n,transition:"fade",transitionInitial:n,transitionSpeed:400,trueFullscreen:!0,useCanvas:!1,variation:"",videoPoster:!0,vimeo:{title:0,byline:0,portrait:0,color:"aaaaaa"},wait:5e3,width:"auto",youtube:{modestbranding:1,autohide:1,color:"white",hd:1,rel:0,showinfo:0}},this._options.initialTransition=this._options.initialTransition||this._options.transitionInitial,s&&(s.debug===!1&&(c=!1),"number"==typeof s.imageTimeout&&(d=s.imageTimeout),"string"==typeof s.dummy&&(h=s.dummy),"string"==typeof s.theme&&(this._options.theme=s.theme)),t(this._target).children().hide(),i.QUIRK&&i.raise("Your page is in Quirks mode, Galleria may not render correctly. Please validate your HTML and add a correct doctype."),j.length)if(this._options.theme){for(var o=0;o<j.length;o++)if(this._options.theme===j[o].name){this.theme=j[o];break}}else this.theme=j[0];return"object"==typeof this.theme?this._init():L.push(this),this},_init:function(){var o=this,a=this._options;if(this._initialized)return i.raise("Init failed: Gallery instance already initialized."),this;if(this._initialized=!0,!this.theme)return i.raise("Init failed: No theme found.",!0),this;if(t.extend(!0,a,this.theme.defaults,this._original.options,i.configure.options),a.swipe=function(t){return"enforced"==t||t!==!1&&"disabled"!=t&&!!i.TOUCH}(a.swipe),a.swipe&&(a.clicknext=!1,a.imagePan=!1),!function(t){return"getContext"in t?void(I=I||{elem:t,context:t.getContext("2d"),cache:{},length:0}):void(t=null)}(s.createElement("canvas")),this.bind(i.DATA,function(){e.screen&&e.screen.width&&Array.prototype.forEach&&this._data.forEach(function(t){var i="devicePixelRatio"in e?e.devicePixelRatio:1,n=m.max(e.screen.width,e.screen.height);n*i<1024&&(t.big=t.image)}),this._original.data=this._data,this.get("total").innerHTML=this.getDataLength();var t=this.$("container");o._options.height<2&&(o._userRatio=o._ratio=o._options.height);var n={width:0,height:0},s=function(){return o.$("stage").height()};$.wait({until:function(){return n=o._getWH(),t.width(n.width).height(n.height),s()&&n.width&&n.height>50},success:function(){o._width=n.width,o._height=n.height,o._ratio=o._ratio||n.height/n.width,i.WEBKIT?e.setTimeout(function(){o._run()},1):o._run()},error:function(){s()?i.raise("Could not extract sufficient width/height of the gallery container. Traced measures: width:"+n.width+"px, height: "+n.height+"px.",!0):i.raise("Could not extract a stage height from the CSS. Traced height: "+s()+"px.",!0)},timeout:"number"==typeof this._options.wait&&this._options.wait})}),this.append({"info-text":["info-title","info-description"],info:["info-text"],"image-nav":["image-nav-right","image-nav-left"],stage:["images","loader","counter","image-nav"],"thumbnails-list":["thumbnails"],"thumbnails-container":["thumb-nav-left","thumbnails-list","thumb-nav-right"],container:["stage","thumbnails-container","info","tooltip"]}),$.hide(this.$("counter").append(this.get("current"),s.createTextNode(" / "),this.get("total"))),this.setCounter("&#8211;"),$.hide(o.get("tooltip")),this.$("container").addClass([i.TOUCH?"touch":"notouch",this._options.variation,"galleria-theme-"+this.theme.name].join(" ")),this._options.swipe||t.each(new Array(2),function(e){var n=new i.Picture;t(n.container).css({position:"absolute",top:0,left:0}).prepend(o._layers[e]=t($.create("galleria-layer")).css({position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:2})[0]),o.$("images").append(n.container),o._controls[e]=n;var s=new i.Picture;s.isIframe=!0,t(s.container).attr("class","galleria-frame").css({position:"absolute",top:0,left:0,zIndex:4,background:"#000",display:"none"}).appendTo(n.container),o._controls.frames[e]=s}),this.$("images").css({position:"relative",top:0,left:0,width:"100%",height:"100%"}),a.swipe&&(this.$("images").css({position:"absolute",top:0,left:0,width:0,height:"100%"}),this.finger=new i.Finger(this.get("stage"),{onchange:function(t){o.pause().show(t)},oncomplete:function(e){var i=m.max(0,m.min(parseInt(e,10),o.getDataLength()-1)),n=o.getData(i);t(o._thumbnails[i].container).addClass("active").siblings(".active").removeClass("active"),n&&(o.$("images").find(".galleria-frame").css("opacity",0).hide().find("iframe").remove(),o._options.carousel&&o._options.carouselFollow&&o._carousel.follow(i))}}),this.bind(i.RESCALE,function(){this.finger.setup()}),this.$("stage").on("click",function(){var i=o.getData();if(i){if(i.iframe){o.isPlaying()&&o.pause();var s=o._controls.frames[o._active],r=o._stageWidth,a=o._stageHeight;if(t(s.container).find("iframe").length)return;return t(s.container).css({width:r,height:a,opacity:0}).show().animate({opacity:1},200),void e.setTimeout(function(){s.load(i.iframe+(i.video?"&autoplay=1":""),{width:r,height:a},function(t){o.$("container").addClass("videoplay"),t.scale({width:o._stageWidth,height:o._stageHeight,iframelimit:i.video?o._options.maxVideoSize:n})})},100)}if(i.link)if(o._options.popupLinks){e.open(i.link,"_blank")}else e.location.href=i.link;else;}}),this.bind(i.IMAGE,function(e){o.setCounter(e.index),o.setInfo(e.index);var i=this.getNext(),n=this.getPrev(),s=[n,i];s.push(this.getNext(i),this.getPrev(n),o._controls.slides.length-1);var r=[];t.each(s,function(e,i){t.inArray(i,r)==-1&&r.push(i)}),t.each(r,function(e,i){var n=o.getData(i),s=o._controls.slides[i],r=o.isFullscreen()&&n.big?n.big:n.image||n.iframe;n.iframe&&!n.image&&(s.isIframe=!0),s.ready||o._controls.slides[i].load(r,function(e){e.isIframe||t(e.image).css("visibility","hidden"),o._scaleImage(e,{complete:function(e){e.isIframe||t(e.image).css({opacity:0,visibility:"visible"}).animate({opacity:1},200)}})})})})),this.$("thumbnails, thumbnails-list").css({overflow:"hidden",position:"relative"}),this.$("image-nav-right, image-nav-left").on("click:fast",function(){
a.pauseOnInteraction&&o.pause();var t=/right/.test(this.className)?"next":"prev";o[t]()}).on("click",function(t){t.preventDefault(),(a.clicknext||a.swipe)&&t.stopPropagation()}),t.each(["info","counter","image-nav"],function(t,e){a["show"+e.substr(0,1).toUpperCase()+e.substr(1).replace(/-/,"")]===!1&&$.moveOut(o.get(e.toLowerCase()))}),this.load(),a.keepSource||y||(this._target.innerHTML=""),this.get("errors")&&this.appendChild("target","errors"),this.appendChild("target","container"),a.carousel){var l=0,c=a.show;this.bind(i.THUMBNAIL,function(){this.updateCarousel(),++l==this.getDataLength()&&"number"==typeof c&&c>0&&this._carousel.follow(c)})}return a.responsive&&r.on("resize",function(){o.isFullscreen()||o.resize()}),a.fullscreenDoubleTap&&this.$("stage").on("touchstart",function(){var t,e,i,n,s,r,a=function(t){return t.originalEvent.touches?t.originalEvent.touches[0]:t};return o.$("stage").on("touchmove",function(){t=0}),function(l){if(!/(-left|-right)/.test(l.target.className)){if(r=$.timestamp(),e=a(l).pageX,i=a(l).pageY,l.originalEvent.touches.length<2&&r-t<300&&e-n<20&&i-s<20)return o.toggleFullscreen(),void l.preventDefault();t=r,n=e,s=i}}}()),t.each(i.on.binds,function(e,i){t.inArray(i.hash,o._binds)==-1&&o.bind(i.type,i.callback)}),this},addTimer:function(){return this._timer.add.apply(this._timer,$.array(arguments)),this},clearTimer:function(){return this._timer.clear.apply(this._timer,$.array(arguments)),this},_getWH:function(){var e,i=this.$("container"),n=this.$("target"),s=this,o={};return t.each(["width","height"],function(t,r){s._options[r]&&"number"==typeof s._options[r]?o[r]=s._options[r]:(e=[$.parseValue(i.css(r)),$.parseValue(n.css(r)),i[r](),n[r]()],s["_"+r]||e.splice(e.length,$.parseValue(i.css("min-"+r)),$.parseValue(n.css("min-"+r))),o[r]=m.max.apply(m,e))}),s._userRatio&&(o.height=o.width*s._userRatio),o},_createThumbnails:function(n){this.get("total").innerHTML=this.getDataLength();var o,r,a,l,c=this,d=this._options,h=n?this._data.length-n.length:0,u=h,f=[],p=0,m=y<8?"http://upload.wikimedia.org/wikipedia/commons/c/c0/Blank.gif":"data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw%3D%3D",g=function(){var t=c.$("thumbnails").find(".active");return!!t.length&&t.find("img").attr("src")}(),v="string"==typeof d.thumbnails?d.thumbnails.toLowerCase():null,b=function(t){return s.defaultView&&s.defaultView.getComputedStyle?s.defaultView.getComputedStyle(r.container,null)[t]:l.css(t)},w=function(e,n,s){return function(){t(s).append(e),c.trigger({type:i.THUMBNAIL,thumbTarget:e,index:n,galleriaData:c.getData(n)})}},_=function(e){d.pauseOnInteraction&&c.pause();var i=t(e.currentTarget).data("index");c.getIndex()!==i&&c.show(i),e.preventDefault()},k=function(e,n){t(e.container).css("visibility","visible"),c.trigger({type:i.THUMBNAIL,thumbTarget:e.image,index:e.data.order,galleriaData:c.getData(e.data.order)}),"function"==typeof n&&n.call(c,e)},x=function(e,i){e.scale({width:e.data.width,height:e.data.height,crop:d.thumbCrop,margin:d.thumbMargin,canvas:d.useCanvas,position:d.thumbPosition,complete:function(e){var n,s,o=["left","top"],r=["Width","Height"];c.getData(e.index);t.each(r,function(i,r){n=r.toLowerCase(),d.thumbCrop===!0&&d.thumbCrop!==n||(s={},s[n]=e[n],t(e.container).css(s),s={},s[o[i]]=0,t(e.image).css(s)),e["outer"+r]=t(e.container)["outer"+r](!0)}),$.toggleQuality(e.image,d.thumbQuality===!0||"auto"===d.thumbQuality&&e.original.width<3*e.width),d.thumbDisplayOrder&&!e.lazy?t.each(f,function(t,e){if(t===p&&e.ready&&!e.displayed)return p++,e.displayed=!0,void k(e,i)}):k(e,i)}})};for(n||(this._thumbnails=[],this.$("thumbnails").empty());this._data[h];h++)a=this._data[h],o=a.thumb||a.image,d.thumbnails!==!0&&"lazy"!=v||!a.thumb&&!a.image?a.iframe&&null!==v||"empty"===v||"numbers"===v?(r={container:$.create("galleria-image"),image:$.create("img","span"),ready:!0,data:{order:h}},"numbers"===v&&t(r.image).text(h+1),a.iframe&&t(r.image).addClass("iframe"),this.$("thumbnails").append(r.container),e.setTimeout(w(r.image,h,r.container),50+20*h)):r={container:null,image:null}:(r=new i.Picture(h),r.index=h,r.displayed=!1,r.lazy=!1,r.video=!1,this.$("thumbnails").append(r.container),l=t(r.container),l.css("visibility","hidden"),r.data={width:$.parseValue(b("width")),height:$.parseValue(b("height")),order:h,src:o},d.thumbCrop!==!0?l.css({width:"auto",height:"auto"}):l.css({width:r.data.width,height:r.data.height}),"lazy"==v?(l.addClass("lazy"),r.lazy=!0,r.load(m,{height:r.data.height,width:r.data.width})):r.load(o,x),"all"===d.preload&&r.preload(a.image)),t(r.container).add(d.keepSource&&d.linkSourceImages?a.original:null).data("index",h).on(d.thumbEventType,_).data("thumbload",x),g===o&&t(r.container).addClass("active"),this._thumbnails.push(r);return f=this._thumbnails.slice(u),this},lazyLoad:function(e,i){var n=e.constructor==Array?e:[e],s=this,o=0;return t.each(n,function(e,r){if(!(r>s._thumbnails.length-1)){var a=s._thumbnails[r],l=a.data,c=function(){++o==n.length&&"function"==typeof i&&i.call(s)},d=t(a.container).data("thumbload");a.video?d.call(s,a,c):a.load(l.src,function(t){d.call(s,t,c)})}}),this},lazyLoadChunks:function(t,i){var n=this.getDataLength(),s=0,o=0,r=[],a=[],l=this;for(i=i||0;s<n;s++)a.push(s),++o!=t&&s!=n-1||(r.push(a),o=0,a=[]);var c=function(t){var n=r.shift();n&&e.setTimeout(function(){l.lazyLoad(n,function(){c(!0)})},i&&t?i:0)};return c(!1),this},_run:function(){var s=this;s._createThumbnails(),$.wait({timeout:1e4,until:function(){return i.OPERA&&s.$("stage").css("display","inline-block"),s._stageWidth=s.$("stage").width(),s._stageHeight=s.$("stage").height(),s._stageWidth&&s._stageHeight>50},success:function(){if(P.push(s),s._options.swipe){var o=s.$("images").width(s.getDataLength()*s._stageWidth);t.each(new Array(s.getDataLength()),function(e){var n=new i.Picture,r=s.getData(e);t(n.container).css({position:"absolute",top:0,left:s._stageWidth*e}).prepend(s._layers[e]=t($.create("galleria-layer")).css({position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:2})[0]).appendTo(o),r.video&&N(n.container),s._controls.slides.push(n);var a=new i.Picture;a.isIframe=!0,t(a.container).attr("class","galleria-frame").css({position:"absolute",top:0,left:0,zIndex:4,background:"#000",display:"none"}).appendTo(n.container),s._controls.frames.push(a)}),s.finger.setup()}return $.show(s.get("counter")),s._options.carousel&&s._carousel.bindControls(),s._options.autoplay&&(s.pause(),"number"==typeof s._options.autoplay&&(s._playtime=s._options.autoplay),s._playing=!0),s._firstrun?(s._options.autoplay&&s.trigger(i.PLAY),void("number"==typeof s._options.show&&s.show(s._options.show))):(s._firstrun=!0,i.History&&i.History.change(function(t){isNaN(t)?e.history.go(-1):s.show(t,n,!0)}),s.trigger(i.READY),s.theme.init.call(s,s._options),t.each(i.ready.callbacks,function(t,e){"function"==typeof e&&e.call(s,s._options)}),s._options.extend.call(s,s._options),/^[0-9]{1,4}$/.test(f)&&i.History?s.show(f,n,!0):s._data[s._options.show]&&s.show(s._options.show),void(s._options.autoplay&&s.trigger(i.PLAY)))},error:function(){i.raise("Stage width or height is too small to show the gallery. Traced measures: width:"+s._stageWidth+"px, height: "+s._stageHeight+"px.",!0)}})},load:function(e,n,s){var o=this,r=this._options;return this._data=[],this._thumbnails=[],this.$("thumbnails").empty(),"function"==typeof n&&(s=n,n=null),e=e||r.dataSource,n=n||r.dataSelector,s=s||r.dataConfig,t.isPlainObject(e)&&(e=[e]),t.isArray(e)?this.validate(e)?this._data=e:i.raise("Load failed: JSON Array not valid."):(n+=",.video,.iframe",t(e).find(n).each(function(e,i){i=t(i);var n={},r=i.parent(),a=r.attr("href"),l=r.attr("rel");a&&("IMG"==i[0].nodeName||i.hasClass("video"))&&E(a)?n.video=a:a&&i.hasClass("iframe")?n.iframe=a:n.image=n.big=a,l&&(n.big=l),t.each("big title description link layer image".split(" "),function(t,e){i.data(e)&&(n[e]=i.data(e).toString())}),n.big||(n.big=n.image),o._data.push(t.extend({title:i.attr("title")||"",thumb:i.attr("src"),image:i.attr("src"),big:i.attr("src"),description:i.attr("alt")||"",link:i.attr("longdesc"),original:i.get(0)},n,s(i)))})),"function"==typeof r.dataSort?a.sort.call(this._data,r.dataSort):"random"==r.dataSort&&this._data.sort(function(){return m.round(m.random())-.5}),this.getDataLength()&&this._parseData(function(){this.trigger(i.DATA)}),this},_parseData:function(e){var i,s=this,o=!1,r=function(){var i=!0;t.each(s._data,function(t,e){if(e.loading)return i=!1,!1}),i&&!o&&(o=!0,e.call(s))};return t.each(this._data,function(e,o){if(i=s._data[e],"thumb"in o==!1&&(i.thumb=o.image),o.big||(i.big=o.image),"video"in o){var a=E(o.video);a&&(i.iframe=new T(a.provider,a.id).embed()+function(){if("object"==typeof s._options[a.provider]){var e="?",i=[];return t.each(s._options[a.provider],function(t,e){i.push(t+"="+e)}),"youtube"==a.provider&&(i=["wmode=opaque"].concat(i)),e+i.join("&")}return""}(),i.thumb&&i.image||t.each(["thumb","image"],function(t,e){if("image"==e&&!s._options.videoPoster)return void(i.image=n);var o=new T(a.provider,a.id);i[e]||(i.loading=!0,o.getMedia(e,function(t,e){return function(i){t[e]=i,"image"!=e||t.big||(t.big=t.image),delete t.loading,r()}}(i,e)))}))}}),r(),this},destroy:function(){return this.$("target").data("galleria",null),this.$("container").off("galleria"),this.get("target").innerHTML=this._original.html,this.clearTimer(),$.removeFromArray(M,this),$.removeFromArray(P,this),i._waiters.length&&t.each(i._waiters,function(t,i){i&&e.clearTimeout(i)}),this},splice:function(){var t=this,i=$.array(arguments);return e.setTimeout(function(){a.splice.apply(t._data,i),t._parseData(function(){t._createThumbnails()})},2),t},push:function(){var t=this,i=$.array(arguments);return 1==i.length&&i[0].constructor==Array&&(i=i[0]),e.setTimeout(function(){a.push.apply(t._data,i),t._parseData(function(){t._createThumbnails(i)})},2),t},_getActive:function(){return this._controls.getActive()},validate:function(){return!0},bind:function(t,e){return t=C(t),this.$("container").on(t,this.proxy(e)),this},unbind:function(t){return t=C(t),this.$("container").off(t),this},trigger:function(e){return e="object"==typeof e?t.extend(e,{scope:this}):{type:C(e),scope:this},this.$("container").trigger(e),this},addIdleState:function(){return this._idle.add.apply(this._idle,$.array(arguments)),this},removeIdleState:function(){return this._idle.remove.apply(this._idle,$.array(arguments)),this},enterIdleMode:function(){return this._idle.hide(),this},exitIdleMode:function(){return this._idle.showAll(),this},enterFullscreen:function(){return this._fullscreen.enter.apply(this,$.array(arguments)),this},exitFullscreen:function(){return this._fullscreen.exit.apply(this,$.array(arguments)),this},toggleFullscreen:function(){return this._fullscreen[this.isFullscreen()?"exit":"enter"].apply(this,$.array(arguments)),this},bindTooltip:function(){return this._tooltip.bind.apply(this._tooltip,$.array(arguments)),this},defineTooltip:function(){return this._tooltip.define.apply(this._tooltip,$.array(arguments)),this},refreshTooltip:function(){return this._tooltip.show.apply(this._tooltip,$.array(arguments)),this},openLightbox:function(){return this._lightbox.show.apply(this._lightbox,$.array(arguments)),this},closeLightbox:function(){return this._lightbox.hide.apply(this._lightbox,$.array(arguments)),this},hasVariation:function(e){return t.inArray(e,this._options.variation.split(/\s+/))>-1},getActiveImage:function(){var t=this._getActive();return t?t.image:n},getActiveThumb:function(){return this._thumbnails[this._active].image||n},getMousePosition:function(t){return{x:t.pageX-this.$("container").offset().left,y:t.pageY-this.$("container").offset().top}},addPan:function(e){if(this._options.imageCrop!==!1){e=t(e||this.getActiveImage());var i=this,n=e.width()/2,s=e.height()/2,o=parseInt(e.css("left"),10),r=parseInt(e.css("top"),10),a=o||0,l=r||0,c=0,d=0,h=!1,u=$.timestamp(),f=0,p=0,g=function(t,i,n){if(t>0&&(p=m.round(m.max(t*-1,m.min(0,i))),f!==p))if(f=p,8===y)e.parent()["scroll"+n](p*-1);else{var s={};s[n.toLowerCase()]=p,e.css(s)}},v=function(t){$.timestamp()-u<50||(h=!0,n=i.getMousePosition(t).x,s=i.getMousePosition(t).y)},b=function(){h&&(c=e.width()-i._stageWidth,d=e.height()-i._stageHeight,o=n/i._stageWidth*c*-1,r=s/i._stageHeight*d*-1,a+=(o-a)/i._options.imagePanSmoothness,l+=(r-l)/i._options.imagePanSmoothness,g(d,l,"Top"),g(c,a,"Left"))};return 8===y&&(e.parent().scrollTop(l*-1).scrollLeft(a*-1),e.css({top:0,left:0})),this.$("stage").off("mousemove",v).on("mousemove",v),this.addTimer("pan"+i._id,b,50,!0),this}},proxy:function(t,e){return"function"!=typeof t?g:(e=e||this,function(){return t.apply(e,$.array(arguments))})},getThemeName:function(){return this.theme.name},removePan:function(){return this.$("stage").off("mousemove"),this.clearTimer("pan"+this._id),this},addElement:function(){var e=this._dom;return t.each($.array(arguments),function(t,i){e[i]=$.create("galleria-"+i)}),this},attachKeyboard:function(){return this._keyboard.attach.apply(this._keyboard,$.array(arguments)),this},detachKeyboard:function(){return this._keyboard.detach.apply(this._keyboard,$.array(arguments)),this},appendChild:function(t,e){return this.$(t).append(this.get(e)||e),this},prependChild:function(t,e){return this.$(t).prepend(this.get(e)||e),this},remove:function(){return this.$($.array(arguments).join(",")).remove(),this},append:function(t){var e,i;for(e in t)if(t.hasOwnProperty(e))if(t[e].constructor===Array)for(i=0;t[e][i];i++)this.appendChild(e,t[e][i]);else this.appendChild(e,t[e]);return this},_scaleImage:function(e,i){if(e=e||this._controls.getActive()){var n,s=function(e){t(e.container).children(":first").css({top:m.max(0,$.parseValue(e.image.style.top)),left:m.max(0,$.parseValue(e.image.style.left)),width:$.parseValue(e.image.width),height:$.parseValue(e.image.height)})};return i=t.extend({width:this._stageWidth,height:this._stageHeight,crop:this._options.imageCrop,max:this._options.maxScaleRatio,min:this._options.minScaleRatio,margin:this._options.imageMargin,position:this._options.imagePosition,iframelimit:this._options.maxVideoSize},i),this._options.layerFollow&&this._options.imageCrop!==!0?"function"==typeof i.complete?(n=i.complete,i.complete=function(){n.call(e,e),s(e)}):i.complete=s:t(e.container).children(":first").css({top:0,left:0}),e.scale(i),this}},updateCarousel:function(){return this._carousel.update(),this},resize:function(e,i){"function"==typeof e&&(i=e,e=n),e=t.extend({width:0,height:0},e);var s=this,o=this.$("container");return t.each(e,function(t,i){i||(o[t]("auto"),e[t]=s._getWH()[t])}),t.each(e,function(t,e){o[t](e)}),this.rescale(i)},rescale:function(e,s,o){var r=this;"function"==typeof e&&(o=e,e=n);var a=function(){r._stageWidth=e||r.$("stage").width(),r._stageHeight=s||r.$("stage").height(),r._options.swipe?(t.each(r._controls.slides,function(e,i){r._scaleImage(i),t(i.container).css("left",r._stageWidth*e)}),r.$("images").css("width",r._stageWidth*r.getDataLength())):r._scaleImage(),r._options.carousel&&r.updateCarousel();var n=r._controls.frames[r._controls.active];n&&r._controls.frames[r._controls.active].scale({width:r._stageWidth,height:r._stageHeight,iframelimit:r._options.maxVideoSize}),r.trigger(i.RESCALE),"function"==typeof o&&o.call(r)};return a.call(r),this},refreshImage:function(){return this._scaleImage(),this._options.imagePan&&this.addPan(),this},_preload:function(){if(this._options.preload){var t,e,n,s=this.getNext();try{for(e=this._options.preload;e>0;e--)t=new i.Picture,n=this.getData(s),t.preload(this.isFullscreen()&&n.big?n.big:n.image),s=this.getNext(s)}catch(t){}}},show:function(n,s,o){var r=this._options.swipe;if(r||!(this._queue.length>3||n===!1||!this._options.queue&&this._queue.stalled)){if(n=m.max(0,m.min(parseInt(n,10),this.getDataLength()-1)),s="undefined"!=typeof s?!!s:n<this.getIndex(),o=o||!1,!o&&i.History)return void i.History.set(n.toString());if(this.finger&&n!==this._active&&(this.finger.to=-(n*this.finger.width),this.finger.index=n),this._active=n,r){var l=this.getData(n),c=this;if(!l)return;var d=this.isFullscreen()&&l.big?l.big:l.image||l.iframe,h=this._controls.slides[n],u=h.isCached(d),f=this._thumbnails[n],p={cached:u,index:n,rewind:s,imageTarget:h.image,thumbTarget:f.image,galleriaData:l};this.trigger(t.extend(p,{type:i.LOADSTART})),c.$("container").removeClass("videoplay");var g=function(){c._layers[n].innerHTML=c.getData().layer||"",c.trigger(t.extend(p,{type:i.LOADFINISH})),c._playCheck()};c._preload(),e.setTimeout(function(){h.ready&&t(h.image).attr("src")==d?(c.trigger(t.extend(p,{type:i.IMAGE})),g()):(l.iframe&&!l.image&&(h.isIframe=!0),h.load(d,function(e){p.imageTarget=e.image,c._scaleImage(e,g).trigger(t.extend(p,{type:i.IMAGE})),g()}))},100)}else a.push.call(this._queue,{index:n,rewind:s}),this._queue.stalled||this._show();return this}},_show:function(){var s=this,o=this._queue[0],r=this.getData(o.index);if(r){var l=this.isFullscreen()&&r.big?r.big:r.image||r.iframe,c=this._controls.getActive(),d=this._controls.getNext(),h=d.isCached(l),u=this._thumbnails[o.index],f=function(){t(d.image).trigger("mouseup")};s.$("container").toggleClass("iframe",!!r.isIframe).removeClass("videoplay");var p=function(o,r,l,c,d){return function(){var h;F.active=!1,$.toggleQuality(r.image,s._options.imageQuality),s._layers[s._controls.active].innerHTML="",t(l.container).css({zIndex:0,opacity:0}).show(),t(l.container).find("iframe, .galleria-videoicon").remove(),t(s._controls.frames[s._controls.active].container).hide(),t(r.container).css({zIndex:1,left:0,top:0}).show(),s._controls.swap(),s._options.imagePan&&s.addPan(r.image),(o.iframe&&o.image||o.link||s._options.lightbox||s._options.clicknext)&&t(r.image).css({cursor:"pointer"}).on("mouseup",function(r){if(!("number"==typeof r.which&&r.which>1)){if(o.iframe){s.isPlaying()&&s.pause();var a=s._controls.frames[s._controls.active],l=s._stageWidth,c=s._stageHeight;return t(a.container).css({width:l,height:c,opacity:0}).show().animate({opacity:1},200),void e.setTimeout(function(){a.load(o.iframe+(o.video?"&autoplay=1":""),{width:l,height:c},function(t){s.$("container").addClass("videoplay"),t.scale({width:s._stageWidth,height:s._stageHeight,iframelimit:o.video?s._options.maxVideoSize:n})})},100)}return s._options.clicknext&&!i.TOUCH?(s._options.pauseOnInteraction&&s.pause(),void s.next()):o.link?void(s._options.popupLinks?h=e.open(o.link,"_blank"):e.location.href=o.link):void(s._options.lightbox&&s.openLightbox())}}),s._playCheck(),s.trigger({type:i.IMAGE,index:c.index,imageTarget:r.image,thumbTarget:d.image,galleriaData:o}),a.shift.call(s._queue),s._queue.stalled=!1,s._queue.length&&s._show()}}(r,d,c,o,u);this._options.carousel&&this._options.carouselFollow&&this._carousel.follow(o.index),s._preload(),$.show(d.container),d.isIframe=r.iframe&&!r.image,t(s._thumbnails[o.index].container).addClass("active").siblings(".active").removeClass("active"),s.trigger({type:i.LOADSTART,cached:h,index:o.index,rewind:o.rewind,imageTarget:d.image,thumbTarget:u.image,galleriaData:r}),s._queue.stalled=!0,d.load(l,function(e){var a=t(s._layers[1-s._controls.active]).html(r.layer||"").hide();s._scaleImage(e,{complete:function(e){"image"in c&&$.toggleQuality(c.image,!1),$.toggleQuality(e.image,!1),s.removePan(),s.setInfo(o.index),s.setCounter(o.index),r.layer&&(a.show(),(r.iframe&&r.image||r.link||s._options.lightbox||s._options.clicknext)&&a.css("cursor","pointer").off("mouseup").mouseup(f)),r.video&&r.image&&N(e.container);var l=s._options.transition;if(t.each({initial:null===c.image,touch:i.TOUCH,fullscreen:s.isFullscreen()},function(t,e){if(e&&s._options[t+"Transition"]!==n)return l=s._options[t+"Transition"],!1}),l in F.effects==!1)p();else{var d={prev:c.container,next:e.container,rewind:o.rewind,speed:s._options.transitionSpeed||400};F.active=!0,F.init.call(s,l,d,p)}s.trigger({type:i.LOADFINISH,cached:h,index:o.index,rewind:o.rewind,imageTarget:e.image,thumbTarget:s._thumbnails[o.index].image,galleriaData:s.getData(o.index)})}})})}},getNext:function(t){return t="number"==typeof t?t:this.getIndex(),t===this.getDataLength()-1?0:t+1},getPrev:function(t){return t="number"==typeof t?t:this.getIndex(),0===t?this.getDataLength()-1:t-1},next:function(){return this.getDataLength()>1&&this.show(this.getNext(),!1),this},prev:function(){return this.getDataLength()>1&&this.show(this.getPrev(),!0),this},get:function(t){return t in this._dom?this._dom[t]:null},getData:function(t){return t in this._data?this._data[t]:this._data[this._active]},getDataLength:function(){return this._data.length},getIndex:function(){return"number"==typeof this._active&&this._active},getStageHeight:function(){return this._stageHeight},getStageWidth:function(){return this._stageWidth},getOptions:function(t){return"undefined"==typeof t?this._options:this._options[t]},setOptions:function(e,i){return"object"==typeof e?t.extend(this._options,e):this._options[e]=i,this},play:function(t){return this._playing=!0,this._playtime=t||this._playtime,this._playCheck(),this.trigger(i.PLAY),this},pause:function(){return this._playing=!1,this.trigger(i.PAUSE),this},playToggle:function(t){return this._playing?this.pause():this.play(t)},isPlaying:function(){return this._playing},isFullscreen:function(){return this._fullscreen.active},_playCheck:function(){var t=this,e=0,n=20,s=$.timestamp(),o="play"+this._id;if(this._playing){this.clearTimer(o);var r=function(){return e=$.timestamp()-s,e>=t._playtime&&t._playing?(t.clearTimer(o),void t.next()):void(t._playing&&(t.trigger({type:i.PROGRESS,percent:m.ceil(e/t._playtime*100),seconds:m.floor(e/1e3),milliseconds:e}),t.addTimer(o,r,n)))};t.addTimer(o,r,n)}},setPlaytime:function(t){return this._playtime=t,this},setIndex:function(t){return this._active=t,this},setCounter:function(t){if("number"==typeof t?t++:"undefined"==typeof t&&(t=this.getIndex()+1),this.get("current").innerHTML=t,y){var e=this.$("counter"),i=e.css("opacity");1===parseInt(i,10)?$.removeAlpha(e[0]):this.$("counter").css("opacity",i)}return this},setInfo:function(e){var i=this,n=this.getData(e);return t.each(["title","description"],function(t,e){var s=i.$("info-"+e);n[e]?s[n[e].length?"show":"hide"]().html(n[e]):s.empty().hide()}),this},hasInfo:function(t){var e,i="title description".split(" ");for(e=0;i[e];e++)if(this.getData(t)[i[e]])return!0;return!1},jQuery:function(e){var i=this,n=[];t.each(e.split(","),function(e,s){s=t.trim(s),i.get(s)&&n.push(s)});var s=t(i.get(n.shift()));return t.each(n,function(t,e){s=s.add(i.get(e))}),s},$:function(){return this.jQuery.apply(this,$.array(arguments))}},t.each(k,function(t,e){var n=/_/.test(e)?e.replace(/_/g,""):e;i[e.toUpperCase()]="galleria."+n}),t.extend(i,{IE9:9===y,IE8:8===y,IE7:7===y,IE6:6===y,IE:y,WEBKIT:/webkit/.test(u),CHROME:/chrome/.test(u),SAFARI:/safari/.test(u)&&!/chrome/.test(u),QUIRK:y&&s.compatMode&&"BackCompat"===s.compatMode,MAC:/mac/.test(navigator.platform.toLowerCase()),OPERA:!!e.opera,IPHONE:/iphone/.test(u),IPAD:/ipad/.test(u),ANDROID:/android/.test(u),TOUCH:"ontouchstart"in s}),i.addTheme=function(n){n.name||i.raise("No theme name specified"),"object"!=typeof n.defaults?n.defaults={}:n.defaults=x(n.defaults);var s,o=!1;return"string"==typeof n.css?(t("link").each(function(t,e){if(s=new RegExp(n.css),s.test(e.href))return o=!0,O(n),!1}),o||t(function(){var r=0,a=function(){t("script").each(function(t,i){s=new RegExp("galleria\\."+n.name.toLowerCase()+"\\."),s.test(i.src)&&(o=i.src.replace(/[^\/]*$/,"")+n.css,e.setTimeout(function(){$.loadCSS(o,"galleria-theme-"+n.name,function(){O(n)})},1))}),o||(r++>5?i.raise("No theme CSS loaded"):e.setTimeout(a,500))};a()})):O(n),n},i.loadTheme=function(n){if(!t("script").filter(function(){return t(this).attr("src")==n}).length){var s,o=!1;return t(e).load(function(){o||(s=e.setTimeout(function(){o||i.raise("Galleria had problems loading theme at "+n+". Please check theme path or load manually.",!0)},2e4))}),$.loadScript(n,function(){o=!0,e.clearTimeout(s)}),i}},i.get=function(t){return M[t]?M[t]:"number"!=typeof t?M:void i.raise("Gallery index "+t+" not found")},i.configure=function(e,n){var s={};return"string"==typeof e&&n?(s[e]=n,e=s):t.extend(s,e),i.configure.options=s,t.each(i.get(),function(t,e){e.setOptions(s)}),i},i.configure.options={},i.on=function(e,n){if(e){n=n||g;var s=e+n.toString().replace(/\s/g,"")+$.timestamp();return t.each(i.get(),function(t,i){i._binds.push(s),i.bind(e,n)}),i.on.binds.push({type:e,callback:n,hash:s}),i}},i.on.binds=[],i.run=function(e,n){return t.isFunction(n)&&(n={extend:n}),t(e||"#galleria").galleria(n),i},i.addTransition=function(t,e){return F.effects[t]=e,i},i.utils=$,i.log=function(){var i=$.array(arguments);if(!("console"in e&&"log"in e.console))return e.alert(i.join("<br>"));try{return e.console.log.apply(e.console,i)}catch(n){t.each(i,function(){e.console.log(this)})}},i.ready=function(e){return"function"!=typeof e?i:(t.each(P,function(t,i){e.call(i,i._options)}),i.ready.callbacks.push(e),i)},i.ready.callbacks=[],i.raise=function(e,i){var n=i?"Fatal error":"Error",s={color:"#fff",position:"absolute",top:0,left:0,zIndex:1e5},o=function(e){var o='<div style="padding:4px;margin:0 0 2px;background:#'+(i?"811":"222")+';">'+(i?"<strong>"+n+": </strong>":"")+e+"</div>";t.each(M,function(){var t=this.$("errors"),e=this.$("target");t.length||(e.css("position","relative"),t=this.addElement("errors").appendChild("target","errors").$("errors").css(s)),t.append(o)}),M.length||t("<div>").css(t.extend(s,{position:"fixed"})).append(o).appendTo(b().body)};if(c){if(o(e),i)throw new Error(n+": "+e)}else if(i){if(A)return;A=!0,i=!1,o("Gallery could not load.")}},i.version=l,i.getLoadedThemes=function(){return t.map(j,function(t){return t.name})},i.requires=function(t,e){return e=e||"You need to upgrade Galleria to version "+t+" to use one or more components.",i.version<t&&i.raise(e,!0),i},i.Picture=function(e){this.id=e||null,this.image=null,this.container=$.create("galleria-image"),t(this.container).css({overflow:"hidden",position:"relative"}),this.original={width:0,height:0},this.ready=!1,this.isIframe=!1},i.Picture.prototype={cache:{},show:function(){$.show(this.image)},hide:function(){$.moveOut(this.image)},clear:function(){this.image=null},isCached:function(t){return!!this.cache[t]},preload:function(e){t(new Image).load(function(t,e){return function(){e[t]=t}}(e,this.cache)).attr("src",e)},load:function(n,s,o){if("function"==typeof s&&(o=s,s=null),this.isIframe){var r="if"+(new Date).getTime(),a=this.image=t("<iframe>",{src:n,frameborder:0,id:r,allowfullscreen:!0,css:{visibility:"hidden"}})[0];return s&&t(a).css(s),t(this.container).find("iframe,img").remove(),this.container.appendChild(this.image),t("#"+r).load(function(i,n){return function(){e.setTimeout(function(){t(i.image).css("visibility","visible"),"function"==typeof n&&n.call(i,i)},10)}}(this,o)),this.container}this.image=new Image,i.IE8&&t(this.image).css("filter","inherit"),i.IE||i.CHROME||i.SAFARI||t(this.image).css("image-rendering","optimizequality");var l=!1,c=!1,d=t(this.container),u=t(this.image),f=function(){l?h?t(this).attr("src",h):i.raise("Image not found: "+n):(l=!0,e.setTimeout(function(t,e){return function(){t.attr("src",e+(e.indexOf("?")>-1?"&":"?")+$.timestamp())}}(t(this),n),50))},p=function(n,o,r){return function(){var a=function(){t(this).off("load"),n.original=s||{height:this.height,width:this.width},i.HAS3D&&(this.style.MozTransform=this.style.webkitTransform="translate3d(0,0,0)"),d.append(this),n.cache[r]=r,"function"==typeof o&&e.setTimeout(function(){o.call(n,n)},1)};this.width&&this.height?a.call(this):!function(e){$.wait({until:function(){return e.width&&e.height},success:function(){a.call(e)},error:function(){c?i.raise("Could not extract width/height from image: "+e.src+". Traced measures: width:"+e.width+"px, height: "+e.height+"px."):(t(new Image).load(p).attr("src",e.src),c=!0)},timeout:100})}(this)}}(this,o,n);return d.find("iframe,img").remove(),u.css("display","block"),$.hide(this.image),t.each("minWidth minHeight maxWidth maxHeight".split(" "),function(t,e){u.css(e,/min/.test(e)?"0":"none")}),u.load(p).on("error",f).attr("src",n),this.container},scale:function(e){var s=this;if(e=t.extend({width:0,height:0,min:n,max:n,margin:0,complete:g,position:"center",crop:!1,canvas:!1,iframelimit:n},e),this.isIframe){var o,r,a=e.width,l=e.height;if(e.iframelimit){var c=m.min(e.iframelimit/a,e.iframelimit/l);c<1?(o=a*c,r=l*c,t(this.image).css({top:l/2-r/2,left:a/2-o/2,position:"absolute"})):t(this.image).css({top:0,left:0})}t(this.image).width(o||a).height(r||l).removeAttr("width").removeAttr("height"),t(this.container).width(a).height(l),e.complete.call(s,s);try{this.image.contentWindow&&t(this.image.contentWindow).trigger("resize")}catch(t){}return this.container}if(!this.image)return this.container;var d,h,u,f=t(s.container);return $.wait({until:function(){return d=e.width||f.width()||$.parseValue(f.css("width")),h=e.height||f.height()||$.parseValue(f.css("height")),d&&h},success:function(){var i=(d-2*e.margin)/s.original.width,n=(h-2*e.margin)/s.original.height,o=m.min(i,n),r=m.max(i,n),a={"true":r,width:i,height:n,"false":o,landscape:s.original.width>s.original.height?r:o,portrait:s.original.width<s.original.height?r:o},l=a[e.crop.toString()],c="";e.max&&(l=m.min(e.max,l)),e.min&&(l=m.max(e.min,l)),t.each(["width","height"],function(e,i){t(s.image)[i](s[i]=s.image[i]=m.round(s.original[i]*l))}),t(s.container).width(d).height(h),e.canvas&&I&&(I.elem.width=s.width,I.elem.height=s.height,c=s.image.src+":"+s.width+"x"+s.height,s.image.src=I.cache[c]||function(t){I.context.drawImage(s.image,0,0,s.original.width*l,s.original.height*l);try{return u=I.elem.toDataURL(),I.length+=u.length,I.cache[t]=u,u}catch(t){return s.image.src}}(c));var f={},p={},g=function(e,i,n){var o=0;if(/\%/.test(e)){var r=parseInt(e,10)/100,a=s.image[i]||t(s.image)[i]();o=m.ceil(a*-1*r+n*r)}else o=$.parseValue(e);return o},v={top:{top:0},left:{left:0},right:{left:"100%"},bottom:{top:"100%"}};t.each(e.position.toLowerCase().split(" "),function(t,e){"center"===e&&(e="50%"),f[t?"top":"left"]=e}),t.each(f,function(e,i){v.hasOwnProperty(i)&&t.extend(p,v[i])}),f=f.top?t.extend(f,p):p,f=t.extend({top:"50%",left:"50%"},f),t(s.image).css({position:"absolute",top:g(f.top,"height",h),left:g(f.left,"width",d)}),s.show(),s.ready=!0,e.complete.call(s,s)},error:function(){i.raise("Could not scale image: "+s.image.src)},timeout:1e3}),this}},t.extend(t.easing,{galleria:function(t,e,i,n,s){return(e/=s/2)<1?n/2*e*e*e+i:n/2*((e-=2)*e*e+2)+i},galleriaIn:function(t,e,i,n,s){return n*(e/=s)*e+i},galleriaOut:function(t,e,i,n,s){return-n*(e/=s)*(e-2)+i}}),i.Finger=function(){var n=(m.abs,i.HAS3D=function(){var e,i,n=s.createElement("p"),o=["webkit","O","ms","Moz",""],r=0,a="transform";for(b().html.insertBefore(n,null);o[r];r++)i=o[r]?o[r]+"Transform":a,void 0!==n.style[i]&&(n.style[i]="translate3d(1px,1px,1px)",e=t(n).css(o[r]?"-"+o[r].toLowerCase()+"-"+a:a));return b().html.removeChild(n),void 0!==e&&e.length>0&&"none"!==e}()),r=function(){var t="RequestAnimationFrame";return e.requestAnimationFrame||e["webkit"+t]||e["moz"+t]||e["o"+t]||e["ms"+t]||function(t){e.setTimeout(t,1e3/60)}}(),a=function(i,s){if(this.config={start:0,duration:500,onchange:function(){},oncomplete:function(){},easing:function(t,e,i,n,s){return-n*((e=e/s-1)*e*e*e-1)+i}},this.easeout=function(t,e,i,n,s){return n*((e=e/s-1)*e*e*e*e+1)+i},i.children.length){var o=this;t.extend(this.config,s),this.elem=i,this.child=i.children[0],this.to=this.pos=0,this.touching=!1,this.start={},this.index=this.config.start,this.anim=0,this.easing=this.config.easing,n||(this.child.style.position="absolute",this.elem.style.position="relative"),t.each(["ontouchstart","ontouchmove","ontouchend","setup"],function(t,e){o[e]=function(t){return function(){t.apply(o,arguments)}}(o[e])}),this.setX=function(){var t=o.child.style;return n?void(t.MozTransform=t.webkitTransform=t.transform="translate3d("+o.pos+"px,0,0)"):void(t.left=o.pos+"px")},t(i).on("touchstart",this.ontouchstart),t(e).on("resize",this.setup),t(e).on("orientationchange",this.setup),this.setup(),!function t(){r(t),o.loop.call(o)}()}};return a.prototype={constructor:a,setup:function(){this.width=t(this.elem).width(),this.length=m.ceil(t(this.child).width()/this.width),0!==this.index&&(this.index=m.max(0,m.min(this.index,this.length-1)),this.pos=this.to=-this.width*this.index)},setPosition:function(t){this.pos=t,this.to=t},ontouchstart:function(t){var e=t.originalEvent.touches;this.start={pageX:e[0].pageX,pageY:e[0].pageY,time:+new Date},this.isScrolling=null,this.touching=!0,this.deltaX=0,o.on("touchmove",this.ontouchmove),o.on("touchend",this.ontouchend)},ontouchmove:function(t){var e=t.originalEvent.touches;
e&&e.length>1||t.scale&&1!==t.scale||(this.deltaX=e[0].pageX-this.start.pageX,null===this.isScrolling&&(this.isScrolling=!!(this.isScrolling||m.abs(this.deltaX)<m.abs(e[0].pageY-this.start.pageY))),this.isScrolling||(t.preventDefault(),this.deltaX/=!this.index&&this.deltaX>0||this.index==this.length-1&&this.deltaX<0?m.abs(this.deltaX)/this.width+1.8:1,this.to=this.deltaX-this.index*this.width),t.stopPropagation())},ontouchend:function(){this.touching=!1;var t=+new Date-this.start.time<250&&m.abs(this.deltaX)>40||m.abs(this.deltaX)>this.width/2,e=!this.index&&this.deltaX>0||this.index==this.length-1&&this.deltaX<0;this.isScrolling||this.show(this.index+(t&&!e?this.deltaX<0?1:-1:0)),o.off("touchmove",this.ontouchmove),o.off("touchend",this.ontouchend)},show:function(t){t!=this.index?this.config.onchange.call(this,t):this.to=-(t*this.width)},moveTo:function(t){t!=this.index&&(this.pos=this.to=-(t*this.width),this.index=t)},loop:function(){var t=this.to-this.pos,e=1;if(this.width&&t&&(e=m.max(.5,m.min(1.5,m.abs(t/this.width)))),this.touching||m.abs(t)<=1)this.pos=this.to,t=0,this.anim&&!this.touching&&this.config.oncomplete(this.index),this.anim=0,this.easing=this.config.easing;else{this.anim||(this.anim={start:this.pos,time:+new Date,distance:t,factor:e,destination:this.to});var i=+new Date-this.anim.time,n=this.config.duration*this.anim.factor;if(i>n||this.anim.destination!=this.to)return this.anim=0,void(this.easing=this.easeout);this.pos=this.easing(null,i,this.anim.start,this.anim.distance,n)}this.setX()}},a}(),t.fn.galleria=function(e){var n=this.selector;return t(this).length?this.each(function(){t.data(this,"galleria")&&(t.data(this,"galleria").destroy(),t(this).find("*").hide()),t.data(this,"galleria",(new i).init(this,e))}):(t(function(){t(n).length?t(n).galleria(e):i.utils.wait({until:function(){return t(n).length},success:function(){t(n).galleria(e)},error:function(){i.raise('Init failed: Galleria could not find the element "'+n+'".')},timeout:5e3})}),this)},"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=i:(e.Galleria=i,"function"==typeof define&&define.amd&&define("galleria",["jquery"],function(){return i}))}(jQuery,this),function(t){Galleria.addTheme({name:"classic",author:"Galleria",defaults:{transition:"slide",thumbCrop:"height",_toggleInfo:!0},init:function(e){Galleria.requires(1.4,"This version of Classic theme requires Galleria 1.4 or later"),this.addElement("info-link","info-close"),this.append({info:["info-link","info-close"]});var i=this.$("info-link,info-close,info-text"),n=Galleria.TOUCH;this.$("loader,counter").show().css("opacity",.4),n||(this.addIdleState(this.get("image-nav-left"),{left:-50}),this.addIdleState(this.get("image-nav-right"),{right:-50}),this.addIdleState(this.get("counter"),{opacity:0})),e._toggleInfo===!0?i.bind("click:fast",function(){i.toggle()}):(i.show(),this.$("info-link, info-close").hide()),this.bind("thumbnail",function(e){n?t(e.thumbTarget).css("opacity",this.getIndex()?1:.6).bind("click:fast",function(){t(this).css("opacity",1).parent().siblings().children().css("opacity",.6)}):(t(e.thumbTarget).css("opacity",.6).parent().hover(function(){t(this).not(".active").children().stop().fadeTo(100,1)},function(){t(this).not(".active").children().stop().fadeTo(400,.6)}),e.index===this.getIndex()&&t(e.thumbTarget).css("opacity",1))});var s=function(e){t(e.thumbTarget).css("opacity",1).parent().siblings().children().css("opacity",.6)};this.bind("loadstart",function(t){t.cached||this.$("loader").show().fadeTo(200,.4),window.setTimeout(function(){s(t)},n?300:0),this.$("info").toggle(this.hasInfo())}),this.bind("loadfinish",function(){this.$("loader").fadeOut(200)})}})}(jQuery),/*!
 * Lightbox v2.8.1
 * by Lokesh Dhakar
 *
 * More info:
 * http://lokeshdhakar.com/projects/lightbox2/
 *
 * Copyright 2007, 2015 Lokesh Dhakar
 * Released under the MIT license
 * https://github.com/lokesh/lightbox2/blob/master/LICENSE
 */
!function(t,e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):t.lightbox=e(t.jQuery)}(this,function(t){function e(e){this.album=[],this.currentImageIndex=void 0,this.init(),this.options=t.extend({},this.constructor.defaults),this.option(e)}return e.defaults={albumLabel:"Image %1 of %2",alwaysShowNavOnTouchDevices:!1,fadeDuration:500,fitImagesInViewport:!0,positionFromTop:50,resizeDuration:700,showImageNumberLabel:!0,wrapAround:!1},e.prototype.option=function(e){t.extend(this.options,e)},e.prototype.imageCountLabel=function(t,e){return this.options.albumLabel.replace(/%1/g,t).replace(/%2/g,e)},e.prototype.init=function(){this.enable(),this.build()},e.prototype.enable=function(){var e=this;t("body").on("click","a[rel^=lightbox], area[rel^=lightbox], a[data-lightbox], area[data-lightbox]",function(i){return e.start(t(i.currentTarget)),!1})},e.prototype.build=function(){var e=this;t('<div id="lightboxOverlay" class="lightboxOverlay"></div><div id="lightbox" class="lightbox"><div class="lb-outerContainer"><div class="lb-container"><img class="lb-image" alt="" src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" /><div class="lb-nav"><a class="lb-prev" href="" aria-label="previous"></a><a class="lb-next" href="" aria-label="next"></a></div><div class="lb-loader"><a class="lb-cancel"></a></div></div></div><div class="lb-dataContainer"><div class="lb-data"><div class="lb-details"><span class="lb-caption"></span><span class="lb-number"></span></div><div class="lb-closeContainer"><a class="lb-close"></a></div></div></div></div>').appendTo(t("body")),this.$lightbox=t("#lightbox"),this.$overlay=t("#lightboxOverlay"),this.$outerContainer=this.$lightbox.find(".lb-outerContainer"),this.$container=this.$lightbox.find(".lb-container"),this.containerTopPadding=parseInt(this.$container.css("padding-top"),10),this.containerRightPadding=parseInt(this.$container.css("padding-right"),10),this.containerBottomPadding=parseInt(this.$container.css("padding-bottom"),10),this.containerLeftPadding=parseInt(this.$container.css("padding-left"),10),this.$overlay.hide().on("click",function(){return e.end(),!1}),this.$lightbox.hide().on("click",function(i){return"lightbox"===t(i.target).attr("id")&&e.end(),!1}),this.$outerContainer.on("click",function(i){return"lightbox"===t(i.target).attr("id")&&e.end(),!1}),this.$lightbox.find(".lb-prev").on("click",function(){return 0===e.currentImageIndex?e.changeImage(e.album.length-1):e.changeImage(e.currentImageIndex-1),!1}),this.$lightbox.find(".lb-next").on("click",function(){return e.currentImageIndex===e.album.length-1?e.changeImage(0):e.changeImage(e.currentImageIndex+1),!1}),this.$lightbox.find(".lb-loader, .lb-close").on("click",function(){return e.end(),!1})},e.prototype.start=function(e){function i(t){n.album.push({link:t.attr("href"),title:t.attr("data-title")||t.attr("title")})}var n=this,s=t(window);s.on("resize",t.proxy(this.sizeOverlay,this)),t("select, object, embed").css({visibility:"hidden"}),this.sizeOverlay(),this.album=[];var o,r=0,a=e.attr("data-lightbox");if(a){o=t(e.prop("tagName")+'[data-lightbox="'+a+'"]');for(var l=0;l<o.length;l=++l)i(t(o[l])),o[l]===e[0]&&(r=l)}else if("lightbox"===e.attr("rel"))i(e);else{o=t(e.prop("tagName")+'[rel="'+e.attr("rel")+'"]');for(var c=0;c<o.length;c=++c)i(t(o[c])),o[c]===e[0]&&(r=c)}var d=s.scrollTop()+this.options.positionFromTop,h=s.scrollLeft();this.$lightbox.css({top:d+"px",left:h+"px"}).fadeIn(this.options.fadeDuration),this.changeImage(r)},e.prototype.changeImage=function(e){var i=this;this.disableKeyboardNav();var n=this.$lightbox.find(".lb-image");this.$overlay.fadeIn(this.options.fadeDuration),t(".lb-loader").fadeIn("slow"),this.$lightbox.find(".lb-image, .lb-nav, .lb-prev, .lb-next, .lb-dataContainer, .lb-numbers, .lb-caption").hide(),this.$outerContainer.addClass("animating");var s=new Image;s.onload=function(){var o,r,a,l,c,d,h;n.attr("src",i.album[e].link),o=t(s),n.width(s.width),n.height(s.height),i.options.fitImagesInViewport&&(h=t(window).width(),d=t(window).height(),c=h-i.containerLeftPadding-i.containerRightPadding-20,l=d-i.containerTopPadding-i.containerBottomPadding-120,i.options.maxWidth&&i.options.maxWidth<c&&(c=i.options.maxWidth),i.options.maxHeight&&i.options.maxHeight<c&&(l=i.options.maxHeight),(s.width>c||s.height>l)&&(s.width/c>s.height/l?(a=c,r=parseInt(s.height/(s.width/a),10),n.width(a),n.height(r)):(r=l,a=parseInt(s.width/(s.height/r),10),n.width(a),n.height(r)))),i.sizeContainer(n.width(),n.height())},s.src=this.album[e].link,this.currentImageIndex=e},e.prototype.sizeOverlay=function(){this.$overlay.width(t(window).width()).height(t(document).height())},e.prototype.sizeContainer=function(t,e){function i(){n.$lightbox.find(".lb-dataContainer").width(r),n.$lightbox.find(".lb-prevLink").height(a),n.$lightbox.find(".lb-nextLink").height(a),n.showImage()}var n=this,s=this.$outerContainer.outerWidth(),o=this.$outerContainer.outerHeight(),r=t+this.containerLeftPadding+this.containerRightPadding,a=e+this.containerTopPadding+this.containerBottomPadding;s!==r||o!==a?this.$outerContainer.animate({width:r,height:a},this.options.resizeDuration,"swing",function(){i()}):i()},e.prototype.showImage=function(){this.$lightbox.find(".lb-loader").stop(!0).hide(),this.$lightbox.find(".lb-image").fadeIn("slow"),this.updateNav(),this.updateDetails(),this.preloadNeighboringImages(),this.enableKeyboardNav()},e.prototype.updateNav=function(){var t=!1;try{document.createEvent("TouchEvent"),t=!!this.options.alwaysShowNavOnTouchDevices}catch(t){}this.$lightbox.find(".lb-nav").show(),this.album.length>1&&(this.options.wrapAround?(t&&this.$lightbox.find(".lb-prev, .lb-next").css("opacity","1"),this.$lightbox.find(".lb-prev, .lb-next").show()):(this.currentImageIndex>0&&(this.$lightbox.find(".lb-prev").show(),t&&this.$lightbox.find(".lb-prev").css("opacity","1")),this.currentImageIndex<this.album.length-1&&(this.$lightbox.find(".lb-next").show(),t&&this.$lightbox.find(".lb-next").css("opacity","1"))))},e.prototype.updateDetails=function(){var e=this;if("undefined"!=typeof this.album[this.currentImageIndex].title&&""!==this.album[this.currentImageIndex].title&&this.$lightbox.find(".lb-caption").html(this.album[this.currentImageIndex].title).fadeIn("fast").find("a").on("click",function(){void 0!==t(this).attr("target")?window.open(t(this).attr("href"),t(this).attr("target")):location.href=t(this).attr("href")}),this.album.length>1&&this.options.showImageNumberLabel){var i=this.imageCountLabel(this.currentImageIndex+1,this.album.length);this.$lightbox.find(".lb-number").text(i).fadeIn("fast")}else this.$lightbox.find(".lb-number").hide();this.$outerContainer.removeClass("animating"),this.$lightbox.find(".lb-dataContainer").fadeIn(this.options.resizeDuration,function(){return e.sizeOverlay()})},e.prototype.preloadNeighboringImages=function(){if(this.album.length>this.currentImageIndex+1){var t=new Image;t.src=this.album[this.currentImageIndex+1].link}if(this.currentImageIndex>0){var e=new Image;e.src=this.album[this.currentImageIndex-1].link}},e.prototype.enableKeyboardNav=function(){t(document).on("keyup.keyboard",t.proxy(this.keyboardAction,this))},e.prototype.disableKeyboardNav=function(){t(document).off(".keyboard")},e.prototype.keyboardAction=function(t){var e=27,i=37,n=39,s=t.keyCode,o=String.fromCharCode(s).toLowerCase();s===e||o.match(/x|o|c/)?this.end():"p"===o||s===i?0!==this.currentImageIndex?this.changeImage(this.currentImageIndex-1):this.options.wrapAround&&this.album.length>1&&this.changeImage(this.album.length-1):("n"===o||s===n)&&(this.currentImageIndex!==this.album.length-1?this.changeImage(this.currentImageIndex+1):this.options.wrapAround&&this.album.length>1&&this.changeImage(0))},e.prototype.end=function(){this.disableKeyboardNav(),t(window).off("resize",this.sizeOverlay),this.$lightbox.fadeOut(this.options.fadeDuration),this.$overlay.fadeOut(this.options.fadeDuration),t("select, object, embed").css({visibility:"visible"})},new e}),/**
 * @license almond 0.3.1 Copyright (c) 2011-2014, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */
// CodeMirror, copyright (c) by Marijn Haverbeke and others
// CodeMirror, copyright (c) by Marijn Haverbeke and others
/*!
 * HTMLHint v0.9.13
 * https://github.com/yaniswang/HTMLHint
 *
 * (c) 2014-2016 Yanis Wang <yanis.wang@gmail.com>.
 * MIT Licensed
 */
/**
 * @license RequireJS text 2.0.14 Copyright (c) 2010-2014, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/text for details
 */
function(t,e){"function"==typeof define&&define.amd?define([],e):t.Redactor=e()}(this,function(){var t,e,i;return function(n){function s(t,e){return w.call(t,e)}function o(t,e){var i,n,s,o,r,a,l,c,d,h,u,f=e&&e.split("/"),p=y.map,m=p&&p["*"]||{};if(t&&"."===t.charAt(0))if(e){for(t=t.split("/"),r=t.length-1,y.nodeIdCompat&&k.test(t[r])&&(t[r]=t[r].replace(k,"")),t=f.slice(0,f.length-1).concat(t),d=0;d<t.length;d+=1)if(u=t[d],"."===u)t.splice(d,1),d-=1;else if(".."===u){if(1===d&&(".."===t[2]||".."===t[0]))break;d>0&&(t.splice(d-1,2),d-=2)}t=t.join("/")}else 0===t.indexOf("./")&&(t=t.substring(2));if((f||m)&&p){for(i=t.split("/"),d=i.length;d>0;d-=1){if(n=i.slice(0,d).join("/"),f)for(h=f.length;h>0;h-=1)if(s=p[f.slice(0,h).join("/")],s&&(s=s[n])){o=s,a=d;break}if(o)break;!l&&m&&m[n]&&(l=m[n],c=d)}!o&&l&&(o=l,a=c),o&&(i.splice(0,a,o),t=i.join("/"))}return t}function r(t,e){return function(){var i=_.call(arguments,0);return"string"!=typeof i[0]&&1===i.length&&i.push(null),f.apply(n,i.concat([t,e]))}}function a(t){return function(e){return o(e,t)}}function l(t){return function(e){g[t]=e}}function c(t){if(s(v,t)){var e=v[t];delete v[t],b[t]=!0,u.apply(n,e)}if(!s(g,t)&&!s(b,t))throw new Error("No "+t);return g[t]}function d(t){var e,i=t?t.indexOf("!"):-1;return i>-1&&(e=t.substring(0,i),t=t.substring(i+1,t.length)),[e,t]}function h(t){return function(){return y&&y.config&&y.config[t]||{}}}var u,f,p,m,g={},v={},y={},b={},w=Object.prototype.hasOwnProperty,_=[].slice,k=/\.js$/;p=function(t,e){var i,n=d(t),s=n[0];return t=n[1],s&&(s=o(s,e),i=c(s)),s?t=i&&i.normalize?i.normalize(t,a(e)):o(t,e):(t=o(t,e),n=d(t),s=n[0],t=n[1],s&&(i=c(s))),{f:s?s+"!"+t:t,n:t,pr:s,p:i}},m={require:function(t){return r(t)},exports:function(t){var e=g[t];return"undefined"!=typeof e?e:g[t]={}},module:function(t){return{id:t,uri:"",exports:g[t],config:h(t)}}},u=function(t,e,i,o){var a,d,h,u,f,y,w=[],_=typeof i;if(o=o||t,"undefined"===_||"function"===_){for(e=!e.length&&i.length?["require","exports","module"]:e,f=0;f<e.length;f+=1)if(u=p(e[f],o),d=u.f,"require"===d)w[f]=m.require(t);else if("exports"===d)w[f]=m.exports(t),y=!0;else if("module"===d)a=w[f]=m.module(t);else if(s(g,d)||s(v,d)||s(b,d))w[f]=c(d);else{if(!u.p)throw new Error(t+" missing "+d);u.p.load(u.n,r(o,!0),l(d),{}),w[f]=g[d]}h=i?i.apply(g[t],w):void 0,t&&(a&&a.exports!==n&&a.exports!==g[t]?g[t]=a.exports:h===n&&y||(g[t]=h))}else t&&(g[t]=i)},t=e=f=function(t,e,i,s,o){if("string"==typeof t)return m[t]?m[t](e):c(p(t,e).f);if(!t.splice){if(y=t,y.deps&&f(y.deps,y.callback),!e)return;e.splice?(t=e,e=i,i=null):t=n}return e=e||function(){},"function"==typeof i&&(i=s,s=o),s?u(n,t,e,i):setTimeout(function(){u(n,t,e,i)},4),f},f.config=function(t){return f(t)},t._defined=g,i=function(t,e,i){if("string"!=typeof t)throw new Error("See almond README: incorrect module build, no module name");e.splice||(i=e,e=[]),!s(g,t)&&!s(v,t)&&(v[t]=[t,e,i])},i.amd={jQuery:!0}}(),i("lib/almond",function(){}),i("jquery",[],function(){return jQuery}),i("underscore",[],function(){return _||FS._}),e.config({baseUrl:"src/js",packages:[{name:"codemirror",location:"lib/codeMirror",main:"lib/codemirror"}],paths:{text:"lib/text"}}),i("main",function(){}),i("jquery-redactor-shim",["jquery"],function(t){"use strict";t.fn.jquery.split(".")[0]<=1&&t.fn.jquery.split(".")[1]<9&&(t.fn.extend({addBack:function(t){return this.add(null===t?this.prevObject:this.prevObject.filter(t))}}),t.support.createHTMLDocument=function(){var t=document.implementation.createHTMLDocument("").body;return t.innerHTML="<form></form><form></form>",2===t.childNodes.length}(),t.parseHTML=function(e,i,n){if("string"!=typeof e)return[];"boolean"==typeof i&&(n=i,i=!1),i=i||(t.support.createHTMLDocument?document.implementation.createHTMLDocument(""):document);var s=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/.exec(e),o=!n&&[];return s?[i.createElement(s[1])]:(s=t.buildFragment([e],[i],o),o&&o.length&&t(o).remove(),t.merge([],s.fragment.childNodes))})}),i("options",["jquery"],function(t){"use strict";return{browseFileURL:"",browseMediaURL:"",browseSiteURL:"",browseComposerSiteURL:"",codeOnly:!1,lang:"en",direction:"ltr",plugins:!1,focus:!1,focusEnd:!1,placeholder:!1,visual:!0,tabindex:!1,minHeight:!1,maxHeight:!1,linebreaks:!1,replaceDivs:!1,paragraphize:!1,cleanStyleOnEnter:!1,enterKey:!0,resizable:!1,cleanOnPaste:!0,cleanSpaces:!0,pastePlainText:!1,linkTooltip:!0,linkProtocol:"http",linkNofollow:!1,linkSize:50,imageEditable:!0,imageLink:!0,imagePosition:!0,imageFloatMargin:"10px",imageResizable:!0,imageUpload:null,imageUploadParam:"file",uploadImageField:!1,dragImageUpload:!0,fileUpload:null,fileUploadParam:"file",dragFileUpload:!0,s3:!1,convertLinks:!0,convertUrlLinks:!0,convertImageLinks:!0,convertVideoLinks:!0,preSpaces:4,tabAsSpaces:!1,tabKey:!0,scrollTarget:!1,toolbar:!0,toolbarFixed:!0,toolbarFixedTarget:document,toolbarFixedTopOffset:0,toolbarExternal:!1,toolbarOverflow:!1,source:!0,buttons:["html","undo","redo","formatting","styles","bold","italic","underline","deleted","unorderedlist","orderedlist","outdent","indent","image","media","embed","file","table","link","alignment","fontcolor","backcolor","fontfamily","fontsize","horizontalrule","textdirection","fullscreen"],buttonsHide:[],buttonsHideOnMobile:[],formatting:["p","blockquote","pre","h1","h2","h3","h4","h5","h6"],formattingAdd:!1,tabifier:!0,deniedTags:[],allowedTags:!1,paragraphizeBlocks:["table","div","pre","form","ul","ol","h1","h2","h3","h4","h5","h6","dl","blockquote","figcaption","address","section","header","footer","aside","article","object","style","script","iframe","select","input","textarea","button","option","map","area","math","hr","fieldset","legend","hgroup","nav","figure","details","menu","summary","p"],removeComments:!1,replaceTags:[["strike","del"],["b","strong"]],replaceStyles:[["font-weight:\\s?bold","strong"],["font-style:\\s?italic","em"],["text-decoration:\\s?underline","u"],["text-decoration:\\s?line-through","del"]],removeDataAttr:!1,removeAttr:!1,allowedAttr:!1,removeWithoutAttr:!1,removeEmpty:!1,activeButtons:["deleted","italic","bold","underline","unorderedlist","orderedlist","alignleft","aligncenter","alignright","justify"],activeButtonsStates:{b:"bold",strong:"bold",i:"italic",em:"italic",del:"deleted",strike:"deleted",ul:"unorderedlist",ol:"orderedlist",u:"underline"},shortcuts:{"ctrl+shift+m, meta+shift+m":{func:"inline.removeFormat"},"ctrl+b, meta+b":{func:"inline.format",params:["bold"]},"ctrl+i, meta+i":{func:"inline.format",params:["italic"]},"ctrl+h, meta+h":{func:"inline.format",params:["superscript"]},"ctrl+l, meta+l":{func:"inline.format",params:["subscript"]},"ctrl+k, meta+k":{func:"link.show"},"ctrl+shift+7":{func:"list.toggle",params:["orderedlist"]},"ctrl+shift+8":{func:"list.toggle",params:["unorderedlist"]}},shortcutsAdd:!1,buffer:[],rebuffer:[],emptyHtml:"<p>&#x200b;</p>",invisibleSpace:"&#x200b;",imageTypes:["image/png","image/jpeg","image/gif"],indentValue:parseFloat(t(document.body).css("font-size")),verifiedTags:["a","img","b","strong","sub","sup","i","em","u","small","strike","del","cite","ul","ol","li"],inlineTags:["strong","b","u","em","i","code","del","ins","samp","kbd","sup","sub","mark","var","cite","small"],alignmentTags:["P","H1","H2","H3","H4","H5","H6","DL","DT","DD","DIV","TD","BLOCKQUOTE","OUTPUT","FIGCAPTION","ADDRESS","SECTION","HEADER","FOOTER","ASIDE","ARTICLE"],blockLevelElements:["PRE","UL","OL","LI"],langs:{en:{add_head:"Add Head",alignment:"Alignment",align_center:"Center text",align_justify:"Justify text",align_left:"Align text to the left",align_right:"Align text to the right",anchor:"Anchor",backcolor:"Background Color",bold:"Bold",browse:"Browse",browse_composer:"Browse Composer",cancel:"Cancel",center:"Center",choose:"Choose","class":"Class",class_attr_description:"Optional; can be used to assign a particular CSS class to this link.",code:"Code",columns:"Columns",composer_site_page_browse_title:"Browse Composer Site Pages",deleted:"Deleted",delete_column:"Delete Column",delete_head:"Delete Head",delete_row:"Delete Row",delete_table:"Delete Table",download:"Download",drop_file_here:"Drop file here",edit:"Edit",embed:"Insert Embed",file:"Insert File",filename:"Name (optional)",fontcolor:"Font Color",formatting:"Formatting",header1:"Header 1",header2:"Header 2",header3:"Header 3",header4:"Header 4",header5:"Header 5",header6:"Header 6",horizontalrule:"Insert Horizontal Rule",html:"HTML",id_attr_description:"Give this link a unique ID, allowing users to jump directly to this element from a different spot on the page. Create the jump using another link that starts with a # and points to this ID.",indent:"Indent",insert:"Insert",insert_column_left:"Add Column Left",insert_column_right:"Add Column Right",insert_row_above:"Add Row Above",insert_row_below:"Add Row Below",insert_table:"Insert Table",image:"Insert Image",image_position:"Position",image_web_link:"Image Web Link",italic:"Italic",left:"Left",link:"Link",link_insert:"Insert link",link_edit:"Edit link",link_new_tab:"Open link in new tab",mailto:"Email",media:"Media",media_browse_title:"Browse Media",media_select:"Please select media",none:"None",orderedlist:"Ordered List",or_choose:"Or choose",outdent:"Outdent",paragraph:"Normal text",quote:"Quote",right:"Right",rows:"Rows",save:"Save",site_file:"Site File",site_file_select:"Please select a file",site_file_browse_title:"Browse Site Files",site_page:"Site Page",site_page_select:"Please select a site page",site_page_browse_title:"Browse Site Pages",style:"Style",table:"Table",text:"Text",title:"Title",title_attr_description:"Optional but strongly recommended. This text appears when users hover over the link; it's used to provide additional details about the link target. (Not related to SEO optimization.)",underline:"Underline",unlink:"Unlink",unorderedlist:"Unordered List",upload:"Upload",upload_label:"Drop file here or ",web:"URL",video:"Insert Embed",video_html_code:"Embed Code",_delete:"Delete"}},linkify:{regexps:{youtube:/https?:\/\/(?:[0-9A-Z-]+\.)?(?:youtu\.be\/|youtube\.com\S*[^\w\-\s])([\w\-]{11})(?=[^\w\-]|$)(?![?=&+%\w.\-]*(?:['"][^<>]*>|<\/a>))[?=&+%\w.-]*/gi,vimeo:/https?:\/\/(www\.)?vimeo.com\/(\d+)($|\/)/,image:/((https?|www)[^\s]+\.)(jpe?g|png|gif)(\?[^\s-]+)?/gi,url:/(https?:\/\/(?:www\.|(?!www))[^\s\.]+\.[^\s]{2,}|www\.[^\s]+\.[^\s]{2,})/gi}},codemirror:!1}}),i("modules/alignment",["jquery"],function(t){"use strict";function e(){}return e.prototype={left:function(){this.alignment.set("left")},right:function(){this.alignment.set("right")},center:function(){this.alignment.set("center")},justify:function(){this.alignment.set("justify")},set:function(t){this.utils.browser("msie")||this.$editor[0].focus(),this.buffer.set(),this.selection.save(),this.alignment.blocks=this.selection.getBlocks(),this.alignment.type=t,this.alignment.isLinebreaksOrNoBlocks()?this.alignment.setText():this.alignment.setBlocks(),this.selection.restore(),this.code.sync()},setText:function(){var e=this.selection.wrap("div");t(e).attr("data-tagblock","redactor").css("text-align",this.alignment.type)},setBlocks:function(){t.each(this.alignment.blocks,t.proxy(function(t,e){var i=this.utils.getAlignmentElement(e);i&&(this.alignment.isNeedReplaceElement(i)?this.alignment.replaceElement(i):this.alignment.alignElement(i))},this))},isLinebreaksOrNoBlocks:function(){return this.opts.linebreaks||this.alignment.blocks[0]===!1},isNeedReplaceElement:function(t){return""===this.alignment.type&&"undefined"!=typeof t.data("tagblock")},replaceElement:function(t){t.replaceWith(t.html())},alignElement:function(t){t.css("text-align",this.alignment.type),this.utils.removeEmptyAttr(t,"style")}},e}),i("modules/block",["jquery"],function(t){"use strict";function e(){}return e.prototype={formatting:function(t){this.block.clearStyle=!1;var e,i;"undefined"!=typeof this.formatting[t].data?e="data":"undefined"!=typeof this.formatting[t].attr?e="attr":"undefined"!=typeof this.formatting[t]["class"]&&(e="class"),"undefined"!=typeof this.formatting[t].clear&&(this.block.clearStyle=!0),e&&(i=this.formatting[t][e]),this.block.format(this.formatting[t].tag,e,i)},format:function(e,i,n){"quote"===e&&(e="blockquote");var s=["p","pre","blockquote","h1","h2","h3","h4","h5","h6"];t.inArray(e,s)!==-1&&(this.block.isRemoveInline="pre"===e||e.search(/h[1-6]/i)!==-1,this.utils.browser("msie")||this.$editor[0].focus(),this.block.blocks=this.selection.getBlocks(),this.block.blocksSize=this.block.blocks.length,this.block.type=i,this.block.value=n,this.buffer.set(),this.selection.save(),this.block.set(e),this.selection.restore(),this.code.sync())},set:function(t){this.selection.get(),this.block.containerTag=this.range.commonAncestorContainer.tagName,this.range.collapsed?this.block.setCollapsed(t):this.block.setMultiple(t)},setCollapsed:function(e){var i=this.block.blocks[0];if(i!==!1){if("LI"===i.tagName){if("blockquote"!==e)return;return void this.block.formatListToBlockquote()}var n="TD"===this.block.containerTag||"TH"===this.block.containerTag;if(n&&!this.opts.linebreaks)document.execCommand("formatblock",!1,"<"+e+">"),i=this.selection.getBlock(),this.block.toggle(t(i));else if(i.tagName.toLowerCase()!==e)if(this.opts.linebreaks&&"p"===e)t(i).prepend("<br>").append("<br>"),this.utils.replaceWithContents(i);else{var s=this.utils.replaceToTag(i,e);this.block.toggle(s),"p"!==e&&"blockquote"!==e&&s.find("img").remove(),this.block.isRemoveInline&&this.utils.removeInlineTags(s),("p"===e||this.block.headTag)&&s.find("p").contents().unwrap(),this.block.formatTableWrapping(s)}else if("blockquote"===e&&i.tagName.toLowerCase()===e)if(this.opts.linebreaks)t(i).prepend("<br>").append("<br>"),this.utils.replaceWithContents(i);else{var o=this.utils.replaceToTag(i,"p");this.block.toggle(o)}else i.tagName.toLowerCase()===e&&this.block.toggle(t(i));"undefined"==typeof this.block.type&&"undefined"==typeof this.block.value&&t(i).removeAttr("class").removeAttr("style")}},setMultiple:function(e){var i=this.block.blocks[0],n="TD"===this.block.containerTag||"TH"===this.block.containerTag;if(i!==!1&&1===this.block.blocksSize)if(i.tagName.toLowerCase()===e&&"blockquote"===e)if(this.opts.linebreaks)t(i).prepend("<br>").append("<br>"),this.utils.replaceWithContents(i);else{var s=this.utils.replaceToTag(i,"p");this.block.toggle(s)}else if("LI"===i.tagName){if("blockquote"!==e)return;this.block.formatListToBlockquote()}else if("BLOCKQUOTE"===this.block.containerTag)this.block.formatBlockquote(e);else if(this.opts.linebreaks&&(n||this.range.commonAncestorContainer!==i))this.block.formatWrap(e);else if(this.opts.linebreaks&&"p"===e)t(i).prepend("<br>").append("<br>"),this.utils.replaceWithContents(i);else if("TD"===i.tagName)this.block.formatWrap(e);else{var o=this.utils.replaceToTag(i,e);this.block.toggle(o),this.block.isRemoveInline&&this.utils.removeInlineTags(o),("p"===e||this.block.headTag)&&o.find("p").contents().unwrap()}else if(this.opts.linebreaks||"p"!==e){if("blockquote"===e){for(var r=0,a=0;a<this.block.blocksSize;a++)"BLOCKQUOTE"===this.block.blocks[a].tagName&&r++;if(r===this.block.blocksSize)return void t.each(this.block.blocks,t.proxy(function(e,i){var n=!1;this.opts.linebreaks?(t(i).prepend("<br>").append("<br>"),n=this.utils.replaceWithContents(i)):n=this.utils.replaceToTag(i,"p"),n&&"undefined"==typeof this.block.type&&"undefined"==typeof this.block.value&&n.removeAttr("class").removeAttr("style")},this))}this.block.formatWrap(e)}else{var l=0,c=!1;"class"===this.block.type&&(c="toggle",l=t(this.block.blocks).filter("."+this.block.value).length,this.block.blocksSize===l?c="toggle":this.block.blocksSize>l?c="set":0===l&&(c="set"));var d=["ul","ol","li","td","th","dl","dt","dd"];t.each(this.block.blocks,t.proxy(function(i,n){if(t.inArray(n.tagName.toLowerCase(),d)===-1){var s=this.utils.replaceToTag(n,e);c?"toggle"===c?this.block.toggle(s):"remove"===c?this.block.remove(s):"set"===c&&this.block.setForce(s):this.block.toggle(s),"p"!==e&&"blockquote"!==e&&s.find("img").remove(),this.block.isRemoveInline&&this.utils.removeInlineTags(s),("p"===e||this.block.headTag)&&s.find("p").contents().unwrap(),"undefined"==typeof this.block.type&&"undefined"==typeof this.block.value&&s.removeAttr("class").removeAttr("style")}},this))}},setForce:function(t){return this.block.clearStyle&&t.removeAttr("class").removeAttr("style"),"class"===this.block.type?void t.addClass(this.block.value):"attr"===this.block.type||"data"===this.block.type?void t.attr(this.block.value.name,this.block.value.value):void 0},toggle:function(t){return this.block.clearStyle&&t.removeAttr("class").removeAttr("style"),"class"===this.block.type?void t.toggleClass(this.block.value):"attr"===this.block.type||"data"===this.block.type?void(t.attr(this.block.value.name)===this.block.value.value?t.removeAttr(this.block.value.name):t.attr(this.block.value.name,this.block.value.value)):void t.removeAttr("style class")},remove:function(t){t.removeClass(this.block.value)},formatListToBlockquote:function(){var e=t(this.block.blocks[0]).closest("ul, ol",this.$editor[0]);t(e).find("ul, ol").contents().unwrap(),t(e).find("li").append(t("<br>")).contents().unwrap();var i=this.utils.replaceToTag(e,"blockquote");this.block.toggle(i)},formatBlockquote:function(e){document.execCommand("outdent"),document.execCommand("formatblock",!1,e),this.clean.clearUnverified(),this.$editor.find("p:empty").remove();var i=this.selection.getBlock();"p"!==e&&t(i).find("img").remove(),this.opts.linebreaks||this.block.toggle(t(i)),this.$editor.find("ul, ol, tr, blockquote, p").each(t.proxy(this.utils.removeEmpty,this)),this.opts.linebreaks&&"p"===e&&this.utils.replaceWithContents(i)},formatWrap:function(e){if("UL"===this.block.containerTag||"OL"===this.block.containerTag){if("blockquote"!==e)return;this.block.formatListToBlockquote()}var i=this.selection.wrap(e);if(i!==!1){var n=t(i);this.block.formatTableWrapping(n);var s=n.find(this.opts.blockLevelElements.join(",")+", td, table, thead, tbody, tfoot, th, tr");(this.opts.linebreaks&&"p"===e||"pre"===e||"blockquote"===e)&&s.append("<br />"),s.contents().unwrap(),"p"!==e&&"blockquote"!==e&&n.find("img").remove(),t.each(this.block.blocks,t.proxy(this.utils.removeEmpty,this)),n.append(this.selection.getMarker(2)),this.opts.linebreaks||this.block.toggle(n),this.$editor.find("ul, ol, tr, blockquote, p").each(t.proxy(this.utils.removeEmpty,this)),n.find("blockquote:empty").remove(),this.block.isRemoveInline&&this.utils.removeInlineTags(n),this.opts.linebreaks&&"p"===e&&this.utils.replaceWithContents(n)}},formatTableWrapping:function(t){0!==t.closest("table",this.$editor[0]).length&&(0===t.closest("tr",this.$editor[0]).length&&t.wrap("<tr>"),0===t.closest("td",this.$editor[0]).length&&0===t.closest("th").length&&t.wrap("<td>"))},removeData:function(e){var i=this.selection.getBlocks();t(i).removeAttr("data-"+e),this.code.sync()},setData:function(e,i){var n=this.selection.getBlocks();t(n).attr("data-"+e,i),this.code.sync()},toggleData:function(e,i){var n=this.selection.getBlocks();t.each(n,function(){t(this).attr("data-"+e)?t(this).removeAttr("data-"+e):t(this).attr("data-"+e,i)})},removeAttr:function(e){var i=this.selection.getBlocks();t(i).removeAttr(e),this.code.sync()},setAttr:function(e,i){var n=this.selection.getBlocks();t(n).attr(e,i),this.code.sync()},toggleAttr:function(e,i){var n=this.selection.getBlocks();t.each(n,function(){t(this).attr(name)?t(this).removeAttr(name):t(this).attr(name,i)})},removeClass:function(e){var i=this.selection.getBlocks();t(i).removeClass(e),this.utils.removeEmptyAttr(i,"class"),this.code.sync()},setClass:function(e){var i=this.selection.getBlocks();t(i).addClass(e),this.code.sync()},toggleClass:function(e){var i=this.selection.getBlocks();t(i).toggleClass(e),this.code.sync()}},e}),i("modules/buffer",["jquery"],function(t){"use strict";function e(){}return e.prototype={set:function(t,e){"undefined"==typeof t||"undo"===t?(this.buffer.setUndo(),e||this.buffer.clearRebuffer()):this.buffer.setRedo(),this.buffer.toggleUndoButtonStatus()},setUndo:function(){this.selection.save(),this.opts.buffer.push(this.$editor.html()),this.selection.restore()},getUndo:function(){this.$editor.html(this.opts.buffer.pop()),this.buffer.toggleUndoButtonStatus()},setRedo:function(){this.selection.save(),this.opts.rebuffer.push(this.$editor.html()),this.selection.restore()},getRedo:function(){this.$editor.html(this.opts.rebuffer.pop()),this.buffer.toggleUndoButtonStatus()},redo:function(){0!==this.opts.rebuffer.length&&(this.buffer.set("undo",!0),this.buffer.getRedo(),this.selection.restore(),setTimeout(t.proxy(this.observe.load,this),50))},clearBuffer:function(){for(;this.opts.buffer.length>0;)this.opts.buffer.pop();this.buffer.toggleUndoButtonStatus()},clearRebuffer:function(){for(;this.opts.rebuffer.length>0;)this.opts.rebuffer.pop();this.buffer.toggleUndoButtonStatus()},toggleUndoButtonStatus:function(){this.$toolbar.find(".re-undo").toggleClass("redactor-button-disabled",!this.opts.buffer.length),this.$toolbar.find(".re-redo").toggleClass("redactor-button-disabled",!this.opts.rebuffer.length)},add:function(){this.opts.buffer.push(this.$editor.html())},undo:function(){0!==this.opts.buffer.length&&(this.buffer.set("redo"),this.buffer.getUndo(),this.selection.restore(),setTimeout(t.proxy(this.observe.load,this),50))}},e}),i("modules/build",["jquery"],function(t){"use strict";function e(){}return e.prototype={run:function(){this.build.createContainerBox(),this.build.loadContent(),this.build.loadEditor(),this.build.enableEditor(),this.build.setCodeAndCall()},isTextarea:function(){return"TEXTAREA"===this.$element[0].tagName},createContainerBox:function(){this.$box=t('<div class="redactor-box" />')},createTextarea:function(){this.$textarea=t("<textarea />").attr("name",this.build.getTextareaName())},getTextareaName:function(){return"undefined"==typeof name?"content-"+this.uuid:this.$element.attr("id")},loadContent:function(){if(this.$sourceTextarea=t("textarea.redactorContent",this.$element[0]),this.$sourceTextarea.length)return this.content=this.$sourceTextarea.val(),void this.$sourceTextarea.detach();if(this.$element.next("textarea").length)return void(this.content=this.$element.next("textarea").val());var e=this.build.isTextarea()?"val":"html";this.content=t.trim(this.$element[e]())},enableEditor:function(){this.$editor.attr({contenteditable:!0,dir:this.opts.direction})},loadEditor:function(){var t=this.build.isTextarea()?"fromTextarea":"fromElement";this.build[t]()},fromTextarea:function(){this.$editor=t("<div />"),this.$textarea=this.$element,this.$box.insertAfter(this.$element).append(this.$editor).append(this.$element),this.$editor.addClass("redactor-editor"),this.$element.hide()},fromElement:function(){this.$editor=this.$element,this.build.createTextarea(),this.$box.insertAfter(this.$editor).append(this.$editor).append(this.$textarea),this.$editor.addClass("redactor-editor"),this.$textarea.hide()},setCodeAndCall:function(){this.code.set(this.content),this.build.setOptions(),this.build.callEditor(),this.opts.visual||setTimeout(t.proxy(this.code.showCode,this),200)},callEditor:function(){this.build.disableMozillaEditing(),this.build.setEvents(),this.build.setHelpers(),this.opts.toolbar&&(this.opts.toolbar=this.toolbar.init(),this.toolbar.build()),this.modal.loadTemplates(),this.build.plugins(),setTimeout(t.proxy(this.observe.load,this),4),this.core.setCallback("init")},setOptions:function(){t(this.$textarea).attr("dir",this.opts.direction),this.opts.linebreaks&&this.$editor.addClass("redactor-linebreaks"),this.opts.tabindex&&this.$editor.attr("tabindex",this.opts.tabindex),this.opts.minHeight&&this.$editor.css("minHeight",this.opts.minHeight),this.opts.maxHeight&&this.$editor.css("maxHeight",this.opts.maxHeight)},setEventDropUpload:function(t){if(t.preventDefault(),this.opts.dragImageUpload&&this.opts.dragFileUpload){var e=t.dataTransfer.files;this.upload.directUpload(e[0],t)}},setEventDrop:function(t){this.code.sync(),setTimeout(this.clean.clearUnverified,1),this.core.setCallback("drop",t)},setEvents:function(){this.$editor.on("drop.redactor",t.proxy(function(t){return t=t.originalEvent||t,void 0===window.FormData||!t.dataTransfer||(0===t.dataTransfer.files.length?this.build.setEventDrop(t):(this.build.setEventDropUpload(t),setTimeout(this.clean.clearUnverified,1),this.core.setCallback("drop",t),void 0))},this)),this.$editor.on("click.redactor",t.proxy(function(t){var e=this.core.getEvent(),i="click"!==e&&"arrow"!==e&&"click";this.core.addEvent(i),this.utils.disableSelectAll(),this.core.setCallback("click",t)},this)),this.$editor.on("paste.redactor",t.proxy(this.paste.init,this)),this.$editor.on("cut.redactor",t.proxy(this.code.sync,this)),this.$editor.on("keydown.redactor",t.proxy(this.keydown.init,this)),this.$editor.on("keyup.redactor",t.proxy(this.keyup.init,this)),t.isFunction(this.opts.codeKeydownCallback)&&this.$textarea.on("keydown.redactor-textarea",t.proxy(this.opts.codeKeydownCallback,this)),t.isFunction(this.opts.codeKeyupCallback)&&this.$textarea.on("keyup.redactor-textarea",t.proxy(this.opts.codeKeyupCallback,this)),t.isFunction(this.opts.focusCallback)&&this.$editor.on("focus.redactor",t.proxy(this.opts.focusCallback,this));var e;t(document).on("mousedown focusin",function(t){e=t.target}),this.$editor.on("blur.redactor",t.proxy(function(i){this.rtePaste||this.build.isBlured(e)&&(this.code.sync(),this.$textarea.trigger("change"),this.utils.disableSelectAll(),t.isFunction(this.opts.blurCallback)&&this.core.setCallback("blur",i))},this))},isBlured:function(e){var i=t(e);return!(!i.is(".redactor-editor")||i[0]===this.$editor[0])||!i.hasClass("redactor-toolbar, redactor-dropdown")&&!i.is("#redactor-modal")&&0===i.parents(".redactor-toolbar, .redactor-dropdown, #redactor-modal").length&&0===i.closest(this.$editor).length},setHelpers:function(){this.linkify.isEnabled()&&this.linkify.format(),this.placeholder.enable(),this.opts.focus&&setTimeout(this.focus.setStart,100),this.opts.focusEnd&&setTimeout(this.focus.setEnd,100)},plugins:function(){t.each(this.modules,t.proxy(function(e,i){t.isFunction(this[i].initialize)&&this[i].initialize()},this))},disableMozillaEditing:function(){if(this.utils.browser("mozilla"))try{document.execCommand("enableObjectResizing",!1,!1),document.execCommand("enableInlineTableEditing",!1,!1)}catch(t){}}},e}),i("modules/button",["jquery"],function(t){"use strict";function e(){}return e.prototype={build:function(e,i){var n=t('<a href="#" class="re-icon re-'+e+'" rel="'+e+'" />').attr("tabindex","-1");if((i.func||i.command||i.dropdown)&&this.button.setEvent(n,e,i),i.dropdown){var s=t('<div class="redactor-dropdown redactor-dropdown-'+this.uuid+" redactor-dropdown-box-"+e+'" style="display: none;">');n.data("dropdown",s),this.dropdown.build(e,s,i.dropdown)}return this.utils.isDesktop()&&this.button.createTooltip(n,e,i.title),n},setEvent:function(e,i,n){e.on("mousedown",function(t){t.stopPropagation()}),e.on("touchstart click",t.proxy(function(t){if(e.hasClass("redactor-button-disabled"))return!1;var s="func",o=n.func;n.command?(s="command",o=n.command):n.dropdown&&(s="dropdown",o=!1),this.button.onClick(t,i,s,o)},this))},createTooltip:function(e,i,n){var s=t("<span>").addClass("redactor-toolbar-tooltip redactor-toolbar-tooltip-"+i).hide().html(n);s.appendTo("body"),e.on("mouseover",function(){if(!t(this).hasClass("redactor-button-disabled")){var i=e.offset();s.show(),s.css({top:i.top+e.innerHeight()+"px",left:i.left+e.innerWidth()/2-s.innerWidth()/2+"px"})}}),e.on("mouseout mouseup",function(){s.hide()})},onClick:function(t,e,i,n){this.button.caretOffset=this.caret.getOffset(),t.preventDefault(),this.utils.browser("msie")&&(t.returnValue=!1),"command"===i?this.inline.format(n):"dropdown"===i?this.dropdown.show(t,e):this.button.onClickCallback(t,n,e)},onClickCallback:function(e,i,n){var s;if(t.isFunction(i))i.call(this,n);else if("-1"!==i.search(/\./)){if(s=i.split("."),"undefined"==typeof this[s[0]])return;this[s[0]][s[1]](n)}else this[i](n);this.observe.buttons(e,n)},get:function(t){return this.$toolbar.find("a.re-"+t)},setActive:function(t){this.button.get(t).addClass("redactor-act")},setInactive:function(t){this.button.get(t).removeClass("redactor-act")},setInactiveAll:function(t){"undefined"==typeof t?this.$toolbar.find("a.re-icon").removeClass("redactor-act"):this.$toolbar.find("a.re-icon").not(".re-"+t).removeClass("redactor-act")},setActiveInVisual:function(){this.$toolbar.find("a.re-icon").not("a.re-html").removeClass("redactor-button-disabled")},setInactiveInCode:function(){this.$toolbar.find("a.re-icon").not("a.re-html").addClass("redactor-button-disabled")},changeIcon:function(t,e){this.button.get(t).addClass("re-"+e)},removeIcon:function(t,e){this.button.get(t).removeClass("re-"+e)},setAwesome:function(t,e){var i=this.button.get(t);i.removeClass("redactor-btn-image").addClass("fa-redactor-btn"),i.html('<i class="fa '+e+'"></i>')},addCallback:function(e,i){var n="dropdown"===i?"dropdown":"func",s=e.attr("rel");"dropdown"===n&&e.addClass("re-has-dropdown"),e.on("mousedown",function(t){t.stopPropagation()}),e.on("touchstart click",t.proxy(function(t){return!e.hasClass("redactor-button-disabled")&&void this.button.onClick(t,s,n,i)},this))},addDropdown:function(e,i){var n=e.attr("rel");this.button.addCallback(e,"dropdown");var s=t('<div class="redactor-dropdown redactor-dropdown-'+this.uuid+" redactor-dropdown-box-"+n+'" style="display: none;">');return e.data("dropdown",s),s.on("mousedown",function(t){t.stopPropagation()}),i&&this.dropdown.build(n,s,i),s},add:function(e,i){if(this.opts.toolbar){var n=this.button.build(e,{title:i});return n.addClass("redactor-btn-image"),this.$toolbar.append(t("<li>").append(n)),n}},addFirst:function(e,i){if(this.opts.toolbar){var n=this.button.build(e,{title:i});return n.addClass("redactor-btn-image"),this.$toolbar.prepend(t("<li>").append(n)),n}},addAfter:function(e,i,n){if(this.opts.toolbar){var s=this.button.build(i,{title:n});s.addClass("redactor-btn-image");var o=this.button.get(e);return 0!==o.length?o.parent().after(t("<li>").append(s)):this.$toolbar.append(t("<li>").append(s)),s}},addBefore:function(e,i,n){if(this.opts.toolbar){var s=this.button.build(i,{title:n});s.addClass("redactor-btn-image");var o=this.button.get(e);return 0!==o.length?o.parent().before(t("<li>").append(s)):this.$toolbar.append(t("<li>").append(s)),s}},remove:function(t){this.button.get(t).remove()}},e}),i("modules/caret",["jquery"],function(t){"use strict";function e(){}return e.prototype={setStart:function(e){if(this.utils.isInline(e)){var i=this.utils.createSpaceElement();t(e).prepend(i),this.caret.setEnd(i)}else this.caret.set(e,0,e,0)},setEnd:function(t){this.caret.set(t,1,t,1)},set:function(e,i,n,s){if(e=e[0]||e,n=n[0]||n,this.utils.isBlockTag(e.tagName)&&""===e.innerHTML&&(e.innerHTML=this.opts.invisibleSpace),"BR"===e.tagName&&this.opts.linebreaks===!1){var o=t(this.opts.emptyHtml)[0];t(e).replaceWith(o),e=o,n=e}this.selection.get();try{this.range.setStart(e,i),this.range.setEnd(n,s)}catch(t){}this.selection.addRange()},setAfter:function(e){try{var i=t(e)[0].tagName;if("BR"!==i&&this.utils.isInline(e)){var n=this.utils.createSpaceElement();t(e).after(n),this.caret.setEnd(n)}else"BR"!==i&&this.utils.browser("msie")?this.caret.setStart(t(e).next()):this.caret.setAfterOrBefore(e,"after")}catch(i){var n=this.utils.createSpaceElement();t(e).after(n),this.caret.setEnd(n)}},setBefore:function(e){this.utils.isBlock(e)?this.caret.setEnd(t(e).prev()):this.caret.setAfterOrBefore(e,"before")},setAfterOrBefore:function(t,e){if(this.utils.browser("msie")||this.$editor[0].focus(),t=t[0]||t,this.selection.get(),"after"===e)try{this.range.setStartAfter(t),this.range.setEndAfter(t)}catch(t){}else try{this.range.setStartBefore(t),this.range.setEndBefore(t)}catch(t){}this.range.collapse(!1),this.selection.addRange()},getOffsetOfElement:function(e){e=e[0]||e,this.selection.get();var i=this.range.cloneRange();return i.selectNodeContents(e),i.setEnd(this.range.endContainer,this.range.endOffset),t.trim(i.toString()).length},getOffset:function(){var t=0,e=window.getSelection();if(e.rangeCount>0){var i=window.getSelection().getRangeAt(0),n=i.cloneRange();n.selectNodeContents(this.$editor[0]),n.setEnd(i.endContainer,i.endOffset),t=n.toString().length}return t},setOffset:function(t,e){"undefined"==typeof e&&(e=t),this.focus.isFocused()||this.focus.setStart();for(var i,n=0,s=document.createTreeWalker(this.$editor[0],NodeFilter.SHOW_TEXT,null,null);i=s.nextNode();)if(n+=i.nodeValue.length,n>t&&(this.range.setStart(i,i.nodeValue.length+t-n),t=1/0),n>=e){this.range.setEnd(i,i.nodeValue.length+e-n);break}this.range.collapse(!1),this.selection.addRange()},setToPoint:function(t,e){this.caret.setOffset(t,e)},getCoords:function(){
return this.caret.getOffset()}},e}),i("modules/clean",["jquery"],function(t){"use strict";function e(){}var i=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","command","content","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","element","em","embed","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","image","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","multicol","nav","nobr","noframes","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","rtc","ruby","s","samp","script","section","select","shadow","small","source","span","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"];return e.prototype={onSet:function(e){e=this.clean.savePreCode(e),e=this.clean.convertPre(e,"redactor-script-tag","script",!0),e=this.clean.convertPre(e,"redactor-noscript-tag","noscript"),e=e.replace(/<a href="([^>]*?)\xae([^>]*?)">/gi,'<a href="$1&reg$2">'),this.opts.replaceDivs&&(e=this.clean.replaceDivs(e)),this.opts.linebreaks&&(e=this.clean.replaceParagraphsToBr(e)),e=this.clean.saveFormTags(e);var i=t("<div>");i.html(e);var n=i.find("font[style]");return 0!==n.length&&(n.replaceWith(function(){var e=t(this),i=t("<span>").attr("style",e.attr("style"));return i.append(e.contents())}),e=i.html()),i.remove(),e=e.replace(/<font([^<]*)>/gi,""),e=e.replace(/<\/font>/gi,""),e=this.tidy.load(e),this.opts.paragraphize&&(e=this.paragraphize.load(e)),e=this.clean.setVerified(e),e=this.clean.convertInline(e)},onSync:function(e){if(e=e.replace(/[\u200B-\u200D\uFEFF]/g,""),e=e.replace(/&#x200b;/gi,""),this.opts.cleanSpaces&&(e=e.replace(/&nbsp;/gi," ")),e.search(/^<p>(||\s||<br\s?\/?>||&nbsp;)<\/p>$/i)!==-1)return"";e=this.clean.restoreFormTags(e);var i={"\u2122":"&trade;","\xa9":"&copy;","\u2026":"&hellip;","\u2014":"&mdash;","\u2010":"&dash;"};return t.each(i,function(t,i){e=e.replace(new RegExp(t,"g"),i)}),e=e.replace(new RegExp("<br\\s?/?></li>","gi"),"</li>"),e=e.replace(new RegExp("</li><br\\s?/?>","gi"),"</li>"),e=e.replace(/<div([^>]*) data-tagblock="redactor"([^>]*)>/gi,"<div$1$2>"),e=e.replace(/<([^>]*) data-verified="redactor"([^>]*)>/gi,"<$1$2>"),e=e.replace(/<span([^>]*)\srel="([^>]*?)"([^>]*)>/gi,"<span$1$3>"),e=e.replace(/<img([^>]*)\srel="([^>]*?)"([^>]*)>/gi,"<img$1$3>"),e=e.replace(/<img([^>]*)\sstyle="" ([^>]*)>'/gi,"<img$1 $2>"),e=e.replace(/<img([^>]*)\sstyle ([^>]*)>'/gi,"<img$1 $2>"),e=e.replace(/<span class="redactor-invisible-space">([^<]*)<\/span>/gi,"$1"),e=e.replace(/ data-save-url="([^>]*?)"/gi,""),e=e.replace(/<span([^>]*)id="redactor-image-box"([^>]*)>([\w\W]*?)<img([^>]*)><\/span>/gi,"$3<img$4>"),e=e.replace(/<span([^>]*)id="redactor-image-resizer"([^>]*)>([^<]*)<\/span>/gi,""),e=e.replace(/<span([^>]*)id="redactor-image-editter"([^>]*)>([^<]*)<\/span>/gi,""),e=e.replace(/<font([^>]*)>/gi,""),e=e.replace(/<\/font>/gi,""),e=this.tidy.load(e),e=this.clean.reconvertPre(e,"redactor-script-tag","script",!0),e=this.clean.reconvertPre(e,"redactor-noscript-tag","noscript"),this.opts.linkNofollow&&(e=e.replace(/<a([^>]*)rel="nofollow"([^>]*)>/gi,"<a$1$2>"),e=e.replace(/<a([^>]*)>/gi,'<a$1 rel="nofollow">')),e=e.replace(/\sdata-redactor-(tag|class|style)="([^>]*?)"/gi,""),e=e.replace(new RegExp('<([^>]*) data-verified="redactor"([^>]*)>',"gi"),"<$1$2>"),e=e.replace(new RegExp('<([^>]*) data-verified="redactor">',"gi"),"<$1>")},convertPre:function(t,e,i,n){var s=new RegExp("<"+i+"([^>]*)>([\\w\\W]*?)</"+i+">","gi"),o=t.split(s);if(o.length<4)return t;for(var r=1;r<o.length;r+=3)o[r]='<pre class="'+e+'" style="display: none;"'+o[r]+">",o[r+1]=n?this.clean.encodeEntities(o[r+1]):o[r+1],o[r+2]="</pre>"+o[r+2];return o.join("")},reconvertPre:function(t,e,i,n){var s,o=new RegExp('<pre class="'+e+'" style="display: none;"([^>]*)>([\\w\\W]*?)</pre>',"gi"),r=t.split(o),a=0;if(r.length<4)return t;for(var l=1;l<r.length;l+=3)s=this.$editor.find("pre."+e+":eq("+a+")"),r[l]="<"+i+" "+r[l]+">",r[l+1]=n?s.text():s.html(),r[l+2]="</"+i+">"+r[l+2],a++;return r.join("")},onPaste:function(e,i){if(e=t.trim(e),e=e.replace(/<span class="s1">/gi,"<span>"),e=e.replace(/<span class="Apple-converted-space">&nbsp;<\/span>/gi," "),e=e.replace(/<span class="Apple-tab-span"[^>]*>\t<\/span>/gi,"\t"),e=e.replace(/<span[^>]*>(\s|&nbsp;)<\/span>/gi," "),this.opts.pastePlainText)return this.clean.getPlainText(e);if(!this.utils.isSelectAll()&&"undefined"==typeof i){if(this.utils.isCurrentOrParent(["FIGCAPTION","A"]))return this.clean.getPlainText(e,!1);if(this.utils.isCurrentOrParent("PRE"))return e=e.replace(/\u201d/g,'"'),e=e.replace(/\u201c/g,'"'),e=e.replace(/\u2018/g,"'"),e=e.replace(/\u2019/g,"'"),this.clean.getPreCode(e);if(this.utils.isCurrentOrParent(["BLOCKQUOTE","H1","H2","H3","H4","H5","H6"])){if(e=this.clean.getOnlyImages(e),!this.utils.browser("msie")){var n=this.selection.getBlock();n&&"P"===n.tagName&&(e=e.replace(/<img([^>]*)>/gi,"<p><img$1></p>"))}return e}if(this.utils.isCurrentOrParent(["TD"]))return e=this.clean.onPasteTidy(e,"td"),this.opts.linebreaks&&(e=this.clean.replaceParagraphsToBr(e)),e=this.clean.replaceDivsToBr(e);if(this.utils.isCurrentOrParent(["LI"]))return this.clean.onPasteTidy(e,"li")}return e=this.clean.isSingleLine(e,i),this.clean.singleLine||(this.opts.linebreaks&&(e=this.clean.replaceParagraphsToBr(e)),this.opts.replaceDivs&&(e=this.clean.replaceDivs(e)),e=this.clean.saveFormTags(e)),e=this.clean.onPasteWord(e),e=this.clean.onPasteExtra(e),e=this.clean.onPasteTidy(e,"strict"),!this.clean.singleLine&&this.opts.paragraphize&&(e=this.paragraphize.load(e)),e=this.clean.removeDirtyStyles(e),e=this.clean.onPasteRemoveSpans(e),e=this.clean.onPasteRemoveEmpty(e),e=this.clean.convertInline(e)},onPasteWord:function(t){return t=t.replace(/<!--[\s\S]*?-->/gi,""),t=t.replace(/<style[^>]*>[\s\S]*?<\/style>/gi,""),/(class=\"?Mso|style=\"[^\"]*\bmso\-|w:WordDocument)/.test(t)&&(t=this.clean.onPasteIeFixLinks(t),t=t.replace(/<img([^>]*)v:shapes=([^>]*)>/gi,""),t=t.replace(/src="file\:\/\/(.*?)"/,'src=""'),t=t.replace(/<p([^>]*)class="MsoListParagraphCxSpFirst"([\w\W]*?)<\/p>/gi,"<ul><li$2</li>"),t=t.replace(/<p([^>]*)class="MsoListParagraphCxSpMiddle"([\w\W]*?)<\/p>/gi,"<li$2</li>"),t=t.replace(/<p([^>]*)class="MsoListParagraphCxSpLast"([\w\W]*?)<\/p>/gi,"<li$2</li></ul>"),t=t.replace(/<p([^>]*)class="MsoListParagraph"([\w\W]*?)<\/p>/gi,"<ul><li$2</li></ul>"),t=t.replace(/\xb7/g,""),t=t.replace(/<p class="Mso([^>]*?)"/gi,"<p"),t=t.replace(/ class=\"(mso[^\"]*)\"/gi,""),t=t.replace(/ class=(mso\w+)/gi,""),t=t.replace(/<o:p([^>]*)>([\w\W]*?)<\/o:p>/gi,"$2"),t=t.replace(/<w:sdt([^>]*)>([\w\W]*?)<\/w:sdt[^>]*>/gi,"$2"),t=t.replace(/<w:sdt([^>]*)>([\w\W]*?)<\/w:sdt[^>]*>/gi,"$2"),t=t.replace(/\n/g," "),t=t.replace(/<p>\n?<li>/gi,"<li>")),this.opts.cleanSpaces&&(t=t.replace(/(\s|&nbsp;)+/g," ")),t},onPasteExtra:function(t){return t=t.replace(/<b\sid="internal-source-marker([^>]*?)">([\w\W]*?)<\/b>/gi,"$2"),t=t.replace(/<b([^>]*)id="docs-internal-guid([^>]*?)">([\w\W]*?)<\/b>/gi,"$3"),t=t.replace(/<span[^>]*(font-style: italic; font-weight: bold|font-weight: bold; font-style: italic)[^>]*>/gi,'<span style="font-weight: bold;"><span style="font-style: italic;">'),t=t.replace(/<span[^>]*font-style: italic[^>]*>/gi,'<span style="font-style: italic;">'),t=t.replace(/<span[^>]*font-weight: bold[^>]*>/gi,'<span style="font-weight: bold;">'),t=t.replace(/<span[^>]*text-decoration: underline[^>]*>/gi,'<span style="text-decoration: underline;">'),t=t.replace(/<img>/gi,""),t=t.replace(/\n{3,}/gi,"\n"),t=t.replace(/<font([^>]*)>([\w\W]*?)<\/font>/gi,"$2"),t=t.replace(/<p><p>/gi,"<p>"),t=t.replace(/<\/p><\/p>/gi,"</p>"),t=t.replace(/<li>(\s*|\t*|\n*)<p>/gi,"<li>"),t=t.replace(/<\/p>(\s*|\t*|\n*)<\/li>/gi,"</li>"),t=t.replace(/<\/p>\s<p/gi,"</p><p"),t=t.replace(/<img src="webkit-fake-url\:\/\/([^>]*?)"([^>]*)>/gi,""),t=t.replace(/<p>\u2022([\w\W]*?)<\/p>/gi,"<li>$1</li>"),this.utils.browser("mozilla")&&(t=t.replace(/<br\s?\/?>$/gi,"")),t},onPasteTidy:function(t,e){var n,s=i,o=!1,r=!1,a=[["a","*"],["img",["src","alt"]],["span",["class","rel","data-verified"]],["iframe","*"],["video","*"],["audio","*"],["embed","*"],["object","*"],["param","*"],["source","*"]];if("all"===e)for(o=["p","span","h1","h2","h3","h4","h5","h6"],a=[],n=0;n<s.length;n++)a.push([s[n],["*"]]);else if("strict"===e)for(o=["p","span","h1","h2","h3","h4","h5","h6"],a=[],r=[],n=0;n<s.length;n++)r.push([s[n],["style"]]);else"td"===e?s=["table","tr","td","tbody","thead","tfoot","colgroup","col","caption","ul","ol","li","span","a","small","em","strong","code","kbd","mark","cite","var","samp","dfn","sup","sub","b","i","u","del","ol","ul","li","dl","dt","dd","br","iframe","video","audio","embed","param","object","img","h1","h2","h3","h4","h5","h6"]:"li"===e&&(s=["ul","ol","li","span","a","small","em","strong","code","kbd","mark","cite","var","samp","dfn","sup","sub","b","i","u","del","br","iframe","video","audio","embed","param","object","img"]);var l={deniedTags:!!this.opts.deniedTags&&this.opts.deniedTags,allowedTags:this.opts.allowedTags?this.opts.allowedTags:s,removeComments:!0,removePhp:!0,removeAttr:this.opts.removeAttr?this.opts.removeAttr:r,allowedAttr:this.opts.allowedAttr?this.opts.allowedAttr:a,removeEmpty:o};return this.tidy.load(t,l)},onPasteRemoveEmpty:function(t){return t=t.replace(/<(p|h[1-6])>(|\s|\n|\t|<br\s?\/?>)<\/(p|h[1-6])>/gi,""),this.opts.linebreaks||(t=t.replace(/<br>$/i,"")),t},onPasteRemoveSpans:function(t){return t=t.replace(/<span>([^<]*)<\/span>/gi,"$1"),t=t.replace(/<span[^>]*>\s|&nbsp;<\/span>/gi," ")},onPasteIeFixLinks:function(e){if(!this.utils.browser("msie"))return e;var i=t.trim(e);return 0===i.search(/^<a([^>]*)>([^<]*)<\/a>$/i)&&(e=e.replace(/^<a([^>]*)>([^<]*)<\/a>$/i,"$2")),e},isSingleLine:function(t,e){if(this.clean.singleLine=!1,!this.utils.isSelectAll()&&"undefined"==typeof e){var i=this.opts.blockLevelElements.join("|").replace("P|","").replace("DIV|",""),n=t.match(new RegExp("</("+i+")>","gi")),s=t.match(/<\/(p|div)>/gi);if(!n&&(null===s||s&&s.length<=1)){var o=t.match(/<br\s?\/?>/gi),r=t.match(/<img([^>]*)>/gi);!o&&!r&&(this.clean.singleLine=!0,t=t.replace(/<\/?(p|div)([^>]*)>/gi,""))}}return t},stripTags:function(t,e){e=(((e||"")+"").toLowerCase().match(/<[a-z][a-z0-9]*>/g)||[]).join("");var i=/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi;return t.replace(i,function(t,i){return e.indexOf("<"+i.toLowerCase()+">")>-1?t:""})},savePreCode:function(t){return t=this.clean.savePreFormatting(t),t=this.clean.saveCodeFormatting(t)},savePreFormatting:function(e){var i=e.match(/<pre([^>]*)>([\w\W]*?)<\/pre>/gi);return null!==i&&t.each(i,t.proxy(function(t,i){var n=i.match(/<pre([^>]*)>([\w\W]*?)<\/pre>/i);n[2]=n[2].replace(/<br\s?\/?>/g,"\n"),n[2]=n[2].replace(/&nbsp;/g," "),this.opts.preSpaces&&(n[2]=n[2].replace(/\t/g,new Array(this.opts.preSpaces+1).join(" "))),n[2]=this.clean.encodeEntities(n[2]),n[2]=n[2].replace(/\$/g,"&#36;"),e=e.replace(i,"<pre"+n[1]+">"+n[2]+"</pre>")},this)),e},saveCodeFormatting:function(e){var i=e.match(/<code([^>]*)>([^<]*)<\/code>/gi);return null!==i&&t.each(i,t.proxy(function(t,i){var n=i.match(/<code([^>]*)>([^<]*)<\/code>/i);n[2]=n[2].replace(/&nbsp;/g," "),n[2]=this.clean.encodeEntities(n[2]),n[2]=n[2].replace(/\$/g,"&#36;"),e=e.replace(i,"<code"+n[1]+">"+n[2]+"</code>")},this)),e},getTextFromHtml:function(e){e=e.replace(/<br\s?\/?>|<\/H[1-6]>|<\/p>|<\/div>|<\/li>|<\/td>/gi,"\n");var i=document.createElement("div");return i.innerHTML=e,e=i.textContent||i.innerText,t.trim(e)},getPlainText:function(t,e){return t=this.clean.getTextFromHtml(t),t=t.replace(/\n/g,"<br />"),this.opts.paragraphize&&"undefined"==typeof e&&!this.utils.browser("mozilla")&&(t=this.paragraphize.load(t)),t},getPreCode:function(t){return t=t.replace(/<img([^>]*) style="([^>]*?)"([^>]*)>/gi,"<img$1$3>"),t=t.replace(/<img([^>]*)>/gi,"&lt;img$1&gt;"),t=this.clean.getTextFromHtml(t),this.opts.preSpaces&&(t=t.replace(/\t/g,new Array(this.opts.preSpaces+1).join(" "))),t=this.clean.encodeEntities(t)},getOnlyImages:function(t){return t=t.replace(/<img([^>]*)>/gi,"[img$1]"),t=t.replace(/<([Ss]*?)>/gi,""),t=t.replace(/\[img([^>]*)\]/gi,"<img$1>")},getOnlyLinksAndImages:function(t){return t=t.replace(/<a(.*?)href="(.*?)"(.*?)>([\w\W]*?)<\/a>/gi,'[a href="$2"]$4[/a]'),t=t.replace(/<img(.*?)>/gi,"[img$1]"),t=t.replace(/<(.*?)>/gi,""),t=t.replace(/\[a href="(.*?)"\]([\w\W]*?)\[\/a\]/gi,'<a href="$1">$2</a>'),t=t.replace(/\[img(.*?)\]/gi,"<img$1>")},encodeEntities:function(t){return t=String(t).replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"'),t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},removeDirtyStyles:function(e){if(this.utils.browser("msie"))return e;var i=document.createElement("div");return i.innerHTML=e,this.clean.clearUnverifiedRemove(t(i)),e=i.innerHTML,t(i).remove(),e},clearUnverified:function(){if(!this.utils.browser("msie")){this.clean.clearUnverifiedRemove(this.$editor);var t=this.$editor.find("h1, h2, h3, h4, h5, h6");t.find("span").removeAttr("style"),t.find(this.opts.verifiedTags.join(", ")).removeAttr("style"),this.code.sync()}},clearUnverifiedRemove:function(e){e.find("span").not('[data-verified="redactor"]').contents().unwrap(),e.find('span[data-verified="redactor"], img[data-verified="redactor"]').each(function(e,i){var n=t(i);n.attr("style",n.attr("rel"))})},cleanEmptyParagraph:function(){var t=this.$editor.find("p").first();this.utils.isEmpty(t.html())&&t.remove()},setVerified:function(t){if(this.utils.browser("msie"))return t;t=t.replace(new RegExp("<img([^>]*)>","gi"),'<img$1 data-verified="redactor">'),t=t.replace(new RegExp("<span([^>]*)>","gi"),'<span$1 data-verified="redactor">');var e=t.match(new RegExp('<(span|img)([^>]*)style="([^"]*)"([^>]*)>',"gi"));if(e)for(var i=e.length,n=0;n<i;n++)try{var s=e[n].replace(/style="(.*?)"/i,'style="$1" rel="$1"');t=t.replace(e[n],s)}catch(t){}return t},convertInline:function(e){var i=t("<div />").html(e),n=this.opts.inlineTags;return n.push("span"),i.find(n.join(",")).each(function(){var e=t(this),i=this.tagName.toLowerCase();e.attr("data-redactor-tag",i),"span"===i&&(e.attr("style")?e.attr("data-redactor-style",e.attr("style")):e.attr("class")&&e.attr("data-redactor-class",e.attr("class")))}),e=i.html(),i.remove(),e},normalizeLists:function(){this.$editor.find("li").each(function(e,i){var n=t(i).next();0!==n.length&&("UL"===n[0].tagName||"OL"===n[0].tagName)&&t(i).append(n)})},removeSpaces:function(t){return t},replaceDivs:function(t){return this.opts.linebreaks?(t=t.replace(/<div><br\s?\/?><\/div>/gi,"<br />"),t=t.replace(/<div(.*?)>([\w\W]*?)<\/div>/gi,"$2<br />")):t=t.replace(/<div(.*?)>([\w\W]*?)<\/div>/gi,"<p$1>$2</p>"),t=t.replace(/<div([^>]*)>/gi,""),t=t.replace(/<\/div>/gi,"")},replaceDivsToBr:function(t){return t=t.replace(/<div\s(.*?)>/gi,"<p>"),t=t.replace(/<div><br\s?\/?><\/div>/gi,"<br /><br />"),t=t.replace(/<div>([\w\W]*?)<\/div>/gi,"$1<br /><br />")},replaceParagraphsToBr:function(t){return t=t.replace(/<p\s(.*?)>/gi,"<p>"),t=t.replace(/<p><br\s?\/?><\/p>/gi,"<br />"),t=t.replace(/<p>([\w\W]*?)<\/p>/gi,"$1<br /><br />"),t=t.replace(/(<br\s?\/?>){1,}\n?<\/blockquote>/gi,"</blockquote>")},saveFormTags:function(t){return t.replace(/<form(.*?)>([\w\W]*?)<\/form>/gi,'<section$1 rel="redactor-form-tag">$2</section>')},restoreFormTags:function(t){return t.replace(/<section(.*?) rel="redactor-form-tag"(.*?)>([\w\W]*?)<\/section>/gi,"<form$1$2>$3</form>")}},e}),i("modules/code",["jquery"],function(t){"use strict";function e(){}return e.prototype={set:function(e){e=t.trim(e.toString()),e=this.clean.onSet(e),this.$editor.html(e),this.code.sync(),""!==e&&this.placeholder.remove(),setTimeout(t.proxy(this.buffer.add,this),15),this.start===!1&&this.observe.load()},get:function(){var t=this.$textarea.val();return t},sync:function(){var e=function(){this.code.syncTimeout=null,this.code.startSync.apply(this)};this.code.syncTimeout||this.code.startSync.apply(this),clearTimeout(this.code.syncTimeout),this.code.syncTimeout=setTimeout(t.proxy(e,this),50)},startSync:function(){var t=this.$editor.html();"undefined"!=typeof this.code.syncCode&&this.code.syncCode===t||(this.utils.isIe11()&&"<br>"===t&&(t=""),this.code.syncCode=t,t=this.core.setCallback("syncBefore",t),t=this.clean.onSync(t),this.$textarea.val(t),this.core.setCallback("sync",t),t=this.$textarea.val(),this.start===!1&&this.core.setCallback("change",t),this.start=!1,this.opts.codemirror&&this.$textarea.next(".CodeMirror").each(function(e,i){i.CodeMirror.setValue(t)}))},toggle:function(){this.opts.visual?this.code.showCode():this.code.showVisual()},showCode:function(){this.code.offset=this.caret.getOffset();var e=t(window).scrollTop(),i=this.$editor.innerHeight();this.$editor.hide();var n=this.$textarea.val();this.modified=this.clean.removeSpaces(n),this.$textarea.val(n),this.opts.codemirror?this.$textarea.next(".CodeMirror").each(function(e,s){t(s).show(),s.CodeMirror.setValue(n),s.CodeMirror.setSize(null,i),s.CodeMirror.refresh(),s.CodeMirror.focus()}):(this.$textarea.height(i).show().get(0).focus(),this.$textarea.on("keydown.redactor-textarea-indenting",this.code.textareaIndenting),t(window).scrollTop(e),this.$textarea[0].setSelectionRange&&this.$textarea[0].setSelectionRange(0,0),this.$textarea[0].scrollTop=0),this.opts.visual=!1,this.button.setInactiveInCode(),this.button.setActive("html"),this.core.setCallback("source",n)},showVisual:function(){var t;this.opts.visual||(this.opts.codemirror?this.$textarea.next(".CodeMirror").each(function(e,i){t=i.CodeMirror.getValue()}):t=this.$textarea.hide().val(),this.modified!==this.clean.removeSpaces(t)&&this.code.set(t),this.opts.codemirror&&this.$textarea.next(".CodeMirror").hide(),this.$editor.show(),this.utils.isEmpty(t)||this.placeholder.remove(),this.caret.setOffset(this.code.offset),this.$textarea.off("keydown.redactor-textarea-indenting"),this.button.setActiveInVisual(),this.button.setInactive("html"),this.observe.load(),this.opts.visual=!0,this.core.setCallback("visual",t))},textareaIndenting:function(t){if(9!==t.keyCode)return!0;var e=this.$textarea,i=e.get(0).selectionStart;return e.val(e.val().substring(0,i)+"\t"+e.val().substring(e.get(0).selectionEnd)),e.get(0).selectionStart=e.get(0).selectionEnd=i+1,!1}},e}),function(t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else{if("function"==typeof i&&i.amd)return i("codemirror/lib/codemirror",[],t);this.CodeMirror=t()}}(function(){"use strict";function t(i,n){if(!(this instanceof t))return new t(i,n);this.options=n=n?ms(n):{},ms(Lo,n,!1),p(n);var s=n.value;"string"==typeof s&&(s=new nr(s,n.mode)),this.doc=s;var o=this.display=new e(i,s);o.wrapper.CodeMirror=this,d(this),l(this),n.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),n.autofocus&&!co&&Se(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,cutIncoming:!1,draggingText:!1,highlight:new ls},Js&&Zs<11&&setTimeout(gs(Ce,this,!0),20),De(this),Ms(),Zt(this),this.curOp.forceUpdate=!0,Pn(this,s),n.autofocus&&!co||Cs()==o.input?setTimeout(gs(Qe,this),20):Je(this);for(var r in jo)jo.hasOwnProperty(r)&&jo[r](this,n[r],Oo);w(this);for(var a=0;a<Ho.length;++a)Ho[a](this);ee(this)}function e(t,e){var i=this,n=i.input=ws("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none");to?n.style.width="1000px":n.setAttribute("wrap","off"),lo&&(n.style.border="1px solid black"),n.setAttribute("autocorrect","off"),n.setAttribute("autocapitalize","off"),n.setAttribute("spellcheck","false"),i.inputDiv=ws("div",[n],null,"overflow: hidden; position: relative; width: 3px; height: 0px;"),i.scrollbarH=ws("div",[ws("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar"),i.scrollbarV=ws("div",[ws("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),i.scrollbarFiller=ws("div",null,"CodeMirror-scrollbar-filler"),i.gutterFiller=ws("div",null,"CodeMirror-gutter-filler"),i.lineDiv=ws("div",null,"CodeMirror-code"),i.selectionDiv=ws("div",null,null,"position: relative; z-index: 1"),i.cursorDiv=ws("div",null,"CodeMirror-cursors"),i.measure=ws("div",null,"CodeMirror-measure"),i.lineMeasure=ws("div",null,"CodeMirror-measure"),i.lineSpace=ws("div",[i.measure,i.lineMeasure,i.selectionDiv,i.cursorDiv,i.lineDiv],null,"position: relative; outline: none"),i.mover=ws("div",[ws("div",[i.lineSpace],"CodeMirror-lines")],null,"position: relative"),i.sizer=ws("div",[i.mover],"CodeMirror-sizer"),i.heightForcer=ws("div",null,null,"position: absolute; height: "+fr+"px; width: 1px;"),i.gutters=ws("div",null,"CodeMirror-gutters"),i.lineGutter=null,i.scroller=ws("div",[i.sizer,i.heightForcer,i.gutters],"CodeMirror-scroll"),i.scroller.setAttribute("tabIndex","-1"),i.wrapper=ws("div",[i.inputDiv,i.scrollbarH,i.scrollbarV,i.scrollbarFiller,i.gutterFiller,i.scroller],"CodeMirror"),Js&&Zs<8&&(i.gutters.style.zIndex=-1,i.scroller.style.paddingRight=0),lo&&(n.style.width="0px"),to||(i.scroller.draggable=!0),oo&&(i.inputDiv.style.height="1px",i.inputDiv.style.position="absolute"),Js&&Zs<8&&(i.scrollbarH.style.minHeight=i.scrollbarV.style.minWidth="18px"),t.appendChild?t.appendChild(i.wrapper):t(i.wrapper),i.viewFrom=i.viewTo=e.first,i.view=[],i.externalMeasured=null,i.viewOffset=0,i.lastSizeC=0,i.updateLineNumbers=null,i.lineNumWidth=i.lineNumInnerWidth=i.lineNumChars=null,i.prevInput="",i.alignWidgets=!1,i.pollingFast=!1,i.poll=new ls,i.cachedCharWidth=i.cachedTextHeight=i.cachedPaddingH=null,i.inaccurateSelection=!1,i.maxLine=null,i.maxLineLength=0,i.maxLineChanged=!1,i.wheelDX=i.wheelDY=i.wheelStartX=i.wheelStartY=null,i.shift=!1,i.selForContextMenu=null}function i(e){e.doc.mode=t.getMode(e.options,e.doc.modeOption),n(e)}function n(t){t.doc.iter(function(t){t.stateAfter&&(t.stateAfter=null),t.styles&&(t.styles=null)}),t.doc.frontier=t.doc.first,kt(t,100),t.state.modeGen++,t.curOp&&pe(t)}function s(t){t.options.lineWrapping?(Es(t.display.wrapper,"CodeMirror-wrap"),t.display.sizer.style.minWidth=""):(Ts(t.display.wrapper,"CodeMirror-wrap"),f(t)),r(t),pe(t),Rt(t),setTimeout(function(){v(t)},100)}function o(t){var e=Qt(t.display),i=t.options.lineWrapping,n=i&&Math.max(5,t.display.scroller.clientWidth/Jt(t.display)-3);return function(s){if(en(t.doc,s))return 0;var o=0;if(s.widgets)for(var r=0;r<s.widgets.length;r++)s.widgets[r].height&&(o+=s.widgets[r].height);return i?o+(Math.ceil(s.text.length/n)||1)*e:o+e}}function r(t){var e=t.doc,i=o(t);e.iter(function(t){var e=i(t);e!=t.height&&Ln(t,e)})}function a(t){var e=qo[t.options.keyMap],i=e.style;t.display.wrapper.className=t.display.wrapper.className.replace(/\s*cm-keymap-\S+/g,"")+(i?" cm-keymap-"+i:"")}function l(t){t.display.wrapper.className=t.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+t.options.theme.replace(/(^|\s)\s*/g," cm-s-"),Rt(t)}function c(t){d(t),pe(t),setTimeout(function(){b(t)},20)}function d(t){var e=t.display.gutters,i=t.options.gutters;_s(e);for(var n=0;n<i.length;++n){var s=i[n],o=e.appendChild(ws("div",null,"CodeMirror-gutter "+s));"CodeMirror-linenumbers"==s&&(t.display.lineGutter=o,o.style.width=(t.display.lineNumWidth||1)+"px")}e.style.display=n?"":"none",h(t)}function h(t){var e=t.display.gutters.offsetWidth;t.display.sizer.style.marginLeft=e+"px",t.display.scrollbarH.style.left=t.options.fixedGutter?e+"px":0}function u(t){if(0==t.height)return 0;for(var e,i=t.text.length,n=t;e=Gi(n);){var s=e.find(0,!0);n=s.from.line,i+=s.from.ch-s.to.ch}for(n=t;e=Ki(n);){var s=e.find(0,!0);i-=n.text.length-s.from.ch,n=s.to.line,i+=n.text.length-s.to.ch}return i}function f(t){var e=t.display,i=t.doc;e.maxLine=Mn(i,i.first),e.maxLineLength=u(e.maxLine),e.maxLineChanged=!0,i.iter(function(t){var i=u(t);i>e.maxLineLength&&(e.maxLineLength=i,e.maxLine=t)})}function p(t){var e=us(t.gutters,"CodeMirror-linenumbers");e==-1&&t.lineNumbers?t.gutters=t.gutters.concat(["CodeMirror-linenumbers"]):e>-1&&!t.lineNumbers&&(t.gutters=t.gutters.slice(0),t.gutters.splice(e,1))}function m(t){return t.display.scroller.clientHeight-t.display.wrapper.clientHeight<fr-3}function g(t){var e=t.display.scroller;return{clientHeight:e.clientHeight,barHeight:t.display.scrollbarV.clientHeight,scrollWidth:e.scrollWidth,clientWidth:e.clientWidth,hScrollbarTakesSpace:m(t),barWidth:t.display.scrollbarH.clientWidth,docHeight:Math.round(t.doc.height+Et(t.display))}}function v(t,e){e||(e=g(t));var i=t.display,n=Is(i.measure),s=e.docHeight+fr,o=e.scrollWidth>e.clientWidth;o&&e.scrollWidth<=e.clientWidth+1&&n>0&&!e.hScrollbarTakesSpace&&(o=!1);var r=s>e.clientHeight;if(r?(i.scrollbarV.style.display="block",i.scrollbarV.style.bottom=o?n+"px":"0",i.scrollbarV.firstChild.style.height=Math.max(0,s-e.clientHeight+(e.barHeight||i.scrollbarV.clientHeight))+"px"):(i.scrollbarV.style.display="",i.scrollbarV.firstChild.style.height="0"),o?(i.scrollbarH.style.display="block",i.scrollbarH.style.right=r?n+"px":"0",i.scrollbarH.firstChild.style.width=e.scrollWidth-e.clientWidth+(e.barWidth||i.scrollbarH.clientWidth)+"px"):(i.scrollbarH.style.display="",i.scrollbarH.firstChild.style.width="0"),o&&r?(i.scrollbarFiller.style.display="block",i.scrollbarFiller.style.height=i.scrollbarFiller.style.width=n+"px"):i.scrollbarFiller.style.display="",o&&t.options.coverGutterNextToScrollbar&&t.options.fixedGutter?(i.gutterFiller.style.display="block",i.gutterFiller.style.height=n+"px",i.gutterFiller.style.width=i.gutters.offsetWidth+"px"):i.gutterFiller.style.display="",!t.state.checkedOverlayScrollbar&&e.clientHeight>0){if(0===n){var a=ho&&!ro?"12px":"18px";i.scrollbarV.style.minWidth=i.scrollbarH.style.minHeight=a;var l=function(e){ts(e)!=i.scrollbarV&&ts(e)!=i.scrollbarH&&ce(t,Ie)(e)};cr(i.scrollbarV,"mousedown",l),cr(i.scrollbarH,"mousedown",l)}t.state.checkedOverlayScrollbar=!0}}function y(t,e,i){var n=i&&null!=i.top?Math.max(0,i.top):t.scroller.scrollTop;n=Math.floor(n-Tt(t));var s=i&&null!=i.bottom?i.bottom:n+t.wrapper.clientHeight,o=On(e,n),r=On(e,s);if(i&&i.ensure){var a=i.ensure.from.line,l=i.ensure.to.line;if(a<o)return{from:a,to:On(e,$n(Mn(e,a))+t.wrapper.clientHeight)};if(Math.min(l,e.lastLine())>=r)return{from:On(e,$n(Mn(e,l))-t.wrapper.clientHeight),to:l}}return{from:o,to:Math.max(r,o+1)}}function b(t){var e=t.display,i=e.view;if(e.alignWidgets||e.gutters.firstChild&&t.options.fixedGutter){for(var n=k(e)-e.scroller.scrollLeft+t.doc.scrollLeft,s=e.gutters.offsetWidth,o=n+"px",r=0;r<i.length;r++)if(!i[r].hidden){t.options.fixedGutter&&i[r].gutter&&(i[r].gutter.style.left=o);var a=i[r].alignable;if(a)for(var l=0;l<a.length;l++)a[l].style.left=o}t.options.fixedGutter&&(e.gutters.style.left=n+s+"px")}}function w(t){if(!t.options.lineNumbers)return!1;var e=t.doc,i=_(t.options,e.first+e.size-1),n=t.display;if(i.length!=n.lineNumChars){var s=n.measure.appendChild(ws("div",[ws("div",i)],"CodeMirror-linenumber CodeMirror-gutter-elt")),o=s.firstChild.offsetWidth,r=s.offsetWidth-o;return n.lineGutter.style.width="",n.lineNumInnerWidth=Math.max(o,n.lineGutter.offsetWidth-r),n.lineNumWidth=n.lineNumInnerWidth+r,n.lineNumChars=n.lineNumInnerWidth?i.length:-1,n.lineGutter.style.width=n.lineNumWidth+"px",h(t),!0}return!1}function _(t,e){return String(t.lineNumberFormatter(e+t.firstLineNumber))}function k(t){return t.scroller.getBoundingClientRect().left-t.sizer.getBoundingClientRect().left}function x(t,e,i){var n=t.display;this.viewport=e,this.visible=y(n,t.doc,e),this.editorIsHidden=!n.wrapper.offsetWidth,this.wrapperHeight=n.wrapper.clientHeight,this.oldViewFrom=n.viewFrom,this.oldViewTo=n.viewTo,this.oldScrollerWidth=n.scroller.clientWidth,this.force=i,this.dims=A(t)}function C(t,e){var i=t.display,n=t.doc;if(e.editorIsHidden)return ge(t),!1;if(!e.force&&e.visible.from>=i.viewFrom&&e.visible.to<=i.viewTo&&(null==i.updateLineNumbers||i.updateLineNumbers>=i.viewTo)&&0==we(t))return!1;w(t)&&(ge(t),e.dims=A(t));var s=n.first+n.size,o=Math.max(e.visible.from-t.options.viewportMargin,n.first),r=Math.min(s,e.visible.to+t.options.viewportMargin);i.viewFrom<o&&o-i.viewFrom<20&&(o=Math.max(n.first,i.viewFrom)),i.viewTo>r&&i.viewTo-r<20&&(r=Math.min(s,i.viewTo)),vo&&(o=Zi(t.doc,o),r=tn(t.doc,r));var a=o!=i.viewFrom||r!=i.viewTo||i.lastSizeC!=e.wrapperHeight;be(t,o,r),i.viewOffset=$n(Mn(t.doc,i.viewFrom)),t.display.mover.style.top=i.viewOffset+"px";var l=we(t);if(!a&&0==l&&!e.force&&(null==i.updateLineNumbers||i.updateLineNumbers>=i.viewTo))return!1;var c=Cs();return l>4&&(i.lineDiv.style.display="none"),I(t,i.updateLineNumbers,e.dims),l>4&&(i.lineDiv.style.display=""),c&&Cs()!=c&&c.offsetHeight&&c.focus(),_s(i.cursorDiv),_s(i.selectionDiv),a&&(i.lastSizeC=e.wrapperHeight,kt(t,400)),i.updateLineNumbers=null,!0}function S(t,e){for(var i=e.force,n=e.viewport,s=!0;;s=!1){if(s&&t.options.lineWrapping&&e.oldScrollerWidth!=t.display.scroller.clientWidth)i=!0;else if(i=!1,n&&null!=n.top&&(n={top:Math.min(t.doc.height+Et(t.display)-fr-t.display.scroller.clientHeight,n.top)}),e.visible=y(t.display,t.doc,n),e.visible.from>=t.display.viewFrom&&e.visible.to<=t.display.viewTo)break;if(!C(t,e))break;P(t);var o=g(t);yt(t),E(t,o),v(t,o)}is(t,"update",t),(t.display.viewFrom!=e.oldViewFrom||t.display.viewTo!=e.oldViewTo)&&is(t,"viewportChange",t,t.display.viewFrom,t.display.viewTo)}function T(t,e){var i=new x(t,e);if(C(t,i)){P(t),S(t,i);var n=g(t);yt(t),E(t,n),v(t,n)}}function E(t,e){t.display.sizer.style.minHeight=t.display.heightForcer.style.top=e.docHeight+"px",t.display.gutters.style.height=Math.max(e.docHeight,e.clientHeight-fr)+"px"}function D(t,e){t.display.sizer.offsetWidth+t.display.gutters.offsetWidth<t.display.scroller.clientWidth-1&&(t.display.sizer.style.minHeight=t.display.heightForcer.style.top="0px",t.display.gutters.style.height=e.docHeight+"px")}function P(t){for(var e=t.display,i=e.lineDiv.offsetTop,n=0;n<e.view.length;n++){var s,o=e.view[n];if(!o.hidden){if(Js&&Zs<8){var r=o.node.offsetTop+o.node.offsetHeight;s=r-i,i=r}else{var a=o.node.getBoundingClientRect();s=a.bottom-a.top}var l=o.line.height-s;if(s<2&&(s=Qt(e)),(l>.001||l<-.001)&&(Ln(o.line,s),M(o.line),o.rest))for(var c=0;c<o.rest.length;c++)M(o.rest[c])}}}function M(t){if(t.widgets)for(var e=0;e<t.widgets.length;++e)t.widgets[e].height=t.widgets[e].node.offsetHeight}function A(t){for(var e=t.display,i={},n={},s=e.gutters.clientLeft,o=e.gutters.firstChild,r=0;o;o=o.nextSibling,++r)i[t.options.gutters[r]]=o.offsetLeft+o.clientLeft+s,n[t.options.gutters[r]]=o.clientWidth;return{fixedPos:k(e),gutterTotalWidth:e.gutters.offsetWidth,gutterLeft:i,gutterWidth:n,wrapperWidth:e.wrapper.clientWidth}}function I(t,e,i){function n(e){var i=e.nextSibling;return to&&ho&&t.display.currentWheelTarget==e?e.style.display="none":e.parentNode.removeChild(e),i}for(var s=t.display,o=t.options.lineNumbers,r=s.lineDiv,a=r.firstChild,l=s.view,c=s.viewFrom,d=0;d<l.length;d++){var h=l[d];if(!h.hidden)if(h.node){for(;a!=h.node;)a=n(a);var u=o&&null!=e&&e<=c&&h.lineNumber;h.changes&&(us(h.changes,"gutter")>-1&&(u=!1),L(t,h,c,i)),u&&(_s(h.lineNumber),h.lineNumber.appendChild(document.createTextNode(_(t.options,c)))),a=h.node.nextSibling}else{var f=z(t,h,c,i);r.insertBefore(f,a)}c+=h.size}for(;a;)a=n(a)}function L(t,e,i,n){for(var s=0;s<e.changes.length;s++){var o=e.changes[s];"text"==o?N(t,e):"gutter"==o?H(t,e,i,n):"class"==o?F(e):"widget"==o&&R(e,n)}e.changes=null}function j(t){return t.node==t.text&&(t.node=ws("div",null,null,"position: relative"),t.text.parentNode&&t.text.parentNode.replaceChild(t.node,t.text),t.node.appendChild(t.text),Js&&Zs<8&&(t.node.style.zIndex=2)),t.node}function O(t){var e=t.bgClass?t.bgClass+" "+(t.line.bgClass||""):t.line.bgClass;if(e&&(e+=" CodeMirror-linebackground"),t.background)e?t.background.className=e:(t.background.parentNode.removeChild(t.background),t.background=null);else if(e){var i=j(t);t.background=i.insertBefore(ws("div",null,e),i.firstChild)}}function $(t,e){var i=t.display.externalMeasured;return i&&i.line==e.line?(t.display.externalMeasured=null,e.measure=i.measure,i.built):vn(t,e)}function N(t,e){var i=e.text.className,n=$(t,e);e.text==e.node&&(e.node=n.pre),e.text.parentNode.replaceChild(n.pre,e.text),e.text=n.pre,n.bgClass!=e.bgClass||n.textClass!=e.textClass?(e.bgClass=n.bgClass,e.textClass=n.textClass,F(e)):i&&(e.text.className=i)}function F(t){O(t),t.line.wrapClass?j(t).className=t.line.wrapClass:t.node!=t.text&&(t.node.className="");var e=t.textClass?t.textClass+" "+(t.line.textClass||""):t.line.textClass;t.text.className=e||""}
function H(t,e,i,n){e.gutter&&(e.node.removeChild(e.gutter),e.gutter=null);var s=e.line.gutterMarkers;if(t.options.lineNumbers||s){var o=j(e),r=e.gutter=o.insertBefore(ws("div",null,"CodeMirror-gutter-wrapper","position: absolute; left: "+(t.options.fixedGutter?n.fixedPos:-n.gutterTotalWidth)+"px"),e.text);if(t.options.lineNumbers&&(!s||!s["CodeMirror-linenumbers"])&&(e.lineNumber=r.appendChild(ws("div",_(t.options,i),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+n.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+t.display.lineNumInnerWidth+"px"))),s)for(var a=0;a<t.options.gutters.length;++a){var l=t.options.gutters[a],c=s.hasOwnProperty(l)&&s[l];c&&r.appendChild(ws("div",[c],"CodeMirror-gutter-elt","left: "+n.gutterLeft[l]+"px; width: "+n.gutterWidth[l]+"px"))}}}function R(t,e){t.alignable&&(t.alignable=null);for(var i,n=t.node.firstChild;n;n=i){var i=n.nextSibling;"CodeMirror-linewidget"==n.className&&t.node.removeChild(n)}B(t,e)}function z(t,e,i,n){var s=$(t,e);return e.text=e.node=s.pre,s.bgClass&&(e.bgClass=s.bgClass),s.textClass&&(e.textClass=s.textClass),F(e),H(t,e,i,n),B(e,n),e.node}function B(t,e){if(W(t.line,t,e,!0),t.rest)for(var i=0;i<t.rest.length;i++)W(t.rest[i],t,e,!1)}function W(t,e,i,n){if(t.widgets)for(var s=j(e),o=0,r=t.widgets;o<r.length;++o){var a=r[o],l=ws("div",[a.node],"CodeMirror-linewidget");a.handleMouseEvents||(l.ignoreEvents=!0),q(a,l,e,i),n&&a.above?s.insertBefore(l,e.gutter||e.text):s.appendChild(l),is(a,"redraw")}}function q(t,e,i,n){if(t.noHScroll){(i.alignable||(i.alignable=[])).push(e);var s=n.wrapperWidth;e.style.left=n.fixedPos+"px",t.coverGutter||(s-=n.gutterTotalWidth,e.style.paddingLeft=n.gutterTotalWidth+"px"),e.style.width=s+"px"}t.coverGutter&&(e.style.zIndex=5,e.style.position="relative",t.noHScroll||(e.style.marginLeft=-n.gutterTotalWidth+"px"))}function U(t){return yo(t.line,t.ch)}function V(t,e){return bo(t,e)<0?e:t}function Y(t,e){return bo(t,e)<0?t:e}function G(t,e){this.ranges=t,this.primIndex=e}function K(t,e){this.anchor=t,this.head=e}function X(t,e){var i=t[e];t.sort(function(t,e){return bo(t.from(),e.from())}),e=us(t,i);for(var n=1;n<t.length;n++){var s=t[n],o=t[n-1];if(bo(o.to(),s.from())>=0){var r=Y(o.from(),s.from()),a=V(o.to(),s.to()),l=o.empty()?s.from()==s.head:o.from()==o.head;n<=e&&--e,t.splice(--n,2,new K(l?a:r,l?r:a))}}return new G(t,e)}function Q(t,e){return new G([new K(t,e||t)],0)}function J(t,e){return Math.max(t.first,Math.min(e,t.first+t.size-1))}function Z(t,e){if(e.line<t.first)return yo(t.first,0);var i=t.first+t.size-1;return e.line>i?yo(i,Mn(t,i).text.length):tt(e,Mn(t,e.line).text.length)}function tt(t,e){var i=t.ch;return null==i||i>e?yo(t.line,e):i<0?yo(t.line,0):t}function et(t,e){return e>=t.first&&e<t.first+t.size}function it(t,e){for(var i=[],n=0;n<e.length;n++)i[n]=Z(t,e[n]);return i}function nt(t,e,i,n){if(t.cm&&t.cm.display.shift||t.extend){var s=e.anchor;if(n){var o=bo(i,s)<0;o!=bo(n,s)<0?(s=i,i=n):o!=bo(i,n)<0&&(i=n)}return new K(s,i)}return new K(n||i,i)}function st(t,e,i,n){dt(t,new G([nt(t,t.sel.primary(),e,i)],0),n)}function ot(t,e,i){for(var n=[],s=0;s<t.sel.ranges.length;s++)n[s]=nt(t,t.sel.ranges[s],e[s],null);var o=X(n,t.sel.primIndex);dt(t,o,i)}function rt(t,e,i,n){var s=t.sel.ranges.slice(0);s[e]=i,dt(t,X(s,t.sel.primIndex),n)}function at(t,e,i,n){dt(t,Q(e,i),n)}function lt(t,e){var i={ranges:e.ranges,update:function(e){this.ranges=[];for(var i=0;i<e.length;i++)this.ranges[i]=new K(Z(t,e[i].anchor),Z(t,e[i].head))}};return hr(t,"beforeSelectionChange",t,i),t.cm&&hr(t.cm,"beforeSelectionChange",t.cm,i),i.ranges!=e.ranges?X(i.ranges,i.ranges.length-1):e}function ct(t,e,i){var n=t.history.done,s=hs(n);s&&s.ranges?(n[n.length-1]=e,ht(t,e,i)):dt(t,e,i)}function dt(t,e,i){ht(t,e,i),qn(t,t.sel,t.cm?t.cm.curOp.id:NaN,i)}function ht(t,e,i){(rs(t,"beforeSelectionChange")||t.cm&&rs(t.cm,"beforeSelectionChange"))&&(e=lt(t,e));var n=i&&i.bias||(bo(e.primary().head,t.sel.primary().head)<0?-1:1);ut(t,pt(t,e,n,!0)),(!i||i.scroll!==!1)&&t.cm&&yi(t.cm)}function ut(t,e){e.equals(t.sel)||(t.sel=e,t.cm&&(t.cm.curOp.updateInput=t.cm.curOp.selectionChanged=!0,os(t.cm)),is(t,"cursorActivity",t))}function ft(t){ut(t,pt(t,t.sel,null,!1),mr)}function pt(t,e,i,n){for(var s,o=0;o<e.ranges.length;o++){var r=e.ranges[o],a=mt(t,r.anchor,i,n),l=mt(t,r.head,i,n);(s||a!=r.anchor||l!=r.head)&&(s||(s=e.ranges.slice(0,o)),s[o]=new K(a,l))}return s?X(s,e.primIndex):e}function mt(t,e,i,n){var s=!1,o=e,r=i||1;t.cantEdit=!1;t:for(;;){var a=Mn(t,o.line);if(a.markedSpans)for(var l=0;l<a.markedSpans.length;++l){var c=a.markedSpans[l],d=c.marker;if((null==c.from||(d.inclusiveLeft?c.from<=o.ch:c.from<o.ch))&&(null==c.to||(d.inclusiveRight?c.to>=o.ch:c.to>o.ch))){if(n&&(hr(d,"beforeCursorEnter"),d.explicitlyCleared)){if(!a.markedSpans)break;--l;continue}if(!d.atomic)continue;var h=d.find(r<0?-1:1);if(0==bo(h,o)&&(h.ch+=r,h.ch<0?h=h.line>t.first?Z(t,yo(h.line-1)):null:h.ch>a.text.length&&(h=h.line<t.first+t.size-1?yo(h.line+1,0):null),!h)){if(s)return n?(t.cantEdit=!0,yo(t.first,0)):mt(t,e,i,!0);s=!0,h=e,r=-r}o=h;continue t}}return o}}function gt(t){for(var e=t.display,i=t.doc,n={},s=n.cursors=document.createDocumentFragment(),o=n.selection=document.createDocumentFragment(),r=0;r<i.sel.ranges.length;r++){var a=i.sel.ranges[r],l=a.empty();(l||t.options.showCursorWhenSelecting)&&bt(t,a,s),l||wt(t,a,o)}if(t.options.moveInputWithCursor){var c=Vt(t,i.sel.primary().head,"div"),d=e.wrapper.getBoundingClientRect(),h=e.lineDiv.getBoundingClientRect();n.teTop=Math.max(0,Math.min(e.wrapper.clientHeight-10,c.top+h.top-d.top)),n.teLeft=Math.max(0,Math.min(e.wrapper.clientWidth-10,c.left+h.left-d.left))}return n}function vt(t,e){ks(t.display.cursorDiv,e.cursors),ks(t.display.selectionDiv,e.selection),null!=e.teTop&&(t.display.inputDiv.style.top=e.teTop+"px",t.display.inputDiv.style.left=e.teLeft+"px")}function yt(t){vt(t,gt(t))}function bt(t,e,i){var n=Vt(t,e.head,"div",null,null,!t.options.singleCursorHeightPerLine),s=i.appendChild(ws("div","\xa0","CodeMirror-cursor"));if(s.style.left=n.left+"px",s.style.top=n.top+"px",s.style.height=Math.max(0,n.bottom-n.top)*t.options.cursorHeight+"px",n.other){var o=i.appendChild(ws("div","\xa0","CodeMirror-cursor CodeMirror-secondarycursor"));o.style.display="",o.style.left=n.other.left+"px",o.style.top=n.other.top+"px",o.style.height=.85*(n.other.bottom-n.other.top)+"px"}}function wt(t,e,i){function n(t,e,i,n){e<0&&(e=0),e=Math.round(e),n=Math.round(n),a.appendChild(ws("div",null,"CodeMirror-selected","position: absolute; left: "+t+"px; top: "+e+"px; width: "+(null==i?d-t:i)+"px; height: "+(n-e)+"px"))}function s(e,i,s){function o(i,n){return Ut(t,yo(e,i),"div",h,n)}var a,l,h=Mn(r,e),u=h.text.length;return $s(Nn(h),i||0,null==s?u:s,function(t,e,r){var h,f,p,m=o(t,"left");if(t==e)h=m,f=p=m.left;else{if(h=o(e-1,"right"),"rtl"==r){var g=m;m=h,h=g}f=m.left,p=h.right}null==i&&0==t&&(f=c),h.top-m.top>3&&(n(f,m.top,null,m.bottom),f=c,m.bottom<h.top&&n(f,m.bottom,null,h.top)),null==s&&e==u&&(p=d),(!a||m.top<a.top||m.top==a.top&&m.left<a.left)&&(a=m),(!l||h.bottom>l.bottom||h.bottom==l.bottom&&h.right>l.right)&&(l=h),f<c+1&&(f=c),n(f,h.top,p-f,h.bottom)}),{start:a,end:l}}var o=t.display,r=t.doc,a=document.createDocumentFragment(),l=Dt(t.display),c=l.left,d=o.lineSpace.offsetWidth-l.right,h=e.from(),u=e.to();if(h.line==u.line)s(h.line,h.ch,u.ch);else{var f=Mn(r,h.line),p=Mn(r,u.line),m=Qi(f)==Qi(p),g=s(h.line,h.ch,m?f.text.length+1:null).end,v=s(u.line,m?0:null,u.ch).start;m&&(g.top<v.top-2?(n(g.right,g.top,null,g.bottom),n(c,v.top,v.left,v.bottom)):n(g.right,g.top,v.left-g.right,g.bottom)),g.bottom<v.top&&n(c,g.bottom,null,v.top)}i.appendChild(a)}function _t(t){if(t.state.focused){var e=t.display;clearInterval(e.blinker);var i=!0;e.cursorDiv.style.visibility="",t.options.cursorBlinkRate>0?e.blinker=setInterval(function(){e.cursorDiv.style.visibility=(i=!i)?"":"hidden"},t.options.cursorBlinkRate):t.options.cursorBlinkRate<0&&(e.cursorDiv.style.visibility="hidden")}}function kt(t,e){t.doc.mode.startState&&t.doc.frontier<t.display.viewTo&&t.state.highlight.set(e,gs(xt,t))}function xt(t){var e=t.doc;if(e.frontier<e.first&&(e.frontier=e.first),!(e.frontier>=t.display.viewTo)){var i=+new Date+t.options.workTime,n=zo(e.mode,St(t,e.frontier)),s=[];e.iter(e.frontier,Math.min(e.first+e.size,t.display.viewTo+500),function(o){if(e.frontier>=t.display.viewFrom){var r=o.styles,a=fn(t,o,n,!0);o.styles=a.styles;var l=o.styleClasses,c=a.classes;c?o.styleClasses=c:l&&(o.styleClasses=null);for(var d=!r||r.length!=o.styles.length||l!=c&&(!l||!c||l.bgClass!=c.bgClass||l.textClass!=c.textClass),h=0;!d&&h<r.length;++h)d=r[h]!=o.styles[h];d&&s.push(e.frontier),o.stateAfter=zo(e.mode,n)}else mn(t,o.text,n),o.stateAfter=e.frontier%5==0?zo(e.mode,n):null;if(++e.frontier,+new Date>i)return kt(t,t.options.workDelay),!0}),s.length&&le(t,function(){for(var e=0;e<s.length;e++)me(t,s[e],"text")})}}function Ct(t,e,i){for(var n,s,o=t.doc,r=i?-1:e-(t.doc.mode.innerMode?1e3:100),a=e;a>r;--a){if(a<=o.first)return o.first;var l=Mn(o,a-1);if(l.stateAfter&&(!i||a<=o.frontier))return a;var c=yr(l.text,null,t.options.tabSize);(null==s||n>c)&&(s=a-1,n=c)}return s}function St(t,e,i){var n=t.doc,s=t.display;if(!n.mode.startState)return!0;var o=Ct(t,e,i),r=o>n.first&&Mn(n,o-1).stateAfter;return r=r?zo(n.mode,r):Bo(n.mode),n.iter(o,e,function(i){mn(t,i.text,r);var a=o==e-1||o%5==0||o>=s.viewFrom&&o<s.viewTo;i.stateAfter=a?zo(n.mode,r):null,++o}),i&&(n.frontier=o),r}function Tt(t){return t.lineSpace.offsetTop}function Et(t){return t.mover.offsetHeight-t.lineSpace.offsetHeight}function Dt(t){if(t.cachedPaddingH)return t.cachedPaddingH;var e=ks(t.measure,ws("pre","x")),i=window.getComputedStyle?window.getComputedStyle(e):e.currentStyle,n={left:parseInt(i.paddingLeft),right:parseInt(i.paddingRight)};return!isNaN(n.left)&&!isNaN(n.right)&&(t.cachedPaddingH=n),n}function Pt(t,e,i){var n=t.options.lineWrapping,s=n&&t.display.scroller.clientWidth;if(!e.measure.heights||n&&e.measure.width!=s){var o=e.measure.heights=[];if(n){e.measure.width=s;for(var r=e.text.firstChild.getClientRects(),a=0;a<r.length-1;a++){var l=r[a],c=r[a+1];Math.abs(l.bottom-c.bottom)>2&&o.push((l.bottom+c.top)/2-i.top)}}o.push(i.bottom-i.top)}}function Mt(t,e,i){if(t.line==e)return{map:t.measure.map,cache:t.measure.cache};for(var n=0;n<t.rest.length;n++)if(t.rest[n]==e)return{map:t.measure.maps[n],cache:t.measure.caches[n]};for(var n=0;n<t.rest.length;n++)if(jn(t.rest[n])>i)return{map:t.measure.maps[n],cache:t.measure.caches[n],before:!0}}function At(t,e){e=Qi(e);var i=jn(e),n=t.display.externalMeasured=new ue(t.doc,e,i);n.lineN=i;var s=n.built=vn(t,n);return n.text=s.pre,ks(t.display.lineMeasure,s.pre),n}function It(t,e,i,n){return Ot(t,jt(t,e),i,n)}function Lt(t,e){if(e>=t.display.viewFrom&&e<t.display.viewTo)return t.display.view[ve(t,e)];var i=t.display.externalMeasured;return i&&e>=i.lineN&&e<i.lineN+i.size?i:void 0}function jt(t,e){var i=jn(e),n=Lt(t,i);n&&!n.text?n=null:n&&n.changes&&L(t,n,i,A(t)),n||(n=At(t,e));var s=Mt(n,e,i);return{line:e,view:n,rect:null,map:s.map,cache:s.cache,before:s.before,hasHeights:!1}}function Ot(t,e,i,n,s){e.before&&(i=-1);var o,r=i+(n||"");return e.cache.hasOwnProperty(r)?o=e.cache[r]:(e.rect||(e.rect=e.view.text.getBoundingClientRect()),e.hasHeights||(Pt(t,e.view,e.rect),e.hasHeights=!0),o=$t(t,e,i,n),o.bogus||(e.cache[r]=o)),{left:o.left,right:o.right,top:s?o.rtop:o.top,bottom:s?o.rbottom:o.bottom}}function $t(t,e,i,n){for(var s,o,r,a,l=e.map,c=0;c<l.length;c+=3){var d=l[c],h=l[c+1];if(i<d?(o=0,r=1,a="left"):i<h?(o=i-d,r=o+1):(c==l.length-3||i==h&&l[c+3]>i)&&(r=h-d,o=r-1,i>=h&&(a="right")),null!=o){if(s=l[c+2],d==h&&n==(s.insertLeft?"left":"right")&&(a=n),"left"==n&&0==o)for(;c&&l[c-2]==l[c-3]&&l[c-1].insertLeft;)s=l[(c-=3)+2],a="left";if("right"==n&&o==h-d)for(;c<l.length-3&&l[c+3]==l[c+4]&&!l[c+5].insertLeft;)s=l[(c+=3)+2],a="right";break}}var u;if(3==s.nodeType){for(var c=0;c<4;c++){for(;o&&bs(e.line.text.charAt(d+o));)--o;for(;d+r<h&&bs(e.line.text.charAt(d+r));)++r;if(Js&&Zs<9&&0==o&&r==h-d)u=s.parentNode.getBoundingClientRect();else if(Js&&t.options.lineWrapping){var f=_r(s,o,r).getClientRects();u=f.length?f["right"==n?f.length-1:0]:xo}else u=_r(s,o,r).getBoundingClientRect()||xo;if(u.left||u.right||0==o)break;r=o,o-=1,a="right"}Js&&Zs<11&&(u=Nt(t.display.measure,u))}else{o>0&&(a=n="right");var f;u=t.options.lineWrapping&&(f=s.getClientRects()).length>1?f["right"==n?f.length-1:0]:s.getBoundingClientRect()}if(Js&&Zs<9&&!o&&(!u||!u.left&&!u.right)){var p=s.parentNode.getClientRects()[0];u=p?{left:p.left,right:p.left+Jt(t.display),top:p.top,bottom:p.bottom}:xo}for(var m=u.top-e.rect.top,g=u.bottom-e.rect.top,v=(m+g)/2,y=e.view.measure.heights,c=0;c<y.length-1&&!(v<y[c]);c++);var b=c?y[c-1]:0,w=y[c],_={left:("right"==a?u.right:u.left)-e.rect.left,right:("left"==a?u.left:u.right)-e.rect.left,top:b,bottom:w};return!u.left&&!u.right&&(_.bogus=!0),t.options.singleCursorHeightPerLine||(_.rtop=m,_.rbottom=g),_}function Nt(t,e){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!Os(t))return e;var i=screen.logicalXDPI/screen.deviceXDPI,n=screen.logicalYDPI/screen.deviceYDPI;return{left:e.left*i,right:e.right*i,top:e.top*n,bottom:e.bottom*n}}function Ft(t){if(t.measure&&(t.measure.cache={},t.measure.heights=null,t.rest))for(var e=0;e<t.rest.length;e++)t.measure.caches[e]={}}function Ht(t){t.display.externalMeasure=null,_s(t.display.lineMeasure);for(var e=0;e<t.display.view.length;e++)Ft(t.display.view[e])}function Rt(t){Ht(t),t.display.cachedCharWidth=t.display.cachedTextHeight=t.display.cachedPaddingH=null,t.options.lineWrapping||(t.display.maxLineChanged=!0),t.display.lineNumChars=null}function zt(){return window.pageXOffset||(document.documentElement||document.body).scrollLeft}function Bt(){return window.pageYOffset||(document.documentElement||document.body).scrollTop}function Wt(t,e,i,n){if(e.widgets)for(var s=0;s<e.widgets.length;++s)if(e.widgets[s].above){var o=on(e.widgets[s]);i.top+=o,i.bottom+=o}if("line"==n)return i;n||(n="local");var r=$n(e);if("local"==n?r+=Tt(t.display):r-=t.display.viewOffset,"page"==n||"window"==n){var a=t.display.lineSpace.getBoundingClientRect();r+=a.top+("window"==n?0:Bt());var l=a.left+("window"==n?0:zt());i.left+=l,i.right+=l}return i.top+=r,i.bottom+=r,i}function qt(t,e,i){if("div"==i)return e;var n=e.left,s=e.top;if("page"==i)n-=zt(),s-=Bt();else if("local"==i||!i){var o=t.display.sizer.getBoundingClientRect();n+=o.left,s+=o.top}var r=t.display.lineSpace.getBoundingClientRect();return{left:n-r.left,top:s-r.top}}function Ut(t,e,i,n,s){return n||(n=Mn(t.doc,e.line)),Wt(t,n,It(t,n,e.ch,s),i)}function Vt(t,e,i,n,s,o){function r(e,r){var a=Ot(t,s,e,r?"right":"left",o);return r?a.left=a.right:a.right=a.left,Wt(t,n,a,i)}function a(t,e){var i=l[e],n=i.level%2;return t==Ns(i)&&e&&i.level<l[e-1].level?(i=l[--e],t=Fs(i)-(i.level%2?0:1),n=!0):t==Fs(i)&&e<l.length-1&&i.level<l[e+1].level&&(i=l[++e],t=Ns(i)-i.level%2,n=!1),n&&t==i.to&&t>i.from?r(t-1):r(t,n)}n=n||Mn(t.doc,e.line),s||(s=jt(t,n));var l=Nn(n),c=e.ch;if(!l)return r(c);var d=Us(l,c),h=a(c,d);return null!=Or&&(h.other=a(c,Or)),h}function Yt(t,e){var i=0,e=Z(t.doc,e);t.options.lineWrapping||(i=Jt(t.display)*e.ch);var n=Mn(t.doc,e.line),s=$n(n)+Tt(t.display);return{left:i,right:i,top:s,bottom:s+n.height}}function Gt(t,e,i,n){var s=yo(t,e);return s.xRel=n,i&&(s.outside=!0),s}function Kt(t,e,i){var n=t.doc;if(i+=t.display.viewOffset,i<0)return Gt(n.first,0,!0,-1);var s=On(n,i),o=n.first+n.size-1;if(s>o)return Gt(n.first+n.size-1,Mn(n,o).text.length,!0,1);e<0&&(e=0);for(var r=Mn(n,s);;){var a=Xt(t,r,s,e,i),l=Ki(r),c=l&&l.find(0,!0);if(!l||!(a.ch>c.from.ch||a.ch==c.from.ch&&a.xRel>0))return a;s=jn(r=c.to.line)}}function Xt(t,e,i,n,s){function o(n){var s=Vt(t,yo(i,n),"line",e,c);return a=!0,r>s.bottom?s.left-l:r<s.top?s.left+l:(a=!1,s.left)}var r=s-$n(e),a=!1,l=2*t.display.wrapper.clientWidth,c=jt(t,e),d=Nn(e),h=e.text.length,u=Hs(e),f=Rs(e),p=o(u),m=a,g=o(f),v=a;if(n>g)return Gt(i,f,v,1);for(;;){if(d?f==u||f==Ys(e,u,1):f-u<=1){for(var y=n<p||n-p<=g-n?u:f,b=n-(y==u?p:g);bs(e.text.charAt(y));)++y;var w=Gt(i,y,y==u?m:v,b<-1?-1:b>1?1:0);return w}var _=Math.ceil(h/2),k=u+_;if(d){k=u;for(var x=0;x<_;++x)k=Ys(e,k,1)}var C=o(k);C>n?(f=k,g=C,(v=a)&&(g+=1e3),h=_):(u=k,p=C,m=a,h-=_)}}function Qt(t){if(null!=t.cachedTextHeight)return t.cachedTextHeight;if(null==wo){wo=ws("pre");for(var e=0;e<49;++e)wo.appendChild(document.createTextNode("x")),wo.appendChild(ws("br"));wo.appendChild(document.createTextNode("x"))}ks(t.measure,wo);var i=wo.offsetHeight/50;return i>3&&(t.cachedTextHeight=i),_s(t.measure),i||1}function Jt(t){if(null!=t.cachedCharWidth)return t.cachedCharWidth;var e=ws("span","xxxxxxxxxx"),i=ws("pre",[e]);ks(t.measure,i);var n=e.getBoundingClientRect(),s=(n.right-n.left)/10;return s>2&&(t.cachedCharWidth=s),s||10}function Zt(t){t.curOp={cm:t,viewChanged:!1,startHeight:t.doc.height,forceUpdate:!1,updateInput:null,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,id:++So},Co?Co.ops.push(t.curOp):t.curOp.ownsGroup=Co={ops:[t.curOp],delayedCallbacks:[]}}function te(t){var e=t.delayedCallbacks,i=0;do{for(;i<e.length;i++)e[i]();for(var n=0;n<t.ops.length;n++){var s=t.ops[n];if(s.cursorActivityHandlers)for(;s.cursorActivityCalled<s.cursorActivityHandlers.length;)s.cursorActivityHandlers[s.cursorActivityCalled++](s.cm)}}while(i<e.length)}function ee(t){var e=t.curOp,i=e.ownsGroup;if(i)try{te(i)}finally{Co=null;for(var n=0;n<i.ops.length;n++)i.ops[n].cm.curOp=null;ie(i)}}function ie(t){for(var e=t.ops,i=0;i<e.length;i++)ne(e[i]);for(var i=0;i<e.length;i++)se(e[i]);for(var i=0;i<e.length;i++)oe(e[i]);for(var i=0;i<e.length;i++)re(e[i]);for(var i=0;i<e.length;i++)ae(e[i])}function ne(t){var e=t.cm,i=e.display;t.updateMaxLine&&f(e),t.mustUpdate=t.viewChanged||t.forceUpdate||null!=t.scrollTop||t.scrollToPos&&(t.scrollToPos.from.line<i.viewFrom||t.scrollToPos.to.line>=i.viewTo)||i.maxLineChanged&&e.options.lineWrapping,t.update=t.mustUpdate&&new x(e,t.mustUpdate&&{top:t.scrollTop,ensure:t.scrollToPos},t.forceUpdate)}function se(t){t.updatedDisplay=t.mustUpdate&&C(t.cm,t.update)}function oe(t){var e=t.cm,i=e.display;t.updatedDisplay&&P(e),t.barMeasure=g(e),i.maxLineChanged&&!e.options.lineWrapping&&(t.adjustWidthTo=It(e,i.maxLine,i.maxLine.text.length).left+3,t.maxScrollLeft=Math.max(0,i.sizer.offsetLeft+t.adjustWidthTo+fr-i.scroller.clientWidth)),(t.updatedDisplay||t.selectionChanged)&&(t.newSelectionNodes=gt(e))}function re(t){var e=t.cm;null!=t.adjustWidthTo&&(e.display.sizer.style.minWidth=t.adjustWidthTo+"px",t.maxScrollLeft<e.doc.scrollLeft&&ze(e,Math.min(e.display.scroller.scrollLeft,t.maxScrollLeft),!0),e.display.maxLineChanged=!1),t.newSelectionNodes&&vt(e,t.newSelectionNodes),t.updatedDisplay&&E(e,t.barMeasure),(t.updatedDisplay||t.startHeight!=e.doc.height)&&v(e,t.barMeasure),t.selectionChanged&&_t(e),e.state.focused&&t.updateInput&&Ce(e,t.typing)}function ae(t){var e=t.cm,i=e.display,n=e.doc;if(null!=t.adjustWidthTo&&Math.abs(t.barMeasure.scrollWidth-e.display.scroller.scrollWidth)>1&&v(e),t.updatedDisplay&&S(e,t.update),null!=i.wheelStartX&&(null!=t.scrollTop||null!=t.scrollLeft||t.scrollToPos)&&(i.wheelStartX=i.wheelStartY=null),null!=t.scrollTop&&(i.scroller.scrollTop!=t.scrollTop||t.forceScroll)){var s=Math.max(0,Math.min(i.scroller.scrollHeight-i.scroller.clientHeight,t.scrollTop));i.scroller.scrollTop=i.scrollbarV.scrollTop=n.scrollTop=s}if(null!=t.scrollLeft&&(i.scroller.scrollLeft!=t.scrollLeft||t.forceScroll)){var o=Math.max(0,Math.min(i.scroller.scrollWidth-i.scroller.clientWidth,t.scrollLeft));i.scroller.scrollLeft=i.scrollbarH.scrollLeft=n.scrollLeft=o,b(e)}if(t.scrollToPos){var r=pi(e,Z(n,t.scrollToPos.from),Z(n,t.scrollToPos.to),t.scrollToPos.margin);t.scrollToPos.isCursor&&e.state.focused&&fi(e,r)}var a=t.maybeHiddenMarkers,l=t.maybeUnhiddenMarkers;if(a)for(var c=0;c<a.length;++c)a[c].lines.length||hr(a[c],"hide");if(l)for(var c=0;c<l.length;++c)l[c].lines.length&&hr(l[c],"unhide");i.wrapper.offsetHeight&&(n.scrollTop=e.display.scroller.scrollTop),t.updatedDisplay&&to&&(e.options.lineWrapping&&D(e,t.barMeasure),t.barMeasure.scrollWidth>t.barMeasure.clientWidth&&t.barMeasure.scrollWidth<t.barMeasure.clientWidth+1&&!m(e)&&v(e)),t.changeObjs&&hr(e,"changes",e,t.changeObjs)}function le(t,e){if(t.curOp)return e();Zt(t);try{return e()}finally{ee(t)}}function ce(t,e){return function(){if(t.curOp)return e.apply(t,arguments);Zt(t);try{return e.apply(t,arguments)}finally{ee(t)}}}function de(t){return function(){if(this.curOp)return t.apply(this,arguments);Zt(this);try{return t.apply(this,arguments)}finally{ee(this)}}}function he(t){return function(){var e=this.cm;if(!e||e.curOp)return t.apply(this,arguments);Zt(e);try{return t.apply(this,arguments)}finally{ee(e)}}}function ue(t,e,i){this.line=e,this.rest=Ji(e),this.size=this.rest?jn(hs(this.rest))-i+1:1,this.node=this.text=null,this.hidden=en(t,e)}function fe(t,e,i){for(var n,s=[],o=e;o<i;o=n){var r=new ue(t.doc,Mn(t.doc,o),o);n=o+r.size,s.push(r)}return s}function pe(t,e,i,n){null==e&&(e=t.doc.first),null==i&&(i=t.doc.first+t.doc.size),n||(n=0);var s=t.display;if(n&&i<s.viewTo&&(null==s.updateLineNumbers||s.updateLineNumbers>e)&&(s.updateLineNumbers=e),t.curOp.viewChanged=!0,e>=s.viewTo)vo&&Zi(t.doc,e)<s.viewTo&&ge(t);else if(i<=s.viewFrom)vo&&tn(t.doc,i+n)>s.viewFrom?ge(t):(s.viewFrom+=n,s.viewTo+=n);else if(e<=s.viewFrom&&i>=s.viewTo)ge(t);else if(e<=s.viewFrom){var o=ye(t,i,i+n,1);o?(s.view=s.view.slice(o.index),s.viewFrom=o.lineN,s.viewTo+=n):ge(t)}else if(i>=s.viewTo){var o=ye(t,e,e,-1);o?(s.view=s.view.slice(0,o.index),s.viewTo=o.lineN):ge(t)}else{var r=ye(t,e,e,-1),a=ye(t,i,i+n,1);r&&a?(s.view=s.view.slice(0,r.index).concat(fe(t,r.lineN,a.lineN)).concat(s.view.slice(a.index)),s.viewTo+=n):ge(t)}var l=s.externalMeasured;l&&(i<l.lineN?l.lineN+=n:e<l.lineN+l.size&&(s.externalMeasured=null))}function me(t,e,i){t.curOp.viewChanged=!0;var n=t.display,s=t.display.externalMeasured;if(s&&e>=s.lineN&&e<s.lineN+s.size&&(n.externalMeasured=null),!(e<n.viewFrom||e>=n.viewTo)){var o=n.view[ve(t,e)];if(null!=o.node){var r=o.changes||(o.changes=[]);us(r,i)==-1&&r.push(i)}}}function ge(t){t.display.viewFrom=t.display.viewTo=t.doc.first,t.display.view=[],t.display.viewOffset=0}function ve(t,e){if(e>=t.display.viewTo)return null;if(e-=t.display.viewFrom,e<0)return null;for(var i=t.display.view,n=0;n<i.length;n++)if(e-=i[n].size,e<0)return n}function ye(t,e,i,n){var s,o=ve(t,e),r=t.display.view;if(!vo||i==t.doc.first+t.doc.size)return{index:o,lineN:i};for(var a=0,l=t.display.viewFrom;a<o;a++)l+=r[a].size;if(l!=e){if(n>0){if(o==r.length-1)return null;s=l+r[o].size-e,o++}else s=l-e;e+=s,i+=s}for(;Zi(t.doc,i)!=i;){if(o==(n<0?0:r.length-1))return null;i+=n*r[o-(n<0?1:0)].size,o+=n}return{index:o,lineN:i}}function be(t,e,i){var n=t.display,s=n.view;0==s.length||e>=n.viewTo||i<=n.viewFrom?(n.view=fe(t,e,i),n.viewFrom=e):(n.viewFrom>e?n.view=fe(t,e,n.viewFrom).concat(n.view):n.viewFrom<e&&(n.view=n.view.slice(ve(t,e))),n.viewFrom=e,n.viewTo<i?n.view=n.view.concat(fe(t,n.viewTo,i)):n.viewTo>i&&(n.view=n.view.slice(0,ve(t,i)))),n.viewTo=i}function we(t){for(var e=t.display.view,i=0,n=0;n<e.length;n++){var s=e[n];!s.hidden&&(!s.node||s.changes)&&++i}return i}function _e(t){t.display.pollingFast||t.display.poll.set(t.options.pollInterval,function(){xe(t),t.state.focused&&_e(t)})}function ke(t){function e(){var n=xe(t);n||i?(t.display.pollingFast=!1,_e(t)):(i=!0,t.display.poll.set(60,e))}var i=!1;t.display.pollingFast=!0,t.display.poll.set(20,e)}function xe(t){var e=t.display.input,i=t.display.prevInput,n=t.doc;if(!t.state.focused||Ar(e)&&!i||Ee(t)||t.options.disableInput)return!1;t.state.pasteIncoming&&t.state.fakedLastChar&&(e.value=e.value.substring(0,e.value.length-1),t.state.fakedLastChar=!1);var s=e.value;if(s==i&&!t.somethingSelected())return!1;if(Js&&Zs>=9&&t.display.inputHasSelection===s||ho&&/[\uf700-\uf7ff]/.test(s))return Ce(t),!1;var o=!t.curOp;o&&Zt(t),t.display.shift=!1,8203==s.charCodeAt(0)&&n.sel==t.display.selForContextMenu&&!i&&(i="\u200b");for(var r=0,a=Math.min(i.length,s.length);r<a&&i.charCodeAt(r)==s.charCodeAt(r);)++r;var l=s.slice(r),c=Mr(l),d=null;t.state.pasteIncoming&&n.sel.ranges.length>1&&(To&&To.join("\n")==l?d=n.sel.ranges.length%To.length==0&&fs(To,Mr):c.length==n.sel.ranges.length&&(d=fs(c,function(t){return[t]})));for(var h=n.sel.ranges.length-1;h>=0;h--){var u=n.sel.ranges[h],f=u.from(),p=u.to();r<i.length?f=yo(f.line,f.ch-(i.length-r)):t.state.overwrite&&u.empty()&&!t.state.pasteIncoming&&(p=yo(p.line,Math.min(Mn(n,p.line).text.length,p.ch+hs(c).length)));var m=t.curOp.updateInput,g={from:f,to:p,text:d?d[h%d.length]:c,origin:t.state.pasteIncoming?"paste":t.state.cutIncoming?"cut":"+input"};if(ri(t.doc,g),is(t,"inputRead",t,g),l&&!t.state.pasteIncoming&&t.options.electricChars&&t.options.smartIndent&&u.head.ch<100&&(!h||n.sel.ranges[h-1].head.line!=u.head.line)){var v=t.getModeAt(u.head),y=Io(g);if(v.electricChars){for(var b=0;b<v.electricChars.length;b++)if(l.indexOf(v.electricChars.charAt(b))>-1){wi(t,y.line,"smart");break}}else v.electricInput&&v.electricInput.test(Mn(n,y.line).text.slice(0,y.ch))&&wi(t,y.line,"smart")}}return yi(t),t.curOp.updateInput=m,t.curOp.typing=!0,s.length>1e3||s.indexOf("\n")>-1?e.value=t.display.prevInput="":t.display.prevInput=s,o&&ee(t),t.state.pasteIncoming=t.state.cutIncoming=!1,!0}function Ce(t,e){var i,n,s=t.doc;if(t.somethingSelected()){t.display.prevInput="";var o=s.sel.primary();i=Ir&&(o.to().line-o.from().line>100||(n=t.getSelection()).length>1e3);var r=i?"-":n||t.getSelection();t.display.input.value=r,t.state.focused&&wr(t.display.input),Js&&Zs>=9&&(t.display.inputHasSelection=r)}else e||(t.display.prevInput=t.display.input.value="",Js&&Zs>=9&&(t.display.inputHasSelection=null));t.display.inaccurateSelection=i}function Se(t){"nocursor"!=t.options.readOnly&&(!co||Cs()!=t.display.input)&&t.display.input.focus()}function Te(t){t.state.focused||(Se(t),Qe(t))}function Ee(t){return t.options.readOnly||t.doc.cantEdit}function De(t){function e(){t.state.focused&&setTimeout(gs(Se,t),0)}function i(e){ss(t,e)||lr(e)}function n(e){if(t.somethingSelected())To=t.getSelections(),s.inaccurateSelection&&(s.prevInput="",s.inaccurateSelection=!1,s.input.value=To.join("\n"),wr(s.input));else{for(var i=[],n=[],o=0;o<t.doc.sel.ranges.length;o++){var r=t.doc.sel.ranges[o].head.line,a={anchor:yo(r,0),head:yo(r+1,0)};n.push(a),i.push(t.getRange(a.anchor,a.head))}"cut"==e.type?t.setSelections(n,null,mr):(s.prevInput="",s.input.value=i.join("\n"),wr(s.input)),To=i}"cut"==e.type&&(t.state.cutIncoming=!0)}var s=t.display;cr(s.scroller,"mousedown",ce(t,Ie)),Js&&Zs<11?cr(s.scroller,"dblclick",ce(t,function(e){if(!ss(t,e)){var i=Ae(t,e);if(i&&!Ne(t,e)&&!Me(t.display,e)){rr(e);var n=t.findWordAt(i);st(t.doc,n.anchor,n.head)}}})):cr(s.scroller,"dblclick",function(e){ss(t,e)||rr(e)}),cr(s.lineSpace,"selectstart",function(t){Me(s,t)||rr(t)}),mo||cr(s.scroller,"contextmenu",function(e){Ze(t,e)}),cr(s.scroller,"scroll",function(){s.scroller.clientHeight&&(Re(t,s.scroller.scrollTop),ze(t,s.scroller.scrollLeft,!0),hr(t,"scroll",t))}),cr(s.scrollbarV,"scroll",function(){s.scroller.clientHeight&&Re(t,s.scrollbarV.scrollTop)}),cr(s.scrollbarH,"scroll",function(){s.scroller.clientHeight&&ze(t,s.scrollbarH.scrollLeft)}),cr(s.scroller,"mousewheel",function(e){Be(t,e)}),cr(s.scroller,"DOMMouseScroll",function(e){Be(t,e)}),cr(s.scrollbarH,"mousedown",e),cr(s.scrollbarV,"mousedown",e),cr(s.wrapper,"scroll",function(){s.wrapper.scrollTop=s.wrapper.scrollLeft=0}),cr(s.input,"keyup",function(e){Ke.call(t,e)}),cr(s.input,"input",function(){Js&&Zs>=9&&t.display.inputHasSelection&&(t.display.inputHasSelection=null),ke(t)}),cr(s.input,"keydown",ce(t,Ye)),cr(s.input,"keypress",ce(t,Xe)),cr(s.input,"focus",gs(Qe,t)),cr(s.input,"blur",gs(Je,t)),t.options.dragDrop&&(cr(s.scroller,"dragstart",function(e){He(t,e)}),cr(s.scroller,"dragenter",i),cr(s.scroller,"dragover",i),cr(s.scroller,"drop",ce(t,Fe))),cr(s.scroller,"paste",function(e){Me(s,e)||(t.state.pasteIncoming=!0,Se(t),ke(t))}),cr(s.input,"paste",function(){if(to&&!t.state.fakedLastChar&&!(new Date-t.state.lastMiddleDown<200)){var e=s.input.selectionStart,i=s.input.selectionEnd;s.input.value+="$",s.input.selectionEnd=i,s.input.selectionStart=e,t.state.fakedLastChar=!0}t.state.pasteIncoming=!0,ke(t)}),cr(s.input,"cut",n),cr(s.input,"copy",n),oo&&cr(s.sizer,"mouseup",function(){Cs()==s.input&&s.input.blur(),Se(t)})}function Pe(t){var e=t.display;e.cachedCharWidth=e.cachedTextHeight=e.cachedPaddingH=null,t.setSize()}function Me(t,e){for(var i=ts(e);i!=t.wrapper;i=i.parentNode)if(!i||i.ignoreEvents||i.parentNode==t.sizer&&i!=t.mover)return!0}function Ae(t,e,i,n){var s=t.display;if(!i){var o=ts(e);if(o==s.scrollbarH||o==s.scrollbarV||o==s.scrollbarFiller||o==s.gutterFiller)return null}var r,a,l=s.lineSpace.getBoundingClientRect();try{r=e.clientX-l.left,a=e.clientY-l.top}catch(t){return null}var c,d=Kt(t,r,a);if(n&&1==d.xRel&&(c=Mn(t.doc,d.line).text).length==d.ch){var h=yr(c,c.length,t.options.tabSize)-c.length;d=yo(d.line,Math.max(0,Math.round((r-Dt(t.display).left)/Jt(t.display))-h))}return d}function Ie(t){if(!ss(this,t)){var e=this,i=e.display;if(i.shift=t.shiftKey,Me(i,t))return void(to||(i.scroller.draggable=!1,setTimeout(function(){i.scroller.draggable=!0},100)));if(!Ne(e,t)){var n=Ae(e,t);switch(window.focus(),es(t)){case 1:n?Le(e,t,n):ts(t)==i.scroller&&rr(t);break;case 2:to&&(e.state.lastMiddleDown=+new Date),n&&st(e.doc,n),setTimeout(gs(Se,e),20),rr(t);break;case 3:mo&&Ze(e,t)}}}}function Le(t,e,i){setTimeout(gs(Te,t),0);var n,s=+new Date;ko&&ko.time>s-400&&0==bo(ko.pos,i)?n="triple":_o&&_o.time>s-400&&0==bo(_o.pos,i)?(n="double",ko={time:s,pos:i}):(n="single",_o={time:s,pos:i});var o=t.doc.sel,r=ho?e.metaKey:e.ctrlKey;t.options.dragDrop&&Pr&&!Ee(t)&&"single"==n&&o.contains(i)>-1&&o.somethingSelected()?je(t,e,i,r):Oe(t,e,i,n,r)}function je(t,e,i,n){var s=t.display,o=ce(t,function(r){to&&(s.scroller.draggable=!1),t.state.draggingText=!1,dr(document,"mouseup",o),dr(s.scroller,"drop",o),Math.abs(e.clientX-r.clientX)+Math.abs(e.clientY-r.clientY)<10&&(rr(r),n||st(t.doc,i),Se(t),Js&&9==Zs&&setTimeout(function(){document.body.focus(),Se(t)},20))});to&&(s.scroller.draggable=!0),t.state.draggingText=o,s.scroller.dragDrop&&s.scroller.dragDrop(),cr(document,"mouseup",o),cr(s.scroller,"drop",o)}function Oe(t,e,i,n,s){function o(e){if(0!=bo(m,e))if(m=e,"rect"==n){for(var s=[],o=t.options.tabSize,r=yr(Mn(c,i.line).text,i.ch,o),a=yr(Mn(c,e.line).text,e.ch,o),l=Math.min(r,a),f=Math.max(r,a),p=Math.min(i.line,e.line),g=Math.min(t.lastLine(),Math.max(i.line,e.line));p<=g;p++){var v=Mn(c,p).text,y=cs(v,l,o);l==f?s.push(new K(yo(p,y),yo(p,y))):v.length>y&&s.push(new K(yo(p,y),yo(p,cs(v,f,o))))}s.length||s.push(new K(i,i)),dt(c,X(u.ranges.slice(0,h).concat(s),h),{origin:"*mouse",scroll:!1}),t.scrollIntoView(e)}else{var b=d,w=b.anchor,_=e;if("single"!=n){if("double"==n)var k=t.findWordAt(e);else var k=new K(yo(e.line,0),Z(c,yo(e.line+1,0)));bo(k.anchor,w)>0?(_=k.head,w=Y(b.from(),k.anchor)):(_=k.anchor,w=V(b.to(),k.head))}var s=u.ranges.slice(0);s[h]=new K(Z(c,w),_),dt(c,X(s,h),gr)}}function r(e){var i=++v,s=Ae(t,e,!0,"rect"==n);if(s)if(0!=bo(s,m)){Te(t),o(s);var a=y(l,c);(s.line>=a.to||s.line<a.from)&&setTimeout(ce(t,function(){v==i&&r(e)}),150)}else{var d=e.clientY<g.top?-20:e.clientY>g.bottom?20:0;d&&setTimeout(ce(t,function(){v==i&&(l.scroller.scrollTop+=d,r(e))}),50)}}function a(e){v=1/0,rr(e),Se(t),dr(document,"mousemove",b),dr(document,"mouseup",w),c.history.lastSelOrigin=null}var l=t.display,c=t.doc;rr(e);var d,h,u=c.sel;if(s&&!e.shiftKey?(h=c.sel.contains(i),d=h>-1?c.sel.ranges[h]:new K(i,i)):d=c.sel.primary(),e.altKey)n="rect",s||(d=new K(i,i)),i=Ae(t,e,!0,!0),h=-1;else if("double"==n){var f=t.findWordAt(i);d=t.display.shift||c.extend?nt(c,d,f.anchor,f.head):f}else if("triple"==n){var p=new K(yo(i.line,0),Z(c,yo(i.line+1,0)));d=t.display.shift||c.extend?nt(c,d,p.anchor,p.head):p}else d=nt(c,d,i);s?h>-1?rt(c,h,d,gr):(h=c.sel.ranges.length,dt(c,X(c.sel.ranges.concat([d]),h),{scroll:!1,origin:"*mouse"})):(h=0,dt(c,new G([d],0),gr),u=c.sel);var m=i,g=l.wrapper.getBoundingClientRect(),v=0,b=ce(t,function(t){es(t)?r(t):a(t)}),w=ce(t,a);cr(document,"mousemove",b),cr(document,"mouseup",w)}function $e(t,e,i,n,s){try{var o=e.clientX,r=e.clientY}catch(t){return!1}if(o>=Math.floor(t.display.gutters.getBoundingClientRect().right))return!1;n&&rr(e);var a=t.display,l=a.lineDiv.getBoundingClientRect();if(r>l.bottom||!rs(t,i))return Zn(e);r-=l.top-a.viewOffset;for(var c=0;c<t.options.gutters.length;++c){var d=a.gutters.childNodes[c];
if(d&&d.getBoundingClientRect().right>=o){var h=On(t.doc,r),u=t.options.gutters[c];return s(t,i,t,h,u,e),Zn(e)}}}function Ne(t,e){return $e(t,e,"gutterClick",!0,is)}function Fe(t){var e=this;if(!ss(e,t)&&!Me(e.display,t)){rr(t),Js&&(Eo=+new Date);var i=Ae(e,t,!0),n=t.dataTransfer.files;if(i&&!Ee(e))if(n&&n.length&&window.FileReader&&window.File)for(var s=n.length,o=Array(s),r=0,a=function(t,n){var a=new FileReader;a.onload=ce(e,function(){if(o[n]=a.result,++r==s){i=Z(e.doc,i);var t={from:i,to:i,text:Mr(o.join("\n")),origin:"paste"};ri(e.doc,t),ct(e.doc,Q(i,Io(t)))}}),a.readAsText(t)},l=0;l<s;++l)a(n[l],l);else{if(e.state.draggingText&&e.doc.sel.contains(i)>-1)return e.state.draggingText(t),void setTimeout(gs(Se,e),20);try{var o=t.dataTransfer.getData("Text");if(o){if(e.state.draggingText&&(ho?!t.metaKey:!t.ctrlKey))var c=e.listSelections();if(ht(e.doc,Q(i,i)),c)for(var l=0;l<c.length;++l)ui(e.doc,"",c[l].anchor,c[l].head,"drag");e.replaceSelection(o,"around","paste"),Se(e)}}catch(t){}}}}function He(t,e){if(Js&&(!t.state.draggingText||+new Date-Eo<100))return void lr(e);if(!ss(t,e)&&!Me(t.display,e)&&(e.dataTransfer.setData("Text",t.getSelection()),e.dataTransfer.setDragImage&&!so)){var i=ws("img",null,null,"position: fixed; left: 0; top: 0;");i.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",no&&(i.width=i.height=1,t.display.wrapper.appendChild(i),i._top=i.offsetTop),e.dataTransfer.setDragImage(i,0,0),no&&i.parentNode.removeChild(i)}}function Re(t,e){Math.abs(t.doc.scrollTop-e)<2||(t.doc.scrollTop=e,Ks||T(t,{top:e}),t.display.scroller.scrollTop!=e&&(t.display.scroller.scrollTop=e),t.display.scrollbarV.scrollTop!=e&&(t.display.scrollbarV.scrollTop=e),Ks&&T(t),kt(t,100))}function ze(t,e,i){(i?e==t.doc.scrollLeft:Math.abs(t.doc.scrollLeft-e)<2)||(e=Math.min(e,t.display.scroller.scrollWidth-t.display.scroller.clientWidth),t.doc.scrollLeft=e,b(t),t.display.scroller.scrollLeft!=e&&(t.display.scroller.scrollLeft=e),t.display.scrollbarH.scrollLeft!=e&&(t.display.scrollbarH.scrollLeft=e))}function Be(t,e){var i=e.wheelDeltaX,n=e.wheelDeltaY;null==i&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(i=e.detail),null==n&&e.detail&&e.axis==e.VERTICAL_AXIS?n=e.detail:null==n&&(n=e.wheelDelta);var s=t.display,o=s.scroller;if(i&&o.scrollWidth>o.clientWidth||n&&o.scrollHeight>o.clientHeight){if(n&&ho&&to)t:for(var r=e.target,a=s.view;r!=o;r=r.parentNode)for(var l=0;l<a.length;l++)if(a[l].node==r){t.display.currentWheelTarget=r;break t}if(i&&!Ks&&!no&&null!=Po)return n&&Re(t,Math.max(0,Math.min(o.scrollTop+n*Po,o.scrollHeight-o.clientHeight))),ze(t,Math.max(0,Math.min(o.scrollLeft+i*Po,o.scrollWidth-o.clientWidth))),rr(e),s.wheelStartX=null,void 0;if(n&&null!=Po){var c=n*Po,d=t.doc.scrollTop,h=d+s.wrapper.clientHeight;c<0?d=Math.max(0,d+c-50):h=Math.min(t.doc.height,h+c+50),T(t,{top:d,bottom:h})}Do<20&&(null==s.wheelStartX?(s.wheelStartX=o.scrollLeft,s.wheelStartY=o.scrollTop,s.wheelDX=i,s.wheelDY=n,setTimeout(function(){if(null!=s.wheelStartX){var t=o.scrollLeft-s.wheelStartX,e=o.scrollTop-s.wheelStartY,i=e&&s.wheelDY&&e/s.wheelDY||t&&s.wheelDX&&t/s.wheelDX;s.wheelStartX=s.wheelStartY=null,i&&(Po=(Po*Do+i)/(Do+1),++Do)}},200)):(s.wheelDX+=i,s.wheelDY+=n))}}function We(t,e,i){if("string"==typeof e&&(e=Wo[e],!e))return!1;t.display.pollingFast&&xe(t)&&(t.display.pollingFast=!1);var n=t.display.shift,s=!1;try{Ee(t)&&(t.state.suppressEdits=!0),i&&(t.display.shift=!1),s=e(t)!=pr}finally{t.display.shift=n,t.state.suppressEdits=!1}return s}function qe(t){var e=t.state.keyMaps.slice(0);return t.options.extraKeys&&e.push(t.options.extraKeys),e.push(t.options.keyMap),e}function Ue(t,e){var i=Ti(t.options.keyMap),n=i.auto;clearTimeout(Mo),n&&!Vo(e)&&(Mo=setTimeout(function(){Ti(t.options.keyMap)==i&&(t.options.keyMap=n.call?n.call(null,t):n,a(t))},50));var s=Yo(e,!0),o=!1;if(!s)return!1;var r=qe(t);return o=e.shiftKey?Uo("Shift-"+s,r,function(e){return We(t,e,!0)})||Uo(s,r,function(e){if("string"==typeof e?/^go[A-Z]/.test(e):e.motion)return We(t,e)}):Uo(s,r,function(e){return We(t,e)}),o&&(rr(e),_t(t),is(t,"keyHandled",t,s,e)),o}function Ve(t,e,i){var n=Uo("'"+i+"'",qe(t),function(e){return We(t,e,!0)});return n&&(rr(e),_t(t),is(t,"keyHandled",t,"'"+i+"'",e)),n}function Ye(t){var e=this;if(Te(e),!ss(e,t)){Js&&Zs<11&&27==t.keyCode&&(t.returnValue=!1);var i=t.keyCode;e.display.shift=16==i||t.shiftKey;var n=Ue(e,t);no&&(Ao=n?i:null,!n&&88==i&&!Ir&&(ho?t.metaKey:t.ctrlKey)&&e.replaceSelection("",null,"cut")),18==i&&!/\bCodeMirror-crosshair\b/.test(e.display.lineDiv.className)&&Ge(e)}}function Ge(t){function e(t){18!=t.keyCode&&t.altKey||(Ts(i,"CodeMirror-crosshair"),dr(document,"keyup",e),dr(document,"mouseover",e))}var i=t.display.lineDiv;Es(i,"CodeMirror-crosshair"),cr(document,"keyup",e),cr(document,"mouseover",e)}function Ke(t){16==t.keyCode&&(this.doc.sel.shift=!1),ss(this,t)}function Xe(t){var e=this;if(!(ss(e,t)||t.ctrlKey&&!t.altKey||ho&&t.metaKey)){var i=t.keyCode,n=t.charCode;if(no&&i==Ao)return Ao=null,void rr(t);if(!(no&&(!t.which||t.which<10)||oo)||!Ue(e,t)){var s=String.fromCharCode(null==n?i:n);Ve(e,t,s)||(Js&&Zs>=9&&(e.display.inputHasSelection=null),ke(e))}}}function Qe(t){"nocursor"!=t.options.readOnly&&(t.state.focused||(hr(t,"focus",t),t.state.focused=!0,Es(t.display.wrapper,"CodeMirror-focused"),!t.curOp&&t.display.selForContextMenu!=t.doc.sel&&(Ce(t),to&&setTimeout(gs(Ce,t,!0),0))),_e(t),_t(t))}function Je(t){t.state.focused&&(hr(t,"blur",t),t.state.focused=!1,Ts(t.display.wrapper,"CodeMirror-focused")),clearInterval(t.display.blinker),setTimeout(function(){t.state.focused||(t.display.shift=!1)},150)}function Ze(t,e){function i(){if(null!=s.input.selectionStart){var e=t.somethingSelected(),i=s.input.value="\u200b"+(e?s.input.value:"");s.prevInput=e?"":"\u200b",s.input.selectionStart=1,s.input.selectionEnd=i.length,s.selForContextMenu=t.doc.sel}}function n(){if(s.inputDiv.style.position="relative",s.input.style.cssText=l,Js&&Zs<9&&(s.scrollbarV.scrollTop=s.scroller.scrollTop=r),_e(t),null!=s.input.selectionStart){(!Js||Js&&Zs<9)&&i();var e=0,n=function(){s.selForContextMenu==t.doc.sel&&0==s.input.selectionStart?ce(t,Wo.selectAll)(t):e++<10?s.detectingSelectAll=setTimeout(n,500):Ce(t)};s.detectingSelectAll=setTimeout(n,200)}}if(!ss(t,e,"contextmenu")){var s=t.display;if(!Me(s,e)&&!ti(t,e)){var o=Ae(t,e),r=s.scroller.scrollTop;if(o&&!no){var a=t.options.resetSelectionOnContextMenu;a&&t.doc.sel.contains(o)==-1&&ce(t,dt)(t.doc,Q(o),mr);var l=s.input.style.cssText;if(s.inputDiv.style.position="absolute",s.input.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(e.clientY-5)+"px; left: "+(e.clientX-5)+"px; z-index: 1000; background: "+(Js?"rgba(255, 255, 255, .05)":"transparent")+"; outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",to)var c=window.scrollY;if(Se(t),to&&window.scrollTo(null,c),Ce(t),t.somethingSelected()||(s.input.value=s.prevInput=" "),s.selForContextMenu=t.doc.sel,clearTimeout(s.detectingSelectAll),Js&&Zs>=9&&i(),mo){lr(e);var d=function(){dr(window,"mouseup",d),setTimeout(n,20)};cr(window,"mouseup",d)}else setTimeout(n,50)}}}}function ti(t,e){return!!rs(t,"gutterContextMenu")&&$e(t,e,"gutterContextMenu",!1,hr)}function ei(t,e){if(bo(t,e.from)<0)return t;if(bo(t,e.to)<=0)return Io(e);var i=t.line+e.text.length-(e.to.line-e.from.line)-1,n=t.ch;return t.line==e.to.line&&(n+=Io(e).ch-e.to.ch),yo(i,n)}function ii(t,e){for(var i=[],n=0;n<t.sel.ranges.length;n++){var s=t.sel.ranges[n];i.push(new K(ei(s.anchor,e),ei(s.head,e)))}return X(i,t.sel.primIndex)}function ni(t,e,i){return t.line==e.line?yo(i.line,t.ch-e.ch+i.ch):yo(i.line+(t.line-e.line),t.ch)}function si(t,e,i){for(var n=[],s=yo(t.first,0),o=s,r=0;r<e.length;r++){var a=e[r],l=ni(a.from,s,o),c=ni(Io(a),s,o);if(s=a.to,o=c,"around"==i){var d=t.sel.ranges[r],h=bo(d.head,d.anchor)<0;n[r]=new K(h?c:l,h?l:c)}else n[r]=new K(l,l)}return new G(n,t.sel.primIndex)}function oi(t,e,i){var n={canceled:!1,from:e.from,to:e.to,text:e.text,origin:e.origin,cancel:function(){this.canceled=!0}};return i&&(n.update=function(e,i,n,s){e&&(this.from=Z(t,e)),i&&(this.to=Z(t,i)),n&&(this.text=n),void 0!==s&&(this.origin=s)}),hr(t,"beforeChange",t,n),t.cm&&hr(t.cm,"beforeChange",t.cm,n),n.canceled?null:{from:n.from,to:n.to,text:n.text,origin:n.origin}}function ri(t,e,i){if(t.cm){if(!t.cm.curOp)return ce(t.cm,ri)(t,e,i);if(t.cm.state.suppressEdits)return}if(!(rs(t,"beforeChange")||t.cm&&rs(t.cm,"beforeChange"))||(e=oi(t,e,!0))){var n=go&&!i&&zi(t,e.from,e.to);if(n)for(var s=n.length-1;s>=0;--s)ai(t,{from:n[s].from,to:n[s].to,text:s?[""]:e.text});else ai(t,e)}}function ai(t,e){if(1!=e.text.length||""!=e.text[0]||0!=bo(e.from,e.to)){var i=ii(t,e);Bn(t,e,i,t.cm?t.cm.curOp.id:NaN),di(t,e,i,Fi(t,e));var n=[];Dn(t,function(t,i){!i&&us(n,t.history)==-1&&(Jn(t.history,e),n.push(t.history)),di(t,e,null,Fi(t,e))})}}function li(t,e,i){if(!t.cm||!t.cm.state.suppressEdits){for(var n,s=t.history,o=t.sel,r="undo"==e?s.done:s.undone,a="undo"==e?s.undone:s.done,l=0;l<r.length&&(n=r[l],i?!n.ranges||n.equals(t.sel):n.ranges);l++);if(l!=r.length){for(s.lastOrigin=s.lastSelOrigin=null;n=r.pop(),n.ranges;){if(Un(n,a),i&&!n.equals(t.sel))return void dt(t,n,{clearRedo:!1});o=n}var c=[];Un(o,a),a.push({changes:c,generation:s.generation}),s.generation=n.generation||++s.maxGeneration;for(var d=rs(t,"beforeChange")||t.cm&&rs(t.cm,"beforeChange"),l=n.changes.length-1;l>=0;--l){var h=n.changes[l];if(h.origin=e,d&&!oi(t,h,!1))return void(r.length=0);c.push(Hn(t,h));var u=l?ii(t,h):hs(r);di(t,h,u,Ri(t,h)),!l&&t.cm&&t.cm.scrollIntoView({from:h.from,to:Io(h)});var f=[];Dn(t,function(t,e){!e&&us(f,t.history)==-1&&(Jn(t.history,h),f.push(t.history)),di(t,h,null,Ri(t,h))})}}}}function ci(t,e){if(0!=e&&(t.first+=e,t.sel=new G(fs(t.sel.ranges,function(t){return new K(yo(t.anchor.line+e,t.anchor.ch),yo(t.head.line+e,t.head.ch))}),t.sel.primIndex),t.cm)){pe(t.cm,t.first,t.first-e,e);for(var i=t.cm.display,n=i.viewFrom;n<i.viewTo;n++)me(t.cm,n,"gutter")}}function di(t,e,i,n){if(t.cm&&!t.cm.curOp)return ce(t.cm,di)(t,e,i,n);if(e.to.line<t.first)return void ci(t,e.text.length-1-(e.to.line-e.from.line));if(!(e.from.line>t.lastLine())){if(e.from.line<t.first){var s=e.text.length-1-(t.first-e.from.line);ci(t,s),e={from:yo(t.first,0),to:yo(e.to.line+s,e.to.ch),text:[hs(e.text)],origin:e.origin}}var o=t.lastLine();e.to.line>o&&(e={from:e.from,to:yo(o,Mn(t,o).text.length),text:[e.text[0]],origin:e.origin}),e.removed=An(t,e.from,e.to),i||(i=ii(t,e)),t.cm?hi(t.cm,e,n):Sn(t,e,n),ht(t,i,mr)}}function hi(t,e,i){var n=t.doc,s=t.display,r=e.from,a=e.to,l=!1,c=r.line;t.options.lineWrapping||(c=jn(Qi(Mn(n,r.line))),n.iter(c,a.line+1,function(t){if(t==s.maxLine)return l=!0,!0})),n.sel.contains(e.from,e.to)>-1&&os(t),Sn(n,e,i,o(t)),t.options.lineWrapping||(n.iter(c,r.line+e.text.length,function(t){var e=u(t);e>s.maxLineLength&&(s.maxLine=t,s.maxLineLength=e,s.maxLineChanged=!0,l=!1)}),l&&(t.curOp.updateMaxLine=!0)),n.frontier=Math.min(n.frontier,r.line),kt(t,400);var d=e.text.length-(a.line-r.line)-1;r.line!=a.line||1!=e.text.length||Cn(t.doc,e)?pe(t,r.line,a.line+1,d):me(t,r.line,"text");var h=rs(t,"changes"),f=rs(t,"change");if(f||h){var p={from:r,to:a,text:e.text,removed:e.removed,origin:e.origin};f&&is(t,"change",t,p),h&&(t.curOp.changeObjs||(t.curOp.changeObjs=[])).push(p)}t.display.selForContextMenu=null}function ui(t,e,i,n,s){if(n||(n=i),bo(n,i)<0){var o=n;n=i,i=o}"string"==typeof e&&(e=Mr(e)),ri(t,{from:i,to:n,text:e,origin:s})}function fi(t,e){var i=t.display,n=i.sizer.getBoundingClientRect(),s=null;if(e.top+n.top<0?s=!0:e.bottom+n.top>(window.innerHeight||document.documentElement.clientHeight)&&(s=!1),null!=s&&!ao){var o=ws("div","\u200b",null,"position: absolute; top: "+(e.top-i.viewOffset-Tt(t.display))+"px; height: "+(e.bottom-e.top+fr)+"px; left: "+e.left+"px; width: 2px;");t.display.lineSpace.appendChild(o),o.scrollIntoView(s),t.display.lineSpace.removeChild(o)}}function pi(t,e,i,n){null==n&&(n=0);for(var s=0;s<5;s++){var o=!1,r=Vt(t,e),a=i&&i!=e?Vt(t,i):r,l=gi(t,Math.min(r.left,a.left),Math.min(r.top,a.top)-n,Math.max(r.left,a.left),Math.max(r.bottom,a.bottom)+n),c=t.doc.scrollTop,d=t.doc.scrollLeft;if(null!=l.scrollTop&&(Re(t,l.scrollTop),Math.abs(t.doc.scrollTop-c)>1&&(o=!0)),null!=l.scrollLeft&&(ze(t,l.scrollLeft),Math.abs(t.doc.scrollLeft-d)>1&&(o=!0)),!o)return r}}function mi(t,e,i,n,s){var o=gi(t,e,i,n,s);null!=o.scrollTop&&Re(t,o.scrollTop),null!=o.scrollLeft&&ze(t,o.scrollLeft)}function gi(t,e,i,n,s){var o=t.display,r=Qt(t.display);i<0&&(i=0);var a=t.curOp&&null!=t.curOp.scrollTop?t.curOp.scrollTop:o.scroller.scrollTop,l=o.scroller.clientHeight-fr,c={};s-i>l&&(s=i+l);var d=t.doc.height+Et(o),h=i<r,u=s>d-r;if(i<a)c.scrollTop=h?0:i;else if(s>a+l){var f=Math.min(i,(u?d:s)-l);f!=a&&(c.scrollTop=f)}var p=t.curOp&&null!=t.curOp.scrollLeft?t.curOp.scrollLeft:o.scroller.scrollLeft,m=o.scroller.clientWidth-fr-o.gutters.offsetWidth,g=n-e>m;return g&&(n=e+m),e<10?c.scrollLeft=0:e<p?c.scrollLeft=Math.max(0,e-(g?0:10)):n>m+p-3&&(c.scrollLeft=n+(g?0:10)-m),c}function vi(t,e,i){(null!=e||null!=i)&&bi(t),null!=e&&(t.curOp.scrollLeft=(null==t.curOp.scrollLeft?t.doc.scrollLeft:t.curOp.scrollLeft)+e),null!=i&&(t.curOp.scrollTop=(null==t.curOp.scrollTop?t.doc.scrollTop:t.curOp.scrollTop)+i)}function yi(t){bi(t);var e=t.getCursor(),i=e,n=e;t.options.lineWrapping||(i=e.ch?yo(e.line,e.ch-1):e,n=yo(e.line,e.ch+1)),t.curOp.scrollToPos={from:i,to:n,margin:t.options.cursorScrollMargin,isCursor:!0}}function bi(t){var e=t.curOp.scrollToPos;if(e){t.curOp.scrollToPos=null;var i=Yt(t,e.from),n=Yt(t,e.to),s=gi(t,Math.min(i.left,n.left),Math.min(i.top,n.top)-e.margin,Math.max(i.right,n.right),Math.max(i.bottom,n.bottom)+e.margin);t.scrollTo(s.scrollLeft,s.scrollTop)}}function wi(t,e,i,n){var s,o=t.doc;null==i&&(i="add"),"smart"==i&&(o.mode.indent?s=St(t,e):i="prev");var r=t.options.tabSize,a=Mn(o,e),l=yr(a.text,null,r);a.stateAfter&&(a.stateAfter=null);var c,d=a.text.match(/^\s*/)[0];if(n||/\S/.test(a.text)){if("smart"==i&&(c=o.mode.indent(s,a.text.slice(d.length),a.text),c==pr||c>150)){if(!n)return;i="prev"}}else c=0,i="not";"prev"==i?c=e>o.first?yr(Mn(o,e-1).text,null,r):0:"add"==i?c=l+t.options.indentUnit:"subtract"==i?c=l-t.options.indentUnit:"number"==typeof i&&(c=l+i),c=Math.max(0,c);var h="",u=0;if(t.options.indentWithTabs)for(var f=Math.floor(c/r);f;--f)u+=r,h+="\t";if(u<c&&(h+=ds(c-u)),h!=d)ui(o,h,yo(e,0),yo(e,d.length),"+input");else for(var f=0;f<o.sel.ranges.length;f++){var p=o.sel.ranges[f];if(p.head.line==e&&p.head.ch<d.length){var u=yo(e,d.length);rt(o,f,new K(u,u));break}}a.stateAfter=null}function _i(t,e,i,n){var s=e,o=e;return"number"==typeof e?o=Mn(t,J(t,e)):s=jn(e),null==s?null:(n(o,s)&&t.cm&&me(t.cm,s,i),o)}function ki(t,e){for(var i=t.doc.sel.ranges,n=[],s=0;s<i.length;s++){for(var o=e(i[s]);n.length&&bo(o.from,hs(n).to)<=0;){var r=n.pop();if(bo(r.from,o.from)<0){o.from=r.from;break}}n.push(o)}le(t,function(){for(var e=n.length-1;e>=0;e--)ui(t.doc,"",n[e].from,n[e].to,"+delete");yi(t)})}function xi(t,e,i,n,s){function o(){var e=a+i;return e<t.first||e>=t.first+t.size?h=!1:(a=e,d=Mn(t,e))}function r(t){var e=(s?Ys:Gs)(d,l,i,!0);if(null==e){if(t||!o())return h=!1;l=s?(i<0?Rs:Hs)(d):i<0?d.text.length:0}else l=e;return!0}var a=e.line,l=e.ch,c=i,d=Mn(t,a),h=!0;if("char"==n)r();else if("column"==n)r(!0);else if("word"==n||"group"==n)for(var u=null,f="group"==n,p=t.cm&&t.cm.getHelper(e,"wordChars"),m=!0;!(i<0)||r(!m);m=!1){var g=d.text.charAt(l)||"\n",v=vs(g,p)?"w":f&&"\n"==g?"n":!f||/\s/.test(g)?null:"p";if(f&&!m&&!v&&(v="s"),u&&u!=v){i<0&&(i=1,r());break}if(v&&(u=v),i>0&&!r(!m))break}var y=mt(t,yo(a,l),c,!0);return h||(y.hitSide=!0),y}function Ci(t,e,i,n){var s,o=t.doc,r=e.left;if("page"==n){var a=Math.min(t.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight);s=e.top+i*(a-(i<0?1.5:.5)*Qt(t.display))}else"line"==n&&(s=i>0?e.bottom+3:e.top-3);for(;;){var l=Kt(t,r,s);if(!l.outside)break;if(i<0?s<=0:s>=o.height){l.hitSide=!0;break}s+=5*i}return l}function Si(e,i,n,s){t.defaults[e]=i,n&&(jo[e]=s?function(t,e,i){i!=Oo&&n(t,e,i)}:n)}function Ti(t){return"string"==typeof t?qo[t]:t}function Ei(t,e,i,n,s){if(n&&n.shared)return Di(t,e,i,n,s);if(t.cm&&!t.cm.curOp)return ce(t.cm,Ei)(t,e,i,n,s);var o=new Ko(t,s),r=bo(e,i);if(n&&ms(n,o,!1),r>0||0==r&&o.clearWhenEmpty!==!1)return o;if(o.replacedWith&&(o.collapsed=!0,o.widgetNode=ws("span",[o.replacedWith],"CodeMirror-widget"),n.handleMouseEvents||(o.widgetNode.ignoreEvents=!0),n.insertLeft&&(o.widgetNode.insertLeft=!0)),o.collapsed){if(Xi(t,e.line,e,i,o)||e.line!=i.line&&Xi(t,i.line,e,i,o))throw new Error("Inserting collapsed marker partially overlapping an existing one");vo=!0}o.addToHistory&&Bn(t,{from:e,to:i,origin:"markText"},t.sel,NaN);var a,l=e.line,c=t.cm;if(t.iter(l,i.line+1,function(t){c&&o.collapsed&&!c.options.lineWrapping&&Qi(t)==c.display.maxLine&&(a=!0),o.collapsed&&l!=e.line&&Ln(t,0),Oi(t,new Ii(o,l==e.line?e.ch:null,l==i.line?i.ch:null)),++l}),o.collapsed&&t.iter(e.line,i.line+1,function(e){en(t,e)&&Ln(e,0)}),o.clearOnEnter&&cr(o,"beforeCursorEnter",function(){o.clear()}),o.readOnly&&(go=!0,(t.history.done.length||t.history.undone.length)&&t.clearHistory()),o.collapsed&&(o.id=++Xo,o.atomic=!0),c){if(a&&(c.curOp.updateMaxLine=!0),o.collapsed)pe(c,e.line,i.line+1);else if(o.className||o.title||o.startStyle||o.endStyle)for(var d=e.line;d<=i.line;d++)me(c,d,"text");o.atomic&&ft(c.doc),is(c,"markerAdded",c,o)}return o}function Di(t,e,i,n,s){n=ms(n),n.shared=!1;var o=[Ei(t,e,i,n,s)],r=o[0],a=n.widgetNode;return Dn(t,function(t){a&&(n.widgetNode=a.cloneNode(!0)),o.push(Ei(t,Z(t,e),Z(t,i),n,s));for(var l=0;l<t.linked.length;++l)if(t.linked[l].isParent)return;r=hs(o)}),new Qo(o,r)}function Pi(t){return t.findMarks(yo(t.first,0),t.clipPos(yo(t.lastLine())),function(t){return t.parent})}function Mi(t,e){for(var i=0;i<e.length;i++){var n=e[i],s=n.find(),o=t.clipPos(s.from),r=t.clipPos(s.to);if(bo(o,r)){var a=Ei(t,o,r,n.primary,n.primary.type);n.markers.push(a),a.parent=n}}}function Ai(t){for(var e=0;e<t.length;e++){var i=t[e],n=[i.primary.doc];Dn(i.primary.doc,function(t){n.push(t)});for(var s=0;s<i.markers.length;s++){var o=i.markers[s];us(n,o.doc)==-1&&(o.parent=null,i.markers.splice(s--,1))}}}function Ii(t,e,i){this.marker=t,this.from=e,this.to=i}function Li(t,e){if(t)for(var i=0;i<t.length;++i){var n=t[i];if(n.marker==e)return n}}function ji(t,e){for(var i,n=0;n<t.length;++n)t[n]!=e&&(i||(i=[])).push(t[n]);return i}function Oi(t,e){t.markedSpans=t.markedSpans?t.markedSpans.concat([e]):[e],e.marker.attachLine(t)}function $i(t,e,i){if(t)for(var n,s=0;s<t.length;++s){var o=t[s],r=o.marker,a=null==o.from||(r.inclusiveLeft?o.from<=e:o.from<e);if(a||o.from==e&&"bookmark"==r.type&&(!i||!o.marker.insertLeft)){var l=null==o.to||(r.inclusiveRight?o.to>=e:o.to>e);(n||(n=[])).push(new Ii(r,o.from,l?null:o.to))}}return n}function Ni(t,e,i){if(t)for(var n,s=0;s<t.length;++s){var o=t[s],r=o.marker,a=null==o.to||(r.inclusiveRight?o.to>=e:o.to>e);if(a||o.from==e&&"bookmark"==r.type&&(!i||o.marker.insertLeft)){var l=null==o.from||(r.inclusiveLeft?o.from<=e:o.from<e);(n||(n=[])).push(new Ii(r,l?null:o.from-e,null==o.to?null:o.to-e))}}return n}function Fi(t,e){var i=et(t,e.from.line)&&Mn(t,e.from.line).markedSpans,n=et(t,e.to.line)&&Mn(t,e.to.line).markedSpans;if(!i&&!n)return null;var s=e.from.ch,o=e.to.ch,r=0==bo(e.from,e.to),a=$i(i,s,r),l=Ni(n,o,r),c=1==e.text.length,d=hs(e.text).length+(c?s:0);if(a)for(var h=0;h<a.length;++h){var u=a[h];if(null==u.to){var f=Li(l,u.marker);f?c&&(u.to=null==f.to?null:f.to+d):u.to=s}}if(l)for(var h=0;h<l.length;++h){var u=l[h];if(null!=u.to&&(u.to+=d),null==u.from){var f=Li(a,u.marker);f||(u.from=d,c&&(a||(a=[])).push(u))}else u.from+=d,c&&(a||(a=[])).push(u)}a&&(a=Hi(a)),l&&l!=a&&(l=Hi(l));var p=[a];if(!c){var m,g=e.text.length-2;if(g>0&&a)for(var h=0;h<a.length;++h)null==a[h].to&&(m||(m=[])).push(new Ii(a[h].marker,null,null));for(var h=0;h<g;++h)p.push(m);p.push(l)}return p}function Hi(t){for(var e=0;e<t.length;++e){var i=t[e];null!=i.from&&i.from==i.to&&i.marker.clearWhenEmpty!==!1&&t.splice(e--,1)}return t.length?t:null}function Ri(t,e){var i=Gn(t,e),n=Fi(t,e);if(!i)return n;if(!n)return i;for(var s=0;s<i.length;++s){var o=i[s],r=n[s];if(o&&r)t:for(var a=0;a<r.length;++a){for(var l=r[a],c=0;c<o.length;++c)if(o[c].marker==l.marker)continue t;o.push(l)}else r&&(i[s]=r)}return i}function zi(t,e,i){var n=null;if(t.iter(e.line,i.line+1,function(t){if(t.markedSpans)for(var e=0;e<t.markedSpans.length;++e){var i=t.markedSpans[e].marker;i.readOnly&&(!n||us(n,i)==-1)&&(n||(n=[])).push(i)}}),!n)return null;for(var s=[{from:e,to:i}],o=0;o<n.length;++o)for(var r=n[o],a=r.find(0),l=0;l<s.length;++l){var c=s[l];if(!(bo(c.to,a.from)<0||bo(c.from,a.to)>0)){var d=[l,1],h=bo(c.from,a.from),u=bo(c.to,a.to);(h<0||!r.inclusiveLeft&&!h)&&d.push({from:c.from,to:a.from}),(u>0||!r.inclusiveRight&&!u)&&d.push({from:a.to,to:c.to}),s.splice.apply(s,d),l+=d.length-1}}return s}function Bi(t){var e=t.markedSpans;if(e){for(var i=0;i<e.length;++i)e[i].marker.detachLine(t);t.markedSpans=null}}function Wi(t,e){if(e){for(var i=0;i<e.length;++i)e[i].marker.attachLine(t);t.markedSpans=e}}function qi(t){return t.inclusiveLeft?-1:0}function Ui(t){return t.inclusiveRight?1:0}function Vi(t,e){var i=t.lines.length-e.lines.length;if(0!=i)return i;var n=t.find(),s=e.find(),o=bo(n.from,s.from)||qi(t)-qi(e);if(o)return-o;var r=bo(n.to,s.to)||Ui(t)-Ui(e);return r?r:e.id-t.id}function Yi(t,e){var i,n=vo&&t.markedSpans;if(n)for(var s,o=0;o<n.length;++o)s=n[o],s.marker.collapsed&&null==(e?s.from:s.to)&&(!i||Vi(i,s.marker)<0)&&(i=s.marker);return i}function Gi(t){return Yi(t,!0)}function Ki(t){return Yi(t,!1)}function Xi(t,e,i,n,s){var o=Mn(t,e),r=vo&&o.markedSpans;if(r)for(var a=0;a<r.length;++a){var l=r[a];if(l.marker.collapsed){var c=l.marker.find(0),d=bo(c.from,i)||qi(l.marker)-qi(s),h=bo(c.to,n)||Ui(l.marker)-Ui(s);if(!(d>=0&&h<=0||d<=0&&h>=0)&&(d<=0&&(bo(c.to,i)>0||l.marker.inclusiveRight&&s.inclusiveLeft)||d>=0&&(bo(c.from,n)<0||l.marker.inclusiveLeft&&s.inclusiveRight)))return!0}}}function Qi(t){for(var e;e=Gi(t);)t=e.find(-1,!0).line;return t}function Ji(t){for(var e,i;e=Ki(t);)t=e.find(1,!0).line,(i||(i=[])).push(t);return i}function Zi(t,e){var i=Mn(t,e),n=Qi(i);return i==n?e:jn(n)}function tn(t,e){if(e>t.lastLine())return e;var i,n=Mn(t,e);if(!en(t,n))return e;for(;i=Ki(n);)n=i.find(1,!0).line;return jn(n)+1}function en(t,e){var i=vo&&e.markedSpans;if(i)for(var n,s=0;s<i.length;++s)if(n=i[s],n.marker.collapsed){if(null==n.from)return!0;if(!n.marker.widgetNode&&0==n.from&&n.marker.inclusiveLeft&&nn(t,e,n))return!0}}function nn(t,e,i){if(null==i.to){var n=i.marker.find(1,!0);return nn(t,n.line,Li(n.line.markedSpans,i.marker))}if(i.marker.inclusiveRight&&i.to==e.text.length)return!0;for(var s,o=0;o<e.markedSpans.length;++o)if(s=e.markedSpans[o],s.marker.collapsed&&!s.marker.widgetNode&&s.from==i.to&&(null==s.to||s.to!=i.from)&&(s.marker.inclusiveLeft||i.marker.inclusiveRight)&&nn(t,e,s))return!0}function sn(t,e,i){$n(e)<(t.curOp&&t.curOp.scrollTop||t.doc.scrollTop)&&vi(t,null,i)}function on(t){if(null!=t.height)return t.height;if(!xs(document.body,t.node)){var e="position: relative;";t.coverGutter&&(e+="margin-left: -"+t.cm.getGutterElement().offsetWidth+"px;"),ks(t.cm.display.measure,ws("div",[t.node],null,e))}return t.height=t.node.offsetHeight}function rn(t,e,i,n){var s=new Jo(t,i,n);return s.noHScroll&&(t.display.alignWidgets=!0),_i(t.doc,e,"widget",function(e){var i=e.widgets||(e.widgets=[]);if(null==s.insertAt?i.push(s):i.splice(Math.min(i.length-1,Math.max(0,s.insertAt)),0,s),s.line=e,!en(t.doc,e)){var n=$n(e)<t.doc.scrollTop;Ln(e,e.height+on(s)),n&&vi(t,null,s.height),t.curOp.forceUpdate=!0}return!0}),s}function an(t,e,i,n){t.text=e,t.stateAfter&&(t.stateAfter=null),t.styles&&(t.styles=null),null!=t.order&&(t.order=null),Bi(t),Wi(t,i);var s=n?n(t):1;s!=t.height&&Ln(t,s)}function ln(t){t.parent=null,Bi(t)}function cn(t,e){if(t)for(;;){var i=t.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!i)break;t=t.slice(0,i.index)+t.slice(i.index+i[0].length);var n=i[1]?"bgClass":"textClass";null==e[n]?e[n]=i[2]:new RegExp("(?:^|s)"+i[2]+"(?:$|s)").test(e[n])||(e[n]+=" "+i[2])}return t}function dn(e,i){if(e.blankLine)return e.blankLine(i);if(e.innerMode){var n=t.innerMode(e,i);return n.mode.blankLine?n.mode.blankLine(n.state):void 0}}function hn(t,e,i){for(var n=0;n<10;n++){var s=t.token(e,i);if(e.pos>e.start)return s}throw new Error("Mode "+t.name+" failed to advance stream.")}function un(e,i,n,s,o,r,a){var l=n.flattenSpans;null==l&&(l=e.options.flattenSpans);var c,d=0,h=null,u=new Go(i,e.options.tabSize);for(""==i&&cn(dn(n,s),r);!u.eol();){if(u.pos>e.options.maxHighlightLength?(l=!1,a&&mn(e,i,s,u.pos),u.pos=i.length,c=null):c=cn(hn(n,u,s),r),e.options.addModeClass){var f=t.innerMode(n,s).mode.name;f&&(c="m-"+(c?f+" "+c:f))}l&&h==c||(d<u.start&&o(u.start,h),d=u.start,h=c),u.start=u.pos}for(;d<u.pos;){var p=Math.min(u.pos,d+5e4);o(p,h),d=p}}function fn(t,e,i,n){var s=[t.state.modeGen],o={};un(t,e.text,t.doc.mode,i,function(t,e){s.push(t,e)},o,n);for(var r=0;r<t.state.overlays.length;++r){var a=t.state.overlays[r],l=1,c=0;un(t,e.text,a.mode,!0,function(t,e){for(var i=l;c<t;){var n=s[l];n>t&&s.splice(l,1,t,s[l+1],n),l+=2,c=Math.min(t,n)}if(e)if(a.opaque)s.splice(i,l-i,t,"cm-overlay "+e),l=i+2;else for(;i<l;i+=2){var o=s[i+1];s[i+1]=(o?o+" ":"")+"cm-overlay "+e}},o)}return{styles:s,classes:o.bgClass||o.textClass?o:null}}function pn(t,e){if(!e.styles||e.styles[0]!=t.state.modeGen){var i=fn(t,e,e.stateAfter=St(t,jn(e)));e.styles=i.styles,i.classes?e.styleClasses=i.classes:e.styleClasses&&(e.styleClasses=null)}return e.styles}function mn(t,e,i,n){var s=t.doc.mode,o=new Go(e,t.options.tabSize);for(o.start=o.pos=n||0,""==e&&dn(s,i);!o.eol()&&o.pos<=t.options.maxHighlightLength;)hn(s,o,i),o.start=o.pos}function gn(t,e){if(!t||/^\s*$/.test(t))return null;var i=e.addModeClass?er:tr;return i[t]||(i[t]=t.replace(/\S+/g,"cm-$&"))}function vn(t,e){var i=ws("span",null,null,to?"padding-right: .1px":null),n={pre:ws("pre",[i]),content:i,col:0,pos:0,cm:t};e.measure={};for(var s=0;s<=(e.rest?e.rest.length:0);s++){var o,r=s?e.rest[s-1]:e.line;n.pos=0,n.addToken=bn,(Js||to)&&t.getOption("lineWrapping")&&(n.addToken=wn(n.addToken)),js(t.display.measure)&&(o=Nn(r))&&(n.addToken=_n(n.addToken,o)),n.map=[],xn(r,n,pn(t,r)),r.styleClasses&&(r.styleClasses.bgClass&&(n.bgClass=Ds(r.styleClasses.bgClass,n.bgClass||"")),r.styleClasses.textClass&&(n.textClass=Ds(r.styleClasses.textClass,n.textClass||""))),0==n.map.length&&n.map.push(0,0,n.content.appendChild(Ls(t.display.measure))),0==s?(e.measure.map=n.map,e.measure.cache={}):((e.measure.maps||(e.measure.maps=[])).push(n.map),(e.measure.caches||(e.measure.caches=[])).push({}))}return hr(t,"renderLine",t,e.line,n.pre),n.pre.className&&(n.textClass=Ds(n.pre.className,n.textClass||"")),n}function yn(t){var e=ws("span","\u2022","cm-invalidchar");return e.title="\\u"+t.charCodeAt(0).toString(16),e}function bn(t,e,i,n,s,o){if(e){var r=t.cm.options.specialChars,a=!1;if(r.test(e))for(var l=document.createDocumentFragment(),c=0;;){r.lastIndex=c;var d=r.exec(e),h=d?d.index-c:e.length-c;if(h){var u=document.createTextNode(e.slice(c,c+h));Js&&Zs<9?l.appendChild(ws("span",[u])):l.appendChild(u),t.map.push(t.pos,t.pos+h,u),t.col+=h,t.pos+=h}if(!d)break;if(c+=h+1,"\t"==d[0]){var f=t.cm.options.tabSize,p=f-t.col%f,u=l.appendChild(ws("span",ds(p),"cm-tab"));t.col+=p}else{var u=t.cm.options.specialCharPlaceholder(d[0]);Js&&Zs<9?l.appendChild(ws("span",[u])):l.appendChild(u),t.col+=1}t.map.push(t.pos,t.pos+1,u),t.pos++}else{t.col+=e.length;var l=document.createTextNode(e);t.map.push(t.pos,t.pos+e.length,l),Js&&Zs<9&&(a=!0),t.pos+=e.length}if(i||n||s||a){var m=i||"";n&&(m+=n),s&&(m+=s);var g=ws("span",[l],m);return o&&(g.title=o),t.content.appendChild(g)}t.content.appendChild(l)}}function wn(t){function e(t){for(var e=" ",i=0;i<t.length-2;++i)e+=i%2?" ":"\xa0";return e+=" "}return function(i,n,s,o,r,a){t(i,n.replace(/ {3,}/g,e),s,o,r,a)}}function _n(t,e){return function(i,n,s,o,r,a){s=s?s+" cm-force-border":"cm-force-border";for(var l=i.pos,c=l+n.length;;){for(var d=0;d<e.length;d++){var h=e[d];if(h.to>l&&h.from<=l)break}if(h.to>=c)return t(i,n,s,o,r,a);t(i,n.slice(0,h.to-l),s,o,null,a),o=null,n=n.slice(h.to-l),l=h.to}}}function kn(t,e,i,n){var s=!n&&i.widgetNode;s&&(t.map.push(t.pos,t.pos+e,s),t.content.appendChild(s)),t.pos+=e}function xn(t,e,i){var n=t.markedSpans,s=t.text,o=0;if(n)for(var r,a,l,c,d,h,u=s.length,f=0,p=1,m="",g=0;;){if(g==f){a=l=c=d="",h=null,g=1/0;for(var v=[],y=0;y<n.length;++y){var b=n[y],w=b.marker;b.from<=f&&(null==b.to||b.to>f)?(null!=b.to&&g>b.to&&(g=b.to,l=""),w.className&&(a+=" "+w.className),w.startStyle&&b.from==f&&(c+=" "+w.startStyle),w.endStyle&&b.to==g&&(l+=" "+w.endStyle),w.title&&!d&&(d=w.title),w.collapsed&&(!h||Vi(h.marker,w)<0)&&(h=b)):b.from>f&&g>b.from&&(g=b.from),"bookmark"==w.type&&b.from==f&&w.widgetNode&&v.push(w)}if(h&&(h.from||0)==f&&(kn(e,(null==h.to?u+1:h.to)-f,h.marker,null==h.from),null==h.to))return;if(!h&&v.length)for(var y=0;y<v.length;++y)kn(e,0,v[y])}if(f>=u)break;for(var _=Math.min(u,g);;){if(m){var k=f+m.length;if(!h){var x=k>_?m.slice(0,_-f):m;e.addToken(e,x,r?r+a:a,c,f+x.length==g?l:"",d)}if(k>=_){m=m.slice(_-f),f=_;break}f=k,c=""}m=s.slice(o,o=i[p++]),r=gn(i[p++],e.cm.options)}}else for(var p=1;p<i.length;p+=2)e.addToken(e,s.slice(o,o=i[p]),gn(i[p+1],e.cm.options))}function Cn(t,e){return 0==e.from.ch&&0==e.to.ch&&""==hs(e.text)&&(!t.cm||t.cm.options.wholeLineUpdateBefore)}function Sn(t,e,i,n){function s(t){return i?i[t]:null}function o(t,i,s){an(t,i,s,n),is(t,"change",t,e)}var r=e.from,a=e.to,l=e.text,c=Mn(t,r.line),d=Mn(t,a.line),h=hs(l),u=s(l.length-1),f=a.line-r.line;if(Cn(t,e)){for(var p=0,m=[];p<l.length-1;++p)m.push(new Zo(l[p],s(p),n));o(d,d.text,u),f&&t.remove(r.line,f),m.length&&t.insert(r.line,m)}else if(c==d)if(1==l.length)o(c,c.text.slice(0,r.ch)+h+c.text.slice(a.ch),u);else{for(var m=[],p=1;p<l.length-1;++p)m.push(new Zo(l[p],s(p),n));m.push(new Zo(h+c.text.slice(a.ch),u,n)),o(c,c.text.slice(0,r.ch)+l[0],s(0)),t.insert(r.line+1,m)}else if(1==l.length)o(c,c.text.slice(0,r.ch)+l[0]+d.text.slice(a.ch),s(0)),t.remove(r.line+1,f);else{o(c,c.text.slice(0,r.ch)+l[0],s(0)),o(d,h+d.text.slice(a.ch),u);for(var p=1,m=[];p<l.length-1;++p)m.push(new Zo(l[p],s(p),n));f>1&&t.remove(r.line+1,f-1),t.insert(r.line+1,m)}is(t,"change",t,e)}function Tn(t){this.lines=t,this.parent=null;for(var e=0,i=0;e<t.length;++e)t[e].parent=this,i+=t[e].height;this.height=i}function En(t){this.children=t;for(var e=0,i=0,n=0;n<t.length;++n){var s=t[n];e+=s.chunkSize(),i+=s.height,s.parent=this}this.size=e,this.height=i,this.parent=null}function Dn(t,e,i){function n(t,s,o){if(t.linked)for(var r=0;r<t.linked.length;++r){var a=t.linked[r];if(a.doc!=s){var l=o&&a.sharedHist;i&&!l||(e(a.doc,l),n(a.doc,t,l))}}}n(t,null,!0)}function Pn(t,e){if(e.cm)throw new Error("This document is already in use.");t.doc=e,e.cm=t,r(t),i(t),t.options.lineWrapping||f(t),t.options.mode=e.modeOption,pe(t)}function Mn(t,e){if(e-=t.first,e<0||e>=t.size)throw new Error("There is no line "+(e+t.first)+" in the document.");for(var i=t;!i.lines;)for(var n=0;;++n){var s=i.children[n],o=s.chunkSize();if(e<o){i=s;break}e-=o}return i.lines[e]}function An(t,e,i){var n=[],s=e.line;return t.iter(e.line,i.line+1,function(t){var o=t.text;s==i.line&&(o=o.slice(0,i.ch)),s==e.line&&(o=o.slice(e.ch)),n.push(o),++s}),n}function In(t,e,i){var n=[];return t.iter(e,i,function(t){n.push(t.text)}),n}function Ln(t,e){var i=e-t.height;if(i)for(var n=t;n;n=n.parent)n.height+=i}function jn(t){if(null==t.parent)return null;for(var e=t.parent,i=us(e.lines,t),n=e.parent;n;e=n,n=n.parent)for(var s=0;n.children[s]!=e;++s)i+=n.children[s].chunkSize();return i+e.first}function On(t,e){var i=t.first;t:do{for(var n=0;n<t.children.length;++n){var s=t.children[n],o=s.height;if(e<o){t=s;continue t}e-=o,i+=s.chunkSize()}return i}while(!t.lines);for(var n=0;n<t.lines.length;++n){var r=t.lines[n],a=r.height;if(e<a)break;e-=a}return i+n}function $n(t){t=Qi(t);for(var e=0,i=t.parent,n=0;n<i.lines.length;++n){var s=i.lines[n];if(s==t)break;e+=s.height}for(var o=i.parent;o;i=o,o=i.parent)for(var n=0;n<o.children.length;++n){var r=o.children[n];if(r==i)break;e+=r.height}return e}function Nn(t){var e=t.order;return null==e&&(e=t.order=$r(t.text)),e}function Fn(t){this.done=[],this.undone=[],this.undoDepth=1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=t||1}function Hn(t,e){var i={from:U(e.from),to:Io(e),text:An(t,e.from,e.to)};return Vn(t,i,e.from.line,e.to.line+1),
Dn(t,function(t){Vn(t,i,e.from.line,e.to.line+1)},!0),i}function Rn(t){for(;t.length;){var e=hs(t);if(!e.ranges)break;t.pop()}}function zn(t,e){return e?(Rn(t.done),hs(t.done)):t.done.length&&!hs(t.done).ranges?hs(t.done):t.done.length>1&&!t.done[t.done.length-2].ranges?(t.done.pop(),hs(t.done)):void 0}function Bn(t,e,i,n){var s=t.history;s.undone.length=0;var o,r=+new Date;if((s.lastOp==n||s.lastOrigin==e.origin&&e.origin&&("+"==e.origin.charAt(0)&&t.cm&&s.lastModTime>r-t.cm.options.historyEventDelay||"*"==e.origin.charAt(0)))&&(o=zn(s,s.lastOp==n))){var a=hs(o.changes);0==bo(e.from,e.to)&&0==bo(e.from,a.to)?a.to=Io(e):o.changes.push(Hn(t,e))}else{var l=hs(s.done);for((!l||!l.ranges)&&Un(t.sel,s.done),o={changes:[Hn(t,e)],generation:s.generation},s.done.push(o);s.done.length>s.undoDepth;)s.done.shift(),s.done[0].ranges||s.done.shift()}s.done.push(i),s.generation=++s.maxGeneration,s.lastModTime=s.lastSelTime=r,s.lastOp=s.lastSelOp=n,s.lastOrigin=s.lastSelOrigin=e.origin,a||hr(t,"historyAdded")}function Wn(t,e,i,n){var s=e.charAt(0);return"*"==s||"+"==s&&i.ranges.length==n.ranges.length&&i.somethingSelected()==n.somethingSelected()&&new Date-t.history.lastSelTime<=(t.cm?t.cm.options.historyEventDelay:500)}function qn(t,e,i,n){var s=t.history,o=n&&n.origin;i==s.lastSelOp||o&&s.lastSelOrigin==o&&(s.lastModTime==s.lastSelTime&&s.lastOrigin==o||Wn(t,o,hs(s.done),e))?s.done[s.done.length-1]=e:Un(e,s.done),s.lastSelTime=+new Date,s.lastSelOrigin=o,s.lastSelOp=i,n&&n.clearRedo!==!1&&Rn(s.undone)}function Un(t,e){var i=hs(e);i&&i.ranges&&i.equals(t)||e.push(t)}function Vn(t,e,i,n){var s=e["spans_"+t.id],o=0;t.iter(Math.max(t.first,i),Math.min(t.first+t.size,n),function(i){i.markedSpans&&((s||(s=e["spans_"+t.id]={}))[o]=i.markedSpans),++o})}function Yn(t){if(!t)return null;for(var e,i=0;i<t.length;++i)t[i].marker.explicitlyCleared?e||(e=t.slice(0,i)):e&&e.push(t[i]);return e?e.length?e:null:t}function Gn(t,e){var i=e["spans_"+t.id];if(!i)return null;for(var n=0,s=[];n<e.text.length;++n)s.push(Yn(i[n]));return s}function Kn(t,e,i){for(var n=0,s=[];n<t.length;++n){var o=t[n];if(o.ranges)s.push(i?G.prototype.deepCopy.call(o):o);else{var r=o.changes,a=[];s.push({changes:a});for(var l=0;l<r.length;++l){var c,d=r[l];if(a.push({from:d.from,to:d.to,text:d.text}),e)for(var h in d)(c=h.match(/^spans_(\d+)$/))&&us(e,Number(c[1]))>-1&&(hs(a)[h]=d[h],delete d[h])}}}return s}function Xn(t,e,i,n){i<t.line?t.line+=n:e<t.line&&(t.line=e,t.ch=0)}function Qn(t,e,i,n){for(var s=0;s<t.length;++s){var o=t[s],r=!0;if(o.ranges){o.copied||(o=t[s]=o.deepCopy(),o.copied=!0);for(var a=0;a<o.ranges.length;a++)Xn(o.ranges[a].anchor,e,i,n),Xn(o.ranges[a].head,e,i,n)}else{for(var a=0;a<o.changes.length;++a){var l=o.changes[a];if(i<l.from.line)l.from=yo(l.from.line+n,l.from.ch),l.to=yo(l.to.line+n,l.to.ch);else if(e<=l.to.line){r=!1;break}}r||(t.splice(0,s+1),s=0)}}}function Jn(t,e){var i=e.from.line,n=e.to.line,s=e.text.length-(n-i)-1;Qn(t.done,i,n,s),Qn(t.undone,i,n,s)}function Zn(t){return null!=t.defaultPrevented?t.defaultPrevented:0==t.returnValue}function ts(t){return t.target||t.srcElement}function es(t){var e=t.which;return null==e&&(1&t.button?e=1:2&t.button?e=3:4&t.button&&(e=2)),ho&&t.ctrlKey&&1==e&&(e=3),e}function is(t,e){function i(t){return function(){t.apply(null,o)}}var n=t._handlers&&t._handlers[e];if(n){var s,o=Array.prototype.slice.call(arguments,2);Co?s=Co.delayedCallbacks:ur?s=ur:(s=ur=[],setTimeout(ns,0));for(var r=0;r<n.length;++r)s.push(i(n[r]))}}function ns(){var t=ur;ur=null;for(var e=0;e<t.length;++e)t[e]()}function ss(t,e,i){return hr(t,i||e.type,t,e),Zn(e)||e.codemirrorIgnore}function os(t){var e=t._handlers&&t._handlers.cursorActivity;if(e)for(var i=t.curOp.cursorActivityHandlers||(t.curOp.cursorActivityHandlers=[]),n=0;n<e.length;++n)us(i,e[n])==-1&&i.push(e[n])}function rs(t,e){var i=t._handlers&&t._handlers[e];return i&&i.length>0}function as(t){t.prototype.on=function(t,e){cr(this,t,e)},t.prototype.off=function(t,e){dr(this,t,e)}}function ls(){this.id=null}function cs(t,e,i){for(var n=0,s=0;;){var o=t.indexOf("\t",n);o==-1&&(o=t.length);var r=o-n;if(o==t.length||s+r>=e)return n+Math.min(r,e-s);if(s+=o-n,s+=i-s%i,n=o+1,s>=e)return n}}function ds(t){for(;br.length<=t;)br.push(hs(br)+" ");return br[t]}function hs(t){return t[t.length-1]}function us(t,e){for(var i=0;i<t.length;++i)if(t[i]==e)return i;return-1}function fs(t,e){for(var i=[],n=0;n<t.length;n++)i[n]=e(t[n],n);return i}function ps(t,e){var i;if(Object.create)i=Object.create(t);else{var n=function(){};n.prototype=t,i=new n}return e&&ms(e,i),i}function ms(t,e,i){e||(e={});for(var n in t)t.hasOwnProperty(n)&&(i!==!1||!e.hasOwnProperty(n))&&(e[n]=t[n]);return e}function gs(t){var e=Array.prototype.slice.call(arguments,1);return function(){return t.apply(null,e)}}function vs(t,e){return e?!!(e.source.indexOf("\\w")>-1&&xr(t))||e.test(t):xr(t)}function ys(t){for(var e in t)if(t.hasOwnProperty(e)&&t[e])return!1;return!0}function bs(t){return t.charCodeAt(0)>=768&&Cr.test(t)}function ws(t,e,i,n){var s=document.createElement(t);if(i&&(s.className=i),n&&(s.style.cssText=n),"string"==typeof e)s.appendChild(document.createTextNode(e));else if(e)for(var o=0;o<e.length;++o)s.appendChild(e[o]);return s}function _s(t){for(var e=t.childNodes.length;e>0;--e)t.removeChild(t.firstChild);return t}function ks(t,e){return _s(t).appendChild(e)}function xs(t,e){if(t.contains)return t.contains(e);for(;e=e.parentNode;)if(e==t)return!0}function Cs(){return document.activeElement}function Ss(t){return new RegExp("\\b"+t+"\\b\\s*")}function Ts(t,e){var i=Ss(e);i.test(t.className)&&(t.className=t.className.replace(i,""))}function Es(t,e){Ss(e).test(t.className)||(t.className+=" "+e)}function Ds(t,e){for(var i=t.split(" "),n=0;n<i.length;n++)i[n]&&!Ss(i[n]).test(e)&&(e+=" "+i[n]);return e}function Ps(t){if(document.body.getElementsByClassName)for(var e=document.body.getElementsByClassName("CodeMirror"),i=0;i<e.length;i++){var n=e[i].CodeMirror;n&&t(n)}}function Ms(){Dr||(As(),Dr=!0)}function As(){var t;cr(window,"resize",function(){null==t&&(t=setTimeout(function(){t=null,Sr=null,Ps(Pe)},100))}),cr(window,"blur",function(){Ps(Je)})}function Is(t){if(null!=Sr)return Sr;var e=ws("div",null,null,"width: 50px; height: 50px; overflow-x: scroll");return ks(t,e),e.offsetWidth&&(Sr=e.offsetHeight-e.clientHeight),Sr||0}function Ls(t){if(null==Tr){var e=ws("span","\u200b");ks(t,ws("span",[e,document.createTextNode("x")])),0!=t.firstChild.offsetHeight&&(Tr=e.offsetWidth<=1&&e.offsetHeight>2&&!(Js&&Zs<8))}return Tr?ws("span","\u200b"):ws("span","\xa0",null,"display: inline-block; width: 1px; margin-right: -1px")}function js(t){if(null!=Er)return Er;var e=ks(t,document.createTextNode("A\u062eA")),i=_r(e,0,1).getBoundingClientRect();if(!i||i.left==i.right)return!1;var n=_r(e,1,2).getBoundingClientRect();return Er=n.right-i.right<3}function Os(t){if(null!=Lr)return Lr;var e=ks(t,ws("span","x")),i=e.getBoundingClientRect(),n=_r(e,0,1).getBoundingClientRect();return Lr=Math.abs(i.left-n.left)>1}function $s(t,e,i,n){if(!t)return n(e,i,"ltr");for(var s=!1,o=0;o<t.length;++o){var r=t[o];(r.from<i&&r.to>e||e==i&&r.to==e)&&(n(Math.max(r.from,e),Math.min(r.to,i),1==r.level?"rtl":"ltr"),s=!0)}s||n(e,i,"ltr")}function Ns(t){return t.level%2?t.to:t.from}function Fs(t){return t.level%2?t.from:t.to}function Hs(t){var e=Nn(t);return e?Ns(e[0]):0}function Rs(t){var e=Nn(t);return e?Fs(hs(e)):t.text.length}function zs(t,e){var i=Mn(t.doc,e),n=Qi(i);n!=i&&(e=jn(n));var s=Nn(n),o=s?s[0].level%2?Rs(n):Hs(n):0;return yo(e,o)}function Bs(t,e){for(var i,n=Mn(t.doc,e);i=Ki(n);)n=i.find(1,!0).line,e=null;var s=Nn(n),o=s?s[0].level%2?Hs(n):Rs(n):n.text.length;return yo(null==e?jn(n):e,o)}function Ws(t,e){var i=zs(t,e.line),n=Mn(t.doc,i.line),s=Nn(n);if(!s||0==s[0].level){var o=Math.max(0,n.text.search(/\S/)),r=e.line==i.line&&e.ch<=o&&e.ch;return yo(i.line,r?0:o)}return i}function qs(t,e,i){var n=t[0].level;return e==n||i!=n&&e<i}function Us(t,e){Or=null;for(var i,n=0;n<t.length;++n){var s=t[n];if(s.from<e&&s.to>e)return n;if(s.from==e||s.to==e){if(null!=i)return qs(t,s.level,t[i].level)?(s.from!=s.to&&(Or=i),n):(s.from!=s.to&&(Or=n),i);i=n}}return i}function Vs(t,e,i,n){if(!n)return e+i;do e+=i;while(e>0&&bs(t.text.charAt(e)));return e}function Ys(t,e,i,n){var s=Nn(t);if(!s)return Gs(t,e,i,n);for(var o=Us(s,e),r=s[o],a=Vs(t,e,r.level%2?-i:i,n);;){if(a>r.from&&a<r.to)return a;if(a==r.from||a==r.to)return Us(s,a)==o?a:(r=s[o+=i],i>0==r.level%2?r.to:r.from);if(r=s[o+=i],!r)return null;a=i>0==r.level%2?Vs(t,r.to,-1,n):Vs(t,r.from,1,n)}}function Gs(t,e,i,n){var s=e+i;if(n)for(;s>0&&bs(t.text.charAt(s));)s+=i;return s<0||s>t.text.length?null:s}var Ks=/gecko\/\d/i.test(navigator.userAgent),Xs=/MSIE \d/.test(navigator.userAgent),Qs=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),Js=Xs||Qs,Zs=Js&&(Xs?document.documentMode||6:Qs[1]),to=/WebKit\//.test(navigator.userAgent),eo=to&&/Qt\/\d+\.\d+/.test(navigator.userAgent),io=/Chrome\//.test(navigator.userAgent),no=/Opera\//.test(navigator.userAgent),so=/Apple Computer/.test(navigator.vendor),oo=/KHTML\//.test(navigator.userAgent),ro=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(navigator.userAgent),ao=/PhantomJS/.test(navigator.userAgent),lo=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),co=lo||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(navigator.userAgent),ho=lo||/Mac/.test(navigator.platform),uo=/win/i.test(navigator.platform),fo=no&&navigator.userAgent.match(/Version\/(\d*\.\d*)/);fo&&(fo=Number(fo[1])),fo&&fo>=15&&(no=!1,to=!0);var po=ho&&(eo||no&&(null==fo||fo<12.11)),mo=Ks||Js&&Zs>=9,go=!1,vo=!1,yo=t.Pos=function(t,e){return this instanceof yo?(this.line=t,void(this.ch=e)):new yo(t,e)},bo=t.cmpPos=function(t,e){return t.line-e.line||t.ch-e.ch};G.prototype={primary:function(){return this.ranges[this.primIndex]},equals:function(t){if(t==this)return!0;if(t.primIndex!=this.primIndex||t.ranges.length!=this.ranges.length)return!1;for(var e=0;e<this.ranges.length;e++){var i=this.ranges[e],n=t.ranges[e];if(0!=bo(i.anchor,n.anchor)||0!=bo(i.head,n.head))return!1}return!0},deepCopy:function(){for(var t=[],e=0;e<this.ranges.length;e++)t[e]=new K(U(this.ranges[e].anchor),U(this.ranges[e].head));return new G(t,this.primIndex)},somethingSelected:function(){for(var t=0;t<this.ranges.length;t++)if(!this.ranges[t].empty())return!0;return!1},contains:function(t,e){e||(e=t);for(var i=0;i<this.ranges.length;i++){var n=this.ranges[i];if(bo(e,n.from())>=0&&bo(t,n.to())<=0)return i}return-1}},K.prototype={from:function(){return Y(this.anchor,this.head)},to:function(){return V(this.anchor,this.head)},empty:function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch}};var wo,_o,ko,xo={left:0,right:0,top:0,bottom:0},Co=null,So=0,To=null,Eo=0,Do=0,Po=null;Js?Po=-.53:Ks?Po=15:io?Po=-.7:so&&(Po=-1/3);var Mo,Ao=null,Io=t.changeEnd=function(t){return t.text?yo(t.from.line+t.text.length-1,hs(t.text).length+(1==t.text.length?t.from.ch:0)):t.to};t.prototype={constructor:t,focus:function(){window.focus(),Se(this),ke(this)},setOption:function(t,e){var i=this.options,n=i[t];i[t]==e&&"mode"!=t||(i[t]=e,jo.hasOwnProperty(t)&&ce(this,jo[t])(this,e,n))},getOption:function(t){return this.options[t]},getDoc:function(){return this.doc},addKeyMap:function(t,e){this.state.keyMaps[e?"push":"unshift"](t)},removeKeyMap:function(t){for(var e=this.state.keyMaps,i=0;i<e.length;++i)if(e[i]==t||"string"!=typeof e[i]&&e[i].name==t)return e.splice(i,1),!0},addOverlay:de(function(e,i){var n=e.token?e:t.getMode(this.options,e);if(n.startState)throw new Error("Overlays may not be stateful.");this.state.overlays.push({mode:n,modeSpec:e,opaque:i&&i.opaque}),this.state.modeGen++,pe(this)}),removeOverlay:de(function(t){for(var e=this.state.overlays,i=0;i<e.length;++i){var n=e[i].modeSpec;if(n==t||"string"==typeof t&&n.name==t)return e.splice(i,1),this.state.modeGen++,pe(this),void 0}}),indentLine:de(function(t,e,i){"string"!=typeof e&&"number"!=typeof e&&(e=null==e?this.options.smartIndent?"smart":"prev":e?"add":"subtract"),et(this.doc,t)&&wi(this,t,e,i)}),indentSelection:de(function(t){for(var e=this.doc.sel.ranges,i=-1,n=0;n<e.length;n++){var s=e[n];if(s.empty())s.head.line>i&&(wi(this,s.head.line,t,!0),i=s.head.line,n==this.doc.sel.primIndex&&yi(this));else{var o=s.from(),r=s.to(),a=Math.max(i,o.line);i=Math.min(this.lastLine(),r.line-(r.ch?0:1))+1;for(var l=a;l<i;++l)wi(this,l,t);var c=this.doc.sel.ranges;0==o.ch&&e.length==c.length&&c[n].from().ch>0&&rt(this.doc,n,new K(o,c[n].to()),mr)}}}),getTokenAt:function(t,e){var i=this.doc;t=Z(i,t);for(var n=St(this,t.line,e),s=this.doc.mode,o=Mn(i,t.line),r=new Go(o.text,this.options.tabSize);r.pos<t.ch&&!r.eol();){r.start=r.pos;var a=hn(s,r,n)}return{start:r.start,end:r.pos,string:r.current(),type:a||null,state:n}},getTokenTypeAt:function(t){t=Z(this.doc,t);var e,i=pn(this,Mn(this.doc,t.line)),n=0,s=(i.length-1)/2,o=t.ch;if(0==o)e=i[2];else for(;;){var r=n+s>>1;if((r?i[2*r-1]:0)>=o)s=r;else{if(!(i[2*r+1]<o)){e=i[2*r+2];break}n=r+1}}var a=e?e.indexOf("cm-overlay "):-1;return a<0?e:0==a?null:e.slice(0,a-1)},getModeAt:function(e){var i=this.doc.mode;return i.innerMode?t.innerMode(i,this.getTokenAt(e).state).mode:i},getHelper:function(t,e){return this.getHelpers(t,e)[0]},getHelpers:function(t,e){var i=[];if(!Ro.hasOwnProperty(e))return Ro;var n=Ro[e],s=this.getModeAt(t);if("string"==typeof s[e])n[s[e]]&&i.push(n[s[e]]);else if(s[e])for(var o=0;o<s[e].length;o++){var r=n[s[e][o]];r&&i.push(r)}else s.helperType&&n[s.helperType]?i.push(n[s.helperType]):n[s.name]&&i.push(n[s.name]);for(var o=0;o<n._global.length;o++){var a=n._global[o];a.pred(s,this)&&us(i,a.val)==-1&&i.push(a.val)}return i},getStateAfter:function(t,e){var i=this.doc;return t=J(i,null==t?i.first+i.size-1:t),St(this,t+1,e)},cursorCoords:function(t,e){var i,n=this.doc.sel.primary();return i=null==t?n.head:"object"==typeof t?Z(this.doc,t):t?n.from():n.to(),Vt(this,i,e||"page")},charCoords:function(t,e){return Ut(this,Z(this.doc,t),e||"page")},coordsChar:function(t,e){return t=qt(this,t,e||"page"),Kt(this,t.left,t.top)},lineAtHeight:function(t,e){return t=qt(this,{top:t,left:0},e||"page").top,On(this.doc,t+this.display.viewOffset)},heightAtLine:function(t,e){var i=!1,n=this.doc.first+this.doc.size-1;t<this.doc.first?t=this.doc.first:t>n&&(t=n,i=!0);var s=Mn(this.doc,t);return Wt(this,s,{top:0,left:0},e||"page").top+(i?this.doc.height-$n(s):0)},defaultTextHeight:function(){return Qt(this.display)},defaultCharWidth:function(){return Jt(this.display)},setGutterMarker:de(function(t,e,i){return _i(this.doc,t,"gutter",function(t){var n=t.gutterMarkers||(t.gutterMarkers={});return n[e]=i,!i&&ys(n)&&(t.gutterMarkers=null),!0})}),clearGutter:de(function(t){var e=this,i=e.doc,n=i.first;i.iter(function(i){i.gutterMarkers&&i.gutterMarkers[t]&&(i.gutterMarkers[t]=null,me(e,n,"gutter"),ys(i.gutterMarkers)&&(i.gutterMarkers=null)),++n})}),addLineWidget:de(function(t,e,i){return rn(this,t,e,i)}),removeLineWidget:function(t){t.clear()},lineInfo:function(t){if("number"==typeof t){if(!et(this.doc,t))return null;var e=t;if(t=Mn(this.doc,t),!t)return null}else{var e=jn(t);if(null==e)return null}return{line:e,handle:t,text:t.text,gutterMarkers:t.gutterMarkers,textClass:t.textClass,bgClass:t.bgClass,wrapClass:t.wrapClass,widgets:t.widgets}},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(t,e,i,n,s){var o=this.display;t=Vt(this,Z(this.doc,t));var r=t.bottom,a=t.left;if(e.style.position="absolute",o.sizer.appendChild(e),"over"==n)r=t.top;else if("above"==n||"near"==n){var l=Math.max(o.wrapper.clientHeight,this.doc.height),c=Math.max(o.sizer.clientWidth,o.lineSpace.clientWidth);("above"==n||t.bottom+e.offsetHeight>l)&&t.top>e.offsetHeight?r=t.top-e.offsetHeight:t.bottom+e.offsetHeight<=l&&(r=t.bottom),a+e.offsetWidth>c&&(a=c-e.offsetWidth)}e.style.top=r+"px",e.style.left=e.style.right="","right"==s?(a=o.sizer.clientWidth-e.offsetWidth,e.style.right="0px"):("left"==s?a=0:"middle"==s&&(a=(o.sizer.clientWidth-e.offsetWidth)/2),e.style.left=a+"px"),i&&mi(this,a,r,a+e.offsetWidth,r+e.offsetHeight)},triggerOnKeyDown:de(Ye),triggerOnKeyPress:de(Xe),triggerOnKeyUp:Ke,execCommand:function(t){if(Wo.hasOwnProperty(t))return Wo[t](this)},findPosH:function(t,e,i,n){var s=1;e<0&&(s=-1,e=-e);for(var o=0,r=Z(this.doc,t);o<e&&(r=xi(this.doc,r,s,i,n),!r.hitSide);++o);return r},moveH:de(function(t,e){var i=this;i.extendSelectionsBy(function(n){return i.display.shift||i.doc.extend||n.empty()?xi(i.doc,n.head,t,e,i.options.rtlMoveVisually):t<0?n.from():n.to()},vr)}),deleteH:de(function(t,e){var i=this.doc.sel,n=this.doc;i.somethingSelected()?n.replaceSelection("",null,"+delete"):ki(this,function(i){var s=xi(n,i.head,t,e,!1);return t<0?{from:s,to:i.head}:{from:i.head,to:s}})}),findPosV:function(t,e,i,n){var s=1,o=n;e<0&&(s=-1,e=-e);for(var r=0,a=Z(this.doc,t);r<e;++r){var l=Vt(this,a,"div");if(null==o?o=l.left:l.left=o,a=Ci(this,l,s,i),a.hitSide)break}return a},moveV:de(function(t,e){var i=this,n=this.doc,s=[],o=!i.display.shift&&!n.extend&&n.sel.somethingSelected();if(n.extendSelectionsBy(function(r){if(o)return t<0?r.from():r.to();var a=Vt(i,r.head,"div");null!=r.goalColumn&&(a.left=r.goalColumn),s.push(a.left);var l=Ci(i,a,t,e);return"page"==e&&r==n.sel.primary()&&vi(i,null,Ut(i,l,"div").top-a.top),l},vr),s.length)for(var r=0;r<n.sel.ranges.length;r++)n.sel.ranges[r].goalColumn=s[r]}),findWordAt:function(t){var e=this.doc,i=Mn(e,t.line).text,n=t.ch,s=t.ch;if(i){var o=this.getHelper(t,"wordChars");(t.xRel<0||s==i.length)&&n?--n:++s;for(var r=i.charAt(n),a=vs(r,o)?function(t){return vs(t,o)}:/\s/.test(r)?function(t){return/\s/.test(t)}:function(t){return!/\s/.test(t)&&!vs(t)};n>0&&a(i.charAt(n-1));)--n;for(;s<i.length&&a(i.charAt(s));)++s}return new K(yo(t.line,n),yo(t.line,s))},toggleOverwrite:function(t){null!=t&&t==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?Es(this.display.cursorDiv,"CodeMirror-overwrite"):Ts(this.display.cursorDiv,"CodeMirror-overwrite"),hr(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return Cs()==this.display.input},scrollTo:de(function(t,e){(null!=t||null!=e)&&bi(this),null!=t&&(this.curOp.scrollLeft=t),null!=e&&(this.curOp.scrollTop=e)}),getScrollInfo:function(){var t=this.display.scroller,e=fr;return{left:t.scrollLeft,top:t.scrollTop,height:t.scrollHeight-e,width:t.scrollWidth-e,clientHeight:t.clientHeight-e,clientWidth:t.clientWidth-e}},scrollIntoView:de(function(t,e){if(null==t?(t={from:this.doc.sel.primary().head,to:null},null==e&&(e=this.options.cursorScrollMargin)):"number"==typeof t?t={from:yo(t,0),to:null}:null==t.from&&(t={from:t,to:null}),t.to||(t.to=t.from),t.margin=e||0,null!=t.from.line)bi(this),this.curOp.scrollToPos=t;else{var i=gi(this,Math.min(t.from.left,t.to.left),Math.min(t.from.top,t.to.top)-t.margin,Math.max(t.from.right,t.to.right),Math.max(t.from.bottom,t.to.bottom)+t.margin);this.scrollTo(i.scrollLeft,i.scrollTop)}}),setSize:de(function(t,e){function i(t){return"number"==typeof t||/^\d+$/.test(String(t))?t+"px":t}var n=this;null!=t&&(n.display.wrapper.style.width=i(t)),null!=e&&(n.display.wrapper.style.height=i(e)),n.options.lineWrapping&&Ht(this);var s=n.display.viewFrom;n.doc.iter(s,n.display.viewTo,function(t){if(t.widgets)for(var e=0;e<t.widgets.length;e++)if(t.widgets[e].noHScroll){me(n,s,"widget");break}++s}),n.curOp.forceUpdate=!0,hr(n,"refresh",this)}),operation:function(t){return le(this,t)},refresh:de(function(){var t=this.display.cachedTextHeight;pe(this),this.curOp.forceUpdate=!0,Rt(this),this.scrollTo(this.doc.scrollLeft,this.doc.scrollTop),h(this),(null==t||Math.abs(t-Qt(this.display))>.5)&&r(this),hr(this,"refresh",this)}),swapDoc:de(function(t){var e=this.doc;return e.cm=null,Pn(this,t),Rt(this),Ce(this),this.scrollTo(t.scrollLeft,t.scrollTop),this.curOp.forceScroll=!0,is(this,"swapDoc",this,e),e}),getInputField:function(){return this.display.input},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},as(t);var Lo=t.defaults={},jo=t.optionHandlers={},Oo=t.Init={toString:function(){return"CodeMirror.Init"}};Si("value","",function(t,e){t.setValue(e)},!0),Si("mode",null,function(t,e){t.doc.modeOption=e,i(t)},!0),Si("indentUnit",2,i,!0),Si("indentWithTabs",!1),Si("smartIndent",!0),Si("tabSize",4,function(t){n(t),Rt(t),pe(t)},!0),Si("specialChars",/[\t\u0000-\u0019\u00ad\u200b-\u200f\u2028\u2029\ufeff]/g,function(t,e){t.options.specialChars=new RegExp(e.source+(e.test("\t")?"":"|\t"),"g"),t.refresh()},!0),Si("specialCharPlaceholder",yn,function(t){t.refresh()},!0),Si("electricChars",!0),Si("rtlMoveVisually",!uo),Si("wholeLineUpdateBefore",!0),Si("theme","default",function(t){l(t),c(t)},!0),Si("keyMap","default",a),Si("extraKeys",null),Si("lineWrapping",!1,s,!0),Si("gutters",[],function(t){p(t.options),c(t)},!0),Si("fixedGutter",!0,function(t,e){t.display.gutters.style.left=e?k(t.display)+"px":"0",t.refresh()},!0),Si("coverGutterNextToScrollbar",!1,v,!0),Si("lineNumbers",!1,function(t){p(t.options),c(t)},!0),Si("firstLineNumber",1,c,!0),Si("lineNumberFormatter",function(t){return t},c,!0),Si("showCursorWhenSelecting",!1,yt,!0),Si("resetSelectionOnContextMenu",!0),Si("readOnly",!1,function(t,e){"nocursor"==e?(Je(t),t.display.input.blur(),t.display.disabled=!0):(t.display.disabled=!1,e||Ce(t))}),Si("disableInput",!1,function(t,e){e||Ce(t)},!0),Si("dragDrop",!0),Si("cursorBlinkRate",530),Si("cursorScrollMargin",0),Si("cursorHeight",1,yt,!0),Si("singleCursorHeightPerLine",!0,yt,!0),Si("workTime",100),Si("workDelay",100),Si("flattenSpans",!0,n,!0),Si("addModeClass",!1,n,!0),Si("pollInterval",100),Si("undoDepth",200,function(t,e){t.doc.history.undoDepth=e}),Si("historyEventDelay",1250),Si("viewportMargin",10,function(t){t.refresh()},!0),Si("maxHighlightLength",1e4,n,!0),Si("moveInputWithCursor",!0,function(t,e){e||(t.display.inputDiv.style.top=t.display.inputDiv.style.left=0)}),Si("tabindex",null,function(t,e){t.display.input.tabIndex=e||""}),Si("autofocus",null);var $o=t.modes={},No=t.mimeModes={};t.defineMode=function(e,i){!t.defaults.mode&&"null"!=e&&(t.defaults.mode=e),arguments.length>2&&(i.dependencies=Array.prototype.slice.call(arguments,2)),$o[e]=i},t.defineMIME=function(t,e){No[t]=e},t.resolveMode=function(e){if("string"==typeof e&&No.hasOwnProperty(e))e=No[e];else if(e&&"string"==typeof e.name&&No.hasOwnProperty(e.name)){var i=No[e.name];"string"==typeof i&&(i={name:i}),e=ps(i,e),e.name=i.name}else if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+xml$/.test(e))return t.resolveMode("application/xml");return"string"==typeof e?{name:e}:e||{name:"null"}},t.getMode=function(e,i){var i=t.resolveMode(i),n=$o[i.name];if(!n)return t.getMode(e,"text/plain");var s=n(e,i);if(Fo.hasOwnProperty(i.name)){var o=Fo[i.name];for(var r in o)o.hasOwnProperty(r)&&(s.hasOwnProperty(r)&&(s["_"+r]=s[r]),s[r]=o[r])}if(s.name=i.name,i.helperType&&(s.helperType=i.helperType),i.modeProps)for(var r in i.modeProps)s[r]=i.modeProps[r];return s},t.defineMode("null",function(){return{token:function(t){t.skipToEnd()}}}),t.defineMIME("text/plain","null");var Fo=t.modeExtensions={};t.extendMode=function(t,e){var i=Fo.hasOwnProperty(t)?Fo[t]:Fo[t]={};ms(e,i)},t.defineExtension=function(e,i){t.prototype[e]=i},t.defineDocExtension=function(t,e){nr.prototype[t]=e},t.defineOption=Si;var Ho=[];t.defineInitHook=function(t){Ho.push(t)};var Ro=t.helpers={};t.registerHelper=function(e,i,n){Ro.hasOwnProperty(e)||(Ro[e]=t[e]={_global:[]}),Ro[e][i]=n},t.registerGlobalHelper=function(e,i,n,s){t.registerHelper(e,i,s),Ro[e]._global.push({pred:n,val:s})};var zo=t.copyState=function(t,e){if(e===!0)return e;if(t.copyState)return t.copyState(e);var i={};for(var n in e){var s=e[n];s instanceof Array&&(s=s.concat([])),i[n]=s}return i},Bo=t.startState=function(t,e,i){return!t.startState||t.startState(e,i)};t.innerMode=function(t,e){for(;t.innerMode;){var i=t.innerMode(e);if(!i||i.mode==t)break;e=i.state,t=i.mode}return i||{mode:t,state:e}};var Wo=t.commands={selectAll:function(t){t.setSelection(yo(t.firstLine(),0),yo(t.lastLine()),mr)},singleSelection:function(t){t.setSelection(t.getCursor("anchor"),t.getCursor("head"),mr)},killLine:function(t){ki(t,function(e){if(e.empty()){var i=Mn(t.doc,e.head.line).text.length;return e.head.ch==i&&e.head.line<t.lastLine()?{from:e.head,to:yo(e.head.line+1,0)}:{from:e.head,to:yo(e.head.line,i)}}return{from:e.from(),to:e.to()}})},deleteLine:function(t){ki(t,function(e){return{from:yo(e.from().line,0),to:Z(t.doc,yo(e.to().line+1,0))}})},delLineLeft:function(t){ki(t,function(t){return{from:yo(t.from().line,0),to:t.from()}})},delWrappedLineLeft:function(t){ki(t,function(e){var i=t.charCoords(e.head,"div").top+5,n=t.coordsChar({left:0,top:i},"div");return{from:n,to:e.from()}})},delWrappedLineRight:function(t){ki(t,function(e){var i=t.charCoords(e.head,"div").top+5,n=t.coordsChar({left:t.display.lineDiv.offsetWidth+100,top:i},"div");return{from:e.from(),to:n}})},undo:function(t){t.undo()},redo:function(t){t.redo()},undoSelection:function(t){t.undoSelection()},redoSelection:function(t){t.redoSelection()},goDocStart:function(t){t.extendSelection(yo(t.firstLine(),0))},goDocEnd:function(t){t.extendSelection(yo(t.lastLine()))},goLineStart:function(t){t.extendSelectionsBy(function(e){return zs(t,e.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(t){t.extendSelectionsBy(function(e){return Ws(t,e.head)},{origin:"+move",bias:1})},goLineEnd:function(t){t.extendSelectionsBy(function(e){return Bs(t,e.head.line)},{origin:"+move",bias:-1})},goLineRight:function(t){t.extendSelectionsBy(function(e){var i=t.charCoords(e.head,"div").top+5;return t.coordsChar({left:t.display.lineDiv.offsetWidth+100,top:i},"div")},vr)},goLineLeft:function(t){t.extendSelectionsBy(function(e){var i=t.charCoords(e.head,"div").top+5;return t.coordsChar({left:0,top:i},"div")},vr)},goLineLeftSmart:function(t){t.extendSelectionsBy(function(e){var i=t.charCoords(e.head,"div").top+5,n=t.coordsChar({left:0,top:i},"div");return n.ch<t.getLine(n.line).search(/\S/)?Ws(t,e.head):n},vr)},goLineUp:function(t){t.moveV(-1,"line")},goLineDown:function(t){t.moveV(1,"line")},goPageUp:function(t){t.moveV(-1,"page")},goPageDown:function(t){t.moveV(1,"page")},goCharLeft:function(t){t.moveH(-1,"char")},goCharRight:function(t){t.moveH(1,"char")},goColumnLeft:function(t){t.moveH(-1,"column")},goColumnRight:function(t){t.moveH(1,"column")},goWordLeft:function(t){t.moveH(-1,"word")},goGroupRight:function(t){t.moveH(1,"group")},goGroupLeft:function(t){t.moveH(-1,"group")},goWordRight:function(t){t.moveH(1,"word")},delCharBefore:function(t){t.deleteH(-1,"char")},delCharAfter:function(t){t.deleteH(1,"char")},delWordBefore:function(t){t.deleteH(-1,"word")},delWordAfter:function(t){t.deleteH(1,"word")},delGroupBefore:function(t){t.deleteH(-1,"group")},delGroupAfter:function(t){t.deleteH(1,"group")},indentAuto:function(t){t.indentSelection("smart")},indentMore:function(t){t.indentSelection("add")},indentLess:function(t){t.indentSelection("subtract")},insertTab:function(t){t.replaceSelection("\t")},insertSoftTab:function(t){for(var e=[],i=t.listSelections(),n=t.options.tabSize,s=0;s<i.length;s++){var o=i[s].from(),r=yr(t.getLine(o.line),o.ch,n);e.push(new Array(n-r%n+1).join(" "))}t.replaceSelections(e)},defaultTab:function(t){t.somethingSelected()?t.indentSelection("add"):t.execCommand("insertTab")},transposeChars:function(t){le(t,function(){for(var e=t.listSelections(),i=[],n=0;n<e.length;n++){var s=e[n].head,o=Mn(t.doc,s.line).text;if(o)if(s.ch==o.length&&(s=new yo(s.line,s.ch-1)),s.ch>0)s=new yo(s.line,s.ch+1),t.replaceRange(o.charAt(s.ch-1)+o.charAt(s.ch-2),yo(s.line,s.ch-2),s,"+transpose");else if(s.line>t.doc.first){var r=Mn(t.doc,s.line-1).text;r&&t.replaceRange(o.charAt(0)+"\n"+r.charAt(r.length-1),yo(s.line-1,r.length-1),yo(s.line,1),"+transpose")}i.push(new K(s,s))}t.setSelections(i)})},newlineAndIndent:function(t){le(t,function(){for(var e=t.listSelections().length,i=0;i<e;i++){var n=t.listSelections()[i];t.replaceRange("\n",n.anchor,n.head,"+input"),t.indentLine(n.from().line+1,null,!0),yi(t)}})},toggleOverwrite:function(t){t.toggleOverwrite()}},qo=t.keyMap={};qo.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},qo.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},qo.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},qo.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"},qo["default"]=ho?qo.macDefault:qo.pcDefault;var Uo=t.lookupKey=function(t,e,i){function n(e){e=Ti(e);var s=e[t];if(s===!1)return"stop";if(null!=s&&i(s))return!0;if(e.nofallthrough)return"stop";var o=e.fallthrough;if(null==o)return!1;if("[object Array]"!=Object.prototype.toString.call(o))return n(o);for(var r=0;r<o.length;++r){var a=n(o[r]);if(a)return a}return!1}for(var s=0;s<e.length;++s){var o=n(e[s]);if(o)return"stop"!=o}},Vo=t.isModifierKey=function(t){var e=jr[t.keyCode];return"Ctrl"==e||"Alt"==e||"Shift"==e||"Mod"==e},Yo=t.keyName=function(t,e){if(no&&34==t.keyCode&&t["char"])return!1;var i=jr[t.keyCode];return null!=i&&!t.altGraphKey&&(t.altKey&&(i="Alt-"+i),(po?t.metaKey:t.ctrlKey)&&(i="Ctrl-"+i),(po?t.ctrlKey:t.metaKey)&&(i="Cmd-"+i),!e&&t.shiftKey&&(i="Shift-"+i),i)};t.fromTextArea=function(e,i){function n(){e.value=l.getValue()}if(i||(i={}),i.value=e.value,!i.tabindex&&e.tabindex&&(i.tabindex=e.tabindex),!i.placeholder&&e.placeholder&&(i.placeholder=e.placeholder),null==i.autofocus){var s=Cs();i.autofocus=s==e||null!=e.getAttribute("autofocus")&&s==document.body}if(e.form&&(cr(e.form,"submit",n),!i.leaveSubmitMethodAlone)){var o=e.form,r=o.submit;try{var a=o.submit=function(){n(),o.submit=r,o.submit(),o.submit=a}}catch(t){}}e.style.display="none";var l=t(function(t){e.parentNode.insertBefore(t,e.nextSibling)},i);return l.save=n,l.getTextArea=function(){return e},l.toTextArea=function(){l.toTextArea=isNaN,n(),e.parentNode.removeChild(l.getWrapperElement()),e.style.display="",e.form&&(dr(e.form,"submit",n),"function"==typeof e.form.submit&&(e.form.submit=r))},l};var Go=t.StringStream=function(t,e){this.pos=this.start=0,this.string=t,this.tabSize=e||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0};Go.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==this.lineStart},peek:function(){return this.string.charAt(this.pos)||void 0},next:function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},eat:function(t){var e=this.string.charAt(this.pos);if("string"==typeof t)var i=e==t;else var i=e&&(t.test?t.test(e):t(e));if(i)return++this.pos,e},eatWhile:function(t){for(var e=this.pos;this.eat(t););return this.pos>e},eatSpace:function(){for(var t=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;
return this.pos>t},skipToEnd:function(){this.pos=this.string.length},skipTo:function(t){var e=this.string.indexOf(t,this.pos);if(e>-1)return this.pos=e,!0},backUp:function(t){this.pos-=t},column:function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=yr(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?yr(this.string,this.lineStart,this.tabSize):0)},indentation:function(){return yr(this.string,null,this.tabSize)-(this.lineStart?yr(this.string,this.lineStart,this.tabSize):0)},match:function(t,e,i){if("string"!=typeof t){var n=this.string.slice(this.pos).match(t);return n&&n.index>0?null:(n&&e!==!1&&(this.pos+=n[0].length),n)}var s=function(t){return i?t.toLowerCase():t},o=this.string.substr(this.pos,t.length);if(s(o)==s(t))return e!==!1&&(this.pos+=t.length),!0},current:function(){return this.string.slice(this.start,this.pos)},hideFirstChars:function(t,e){this.lineStart+=t;try{return e()}finally{this.lineStart-=t}}};var Ko=t.TextMarker=function(t,e){this.lines=[],this.type=e,this.doc=t};as(Ko),Ko.prototype.clear=function(){if(!this.explicitlyCleared){var t=this.doc.cm,e=t&&!t.curOp;if(e&&Zt(t),rs(this,"clear")){var i=this.find();i&&is(this,"clear",i.from,i.to)}for(var n=null,s=null,o=0;o<this.lines.length;++o){var r=this.lines[o],a=Li(r.markedSpans,this);t&&!this.collapsed?me(t,jn(r),"text"):t&&(null!=a.to&&(s=jn(r)),null!=a.from&&(n=jn(r))),r.markedSpans=ji(r.markedSpans,a),null==a.from&&this.collapsed&&!en(this.doc,r)&&t&&Ln(r,Qt(t.display))}if(t&&this.collapsed&&!t.options.lineWrapping)for(var o=0;o<this.lines.length;++o){var l=Qi(this.lines[o]),c=u(l);c>t.display.maxLineLength&&(t.display.maxLine=l,t.display.maxLineLength=c,t.display.maxLineChanged=!0)}null!=n&&t&&this.collapsed&&pe(t,n,s+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,t&&ft(t.doc)),t&&is(t,"markerCleared",t,this),e&&ee(t),this.parent&&this.parent.clear()}},Ko.prototype.find=function(t,e){null==t&&"bookmark"==this.type&&(t=1);for(var i,n,s=0;s<this.lines.length;++s){var o=this.lines[s],r=Li(o.markedSpans,this);if(null!=r.from&&(i=yo(e?o:jn(o),r.from),t==-1))return i;if(null!=r.to&&(n=yo(e?o:jn(o),r.to),1==t))return n}return i&&{from:i,to:n}},Ko.prototype.changed=function(){var t=this.find(-1,!0),e=this,i=this.doc.cm;t&&i&&le(i,function(){var n=t.line,s=jn(t.line),o=Lt(i,s);if(o&&(Ft(o),i.curOp.selectionChanged=i.curOp.forceUpdate=!0),i.curOp.updateMaxLine=!0,!en(e.doc,n)&&null!=e.height){var r=e.height;e.height=null;var a=on(e)-r;a&&Ln(n,n.height+a)}})},Ko.prototype.attachLine=function(t){if(!this.lines.length&&this.doc.cm){var e=this.doc.cm.curOp;(!e.maybeHiddenMarkers||us(e.maybeHiddenMarkers,this)==-1)&&(e.maybeUnhiddenMarkers||(e.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(t)},Ko.prototype.detachLine=function(t){if(this.lines.splice(us(this.lines,t),1),!this.lines.length&&this.doc.cm){var e=this.doc.cm.curOp;(e.maybeHiddenMarkers||(e.maybeHiddenMarkers=[])).push(this)}};var Xo=0,Qo=t.SharedTextMarker=function(t,e){this.markers=t,this.primary=e;for(var i=0;i<t.length;++i)t[i].parent=this};as(Qo),Qo.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var t=0;t<this.markers.length;++t)this.markers[t].clear();is(this,"clear")}},Qo.prototype.find=function(t,e){return this.primary.find(t,e)};var Jo=t.LineWidget=function(t,e,i){if(i)for(var n in i)i.hasOwnProperty(n)&&(this[n]=i[n]);this.cm=t,this.node=e};as(Jo),Jo.prototype.clear=function(){var t=this.cm,e=this.line.widgets,i=this.line,n=jn(i);if(null!=n&&e){for(var s=0;s<e.length;++s)e[s]==this&&e.splice(s--,1);e.length||(i.widgets=null);var o=on(this);le(t,function(){sn(t,i,-o),me(t,n,"widget"),Ln(i,Math.max(0,i.height-o))})}},Jo.prototype.changed=function(){var t=this.height,e=this.cm,i=this.line;this.height=null;var n=on(this)-t;n&&le(e,function(){e.curOp.forceUpdate=!0,sn(e,i,n),Ln(i,i.height+n)})};var Zo=t.Line=function(t,e,i){this.text=t,Wi(this,e),this.height=i?i(this):1};as(Zo),Zo.prototype.lineNo=function(){return jn(this)};var tr={},er={};Tn.prototype={chunkSize:function(){return this.lines.length},removeInner:function(t,e){for(var i=t,n=t+e;i<n;++i){var s=this.lines[i];this.height-=s.height,ln(s),is(s,"delete")}this.lines.splice(t,e)},collapse:function(t){t.push.apply(t,this.lines)},insertInner:function(t,e,i){this.height+=i,this.lines=this.lines.slice(0,t).concat(e).concat(this.lines.slice(t));for(var n=0;n<e.length;++n)e[n].parent=this},iterN:function(t,e,i){for(var n=t+e;t<n;++t)if(i(this.lines[t]))return!0}},En.prototype={chunkSize:function(){return this.size},removeInner:function(t,e){this.size-=e;for(var i=0;i<this.children.length;++i){var n=this.children[i],s=n.chunkSize();if(t<s){var o=Math.min(e,s-t),r=n.height;if(n.removeInner(t,o),this.height-=r-n.height,s==o&&(this.children.splice(i--,1),n.parent=null),0==(e-=o))break;t=0}else t-=s}if(this.size-e<25&&(this.children.length>1||!(this.children[0]instanceof Tn))){var a=[];this.collapse(a),this.children=[new Tn(a)],this.children[0].parent=this}},collapse:function(t){for(var e=0;e<this.children.length;++e)this.children[e].collapse(t)},insertInner:function(t,e,i){this.size+=e.length,this.height+=i;for(var n=0;n<this.children.length;++n){var s=this.children[n],o=s.chunkSize();if(t<=o){if(s.insertInner(t,e,i),s.lines&&s.lines.length>50){for(;s.lines.length>50;){var r=s.lines.splice(s.lines.length-25,25),a=new Tn(r);s.height-=a.height,this.children.splice(n+1,0,a),a.parent=this}this.maybeSpill()}break}t-=o}},maybeSpill:function(){if(!(this.children.length<=10)){var t=this;do{var e=t.children.splice(t.children.length-5,5),i=new En(e);if(t.parent){t.size-=i.size,t.height-=i.height;var n=us(t.parent.children,t);t.parent.children.splice(n+1,0,i)}else{var s=new En(t.children);s.parent=t,t.children=[s,i],t=s}i.parent=t.parent}while(t.children.length>10);t.parent.maybeSpill()}},iterN:function(t,e,i){for(var n=0;n<this.children.length;++n){var s=this.children[n],o=s.chunkSize();if(t<o){var r=Math.min(e,o-t);if(s.iterN(t,r,i))return!0;if(0==(e-=r))break;t=0}else t-=o}}};var ir=0,nr=t.Doc=function(t,e,i){if(!(this instanceof nr))return new nr(t,e,i);null==i&&(i=0),En.call(this,[new Tn([new Zo("",null)])]),this.first=i,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.frontier=i;var n=yo(i,0);this.sel=Q(n),this.history=new Fn(null),this.id=++ir,this.modeOption=e,"string"==typeof t&&(t=Mr(t)),Sn(this,{from:n,to:n,text:t}),dt(this,Q(n),mr)};nr.prototype=ps(En.prototype,{constructor:nr,iter:function(t,e,i){i?this.iterN(t-this.first,e-t,i):this.iterN(this.first,this.first+this.size,t)},insert:function(t,e){for(var i=0,n=0;n<e.length;++n)i+=e[n].height;this.insertInner(t-this.first,e,i)},remove:function(t,e){this.removeInner(t-this.first,e)},getValue:function(t){var e=In(this,this.first,this.first+this.size);return t===!1?e:e.join(t||"\n")},setValue:he(function(t){var e=yo(this.first,0),i=this.first+this.size-1;ri(this,{from:e,to:yo(i,Mn(this,i).text.length),text:Mr(t),origin:"setValue"},!0),dt(this,Q(e))}),replaceRange:function(t,e,i,n){e=Z(this,e),i=i?Z(this,i):e,ui(this,t,e,i,n)},getRange:function(t,e,i){var n=An(this,Z(this,t),Z(this,e));return i===!1?n:n.join(i||"\n")},getLine:function(t){var e=this.getLineHandle(t);return e&&e.text},getLineHandle:function(t){if(et(this,t))return Mn(this,t)},getLineNumber:function(t){return jn(t)},getLineHandleVisualStart:function(t){return"number"==typeof t&&(t=Mn(this,t)),Qi(t)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(t){return Z(this,t)},getCursor:function(t){var e,i=this.sel.primary();return e=null==t||"head"==t?i.head:"anchor"==t?i.anchor:"end"==t||"to"==t||t===!1?i.to():i.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:he(function(t,e,i){at(this,Z(this,"number"==typeof t?yo(t,e||0):t),null,i)}),setSelection:he(function(t,e,i){at(this,Z(this,t),Z(this,e||t),i)}),extendSelection:he(function(t,e,i){st(this,Z(this,t),e&&Z(this,e),i)}),extendSelections:he(function(t,e){ot(this,it(this,t,e))}),extendSelectionsBy:he(function(t,e){ot(this,fs(this.sel.ranges,t),e)}),setSelections:he(function(t,e,i){if(t.length){for(var n=0,s=[];n<t.length;n++)s[n]=new K(Z(this,t[n].anchor),Z(this,t[n].head));null==e&&(e=Math.min(t.length-1,this.sel.primIndex)),dt(this,X(s,e),i)}}),addSelection:he(function(t,e,i){var n=this.sel.ranges.slice(0);n.push(new K(Z(this,t),Z(this,e||t))),dt(this,X(n,n.length-1),i)}),getSelection:function(t){for(var e,i=this.sel.ranges,n=0;n<i.length;n++){var s=An(this,i[n].from(),i[n].to());e=e?e.concat(s):s}return t===!1?e:e.join(t||"\n")},getSelections:function(t){for(var e=[],i=this.sel.ranges,n=0;n<i.length;n++){var s=An(this,i[n].from(),i[n].to());t!==!1&&(s=s.join(t||"\n")),e[n]=s}return e},replaceSelection:function(t,e,i){for(var n=[],s=0;s<this.sel.ranges.length;s++)n[s]=t;this.replaceSelections(n,e,i||"+input")},replaceSelections:he(function(t,e,i){for(var n=[],s=this.sel,o=0;o<s.ranges.length;o++){var r=s.ranges[o];n[o]={from:r.from(),to:r.to(),text:Mr(t[o]),origin:i}}for(var a=e&&"end"!=e&&si(this,n,e),o=n.length-1;o>=0;o--)ri(this,n[o]);a?ct(this,a):this.cm&&yi(this.cm)}),undo:he(function(){li(this,"undo")}),redo:he(function(){li(this,"redo")}),undoSelection:he(function(){li(this,"undo",!0)}),redoSelection:he(function(){li(this,"redo",!0)}),setExtending:function(t){this.extend=t},getExtending:function(){return this.extend},historySize:function(){for(var t=this.history,e=0,i=0,n=0;n<t.done.length;n++)t.done[n].ranges||++e;for(var n=0;n<t.undone.length;n++)t.undone[n].ranges||++i;return{undo:e,redo:i}},clearHistory:function(){this.history=new Fn(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(t){return t&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(t){return this.history.generation==(t||this.cleanGeneration)},getHistory:function(){return{done:Kn(this.history.done),undone:Kn(this.history.undone)}},setHistory:function(t){var e=this.history=new Fn(this.history.maxGeneration);e.done=Kn(t.done.slice(0),null,!0),e.undone=Kn(t.undone.slice(0),null,!0)},addLineClass:he(function(t,e,i){return _i(this,t,"class",function(t){var n="text"==e?"textClass":"background"==e?"bgClass":"wrapClass";if(t[n]){if(new RegExp("(?:^|\\s)"+i+"(?:$|\\s)").test(t[n]))return!1;t[n]+=" "+i}else t[n]=i;return!0})}),removeLineClass:he(function(t,e,i){return _i(this,t,"class",function(t){var n="text"==e?"textClass":"background"==e?"bgClass":"wrapClass",s=t[n];if(!s)return!1;if(null==i)t[n]=null;else{var o=s.match(new RegExp("(?:^|\\s+)"+i+"(?:$|\\s+)"));if(!o)return!1;var r=o.index+o[0].length;t[n]=s.slice(0,o.index)+(o.index&&r!=s.length?" ":"")+s.slice(r)||null}return!0})}),markText:function(t,e,i){return Ei(this,Z(this,t),Z(this,e),i,"range")},setBookmark:function(t,e){var i={replacedWith:e&&(null==e.nodeType?e.widget:e),insertLeft:e&&e.insertLeft,clearWhenEmpty:!1,shared:e&&e.shared};return t=Z(this,t),Ei(this,t,t,i,"bookmark")},findMarksAt:function(t){t=Z(this,t);var e=[],i=Mn(this,t.line).markedSpans;if(i)for(var n=0;n<i.length;++n){var s=i[n];(null==s.from||s.from<=t.ch)&&(null==s.to||s.to>=t.ch)&&e.push(s.marker.parent||s.marker)}return e},findMarks:function(t,e,i){t=Z(this,t),e=Z(this,e);var n=[],s=t.line;return this.iter(t.line,e.line+1,function(o){var r=o.markedSpans;if(r)for(var a=0;a<r.length;a++){var l=r[a];!(s==t.line&&t.ch>l.to||null==l.from&&s!=t.line||s==e.line&&l.from>e.ch)&&(!i||i(l.marker))&&n.push(l.marker.parent||l.marker)}++s}),n},getAllMarks:function(){var t=[];return this.iter(function(e){var i=e.markedSpans;if(i)for(var n=0;n<i.length;++n)null!=i[n].from&&t.push(i[n].marker)}),t},posFromIndex:function(t){var e,i=this.first;return this.iter(function(n){var s=n.text.length+1;return s>t?(e=t,!0):(t-=s,void++i)}),Z(this,yo(i,e))},indexFromPos:function(t){t=Z(this,t);var e=t.ch;return t.line<this.first||t.ch<0?0:(this.iter(this.first,t.line,function(t){e+=t.text.length+1}),e)},copy:function(t){var e=new nr(In(this,this.first,this.first+this.size),this.modeOption,this.first);return e.scrollTop=this.scrollTop,e.scrollLeft=this.scrollLeft,e.sel=this.sel,e.extend=!1,t&&(e.history.undoDepth=this.history.undoDepth,e.setHistory(this.getHistory())),e},linkedDoc:function(t){t||(t={});var e=this.first,i=this.first+this.size;null!=t.from&&t.from>e&&(e=t.from),null!=t.to&&t.to<i&&(i=t.to);var n=new nr(In(this,e,i),t.mode||this.modeOption,e);return t.sharedHist&&(n.history=this.history),(this.linked||(this.linked=[])).push({doc:n,sharedHist:t.sharedHist}),n.linked=[{doc:this,isParent:!0,sharedHist:t.sharedHist}],Mi(n,Pi(this)),n},unlinkDoc:function(e){if(e instanceof t&&(e=e.doc),this.linked)for(var i=0;i<this.linked.length;++i){var n=this.linked[i];if(n.doc==e){this.linked.splice(i,1),e.unlinkDoc(this),Ai(Pi(this));break}}if(e.history==this.history){var s=[e.id];Dn(e,function(t){s.push(t.id)},!0),e.history=new Fn(null),e.history.done=Kn(this.history.done,s),e.history.undone=Kn(this.history.undone,s)}},iterLinkedDocs:function(t){Dn(this,t)},getMode:function(){return this.mode},getEditor:function(){return this.cm}}),nr.prototype.eachLine=nr.prototype.iter;var sr="iter insert remove copy getEditor".split(" ");for(var or in nr.prototype)nr.prototype.hasOwnProperty(or)&&us(sr,or)<0&&(t.prototype[or]=function(t){return function(){return t.apply(this.doc,arguments)}}(nr.prototype[or]));as(nr);var rr=t.e_preventDefault=function(t){t.preventDefault?t.preventDefault():t.returnValue=!1},ar=t.e_stopPropagation=function(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0},lr=t.e_stop=function(t){rr(t),ar(t)},cr=t.on=function(t,e,i){if(t.addEventListener)t.addEventListener(e,i,!1);else if(t.attachEvent)t.attachEvent("on"+e,i);else{var n=t._handlers||(t._handlers={}),s=n[e]||(n[e]=[]);s.push(i)}},dr=t.off=function(t,e,i){if(t.removeEventListener)t.removeEventListener(e,i,!1);else if(t.detachEvent)t.detachEvent("on"+e,i);else{var n=t._handlers&&t._handlers[e];if(!n)return;for(var s=0;s<n.length;++s)if(n[s]==i){n.splice(s,1);break}}},hr=t.signal=function(t,e){var i=t._handlers&&t._handlers[e];if(i)for(var n=Array.prototype.slice.call(arguments,2),s=0;s<i.length;++s)i[s].apply(null,n)},ur=null,fr=30,pr=t.Pass={toString:function(){return"CodeMirror.Pass"}},mr={scroll:!1},gr={origin:"*mouse"},vr={origin:"+move"};ls.prototype.set=function(t,e){clearTimeout(this.id),this.id=setTimeout(e,t)};var yr=t.countColumn=function(t,e,i,n,s){null==e&&(e=t.search(/[^\s\u00a0]/),e==-1&&(e=t.length));for(var o=n||0,r=s||0;;){var a=t.indexOf("\t",o);if(a<0||a>=e)return r+(e-o);r+=a-o,r+=i-r%i,o=a+1}},br=[""],wr=function(t){t.select()};lo?wr=function(t){t.selectionStart=0,t.selectionEnd=t.value.length}:Js&&(wr=function(t){try{t.select()}catch(t){}}),[].indexOf&&(us=function(t,e){return t.indexOf(e)}),[].map&&(fs=function(t,e){return t.map(e)});var _r,kr=/[\u00df\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,xr=t.isWordChar=function(t){return/\w/.test(t)||t>"\x80"&&(t.toUpperCase()!=t.toLowerCase()||kr.test(t))},Cr=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;_r=document.createRange?function(t,e,i){var n=document.createRange();return n.setEnd(t,i),n.setStart(t,e),n}:function(t,e,i){var n=document.body.createTextRange();return n.moveToElementText(t.parentNode),n.collapse(!0),n.moveEnd("character",i),n.moveStart("character",e),n},Js&&Zs<11&&(Cs=function(){try{return document.activeElement}catch(t){return document.body}});var Sr,Tr,Er,Dr=!1,Pr=function(){if(Js&&Zs<9)return!1;var t=ws("div");return"draggable"in t||"dragDrop"in t}(),Mr=t.splitLines=3!="\n\nb".split(/\n/).length?function(t){for(var e=0,i=[],n=t.length;e<=n;){var s=t.indexOf("\n",e);s==-1&&(s=t.length);var o=t.slice(e,"\r"==t.charAt(s-1)?s-1:s),r=o.indexOf("\r");r!=-1?(i.push(o.slice(0,r)),e+=r+1):(i.push(o),e=s+1)}return i}:function(t){return t.split(/\r\n?|\n/)},Ar=window.getSelection?function(t){try{return t.selectionStart!=t.selectionEnd}catch(t){return!1}}:function(t){try{var e=t.ownerDocument.selection.createRange()}catch(t){}return!(!e||e.parentElement()!=t)&&0!=e.compareEndPoints("StartToEnd",e)},Ir=function(){var t=ws("div");return"oncopy"in t||(t.setAttribute("oncopy","return;"),"function"==typeof t.oncopy)}(),Lr=null,jr={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",107:"=",109:"-",127:"Delete",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"};t.keyNames=jr,function(){for(var t=0;t<10;t++)jr[t+48]=jr[t+96]=String(t);for(var t=65;t<=90;t++)jr[t]=String.fromCharCode(t);for(var t=1;t<=12;t++)jr[t+111]=jr[t+63235]="F"+t}();var Or,$r=function(){function t(t){return t<=247?i.charAt(t):1424<=t&&t<=1524?"R":1536<=t&&t<=1773?n.charAt(t-1536):1774<=t&&t<=2220?"r":8192<=t&&t<=8203?"w":8204==t?"b":"L"}function e(t,e,i){this.level=t,this.from=e,this.to=i}var i="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",n="rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmm",s=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,o=/[stwN]/,r=/[LRr]/,a=/[Lb1n]/,l=/[1n]/,c="L";return function(i){if(!s.test(i))return!1;for(var n,d=i.length,h=[],u=0;u<d;++u)h.push(n=t(i.charCodeAt(u)));for(var u=0,f=c;u<d;++u){var n=h[u];"m"==n?h[u]=f:f=n}for(var u=0,p=c;u<d;++u){var n=h[u];"1"==n&&"r"==p?h[u]="n":r.test(n)&&(p=n,"r"==n&&(h[u]="R"))}for(var u=1,f=h[0];u<d-1;++u){var n=h[u];"+"==n&&"1"==f&&"1"==h[u+1]?h[u]="1":","==n&&f==h[u+1]&&("1"==f||"n"==f)&&(h[u]=f),f=n}for(var u=0;u<d;++u){var n=h[u];if(","==n)h[u]="N";else if("%"==n){for(var m=u+1;m<d&&"%"==h[m];++m);for(var g=u&&"!"==h[u-1]||m<d&&"1"==h[m]?"1":"N",v=u;v<m;++v)h[v]=g;u=m-1}}for(var u=0,p=c;u<d;++u){var n=h[u];"L"==p&&"1"==n?h[u]="L":r.test(n)&&(p=n)}for(var u=0;u<d;++u)if(o.test(h[u])){for(var m=u+1;m<d&&o.test(h[m]);++m);for(var y="L"==(u?h[u-1]:c),b="L"==(m<d?h[m]:c),g=y||b?"L":"R",v=u;v<m;++v)h[v]=g;u=m-1}for(var w,_=[],u=0;u<d;)if(a.test(h[u])){var k=u;for(++u;u<d&&a.test(h[u]);++u);_.push(new e(0,k,u))}else{var x=u,C=_.length;for(++u;u<d&&"L"!=h[u];++u);for(var v=x;v<u;)if(l.test(h[v])){x<v&&_.splice(C,0,new e(1,x,v));var S=v;for(++v;v<u&&l.test(h[v]);++v);_.splice(C,0,new e(2,S,v)),x=v}else++v;x<u&&_.splice(C,0,new e(1,x,u))}return 1==_[0].level&&(w=i.match(/^\s+/))&&(_[0].from=w[0].length,_.unshift(new e(0,0,w[0].length))),1==hs(_).level&&(w=i.match(/\s+$/))&&(hs(_).to-=w[0].length,_.push(new e(0,d-w[0].length,d))),_[0].level!=hs(_).level&&_.push(new e(_[0].level,d,d)),_}}();return t.version="4.7.0",t}),i("codemirror",["codemirror/lib/codemirror"],function(t){return t}),function(t){"object"==typeof exports&&"object"==typeof module?t(e("../../lib/codemirror")):"function"==typeof i&&i.amd?i("codemirror/mode/xml/xml",["../../lib/codemirror"],t):t(CodeMirror)}(function(t){t.defineMode("xml",function(e,i){function n(t,e){function i(i){return e.tokenize=i,i(t,e)}var n=t.next();if("<"==n)return t.eat("!")?t.eat("[")?t.match("CDATA[")?i(r("atom","]]>")):null:t.match("--")?i(r("comment","-->")):t.match("DOCTYPE",!0,!0)?(t.eatWhile(/[\w\._\-]/),i(a(1))):null:t.eat("?")?(t.eatWhile(/[\w\._\-]/),e.tokenize=r("meta","?>"),"meta"):(x=t.eat("/")?"closeTag":"openTag",e.tokenize=s,"tag bracket");if("&"==n){var o;return o=t.eat("#")?t.eat("x")?t.eatWhile(/[a-fA-F\d]/)&&t.eat(";"):t.eatWhile(/[\d]/)&&t.eat(";"):t.eatWhile(/[\w\.\-:]/)&&t.eat(";"),o?"atom":"error"}return t.eatWhile(/[^&<]/),null}function s(t,e){var i=t.next();if(">"==i||"/"==i&&t.eat(">"))return e.tokenize=n,x=">"==i?"endTag":"selfcloseTag","tag bracket";if("="==i)return x="equals",null;if("<"==i){e.tokenize=n,e.state=h,e.tagName=e.tagStart=null;var s=e.tokenize(t,e);return s?s+" tag error":"tag error"}return/[\'\"]/.test(i)?(e.tokenize=o(i),e.stringStartCol=t.column(),e.tokenize(t,e)):(t.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),"word")}function o(t){var e=function(e,i){for(;!e.eol();)if(e.next()==t){i.tokenize=s;break}return"string"};return e.isInAttribute=!0,e}function r(t,e){return function(i,s){for(;!i.eol();){if(i.match(e)){s.tokenize=n;break}i.next()}return t}}function a(t){return function(e,i){for(var s;null!=(s=e.next());){if("<"==s)return i.tokenize=a(t+1),i.tokenize(e,i);if(">"==s){if(1==t){i.tokenize=n;break}return i.tokenize=a(t-1),i.tokenize(e,i)}}return"meta"}}function l(t,e,i){this.prev=t.context,this.tagName=e,this.indent=t.indented,this.startOfLine=i,(S.doNotIndent.hasOwnProperty(e)||t.context&&t.context.noIndent)&&(this.noIndent=!0)}function c(t){t.context&&(t.context=t.context.prev)}function d(t,e){for(var i;;){if(!t.context)return;if(i=t.context.tagName,!S.contextGrabbers.hasOwnProperty(i)||!S.contextGrabbers[i].hasOwnProperty(e))return;c(t)}}function h(t,e,i){return"openTag"==t?(i.tagStart=e.column(),u):"closeTag"==t?f:h}function u(t,e,i){return"word"==t?(i.tagName=e.current(),C="tag",g):(C="error",u)}function f(t,e,i){if("word"==t){var n=e.current();return i.context&&i.context.tagName!=n&&S.implicitlyClosed.hasOwnProperty(i.context.tagName)&&c(i),i.context&&i.context.tagName==n?(C="tag",p):(C="tag error",m)}return C="error",m}function p(t,e,i){return"endTag"!=t?(C="error",p):(c(i),h)}function m(t,e,i){return C="error",p(t,e,i)}function g(t,e,i){if("word"==t)return C="attribute",v;if("endTag"==t||"selfcloseTag"==t){var n=i.tagName,s=i.tagStart;return i.tagName=i.tagStart=null,"selfcloseTag"==t||S.autoSelfClosers.hasOwnProperty(n)?d(i,n):(d(i,n),i.context=new l(i,n,s==i.indented)),h}return C="error",g}function v(t,e,i){return"equals"==t?y:(S.allowMissing||(C="error"),g(t,e,i))}function y(t,e,i){return"string"==t?b:"word"==t&&S.allowUnquoted?(C="string",g):(C="error",g(t,e,i))}function b(t,e,i){return"string"==t?b:g(t,e,i)}var w=e.indentUnit,_=i.multilineTagIndentFactor||1,k=i.multilineTagIndentPastTag;null==k&&(k=!0);var x,C,S=i.htmlMode?{autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0}:{autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,caseFold:!1},T=i.alignCDATA;return{startState:function(){return{tokenize:n,state:h,indented:0,tagName:null,tagStart:null,context:null}},token:function(t,e){if(!e.tagName&&t.sol()&&(e.indented=t.indentation()),t.eatSpace())return null;x=null;var i=e.tokenize(t,e);return(i||x)&&"comment"!=i&&(C=null,e.state=e.state(x||i,t,e),C&&(i="error"==C?i+" error":C)),i},indent:function(e,i,o){var r=e.context;if(e.tokenize.isInAttribute)return e.tagStart==e.indented?e.stringStartCol+1:e.indented+w;if(r&&r.noIndent)return t.Pass;if(e.tokenize!=s&&e.tokenize!=n)return o?o.match(/^(\s*)/)[0].length:0;if(e.tagName)return k?e.tagStart+e.tagName.length+2:e.tagStart+w*_;if(T&&/<!\[CDATA\[/.test(i))return 0;var a=i&&/^<(\/)?([\w_:\.-]*)/.exec(i);if(a&&a[1])for(;r;){if(r.tagName==a[2]){r=r.prev;break}if(!S.implicitlyClosed.hasOwnProperty(r.tagName))break;r=r.prev}else if(a)for(;r;){var l=S.contextGrabbers[r.tagName];if(!l||!l.hasOwnProperty(a[2]))break;r=r.prev}for(;r&&!r.startOfLine;)r=r.prev;return r?r.indent+w:0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"<!--",blockCommentEnd:"-->",configuration:i.htmlMode?"html":"xml",helperType:i.htmlMode?"html":"xml"}}),t.defineMIME("text/xml","xml"),t.defineMIME("application/xml","xml"),t.mimeModes.hasOwnProperty("text/html")||t.defineMIME("text/html",{name:"xml",htmlMode:!0})}),function(t){"object"==typeof exports&&"object"==typeof module?t(e("../../lib/codemirror")):"function"==typeof i&&i.amd?i("codemirror/mode/javascript/javascript",["../../lib/codemirror"],t):t(CodeMirror)}(function(t){t.defineMode("javascript",function(e,i){function n(t){for(var e,i=!1,n=!1;null!=(e=t.next());){if(!i){if("/"==e&&!n)return;"["==e?n=!0:n&&"]"==e&&(n=!1)}i=!i&&"\\"==e}}function s(t,e,i){return pt=t,mt=i,e}function o(t,e){var i=t.next();if('"'==i||"'"==i)return e.tokenize=r(i),e.tokenize(t,e);if("."==i&&t.match(/^\d+(?:[eE][+\-]?\d+)?/))return s("number","number");if("."==i&&t.match(".."))return s("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(i))return s(i);if("="==i&&t.eat(">"))return s("=>","operator");if("0"==i&&t.eat(/x/i))return t.eatWhile(/[\da-f]/i),s("number","number");if(/\d/.test(i))return t.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/),s("number","number");if("/"==i)return t.eat("*")?(e.tokenize=a,a(t,e)):t.eat("/")?(t.skipToEnd(),s("comment","comment")):"operator"==e.lastType||"keyword c"==e.lastType||"sof"==e.lastType||/^[\[{}\(,;:]$/.test(e.lastType)?(n(t),t.eatWhile(/[gimy]/),s("regexp","string-2")):(t.eatWhile(xt),s("operator","operator",t.current()));if("`"==i)return e.tokenize=l,l(t,e);if("#"==i)return t.skipToEnd(),s("error","error");if(xt.test(i))return t.eatWhile(xt),s("operator","operator",t.current());if(_t.test(i)){t.eatWhile(_t);var o=t.current(),c=kt.propertyIsEnumerable(o)&&kt[o];return c&&"."!=e.lastType?s(c.type,c.style,o):s("variable","variable",o)}}function r(t){return function(e,i){var n,r=!1;if(yt&&"@"==e.peek()&&e.match(Ct))return i.tokenize=o,s("jsonld-keyword","meta");for(;null!=(n=e.next())&&(n!=t||r);)r=!r&&"\\"==n;return r||(i.tokenize=o),s("string","string")}}function a(t,e){for(var i,n=!1;i=t.next();){if("/"==i&&n){e.tokenize=o;break}n="*"==i}return s("comment","comment")}function l(t,e){for(var i,n=!1;null!=(i=t.next());){if(!n&&("`"==i||"$"==i&&t.eat("{"))){e.tokenize=o;break}n=!n&&"\\"==i}return s("quasi","string-2",t.current())}function c(t,e){e.fatArrowAt&&(e.fatArrowAt=null);var i=t.string.indexOf("=>",t.start);if(!(i<0)){for(var n=0,s=!1,o=i-1;o>=0;--o){var r=t.string.charAt(o),a=St.indexOf(r);if(a>=0&&a<3){if(!n){++o;break}if(0==--n)break}else if(a>=3&&a<6)++n;else if(_t.test(r))s=!0;else if(s&&!n){++o;break}}s&&!n&&(e.fatArrowAt=o)}}function d(t,e,i,n,s,o){this.indented=t,this.column=e,this.type=i,this.prev=s,this.info=o,null!=n&&(this.align=n)}function h(t,e){for(var i=t.localVars;i;i=i.next)if(i.name==e)return!0;for(var n=t.context;n;n=n.prev)for(var i=n.vars;i;i=i.next)if(i.name==e)return!0}function u(t,e,i,n,s){var o=t.cc;for(Et.state=t,Et.stream=s,Et.marked=null,Et.cc=o,Et.style=e,t.lexical.hasOwnProperty("align")||(t.lexical.align=!0);;){var r=o.length?o.pop():bt?k:_;if(r(i,n)){for(;o.length&&o[o.length-1].lex;)o.pop()();return Et.marked?Et.marked:"variable"==i&&h(t,n)?"variable-2":e}}}function f(){for(var t=arguments.length-1;t>=0;t--)Et.cc.push(arguments[t])}function p(){return f.apply(null,arguments),!0}function m(t){function e(e){for(var i=e;i;i=i.next)if(i.name==t)return!0;return!1}var n=Et.state;if(n.context){if(Et.marked="def",e(n.localVars))return;n.localVars={name:t,next:n.localVars}}else{if(e(n.globalVars))return;i.globalVars&&(n.globalVars={name:t,next:n.globalVars})}}function g(){Et.state.context={prev:Et.state.context,vars:Et.state.localVars},Et.state.localVars=Dt}function v(){Et.state.localVars=Et.state.context.vars,Et.state.context=Et.state.context.prev}function y(t,e){var i=function(){var i=Et.state,n=i.indented;if("stat"==i.lexical.type)n=i.lexical.indented;else for(var s=i.lexical;s&&")"==s.type&&s.align;s=s.prev)n=s.indented;i.lexical=new d(n,Et.stream.column(),t,null,i.lexical,e)};return i.lex=!0,i}function b(){var t=Et.state;t.lexical.prev&&(")"==t.lexical.type&&(t.indented=t.lexical.indented),t.lexical=t.lexical.prev)}function w(t){function e(i){return i==t?p():";"==t?f():p(e)}return e}function _(t,e){return"var"==t?p(y("vardef",e.length),W,w(";"),b):"keyword a"==t?p(y("form"),k,_,b):"keyword b"==t?p(y("form"),_,b):"{"==t?p(y("}"),R,b):";"==t?p():"if"==t?("else"==Et.state.lexical.info&&Et.state.cc[Et.state.cc.length-1]==b&&Et.state.cc.pop()(),p(y("form"),k,_,b,G)):"function"==t?p(tt):"for"==t?p(y("form"),K,_,b):"variable"==t?p(y("stat"),L):"switch"==t?p(y("form"),k,y("}","switch"),w("{"),R,b,b):"case"==t?p(k,w(":")):"default"==t?p(w(":")):"catch"==t?p(y("form"),g,w("("),et,w(")"),_,b,v):"module"==t?p(y("form"),g,rt,v,b):"class"==t?p(y("form"),it,b):"export"==t?p(y("form"),at,b):"import"==t?p(y("form"),lt,b):f(y("stat"),k,w(";"),b)}function k(t){return C(t,!1)}function x(t){return C(t,!0)}function C(t,e){if(Et.state.fatArrowAt==Et.stream.start){var i=e?I:A;if("("==t)return p(g,y(")"),F(q,")"),b,w("=>"),i,v);if("variable"==t)return f(g,q,w("=>"),i,v)}var n=e?D:E;return Tt.hasOwnProperty(t)?p(n):"function"==t?p(tt,n):"keyword c"==t?p(e?T:S):"("==t?p(y(")"),S,ft,w(")"),b,n):"operator"==t||"spread"==t?p(e?x:k):"["==t?p(y("]"),ht,b,n):"{"==t?H(O,"}",null,n):"quasi"==t?f(P,n):p()}function S(t){return t.match(/[;\}\)\],]/)?f():f(k)}function T(t){return t.match(/[;\}\)\],]/)?f():f(x)}function E(t,e){return","==t?p(k):D(t,e,!1)}function D(t,e,i){var n=0==i?E:D,s=0==i?k:x;if("=>"==t)return p(g,i?I:A,v);if("operator"==t)return/\+\+|--/.test(e)?p(n):"?"==e?p(k,w(":"),s):p(s);if("quasi"==t)return f(P,n);if(";"!=t)return"("==t?H(x,")","call",n):"."==t?p(j,n):"["==t?p(y("]"),S,w("]"),b,n):void 0}function P(t,e){return"quasi"!=t?f():"${"!=e.slice(e.length-2)?p(P):p(k,M)}function M(t){if("}"==t)return Et.marked="string-2",Et.state.tokenize=l,p(P)}function A(t){return c(Et.stream,Et.state),f("{"==t?_:k)}function I(t){return c(Et.stream,Et.state),f("{"==t?_:x)}function L(t){return":"==t?p(b,_):f(E,w(";"),b)}function j(t){if("variable"==t)return Et.marked="property",
p()}function O(t,e){return"variable"==t||"keyword"==Et.style?(Et.marked="property",p("get"==e||"set"==e?$:N)):"number"==t||"string"==t?(Et.marked=yt?"property":Et.style+" property",p(N)):"jsonld-keyword"==t?p(N):"["==t?p(k,w("]"),N):void 0}function $(t){return"variable"!=t?f(N):(Et.marked="property",p(tt))}function N(t){return":"==t?p(x):"("==t?f(tt):void 0}function F(t,e){function i(n){if(","==n){var s=Et.state.lexical;return"call"==s.info&&(s.pos=(s.pos||0)+1),p(t,i)}return n==e?p():p(w(e))}return function(n){return n==e?p():f(t,i)}}function H(t,e,i){for(var n=3;n<arguments.length;n++)Et.cc.push(arguments[n]);return p(y(e,i),F(t,e),b)}function R(t){return"}"==t?p():f(_,R)}function z(t){if(wt&&":"==t)return p(B)}function B(t){if("variable"==t)return Et.marked="variable-3",p()}function W(){return f(q,z,V,Y)}function q(t,e){return"variable"==t?(m(e),p()):"["==t?H(q,"]"):"{"==t?H(U,"}"):void 0}function U(t,e){return"variable"!=t||Et.stream.match(/^\s*:/,!1)?("variable"==t&&(Et.marked="property"),p(w(":"),q,V)):(m(e),p(V))}function V(t,e){if("="==e)return p(x)}function Y(t){if(","==t)return p(W)}function G(t,e){if("keyword b"==t&&"else"==e)return p(y("form","else"),_,b)}function K(t){if("("==t)return p(y(")"),X,w(")"),b)}function X(t){return"var"==t?p(W,w(";"),J):";"==t?p(J):"variable"==t?p(Q):f(k,w(";"),J)}function Q(t,e){return"in"==e||"of"==e?(Et.marked="keyword",p(k)):p(E,J)}function J(t,e){return";"==t?p(Z):"in"==e||"of"==e?(Et.marked="keyword",p(k)):f(k,w(";"),Z)}function Z(t){")"!=t&&p(k)}function tt(t,e){return"*"==e?(Et.marked="keyword",p(tt)):"variable"==t?(m(e),p(tt)):"("==t?p(g,y(")"),F(et,")"),b,_,v):void 0}function et(t){return"spread"==t?p(et):f(q,z)}function it(t,e){if("variable"==t)return m(e),p(nt)}function nt(t,e){return"extends"==e?p(k,nt):"{"==t?p(y("}"),st,b):void 0}function st(t,e){return"variable"==t||"keyword"==Et.style?(Et.marked="property","get"==e||"set"==e?p(ot,tt,st):p(tt,st)):"*"==e?(Et.marked="keyword",p(st)):";"==t?p(st):"}"==t?p():void 0}function ot(t){return"variable"!=t?f():(Et.marked="property",p())}function rt(t,e){return"string"==t?p(_):"variable"==t?(m(e),p(dt)):void 0}function at(t,e){return"*"==e?(Et.marked="keyword",p(dt,w(";"))):"default"==e?(Et.marked="keyword",p(k,w(";"))):f(_)}function lt(t){return"string"==t?p():f(ct,dt)}function ct(t,e){return"{"==t?H(ct,"}"):("variable"==t&&m(e),p())}function dt(t,e){if("from"==e)return Et.marked="keyword",p(k)}function ht(t){return"]"==t?p():f(x,ut)}function ut(t){return"for"==t?f(ft,w("]")):","==t?p(F(T,"]")):f(F(x,"]"))}function ft(t){return"for"==t?p(K,ft):"if"==t?p(k,ft):void 0}var pt,mt,gt=e.indentUnit,vt=i.statementIndent,yt=i.jsonld,bt=i.json||yt,wt=i.typescript,_t=i.wordCharacters||/[\w$\xa1-\uffff]/,kt=function(){function t(t){return{type:t,style:"keyword"}}var e=t("keyword a"),i=t("keyword b"),n=t("keyword c"),s=t("operator"),o={type:"atom",style:"atom"},r={"if":t("if"),"while":e,"with":e,"else":i,"do":i,"try":i,"finally":i,"return":n,"break":n,"continue":n,"new":n,"delete":n,"throw":n,"debugger":n,"var":t("var"),"const":t("var"),"let":t("var"),"function":t("function"),"catch":t("catch"),"for":t("for"),"switch":t("switch"),"case":t("case"),"default":t("default"),"in":s,"typeof":s,"instanceof":s,"true":o,"false":o,"null":o,undefined:o,NaN:o,Infinity:o,"this":t("this"),module:t("module"),"class":t("class"),"super":t("atom"),"yield":n,"export":t("export"),"import":t("import"),"extends":n};if(wt){var a={type:"variable",style:"variable-3"},l={"interface":t("interface"),"extends":t("extends"),constructor:t("constructor"),"public":t("public"),"private":t("private"),"protected":t("protected"),"static":t("static"),string:a,number:a,bool:a,any:a};for(var c in l)r[c]=l[c]}return r}(),xt=/[+\-*&%=<>!?|~^]/,Ct=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/,St="([{}])",Tt={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,"this":!0,"jsonld-keyword":!0},Et={state:null,column:null,marked:null,cc:null},Dt={name:"this",next:{name:"arguments"}};return b.lex=!0,{startState:function(t){var e={tokenize:o,lastType:"sof",cc:[],lexical:new d((t||0)-gt,0,"block",!1),localVars:i.localVars,context:i.localVars&&{vars:i.localVars},indented:0};return i.globalVars&&"object"==typeof i.globalVars&&(e.globalVars=i.globalVars),e},token:function(t,e){if(t.sol()&&(e.lexical.hasOwnProperty("align")||(e.lexical.align=!1),e.indented=t.indentation(),c(t,e)),e.tokenize!=a&&t.eatSpace())return null;var i=e.tokenize(t,e);return"comment"==pt?i:(e.lastType="operator"!=pt||"++"!=mt&&"--"!=mt?pt:"incdec",u(e,i,pt,mt,t))},indent:function(e,n){if(e.tokenize==a)return t.Pass;if(e.tokenize!=o)return 0;var s=n&&n.charAt(0),r=e.lexical;if(!/^\s*else\b/.test(n))for(var l=e.cc.length-1;l>=0;--l){var c=e.cc[l];if(c==b)r=r.prev;else if(c!=G)break}"stat"==r.type&&"}"==s&&(r=r.prev),vt&&")"==r.type&&"stat"==r.prev.type&&(r=r.prev);var d=r.type,h=s==d;return"vardef"==d?r.indented+("operator"==e.lastType||","==e.lastType?r.info+1:0):"form"==d&&"{"==s?r.indented:"form"==d?r.indented+gt:"stat"==d?r.indented+("operator"==e.lastType||","==e.lastType?vt||gt:0):"switch"!=r.info||h||0==i.doubleIndentSwitch?r.align?r.column+(h?0:1):r.indented+(h?0:gt):r.indented+(/^(?:case|default)\b/.test(n)?gt:2*gt)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:bt?null:"/*",blockCommentEnd:bt?null:"*/",lineComment:bt?null:"//",fold:"brace",helperType:bt?"json":"javascript",jsonldMode:yt,jsonMode:bt}}),t.registerHelper("wordChars","javascript",/[\w$]/),t.defineMIME("text/javascript","javascript"),t.defineMIME("text/ecmascript","javascript"),t.defineMIME("application/javascript","javascript"),t.defineMIME("application/x-javascript","javascript"),t.defineMIME("application/ecmascript","javascript"),t.defineMIME("application/json",{name:"javascript",json:!0}),t.defineMIME("application/x-json",{name:"javascript",json:!0}),t.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),t.defineMIME("text/typescript",{name:"javascript",typescript:!0}),t.defineMIME("application/typescript",{name:"javascript",typescript:!0})}),function(t){"object"==typeof exports&&"object"==typeof module?t(e("../../lib/codemirror")):"function"==typeof i&&i.amd?i("codemirror/mode/css/css",["../../lib/codemirror"],t):t(CodeMirror)}(function(t){function e(t){for(var e={},i=0;i<t.length;++i)e[t[i]]=!0;return e}function i(t,e){for(var i,n=!1;null!=(i=t.next());){if(n&&"/"==i){e.tokenize=null;break}n="*"==i}return["comment","comment"]}function n(t,e){return t.skipTo("-->")?(t.match("-->"),e.tokenize=null):t.skipToEnd(),["comment","comment"]}t.defineMode("css",function(e,i){function n(t,e){return f=e,t}function s(t,e){var i=t.next();if(g[i]){var s=g[i](t,e);if(s!==!1)return s}return"@"==i?(t.eatWhile(/[\w\\\-]/),n("def",t.current())):"="==i||("~"==i||"|"==i)&&t.eat("=")?n(null,"compare"):'"'==i||"'"==i?(e.tokenize=o(i),e.tokenize(t,e)):"#"==i?(t.eatWhile(/[\w\\\-]/),n("atom","hash")):"!"==i?(t.match(/^\s*\w*/),n("keyword","important")):/\d/.test(i)||"."==i&&t.eat(/\d/)?(t.eatWhile(/[\w.%]/),n("number","unit")):"-"!==i?/[,+>*\/]/.test(i)?n(null,"select-op"):"."==i&&t.match(/^-?[_a-z][_a-z0-9-]*/i)?n("qualifier","qualifier"):/[:;{}\[\]\(\)]/.test(i)?n(null,i):"u"==i&&t.match("rl(")?(t.backUp(1),e.tokenize=r,n("property","word")):/[\w\\\-]/.test(i)?(t.eatWhile(/[\w\\\-]/),n("property","word")):n(null,null):/[\d.]/.test(t.peek())?(t.eatWhile(/[\w.%]/),n("number","unit")):t.match(/^\w+-/)?n("meta","meta"):void 0}function o(t){return function(e,i){for(var s,o=!1;null!=(s=e.next());){if(s==t&&!o){")"==t&&e.backUp(1);break}o=!o&&"\\"==s}return(s==t||!o&&")"!=t)&&(i.tokenize=null),n("string","string")}}function r(t,e){return t.next(),t.match(/\s*[\"\')]/,!1)?e.tokenize=null:e.tokenize=o(")"),n(null,"(")}function a(t,e,i){this.type=t,this.indent=e,this.prev=i}function l(t,e,i){return t.context=new a(i,e.indentation()+m,t.context),i}function c(t){return t.context=t.context.prev,t.context.type}function d(t,e,i){return S[i.context.type](t,e,i)}function h(t,e,i,n){for(var s=n||1;s>0;s--)i.context=i.context.prev;return d(t,e,i)}function u(t){var e=t.current().toLowerCase();p=k.hasOwnProperty(e)?"atom":_.hasOwnProperty(e)?"keyword":"variable"}i.propertyKeywords||(i=t.resolveMode("text/css"));var f,p,m=e.indentUnit,g=i.tokenHooks,v=i.mediaTypes||{},y=i.mediaFeatures||{},b=i.propertyKeywords||{},w=i.nonStandardPropertyKeywords||{},_=i.colorKeywords||{},k=i.valueKeywords||{},x=i.fontProperties||{},C=i.allowNested,S={};return S.top=function(t,e,i){if("{"==t)return l(i,e,"block");if("}"==t&&i.context.prev)return c(i);if("@media"==t)return l(i,e,"media");if("@font-face"==t)return"font_face_before";if(/^@(-(moz|ms|o|webkit)-)?keyframes$/.test(t))return"keyframes";if(t&&"@"==t.charAt(0))return l(i,e,"at");if("hash"==t)p="builtin";else if("word"==t)p="tag";else{if("variable-definition"==t)return"maybeprop";if("interpolation"==t)return l(i,e,"interpolation");if(":"==t)return"pseudo";if(C&&"("==t)return l(i,e,"parens")}return i.context.type},S.block=function(t,e,i){if("word"==t){var n=e.current().toLowerCase();return b.hasOwnProperty(n)?(p="property","maybeprop"):w.hasOwnProperty(n)?(p="string-2","maybeprop"):C?(p=e.match(/^\s*:/,!1)?"property":"tag","block"):(p+=" error","maybeprop")}return"meta"==t?"block":C||"hash"!=t&&"qualifier"!=t?S.top(t,e,i):(p="error","block")},S.maybeprop=function(t,e,i){return":"==t?l(i,e,"prop"):d(t,e,i)},S.prop=function(t,e,i){if(";"==t)return c(i);if("{"==t&&C)return l(i,e,"propBlock");if("}"==t||"{"==t)return h(t,e,i);if("("==t)return l(i,e,"parens");if("hash"!=t||/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(e.current())){if("word"==t)u(e);else if("interpolation"==t)return l(i,e,"interpolation")}else p+=" error";return"prop"},S.propBlock=function(t,e,i){return"}"==t?c(i):"word"==t?(p="property","maybeprop"):i.context.type},S.parens=function(t,e,i){return"{"==t||"}"==t?h(t,e,i):")"==t?c(i):"("==t?l(i,e,"parens"):("word"==t&&u(e),"parens")},S.pseudo=function(t,e,i){return"word"==t?(p="variable-3",i.context.type):d(t,e,i)},S.media=function(t,e,i){if("("==t)return l(i,e,"media_parens");if("}"==t)return h(t,e,i);if("{"==t)return c(i)&&l(i,e,C?"block":"top");if("word"==t){var n=e.current().toLowerCase();p="only"==n||"not"==n||"and"==n?"keyword":v.hasOwnProperty(n)?"attribute":y.hasOwnProperty(n)?"property":"error"}return i.context.type},S.media_parens=function(t,e,i){return")"==t?c(i):"{"==t||"}"==t?h(t,e,i,2):S.media(t,e,i)},S.font_face_before=function(t,e,i){return"{"==t?l(i,e,"font_face"):d(t,e,i)},S.font_face=function(t,e,i){return"}"==t?c(i):"word"==t?(p=x.hasOwnProperty(e.current().toLowerCase())?"property":"error","maybeprop"):"font_face"},S.keyframes=function(t,e,i){return"word"==t?(p="variable","keyframes"):"{"==t?l(i,e,"top"):d(t,e,i)},S.at=function(t,e,i){return";"==t?c(i):"{"==t||"}"==t?h(t,e,i):("word"==t?p="tag":"hash"==t&&(p="builtin"),"at")},S.interpolation=function(t,e,i){return"}"==t?c(i):"{"==t||";"==t?h(t,e,i):("variable"!=t&&(p="error"),"interpolation")},{startState:function(t){return{tokenize:null,state:"top",context:new a("top",t||0,null)}},token:function(t,e){if(!e.tokenize&&t.eatSpace())return null;var i=(e.tokenize||s)(t,e);return i&&"object"==typeof i&&(f=i[1],i=i[0]),p=i,e.state=S[e.state](f,t,e),p},indent:function(t,e){var i=t.context,n=e&&e.charAt(0),s=i.indent;return"prop"==i.type&&("}"==n||")"==n)&&(i=i.prev),i.prev&&("}"==n&&("block"==i.type||"top"==i.type||"interpolation"==i.type||"font_face"==i.type)||")"==n&&("parens"==i.type||"media_parens"==i.type)||"{"==n&&("at"==i.type||"media"==i.type))&&(s=i.indent-m,i=i.prev),s},electricChars:"}",blockCommentStart:"/*",blockCommentEnd:"*/",fold:"brace"}});var s=["all","aural","braille","handheld","print","projection","screen","tty","tv","embossed"],o=e(s),r=["width","min-width","max-width","height","min-height","max-height","device-width","min-device-width","max-device-width","device-height","min-device-height","max-device-height","aspect-ratio","min-aspect-ratio","max-aspect-ratio","device-aspect-ratio","min-device-aspect-ratio","max-device-aspect-ratio","color","min-color","max-color","color-index","min-color-index","max-color-index","monochrome","min-monochrome","max-monochrome","resolution","min-resolution","max-resolution","scan","grid"],a=e(r),l=["align-content","align-items","align-self","alignment-adjust","alignment-baseline","anchor-point","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","appearance","azimuth","backface-visibility","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","baseline-shift","binding","bleed","bookmark-label","bookmark-level","bookmark-state","bookmark-target","border","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","clear","clip","color","color-profile","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","content","counter-increment","counter-reset","crop","cue","cue-after","cue-before","cursor","direction","display","dominant-baseline","drop-initial-after-adjust","drop-initial-after-align","drop-initial-before-adjust","drop-initial-before-align","drop-initial-size","drop-initial-value","elevation","empty-cells","fit","fit-position","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","float-offset","flow-from","flow-into","font","font-feature-settings","font-family","font-kerning","font-language-override","font-size","font-size-adjust","font-stretch","font-style","font-synthesis","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-weight","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-position","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","inline-box-align","justify-content","left","letter-spacing","line-break","line-height","line-stacking","line-stacking-ruby","line-stacking-shift","line-stacking-strategy","list-style","list-style-image","list-style-position","list-style-type","margin","margin-bottom","margin-left","margin-right","margin-top","marker-offset","marks","marquee-direction","marquee-loop","marquee-play-count","marquee-speed","marquee-style","max-height","max-width","min-height","min-width","move-to","nav-down","nav-index","nav-left","nav-right","nav-up","object-fit","object-position","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-style","overflow-wrap","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","page-policy","pause","pause-after","pause-before","perspective","perspective-origin","pitch","pitch-range","play-during","position","presentation-level","punctuation-trim","quotes","region-break-after","region-break-before","region-break-inside","region-fragment","rendering-intent","resize","rest","rest-after","rest-before","richness","right","rotation","rotation-point","ruby-align","ruby-overhang","ruby-position","ruby-span","shape-image-threshold","shape-inside","shape-margin","shape-outside","size","speak","speak-as","speak-header","speak-numeral","speak-punctuation","speech-rate","stress","string-set","tab-size","table-layout","target","target-name","target-new","target-position","text-align","text-align-last","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-height","text-indent","text-justify","text-outline","text-overflow","text-shadow","text-size-adjust","text-space-collapse","text-transform","text-underline-position","text-wrap","top","transform","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","unicode-bidi","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","volume","white-space","widows","width","word-break","word-spacing","word-wrap","z-index","clip-path","clip-rule","mask","enable-background","filter","flood-color","flood-opacity","lighting-color","stop-color","stop-opacity","pointer-events","color-interpolation","color-interpolation-filters","color-rendering","fill","fill-opacity","fill-rule","image-rendering","marker","marker-end","marker-mid","marker-start","shape-rendering","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-rendering","baseline-shift","dominant-baseline","glyph-orientation-horizontal","glyph-orientation-vertical","text-anchor","writing-mode"],c=e(l),d=["scrollbar-arrow-color","scrollbar-base-color","scrollbar-dark-shadow-color","scrollbar-face-color","scrollbar-highlight-color","scrollbar-shadow-color","scrollbar-3d-light-color","scrollbar-track-color","shape-inside","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","zoom"],h=e(d),u=["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"],f=e(u),p=["above","absolute","activeborder","activecaption","afar","after-white-space","ahead","alias","all","all-scroll","alternate","always","amharic","amharic-abegede","antialiased","appworkspace","arabic-indic","armenian","asterisks","auto","avoid","avoid-column","avoid-page","avoid-region","background","backwards","baseline","below","bidi-override","binary","bengali","blink","block","block-axis","bold","bolder","border","border-box","both","bottom","break","break-all","break-word","button","button-bevel","buttonface","buttonhighlight","buttonshadow","buttontext","cambodian","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-earthly-branch","cjk-heavenly-stem","cjk-ideographic","clear","clip","close-quote","col-resize","collapse","column","compact","condensed","contain","content","content-box","context-menu","continuous","copy","cover","crop","cross","crosshair","currentcolor","cursive","dashed","decimal","decimal-leading-zero","default","default-button","destination-atop","destination-in","destination-out","destination-over","devanagari","disc","discard","document","dot-dash","dot-dot-dash","dotted","double","down","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipse","ellipsis","embed","end","ethiopic","ethiopic-abegede","ethiopic-abegede-am-et","ethiopic-abegede-gez","ethiopic-abegede-ti-er","ethiopic-abegede-ti-et","ethiopic-halehame-aa-er","ethiopic-halehame-aa-et","ethiopic-halehame-am-et","ethiopic-halehame-gez","ethiopic-halehame-om-et","ethiopic-halehame-sid-et","ethiopic-halehame-so-et","ethiopic-halehame-ti-er","ethiopic-halehame-ti-et","ethiopic-halehame-tig","ew-resize","expanded","extra-condensed","extra-expanded","fantasy","fast","fill","fixed","flat","footnotes","forwards","from","geometricPrecision","georgian","graytext","groove","gujarati","gurmukhi","hand","hangul","hangul-consonant","hebrew","help","hidden","hide","higher","highlight","highlighttext","hiragana","hiragana-iroha","horizontal","hsl","hsla","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-table","inset","inside","intrinsic","invert","italic","justify","kannada","katakana","katakana-iroha","keep-all","khmer","landscape","lao","large","larger","left","level","lighter","line-through","linear","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-alpha","lower-armenian","lower-greek","lower-hexadecimal","lower-latin","lower-norwegian","lower-roman","lowercase","ltr","malayalam","match","media-controls-background","media-current-time-display","media-fullscreen-button","media-mute-button","media-play-button","media-return-to-realtime-button","media-rewind-button","media-seek-back-button","media-seek-forward-button","media-slider","media-sliderthumb","media-time-remaining-display","media-volume-slider","media-volume-slider-container","media-volume-sliderthumb","medium","menu","menulist","menulist-button","menulist-text","menulist-textfield","menutext","message-box","middle","min-intrinsic","mix","mongolian","monospace","move","multiple","myanmar","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","nw-resize","nwse-resize","oblique","octal","open-quote","optimizeLegibility","optimizeSpeed","oriya","oromo","outset","outside","outside-shape","overlay","overline","padding","padding-box","painted","page","paused","persian","plus-darker","plus-lighter","pointer","polygon","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radio","read-only","read-write","read-write-plaintext-only","rectangle","region","relative","repeat","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","round","row-resize","rtl","run-in","running","s-resize","sans-serif","scroll","scrollbar","se-resize","searchfield","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","semi-condensed","semi-expanded","separate","serif","show","sidama","single","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","solid","somali","source-atop","source-in","source-out","source-over","space","square","square-button","start","static","status-bar","stretch","stroke","sub","subpixel-antialiased","super","sw-resize","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","telugu","text","text-bottom","text-top","textarea","textfield","thai","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","tibetan","tigre","tigrinya-er","tigrinya-er-abegede","tigrinya-et","tigrinya-et-abegede","to","top","transparent","ultra-condensed","ultra-expanded","underline","up","upper-alpha","upper-armenian","upper-greek","upper-hexadecimal","upper-latin","upper-norwegian","upper-roman","uppercase","urdu","url","vertical","vertical-text","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","wider","window","windowframe","windowtext","x-large","x-small","xor","xx-large","xx-small"],m=e(p),g=["font-family","src","unicode-range","font-variant","font-feature-settings","font-stretch","font-weight","font-style"],v=e(g),y=s.concat(r).concat(l).concat(d).concat(u).concat(p);t.registerHelper("hintWords","css",y),t.defineMIME("text/css",{mediaTypes:o,mediaFeatures:a,propertyKeywords:c,nonStandardPropertyKeywords:h,colorKeywords:f,valueKeywords:m,fontProperties:v,tokenHooks:{"<":function(t,e){return!!t.match("!--")&&(e.tokenize=n,n(t,e))},"/":function(t,e){return!!t.eat("*")&&(e.tokenize=i,i(t,e))}},name:"css"}),t.defineMIME("text/x-scss",{mediaTypes:o,mediaFeatures:a,propertyKeywords:c,nonStandardPropertyKeywords:h,colorKeywords:f,valueKeywords:m,fontProperties:v,allowNested:!0,tokenHooks:{"/":function(t,e){return t.eat("/")?(t.skipToEnd(),["comment","comment"]):t.eat("*")?(e.tokenize=i,i(t,e)):["operator","operator"]},":":function(t){return!!t.match(/\s*\{/)&&[null,"{"]},$:function(t){return t.match(/^[\w-]+/),t.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"]},"#":function(t){return!!t.eat("{")&&[null,"interpolation"]}},name:"css",helperType:"scss"}),t.defineMIME("text/x-less",{mediaTypes:o,mediaFeatures:a,propertyKeywords:c,nonStandardPropertyKeywords:h,colorKeywords:f,valueKeywords:m,fontProperties:v,allowNested:!0,tokenHooks:{"/":function(t,e){return t.eat("/")?(t.skipToEnd(),["comment","comment"]):t.eat("*")?(e.tokenize=i,i(t,e)):["operator","operator"]},"@":function(t){return!t.match(/^(charset|document|font-face|import|(-(moz|ms|o|webkit)-)?keyframes|media|namespace|page|supports)\b/,!1)&&(t.eatWhile(/[\w\\\-]/),t.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"])},"&":function(){return["atom","atom"]}},name:"css",helperType:"less"})}),function(t){"object"==typeof exports&&"object"==typeof module?t(e("../../lib/codemirror"),e("../xml/xml"),e("../javascript/javascript"),e("../css/css")):"function"==typeof i&&i.amd?i("codemirror/mode/htmlmixed/htmlmixed",["../../lib/codemirror","../xml/xml","../javascript/javascript","../css/css"],t):t(CodeMirror)}(function(t){t.defineMode("htmlmixed",function(e,i){function n(t,e){var i=e.htmlState.tagName;i&&(i=i.toLowerCase());var n=a.token(t,e.htmlState);if("script"==i&&/\btag\b/.test(n)&&">"==t.current()){var s=t.string.slice(Math.max(0,t.pos-100),t.pos).match(/\btype\s*=\s*("[^"]+"|'[^']+'|\S+)[^<]*$/i);s=s?s[1]:"",s&&/[\"\']/.test(s.charAt(0))&&(s=s.slice(1,s.length-1));for(var d=0;d<c.length;++d){var h=c[d];if("string"==typeof h.matches?s==h.matches:h.matches.test(s)){h.mode&&(e.token=o,e.localMode=h.mode,e.localState=h.mode.startState&&h.mode.startState(a.indent(e.htmlState,"")));break}}}else"style"==i&&/\btag\b/.test(n)&&">"==t.current()&&(e.token=r,e.localMode=l,e.localState=l.startState(a.indent(e.htmlState,"")));return n}function s(t,e,i){var n,s=t.current(),o=s.search(e);return o>-1?t.backUp(s.length-o):(n=s.match(/<\/?$/))&&(t.backUp(s.length),t.match(e,!1)||t.match(s)),i}function o(t,e){return t.match(/^<\/\s*script\s*>/i,!1)?(e.token=n,e.localState=e.localMode=null,n(t,e)):s(t,/<\/\s*script\s*>/,e.localMode.token(t,e.localState))}function r(t,e){return t.match(/^<\/\s*style\s*>/i,!1)?(e.token=n,e.localState=e.localMode=null,n(t,e)):s(t,/<\/\s*style\s*>/,l.token(t,e.localState))}var a=t.getMode(e,{name:"xml",htmlMode:!0,multilineTagIndentFactor:i.multilineTagIndentFactor,multilineTagIndentPastTag:i.multilineTagIndentPastTag}),l=t.getMode(e,"css"),c=[],d=i&&i.scriptTypes;if(c.push({matches:/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^$/i,mode:t.getMode(e,"javascript")}),d)for(var h=0;h<d.length;++h){var u=d[h];c.push({matches:u.matches,mode:u.mode&&t.getMode(e,u.mode)})}return c.push({matches:/./,mode:t.getMode(e,"text/plain")}),{startState:function(){var t=a.startState();return{token:n,localMode:null,localState:null,htmlState:t}},copyState:function(e){if(e.localState)var i=t.copyState(e.localMode,e.localState);return{token:e.token,localMode:e.localMode,localState:i,htmlState:t.copyState(a,e.htmlState)}},token:function(t,e){return e.token(t,e)},indent:function(e,i){return!e.localMode||/^\s*<\//.test(i)?a.indent(e.htmlState,i):e.localMode.indent?e.localMode.indent(e.localState,i):t.Pass},innerMode:function(t){return{state:t.localState||t.htmlState,mode:t.localMode||a}}}},"xml","javascript","css"),t.defineMIME("text/html","htmlmixed")}),function(t){"object"==typeof exports&&"object"==typeof module?t(e("../../lib/codemirror")):"function"==typeof i&&i.amd?i("codemirror/addon/fold/xml-fold",["../../lib/codemirror"],t):t(CodeMirror)}(function(t){"use strict";function e(t,e){return t.line-e.line||t.ch-e.ch}function i(t,e,i,n){this.line=e,this.ch=i,this.cm=t,this.text=t.getLine(e),this.min=n?n.from:t.firstLine(),this.max=n?n.to-1:t.lastLine()}function n(t,e){var i=t.cm.getTokenTypeAt(u(t.line,e));return i&&/\btag\b/.test(i)}function s(t){if(!(t.line>=t.max))return t.ch=0,t.text=t.cm.getLine(++t.line),!0}function o(t){if(!(t.line<=t.min))return t.text=t.cm.getLine(--t.line),t.ch=t.text.length,!0}function r(t){for(;;){var e=t.text.indexOf(">",t.ch);if(e==-1){if(s(t))continue;return}{if(n(t,e+1)){var i=t.text.lastIndexOf("/",e),o=i>-1&&!/\S/.test(t.text.slice(i+1,e));return t.ch=e+1,o?"selfClose":"regular"}t.ch=e+1}}}function a(t){for(;;){var e=t.ch?t.text.lastIndexOf("<",t.ch-1):-1;if(e==-1){if(o(t))continue;return}if(n(t,e+1)){m.lastIndex=e,t.ch=e;var i=m.exec(t.text);if(i&&i.index==e)return i}else t.ch=e}}function l(t){for(;;){m.lastIndex=t.ch;var e=m.exec(t.text);if(!e){if(s(t))continue;return}{if(n(t,e.index+1))return t.ch=e.index+e[0].length,e;t.ch=e.index+1}}}function c(t){for(;;){var e=t.ch?t.text.lastIndexOf(">",t.ch-1):-1;if(e==-1){if(o(t))continue;return}{if(n(t,e+1)){var i=t.text.lastIndexOf("/",e),s=i>-1&&!/\S/.test(t.text.slice(i+1,e));return t.ch=e+1,s?"selfClose":"regular"}t.ch=e}}}function d(t,e){for(var i=[];;){var n,s=l(t),o=t.line,a=t.ch-(s?s[0].length:0);if(!s||!(n=r(t)))return;if("selfClose"!=n)if(s[1]){for(var c=i.length-1;c>=0;--c)if(i[c]==s[2]){i.length=c;break}if(c<0&&(!e||e==s[2]))return{tag:s[2],from:u(o,a),to:u(t.line,t.ch)}}else i.push(s[2])}}function h(t,e){for(var i=[];;){var n=c(t);if(!n)return;if("selfClose"!=n){var s=t.line,o=t.ch,r=a(t);if(!r)return;if(r[1])i.push(r[2]);else{for(var l=i.length-1;l>=0;--l)if(i[l]==r[2]){i.length=l;break}if(l<0&&(!e||e==r[2]))return{tag:r[2],from:u(t.line,t.ch),to:u(s,o)}}}else a(t)}}var u=t.Pos,f="A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",p=f+"-:.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040",m=new RegExp("<(/?)(["+f+"]["+p+"]*)","g");t.registerHelper("fold","xml",function(t,e){for(var n=new i(t,e.line,0);;){var s,o=l(n);if(!o||n.line!=e.line||!(s=r(n)))return;if(!o[1]&&"selfClose"!=s){var e=u(n.line,n.ch),a=d(n,o[2]);return a&&{from:e,to:a.from}}}}),t.findMatchingTag=function(t,n,s){var o=new i(t,n.line,n.ch,s);if(o.text.indexOf(">")!=-1||o.text.indexOf("<")!=-1){var l=r(o),c=l&&u(o.line,o.ch),f=l&&a(o);if(l&&f&&!(e(o,n)>0)){var p={from:u(o.line,o.ch),to:c,tag:f[2]};return"selfClose"==l?{open:p,close:null,at:"open"}:f[1]?{open:h(o,f[2]),close:p,at:"close"}:(o=new i(t,c.line,c.ch,s),{open:p,close:d(o,f[2]),
at:"open"})}}},t.findEnclosingTag=function(t,e,n){for(var s=new i(t,e.line,e.ch,n);;){var o=h(s);if(!o)break;var r=new i(t,e.line,e.ch,n),a=d(r,o.tag);if(a)return{open:o,close:a}}},t.scanForClosingTag=function(t,e,n,s){var o=new i(t,e.line,e.ch,s?{from:0,to:s}:null);return d(o,n)}}),function(t){"object"==typeof exports&&"object"==typeof module?t(e("../../lib/codemirror"),e("../fold/xml-fold")):"function"==typeof i&&i.amd?i("codemirror/addon/edit/closetag",["../../lib/codemirror","../fold/xml-fold"],t):t(CodeMirror)}(function(t){function e(e){if(e.getOption("disableInput"))return t.Pass;for(var i=e.listSelections(),a=[],l=0;l<i.length;l++){if(!i[l].empty())return t.Pass;var c=i[l].head,d=e.getTokenAt(c),h=t.innerMode(e.getMode(),d.state),u=h.state;if("xml"!=h.mode.name||!u.tagName)return t.Pass;var f=e.getOption("autoCloseTags"),p="html"==h.mode.configuration,m="object"==typeof f&&f.dontCloseTags||p&&o,g="object"==typeof f&&f.indentTags||p&&r,v=u.tagName;d.end>c.ch&&(v=v.slice(0,v.length-d.end+c.ch));var y=v.toLowerCase();if(!v||"string"==d.type&&(d.end!=c.ch||!/[\"\']/.test(d.string.charAt(d.string.length-1))||1==d.string.length)||"tag"==d.type&&"closeTag"==u.type||d.string.indexOf("/")==d.string.length-1||m&&n(m,y)>-1||s(e,v,c,u,!0))return t.Pass;var b=g&&n(g,y)>-1;a[l]={indent:b,text:">"+(b?"\n\n":"")+"</"+v+">",newPos:b?t.Pos(c.line+1,0):t.Pos(c.line,c.ch+1)}}for(var l=i.length-1;l>=0;l--){var w=a[l];e.replaceRange(w.text,i[l].head,i[l].anchor,"+insert");var _=e.listSelections().slice(0);_[l]={head:w.newPos,anchor:w.newPos},e.setSelections(_),w.indent&&(e.indentLine(w.newPos.line,null,!0),e.indentLine(w.newPos.line+1,null,!0))}}function i(e){if(e.getOption("disableInput"))return t.Pass;for(var i=e.listSelections(),n=[],o=0;o<i.length;o++){if(!i[o].empty())return t.Pass;var r=i[o].head,a=e.getTokenAt(r),l=t.innerMode(e.getMode(),a.state),c=l.state;if("string"==a.type||"<"!=a.string.charAt(0)||a.start!=r.ch-1)return t.Pass;if("xml"!=l.mode.name)if("htmlmixed"==e.getMode().name&&"javascript"==l.mode.name)n[o]="/script>";else{if("htmlmixed"!=e.getMode().name||"css"!=l.mode.name)return t.Pass;n[o]="/style>"}else{if(!c.context||!c.context.tagName||s(e,c.context.tagName,r,c))return t.Pass;n[o]="/"+c.context.tagName+">"}}e.replaceSelections(n),i=e.listSelections();for(var o=0;o<i.length;o++)(o==i.length-1||i[o].head.line<i[o+1].head.line)&&e.indentLine(i[o].head.line)}function n(t,e){if(t.indexOf)return t.indexOf(e);for(var i=0,n=t.length;i<n;++i)if(t[i]==e)return i;return-1}function s(e,i,n,s,o){if(!t.scanForClosingTag)return!1;var r=Math.min(e.lastLine()+1,n.line+500),a=t.scanForClosingTag(e,n,null,r);if(!a||a.tag!=i)return!1;for(var l=s.context,c=o?1:0;l&&l.tagName==i;l=l.prev)++c;n=a.to;for(var d=1;d<c;d++){var h=t.scanForClosingTag(e,n,null,r);if(!h||h.tag!=i)return!1;n=h.to}return!0}t.defineOption("autoCloseTags",!1,function(n,s,o){if(o!=t.Init&&o&&n.removeKeyMap("autoCloseTags"),s){var r={name:"autoCloseTags"};("object"!=typeof s||s.whenClosing)&&(r["'/'"]=function(t){return i(t)}),("object"!=typeof s||s.whenOpening)&&(r["'>'"]=function(t){return e(t)}),n.addKeyMap(r)}});var o=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"],r=["applet","blockquote","body","button","div","dl","fieldset","form","frameset","h1","h2","h3","h4","h5","h6","head","html","iframe","layer","legend","object","ol","p","select","table","ul"]}),function(t){"object"==typeof exports&&"object"==typeof module?t(e("../../lib/codemirror"),e("../fold/xml-fold")):"function"==typeof i&&i.amd?i("codemirror/addon/edit/matchtags",["../../lib/codemirror","../fold/xml-fold"],t):t(CodeMirror)}(function(t){"use strict";function e(t){t.state.tagHit&&t.state.tagHit.clear(),t.state.tagOther&&t.state.tagOther.clear(),t.state.tagHit=t.state.tagOther=null}function i(i){i.state.failedTagMatch=!1,i.operation(function(){if(e(i),!i.somethingSelected()){var n=i.getCursor(),s=i.getViewport();s.from=Math.min(s.from,n.line),s.to=Math.max(n.line+1,s.to);var o=t.findMatchingTag(i,n,s);if(o){if(i.state.matchBothTags){var r="open"==o.at?o.open:o.close;r&&(i.state.tagHit=i.markText(r.from,r.to,{className:"CodeMirror-matchingtag"}))}var a="close"==o.at?o.open:o.close;a?i.state.tagOther=i.markText(a.from,a.to,{className:"CodeMirror-matchingtag"}):i.state.failedTagMatch=!0}}})}function n(t){t.state.failedTagMatch&&i(t)}t.defineOption("matchTags",!1,function(s,o,r){r&&r!=t.Init&&(s.off("cursorActivity",i),s.off("viewportChange",n),e(s)),o&&(s.state.matchBothTags="object"==typeof o&&o.bothTags,s.on("cursorActivity",i),s.on("viewportChange",n),i(s))}),t.commands.toMatchingTag=function(e){var i=t.findMatchingTag(e,e.getCursor());if(i){var n="close"==i.at?i.open:i.close;n&&e.extendSelection(n.to,n.from)}}}),function(t){"object"==typeof exports&&"object"==typeof module?t(e("../../lib/codemirror")):"function"==typeof i&&i.amd?i("codemirror/addon/hint/xml-hint",["../../lib/codemirror"],t):t(CodeMirror)}(function(t){"use strict";function e(e,n){var s=n&&n.schemaInfo,o=n&&n.quoteChar||'"';if(s){var r=e.getCursor(),a=e.getTokenAt(r),l=t.innerMode(e.getMode(),a.state);if("xml"==l.mode.name){var c,d,h=[],u=!1,f=/\btag\b/.test(a.type),p=f&&/^\w/.test(a.string);if(p){var m=e.getLine(r.line).slice(Math.max(0,a.start-2),a.start),g=/<\/$/.test(m)?"close":/<$/.test(m)?"open":null;g&&(d=a.start-("close"==g?2:1))}else f&&"<"==a.string?g="open":f&&"</"==a.string&&(g="close");if(!f&&!l.state.tagName||g){p&&(c=a.string),u=g;var v=l.state.context,y=v&&s[v.tagName],b=v?y&&y.children:s["!top"];if(b&&"close"!=g)for(var w=0;w<b.length;++w)(!c||0==b[w].lastIndexOf(c,0))&&h.push("<"+b[w]);else if("close"!=g)for(var _ in s)s.hasOwnProperty(_)&&"!top"!=_&&"!attrs"!=_&&(!c||0==_.lastIndexOf(c,0))&&h.push("<"+_);v&&(!c||"close"==g&&0==v.tagName.lastIndexOf(c,0))&&h.push("</"+v.tagName+">")}else{var y=s[l.state.tagName],k=y&&y.attrs,x=s["!attrs"];if(!k&&!x)return;if(k){if(x){var C={};for(var S in x)x.hasOwnProperty(S)&&(C[S]=x[S]);for(var S in k)k.hasOwnProperty(S)&&(C[S]=k[S]);k=C}}else k=x;if("string"==a.type||"="==a.string){var T,m=e.getRange(i(r.line,Math.max(0,r.ch-60)),i(r.line,"string"==a.type?a.start:a.end)),E=m.match(/([^\s\u00a0=<>\"\']+)=$/);if(!E||!k.hasOwnProperty(E[1])||!(T=k[E[1]]))return;if("function"==typeof T&&(T=T.call(this,e)),"string"==a.type){c=a.string;var D=0;/['"]/.test(a.string.charAt(0))&&(o=a.string.charAt(0),c=a.string.slice(1),D++);var P=a.string.length;/['"]/.test(a.string.charAt(P-1))&&(o=a.string.charAt(P-1),c=a.string.substr(D,P-2)),u=!0}for(var w=0;w<T.length;++w)(!c||0==T[w].lastIndexOf(c,0))&&h.push(o+T[w]+o)}else{"attribute"==a.type&&(c=a.string,u=!0);for(var M in k)k.hasOwnProperty(M)&&(!c||0==M.lastIndexOf(c,0))&&h.push(M)}}return{list:h,from:u?i(r.line,null==d?a.start:d):r,to:u?i(r.line,a.end):r}}}}var i=t.Pos;t.registerHelper("hint","xml",e)}),function(t){"object"==typeof exports&&"object"==typeof module?t(e("../../lib/codemirror","./xml-hint")):"function"==typeof i&&i.amd?i("codemirror/addon/hint/html-hint",["../../lib/codemirror","./xml-hint"],t):t(CodeMirror)}(function(t){"use strict";function e(t){for(var e in h)h.hasOwnProperty(e)&&(t.attrs[e]=h[e])}function i(e,i){var n={schemaInfo:d};if(i)for(var s in i)n[s]=i[s];return t.hint.xml(e,n)}var n="ab aa af ak sq am ar an hy as av ae ay az bm ba eu be bn bh bi bs br bg my ca ch ce ny zh cv kw co cr hr cs da dv nl dz en eo et ee fo fj fi fr ff gl ka de el gn gu ht ha he hz hi ho hu ia id ie ga ig ik io is it iu ja jv kl kn kr ks kk km ki rw ky kv kg ko ku kj la lb lg li ln lo lt lu lv gv mk mg ms ml mt mi mr mh mn na nv nb nd ne ng nn no ii nr oc oj cu om or os pa pi fa pl ps pt qu rm rn ro ru sa sc sd se sm sg sr gd sn si sk sl so st es su sw ss sv ta te tg th ti bo tk tl tn to tr ts tt tw ty ug uk ur uz ve vi vo wa cy wo fy xh yi yo za zu".split(" "),s=["_blank","_self","_top","_parent"],o=["ascii","utf-8","utf-16","latin1","latin1"],r=["get","post","put","delete"],a=["application/x-www-form-urlencoded","multipart/form-data","text/plain"],l=["all","screen","print","embossed","braille","handheld","print","projection","screen","tty","tv","speech","3d-glasses","resolution [>][<][=] [X]","device-aspect-ratio: X/Y","orientation:portrait","orientation:landscape","device-height: [X]","device-width: [X]"],c={attrs:{}},d={a:{attrs:{href:null,ping:null,type:null,media:l,target:s,hreflang:n}},abbr:c,acronym:c,address:c,applet:c,area:{attrs:{alt:null,coords:null,href:null,target:null,ping:null,media:l,hreflang:n,type:null,shape:["default","rect","circle","poly"]}},article:c,aside:c,audio:{attrs:{src:null,mediagroup:null,crossorigin:["anonymous","use-credentials"],preload:["none","metadata","auto"],autoplay:["","autoplay"],loop:["","loop"],controls:["","controls"]}},b:c,base:{attrs:{href:null,target:s}},basefont:c,bdi:c,bdo:c,big:c,blockquote:{attrs:{cite:null}},body:c,br:c,button:{attrs:{form:null,formaction:null,name:null,value:null,autofocus:["","autofocus"],disabled:["","autofocus"],formenctype:a,formmethod:r,formnovalidate:["","novalidate"],formtarget:s,type:["submit","reset","button"]}},canvas:{attrs:{width:null,height:null}},caption:c,center:c,cite:c,code:c,col:{attrs:{span:null}},colgroup:{attrs:{span:null}},command:{attrs:{type:["command","checkbox","radio"],label:null,icon:null,radiogroup:null,command:null,title:null,disabled:["","disabled"],checked:["","checked"]}},data:{attrs:{value:null}},datagrid:{attrs:{disabled:["","disabled"],multiple:["","multiple"]}},datalist:{attrs:{data:null}},dd:c,del:{attrs:{cite:null,datetime:null}},details:{attrs:{open:["","open"]}},dfn:c,dir:c,div:c,dl:c,dt:c,em:c,embed:{attrs:{src:null,type:null,width:null,height:null}},eventsource:{attrs:{src:null}},fieldset:{attrs:{disabled:["","disabled"],form:null,name:null}},figcaption:c,figure:c,font:c,footer:c,form:{attrs:{action:null,name:null,"accept-charset":o,autocomplete:["on","off"],enctype:a,method:r,novalidate:["","novalidate"],target:s}},frame:c,frameset:c,h1:c,h2:c,h3:c,h4:c,h5:c,h6:c,head:{attrs:{},children:["title","base","link","style","meta","script","noscript","command"]},header:c,hgroup:c,hr:c,html:{attrs:{manifest:null},children:["head","body"]},i:c,iframe:{attrs:{src:null,srcdoc:null,name:null,width:null,height:null,sandbox:["allow-top-navigation","allow-same-origin","allow-forms","allow-scripts"],seamless:["","seamless"]}},img:{attrs:{alt:null,src:null,ismap:null,usemap:null,width:null,height:null,crossorigin:["anonymous","use-credentials"]}},input:{attrs:{alt:null,dirname:null,form:null,formaction:null,height:null,list:null,max:null,maxlength:null,min:null,name:null,pattern:null,placeholder:null,size:null,src:null,step:null,value:null,width:null,accept:["audio/*","video/*","image/*"],autocomplete:["on","off"],autofocus:["","autofocus"],checked:["","checked"],disabled:["","disabled"],formenctype:a,formmethod:r,formnovalidate:["","novalidate"],formtarget:s,multiple:["","multiple"],readonly:["","readonly"],required:["","required"],type:["hidden","text","search","tel","url","email","password","datetime","date","month","week","time","datetime-local","number","range","color","checkbox","radio","file","submit","image","reset","button"]}},ins:{attrs:{cite:null,datetime:null}},kbd:c,keygen:{attrs:{challenge:null,form:null,name:null,autofocus:["","autofocus"],disabled:["","disabled"],keytype:["RSA"]}},label:{attrs:{"for":null,form:null}},legend:c,li:{attrs:{value:null}},link:{attrs:{href:null,type:null,hreflang:n,media:l,sizes:["all","16x16","16x16 32x32","16x16 32x32 64x64"]}},map:{attrs:{name:null}},mark:c,menu:{attrs:{label:null,type:["list","context","toolbar"]}},meta:{attrs:{content:null,charset:o,name:["viewport","application-name","author","description","generator","keywords"],"http-equiv":["content-language","content-type","default-style","refresh"]}},meter:{attrs:{value:null,min:null,low:null,high:null,max:null,optimum:null}},nav:c,noframes:c,noscript:c,object:{attrs:{data:null,type:null,name:null,usemap:null,form:null,width:null,height:null,typemustmatch:["","typemustmatch"]}},ol:{attrs:{reversed:["","reversed"],start:null,type:["1","a","A","i","I"]}},optgroup:{attrs:{disabled:["","disabled"],label:null}},option:{attrs:{disabled:["","disabled"],label:null,selected:["","selected"],value:null}},output:{attrs:{"for":null,form:null,name:null}},p:c,param:{attrs:{name:null,value:null}},pre:c,progress:{attrs:{value:null,max:null}},q:{attrs:{cite:null}},rp:c,rt:c,ruby:c,s:c,samp:c,script:{attrs:{type:["text/javascript"],src:null,async:["","async"],defer:["","defer"],charset:o}},section:c,select:{attrs:{form:null,name:null,size:null,autofocus:["","autofocus"],disabled:["","disabled"],multiple:["","multiple"]}},small:c,source:{attrs:{src:null,type:null,media:null}},span:c,strike:c,strong:c,style:{attrs:{type:["text/css"],media:l,scoped:null}},sub:c,summary:c,sup:c,table:c,tbody:c,td:{attrs:{colspan:null,rowspan:null,headers:null}},textarea:{attrs:{dirname:null,form:null,maxlength:null,name:null,placeholder:null,rows:null,cols:null,autofocus:["","autofocus"],disabled:["","disabled"],readonly:["","readonly"],required:["","required"],wrap:["soft","hard"]}},tfoot:c,th:{attrs:{colspan:null,rowspan:null,headers:null,scope:["row","col","rowgroup","colgroup"]}},thead:c,time:{attrs:{datetime:null}},title:c,tr:c,track:{attrs:{src:null,label:null,"default":null,kind:["subtitles","captions","descriptions","chapters","metadata"],srclang:n}},tt:c,u:c,ul:c,"var":c,video:{attrs:{src:null,poster:null,width:null,height:null,crossorigin:["anonymous","use-credentials"],preload:["auto","metadata","none"],autoplay:["","autoplay"],mediagroup:["movie"],muted:["","muted"],controls:["","controls"]}},wbr:c},h={accesskey:["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9"],"class":null,contenteditable:["true","false"],contextmenu:null,dir:["ltr","rtl","auto"],draggable:["true","false","auto"],dropzone:["copy","move","link","string:","file:"],hidden:["hidden"],id:null,inert:["inert"],itemid:null,itemprop:null,itemref:null,itemscope:["itemscope"],itemtype:null,lang:["en","es"],spellcheck:["true","false"],style:null,tabindex:["1","2","3","4","5","6","7","8","9"],title:null,translate:["yes","no"],onclick:null,rel:["stylesheet","alternate","author","bookmark","help","license","next","nofollow","noreferrer","prefetch","prev","search","tag"]};e(c);for(var u in d)d.hasOwnProperty(u)&&d[u]!=c&&e(d[u]);t.htmlSchema=d,t.registerHelper("hint","html",i)}),function(t){"object"==typeof exports&&"object"==typeof module?t(e("../../lib/codemirror")):"function"==typeof i&&i.amd?i("codemirror/addon/hint/show-hint",["../../lib/codemirror"],t):t(CodeMirror)}(function(t){"use strict";function e(t,e){this.cm=t,this.options=this.buildOptions(e),this.widget=this.onClose=null}function i(t){return"string"==typeof t?t:t.text}function n(t,e){function i(t,i){var s;s="string"!=typeof i?function(t){return i(t,e)}:n.hasOwnProperty(i)?n[i]:i,o[t]=s}var n={Up:function(){e.moveFocus(-1)},Down:function(){e.moveFocus(1)},PageUp:function(){e.moveFocus(-e.menuSize()+1,!0)},PageDown:function(){e.moveFocus(e.menuSize()-1,!0)},Home:function(){e.setFocus(0)},End:function(){e.setFocus(e.length-1)},Enter:e.pick,Tab:e.pick,Esc:e.close},s=t.options.customKeys,o=s?{}:n;if(s)for(var r in s)s.hasOwnProperty(r)&&i(r,s[r]);var a=t.options.extraKeys;if(a)for(var r in a)a.hasOwnProperty(r)&&i(r,a[r]);return o}function s(t,e){for(;e&&e!=t;){if("LI"===e.nodeName.toUpperCase()&&e.parentNode==t)return e;e=e.parentNode}}function o(e,o){this.completion=e,this.data=o;var l=this,c=e.cm,d=this.hints=document.createElement("ul");d.className="CodeMirror-hints",this.selectedHint=o.selectedHint||0;for(var h=o.list,u=0;u<h.length;++u){var f=d.appendChild(document.createElement("li")),p=h[u],m=r+(u!=this.selectedHint?"":" "+a);null!=p.className&&(m=p.className+" "+m),f.className=m,p.render?p.render(f,o,p):f.appendChild(document.createTextNode(p.displayText||i(p))),f.hintId=u}var g=c.cursorCoords(e.options.alignWithWord?o.from:null),v=g.left,y=g.bottom,b=!0;d.style.left=v+"px",d.style.top=y+"px";var w=window.innerWidth||Math.max(document.body.offsetWidth,document.documentElement.offsetWidth),_=window.innerHeight||Math.max(document.body.offsetHeight,document.documentElement.offsetHeight);(e.options.container||document.body).appendChild(d);var k=d.getBoundingClientRect(),x=k.bottom-_;if(x>0){var C=k.bottom-k.top,S=g.top-(g.bottom-k.top);if(S-C>0)d.style.top=(y=g.top-C)+"px",b=!1;else if(C>_){d.style.height=_-5+"px",d.style.top=(y=g.bottom-k.top)+"px";var T=c.getCursor();o.from.ch!=T.ch&&(g=c.cursorCoords(T),d.style.left=(v=g.left)+"px",k=d.getBoundingClientRect())}}var E=k.left-w;if(E>0&&(k.right-k.left>w&&(d.style.width=w-5+"px",E-=k.right-k.left-w),d.style.left=(v=g.left-E)+"px"),c.addKeyMap(this.keyMap=n(e,{moveFocus:function(t,e){l.changeActive(l.selectedHint+t,e)},setFocus:function(t){l.changeActive(t)},menuSize:function(){return l.screenAmount()},length:h.length,close:function(){e.close()},pick:function(){l.pick()},data:o})),e.options.closeOnUnfocus){var D;c.on("blur",this.onBlur=function(){D=setTimeout(function(){e.close()},100)}),c.on("focus",this.onFocus=function(){clearTimeout(D)})}var P=c.getScrollInfo();return c.on("scroll",this.onScroll=function(){var t=c.getScrollInfo(),i=c.getWrapperElement().getBoundingClientRect(),n=y+P.top-t.top,s=n-(window.pageYOffset||(document.documentElement||document.body).scrollTop);return b||(s+=d.offsetHeight),s<=i.top||s>=i.bottom?e.close():(d.style.top=n+"px",void(d.style.left=v+P.left-t.left+"px"))}),t.on(d,"dblclick",function(t){var e=s(d,t.target||t.srcElement);e&&null!=e.hintId&&(l.changeActive(e.hintId),l.pick())}),t.on(d,"click",function(t){var i=s(d,t.target||t.srcElement);i&&null!=i.hintId&&(l.changeActive(i.hintId),e.options.completeOnSingleClick&&l.pick())}),t.on(d,"mousedown",function(){setTimeout(function(){c.focus()},20)}),t.signal(o,"select",h[0],d.firstChild),!0}var r="CodeMirror-hint",a="CodeMirror-hint-active";t.showHint=function(t,e,i){if(!e)return t.showHint(i);i&&i.async&&(e.async=!0);var n={hint:e};if(i)for(var s in i)n[s]=i[s];return t.showHint(n)},t.defineExtension("showHint",function(i){if(!(this.listSelections().length>1||this.somethingSelected())){this.state.completionActive&&this.state.completionActive.close();var n=this.state.completionActive=new e(this,i),s=n.options.hint;if(s)return t.signal(this,"startCompletion",this),s.async?void s(this,function(t){n.showHints(t)},n.options):n.showHints(s(this,n.options))}}),e.prototype={close:function(){this.active()&&(this.cm.state.completionActive=null,this.widget&&this.widget.close(),this.onClose&&this.onClose(),t.signal(this.cm,"endCompletion",this.cm))},active:function(){return this.cm.state.completionActive==this},pick:function(e,n){var s=e.list[n];s.hint?s.hint(this.cm,e,s):this.cm.replaceRange(i(s),s.from||e.from,s.to||e.to,"complete"),t.signal(e,"pick",s),this.close()},showHints:function(t){return t&&t.list.length&&this.active()?void(this.options.completeSingle&&1==t.list.length?this.pick(t,0):this.showWidget(t)):this.close()},showWidget:function(e){function i(){l||(l=!0,d.close(),d.cm.off("cursorActivity",a),e&&t.signal(e,"close"))}function n(){if(!l){t.signal(e,"update");var i=d.options.hint;i.async?i(d.cm,s,d.options):s(i(d.cm,d.options))}}function s(t){if(e=t,!l)return e&&e.list.length?(d.widget&&d.widget.close(),void(d.widget=new o(d,e))):i()}function r(){c&&(m(c),c=0)}function a(){r();var t=d.cm.getCursor(),e=d.cm.getLine(t.line);t.line!=u.line||e.length-t.ch!=f-u.ch||t.ch<u.ch||d.cm.somethingSelected()||t.ch&&h.test(e.charAt(t.ch-1))?d.close():(c=p(n),d.widget&&d.widget.close())}this.widget=new o(this,e),t.signal(e,"shown");var l,c=0,d=this,h=this.options.closeCharacters,u=this.cm.getCursor(),f=this.cm.getLine(u.line).length,p=window.requestAnimationFrame||function(t){return setTimeout(t,1e3/60)},m=window.cancelAnimationFrame||clearTimeout;this.cm.on("cursorActivity",a),this.onClose=i},buildOptions:function(t){var e=this.cm.options.hintOptions,i={};for(var n in l)i[n]=l[n];if(e)for(var n in e)void 0!==e[n]&&(i[n]=e[n]);if(t)for(var n in t)void 0!==t[n]&&(i[n]=t[n]);return i}},o.prototype={close:function(){if(this.completion.widget==this){this.completion.widget=null,this.hints.parentNode.removeChild(this.hints),this.completion.cm.removeKeyMap(this.keyMap);var t=this.completion.cm;this.completion.options.closeOnUnfocus&&(t.off("blur",this.onBlur),t.off("focus",this.onFocus)),t.off("scroll",this.onScroll)}},pick:function(){this.completion.pick(this.data,this.selectedHint)},changeActive:function(e,i){if(e>=this.data.list.length?e=i?this.data.list.length-1:0:e<0&&(e=i?0:this.data.list.length-1),this.selectedHint!=e){var n=this.hints.childNodes[this.selectedHint];n.className=n.className.replace(" "+a,""),n=this.hints.childNodes[this.selectedHint=e],n.className+=" "+a,n.offsetTop<this.hints.scrollTop?this.hints.scrollTop=n.offsetTop-3:n.offsetTop+n.offsetHeight>this.hints.scrollTop+this.hints.clientHeight&&(this.hints.scrollTop=n.offsetTop+n.offsetHeight-this.hints.clientHeight+3),t.signal(this.data,"select",this.data.list[this.selectedHint],n)}},screenAmount:function(){return Math.floor(this.hints.clientHeight/this.hints.firstChild.offsetHeight)||1}},t.registerHelper("hint","auto",function(e,i){var n,s=e.getHelpers(e.getCursor(),"hint");if(s.length)for(var o=0;o<s.length;o++){var r=s[o](e,i);if(r&&r.list.length)return r}else if(n=e.getHelper(e.getCursor(),"hintWords")){if(n)return t.hint.fromList(e,{words:n})}else if(t.hint.anyword)return t.hint.anyword(e,i)}),t.registerHelper("hint","fromList",function(e,i){for(var n=e.getCursor(),s=e.getTokenAt(n),o=[],r=0;r<i.words.length;r++){var a=i.words[r];a.slice(0,s.string.length)==s.string&&o.push(a)}if(o.length)return{list:o,from:t.Pos(n.line,s.start),to:t.Pos(n.line,s.end)}}),t.commands.autocomplete=t.showHint;var l={hint:t.hint.auto,completeSingle:!0,alignWithWord:!0,closeCharacters:/[\s()\[\]{};:>,]/,closeOnUnfocus:!0,completeOnSingleClick:!1,container:null,customKeys:null,extraKeys:null};t.defineOption("hintOptions",null)}),function(t){"object"==typeof exports&&"object"==typeof module?t(e("../../lib/codemirror")):"function"==typeof i&&i.amd?i("codemirror/addon/hint/lint",["../../lib/codemirror"],t):t(CodeMirror)}(function(t){"use strict";function e(e,i){function n(e){return s.parentNode?(s.style.top=Math.max(0,e.clientY-s.offsetHeight-5)+"px",void(s.style.left=e.clientX+5+"px")):t.off(document,"mousemove",n)}var s=document.createElement("div");return s.className="CodeMirror-lint-tooltip",s.appendChild(i.cloneNode(!0)),document.body.appendChild(s),t.on(document,"mousemove",n),n(e),null!=s.style.opacity&&(s.style.opacity=1),s}function i(t){t.parentNode&&t.parentNode.removeChild(t)}function n(t){t.parentNode&&(null==t.style.opacity&&i(t),t.style.opacity=0,setTimeout(function(){i(t)},600))}function s(i,s,o){function r(){t.off(o,"mouseout",r),a&&(n(a),a=null)}var a=e(i,s),l=setInterval(function(){if(a)for(var t=o;;t=t.parentNode){if(t&&11==t.nodeType&&(t=t.host),t==document.body)return;if(!t){r();break}}if(!a)return clearInterval(l)},400);t.on(o,"mouseout",r)}function o(t,e,i){this.marked=[],this.options=e,this.timeout=null,this.hasGutter=i,this.onMouseOver=function(e){g(t,e)}}function r(e,i){if(i instanceof Function)return{getAnnotations:i};if(i&&i!==!0||(i={}),i.getAnnotations||(i.getAnnotations=e.getHelper(t.Pos(0,0),"lint")),!i.getAnnotations)throw new Error("Required option 'getAnnotations' missing (lint addon)");return i}function a(t){var e=t.state.lint;e.hasGutter&&t.clearGutter(v);for(var i=0;i<e.marked.length;++i)e.marked[i].clear();e.marked.length=0}function l(e,i,n,o){var r=document.createElement("div"),a=r;return r.className="CodeMirror-lint-marker-"+i,n&&(a=r.appendChild(document.createElement("div")),a.className="CodeMirror-lint-marker-multiple"),0!=o&&t.on(a,"mouseover",function(t){s(t,e,a)}),r}function c(t,e){return"error"==t?t:e}function d(t){for(var e=[],i=0;i<t.length;++i){var n=t[i],s=n.from.line;(e[s]||(e[s]=[])).push(n)}return e}function h(t){var e=t.severity;e||(e="error");var i=document.createElement("div");return i.className="CodeMirror-lint-message-"+e,i.appendChild(document.createTextNode(t.message)),i}function u(t){var e=t.state.lint,i=e.options,n=i.options||i;i.async||i.getAnnotations.async?i.getAnnotations(t.getValue(),f,n,t):f(t,i.getAnnotations(t.getValue(),n,t))}function f(t,e){a(t);for(var i=t.state.lint,n=i.options,s=d(e),o=0;o<s.length;++o){var r=s[o];if(r){for(var u=null,f=i.hasGutter&&document.createDocumentFragment(),p=0;p<r.length;++p){var m=r[p],g=m.severity;g||(g="error"),u=c(u,g),n.formatAnnotation&&(m=n.formatAnnotation(m)),i.hasGutter&&f.appendChild(h(m)),m.to&&i.marked.push(t.markText(m.from,m.to,{className:"CodeMirror-lint-mark-"+g,__annotation:m}))}i.hasGutter&&t.setGutterMarker(o,v,l(f,u,r.length>1,i.options.tooltips))}}n.onUpdateLinting&&n.onUpdateLinting(e,s,t)}function p(t){var e=t.state.lint;e&&(clearTimeout(e.timeout),e.timeout=setTimeout(function(){u(t)},e.options.delay||500))}function m(t,e){var i=e.target||e.srcElement;s(e,h(t),i)}function g(t,e){var i=e.target||e.srcElement;if(/\bCodeMirror-lint-mark-/.test(i.className))for(var n=i.getBoundingClientRect(),s=(n.left+n.right)/2,o=(n.top+n.bottom)/2,r=t.findMarksAt(t.coordsChar({left:s,top:o},"client")),a=0;a<r.length;++a){var l=r[a].__annotation;if(l)return m(l,e)}}var v="CodeMirror-lint-markers";t.defineOption("lint",!1,function(e,i,n){if(n&&n!=t.Init&&(a(e),e.off("change",p),t.off(e.getWrapperElement(),"mouseover",e.state.lint.onMouseOver),clearTimeout(e.state.lint.timeout),delete e.state.lint),i){for(var s=e.getOption("gutters"),l=!1,c=0;c<s.length;++c)s[c]==v&&(l=!0);var d=e.state.lint=new o(e,r(e,i),l);e.on("change",p),0!=d.options.tooltips&&t.on(e.getWrapperElement(),"mouseover",d.onMouseOver),u(e)}})}),function(t){"object"==typeof exports&&"object"==typeof module?t(e("../../lib/codemirror")):"function"==typeof i&&i.amd?i("codemirror/addon/hint/html-lint",["../../lib/codemirror"],t):t(CodeMirror)}(function(t){"use strict";var i=function(t){function e(t,e){return Array(t+1).join(e||" ")}var i={};return i.version="0.9.13",i.release="20160501",i.rules={},i.defaultRuleset={"tagname-lowercase":!0,"attr-lowercase":!0,"attr-value-double-quotes":!0,"doctype-first":!0,"tag-pair":!0,"spec-char-escape":!0,"id-unique":!0,"src-not-empty":!0,"attr-no-duplication":!0,"title-require":!0},i.addRule=function(t){i.rules[t.id]=t},i.verify=function(e,s){(s===t||0===Object.keys(s).length)&&(s=i.defaultRuleset),e=e.replace(/^\s*<!--\s*htmlhint\s+([^\r\n]+?)\s*-->/i,function(e,i){return s===t&&(s={}),i.replace(/(?:^|,)\s*([^:,]+)\s*(?:\:\s*([^,\s]+))?/g,function(e,i,n){"false"===n?n=!1:"true"===n&&(n=!0),s[i]=n===t||n}),""});var o,r=new n,a=new i.Reporter(e,s),l=i.rules;for(var c in s)o=l[c],o!==t&&s[c]!==!1&&o.init(r,a,s[c]);return r.parse(e),a.messages},i.format=function(t,i){i=i||{};var n=[],s={white:"",grey:"",red:"",reset:""};i.colors&&(s.white="\x1b[37m",s.grey="\x1b[90m",s.red="\x1b[31m",s.reset="\x1b[39m");var o=i.indent||0;return t.forEach(function(t){var i=40,r=i+20,a=t.evidence,l=t.line,c=t.col,d=a.length,h=c>i+1?c-i:1,u=a.length>c+r?c+r:d;i+1>c&&(u+=i-c+1),a=a.replace(/\t/g," ").substring(h-1,u),h>1&&(a="..."+a,h-=3),d>u&&(a+="..."),n.push(s.white+e(o)+"L"+l+" |"+s.grey+a+s.reset);var f=c-h,p=a.substring(0,f).match(/[^\u0000-\u00ff]/g);null!==p&&(f+=p.length),n.push(s.white+e(o)+e((l+"").length+3+f)+"^ "+s.red+t.message+" ("+t.rule.id+")"+s.reset)}),n},i}();"object"==typeof exports&&exports&&(exports.HTMLHint=i),function(t){var e=function(){var t=this;t._init.apply(t,arguments)};e.prototype={_init:function(t,e){var i=this;i.html=t,i.lines=t.split(/\r?\n/);var n=t.match(/\r?\n/);i.brLen=null!==n?n[0].length:0,i.ruleset=e,i.messages=[]},error:function(t,e,i,n,s){this.report("error",t,e,i,n,s)},warn:function(t,e,i,n,s){this.report("warning",t,e,i,n,s)},info:function(t,e,i,n,s){this.report("info",t,e,i,n,s)},report:function(t,e,i,n,s,o){for(var r,a,l=this,c=l.lines,d=l.brLen,h=i-1,u=c.length;u>h&&(r=c[h],a=r.length,n>a&&u>i);h++)i++,n-=a,1!==n&&(n-=d);l.messages.push({type:t,message:e,raw:o,evidence:r,line:i,col:n,rule:{id:s.id,description:s.description,link:"https://github.com/yaniswang/HTMLHint/wiki/"+s.id}})}},t.Reporter=e}(i);var n=function(t){var e=function(){var t=this;t._init.apply(t,arguments)};return e.prototype={_init:function(){var t=this;t._listeners={},t._mapCdataTags=t.makeMap("script,style"),t._arrBlocks=[],t.lastEvent=null},makeMap:function(t){for(var e={},i=t.split(","),n=0;i.length>n;n++)e[i[n]]=!0;return e},parse:function(e){function i(e,i,n,s){var o=n-y+1;s===t&&(s={}),s.raw=i,s.pos=n,s.line=b,s.col=o,w.push(s),h.fire(e,s);for(var r;r=m.exec(i);)b++,y=n+m.lastIndex}var n,s,o,r,a,l,c,d,h=this,u=h._mapCdataTags,f=/<(?:\/([^\s>]+)\s*|!--([\s\S]*?)--|!([^>]*?)|([\w\-:]+)((?:\s+[^\s"'>\/=\x00-\x0F\x7F\x80-\x9F]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s"'>]*))?)*?)\s*(\/?))>/g,p=/\s*([^\s"'>\/=\x00-\x0F\x7F\x80-\x9F]+)(?:\s*=\s*(?:(")([^"]*)"|(')([^']*)'|([^\s"'>]*)))?/g,m=/\r?\n/g,g=0,v=0,y=0,b=1,w=h._arrBlocks;for(h.fire("start",{pos:0,line:1,col:1});n=f.exec(e);)if(s=n.index,s>g&&(d=e.substring(g,s),a?c.push(d):i("text",d,g)),g=f.lastIndex,!(o=n[1])||(a&&o===a&&(d=c.join(""),i("cdata",d,v,{tagName:a,attrs:l}),a=null,l=null,c=null),a))if(a)c.push(n[0]);else if(o=n[4]){r=[];for(var _,k=n[5],x=0;_=p.exec(k);){var C=_[1],S=_[2]?_[2]:_[4]?_[4]:"",T=_[3]?_[3]:_[5]?_[5]:_[6]?_[6]:"";r.push({name:C,value:T,quote:S,index:_.index,raw:_[0]}),x+=_[0].length}x===k.length?(i("tagstart",n[0],s,{tagName:o,attrs:r,close:n[6]}),u[o]&&(a=o,l=r.concat(),c=[],v=g)):i("text",n[0],s)}else(n[2]||n[3])&&i("comment",n[0],s,{content:n[2]||n[3],"long":!!n[2]});else i("tagend",n[0],s,{tagName:o});e.length>g&&(d=e.substring(g,e.length),i("text",d,g)),h.fire("end",{pos:g,line:b,col:e.length-y+1})},addListener:function(e,i){for(var n,s=this._listeners,o=e.split(/[,\s]/),r=0,a=o.length;a>r;r++)n=o[r],s[n]===t&&(s[n]=[]),s[n].push(i)},fire:function(e,i){i===t&&(i={}),i.type=e;var n=this,s=[],o=n._listeners[e],r=n._listeners.all;o!==t&&(s=s.concat(o)),r!==t&&(s=s.concat(r));var a=n.lastEvent;null!==a&&(delete a.lastEvent,i.lastEvent=a),n.lastEvent=i;for(var l=0,c=s.length;c>l;l++)s[l].call(n,i)},removeListener:function(e,i){var n=this._listeners[e];if(n!==t)for(var s=0,o=n.length;o>s;s++)if(n[s]===i){n.splice(s,1);break}},fixPos:function(t,e){var i,n=t.raw.substr(0,e),s=n.split(/\r?\n/),o=s.length-1,r=t.line;return o>0?(r+=o,i=s[o].length+1):i=t.col+e,{line:r,col:i}},getMapAttrs:function(t){for(var e,i={},n=0,s=t.length;s>n;n++)e=t[n],i[e.name]=e.value;return i}},e}();"object"==typeof exports&&exports&&(exports.HTMLParser=n),i.addRule({id:"alt-require",description:"The alt attribute of an <img> element must be present and alt attribute of area[href] and input[type=image] must have a value.",init:function(t,e){var i=this;t.addListener("tagstart",function(n){var s,o=n.tagName.toLowerCase(),r=t.getMapAttrs(n.attrs),a=n.col+o.length+1;"img"!==o||"alt"in r?("area"===o&&"href"in r||"input"===o&&"image"===r.type)&&("alt"in r&&""!==r.alt||(s="area"===o?"area[href]":"input[type=image]",e.warn("The alt attribute of "+s+" must have a value.",n.line,a,i,n.raw))):e.warn("An alt attribute must be present on <img> elements.",n.line,a,i,n.raw)})}}),i.addRule({id:"attr-lowercase",description:"All attribute names must be in lowercase.",init:function(t,e,i){var n=this,s=Array.isArray(i)?i:[];t.addListener("tagstart",function(t){for(var i,o=t.attrs,r=t.col+t.tagName.length+1,a=0,l=o.length;l>a;a++){i=o[a];var c=i.name;-1===s.indexOf(c)&&c!==c.toLowerCase()&&e.error("The attribute name of [ "+c+" ] must be in lowercase.",t.line,r+i.index,n,i.raw)}})}}),i.addRule({id:"attr-no-duplication",description:"Elements cannot have duplicate attributes.",init:function(t,e){var i=this;t.addListener("tagstart",function(t){for(var n,s,o=t.attrs,r=t.col+t.tagName.length+1,a={},l=0,c=o.length;c>l;l++)n=o[l],s=n.name,a[s]===!0&&e.error("Duplicate of attribute name [ "+n.name+" ] was found.",t.line,r+n.index,i,n.raw),a[s]=!0})}}),i.addRule({id:"attr-unsafe-chars",description:"Attribute values cannot contain unsafe chars.",init:function(t,e){var i=this;t.addListener("tagstart",function(t){for(var n,s,o=t.attrs,r=t.col+t.tagName.length+1,a=/[\u0000-\u0008\u000b\u000c\u000e-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/,l=0,c=o.length;c>l;l++)if(n=o[l],s=n.value.match(a),null!==s){var d=escape(s[0]).replace(/%u/,"\\u").replace(/%/,"\\x");e.warn("The value of attribute [ "+n.name+" ] cannot contain an unsafe char [ "+d+" ].",t.line,r+n.index,i,n.raw);
}})}}),i.addRule({id:"attr-value-double-quotes",description:"Attribute values must be in double quotes.",init:function(t,e){var i=this;t.addListener("tagstart",function(t){for(var n,s=t.attrs,o=t.col+t.tagName.length+1,r=0,a=s.length;a>r;r++)n=s[r],(""!==n.value&&'"'!==n.quote||""===n.value&&"'"===n.quote)&&e.error("The value of attribute [ "+n.name+" ] must be in double quotes.",t.line,o+n.index,i,n.raw)})}}),i.addRule({id:"attr-value-not-empty",description:"All attributes must have values.",init:function(t,e){var i=this;t.addListener("tagstart",function(t){for(var n,s=t.attrs,o=t.col+t.tagName.length+1,r=0,a=s.length;a>r;r++)n=s[r],""===n.quote&&""===n.value&&e.warn("The attribute [ "+n.name+" ] must have a value.",t.line,o+n.index,i,n.raw)})}}),i.addRule({id:"csslint",description:"Scan css with csslint.",init:function(t,i,n){var s=this;t.addListener("cdata",function(t){if("style"===t.tagName.toLowerCase()){var o;if(o="object"==typeof exports&&e?e("csslint").CSSLint.verify:CSSLint.verify,void 0!==n){var r=t.line-1,a=t.col-1;try{var l=o(t.raw,n).messages;l.forEach(function(t){var e=t.line;i["warning"===t.type?"warn":"error"]("["+t.rule.id+"] "+t.message,r+e,(1===e?a:0)+t.col,s,t.evidence)})}catch(t){}}}})}}),i.addRule({id:"doctype-first",description:"Doctype must be declared first.",init:function(t,e){var i=this,n=function(s){"start"===s.type||"text"===s.type&&/^\s*$/.test(s.raw)||(("comment"!==s.type&&s["long"]===!1||/^DOCTYPE\s+/i.test(s.content)===!1)&&e.error("Doctype must be declared first.",s.line,s.col,i,s.raw),t.removeListener("all",n))};t.addListener("all",n)}}),i.addRule({id:"doctype-html5",description:'Invalid doctype. Use: "<!DOCTYPE html>"',init:function(t,e){function i(t){t["long"]===!1&&"doctype html"!==t.content.toLowerCase()&&e.warn('Invalid doctype. Use: "<!DOCTYPE html>"',t.line,t.col,s,t.raw)}function n(){t.removeListener("comment",i),t.removeListener("tagstart",n)}var s=this;t.addListener("all",i),t.addListener("tagstart",n)}}),i.addRule({id:"head-script-disabled",description:"The <script> tag cannot be used in a <head> tag.",init:function(t,e){function i(i){var n=t.getMapAttrs(i.attrs),a=n.type,l=i.tagName.toLowerCase();"head"===l&&(r=!0),r!==!0||"script"!==l||a&&o.test(a)!==!0||e.warn("The <script> tag cannot be used in a <head> tag.",i.line,i.col,s,i.raw)}function n(e){"head"===e.tagName.toLowerCase()&&(t.removeListener("tagstart",i),t.removeListener("tagend",n))}var s=this,o=/^(text\/javascript|application\/javascript)$/i,r=!1;t.addListener("tagstart",i),t.addListener("tagend",n)}}),i.addRule({id:"href-abs-or-rel",description:"An href attribute must be either absolute or relative.",init:function(t,e,i){var n=this,s="abs"===i?"absolute":"relative";t.addListener("tagstart",function(t){for(var i,o=t.attrs,r=t.col+t.tagName.length+1,a=0,l=o.length;l>a;a++)if(i=o[a],"href"===i.name){("absolute"===s&&/^\w+?:/.test(i.value)===!1||"relative"===s&&/^https?:\/\//.test(i.value)===!0)&&e.warn("The value of the href attribute [ "+i.value+" ] must be "+s+".",t.line,r+i.index,n,i.raw);break}})}}),i.addRule({id:"id-class-ad-disabled",description:"The id and class attributes cannot use the ad keyword, it will be blocked by adblock software.",init:function(t,e){var i=this;t.addListener("tagstart",function(t){for(var n,s,o=t.attrs,r=t.col+t.tagName.length+1,a=0,l=o.length;l>a;a++)n=o[a],s=n.name,/^(id|class)$/i.test(s)&&/(^|[-\_])ad([-\_]|$)/i.test(n.value)&&e.warn("The value of attribute "+s+" cannot use the ad keyword.",t.line,r+n.index,i,n.raw)})}}),i.addRule({id:"id-class-value",description:"The id and class attribute values must meet the specified rules.",init:function(t,e,i){var n,s=this,o={underline:{regId:/^[a-z\d]+(_[a-z\d]+)*$/,message:"The id and class attribute values must be in lowercase and split by an underscore."},dash:{regId:/^[a-z\d]+(-[a-z\d]+)*$/,message:"The id and class attribute values must be in lowercase and split by a dash."},hump:{regId:/^[a-z][a-zA-Z\d]*([A-Z][a-zA-Z\d]*)*$/,message:"The id and class attribute values must meet the camelCase style."}};if(n="string"==typeof i?o[i]:i,n&&n.regId){var r=n.regId,a=n.message;t.addListener("tagstart",function(t){for(var i,n=t.attrs,o=t.col+t.tagName.length+1,l=0,c=n.length;c>l;l++)if(i=n[l],"id"===i.name.toLowerCase()&&r.test(i.value)===!1&&e.warn(a,t.line,o+i.index,s,i.raw),"class"===i.name.toLowerCase())for(var d,h=i.value.split(/\s+/g),u=0,f=h.length;f>u;u++)d=h[u],d&&r.test(d)===!1&&e.warn(a,t.line,o+i.index,s,d)})}}}),i.addRule({id:"id-unique",description:"The value of id attributes must be unique.",init:function(t,e){var i=this,n={};t.addListener("tagstart",function(t){for(var s,o,r=t.attrs,a=t.col+t.tagName.length+1,l=0,c=r.length;c>l;l++)if(s=r[l],"id"===s.name.toLowerCase()){o=s.value,o&&(void 0===n[o]?n[o]=1:n[o]++,n[o]>1&&e.error("The id value [ "+o+" ] must be unique.",t.line,a+s.index,i,s.raw));break}})}}),i.addRule({id:"inline-script-disabled",description:"Inline script cannot be use.",init:function(t,e){var i=this;t.addListener("tagstart",function(t){for(var n,s,o=t.attrs,r=t.col+t.tagName.length+1,a=/^on(unload|message|submit|select|scroll|resize|mouseover|mouseout|mousemove|mouseleave|mouseenter|mousedown|load|keyup|keypress|keydown|focus|dblclick|click|change|blur|error)$/i,l=0,c=o.length;c>l;l++)n=o[l],s=n.name.toLowerCase(),a.test(s)===!0?e.warn("Inline script [ "+n.raw+" ] cannot be use.",t.line,r+n.index,i,n.raw):("src"===s||"href"===s)&&/^\s*javascript:/i.test(n.value)&&e.warn("Inline script [ "+n.raw+" ] cannot be use.",t.line,r+n.index,i,n.raw)})}}),i.addRule({id:"inline-style-disabled",description:"Inline style cannot be use.",init:function(t,e){var i=this;t.addListener("tagstart",function(t){for(var n,s=t.attrs,o=t.col+t.tagName.length+1,r=0,a=s.length;a>r;r++)n=s[r],"style"===n.name.toLowerCase()&&e.warn("Inline style [ "+n.raw+" ] cannot be use.",t.line,o+n.index,i,n.raw)})}}),i.addRule({id:"jshint",description:"Scan script with jshint.",init:function(t,i,n){var s=this;t.addListener("cdata",function(o){if("script"===o.tagName.toLowerCase()){var r=t.getMapAttrs(o.attrs),a=r.type;if(void 0!==r.src||a&&/^(text\/javascript)$/i.test(a)===!1)return;var l;if(l="object"==typeof exports&&e?e("jshint").JSHINT:JSHINT,void 0!==n){var c=o.line-1,d=o.col-1,h=o.raw.replace(/\t/g," ");try{var u=l(h,n);u===!1&&l.errors.forEach(function(t){var e=t.line;i.warn(t.reason,c+e,(1===e?d:0)+t.character,s,t.evidence)})}catch(t){}}}})}}),i.addRule({id:"space-tab-mixed-disabled",description:"Do not mix tabs and spaces for indentation.",init:function(t,e,i){var n=this,s="nomix",o=null;if("string"==typeof i){var r=i.match(/^([a-z]+)(\d+)?/);s=r[1],o=r[2]&&parseInt(r[2],10)}t.addListener("text",function(i){for(var r,a=i.raw,l=/(^|\r?\n)([ \t]+)/g;r=l.exec(a);){var c=t.fixPos(i,r.index+r[1].length);if(1===c.col){var d=r[2];"space"===s?o?(/^ +$/.test(d)===!1||0!==d.length%o)&&e.warn("Please use space for indentation and keep "+o+" length.",c.line,1,n,i.raw):/^ +$/.test(d)===!1&&e.warn("Please use space for indentation.",c.line,1,n,i.raw):"tab"===s&&/^\t+$/.test(d)===!1?e.warn("Please use tab for indentation.",c.line,1,n,i.raw):/ +\t|\t+ /.test(d)===!0&&e.warn("Do not mix tabs and spaces for indentation.",c.line,1,n,i.raw)}}})}}),i.addRule({id:"spec-char-escape",description:"Special characters must be escaped.",init:function(t,e){var i=this;t.addListener("text",function(n){for(var s,o=n.raw,r=/[<>]/g;s=r.exec(o);){var a=t.fixPos(n,s.index);e.error("Special characters must be escaped : [ "+s[0]+" ].",a.line,a.col,i,n.raw)}})}}),i.addRule({id:"src-not-empty",description:"The src attribute of an img(script,link) must have a value.",init:function(t,e){var i=this;t.addListener("tagstart",function(t){for(var n,s=t.tagName,o=t.attrs,r=t.col+s.length+1,a=0,l=o.length;l>a;a++)n=o[a],(/^(img|script|embed|bgsound|iframe)$/.test(s)===!0&&"src"===n.name||"link"===s&&"href"===n.name||"object"===s&&"data"===n.name)&&""===n.value&&e.error("The attribute [ "+n.name+" ] of the tag [ "+s+" ] must have a value.",t.line,r+n.index,i,n.raw)})}}),i.addRule({id:"style-disabled",description:"<style> tags cannot be used.",init:function(t,e){var i=this;t.addListener("tagstart",function(t){"style"===t.tagName.toLowerCase()&&e.warn("The <style> tag cannot be used.",t.line,t.col,i,t.raw)})}}),i.addRule({id:"tag-pair",description:"Tag must be paired.",init:function(t,e){var i=this,n=[],s=t.makeMap("area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed,track,command,source,keygen,wbr");t.addListener("tagstart",function(t){var e=t.tagName.toLowerCase();void 0!==s[e]||t.close||n.push({tagName:e,line:t.line,raw:t.raw})}),t.addListener("tagend",function(t){for(var s=t.tagName.toLowerCase(),o=n.length-1;o>=0&&n[o].tagName!==s;o--);if(o>=0){for(var r=[],a=n.length-1;a>o;a--)r.push("</"+n[a].tagName+">");if(r.length>0){var l=n[n.length-1];e.error("Tag must be paired, missing: [ "+r.join("")+" ], start tag match failed [ "+l.raw+" ] on line "+l.line+".",t.line,t.col,i,t.raw)}n.length=o}else e.error("Tag must be paired, no start tag: [ "+t.raw+" ]",t.line,t.col,i,t.raw)}),t.addListener("end",function(t){for(var s=[],o=n.length-1;o>=0;o--)s.push("</"+n[o].tagName+">");if(s.length>0){var r=n[n.length-1];e.error("Tag must be paired, missing: [ "+s.join("")+" ], open tag match failed [ "+r.raw+" ] on line "+r.line+".",t.line,t.col,i,"")}})}}),i.addRule({id:"tag-self-close",description:"Empty tags must be self closed.",init:function(t,e){var i=this,n=t.makeMap("area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed,track,command,source,keygen,wbr");t.addListener("tagstart",function(t){var s=t.tagName.toLowerCase();void 0!==n[s]&&(t.close||e.warn("The empty tag : [ "+s+" ] must be self closed.",t.line,t.col,i,t.raw))})}}),i.addRule({id:"tagname-lowercase",description:"All html element names must be in lowercase.",init:function(t,e){var i=this;t.addListener("tagstart,tagend",function(t){var n=t.tagName;n!==n.toLowerCase()&&e.error("The html element name of [ "+n+" ] must be in lowercase.",t.line,t.col,i,t.raw)})}}),i.addRule({id:"title-require",description:"<title> must be present in <head> tag.",init:function(t,e){function i(t){var e=t.tagName.toLowerCase();"head"===e?o=!0:"title"===e&&o&&(r=!0)}function n(o){var a=o.tagName.toLowerCase();if(r&&"title"===a){var l=o.lastEvent;("text"!==l.type||"text"===l.type&&/^\s*$/.test(l.raw)===!0)&&e.error("<title></title> must not be empty.",o.line,o.col,s,o.raw)}else"head"===a&&(r===!1&&e.error("<title> must be present in <head> tag.",o.line,o.col,s,o.raw),t.removeListener("tagstart",i),t.removeListener("tagend",n))}var s=this,o=!1,r=!1;t.addListener("tagstart",i),t.addListener("tagend",n)}});var s={"tagname-lowercase":!1,"attr-lowercase":!1,"attr-value-double-quotes":!1,"doctype-first":!1,"tag-pair":!0,"spec-char-escape":!0,"id-unique":!0,"src-not-empty":!0,"attr-no-duplication":!0};t.registerHelper("lint","html",function(e){for(var n=[],o=i.verify(e,s),r=0;r<o.length;r++){var a=o[r],l=a.line-1,c=a.line-1,d=a.col-1,h=a.col;n.push({from:t.Pos(l,d),to:t.Pos(c,h),message:a.message,severity:a.type})}return n})}),i("modules/codeMirror",["jquery","codemirror","codemirror/mode/htmlmixed/htmlmixed","codemirror/addon/edit/closetag","codemirror/addon/edit/matchtags","codemirror/addon/hint/html-hint","codemirror/addon/hint/show-hint","codemirror/addon/hint/lint","codemirror/addon/hint/html-lint"],function(t,e){"use strict";function i(){}return window.CodeMirror=e,i.prototype={initialize:function(){this.opts.codeMirror=jQuery.extend({autoCloseTags:!1,extraKeys:{"Ctrl-J":"toMatchingTag","Ctrl-Space":"autocomplete"},gutters:["CodeMirror-lint-markers"],matchTags:{bothTags:!0},mode:"htmlmixed",lineNumbers:!0,lineWrapping:!0,lint:e.lint.html},this.opts.codeMirror),this.$toolbar.find("a.re-html,a.re-fullscreen").addClass("redactor-codemirror-button"),this.codeMirror.showCode_super=this.code.showCode,this.code.showCode=this.codeMirror.showCode,this.codeMirror.showVisual_super=this.code.showVisual,this.code.showVisual=this.codeMirror.showVisual,this.button.addCallback(this.button.addAfter("html","htmltidy","Beautify"),this.codeMirror.htmlTidy),this.button.addCallback(this.button.addAfter("html","code-undo","Undo"),t.proxy(function(){this.codeMirror.instance.undo()},this)),this.button.addCallback(this.button.addAfter("code-undo","code-redo","Redo"),t.proxy(function(){this.codeMirror.instance.redo()},this));var i=this.button.add("diff","Diff");this.$toolbar.find("a.re-diff").addClass("re-has-dropdown"),i.click(this.codeMirror.toggleDiff),this.$toolbar.find("a.re-htmltidy, a.re-code-undo, a.re-code-redo, a.re-diff").addClass("redactor-button-hidden redactor-codemirror-button")},destroy:function(){this.code.get=this.codeMirror.get_super,this.code.showCode=this.codeMirror.showCode_super,this.code.showVisual=this.codeMirror.showVisual_super},htmlTidy:function(){this.codeMirror.instance.setValue(this.tabifier.get(this.codeMirror.instance.getValue()))},toggleDiff:function(e){e.preventDefault(),t(".redactor-dropdown-box-diff").remove(),this.dropdown.hideAll(),this.button.addDropdown(t(e.currentTarget),this.codeMirror.getDiffDropdown()),this.dropdown.show(e,"diff"),window.diff_match_patch||(t(document.head).append('<link rel="stylesheet" rel="nofollow" href="//cdnjs.cloudflare.com/ajax/libs/codemirror/4.7.0/addon/merge/merge.min.css" type="text/css" />'),t.getScript("//cdnjs.cloudflare.com/ajax/libs/diff_match_patch/20121119/diff_match_patch.js").done(function(){t.getScript("//cdnjs.cloudflare.com/ajax/libs/codemirror/4.7.0/addon/merge/merge.js")}).fail(function(){window.alert("Sorry, an error occurred trying to load the difference engine.")}))},validate:function(){return this.codeMirror.instance?this.codeMirror.instance.state.lint.marked:[]},getDiffDropdown:function(){var e={},i=this;e[0]={title:"Initial State",func:this.codeMirror.showDiff},e[this.opts.buffer.length-1]={title:"Last Change",func:this.codeMirror.showDiff},this.codeMirror.compareOptions={};var n=this.$element.data("compareoptions");return n&&t.each(n,function(t,n){n.url?i.codeMirror.compareOptions[n.name]={bURL:!0,url:n.url}:i.codeMirror.compareOptions[n.name]=n.source,e[n.name]={title:n.title,func:i.codeMirror.showDiff}}),e},showDiff:function(i){var n=this,s=t.Deferred();if(this.codeMirror.diffInstance){if(!window.confirm("Any unsaved changes will be lost are you sure?"))return!1;this.codeMirror.hideDiff()}this.$box.append('<div id="redactor-code-diff"></div>');var o=t("#redactor-code-diff");this.$toolbar.append('<li class="redactor-diff-control"><a class="redactor-diff-save">Save</a></li><li class="redactor-diff-control"><a class="redactor-diff-cancel">Cancel</a></li>'),t(".redactor-diff-save").on("click",function(){n.codeMirror.saveDiff(),n.codeMirror.hideDiff()}),t(".redactor-diff-cancel").on("click",function(){n.codeMirror.hideDiff()}),this.$toolbar.find(".redactor-codemirror-button").not(".re-diff").addClass("redactor-button-disabled"),i=this.codeMirror.compareOptions[i]||this.codeMirror.cleanBuffer(this.opts.buffer[i])||i,i.bURL?t.get(i.url).done(function(t){i=t,s.resolve()}):s.resolve(),s.done(function(){o.css("top",n.$toolbar.height()+"px"),n.codeMirror.diffInstance=e.MergeView(o[0],{lineNumbers:!0,mode:"text/html",highlightDifferences:!0,value:n.codeMirror.instance.getValue(),orig:i,lineWrapping:!0}),n.$box.bind("resize.codeMirror",function(){var t=n.$box.height()-n.$toolbar.height();n.codeMirror.diffInstance.leftOriginal()&&n.codeMirror.diffInstance.leftOriginal().setSize(null,t),n.codeMirror.diffInstance.editor().setSize(null,t),n.codeMirror.diffInstance.rightOriginal()&&n.codeMirror.diffInstance.rightOriginal().setSize(null,t),n.codeMirror.diffInstance.wrap.style.height=t+"px"}).trigger("resize.codeMirror")})},saveDiff:function(){this.codeMirror.instance.setValue(this.codeMirror.diffInstance.editor().getValue())},hideDiff:function(){this.$box.find("#redactor-code-diff").remove(),this.$toolbar.find(".redactor-diff-control").remove(),this.$toolbar.find(".redactor-codemirror-button").not(".re-diff").removeClass("redactor-button-disabled"),this.codeMirror.diffInstance=null},getSandboxedHTML:function(){var t=document.createElement("div");return t.innerHTML=this.codeMirror.instance.getValue(),t.innerHTML},showVisual:function(){var t=this.codeMirror.getSandboxedHTML(),e=this.codeMirror.validate();e.length&&!confirm("HTML errors exist that can cause unexpected results. Are you sure you want to continue?")||(this.codeMirror.instance.toTextArea(),this.$textarea.val(t),this.$box.unbind("resize.codeMirror"),this.codeMirror.buttonActiveVisual(),this.codeMirror.showVisual_super.apply(this,arguments))},showCode:function(){var t=this;t.codeMirror.showCode_super.apply(t,arguments),t.codeMirror.buttonInactiveVisual(),t.codeMirror.instance=e.fromTextArea(t.$textarea[0],t.opts.codeMirror);for(var i=0;i<t.opts.buffer.length;i++)t.opts.buffer[i].length&&t.codeMirror.instance.setValue(t.codeMirror.cleanBuffer(t.opts.buffer[i]));t.codeMirror.instance.setValue(t.$textarea.val()),t.$box.bind("resize.codeMirror",function(){t.codeMirror.instance.getWrapperElement().style.height=t.$box.height()-t.$toolbar.height()+"px",t.codeMirror.instance.refresh()}),t.$box.trigger("resize.codeMirror"),t.codeMirror.instance.on("change",function(){t.$textarea.val(t.codeMirror.getSandboxedHTML())})},cleanBuffer:function(t){return!!t&&(t=this.clean.onSync(t),t=t.replace(/<span(.*?)class="redactor-selection-marker"([^>])*>(.*?)<\/span>/gi,""))},buttonActiveVisual:function(){this.$toolbar.find("a.redactor-codemirror-button:not(.re-html,.re-fullscreen)").addClass("redactor-button-hidden"),this.codeMirror.$previousButtons.removeClass("redactor-button-hidden")},buttonInactiveVisual:function(){this.$toolbar.find("a.redactor-codemirror-button").removeClass("redactor-button-hidden redactor-button-disabled"),this.codeMirror.$previousButtons=this.$toolbar.find("a:not(.redactor-codemirror-button, .redactor-button-hidden)").addClass("redactor-button-hidden")}},i}),i("modules/core",["jquery"],function(t){"use strict";function e(){}return e.prototype={getObject:function(){return t.extend({},this)},getEditor:function(){return this.$editor},getBox:function(){return this.$box},getElement:function(){return this.$element},getTextarea:function(){return this.$textarea},getToolbar:function(){return!!this.$toolbar&&this.$toolbar},addEvent:function(t){this.core.event=t},getEvent:function(){return this.core.event},setCallback:function(e,i,n){var s=this.opts[e+"Callback"];return this.$element.trigger(e+".redactor-api",i,n),t.isFunction(s)?"undefined"==typeof n?s.call(this,i):s.call(this,i,n):"undefined"==typeof n?i:n},destroy:function(){this.core.setCallback("destroy"),this.$element.off(".redactor").off(".redactor-api").removeData("redactor"),t(document).off(".redactor").off(".redactor-image-resize-hide").off(".redactor-image-delete").off(".redactor-media-resize-hide"),this.$editor.off(".redactor").off(".redactor-image-resize-hide").off(".redactor-image-delete").off(".redactor-media-resize-hide"),t(document).off("click.redactor-image-delete."+this.uuid),t(document).off("click.redactor-image-resize-hide."+this.uuid),t(document).off("touchstart.redactor."+this.uuid+" click.redactor."+this.uuid),t("body").off("scroll.redactor."+this.uuid),t(this.opts.toolbarFixedTarget).off("scroll.redactor."+this.uuid),this.$editor.removeClass("redactor-editor redactor-linebreaks redactor-placeholder"),this.$editor.removeAttr("contenteditable");var e=this.code.get();this.$toolbar.find("a").each(function(){var e=t(this);e.data("dropdown")&&(e.data("dropdown").remove(),e.data("dropdown",{}))}),this.build.isTextarea()?(this.$box.after(this.$element),this.$box.remove(),this.$element.val(e).show()):(this.$box.after(this.$editor),this.$box.remove(),this.$element.html(e).show(),this.$sourceTextarea.val(e).appendTo(this.$element)),this.$pasteBox&&this.$pasteBox.remove(),this.modal.close(),this.$modalBox&&this.$modalBox.remove(),this.$modalOverlay&&this.$modalOverlay.remove(),this.dropdown.hideAll(),t(".redactor-dropdown").remove(),t(".redactor-toolbar-tooltip").remove()}},e}),i("modules/dropdown",["jquery"],function(t){"use strict";function e(){}return e.prototype={build:function(e,i,n){"formatting"===e&&this.opts.formattingAdd&&t.each(this.opts.formattingAdd,t.proxy(function(t,e){var i,s=e.tag;"undefined"!=typeof e["class"]&&(s=s+"-"+e["class"]),e.type=this.utils.isBlockTag(e.tag)?"block":"inline",i="undefined"!=typeof e.func?e.func:"inline"===e.type?"inline.formatting":"block.formatting",this.opts.linebreaks&&"block"===e.type&&"p"===e.tag||(this.formatting[s]={tag:e.tag,style:e.style,"class":e["class"],attr:e.attr,data:e.data,clear:e.clear},n[s]={func:i,title:e.title})},this)),t.each(n,t.proxy(function(n,s){var o=t('<a href="#" class="redactor-dropdown-'+n+'">'+s.title+"</a>");"formatting"===e&&o.addClass("redactor-formatting-"+n),o.on("click",t.proxy(function(t){t.preventDefault();var e="func",i=s.func;s.command?(e="command",i=s.command):s.dropdown&&(e="dropdown",i=s.dropdown),this.button.onClick(t,n,e,i),this.dropdown.hideAll()},this)),i.append(o)},this))},show:function(e,i){function n(){var e=t("<div>").css({visibility:"hidden",width:100,overflow:"scroll"}).appendTo("body"),i=t("<div>").css({width:"100%"}).appendTo(e).outerWidth();return e.remove(),100-i}var s,o=this.button.get(i),r=o.data("dropdown").appendTo(document.body);if(this.utils.isMobile()&&!this.utils.browser("msie")&&document.activeElement.blur(),o.hasClass("dropact"))this.dropdown.hideAll();else{this.dropdown.hideAll(),this.core.setCallback("dropdownShow",{dropdown:r,key:i,button:o}),this.button.setActive(i),o.addClass("dropact");var a=o.offset(),l=r.width();a.left+l>t(document).width()&&(a.left=Math.max(0,a.left-l));var c=a.left+"px";if(this.$toolbar.hasClass("toolbar-fixed-box")){s=this.$toolbar.innerHeight()+this.opts.toolbarFixedTopOffset;var d="fixed";this.opts.toolbarFixedTarget!==document&&(s=this.$toolbar.innerHeight()+this.$toolbar.offset().top+this.opts.toolbarFixedTopOffset,d="absolute"),r.css({position:d,left:c,top:s+"px"}).show()}else s=o.innerHeight()+a.top+"px",r.css({position:"absolute",left:c,top:s}).show();this.core.setCallback("dropdownShown",{dropdown:r,key:i,button:o})}t(document).one("click.redactor",t.proxy(this.dropdown.hide,this)),this.$editor.one("click",t.proxy(this.dropdown.hide,this));var h=t(document.body),u=n();r.on("mouseover",function(){h.addClass("body-redactor-hidden"),h.css("margin-right",u+"px")}),r.on("mouseout",function(){h.removeClass("body-redactor-hidden").css("margin-right",0)}),e.stopPropagation()},hideAll:function(){this.$toolbar.find("a.dropact").removeClass("redactor-act").removeClass("dropact"),t(document.body).removeClass("body-redactor-hidden").css("margin-right",0),t(".redactor-dropdown-"+this.uuid).hide(),this.core.setCallback("dropdownHide")},hide:function(e){var i=t(e.target);i.hasClass("dropact")||(i.removeClass("dropact"),this.dropdown.hideAll())}},e}),i("modules/embed",["jquery"],function(t){"use strict";function e(){}return e.prototype={reUrlYoutube:/https?:\/\/(?:[0-9A-Z-]+\.)?(?:youtu\.be\/|youtube\.com\S*[^\w\-\s])([\w\-]{11})(?=[^\w\-]|$)(?![?=&+%\w.-]*(?:['"][^<>]*>|<\/a>))[?=&+%\w.-]*/gi,reUrlVimeo:/https?:\/\/(www\.)?vimeo.com\/(\d+)($|\/)/,getTemplate:function(){return String()+'<section id="redactor-modal-embed-insert"><label>'+this.lang.get("embed_html_code")+'</label><textarea id="redactor-insert-embed-area" style="height: 160px; width: 100%"></textarea></section>'},show:function(){this.modal.addTemplate("embed",this.embed.getTemplate()),this.modal.load("embed",this.lang.get("embed"),700),this.modal.createCancelButton();var e=this.modal.createActionButton(this.lang.get("insert"));e.on("click",this.embed.insert),this.selection.save(),this.modal.show(),t("#redactor-insert-embed-area")[0].focus()},insert:function(){var e=t("#redactor-insert-embed-area").val();if(!e.match(/<iframe|<video|<object|<embed/gi)){e=this.clean.stripTags(e);var i='<iframe style="width: 500px; height: 281px;" src="',n='" frameborder="0" allowfullscreen></iframe>';e.match(this.embed.reUrlYoutube)?e=e.replace(this.embed.reUrlYoutube,i+"//www.youtube.com/embed/$1"+n):e.match(this.embed.reUrlVimeo)&&(e=e.replace(this.embed.reUrlVimeo,i+"//player.vimeo.com/video/$2"+n))}this.selection.restore(),this.modal.close();var s=this.selection.getBlock()||this.selection.getCurrent();s?t(s).after(e):this.insert.html(e),this.code.sync()}},e}),i("modules/file",["jquery"],function(t){"use strict";function e(){}return e.prototype={show:function(){this.modal.load("file",this.lang.get("file"),700),this.upload.init("#redactor-modal-file-upload",this.opts.fileUpload,this.file.insert),this.selection.save(),this.selection.get();var e=this.sel.toString();t("#redactor-filename").val(e),this.modal.show()},insert:function(e,i,n){if("undefined"!=typeof e.error)return this.modal.close(),this.selection.restore(),this.core.setCallback("fileUploadError",e),void 0;var s;if("string"==typeof e)s=e;else{var o=t("#redactor-filename").val();"undefined"!=typeof o&&""!==o||(o=e.filename),s='<a href="'+e.filelink+'" id="filelink-marker">'+o+"</a>"}if(i){this.selection.removeMarkers();var r=this.selection.getMarker();this.insert.nodeToCaretPositionFromPoint(n,r)}else this.modal.close();if(this.selection.restore(),this.buffer.set(),this.insert.htmlWithoutClean(s),"string"!=typeof e){var a=t(this.$editor.find("a#filelink-marker"));0!==a.length?a.removeAttr("id").removeAttr("style"):a=!1,this.core.setCallback("fileUpload",a,e)}}},e}),i("modules/focus",["jquery"],function(t){"use strict";function e(){}return e.prototype={setStart:function(){this.$editor[0].focus();var t=this.$editor.children().first();if(0!==t.length&&0!==t[0].length&&"BR"!==t[0].tagName&&3!==t[0].nodeType){if("UL"===t[0].tagName||"OL"===t[0].tagName){var e=t.find("li").first();if(!this.utils.isBlock(e)&&""===e.text())return void this.caret.setStart(e)}return this.opts.linebreaks&&!this.utils.isBlockTag(t[0].tagName)?(this.selection.get(),this.range.setStart(this.$editor[0],0),this.range.setEnd(this.$editor[0],0),this.selection.addRange(),void 0):void this.caret.setStart(t)}},setEnd:function(){if(this.utils.browser("mozilla")||this.utils.browser("msie")){var t=this.$editor.children().last();this.$editor[0].focus(),this.caret.setEnd(t)}else{this.selection.get();try{this.range.selectNodeContents(this.$editor[0]),this.range.collapse(!1),this.selection.addRange()}catch(t){}}},isFocused:function(){var e=document.getSelection().focusNode;return null!==e&&(!(!this.opts.linebreaks||!t(e.parentNode).hasClass("redactor-linebreaks"))||!!this.utils.isRedactorParent(e.parentNode)&&this.$editor.is(":focus"))}},e}),i("modules/fontcolor",["jquery"],function(t){"use strict";function e(){}return e.prototype={initialize:function(){for(var t=["fontcolor","backcolor"],e=0;e<2;e++){var i=t[e],n=this.button.get(i);if(n.length){var s=this.button.addDropdown(n);s.width(242),this.fs.buildPicker(s,i,this.fs.colors,this.fontcolor.set,this.fontcolor.remove)}}},set:function(e,i){this.fs.setInlineStyle(function(n){t(n).css(e,i)})},remove:function(e){t.each(this.selection.getNodes(),function(i,n){t(n).css(e,"")}),this.code.sync()}},e}),i("modules/fontfamily",["jquery"],function(t){"use strict";function e(){}return e.prototype={initialize:function(){var e=["Arial","Arial Narrow","Arial Black","Helvetica","Georgia","Lucida","Monospace","Palatino","Tahoma","Times New Roman","Trebuchet","Verdana"],i=this,n={};t.each(e,function(t,e){n["s"+t]={title:e,func:function(){i.fontfamily.set(e)}}}),n.remove={title:"Remove Font Family",func:i.fontfamily.reset};var s=this.button.get("fontfamily");this.button.addDropdown(s,n)},set:function(t){this.inline.format("span","style","font-family:"+t+";")},reset:function(){this.inline.removeStyleRule("font-family")}},e}),i("modules/fontsize",["jquery"],function(t){"use strict";function e(){}return e.prototype={initialize:function(){var e=[10,11,12,14,16,18,20,24,28,30],i=this,n={};t.each(e,function(t,e){n["s"+t]={title:e+"px",func:function(){i.fontsize.set(e)}}}),n.remove={title:"Remove Font Size",func:i.fontsize.reset};var s=this.button.get("fontsize");s.length&&this.button.addDropdown(s,n)},set:function(t){this.inline.format("span","style","font-size: "+t+"px;")},reset:function(){this.inline.removeStyleRule("font-size")}},e}),i("modules/fs",["jquery"],function(t){"use strict";function e(){}return e.prototype={init:function(){this.opts.codeOnly&&this.button.remove("html"),this.buffer.clearRebuffer(),this.buffer.clearBuffer()},hidePluginButtons:function(){0!==this.opts.buttonsHide.length&&t.each(this.opts.buttonsHide,t.proxy(function(t,e){this.button.remove(e)},this))},setInlineStyle:function(e){if(this.utils.browser("mozilla")&&this.focus.isFocused()&&this.$editor[0].focus(),this.buffer.set(),this.selection.get(),t("#redactor-overlay-box:not(.redactor-overlay-type-table)",this.$editor).length)return e(this.fs.$editTarget),void this.code.sync();var i=this.sel.getRangeAt(0);if(this.sel.isCollapsed){var n=i.commonAncestorContainer;n.nodeType===Node.TEXT_NODE&&(n=n.parentElement),this.range.selectNodeContents(n),this.selection.addRange()}var s=[];if(i.startContainer===i.endContainer){var o=document.createElement("span");i.surroundContents(o),s=t(o)}else{this.fs.setImageFloatFix(),document.execCommand("createLink",!1,"redactor-temporary"),this.fs.unsetImageFloatFix();var r=this.$editor.find('a[href="redactor-temporary"]');r.each(function(){var e=t(this),i=e.text().replace("redactor-temporary"," ");if(i!==e.parent().text()||e.parent().hasClass("redactor-editor"))if(i===e.children(":first").text())s.push(e.children(":first")[0]),e.replaceWith(this.childNodes);else{var n=t("<span/>").append(i);e.replaceWith(n),s.push(n[0])}else s.push(e.parent()[0]),e.replaceWith(this.childNodes)})}e(s),this.caret.set(s[0],0,s[s.length-1],1),this.code.sync()},sync:function(){var t=this.$textarea.val();t=t.replace(/<span([^>]*)id="redactor-overlay-box"([^>]*)>(.*?)<\/span>/gi,""),this.$textarea.val(t)},buildPicker:function(e,i,n,s,o){for(var r="backcolor"===i?"background-color":"color",a=n.length,l=function(e){e.preventDefault(),e.stopPropagation(),s(t(this).data("rule"),t(this).attr("rel"))},c=0;c<a;c++){var d=n[c],h=t('<a rel="'+d+'" data-rule="'+r+'" href="#" style="float: left; font-size: 0; border: 2px solid #fff; padding: 0; margin: 0; width: 22px; height: 22px;"></a>');h.css("background-color",d),h.on("click",l),e.append(h)}var u=t('<a href="#" style="display: block; clear: both; padding: 5px; font-size: 12px; line-height: 1;"></a>').html(this.lang.get("none"));u.on("click",function(t){t.preventDefault(),t.stopPropagation(),o(r)}),e.append(u)},cleanID:function(t){return t.replace(/[\s"']/g,"")},colors:["#ffffff","#000000","#eeece1","#1f497d","#4f81bd","#c0504d","#9bbb59","#8064a2","#4bacc6","#f79646","#ffff00","#f2f2f2","#7f7f7f","#ddd9c3","#c6d9f0","#dbe5f1","#f2dcdb","#ebf1dd","#e5e0ec","#dbeef3","#fdeada","#fff2ca","#d8d8d8","#595959","#c4bd97","#8db3e2","#b8cce4","#e5b9b7","#d7e3bc","#ccc1d9","#b7dde8","#fbd5b5","#ffe694","#bfbfbf","#3f3f3f","#938953","#548dd4","#95b3d7","#d99694","#c3d69b","#b2a2c7","#b7dde8","#fac08f","#f2c314","#a5a5a5","#262626","#494429","#17365d","#366092","#953734","#76923c","#5f497a","#92cddc","#e36c09","#c09100","#7f7f7f","#0c0c0c","#1d1b10","#0f243e","#244061","#632423","#4f6128","#3f3151","#31859b","#974806","#7f6000"],dropdownShow:function(e,i){if("formatting"===i.key){var n=t(".redactor-dropdown");n.find(".highlight").removeClass("highlight"),this.selection.getBlock()&&n.find(".redactor-dropdown-"+this.selection.getBlock().tagName.toLowerCase()).addClass("highlight")}this.$element.trigger("dropdownShow.redactor")},modalIframeBrowseInit:function(){this.$redactorModalBrowser=t("#redactor-modal-iframe-browser"),this.$redactorModalBrowser.length||(this.$modalBox.append('<div id="redactor-modal-iframe-browser"><iframe frameborder="0" height="100%" width="100%" /><footer><div style="width:100%;"><button type="button" class="redactor-button-modal-close">Cancel</button></div></footer></div>'),this.$redactorModalBrowser=t("#redactor-modal-iframe-browser",this.$modalBox)),t("#redactor-modal",this.$modal).css("left",0),this.$redactorModalBrowser.hide().css("left",this.$modal.outerWidth())},modalIframeBrowse:function(e,i,n){var s=t.proxy(function(){window.removeEventListener("message",o,!1),this.$redactorModalBrowser.off("click"),this.$editor.off("redactor.modalClose.iframeBrowser"),this.$redactorModalBrowser.css({opacity:0,"z-index":this.$modal.css("z-index")-1}),this.$modal.css("opacity",1);var t=this;setTimeout(function(){t.$redactorModalBrowser.find("iframe").removeAttr("src")},500)},this),o=t.proxy(function(t){var e=t.data;if("string"==typeof t.data)try{
e=JSON.parse(t.data)}catch(t){return}(e.path&&e.name||e.id)&&(i.call(this,e),s())},this);n=n||this.$modal.outerWidth(),window.addEventListener("message",o,!1),this.$redactorModalBrowser.on("click",".redactor-button-modal-close",t.proxy(s,this)),this.$editor.on("redactor.modalClose.iframeBrowser",t.proxy(s,this)),this.$redactorModalBrowser.find("iframe").attr("src",e),this.$modal.css("opacity",0),this.$redactorModalBrowser.show().css({width:n,height:this.$modal.outerHeight(),left:parseInt(t(window).width()/2)-parseInt(n/2),opacity:1,top:this.$modal.css("marginTop"),"z-index":this.$modal.css("z-index")+1})},loadEditableControls:function(e){var i=this,n=e.element,s=t.extend({top:0,left:0},e.offset);this.fs.hideEditableControls(!1),e.bCancelSelection||(this.selection.get(),this.range.selectNode(n[0]),this.selection.addRange()),this.fs.$editBox=t('<span id="redactor-overlay-box" data-verified="redactor">'),this.fs.$editBox.attr("contenteditable","false"),this.fs.$editBox.attr("unselectable","on"),this.fs.$editControls=t("<ul></ul>"),this.fs.$editTarget=n,this.fs.$editTarget.data("offset",s),this.fs.$editBox.addClass("redactor-overlay-type-"+n[0].tagName.toLowerCase()),this.fs.editBoxOnHide=e.onHide,this.$editor.append(this.fs.$editBox),this.fs.$editBox.append(this.fs.$editControls),this.$editor.on("click.redactor.hideEditableControls",this.fs.hideEditableControls),t(document).on("click.redactor.hideEditableControls",this.fs.hideEditableControls),t(this.opts.toolbarFixedTarget).on("scroll.redactor.scrollEditableControls",this.fs.scrollEditableControls),t(document).on("mouseup.redactor.checkOverlay keyup.redactor.checkOverlay",this.fs.checkOverlay),this.$element.on("sync.redactor-api change.redactor-api",this.fs.checkOverlay),this.fs.positionControls(),t.each(e.buttons,function(t,e){i.fs.addEditableButton(e)})},positionControls:function(){var t=this.fs.$editTarget.data("offset");this.fs.$editBox.css({top:this.fs.$editTarget.position().top+parseInt(this.fs.$editTarget.css("marginTop"))+this.$editor[0].scrollTop+t.top,left:this.fs.$editTarget.position().left+parseInt(this.fs.$editTarget.css("marginLeft"))+t.left,width:this.fs.$editTarget.outerWidth(),height:this.fs.$editTarget.outerHeight()}),this.fs.$editControls.data("original-offset")||this.fs.$editControls.data("original-offset",this.fs.$editControls.offset()),this.fs.scrollEditableControls()},hideEditableControls:function(e){return(!e||e.target!==this.fs.$editTarget[0])&&((!e||!t(e.target).closest(".redactor-dropdown").length)&&(!(this.fs.editBoxOnHide&&!this.fs.editBoxOnHide(e))&&(this.$editor.off(".hideEditableControls"),t(document).off(".checkOverlay"),t(document).off(".hideEditableControls"),t(this.opts.toolbarFixedTarget).off(".scrollEditableControls"),this.fs.editBoxOnHide=!1,t("#redactor-overlay-box").remove(),void 0)))},checkOverlay:function(){return this.fs.$editTarget.parent().length?(this.observe.images(),void this.fs.positionControls()):void this.fs.hideEditableControls()},scrollEditableControls:function(){var t=this.$toolbar.offset().top+this.$toolbar.height(),e=t-this.fs.$editControls.data("original-offset").top;e>0&&e<this.fs.$editBox.height()?this.fs.$editControls.css({top:e}):this.fs.$editControls.css({top:""})},addEditableButton:function(e){var i=this,n=t('<li><button type="button" class="re-icon '+e["class"]+'" title="'+e.title+'"/></li>');n.on("click",function(t){t.stopPropagation(),t.preventDefault(),e.onClick(),i.fs.$editTarget.parent().length||i.fs.hideEditableControls(!1)}),this.fs.$editControls.append(n)},rgb2hex:function(t){function e(t){return("0"+parseInt(t).toString(16)).slice(-2)}return t?(t=t.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/),"#"+e(t[1])+e(t[2])+e(t[3])):""},setAttr:function(e,i,n){t.trim(n).length?e.attr(i,n):e.removeAttr(i)},setImageFloatFix:function(){t.each(this.selection.getNodes(),function(e,i){if("IMG"===i.tagName){var n=t(i);"none"!==n.css("float")&&(n.attr("data-redactor-save-float",n.css("float")),n.css("float","none"))}})},unsetImageFloatFix:function(){t.each(this.selection.getNodes(),function(e,i){if("IMG"===i.tagName){var n=t(i);!n.attr("data-redactor-save-float")||(n.css("float",n.attr("data-redactor-save-float")),n.removeAttr("data-redactor-save-float"))}})},snapSelectionToWord:function(){var t;if(window.getSelection&&(t=window.getSelection()).modify){if(t=window.getSelection(),!t.isCollapsed){var e=document.createRange();e.setStart(t.anchorNode,t.anchorOffset),e.setEnd(t.focusNode,t.focusOffset);var i=e.collapsed;e.detach();var n=t.focusNode,s=t.focusOffset;t.collapse(t.anchorNode,t.anchorOffset),i?(t.modify("move","forward","word"),t.extend(n,s),t.modify("extend","backward","word")):(t.modify("move","backward","word"),t.extend(n,s),t.modify("extend","forward","word"))}}else if((t=document.selection)&&"Control"!==t.type){var o=t.createRange();if(o.text){for(o.expand("word");/\s$/.test(o.text);)o.moveEnd("character",-1);o.select()}}}},e}),i("modules/fullscreen",["jquery"],function(t){"use strict";function e(){}return e.prototype={initialize:function(){this.fullscreen.isOpen=!1;var t=this.button.get("fullscreen");t.parent().css("float","right"),this.opts.fullscreen&&this.fullscreen.toggle()},enable:function(){var e=this;this.button.changeIcon("fullscreen","normalscreen"),this.button.setActive("fullscreen"),this.fullscreen.isOpen=!0,this.opts.toolbarExternal&&(this.fullscreen.toolcss={},this.fullscreen.boxcss={},this.fullscreen.toolcss.width=this.$toolbar.css("width"),this.fullscreen.toolcss.top=this.$toolbar.css("top"),this.fullscreen.toolcss.position=this.$toolbar.css("position"),this.fullscreen.boxcss.top=this.$box.css("top")),this.fullscreen.height=this.$editor.height(),this.opts.maxHeight&&this.$editor.css("max-height",""),this.opts.minHeight&&this.$editor.css("min-height",""),this.$fullscreenPlaceholder||(this.$fullscreenPlaceholder=t("<div/>")),this.$fullscreenPlaceholder.insertAfter(this.$box),"transparent"===this.$box.css("backgroundColor")&&t.each(this.$box.parents(),function(){var i=t(this).css("backgroundColor");if("transparent"!==i&&"inherit"!==i)return e.$box.css("backgroundColor",i),!1}),this.$box.appendTo(document.body),this.$box.addClass("redactor-box-fullscreen"),t("body, html").css("overflow","hidden"),this.fullscreen.resize(),t(window).on("resize.redactor.fullscreen",t.proxy(this.fullscreen.resize,this)),t(document).scrollTop(0,0),this.$editor[0].focus(),this.observe.load()},disable:function(){this.button.removeIcon("fullscreen","normalscreen"),this.button.setInactive("fullscreen"),this.fullscreen.isOpen=!1,t(window).off("resize.redactor.fullscreen"),t("body, html").css("overflow",""),this.$box.css("backgroundColor",""),this.$box.insertBefore(this.$fullscreenPlaceholder),this.$fullscreenPlaceholder.remove(),this.$box.removeClass("redactor-box-fullscreen").css({width:"auto",height:"auto"}),this.code.sync(),this.opts.toolbarExternal&&(this.$box.css("top",this.fullscreen.boxcss.top),this.$toolbar.css({width:this.fullscreen.toolcss.width,top:this.fullscreen.toolcss.top,position:this.fullscreen.toolcss.position})),this.opts.minHeight&&this.$editor.css("minHeight",this.opts.minHeight),this.opts.maxHeight&&this.$editor.css("maxHeight",this.opts.maxHeight),this.$editor.css("height","auto"),this.$editor[0].focus(),this.observe.load()},toggle:function(){this.fullscreen.isOpen?this.fullscreen.disable():this.fullscreen.enable(),this.$box.trigger("resize")},resize:function(){if(this.fullscreen.isOpen){var e=this.$toolbar.height(),i=window.innerHeight-e;this.$box.width(t(window).width()-2).height(i+e),this.opts.toolbarExternal&&(this.$toolbar.css({top:"0px",position:"absolute",width:"100%"}),this.$box.css("top",e+"px")),this.$editor.height(i-14)}}},e}),i("modules/image",["jquery"],function(t){"use strict";function e(){}return e.prototype={initialize:function(){this.opts.image=t.extend({onFileBrowseReturn:function(t){return t}},this.opts.image),this.$element.on("observed.redactor.img",this.image.setEditable),this.opts.modal_image_edit='<section>\t\t\t\t<div class="redactor-image-modalleftcol">\t\t\t\t\t<div class="redactor-image-preview">\t\t\t\t\t\t<img src="" style="max-width:100%; max-height:40%"/>\t\t\t\t\t</div>\t\t\t\t\t<fieldset>\t\t\t\t\t\t<legend>Size (px)</legend>\t\t\t\t\t\t<label><input id="redactor-image-width" type="text" class="smallinput" /> Width</label>\t\t\t\t\t\t<label><input id="redactor-image-height" type="text" class="smallinput" /> Height</label>\t\t\t\t\t</fieldset>\t\t\t\t\t<fieldset>\t\t\t\t\t\t<label><input id="redactor-image-border" type="number" min="0" class="smallinput" /> Border</label>\t\t\t\t\t</fieldset>\t\t\t\t\t<fieldset>\t\t\t\t\t\t<legend>Margin</legend>\t\t\t\t\t\t<input id="redactor-image-marginTop" type="number" min="0" class="smallinput" />\t\t\t\t\t\t<label><select id="redactor-image-marginTop-unit"><option>px</option><option>em</option><option>%</option></select>\t\t\t\t\t\t\tTop\t\t\t\t\t\t</label>\t\t\t\t\t\t<input id="redactor-image-marginRight" type="number" min="0" class="smallinput" />\t\t\t\t\t\t<label><select id="redactor-image-marginRight-unit"><option>px</option><option>em</option><option>%</option></select>\t\t\t\t\t\t\tRight\t\t\t\t\t\t</label>\t\t\t\t\t\t<input id="redactor-image-marginBottom" type="number" min="0" class="smallinput" />\t\t\t\t\t\t<label><select id="redactor-image-marginBottom-unit"><option>px</option><option>em</option><option>%</option></select>\t\t\t\t\t\t\tBottom\t\t\t\t\t\t</label>\t\t\t\t\t\t<input id="redactor-image-marginLeft" type="number" min="0" class="smallinput" />\t\t\t\t\t\t<label><select id="redactor-image-marginLeft-unit"><option>px</option><option>em</option><option>%</option></select>\t\t\t\t\t\t\tLeft\t\t\t\t\t\t</label>\t\t\t\t\t</fieldset>\t\t\t\t</div>\t\t\t\t<div class="redactor-image-modalrightcol">\t\t\t\t\t<fieldset>\t\t\t\t\t\t<label for="redactor-image-url">File/URL</label>\t\t\t\t\t\t<input id="redactor-image-url" type="text" name="redactor-image-url" />\t\t\t\t\t\t<button type="button" class="redactor-modal-btn" id="redactor-image-browse">Browse</button>\t\t\t\t\t</fieldset>\t\t\t\t\t<fieldset>\t\t\t\t\t\t<label for="redactor_image-align">Alignment</label>\t\t\t\t\t\t<ul id="redactor-image-align">\t\t\t\t\t\t\t<li><input id="redactor-image-align-none" name="redactor-image-align" type="radio" value="none"><label for="redactor-image-align-none">None</label></li>\t\t\t\t\t\t\t<li><input id="redactor-image-align-left" name="redactor-image-align" type="radio" value="left"><label for="redactor-image-align-left">Left</label></li>\t\t\t\t\t\t\t<li><input id="redactor-image-align-right" name="redactor-image-align" type="radio" value="right"><label for="redactor-image-align-right">Right</label></li>\t\t\t\t\t\t</ul>\t\t\t\t\t</fieldset>\t\t\t\t\t<fieldset>\t\t\t\t\t\t<label for="redactor-image-alt">Alt text</label><input type="text" id="redactor-image-alt" />\t\t\t\t\t\t<label for="redactor-image-title">Title text</label><input type="text" id="redactor-image-title" />\t\t\t\t\t</fieldset>\t\t\t\t\t<fieldset>\t\t\t\t\t\t<label for="redactor-image-class">Class</label>\t\t\t\t\t\t<input type="text" placeholder="Choose Style..." id="redactor-image-class">\t\t\t\t\t\t<label for="redactor-image-id">ID</label><input type="text" id="redactor-image-id" />\t\t\t\t\t</fieldset>\t\t\t\t</div>\t\t\t\t<div style="clear:both"></div>\t\t\t\t</section>'},setEditable:function(e,i){var n=this,s=t(i),o=[];if(o.push({name:"Settings","class":"re-cog",title:"Edit Image Properties",onClick:function(){return n.image.show(s),!1}}),window.Aviary){var r=t.extend(n.opts.aviary,{onSave:function(t,e){s.get(0).src=e}});n.featherEditor=n.featherEditor||new Aviary.Feather(r)}(!!this.opts.aviaryPopupURL||!!window.Aviary)&&o.push({name:"Edit","class":"re-pencil",title:"Edit",onClick:function(){if(n.opts.aviaryPopupURL){var t=n.opts.aviaryPopupURL.replace("{file}",s.attr("src")),e=s[0].naturalWidth;window.open(t,"_blank","width=960, height=700, scrollbars=1"),"undefined"==typeof window.FS&&(window.FS={}),"undefined"==typeof window.FS.editor&&(window.FS.editor={}),"undefined"==typeof window.FS.editor.fileEditingComplete&&(window.FS.editor.fileEditingComplete=function(t){s.one("load",function(){s[0].naturalWidth!==e&&s.attr("width",s[0].naturalWidth)}),s.attr("src",t.url.replace(/ /g,"%20"))})}else n.featherEditor.launch({image:s.get(0)});return!1}}),o.push({name:"Delete",title:"Delete","class":"re-trash",onClick:function(){return!!window.confirm("Are you sure you want to delete this image?")&&(s.remove(),void n.code.sync())}}),s.off(".editcontrols").on("click.editcontrols touchstart.editcontrols",function(t){t.stopPropagation(),n.fs.loadEditableControls({element:s,buttons:o})})},show:function(e){this.modal.addTemplate("image",this.opts.modal_image_edit),this.modal.load("image",this.opts.curLang.image+" Settings",600),this.modal.createCancelButton();var i=this.modal.createDeleteButton("Delete"),n=this.modal.createActionButton("Save");t("#redactor-overlay-box.redactor-overlay-type-img").length&&(e=this.fs.$editTarget),"string"==typeof e&&(this.selection.save(),e=t('<img data-new="true"/>')),e.data("save-src",e.attr("src")),e.removeAttr("height");var s=this,o=t(".redactor-image-preview > img",this.$modal),r=e[0].style,a=e[0].naturalWidth/e[0].naturalHeight,l=/\d+/,c=/\D+$/;if(this.opts.browseFileURL.length?t("#redactor-image-browse",this.$modal).on("click",t.proxy(function(e){return e.preventDefault(),this.fs.modalIframeBrowse.call(this,this.opts.browseFileURL,t.proxy(function(e){e=this.opts.image.onFileBrowseReturn(e),t("#redactor-image-url",this.$modal).val(e.path).change()},this)),!1},this)):t("#redactor-image-browse",this.$modal).hide(),t("input[type=number],#redactor-image-width,#redactor-image-height",s.$modal).on("keydown",function(t){(t.keyCode>57||t.keyCode<48)&&8!==t.keyCode&&9!==t.keyCode&&37!==t.keyCode&&39!==t.keyCode&&46!==t.keyCode&&13!==t.keyCode&&t.preventDefault()}),t("#redactor-image-width",this.$modal).val(e.width()).on("change keyup",function(){t("#redactor-image-height",this.$modal).val(parseInt(this.value/a))}),t("#redactor-image-height",this.$modal).val(e.height()).on("change keyup",function(){t("#redactor-image-width",this.$modal).val(parseInt(this.value*a))}),t("#redactor-image-border",this.$modal).val(r.borderWidth.match(l)).on("change",function(){o.css("border",t(this).val()+"px solid #000")}).change(),t("#redactor-image-marginTop",this.$modal).val(r.marginTop.match(l)||0),t("#redactor-image-marginRight",this.$modal).val(r.marginRight.match(l)||0),t("#redactor-image-marginBottom",this.$modal).val(r.marginBottom.match(l)||0),t("#redactor-image-marginLeft",this.$modal).val(r.marginLeft.match(l)||0),t("#redactor-image-marginTop-unit",this.$modal).val(r.marginTop.match(c)||"px"),t("#redactor-image-marginRight-unit",this.$modal).val(r.marginRight.match(c)||"px"),t("#redactor-image-marginBottom-unit",this.$modal).val(r.marginBottom.match(c)||"px"),t("#redactor-image-marginLeft-unit",this.$modal).val(r.marginLeft.match(c)||"px"),t('input[name="redactor-image-align"][value="'+e.css("float")+'"]',this.$modal).prop("checked",!0),t("#redactor-image-alt",this.$modal).val(e.attr("alt")),t("#redactor-image-title",this.$modal).val(e.attr("title")),t("#redactor-image-id",this.$modal).val(e.attr("id")),t("#redactor-image-class",this.$modal).val(e.attr("class")),t.fn.selectize){var d=this.opts.classes?t.map(this.opts.classes,function(t){return{value:t["class"],text:t.name}}):[],h=t("#redactor-image-class").selectize({delimiter:" ",persist:!1,create:!0});h[0].selectize.addOption(d),h[0].selectize.$control.on("keyup",function(t){t.stopPropagation()})}t("#redactor-image-url",this.$modal).val(e.attr("src")).on("change",function(){var i=t("#redactor-image-url",s.$modal).val();o.attr("src",i||"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"),i!==e.data("save-src")&&e.removeAttr("width")}).change(),o.load(function(){a=o[0].naturalWidth/o[0].naturalHeight,e.attr("width")||(t("#redactor-image-width",this.$modal).val(o[0].naturalWidth),t("#redactor-image-height",this.$modal).val(o[0].naturalHeight))}),n.on("click",function(){s.image.save(e)}),i.on("click",function(){e.remove(),s.code.sync(),s.modal.close()}),this.modal.show()},save:function(e){this.selection.restore();var i=t("#redactor-image-alt").val(),n=t("#redactor-image-title").val(),s=t("#redactor-image-id").val(),o=t("#redactor-image-class").val(),r=t("#redactor-image-width").val(),a=t("#redactor-image-marginTop").val()||0,l=t("#redactor-image-marginRight").val()||0,c=t("#redactor-image-marginBottom").val()||0,d=t("#redactor-image-marginLeft").val()||0,h=t("#redactor-image-marginTop-unit").val(),u=t("#redactor-image-marginRight-unit").val(),f=t("#redactor-image-marginBottom-unit").val(),p=t("#redactor-image-marginLeft-unit").val(),m=t('input[name="redactor-image-align"]:checked').val(),g=t("#redactor-image-border").val();this.fs.setAttr(e,"alt",i),this.fs.setAttr(e,"title",n),this.fs.setAttr(e,"id",s),this.fs.setAttr(e,"class",o),!isNaN(r)&&r>0?e.attr("width",r):e.removeAttr("width"),e.removeAttr("height"),e.css("border",g>0?g+"px solid #000":""),e.attr("src",t("#redactor-image-url").val()),e.css("margin",a+l+c+d>0?a+h+" "+l+u+" "+c+f+" "+d+p:""),"left"===m?e.css("float","left"):"right"===m?e.css("float","right"):e.css("float",""),!e.data("new")||(e.removeData("new").removeAttr("data-new"),this.insert.html(e[0].outerHTML,!1)),this.modal.close(),this.observe.images(),this.code.sync()}},e}),i("modules/indent",["jquery"],function(t){"use strict";function e(){}return e.prototype={increase:function(){this.utils.browser("msie")||this.$editor[0].focus(),this.buffer.set(),this.selection.save();var t=this.selection.getBlock();t&&"LI"===t.tagName?this.indent.increaseLists():t===!1&&this.opts.linebreaks?this.indent.increaseText():this.indent.increaseBlocks(),this.selection.restore(),this.code.sync()},increaseLists:function(){document.execCommand("indent"),this.indent.fixEmptyIndent(),this.clean.normalizeLists(),this.clean.clearUnverified()},increaseBlocks:function(){t.each(this.selection.getBlocks(),t.proxy(function(t,e){if("TD"!==e.tagName&&"TH"!==e.tagName){var i=this.utils.getAlignmentElement(e),n=parseFloat(i.css("font-size")),s=(this.utils.normalize(i.css("margin-left"))+n)/n;i.css("margin-left",s+"em")}},this))},increaseText:function(){var e=this.selection.wrap("div");t(e).attr("data-tagblock","redactor"),t(e).css("margin-left",this.opts.indentValue/parseFloat(t(document.body).css("font-size")+"em"))},decrease:function(){this.buffer.set(),this.selection.save();var t=this.selection.getBlock();t&&"LI"===t.tagName?this.indent.decreaseLists():this.indent.decreaseBlocks(),this.selection.restore(),this.code.sync()},decreaseLists:function(){document.execCommand("outdent");var e=this.selection.getCurrent(),i=t(e).closest("li",this.$editor[0]),n=i.parent();0!==i.length&&0!==n.length&&"LI"===n[0].tagName&&n.after(i),this.indent.fixEmptyIndent(),!this.opts.linebreaks&&0===i.length&&(document.execCommand("formatblock",!1,"p"),this.$editor.find("ul, ol, blockquote, p").each(t.proxy(this.utils.removeEmpty,this))),this.clean.clearUnverified()},decreaseBlocks:function(){t.each(this.selection.getBlocks(),t.proxy(function(t,e){var i=this.utils.getAlignmentElement(e),n=parseFloat(i.css("font-size")),s=(this.utils.normalize(i.css("margin-left"))-n)/n;s<=0?this.opts.linebreaks&&"undefined"!=typeof i.data("tagblock")?i.replaceWith(i.html()+"<br />"):(i.css("margin-left",""),this.utils.removeEmptyAttr(i,"style")):i.css("margin-left",s+"em")},this))},fixEmptyIndent:function(){var e=this.selection.getBlock();if(this.range.collapsed&&e&&"LI"===e.tagName&&this.utils.isEmpty(t(e).text())){var i=t(e);i.find("span").not(".redactor-selection-marker").contents().unwrap(),i.append("<br>")}}},e}),i("modules/inline",["jquery"],function(t){"use strict";function e(){}return e.prototype={formatting:function(t){var e,i;"undefined"!=typeof this.formatting[t].style?e="style":"undefined"!=typeof this.formatting[t]["class"]&&(e="class"),e&&(i=this.formatting[t][e]),this.inline.format(this.formatting[t].tag,e,i)},format:function(e,i,n){if(!this.utils.isCurrentOrParent("PRE")){for(var s=["b","bold","i","italic","underline","strikethrough","deleted","superscript","subscript"],o=["strong","strong","em","em","u","del","del","sup","sub"],r=0;r<s.length;r++)e===s[r]&&(e=o[r]);if(this.opts.allowedTags){if(t.inArray(e,this.opts.allowedTags)===-1)return}else if(t.inArray(e,this.opts.deniedTags)!==-1)return;this.inline.type=i||!1,this.inline.value=n||!1,this.buffer.set(),this.utils.browser("msie")||this.$editor[0].focus(),this.selection.get(),this.range.collapsed?this.inline.formatCollapsed(e):this.inline.formatMultiple(e)}},formatCollapsed:function(e){var i=this.selection.getCurrent(),n=t(i).closest(e+"[data-redactor-tag="+e+"]",this.$editor[0]);if(0!==n.length&&"style"!==this.inline.type&&"SPAN"!==n[0].tagName)return void(this.utils.isEmpty(n.text())?(this.caret.setAfter(n[0]),n.remove(),this.code.sync()):this.utils.isEndOfElement(n)&&this.caret.setAfter(n[0]));var s=t("<"+e+">").attr("data-verified","redactor").attr("data-redactor-tag",e);s.html(this.opts.invisibleSpace),s=this.inline.setFormat(s),s=this.insert.node(s),this.caret.setEnd(s),this.code.sync()},formatMultiple:function(e){if(this.inline.formatConvert(e),document.execCommand("strikethrough"),this.selection.save(),this.$editor.find("strike").each(t.proxy(function(i,n){var s=t(n);this.inline.formatRemoveSameChildren(s,e);var o;if(this.inline.type?(o=t("<span>").attr("data-redactor-tag",e).attr("data-verified","redactor"),o=this.inline.setFormat(o)):o=t("<"+e+">").attr("data-redactor-tag",e).attr("data-verified","redactor"),s.replaceWith(o.html(s.contents())),"span"===e){var r=o.parent();if(r&&"SPAN"===r[0].tagName&&"style"===this.inline.type)for(var a=this.inline.value.split(";"),l=0;l<a.length;l++){if(""===a[l])return;var c=a[l].split(":");r.css(c[0],""),this.utils.removeEmptyAttr(r,"style")&&r.replaceWith(r.contents())}}},this)),"span"!==e&&this.$editor.find(this.opts.inlineTags.join(", ")).each(t.proxy(function(e,i){var n=t(i),s=n.css("text-decoration");"line-through"===s&&(n.css("text-decoration",""),this.utils.removeEmptyAttr(n,"style"))},this)),"del"!==e){var i=this;this.$editor.find("inline").each(function(t,e){i.utils.replaceToTag(e,"del")})}this.selection.restore(),this.code.sync()},formatRemoveSameChildren:function(e,i){var n=this;e.children(i).each(function(){var e=t(this);if(!e.hasClass("redactor-selection-marker"))if("style"===n.inline.type)for(var i=n.inline.value.split(";"),s=0;s<i.length;s++){if(""===i[s])return;var o=i[s].split(":");e.css(o[0],""),n.utils.removeEmptyAttr(e,"style")&&e.replaceWith(e.contents())}else e.contents().unwrap()})},formatConvert:function(e){this.selection.save();var i="";"class"===this.inline.type?i="[data-redactor-class="+this.inline.value+"]":"style"===this.inline.type&&(i='[data-redactor-style="'+this.inline.value+'"]');var n=this;"del"!==e&&this.$editor.find("del").each(function(t,e){n.utils.replaceToTag(e,"inline")}),"span"!==e&&this.$editor.find(e).each(function(){var e=t(this);e.replaceWith(t("<strike />").html(e.contents()))}),this.$editor.find('[data-redactor-tag="'+e+'"]'+i).each(function(){if(""!==i||"span"!==e||this.tagName.toLowerCase()!==e){var n=t(this);n.replaceWith(t("<strike />").html(n.contents()))}}),this.selection.restore()},setFormat:function(t){switch(this.inline.type){case"class":t.hasClass(this.inline.value)?(t.removeClass(this.inline.value),t.removeAttr("data-redactor-class")):(t.addClass(this.inline.value),t.attr("data-redactor-class",this.inline.value));break;case"style":t[0].style.cssText=this.inline.value,t.attr("data-redactor-style",this.inline.value)}return t},removeStyle:function(){this.buffer.set();var e=this.selection.getCurrent(),i=this.selection.getInlines();if(this.selection.save(),e&&"SPAN"===e.tagName){var n=t(e);n.removeAttr("style"),0===n[0].attributes.length&&n.replaceWith(n.contents())}t.each(i,t.proxy(function(e,i){var n=t(i);t.inArray(i.tagName.toLowerCase(),this.opts.inlineTags)!==-1&&!n.hasClass("redactor-selection-marker")&&(n.removeAttr("style"),0===n[0].attributes.length&&n.replaceWith(n.contents()))},this)),this.selection.restore(),this.code.sync()},removeStyleRule:function(e){this.buffer.set();var i=this.selection.getParent(),n=this.selection.getInlines();if(this.selection.save(),i&&"SPAN"===i.tagName){var s=t(i);s.css(e,""),this.utils.removeEmptyAttr(s,"style"),0===s[0].attributes.length&&s.replaceWith(s.contents())}t.each(n,t.proxy(function(i,n){var s=t(n);t.inArray(n.tagName.toLowerCase(),this.opts.inlineTags)!==-1&&!s.hasClass("redactor-selection-marker")&&(s.css(e,""),this.utils.removeEmptyAttr(s,"style"),0===s[0].attributes.length&&s.replaceWith(s.contents()))},this)),this.selection.restore(),this.code.sync()},removeFormat:function(){this.buffer.set();var e=this.selection.getCurrent();this.selection.save(),document.execCommand("removeFormat"),e&&"SPAN"===e.tagName&&t(e).replaceWith(t(e).contents()),t.each(this.selection.getNodes(),t.proxy(function(e,i){var n=t(i);t.inArray(i.tagName.toLowerCase(),this.opts.inlineTags)!==-1&&!n.hasClass("redactor-selection-marker")&&n.replaceWith(n.contents())},this)),this.selection.restore(),this.code.sync()},toggleClass:function(t){this.inline.format("span","class",t)},toggleStyle:function(t){this.inline.format("span","style",t)}},e}),i("modules/insert",["jquery"],function(t){"use strict";function e(){}return e.prototype={set:function(e,i){this.placeholder.remove(),e=this.clean.setVerified(e),"undefined"==typeof i&&(e=this.clean.onPaste(e,!1)),this.$editor.html(e),this.selection.remove(),this.focus.setEnd(),this.clean.normalizeLists(),this.code.sync(),this.observe.load(),"undefined"==typeof i&&setTimeout(t.proxy(this.clean.clearUnverified,this),10)},text:function(e){if(this.placeholder.remove(),e=e.toString(),e=t.trim(e),e=this.clean.getPlainText(e,!1),this.$editor[0].focus(),this.utils.browser("msie"))this.insert.htmlIe(e);else{this.selection.get(),this.range.deleteContents();var i=document.createElement("div");i.innerHTML=e;for(var n,s,o=document.createDocumentFragment();n=i.firstChild;)s=o.appendChild(n);if(this.range.insertNode(o),s){var r=this.range.cloneRange();r.setStartAfter(s),r.collapse(!0),this.sel.removeAllRanges(),this.sel.addRange(r)}}this.code.sync(),this.clean.clearUnverified()},htmlWithoutClean:function(t){this.insert.html(t,!1)},html:function(e,i){this.placeholder.remove(),"undefined"==typeof i&&(i=!0),this.$editor[0].focus(),e=this.clean.setVerified(e),i&&(e=this.clean.onPaste(e)),this.utils.browser("msie")?this.insert.htmlIe(e):(this.clean.singleLine?this.insert.execHtml(e):document.execCommand("insertHTML",!1,e),this.insert.htmlFixMozilla()),this.clean.normalizeLists(),this.opts.linebreaks||this.$editor.find("p").each(t.proxy(this.utils.removeEmpty,this)),this.code.sync(),this.observe.load(),i&&this.clean.clearUnverified()},htmlFixMozilla:function(){if(this.utils.browser("mozilla")){var e=t(this.selection.getBlock()).next();e.length>0&&"P"===e[0].tagName&&""===e.html()&&e.remove()}},htmlIe:function(e){if(this.utils.isIe11()){var i=this.utils.isCurrentOrParent("P"),n=t("<div>").append(e),s=n.contents().is("p, :header, dl, ul, ol, div, table, td, blockquote, pre, address, section, header, footer, aside, article");return void(i&&s?this.insert.ie11FixInserting(i,e):this.insert.ie11PasteFrag(e))}document.selection.createRange().pasteHTML(e)},execHtml:function(t){t=this.clean.setVerified(t),this.selection.get(),this.range.deleteContents();var e=document.createElement("div");e.innerHTML=t;for(var i,n,s=document.createDocumentFragment();i=e.firstChild;)n=s.appendChild(i);this.range.insertNode(s),this.range.collapse(!0),this.caret.setAfter(n)},node:function(e,i){e=e[0]||e;var n=this.utils.getOuterHtml(e);return n=this.clean.setVerified(n),null!==n.match(/</g)&&(e=t(n)[0]),this.selection.get(),i!==!1&&this.range.deleteContents(),this.range.insertNode(e),this.range.collapse(!1),this.selection.addRange(),e},nodeToPoint:function(t,e,i){t=t[0]||t,this.selection.get();var n;if(document.caretPositionFromPoint){var s=document.caretPositionFromPoint(e,i);this.range.setStart(s.offsetNode,s.offset),this.range.collapse(!0),this.range.insertNode(t)}else if(document.caretRangeFromPoint)n=document.caretRangeFromPoint(e,i),n.insertNode(t);else if("undefined"!=typeof document.body.createTextRange){n=document.body.createTextRange(),n.moveToPoint(e,i);var o=n.duplicate();o.moveToPoint(e,i),n.setEndPoint("EndToEnd",o),n.select()}},nodeToCaretPositionFromPoint:function(t,e){e=e[0]||e;var i,n=t.clientX,s=t.clientY;if(document.caretPositionFromPoint){var o=document.caretPositionFromPoint(n,s),r=document.getSelection();i=r.getRangeAt(0),i.setStart(o.offsetNode,o.offset),i.collapse(!0),i.insertNode(e)}else if(document.caretRangeFromPoint)i=document.caretRangeFromPoint(n,s),i.insertNode(e);else if("undefined"!=typeof document.body.createTextRange){i=document.body.createTextRange(),i.moveToPoint(n,s);var a=i.duplicate();a.moveToPoint(n,s),i.setEndPoint("EndToEnd",a),i.select()}},ie11FixInserting:function(e,i){var n=document.createElement("span");n.className="redactor-ie-paste",this.insert.node(n);var s=t(e).html();s="<p>"+s.replace(/<span class="redactor-ie-paste"><\/span>/gi,"</p>"+i+"<p>")+"</p>",t(e).replaceWith(s)},ie11PasteFrag:function(t){this.selection.get(),this.range.deleteContents();var e=document.createElement("div");e.innerHTML=t;for(var i,n,s=document.createDocumentFragment();i=e.firstChild;)n=s.appendChild(i);this.range.insertNode(s),this.range.collapse(!1),this.selection.addRange()}},e}),i("modules/keydown",["jquery"],function(t){"use strict";function e(){}return e.prototype={init:function(e){if(!this.rtePaste){var i,n=e.which,s=n>=37&&n<=40;this.keydown.ctrl=e.ctrlKey||e.metaKey,this.keydown.current=this.selection.getCurrent(),this.keydown.parent=this.selection.getParent(),this.keydown.block=this.selection.getBlock(),this.keydown.pre=this.utils.isTag(this.keydown.current,"pre"),this.keydown.blockquote=this.utils.isTag(this.keydown.current,"blockquote"),this.keydown.figcaption=this.utils.isTag(this.keydown.current,"figcaption"),this.shortcuts.init(e,n),this.keydown.checkEvents(s,n),this.keydown.setupBuffer(e,n),this.keydown.addArrowsEvent(s),this.keydown.setupSelectAll(e,n);var o=this.core.setCallback("keydown",e);if(o===!1)return e.preventDefault(),!1;if(this.opts.enterKey&&(this.utils.browser("msie")||this.utils.browser("mozilla"))&&(n===this.keyCode.DOWN||n===this.keyCode.RIGHT)){var r=!1,a=!1;this.keydown.block&&"TD"===this.keydown.block.tagName&&(a=t(this.keydown.block).closest("table",this.$editor[0])),a&&a.find("td").last()[0]===this.keydown.block&&(r=!0),this.utils.isEndOfElement()&&r&&(i=t(this.opts.emptyHtml),a.after(i),this.caret.setStart(i))}if(this.opts.enterKey&&n===this.keyCode.DOWN&&this.keydown.onArrowDown(),!this.opts.enterKey&&n===this.keyCode.ENTER)return e.preventDefault(),void(this.range.collapsed||this.range.deleteContents());if(n===this.keyCode.ENTER&&!e.shiftKey&&!e.ctrlKey&&!e.metaKey){var l=this.core.setCallback("enter",e);if(l===!1)return e.preventDefault(),!1;if(this.keydown.blockquote&&this.keydown.exitFromBlockquote(e)===!0)return!1;var c,d;if(this.keydown.pre)return this.keydown.insertNewLine(e);if(this.keydown.blockquote||this.keydown.figcaption)return c=this.selection.getCurrent(),d=t(c).next(),0!==d.length&&"BR"===d[0].tagName?this.keydown.insertBreakLine(e):this.utils.isEndOfElement()&&c&&"SPAN"!==c?this.keydown.insertDblBreakLine(e):this.keydown.insertBreakLine(e);if(this.opts.linebreaks&&!this.keydown.block)return c=this.selection.getCurrent(),d=t(this.keydown.current).next(),0!==d.length&&"BR"===d[0].tagName?this.keydown.insertBreakLine(e):c!==!1&&t(c).hasClass("redactor-invisible-space")?(this.caret.setAfter(c),t(c).contents().unwrap(),this.keydown.insertDblBreakLine(e)):this.utils.isEndOfEditor()?this.keydown.insertDblBreakLine(e):0===d.length&&c===!1&&"undefined"!=typeof d.context?this.keydown.insertBreakLine(e):this.keydown.insertBreakLine(e);if(this.opts.linebreaks&&this.keydown.block)setTimeout(t.proxy(this.keydown.replaceDivToBreakLine,this),1);else if(!this.opts.linebreaks&&this.keydown.block)if("LI"!==this.keydown.block.tagName)setTimeout(t.proxy(this.keydown.replaceDivToParagraph,this),1);else{c=this.selection.getCurrent();var h=t(c).closest("li",this.$editor[0]),u=h.closest("ul,ol",this.$editor[0]);if(0!==h.length&&this.utils.isEmpty(h.html())&&0===u.next().length&&this.utils.isEmpty(u.find("li").last().html()))return u.find("li").last().remove(),i=t(this.opts.emptyHtml),u.after(i),this.caret.setStart(i),!1}else if(!this.opts.linebreaks&&!this.keydown.block)return this.keydown.insertParagraph(e)}return n===this.keyCode.ENTER&&(e.ctrlKey||e.shiftKey)?this.keydown.onShiftEnter(e):n===this.keyCode.TAB||e.metaKey&&221===n||e.metaKey&&219===n?this.keydown.onTab(e,n):(n===this.keyCode.BACKSPACE&&(this.keydown.removeInvisibleSpace(),
this.keydown.removeEmptyListInTable(e)),void this.code.sync())}},checkEvents:function(t,e){!t&&("click"===this.core.getEvent()||"arrow"===this.core.getEvent())&&(this.core.addEvent(!1),this.keydown.checkKeyEvents(e)&&this.buffer.set())},checkKeyEvents:function(e){var i=this.keyCode,n=[i.BACKSPACE,i.DELETE,i.ENTER,i.SPACE,i.ESC,i.TAB,i.CTRL,i.META,i.ALT,i.SHIFT];return t.inArray(e,n)===-1},addArrowsEvent:function(t){if(t)return"click"===this.core.getEvent()||"arrow"===this.core.getEvent()?void this.core.addEvent(!1):void this.core.addEvent("arrow")},setupBuffer:function(t,e){return this.keydown.ctrl&&90===e&&!t.shiftKey&&!t.altKey&&this.opts.buffer.length?(t.preventDefault(),void this.buffer.undo()):this.keydown.ctrl&&90===e&&t.shiftKey&&!t.altKey&&0!==this.opts.rebuffer.length?(t.preventDefault(),void this.buffer.redo()):void(this.keydown.ctrl||(e===this.keyCode.BACKSPACE||e===this.keyCode.DELETE||e===this.keyCode.ENTER&&!t.ctrlKey&&!t.shiftKey||e===this.keyCode.SPACE)&&this.buffer.set())},setupSelectAll:function(t,e){this.keydown.ctrl&&65===e?this.utils.enableSelectAll():e!==this.keyCode.LEFT_WIN&&!this.keydown.ctrl&&this.utils.disableSelectAll()},onArrowDown:function(){for(var t=[this.keydown.blockquote,this.keydown.pre,this.keydown.figcaption],e=0;e<t.length;e++)if(t[e])return this.keydown.insertAfterLastElement(t[e]),!1},onShiftEnter:function(t){return this.buffer.set(),this.utils.isEndOfElement()?this.keydown.insertDblBreakLine(t):this.keydown.insertBreakLine(t)},onTab:function(t,e){if(!this.opts.tabKey)return!0;if(this.utils.isEmpty(this.code.get())&&this.opts.tabAsSpaces===!1)return!0;t.preventDefault();var i;return this.keydown.pre&&!t.shiftKey?(i=this.opts.preSpaces?document.createTextNode(new Array(this.opts.preSpaces+1).join("\xa0")):document.createTextNode("\t"),this.insert.node(i),this.code.sync()):this.opts.tabAsSpaces!==!1?(i=document.createTextNode(new Array(this.opts.tabAsSpaces+1).join("\xa0")),this.insert.node(i),this.code.sync()):t.metaKey&&219===e?this.indent.decrease():t.metaKey&&221===e?this.indent.increase():t.shiftKey?this.indent.decrease():this.indent.increase(),!1},replaceDivToBreakLine:function(){var e=this.selection.getBlock(),i=e.innerHTML.replace(/<br\s?\/?>/gi,"");if(("DIV"===e.tagName||"P"===e.tagName)&&""===i&&!t(e).hasClass("redactor-editor")){var n=document.createElement("br");return t(e).replaceWith(n),this.caret.setBefore(n),this.code.sync(),!1}},replaceDivToParagraph:function(){var e=this.selection.getBlock(),i=e.innerHTML.replace(/<br\s?\/?>/gi,"");if("DIV"===e.tagName&&""===i&&!t(e).hasClass("redactor-editor")){var n=document.createElement("p");return n.innerHTML=this.opts.invisibleSpace,t(e).replaceWith(n),this.caret.setStart(n),this.code.sync(),!1}this.opts.cleanStyleOnEnter&&"P"===e.tagName&&t(e).removeAttr("class").removeAttr("style")},insertParagraph:function(t){t.preventDefault(),this.selection.get();var e;return this.selection.getParent()===!1&&(e=document.createElement("p"),e.innerHTML=this.$editor.html(),this.selection.selectAll(),this.range.deleteContents(),this.range.insertNode(e),this.caret.setAfter(e)),e=document.createElement("p"),e.innerHTML=this.opts.invisibleSpace,this.range.deleteContents(),this.range.insertNode(e),this.caret.setStart(e),this.code.sync(),!1},exitFromBlockquote:function(e){if(this.utils.isEndOfElement()){var i=t.trim(t(this.keydown.block).html());if(i.search(/(<br\s?\/?>){2}$/i)!==-1){if(e.preventDefault(),this.opts.linebreaks){var n=document.createElement("br");t(this.keydown.blockquote).after(n),this.caret.setBefore(n),t(this.keydown.block).html(i.replace(/<br\s?\/?>$/i,""))}else{var s=t(this.opts.emptyHtml);t(this.keydown.blockquote).after(s),this.caret.setStart(s)}return!0}}},insertAfterLastElement:function(e){if(this.utils.isEndOfElement())if(this.buffer.set(),this.opts.linebreaks){var i=t("<div>").append(t.trim(this.$editor.html())).contents(),n=i.last()[0];if("SPAN"===n.tagName&&""===n.innerHTML&&(n=i.prev()[0]),this.utils.getOuterHtml(n)!==this.utils.getOuterHtml(e))return;var s=document.createElement("br");t(e).after(s),this.caret.setAfter(s)}else{if(this.$editor.contents().last()[0]!==e)return;var o=t(this.opts.emptyHtml);t(e).after(o),this.caret.setStart(o)}},insertNewLine:function(t){t.preventDefault();var e=document.createTextNode("\n");return this.selection.get(),this.range.deleteContents(),this.range.insertNode(e),this.caret.setAfter(e),this.code.sync(),!1},insertBreakLine:function(t){return this.keydown.insertBreakLineProcessing(t)},insertDblBreakLine:function(t){return this.keydown.insertBreakLineProcessing(t,!0)},insertBreakLineProcessing:function(e,i){e.stopPropagation(),this.selection.get();var n=document.createElement("br");this.utils.browser("msie")?(this.range.collapse(!1),this.range.setEnd(this.range.endContainer,this.range.endOffset)):this.range.deleteContents(),this.range.insertNode(n);var s=t(n).parent("a");if(s.length>0&&(s.find(n).remove(),s.after(n)),i===!0){var o=t(n).next();if(0!==o.length&&"BR"===o[0].tagName&&this.utils.isEndOfEditor())return this.caret.setAfter(n),this.code.sync(),!1;var r=document.createElement("br");this.range.insertNode(r),this.caret.setAfter(r)}else this.keydown.insertBreakLineProcessingAfter(n);return this.code.sync(),!1},insertBreakLineProcessingAfter:function(e){var i=this.utils.createSpaceElement();t(e).after(i),this.selection.selectElement(i),t(i).replaceWith(function(){return t(this).contents()})},removeInvisibleSpace:function(){var e=t(this.keydown.current);0===e.text().search(/^\u200B$/g)&&e.remove()},removeEmptyListInTable:function(e){var i=t(this.keydown.current),n=t(this.keydown.parent),s=i.closest("td",this.$editor[0]);if(0!==s.length&&i.closest("li",this.$editor[0])&&1===n.children("li").length){if(!this.utils.isEmpty(i.text()))return;e.preventDefault(),i.remove(),n.remove(),this.caret.setStart(s)}}},e}),i("modules/keyup",["jquery"],function(t){"use strict";function e(){}return e.prototype={init:function(e){if(!this.rtePaste){var i=e.which;this.keyup.current=this.selection.getCurrent(),this.keyup.parent=this.selection.getParent();var n=this.utils.isRedactorParent(t(this.keyup.parent).parent());this.code.sync();var s=this.core.setCallback("keyup",e);return s===!1?(e.preventDefault(),!1):(!this.opts.linebreaks&&3===this.keyup.current.nodeType&&this.keyup.current.length<=1&&(this.keyup.parent===!1||"BODY"===this.keyup.parent.tagName)&&this.keyup.replaceToParagraph(),!this.opts.linebreaks&&this.utils.isRedactorParent(this.keyup.current)&&"DIV"===this.keyup.current.tagName&&this.keyup.replaceToParagraph(!1),!this.opts.linebreaks&&t(this.keyup.parent).hasClass("redactor-invisible-space")&&(n===!1||"BODY"===n[0].tagName)&&(t(this.keyup.parent).contents().unwrap(),this.keyup.replaceToParagraph()),this.linkify.isEnabled()&&this.linkify.isKey(i)&&this.linkify.format(),i===this.keyCode.DELETE||i===this.keyCode.BACKSPACE?(this.clean.clearUnverified(),this.observe.image?(e.preventDefault(),this.image.hideResize(),this.buffer.set(),this.image.remove(this.observe.image),this.observe.image=!1,!1):(this.$editor.find("p").each(t.proxy(function(e,i){this.utils.removeEmpty(e,t(i).html())},this)),this.opts.linebreaks&&this.keyup.current&&"DIV"===this.keyup.current.tagName&&this.utils.isEmpty(this.keyup.current.innerHTML)&&(t(this.keyup.current).after(this.selection.getMarkerAsHtml()),this.selection.restore(),t(this.keyup.current).remove()),this.keyup.formatEmpty(e))):void 0)}},replaceToParagraph:function(e){var i,n=t(this.keyup.current);i=e===!1?t("<p>").append(n.html()):t("<p>").append(n.clone()),n.replaceWith(i);var s=t(i).next();"undefined"!=typeof s[0]&&"BR"===s[0].tagName&&s.remove(),this.caret.setEnd(i)},formatEmpty:function(e){var i=t.trim(this.$editor.html());if(this.utils.isEmpty(i))return e.preventDefault(),this.opts.linebreaks?(this.$editor.html(this.selection.getMarkerAsHtml()),this.selection.restore()):(i="<p><br /></p>",this.$editor.html(i),this.focus.setStart()),this.code.sync(),!1}},e}),i("modules/lang",[],function(){"use strict";function t(){}return t.prototype={load:function(){this.opts.curLang=this.opts.langs[this.opts.lang]},get:function(t){return"undefined"!=typeof this.opts.curLang[t]?this.opts.curLang[t]:""}},t}),i("modules/line",["jquery"],function(t){"use strict";function e(){}return e.prototype={insert:function(){this.buffer.set();var t=this.selection.getBlocks();return t[0]!==!1&&this.line.isExceptLastOrFirst(t)?void(this.utils.browser("msie")||this.$editor.focus()):void(this.utils.browser("msie")?this.line.insertInIe():this.line.insertInOthersBrowsers())},isExceptLastOrFirst:function(e){var i=["li","td","th","blockquote","figcaption","pre","dl","dt","dd"],n=e[0].tagName.toLowerCase(),s=this.selection.getLastBlock();s="undefined"==typeof s?n:s.tagName.toLowerCase();var o=t.inArray(n,i)!==-1,r=t.inArray(s,i)!==-1;if(o&&r||o)return!0},insertInIe:function(){this.utils.saveScroll(),this.buffer.set(),this.insert.node(document.createElement("hr")),this.utils.restoreScroll(),this.code.sync()},insertInOthersBrowsers:function(){this.buffer.set();var t='<p id="redactor-insert-line"><br /></p>';this.opts.linebreaks&&(t='<br id="redactor-insert-line">'),document.execCommand("insertHTML",!1,"<hr>"+t),this.line.setFocus(),this.code.sync()},setFocus:function(){var e=this.$editor.find("#redactor-insert-line"),i=t(e).next()[0];i?(this.caret.setAfter(e),e.remove()):e.removeAttr("id")}},e}),i("text",["module"],function(t){"use strict";var i,n,s,o,r,a=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],l=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,c=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,d="undefined"!=typeof location&&location.href,h=d&&location.protocol&&location.protocol.replace(/\:/,""),u=d&&location.hostname,f=d&&(location.port||void 0),p={},m=t.config&&t.config()||{};return i={version:"2.0.14",strip:function(t){if(t){t=t.replace(l,"");var e=t.match(c);e&&(t=e[1])}else t="";return t},jsEscape:function(t){return t.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:m.createXhr||function(){var t,e,i;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(e=0;e<3;e+=1){i=a[e];try{t=new ActiveXObject(i)}catch(t){}if(t){a=[i];break}}return t},parseName:function(t){var e,i,n,s=!1,o=t.lastIndexOf("."),r=0===t.indexOf("./")||0===t.indexOf("../");return o!==-1&&(!r||o>1)?(e=t.substring(0,o),i=t.substring(o+1)):e=t,n=i||e,o=n.indexOf("!"),o!==-1&&(s="strip"===n.substring(o+1),n=n.substring(0,o),i?i=n:e=n),{moduleName:e,ext:i,strip:s}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(t,e,n,s){var o,r,a,l=i.xdRegExp.exec(t);return!l||(o=l[2],r=l[3],r=r.split(":"),a=r[1],r=r[0],!(o&&o!==e||r&&r.toLowerCase()!==n.toLowerCase()||(a||r)&&a!==s))},finishLoad:function(t,e,n,s){n=e?i.strip(n):n,m.isBuild&&(p[t]=n),s(n)},load:function(t,e,n,s){if(s&&s.isBuild&&!s.inlineText)return void n();m.isBuild=s&&s.isBuild;var o=i.parseName(t),r=o.moduleName+(o.ext?"."+o.ext:""),a=e.toUrl(r),l=m.useXhr||i.useXhr;return 0===a.indexOf("empty:")?void n():void(!d||l(a,h,u,f)?i.get(a,function(e){i.finishLoad(t,o.strip,e,n)},function(t){n.error&&n.error(t)}):e([r],function(t){i.finishLoad(o.moduleName+"."+o.ext,o.strip,t,n)}))},write:function(t,e,n){if(p.hasOwnProperty(e)){var s=i.jsEscape(p[e]);n.asModule(t+"!"+e,"define(function () { return '"+s+"';});\n")}},writeFile:function(t,e,n,s,o){var r=i.parseName(e),a=r.ext?"."+r.ext:"",l=r.moduleName+a,c=n.toUrl(r.moduleName+a)+".js";i.load(l,n,function(){var e=function(t){return s(c,t)};e.asModule=function(t,e){return s.asModule(t,c,e)},i.write(t,l,e,o)},o)}},"node"===m.env||!m.env&&"undefined"!=typeof process&&process.versions&&process.versions.node&&!process.versions["node-webkit"]&&!process.versions["atom-shell"]?(n=e.nodeRequire("fs"),i.get=function(t,e,i){try{var s=n.readFileSync(t,"utf8");"\ufeff"===s[0]&&(s=s.substring(1)),e(s)}catch(t){i&&i(t)}}):"xhr"===m.env||!m.env&&i.createXhr()?i.get=function(t,e,n,s){var o,r=i.createXhr();if(r.open("GET",t,!0),s)for(o in s)s.hasOwnProperty(o)&&r.setRequestHeader(o.toLowerCase(),s[o]);m.onXhr&&m.onXhr(r,t),r.onreadystatechange=function(){var i,s;4===r.readyState&&(i=r.status||0,i>399&&i<600?(s=new Error(t+" HTTP status: "+i),s.xhr=r,n&&n(s)):e(r.responseText),m.onXhrComplete&&m.onXhrComplete(r,t))},r.send(null)}:"rhino"===m.env||!m.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?i.get=function(t,e){var i,n,s="utf-8",o=new java.io.File(t),r=java.lang.System.getProperty("line.separator"),a=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(o),s)),l="";try{for(i=new java.lang.StringBuffer,n=a.readLine(),n&&n.length()&&65279===n.charAt(0)&&(n=n.substring(1)),null!==n&&i.append(n);null!==(n=a.readLine());)i.append(r),i.append(n);l=String(i.toString())}finally{a.close()}e(l)}:("xpconnect"===m.env||!m.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(s=Components.classes,o=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),r="@mozilla.org/windows-registry-key;1"in s,i.get=function(t,e){var i,n,a,l={};r&&(t=t.replace(/\//g,"\\")),a=new FileUtils.File(t);try{i=s["@mozilla.org/network/file-input-stream;1"].createInstance(o.nsIFileInputStream),i.init(a,1,0,!1),n=s["@mozilla.org/intl/converter-input-stream;1"].createInstance(o.nsIConverterInputStream),n.init(i,"utf-8",i.available(),o.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),n.readString(i.available(),l),n.close(),i.close(),e(l.value)}catch(t){throw new Error((a&&a.path||"")+": "+t)}}),i}),i("text!view/link/insert_anchor_modal.html",[],function(){return'<section id="redactor-modal-link">\n\t<label for="redactor-link-id">ID</label>\n\t<input type="text" id="redactor-anchor-id" class="redactor-input" />\n</section>\n'}),i("text!view/link/link_modal.html",[],function(){return'<section id="redactor-modal-link">\n\t<div class="redactor-tab redactor-tab1">\n\t\t<label>URL</label>\n\t\t<input type="text" id="redactor-link-url" class="redactor-input" />\n\t</div>\n\t<div class="redactor-tab redactor-tab2" style="display: none;">\n\t\t<label><%= curLang.site_page %></label>\n\t\t<div class="redactor-site-page-selected">\n\t\t\t<span class="redactor-site-page-selected-text"><%= curLang.site_page_select %></span>\n\t\t\t<button type="button" class="redactor-link-site-page-browse" title="<%= curLang.site_page_browse_title %>"><%= curLang.browse %></button>\n\t\t\t<% if (browseComposerSiteURL) { %>\n\t\t\t\t<button type="button" class="redactor-link-composer-site-page-browse" title="<%= curLang.composer_site_page_browse_title %>"><%= curLang.browse_composer %></button>\n\t\t\t<% } %>\n\t\t</div>\n\t</div>\n\t<div class="redactor-tab redactor-tab3" style="display: none;">\n\t\t<label><%= curLang.site_file %></label>\n\t\t<div class="redactor-site-file-selected">\n\t\t\t<span class="redactor-site-file-selected-text"><%= curLang.site_file_select %></span>\n\t\t\t<button type="button" class="redactor-link-site-file-browse" title="<%= curLang.site_file_browse_title %>"><%= curLang.browse %></button>\n\t\t</div>\n\t</div>\n\t<div class="redactor-tab redactor-tab4" style="display: none;">\n\t\t<label><%= curLang.media %></label>\n\t\t<div class="redactor-media-selected">\n\t\t\t<span class="redactor-media-selected-text"><%= curLang.media_select %></span>\n\t\t\t<button type="button" class="redactor-link-media-browse" title="<%= curLang.media_browse_title %>"><%= curLang.browse %></button>\n\t\t\t<input type="checkbox" id="redactor-link-media-show-title"> <label for="redactor-link-media-show-title">Display Media Title</label>\n\t\t\t<input type="checkbox" id="redactor-link-media-show-description"> <label for="redactor-link-media-show-description">Display Media Description</label>\n\t\t</div>\n\t</div>\n\t<div class="redactor-tab redactor-tab5" style="display: none;">\n\t\t<label for="redactor-anchor-id">Anchor</label>\n\t\t<select id="redactor-anchor-id">\n\t\t\t<option value="">Choose Anchor...</option>\n\t\t</select>\n\t</div>\n\t<input type="checkbox" class="redactor-link-blank" id="redactor-link-blank"><label for="redactor-link-blank"><%= curLang.link_new_tab %></label><br />\n\t<label for="redactor-link-title"><%= curLang.title %><span class="redactor-tooltip" data-title="<%= curLang.title_attr_description %>">?</span></label>\n\t<input type="text" id="redactor-link-title" class="redactor-input" />\n\t<label for="redactor-link-class"><%= curLang.class %> <span class="redactor-tooltip" data-title="<%= curLang.class_attr_description %>">?</span></label>\n\t<input type="text" id="redactor-link-class" placeholder="Choose Style..." class="redactor-input" />\n\t<label for="redactor-link-id">ID <span class="redactor-tooltip" data-title="<%= curLang.id_attr_description %>">?</span></label>\n\t<input type="text" id="redactor-link-id" class="redactor-input" />\n</section>\n'}),i("modules/link",["jquery","underscore","text!view/link/insert_anchor_modal.html","text!view/link/link_modal.html"],function(t,e,i,n){"use strict";function s(){}return s.prototype={initialize:function(){this.link.show=this.link.show,this.$toolbar.find(".redactor-dropdown-box-link").remove();var s=this,o=this.$toolbar.find(".re-link").closest("li"),r={title:this.opts.curLang.link},a=this.button.build("link",r),l={"1editlink":{title:"Insert/Edit Link (ctrl + k)",func:this.link.show},"2editanchor":{title:"Add/Edit Anchor",func:this.link.showAnchor},"3hideshowanchors":{title:"Hide Anchors",func:this.link.toggleAnchors}};o.empty().append(a),this.button.addDropdown(a,l),t(a).on("click",function(){s.$editor.hasClass("redactor-hide-anchors")?t(".redactor-dropdown-box-link .redactor-dropdown-3hideshowanchors").text("Show Anchors"):t(".redactor-dropdown-box-link .redactor-dropdown-3hideshowanchors").text("Hide Anchors")}),this.opts.link=t.extend({onMediaBrowseReturn:function(t){return t},onFileBrowseReturn:function(t){return t},onPageBrowseReturn:function(t){return t},anchorTest:/^#/,mediaTest:/^\/media\/\d/gi,siteFileTest:/^\/?(file.cfm|\/?uploaded)/gi,sitePageTest:/^\/pages\/\d/gi,anchorSelector:".redactor-editor [id]"},this.opts.link),this.opts.modal_insertAnchor=i,this.opts.modal_link=e.template(n)(this.opts)},show:function(){if(this.selectionHTML=this.selection.getHtml(),t(".redactor-link-tooltip").remove(),t("#redactor-overlay-box.redactor-overlay-type-img").length){var e=this.fs.$editTarget;this.fs.hideEditableControls(!1),this.selection.get(),this.range.selectNode(e.get(0)),this.selection.addRange()}this.modal.addTemplate("link",this.opts.modal_link),this.modal.load("link",this.opts.curLang.link+" Settings",540);var i=this.modal.getModal();this.modal.createTabber(i),this.modal.addTab(1,"URL","active"),this.modal.addTab(2,this.opts.curLang.site_page),this.modal.addTab(3,this.opts.curLang.site_file),this.modal.addTab(4,this.opts.curLang.media),this.modal.addTab(5,"Anchor"),this.modal.createCancelButton();var n=this.modal.createDeleteButton("Unlink"),s=this.modal.createActionButton("Save");this.selection.get(),this.link.getData();var o="",r="",a="",l="",c="",d="";this.link.$node&&(o=this.link.$node.attr("class"),r=this.link.$node.attr("title"),a=this.link.$node.attr("id"),l=this.link.$node.attr("data-page-name")||this.link.url,c=this.link.$node.attr("data-file-name")||this.link.url,d=this.link.$node.attr("data-media-name")||this.link.url,t("#redactor-link-title").val(r),t("#redactor-link-id").val(a),t("#redactor-link-class").val(o),t("#redactor-link-media-show-title").prop("checked",this.link.$node.attr("data-media-dialog-title")),t("#redactor-link-media-show-description").prop("checked",this.link.$node.attr("data-media-dialog-description")),this.link.$node.length>1&&t('#redactor-link-id, label[for="redactor-link-id"]').hide());var h;if(t.fn.selectize){var u=this.opts.classes?t.map(this.opts.classes,function(t){return{value:t["class"],text:t.name}}):[],f=t("#redactor-link-class").selectize({delimiter:" ",persist:!1,create:!0}),p=t.map(t(this.opts.link.anchorSelector),function(t){return{value:t.id,text:t.id}});h=t("#redactor-anchor-id").selectize({create:!0,onChange:function(e){t("#redactor-link-url").val("#"+e)}}),f[0].selectize.addOption(u),f[0].selectize.$control.on("keyup",function(t){t.stopPropagation()}),h[0].selectize.addOption(p),h[0].selectize.$control.on("keyup",function(t){t.stopPropagation()}),this.$element.one("modalClosed.redactor-api",function(){f[0].selectize.destroy(),h[0].selectize.destroy()})}var m=self.location.href.replace(/\/$/i,""),g=this.link.url.replace(m,"")||"http://";if(this.link.url.search(this.opts.link.sitePageTest)>=0)this.modal.$tabber.children(":eq(1)").click(),l&&t(".redactor-site-page-selected-text").text(l);else if(this.link.url.search(this.opts.link.siteFileTest)>=0)this.modal.$tabber.children(":eq(2)").click(),c&&t(".redactor-site-file-selected-text").text(c);else if(this.link.url.search(this.opts.link.mediaTest)>=0)this.modal.$tabber.children(":eq(3)").click(),d&&t(".redactor-media-selected-text").text(d);else if(this.link.url.search(this.opts.link.anchorTest)>=0&&(this.modal.$tabber.children(":eq(4)").click(),t.fn.selectize)){var v=this.link.url.replace("#","");h[0].selectize.addOption({value:v,text:v}),h[0].selectize.setValue(v)}t("#redactor-link-url").val(g),("_blank"===this.link.target||"http://"===g)&&t(".redactor-link-blank",this.$modal).prop("checked",!0),this.opts.browseComposerSiteURL.length>0&&this.$modal.on("click",".redactor-link-composer-site-page-browse",t.proxy(function(e){return e.preventDefault(),this.fs.modalIframeBrowse.call(this,this.opts.browseComposerSiteURL,t.proxy(function(e){e=this.opts.link.onPageBrowseReturn(e),t("#redactor-link-url").val(e.path),t(".redactor-site-page-selected-text",this.$modal).text(e.name)},this)),!1},this)),this.opts.browseSiteURL.length>0?this.$modal.on("click",".redactor-link-site-page-browse",t.proxy(function(e){return e.preventDefault(),this.fs.modalIframeBrowse.call(this,this.opts.browseSiteURL,t.proxy(function(e){e=this.opts.link.onPageBrowseReturn(e),t("#redactor-link-url").val(e.path),t(".redactor-site-page-selected-text",this.$modal).text(e.name)},this)),!1},this)):this.modal.$tabber.children(":eq(1)").hide(),this.opts.browseFileURL.length>0?this.$modal.on("click",".redactor-link-site-file-browse",t.proxy(function(e){return e.preventDefault(),this.fs.modalIframeBrowse.call(this,this.opts.browseFileURL,t.proxy(function(e){e=this.opts.link.onFileBrowseReturn(e),t("#redactor-link-url").val(e.path),t(".redactor-site-file-selected-text",this.$modal).text(e.name)},this),620),!1},this)):this.modal.$tabber.children(":eq(2)").hide(),this.opts.browseMediaURL.length>0?this.$modal.on("click",".redactor-link-media-browse",t.proxy(function(e){return e.preventDefault(),this.fs.modalIframeBrowse.call(this,this.opts.browseMediaURL,t.proxy(function(e){e=this.opts.link.onMediaBrowseReturn(e),t("#redactor-link-url").val(e.path),t(".redactor-media-selected-text",this.$modal).text(e.name),t("#redactor-link-url").data(e)},this)),!1},this)):this.modal.$tabber.children(":eq(3)").hide(),t("#redactor-modal-tabber",this.$modal).on("click","a",function(){"http://"===g&&(1===t("#redactor-modal-tabber > a.active").index()||4===t("#redactor-modal-tabber > a.active").index()?t(".redactor-link-blank").prop("checked",!1):t(".redactor-link-blank").prop("checked",!0))}),s.on("click",this.link.linkProcess),n.on("click",t.proxy(function(){this.modal.close(),this.selection.restore(),this.link.unlink()},this)),this.selection.save(),this.modal.show(),t("#redactor-link-url",this.$modal)[0].focus()},linkProcess:function(){var e=t.extend({"class":"",href:"",target:"",title:"",id:"","data-page-name":"","data-file-name":"","data-media-name":"","data-media-dialog-title":"","data-media-dialog-description":""},t("#redactor-link-url").data("attributes")),i=t("#redactor-modal-tabber > a.active").index();if(e.href=t("#redactor-link-url").val()||"#",t(".redactor-link-blank",this.$modal).prop("checked")&&(e.target="_blank"),/^javascript:/.test(e.href)&&(e.target=""),"1"===i){var n=/((xn--)?[a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}/,s=new RegExp("^(http|ftp|https)://"+n,"i"),o=new RegExp("^"+n,"i");e.href.search(s)===-1&&0===e.href.search(o)&&this.opts.linkProtocol&&(e.href=this.opts.linkProtocol+e.href)}e["data-page-name"]=t(".redactor-site-page-selected-text:visible",this.$modal).text(),e["data-file-name"]=t(".redactor-site-file-selected-text:visible",this.$modal).text(),e["data-media-name"]=t(".redactor-media-selected-text:visible",this.$modal).text(),t("#redactor-link-media-show-title").is(":checked")&&(e["data-media-dialog-title"]="true"),t("#redactor-link-media-show-description").is(":checked")&&(e["data-media-dialog-description"]="true"),e.title=t.trim(this.clean.encodeEntities(t("#redactor-link-title").val())),e["class"]=t.trim(t("#redactor-link-class").val()),e.id=t.trim(this.fs.cleanID(t("#redactor-link-id").val())),this.link.linkInsert(e),this.modal.close()},linkInsert:function(e){var i=this;if(this.selection.restore(),this.link.$node)this.buffer.set(),t.each(e,function(t,e){i.fs.setAttr(i.link.$node,t,e)}),this.code.sync();else{this.selection.replaceWithHtml("");var n;this.fs.setImageFloatFix(),document.execCommand("createLink",!1,"redactor-temporary"),this.fs.unsetImageFloatFix(),n=t('a[href="redactor-temporary"]',this.$editor),n.length||(this.insert.html('<a id="redactor-inserted-link">'+e.href+"</a>"),n=t("#redactor-inserted-link").removeAttr("id")),this.selectionHTML&&n.html(this.selectionHTML),t.each(e,function(t,e){i.fs.setAttr(n,t,e)}),""===this.link.text&&!this.link.hasImage()&&(n.text(e.href),this.selection.selectElement(n)),this.code.sync(),this.core.setCallback("insertedLink",n)}setTimeout(t.proxy(function(){this.observe.links()},this),5)},showAnchor:function(){var t=this;this.modal.addTemplate("insertAnchor",this.opts.modal_insertAnchor),this.modal.load("insertAnchor","Add/Edit Anchor",460),this.modal.createCancelButton();var e=this.modal.createActionButton("Save"),i=this.modal.createDeleteButton("Remove");i.on("click",function(){t.modal.close(),t.selection.restore(),t.link.anchorRemove()}),this.range.collapse(!0),this.selection.addRange(),e.on("click",this.link.anchorProcess),this.link.selectedAnchor=this.selection.getBlock(),this.selection.save(),this.modal.show(),t.link.selectedAnchor&&t.link.selectedAnchor.id.length&&t.$modal.find("#redactor-anchor-id").val(t.link.selectedAnchor.id)},anchorProcess:function(){var e=this.$modal.find("#redactor-anchor-id").val();return this.$editor.find("#"+e).length&&e!==this.link.selectedAnchor.id?(this.$modal.find("p.error").remove().end().find("#redactor-anchor-id").addClass("error").after('<p class="error">ID is already in use. Please choose a different ID.</p>'),!1):(this.modal.close(),this.selection.restore(),this.fs.setInlineStyle(function(i){t(i[0]).attr("id",e)}),void 0)},anchorRemove:function(){this.fs.setInlineStyle(function(e){t(e[0]).removeAttr("id")})},toggleAnchors:function(){this.$editor.hasClass("redactor-hide-anchors")?this.$editor.removeClass("redactor-hide-anchors"):this.$editor.addClass("redactor-hide-anchors")},hasImage:function(){return t(this.selection.getNodes()).find("img").length},execUnlink:function(e,i){this.buffer.set();var n=this.currentOrParentIs("A");if(n)return t(n).replaceWith(t(n).html()),this.code.sync(),this.callback("execCommand",e,i),void 0},getData:function(){this.link.$node=!1;var e=t(this.selection.getCurrent()).closest("a",this.$editor[0]);0!==e.length&&"A"===e[0].tagName?(this.link.$node=e,this.link.url=e.attr("href")||"",this.link.text=e.text(),this.link.target=e.attr("target")):(this.link.text=this.sel.toString(),this.link.url="",this.link.target="")},unlink:function(e){t(".redactor-link-tooltip").remove(),"undefined"!=typeof e&&e.preventDefault&&e.preventDefault();var i=this.selection.getNodes();if(i){this.buffer.set();for(var n=i.length,s=0;s<n;s++){var o=t(i[s]).closest("a",this.$editor[0]);o.replaceWith(o.contents())}t(".redactor-link-tooltip").remove(),this.code.sync()}}},s}),i("modules/linkify",["jquery"],function(t){"use strict";function e(){}return e.prototype={isKey:function(t){return t===this.keyCode.ENTER||t===this.keyCode.SPACE},isEnabled:function(){return this.opts.convertLinks&&(this.opts.convertUrlLinks||this.opts.convertImageLinks||this.opts.convertVideoLinks)&&!this.utils.isCurrentOrParent("PRE")},format:function(){var e=this.linkify,i=this.opts;this.$editor.find(":not(iframe,img,a,pre)").addBack().contents().filter(function(){return 3===this.nodeType&&""!==t.trim(this.nodeValue)&&!t(this).parent().is("pre")&&(this.nodeValue.match(i.linkify.regexps.youtube)||this.nodeValue.match(i.linkify.regexps.vimeo)||this.nodeValue.match(i.linkify.regexps.image)||this.nodeValue.match(i.linkify.regexps.url))}).each(function(){var n=t(this).text(),s=n;i.convertVideoLinks&&(s.match(i.linkify.regexps.youtube)||s.match(i.linkify.regexps.vimeo))?s=e.convertVideoLinks(s):i.convertImageLinks&&s.match(i.linkify.regexps.image)?s=e.convertImages(s):i.convertUrlLinks&&(s=e.convertLinks(s)),t(this).before(n.replace(n,s)).remove()}),this.linkify.after()},convertVideoLinks:function(t){var e='<iframe width="500" height="281" src="',i='" frameborder="0" allowfullscreen></iframe>';return t.match(this.opts.linkify.regexps.youtube)&&(t=t.replace(this.opts.linkify.regexps.youtube,e+"//www.youtube.com/embed/$1"+i)),t.match(this.opts.linkify.regexps.vimeo)&&(t=t.replace(this.opts.linkify.regexps.vimeo,e+"//player.vimeo.com/video/$2"+i)),t},convertImages:function(t){var e=t.match(this.opts.linkify.regexps.image);return e&&(t=t.replace(t,'<img src="'+e+'" />')),t},convertLinks:function(e){var i=e.match(this.opts.linkify.regexps.url);if(i){i=t.grep(i,function(e,n){return t.inArray(e,i)===n});for(var n=i.length,s=0;s<n;s++){var o=i[s],r=o,a=this.opts.linkProtocol+"://";null!==o.match(/(https?|ftp):\/\//i)&&(a=""),r.length>this.opts.linkSize&&(r=r.substring(0,this.opts.linkSize)+"..."),r=decodeURIComponent(r);var l="\\b";t.inArray(o.slice(-1),["/","&","="])!==-1&&(l="");var c=new RegExp("("+o.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")+l+")","g");e=e.replace(c,'<a href="'+a+t.trim(o)+'">'+t.trim(r)+"</a>")}}return e},after:function(){this.observe.load(),this.code.sync()}},e}),i("modules/list",["jquery"],function(t){"use strict";function e(){}return e.prototype={toggle:function(e){this.placeholder.remove(),this.utils.browser("msie")||this.$editor[0].focus(),this.buffer.set(),this.selection.save();var i=this.selection.getParent(),n=t(i).closest("ol, ul",this.$editor[0]);!this.utils.isRedactorParent(n)&&0!==n.length&&(n=!1);var s,o,r=!1;if(n&&n.length){r=!0;var a=n[0].tagName;s="orderedlist"===e&&"UL"===a,o="unorderedlist"===e&&"OL"===a}s?this.utils.replaceToTag(n,"ol"):o?this.utils.replaceToTag(n,"ul"):r?this.list.remove(e):this.list.insert(e),this.selection.restore(),this.code.sync()},insert:function(e){var i=this.selection.getParent(),n=this.selection.getCurrent(),s=t(n).closest("td, th",this.$editor[0]);this.utils.browser("msie")&&this.opts.linebreaks?this.list.insertInIe(e):document.execCommand("insert"+e);var o=t(this.selection.getParent()).closest("ol, ul",this.$editor[0]);if(0!==s.length){var r=s.prev(),a=s.html();s.html(""),!r||1!==r.length||"TD"!==r[0].tagName&&"TH"!==r[0].tagName?t(i).prepend(s):t(r).after(s),s.html(a)}if(this.utils.isEmpty(o.find("li").text())){var l=o.children("li");l.find("br").remove(),l.append(this.selection.getMarkerAsHtml())}if(o.length){var c=o.parent();this.utils.isRedactorParent(c)&&"LI"!==c[0].tagName&&this.utils.isBlock(c[0])&&c.replaceWith(c.contents())}this.utils.browser("msie")||this.$editor[0].focus(),this.clean.clearUnverified()},insertInIe:function(e){var i=this.selection.wrap("div"),n=t(i).html(),s=t("orderedlist"===e?"<ol>":"<ul>"),o=t("<li>");if(""===t.trim(n))o.append(this.selection.getMarkerAsHtml()),s.append(o),this.$editor.find("#selection-marker-1").replaceWith(s);else{var r=n.split(/<br\s?\/?>/gi);if(r)for(var a=0;a<r.length;a++)""!==t.trim(r[a])&&s.append(t("<li>").html(r[a]));else o.append(n),s.append(o);t(i).replaceWith(s)}},remove:function(e){document.execCommand("insert"+e);var i=t(this.selection.getCurrent());this.indent.fixEmptyIndent(),!this.opts.linebreaks&&0===i.closest("li, th, td",this.$editor[0]).length&&(document.execCommand("formatblock",!1,"p"),this.$editor.find("ul, ol, blockquote").each(t.proxy(this.utils.removeEmpty,this)));var n=t(this.selection.getCurrent()).closest("table",this.$editor[0]),s=n.prev();!this.opts.linebreaks&&0!==n.length&&0!==s.length&&"BR"===s[0].tagName&&s.remove(),this.clean.clearUnverified();
}},e}),i("modules/media",["jquery"],function(t){"use strict";function e(){}return e.prototype={initialize:function(){var e=this;this.$element.on("observed.redactor.video observed.redactor.audio observed.redactor.iframe",this.media.setEditable),this.$toolbar.find("a.re-video").removeClass("re-video").addClass("re-embed"),this.$toolbar.find("a.re-media").addClass("re-video").removeClass("redactor-btn-image"),this.$box.on("resize",t.proxy(function(){clearTimeout(this.media.resizeDebouncer),this.media.resizeDebouncer=setTimeout(this.media.resizeMediaIframes,100)},this)),t(window).on("blur.redactorIframeClick",function(){e.media.iFrameMouseOver&&e.fs.loadEditableControls({element:e.media.iFrameMouseOver,buttons:e.media.iFrameButtons})}),this.opts.media=t.extend({onMediaBrowseReturn:function(t){return t},onFileBrowseReturn:function(t){return t}},this.opts.media),this.opts.modal_media_edit='<section class="redactor-media-modal">\t\t\t\t<div class="redactor-media-modalleftcol">\t\t\t\t\t<div id="redactor-media-preview">\t\t\t\t\t</div>\t\t\t\t\t<fieldset>\t\t\t\t\t\t<legend>Size</legend>\t\t\t\t\t\t<label><input id="redactor-media-width" type="number" min="0" max="100" class="smallinput" value="100" />% Width</label>\t\t\t\t\t\t<div class="redactor-tab redactor-tab1">\t\t\t\t\t\t\t<select id="redactor-media-aspect-ratio-options" name="redactor-media-aspect-ratio">\t\t\t\t\t\t\t\t<option id="redactor-media-portrait-aspect-ratio"  type="radio" value="1.3333">Portrait (4:3)</option>\t\t\t\t\t\t\t\t<option id="redactor-media-portrait2-aspect-ratio" value="1.5">Portrait (3:2)</option>\t\t\t\t\t\t\t\t<option id="redactor-media-landscape-aspect-ratio" selected="selected" value=".5625">Landscape (16:9)</option>\t\t\t\t\t\t\t\t<option id="redactor-media-landscape2-aspect-ratio" value=".75">Landscape (4:3)</option>\t\t\t\t\t\t\t\t<option id="redactor-media-landscape3-aspect-ratio" value=".6667">Landscape (3:2)</option>\t\t\t\t\t\t\t</select>\t\t\t\t\t\t</div>\t\t\t\t\t</fieldset>\t\t\t\t\t<fieldset>\t\t\t\t\t\t<legend>Margin</legend>\t\t\t\t\t\t<input id="redactor-media-marginTop" type="number" min="0" class="smallinput" />\t\t\t\t\t\t\t<label><select id="redactor-media-marginTop-unit"><option>px</option><option>em</option><option>%</option></select>\t\t\t\t\t\t\tTop\t\t\t\t\t\t\t</label>\t\t\t\t\t\t<input id="redactor-media-marginRight" type="number" min="0" class="smallinput" />\t\t\t\t\t\t\t<label><select id="redactor-media-marginRight-unit"><option>px</option><option>em</option><option>%</option></select>\t\t\t\t\t\t\tRight\t\t\t\t\t\t\t</label>\t\t\t\t\t\t<input id="redactor-media-marginBottom" type="number" min="0" class="smallinput" />\t\t\t\t\t\t\t<label><select id="redactor-media-marginBottom-unit"><option>px</option><option>em</option><option>%</option></select>\t\t\t\t\t\t\tBottom\t\t\t\t\t\t\t</label>\t\t\t\t\t\t<input id="redactor-media-marginLeft" type="number" min="0" class="smallinput" />\t\t\t\t\t\t\t<label><select id="redactor-media-marginLeft-unit"><option>px</option><option>em</option><option>%</option></select>\t\t\t\t\t\t\tLeft\t\t\t\t\t\t\t</label>\t\t\t\t\t</fieldset>\t\t\t\t</div>\t\t\t\t<div class="redactor-media-modalrightcol">\t\t\t\t\t<fieldset>\t\t\t\t\t\t<div class="redactor-tab redactor-tab1">\t\t\t\t\t\t\t<label>Media:</label>\t\t\t\t\t\t\t<div class="redactor-media-selected">\t\t\t\t\t\t\t\t<span class="redactor-media-selected-text">Please select from Media Manager</span>\t\t\t\t\t\t\t\t<button type="button" class="redactor-media-browse" title="Browse for media">'+this.opts.curLang.browse+'</button>\t\t\t\t\t\t\t</div>\t\t\t\t\t\t</div>\t\t\t\t\t\t<div class="redactor-tab redactor-tab2" style="display: none;">\t\t\t\t\t\t\t<label>Other Media:\t\t\t\t\t\t\t\t<span class="redactor-other-media-selected-text"></span>\t\t\t\t\t\t\t</label>\t\t\t\t\t\t\t<div class="redactor-other-media-selected">\t\t\t\t\t\t\t\t<input type="text" id="redactor-media-url" name="redactor-media-url"/>\t\t\t\t\t\t\t\t<button type="button" class="redactor-other-media-browse" title="Browse for media">'+this.opts.curLang.browse+'</button>\t\t\t\t\t\t\t\t<p class="error" style="display:none;">Only Flash, HTML5 Video & Audio files are accepted.</p>\t\t\t\t\t\t\t</div>\t\t\t\t\t\t</div>\t\t\t\t\t</fieldset>\t\t\t\t\t<fieldset>\t\t\t\t\t\t<label for="redactor-media-align">Alignment</label>\t\t\t\t\t\t<ul id="redactor-media-align">\t\t\t\t\t\t\t<li><input id="redactor-media-align-none" name="redactor-media-align" type="radio" value="none"><label for="redactor-media-align-none">None</label></li>\t\t\t\t\t\t\t<li><input id="redactor-media-align-left" name="redactor-media-align" type="radio" value="left"><label for="redactor-media-align-left">Left</label></li>\t\t\t\t\t\t\t<li><input id="redactor-media-align-right" name="redactor-media-align" type="radio" value="right"><label for="redactor-media-align-right">Right</label></li>\t\t\t\t\t\t</ul>\t\t\t\t\t</fieldset>\t\t\t\t\t<fieldset>\t\t\t\t\t\t<label for="redactor-media-id">ID</label><input id="redactor-media-id" />\t\t\t\t\t</fieldset>\t\t\t\t\t<fieldset>\t\t\t\t\t\t<label for="redactor-media-name">Name</label><input id="redactor-media-name" />\t\t\t\t\t</fieldset>\t\t\t\t</div>\t\t\t\t<div style="clear:both"></div>\t\t\t\t</section>'},show:function(e){var i=this;this.modal.addTemplate("media",this.opts.modal_media_edit),this.modal.load("media",this.opts.curLang.media+" Settings",600);var n=this.modal.getModal();this.modal.createTabber(n),this.modal.addTab(1,"Media Manager","active"),this.modal.addTab(2,"Other Media"),this.modal.createCancelButton();var s=this.modal.createDeleteButton("Delete"),o=this.modal.createActionButton("Save");if(e=e||"media","string"==typeof e&&this.selection.save(),t("#redactor-media-url,#redactor-media-aspect-ratio-options",this.$modal).on("change",function(){var e=t("#redactor-media-url").val(),n=t("#redactor-media-aspect-ratio-options").val();t("#redactor-media-preview").empty(),i.media.isVideo(e)?t("#redactor-media-preview").append('<video controls="controls" src="'+e+'"/>'):i.media.isMediaEmbed(e)?(e=i.media.formatMediaURL(e,n),t("#redactor-media-preview").append('<iframe src="'+e+'" data-aspectratio="'+n+'" style="width:100%; height:'+t("#redactor-media-preview").width()*n+'px" scrolling="no" frameborder="0" class="fsEmbeddedMedia" />')):i.media.isAudio(e)&&t("#redactor-media-preview").append('<audio src="'+e+'"/>')}),1===e.length){var r=e.attr("src"),a=e[0].style,l=parseInt(a.width)||100,c=/\d+/,d=/\D+$/,h=e.attr("data-aspectratio")||".75";l>100&&(l=100),this.media.isMediaEmbed(r)||this.modal.$tabber.children(":eq(1)").click(),t("#redactor-media-url").val(r),t("#redactor-media-id").val(e.attr("id")),t("#redactor-media-name").val(e.attr("name")),t("#redactor-media-width").val(l),t("input[name=redactor-media-align][value="+e.css("float")+"]").click(),t("#redactor-media-aspect-ratio-options").val(h),t(".redactor-media-selected-text",this.$modal).text(e.attr("data-media-name")||"Please select from media manager"),t("#redactor-media-url",this.$modal).change(),t("input[type=number]",i.$modal).on("keydown",function(t){(t.keyCode>57||t.keyCode<48)&&8!==t.keyCode&&9!==t.keyCode&&37!==t.keyCode&&39!==t.keyCode&&46!==t.keyCode&&t.preventDefault()}),t("#redactor-media-marginTop",i.$modal).val(a.marginTop.match(c)||0),t("#redactor-media-marginRight",i.$modal).val(a.marginRight.match(c)||0),t("#redactor-media-marginBottom",i.$modal).val(a.marginBottom.match(c)||0),t("#redactor-media-marginLeft",i.$modal).val(a.marginLeft.match(c)||0),t("#redactor-media-marginTop-unit",i.$modal).val(a.marginTop.match(d)||"px"),t("#redactor-media-marginRight-unit",i.$modal).val(a.marginRight.match(d)||"px"),t("#redactor-media-marginBottom-unit",i.$modal).val(a.marginBottom.match(d)||"px"),t("#redactor-media-marginLeft-unit",i.$modal).val(a.marginLeft.match(d)||"px")}this.opts.browseFileURL.length>0?this.$modal.on("click",".redactor-other-media-browse",t.proxy(function(e){return e.preventDefault(),this.fs.modalIframeBrowse.call(this,this.opts.browseFileURL,t.proxy(function(e){e=this.opts.media.onFileBrowseReturn(e),t("#redactor-media-url").val(e.path).change()},this)),!1},this)):this.$modal.find(".redactor-other-media-browse").hide(),this.opts.browseMediaURL.length>0?this.$modal.on("click",".redactor-media-browse",t.proxy(function(e){return e.preventDefault(),this.fs.modalIframeBrowse.call(this,this.opts.browseMediaURL,t.proxy(function(e){e=this.opts.media.onMediaBrowseReturn(e),t("#redactor-media-url").val(e.path).change(),t(".redactor-media-selected-text",this.$modal).text(e.name)},this)),!1},this)):(this.modal.$tabber.children(":eq(1)").click(),this.$modal.find("#redactor-modal-tabber").hide()),o.on("click",function(){i.media.save(e)}),s.on("click",function(){e.remove(),i.modal.close()}),this.modal.show()},save:function(e){var i,n=t("input[name=redactor-media-align]:checked").val(),s=t("#redactor-media-aspect-ratio-options").val(),o=!1,r=t("#redactor-media-id").val(),a=t("#redactor-media-width").val(),l=t("#redactor-media-marginTop").val()||0,c=t("#redactor-media-marginRight").val()||0,d=t("#redactor-media-marginBottom").val()||0,h=t("#redactor-media-marginLeft").val()||0,u=t("#redactor-media-marginTop-unit").val(),f=t("#redactor-media-marginRight-unit").val(),p=t("#redactor-media-marginBottom-unit").val(),m=t("#redactor-media-marginLeft-unit").val(),g=t("#redactor-media-name").val(),v=t(".redactor-media-selected-text",this.$modal).text(),y=t.trim(t("#redactor-media-url").val());return this.media.isVideo(y)||this.media.isMediaEmbed(y)||this.media.isAudio(y)?(this.selection.restore(),y.length&&("string"==typeof e&&(o=!0),this.media.isMediaEmbed(y)?(i=t('<iframe scrolling="no" frameborder="0" class="fsEmbeddedMedia fsEmbeddedMediaResponsive"></iframe>'),y=this.media.formatMediaURL(y,s)):this.media.isVideo(y)?i=t('<video controls="controls">HTML Video is not supported by your browser.</video>'):this.media.isAudio(y)&&(i=t('<audio controls="controls">HTML Audio is not supported by your browser.</audio>')),!o&&e[0].tagName!==i.tagName&&(t.each(e[0].attributes,function(t,e){"undefined"==typeof i[0].attributes[e.name]&&i.attr(e.name,e.value)}),e.replaceWith(i)),e=i,e.attr("src",y).css("float",n).css("margin",l+c+d+h>0?l+u+" "+c+f+" "+d+p+" "+h+m:""),r.length&&this.fs.setAttr(e,"id",r),g.length&&this.fs.setAttr(e,"name",g),"IFRAME"===e[0].tagName&&e.attr("data-aspectratio",s),v.length&&this.fs.setAttr(e,"data-media-name",v),e[0].style.width=a+"%",o&&this.range.insertNode(e[0])),this.code.sync(),this.modal.close(),this.observe.images(),this.media.resizeMediaIframes(),void 0):(t(".redactor-other-media-selected p.error",this.$modal).show(),t("#redactor-media-url").addClass("error"),!1)},formatMediaURL:function(t,e){return t.replace(/&responsive=true/gi,"").replace(/&aspectRatio=[^&]+/gi,"")+"&aspectRatio="+e+"&responsive=true"},setEditable:function(e,i){var n=this,s=t(i),o=[];o.push({name:"Settings","class":"re-cog",title:"Edit Media Properties",onClick:function(){return n.media.show(s),!1}}),o.push({name:"Delete",title:"Delete","class":"re-trash",onClick:function(){return!!confirm("Are you sure you want to delete this media object?")&&(s.remove(),void n.code.sync())}}),"IFRAME"===s[0].tagName&&s.hasClass("fsEmbeddedMedia")?s.off("mouseover.redactorIframeOver").on("mouseover.redactorIframeOver",function(){n.media.iFrameMouseOver=s,n.media.iFrameButtons=o}).off("mouseout.redactorIframeOut").on("mouseout.redactorIframeOut",function(){n.media.iFrameMouseOver=!1,n.media.iFrameButtons=!1}):s.off(".editcontrols").on("click.editcontrols touchstart.editcontrols",function(t){t.stopPropagation(),n.fs.loadEditableControls({element:s,buttons:o})})},isVideo:function(t){return/\.(mp4|m4v|ogv|ogm|webm(\?.*)?)$/.test(t)},isMediaEmbed:function(t){return/embed\.cfm(\?.*)?$/.test(t)},isAudio:function(t){return/\.(mp3|m4a|ogg|oga|opus|flac|wav(\?.*)?)$/.test(t)},resizeMediaIframes:function(){this.$editor.find(".fsEmbeddedMediaResponsive").each(function(){var e=t(this);e.height(parseInt(e.width()*e.data("aspectratio")))})}},e}),i("modules/modal",["jquery"],function(t){"use strict";function e(){}return e.prototype={callbacks:{},loadTemplates:function(){this.opts.modal={imageEdit:String()+'<section id="redactor-modal-image-edit"><label>'+this.lang.get("title")+'</label><input type="text" id="redactor-image-title" /><label class="redactor-image-link-option">'+this.lang.get("link")+'</label><input type="text" id="redactor-image-link" class="redactor-image-link-option" /><label class="redactor-image-link-option"><input type="checkbox" id="redactor-image-link-blank"> '+this.lang.get("link_new_tab")+'</label><label class="redactor-image-position-option">'+this.lang.get("image_position")+'</label><select class="redactor-image-position-option" id="redactor-image-align"><option value="none">'+this.lang.get("none")+'</option><option value="left">'+this.lang.get("left")+'</option><option value="center">'+this.lang.get("center")+'</option><option value="right">'+this.lang.get("right")+"</option></select></section>",image:String()+'<section id="redactor-modal-image-insert"><div id="redactor-modal-image-droparea"></div></section>',file:String()+'<section id="redactor-modal-file-insert"><div id="redactor-modal-file-upload-box"><label>'+this.lang.get("filename")+'</label><input type="text" id="redactor-filename" /><br><br><div id="redactor-modal-file-upload"></div></div></section>',link:String()+'<section id="redactor-modal-link-insert"><label>URL</label><input type="url" id="redactor-link-url" /><label>'+this.lang.get("text")+'</label><input type="text" id="redactor-link-url-text" /><label><input type="checkbox" id="redactor-link-blank"> '+this.lang.get("link_new_tab")+"</label></section>"}},addCallback:function(t,e){this.modal.callbacks[t]=e},createTabber:function(e){this.modal.$tabber=t("<div>").attr("id","redactor-modal-tabber"),e.prepend(this.modal.$tabber)},addTab:function(e,i,n){var s=t('<a href="#" rel="tab'+e+'">').text(i);n&&s.addClass("active");var o=this;s.on("click",function(e){e.preventDefault(),t(".redactor-tab").hide(),t(".redactor-"+t(this).attr("rel")).show(),o.modal.$tabber.find("a").removeClass("active"),t(this).addClass("active")}),this.modal.$tabber.append(s)},addTemplate:function(t,e){this.opts.modal[t]=e},getTemplate:function(t){return this.opts.modal[t]},getModal:function(){return this.$modalBody.find("section")},load:function(t,e,i){this.modal.templateName=t,this.modal.width=i,this.modal.build(),this.modal.enableEvents(),this.modal.setTitle(e),this.modal.setDraggable(),this.modal.setContent(),"undefined"!=typeof this.modal.callbacks[t]&&this.modal.callbacks[t].call(this)},show:function(){this.utils.isMobile()&&!this.utils.browser("msie")&&document.activeElement.blur(),t(document.body).addClass("body-redactor-hidden"),this.utils.isMobile()?this.modal.showOnMobile():this.modal.showOnDesktop(),this.$modalOverlay.show(),this.$modalBox.show(),this.modal.setButtonsWidth(),this.utils.saveScroll(),this.utils.isMobile()||(setTimeout(t.proxy(this.modal.showOnDesktop,this),0),t(window).on("resize.redactor-modal",t.proxy(this.modal.resize,this))),this.core.setCallback("modalOpened",this.modal.templateName,this.$modal),t(document).off("focusin.modal"),this.$modal.find("input[type=text],input[type=url],input[type=email]").on("keydown.redactor-modal",t.proxy(this.modal.setEnter,this))},showOnDesktop:function(){var e=this.$modal.outerHeight(),i=window.innerHeight,n=t(window).width();return this.modal.width>n?void this.$modal.css({width:"96%",marginTop:i/2-e/2+"px"}):void(e>i?this.$modal.css({width:this.modal.width+"px",marginTop:"20px"}):this.$modal.css({width:this.modal.width+"px",marginTop:i/2-e/2+"px"}))},showOnMobile:function(){this.$modal.css({width:"96%",marginTop:"2%"})},resize:function(){this.utils.isMobile()?this.modal.showOnMobile():this.modal.showOnDesktop()},setTitle:function(t){this.$modalHeader.html(t)},setContent:function(){this.$modalBody.html(this.modal.getTemplate(this.modal.templateName))},setDraggable:function(){"undefined"!=typeof t.fn.draggable&&(this.$modal.draggable({handle:this.$modalHeader}),this.$modalHeader.css("cursor","move"))},setEnter:function(t){13===t.which&&(t.preventDefault(),this.$modal.find("button.redactor-modal-action-btn").click())},createCancelButton:function(){var e=t("<button>").addClass("redactor-modal-btn redactor-modal-close-btn").html(this.lang.get("cancel"));e.on("click",t.proxy(this.modal.close,this)),this.$modalFooter.append(e)},createDeleteButton:function(t){return this.modal.createButton(t,"delete")},createActionButton:function(t){return this.modal.createButton(t,"action")},createButton:function(e,i){var n=t("<button>").addClass("redactor-modal-btn").addClass("redactor-modal-"+i+"-btn").html(e);return this.$modalFooter.append(n),n},setButtonsWidth:function(){var t=this.$modalFooter.find("button"),e=t.length;0!==e&&t.css("width",100/e+"%")},build:function(){this.modal.buildOverlay(),this.$modalBox=t('<div id="redactor-modal-box" />').hide(),this.$modal=t('<div id="redactor-modal" />'),this.$modalHeader=t("<header />"),this.$modalClose=t('<span id="redactor-modal-close" />').html("&times;"),this.$modalBody=t('<div id="redactor-modal-body" />'),this.$modalFooter=t("<footer />"),this.$modal.append(this.$modalHeader),this.$modal.append(this.$modalClose),this.$modal.append(this.$modalBody),this.$modal.append(this.$modalFooter),this.$modalBox.append(this.$modal),this.$modalBox.appendTo(document.body)},buildOverlay:function(){this.$modalOverlay=t('<div id="redactor-modal-overlay">').hide(),t("body").prepend(this.$modalOverlay)},enableEvents:function(){this.$modalClose.on("click.redactor-modal",t.proxy(this.modal.close,this)),t(document).on("keyup.redactor-modal",t.proxy(this.modal.closeHandler,this)),this.$editor.on("keyup.redactor-modal",t.proxy(this.modal.closeHandler,this)),this.$modalBox.on("click.redactor-modal",t.proxy(this.modal.close,this))},disableEvents:function(){this.$modalClose.off("click.redactor-modal"),t(document).off("keyup.redactor-modal"),this.$editor.off("keyup.redactor-modal"),this.$modalBox.off("click.redactor-modal"),t(window).off("resize.redactor-modal")},closeHandler:function(t){t.which===this.keyCode.ESC&&this.modal.close(!1)},close:function(e){if(e){if(!t(e.target).hasClass("redactor-modal-close-btn")&&e.target!==this.$modalClose[0]&&e.target!==this.$modalBox[0])return;e.preventDefault()}this.$modalBox&&(this.modal.disableEvents(),this.$modalOverlay.remove(),this.$modalBox.fadeOut("fast",t.proxy(function(){this.$modalBox.remove(),setTimeout(t.proxy(this.utils.restoreScroll,this),0),void 0!==e&&this.selection.restore(),t(document.body).removeClass("body-redactor-hidden"),this.core.setCallback("modalClosed",this.modal.templateName)},this)))}},e}),i("modules/observe",["jquery"],function(t){"use strict";function e(){}return e.prototype={load:function(){this.observe.images(),this.observe.links()},buttons:function(e,i){var n=this.selection.getCurrent(),s=this.selection.getParent();if(e!==!1?this.button.setInactiveAll():this.button.setInactiveAll(i),e===!1&&"html"!==i)return void(t.inArray(i,this.opts.activeButtons)!==-1&&this.button.toggleActive(i));t.each(this.opts.activeButtonsStates,t.proxy(function(e,i){var o=t(s).closest(e,this.$editor[0]),r=t(n).closest(e,this.$editor[0]);(0===o.length||this.utils.isRedactorParent(o))&&this.utils.isRedactorParent(r)&&(0!==o.length||0!==r.closest(e,this.$editor[0]).length)&&this.button.setActive(i)},this));var o=t(s).closest(this.opts.alignmentTags.toString().toLowerCase(),this.$editor[0]);if(this.utils.isRedactorParent(s)&&o.length){var r=""===o.css("text-align")?"left":o.css("text-align");this.button.setActive("align"+r)}},addButton:function(t,e){this.opts.activeButtons.push(e),this.opts.activeButtonsStates[t]=e},images:function(){var e=this;this.$editor.find("img,video,iframe,audio,table").each(function(i,n){var s=t(n);s.closest("a").on("click",function(t){t.preventDefault()}),e.utils.browser("msie")&&s.attr("unselectable","on"),e.$element.trigger("observed.redactor."+n.tagName.toLowerCase(),n)})},links:function(){this.opts.linkTooltip&&(this.$editor.find("a").on("touchstart.redactor."+this.uuid+" click.redactor."+this.uuid,t.proxy(this.observe.showTooltip,this)),this.$editor.on("touchstart.redactor."+this.uuid+" click.redactor."+this.uuid,t.proxy(this.observe.closeTooltip,this)),t(document).on("touchstart.redactor."+this.uuid+" click.redactor."+this.uuid,t.proxy(this.observe.closeTooltip,this)))},getTooltipPosition:function(t){return t.offset()},showTooltip:function(e){var i=t(e.target);if(e.stopPropagation(),"IMG"!==i[0].tagName&&("A"!==i[0].tagName&&(i=i.closest("a",this.$editor[0])),"A"===i[0].tagName)){var n=i,s=this.observe.getTooltipPosition(n),o=t('<span class="redactor-link-tooltip"></span>'),r=n.attr("href");void 0===r&&(r=""),r.length>24&&(r=r.substring(0,24)+"...");var a=t('<a href="'+n.attr("href")+'" target="_blank" />').html(r).addClass("redactor-link-tooltip-action"),l=t('<a href="#" />').html(this.lang.get("edit")).on("click",t.proxy(this.link.show,this)).addClass("redactor-link-tooltip-action"),c=t('<a href="#" />').html(this.lang.get("unlink")).on("click",t.proxy(this.link.unlink,this)).addClass("redactor-link-tooltip-action");o.append(a).append(" | ").append(l).append(" | ").append(c),o.css({top:s.top+(parseInt(n.css("line-height"),10)||parseInt(n.css("font-size"),10))+"px",left:s.left+"px"}),t(".redactor-link-tooltip").remove(),t(document.body).append(o)}},closeTooltip:function(e){e=e.originalEvent||e;var i=e.target,n=t(i).closest("a",this.$editor[0]);0!==n.length&&"A"===n[0].tagName&&"A"!==i.tagName||"A"===i.tagName&&this.utils.isRedactorParent(i)||t(i).hasClass("redactor-link-tooltip-action")||t(".redactor-link-tooltip").remove()}},e}),i("modules/paragraphize",["jquery"],function(t){"use strict";function e(){}return e.prototype={load:function(e){return this.opts.linebreaks?e:""===e||"<p></p>"===e?this.opts.emptyHtml:(e+="\n",this.paragraphize.safes=[],this.paragraphize.z=0,e=e.replace(/(<br\s?\/?>){1,}\n?<\/blockquote>/gi,"</blockquote>"),e=this.paragraphize.getSafes(e),e=this.paragraphize.getSafesComments(e),e=this.paragraphize.replaceBreaksToNewLines(e),e=this.paragraphize.replaceBreaksToParagraphs(e),e=this.paragraphize.clear(e),e=this.paragraphize.restoreSafes(e),e=e.replace(new RegExp("<br\\s?/?>\n?<("+this.opts.paragraphizeBlocks.join("|")+")([^>]*)>","gi"),"<p><br /></p>\n<$1$2>"),t.trim(e))},getSafes:function(e){var i=t("<div />").append(e);return i.find("blockquote p").replaceWith(function(){return t(this).append("<br />").contents()}),e=i.html(),i.find(this.opts.paragraphizeBlocks.join(", ")).each(t.proxy(function(t,i){this.paragraphize.z++,this.paragraphize.safes[this.paragraphize.z]=i.outerHTML,e=e.replace(i.outerHTML,"\n{replace"+this.paragraphize.z+"}")},this)),e},getSafesComments:function(e){var i=e.match(/<!--([\w\W]*?)-->/gi);return i?(t.each(i,t.proxy(function(t,i){this.paragraphize.z++,this.paragraphize.safes[this.paragraphize.z]=i,e=e.replace(i,"\n{replace"+this.paragraphize.z+"}")},this)),e):e},restoreSafes:function(e){return t.each(this.paragraphize.safes,function(t,i){i="undefined"!=typeof i?i.replace(/\$/g,"&#36;"):i,e=e.replace("{replace"+t+"}",i)}),e},replaceBreaksToParagraphs:function(t){var e=t.split(new RegExp("\n","g"),-1);if(t="",e)for(var i=e.length,n=0;n<i;n++){if(!e.hasOwnProperty(n))return;e[n].search("{replace")===-1?(e[n]=e[n].replace(/<p>\n\t?<\/p>/gi,""),e[n]=e[n].replace(/<p><\/p>/gi,""),""!==e[n]&&(t+="<p>"+e[n].replace(/^\n+|\n+$/g,"")+"</p>")):t+=e[n]}return t},replaceBreaksToNewLines:function(t){return t=t.replace(/<br \/>\s*<br \/>/gi,"\n\n"),t=t.replace(/<br\s?\/?>\n?<br\s?\/?>/gi,"\n"),t=t.replace(new RegExp("\r\n","g"),"\n"),t=t.replace(new RegExp("\r","g"),"\n"),t=t.replace(new RegExp("/\n\n+/"),"g","\n\n")},clear:function(t){return t=t.replace(new RegExp("</blockquote></p>","gi"),"</blockquote>"),t=t.replace(new RegExp("<p></blockquote>","gi"),"</blockquote>"),t=t.replace(new RegExp("<p><blockquote>","gi"),"<blockquote>"),t=t.replace(new RegExp("<blockquote></p>","gi"),"<blockquote>"),t=t.replace(new RegExp("<p><p ","gi"),"<p "),t=t.replace(new RegExp("<p><p>","gi"),"<p>"),t=t.replace(new RegExp("</p></p>","gi"),"</p>"),t=t.replace(new RegExp("<p>\\s?</p>","gi"),""),t=t.replace(new RegExp("\n</p>","gi"),"</p>"),t=t.replace(new RegExp("<p>\t?\t?\n?<p>","gi"),"<p>"),t=t.replace(new RegExp("<p>\t*</p>","gi"),"")}},e}),i("modules/paste",["jquery"],function(t){"use strict";function e(){}return e.prototype={init:function(){return this.opts.cleanOnPaste?(this.rtePaste=!0,this.buffer.set(),this.selection.save(),this.utils.saveScroll(),this.paste.createPasteBox(),t(window).on("scroll.redactor-freeze",t.proxy(function(){t(window).scrollTop(this.saveBodyScroll)},this)),setTimeout(t.proxy(function(){var e=this.$pasteBox.html();this.$pasteBox.remove(),this.selection.restore(),this.utils.restoreScroll(),this.paste.insert(e),t(window).off("scroll.redactor-freeze"),this.linkify.isEnabled()&&this.linkify.format()},this),1),void 0):void setTimeout(t.proxy(this.code.sync,this),1)},createPasteBox:function(){this.$pasteBox=t("<div>").html("<p></p>").attr("contenteditable","true").css({position:"fixed",width:0,top:0,left:"-9999px"}),this.utils.browser("msie")?this.$box.append(this.$pasteBox):t("body").append(this.$pasteBox),this.$pasteBox[0].focus()},insert:function(e){e=this.core.setCallback("pasteBefore",e),e=this.utils.isSelectAll()?this.clean.onPaste(e,!1):this.clean.onPaste(e),e=this.core.setCallback("paste",e),e=this.paragraphize.load(e),this.utils.isSelectAll()?this.insert.set(e,!1):this.insert.html(e,!1),this.utils.disableSelectAll(),this.rtePaste=!1,setTimeout(t.proxy(this.clean.clearUnverified,this),10),setTimeout(t.proxy(function(){var e=this.$editor.find("span");t.each(e,function(e,i){var n=i.innerHTML.replace(/[\u200B-\u200D\uFEFF]/,"");""===n&&0===i.attributes.length&&t(i).remove()})},this),10)}},e}),i("modules/placeholder",["jquery"],function(t){"use strict";function e(){}return e.prototype={enable:function(){this.placeholder.is()&&(this.$editor.attr("placeholder",this.$element.attr("placeholder")),this.placeholder.toggle(),this.$editor.on("keyup.redactor-placeholder",t.proxy(this.placeholder.toggle,this)))},toggle:function(){var t="removeClass";this.utils.isEmpty(this.$editor.html(),!1)&&(t="addClass"),this.$editor[t]("redactor-placeholder")},remove:function(){this.$editor.removeClass("redactor-placeholder")},is:function(){return this.opts.placeholder?this.$element.attr("placeholder",this.opts.placeholder):"undefined"!=typeof this.$element.attr("placeholder")&&""!==this.$element.attr("placeholder")}},e}),i("modules/progress",["jquery"],function(t){"use strict";function e(){}return e.prototype={show:function(){t(document.body).append(t('<div id="redactor-progress"><span></span></div>')),t("#redactor-progress").fadeIn()},hide:function(){t("#redactor-progress").fadeOut(1500,function(){t(this).remove()})}},e}),i("modules/resize",["jquery"],function(t){"use strict";function e(){}return e.prototype={initialize:function(){this.opts.resizable&&this.resize.buildResizer()},buildResizer:function(){return this.opts.resize!==!1&&(this.$resizer=t('<span class="redactor-resize-handle"></span>'),this.$dimensions=t('<div class="redactor-resize-dimensions"></div>'),this.$box.append(this.$resizer),this.$box.append(this.$dimensions),this.$resizer.mousedown(t.proxy(this.resize.initResize,this)),void 0)},initResize:function(e){e.preventDefault&&e.preventDefault(),this.splitter=e.target,this.element_resize_parent=this.$box,this.opts.iframe?this.element_resize=this.$frame:this.element_resize=this.$editor,this.resize.stopResizeHdl=t.proxy(this.resize.stopResize,this),this.resize.startResizeHdl=t.proxy(this.resize.startResize,this),this.resize.resizeHdl=t.proxy(this.resize.doResize,this),t(document).mousedown(this.resize.startResizeHdl),t(document).mouseup(this.resize.stopResizeHdl),t(this.splitter).mouseup(this.resize.stopResizeHdl),this.null_pointX=!1,this.null_pointY=!1,this.h_new=!1,this.h=this.element_resize.height(),this.w_new=!1,this.w=this.element_resize.width()},startResize:function(){this.fs.hideEditableControls(),t(document).mousemove(this.resize.resizeHdl),this.$box.addClass("resize-outline"),this.$dimensions.show()},doResize:function(e){this.resize.resizeHoverIn.apply(this),e.preventDefault&&e.preventDefault();var i=e.pageY,n=e.pageX;this.null_pointX===!1&&(this.null_pointX=n),this.null_pointY===!1&&(this.null_pointY=i),this.h_new===!1&&(this.h_new=this.element_resize_parent.outerHeight()),this.w_new===!1&&(this.w_new=this.element_resize_parent.outerWidth());var s=this.h_new+i-this.null_pointY,o=this.w_new+n-this.null_pointX;s<=204&&(s=204),o<=204&&(o=204),s>=0&&(this.element_resize[0].style.height=s-this.$toolbar.height()+"px",this.element_resize_parent[0].style.height=s+"px",this.$textarea[0].style.height=s+"px"),o>=0&&(this.element_resize_parent[0].style.width=o+"px",this.$textarea[0].style.width=o+"px"),t(this.element_resize).trigger("resize")},stopResize:function(){t(document).unbind("mousemove",this.resize.resizeHdl),t(document).unbind("mousedown",this.resize.startResizeHdl),t(document).unbind("mouseup",this.resize.stopResizeHdl),t(this.splitter).unbind("mouseup",this.resize.stopResizeHdl),this.$box.removeClass("resize-outline"),this.$dimensions.hide()},resizeHoverIn:function(){this.$dimensions.show().html("<span>"+this.element_resize.width()+"px \xd7 "+this.element_resize.height()+"px </span>").css({top:this.element_resize.position().top,left:this.element_resize.position().left,lineHeight:this.element_resize.height()+"px",width:this.element_resize.outerWidth(),height:this.element_resize.outerHeight()})}},e}),i("modules/selection",["jquery"],function(t){"use strict";function e(){}return e.prototype={get:function(){this.sel=document.getSelection(),document.getSelection&&this.sel.getRangeAt&&this.sel.rangeCount?this.range=this.sel.getRangeAt(0):this.range=document.createRange()},addRange:function(){try{this.sel.removeAllRanges()}catch(t){}this.sel.addRange(this.range)},getCurrent:function(){var t=!1;return this.selection.get(),this.sel&&this.sel.rangeCount>0&&(t=this.sel.getRangeAt(0).startContainer),this.utils.isRedactorParent(t)},getParent:function(e){return e=e||this.selection.getCurrent(),!!e&&this.utils.isRedactorParent(t(e).parent()[0])},getBlock:function(e){for(e=e||this.selection.getCurrent();e;){if(this.utils.isBlockTag(e.tagName))return!t(e).hasClass("redactor-editor")&&e;e=e.parentNode}return!1},getInlines:function(e,i){if(this.selection.get(),this.range&&this.range.collapsed)return!1;var n=[];e="undefined"==typeof e||e===!1?this.selection.getNodes():e;var s=this.opts.inlineTags;if(s.push("span"),"undefined"!=typeof i)for(var o=0;o<i.length;o++)s.push(i[o]);return t.each(e,t.proxy(function(e,i){t.inArray(i.tagName.toLowerCase(),s)!==-1&&n.push(i)},this)),0!==n.length&&n},getInlinesTags:function(e){if(this.selection.get(),this.range&&this.range.collapsed)return!1;var i=[],n=this.selection.getNodes();return t.each(n,t.proxy(function(n,s){t.inArray(s.tagName.toLowerCase(),e)!==-1&&i.push(s)},this)),0!==i.length&&i},getBlocks:function(e){if(this.selection.get(),this.range&&this.range.collapsed)return[this.selection.getBlock()];var i=[];return e="undefined"==typeof e?this.selection.getNodes():e,t.each(e,t.proxy(function(t,e){this.utils.isBlock(e)&&(this.selection.lastBlock=e,i.push(e))},this)),0===i.length?[this.selection.getBlock()]:i},getLastBlock:function(){return this.selection.lastBlock},getNodes:function(){this.selection.get();var e=this.selection.getNodesMarker(1),i=this.selection.getNodesMarker(2),n=this.range.cloneRange();if(this.range.collapsed===!1){var s=n.startContainer,o=n.startOffset;this.selection.setNodesMarker(n,i,!1),n.setStart(s,o),this.selection.setNodesMarker(n,e,!0)}else this.selection.setNodesMarker(n,e,!0),i=e;var r=[],a=0,l=this;this.$editor.find("*").each(function(){if(this===e){var n=t(this).parent();0!==n.length&&"BODY"!==n[0].tagName&&l.utils.isRedactorParent(n[0])&&r.push(n[0]),r.push(this),a=1}else a>0&&(r.push(this),a+=1);if(this===i)return!1});for(var c=[],d=r.length,h=0;h<d;h++)"nodes-marker-1"!==r[h].id&&"nodes-marker-2"!==r[h].id&&c.push(r[h]);return this.selection.removeNodesMarkers(),c},getNodesMarker:function(e){return t('<span id="nodes-marker-'+e+'" class="redactor-nodes-marker" data-verified="redactor">'+this.opts.invisibleSpace+"</span>")[0]},setNodesMarker:function(t,e,i){try{t.collapse(i),t.insertNode(e)}catch(t){}},removeNodesMarkers:function(){t(document).find("span.redactor-nodes-marker").remove(),this.$editor.find("span.redactor-nodes-marker").remove()},fromPoint:function(t,e){this.caret.setOffset(t,e)},wrap:function(t){
if(this.selection.get(),this.range.collapsed)return!1;var e=document.createElement(t);return e.appendChild(this.range.extractContents()),this.range.insertNode(e),e},selectElement:function(t){this.caret.set(t,0,t,1)},selectAll:function(){this.selection.get(),this.range.selectNodeContents(this.$editor[0]),this.selection.addRange()},remove:function(){this.selection.get(),this.sel.removeAllRanges()},save:function(){this.selection.createMarkers()},createMarkers:function(){this.selection.get();var t=this.selection.getMarker(1);if(this.selection.setMarker(this.range,t,!0),this.range.collapsed===!1){var e=this.selection.getMarker(2);this.selection.setMarker(this.range,e,!1)}this.savedSel=this.$editor.html()},getMarker:function(e){return"undefined"==typeof e&&(e=1),t('<span id="selection-marker-'+e+'" class="redactor-selection-marker"  data-verified="redactor">'+this.opts.invisibleSpace+"</span>")[0]},getMarkerAsHtml:function(t){return this.utils.getOuterHtml(this.selection.getMarker(t))},setMarker:function(t,e,i){t=t.cloneRange();try{t.collapse(i),t.insertNode(e)}catch(t){this.focus.setStart()}},restore:function(){var t=this.$editor.find("span#selection-marker-1"),e=this.$editor.find("span#selection-marker-2");0!==t.length&&0!==e.length?this.caret.set(t,0,e,0):0!==t.length?this.caret.set(t,0,t,0):this.$editor[0].focus(),this.selection.removeMarkers(),this.savedSel=!1},removeMarkers:function(){this.$editor.find("span.redactor-selection-marker").each(function(e,i){var n=t(i).text().replace(/[\u200B-\u200D\uFEFF]/g,"");""===n?t(i).remove():t(i).replaceWith(function(){return t(this).contents()})})},getText:function(){return this.selection.get(),this.sel.toString()},getHtml:function(){var t="";if(this.selection.get(),this.sel.rangeCount){for(var e=document.createElement("div"),i=this.sel.rangeCount,n=0;n<i;++n)e.appendChild(this.sel.getRangeAt(n).cloneContents());t=e.innerHTML}return this.clean.onSync(t)},replaceWithHtml:function(t){if(t=this.selection.getMarkerAsHtml(1)+t+this.selection.getMarkerAsHtml(2),this.selection.get(),window.getSelection&&window.getSelection().getRangeAt){this.range.deleteContents();var e=document.createElement("div");e.innerHTML=t;for(var i,n=document.createDocumentFragment();i=e.firstChild;)n.appendChild(i);this.range.insertNode(n)}else document.selection&&document.selection.createRange&&this.range.pasteHTML(t);this.selection.restore(),this.code.sync()}},e}),i("modules/shortcuts",["jquery"],function(t){"use strict";function e(){}return e.prototype={init:function(e,i){return this.opts.shortcuts?void t.each(this.opts.shortcuts,t.proxy(function(i,n){for(var s=i.split(","),o=s.length,r=0;r<o;r++)"string"==typeof s[r]&&this.shortcuts.handler(e,t.trim(s[r]),t.proxy(function(){var t;"-1"!==n.func.search(/\./)?(t=n.func.split("."),"undefined"!=typeof this[t[0]]&&this[t[0]][t[1]].apply(this,n.params)):this[n.func].apply(this,n.params)},this))},this)):((e.ctrlKey||e.metaKey)&&(66===i||73===i)&&e.preventDefault(),!1)},handler:function(e,i,n){var s={8:"backspace",9:"tab",10:"return",13:"return",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",59:";",61:"=",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},o={"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|"};i=i.toLowerCase().split(" ");var r=s[e.keyCode],a=String.fromCharCode(e.which).toLowerCase(),l="",c={};t.each(["alt","ctrl","meta","shift"],function(t,i){e[i+"Key"]&&r!==i&&(l+=i+"+")}),r&&(c[l+r]=!0),a&&(c[l+a]=!0,c[l+o[a]]=!0,"shift+"===l&&(c[o[a]]=!0));for(var d=0,h=i.length;d<h;d++)if(c[i[d]])return e.preventDefault(),n.apply(this,arguments)}},e}),i("modules/styles",["jquery"],function(t){"use strict";function e(){}return e.prototype={applyStylePreview:function(e){var i,n=t("<span></span>"),s={},o=this,r=["background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-left-color","border-left-style","border-left-width","border-right-color","border-right-style","border-right-width","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","color","font-family","font-kerning","font-size","font-style","font-variant","font-variant-ligatures","font-weight","text-align","text-decoration","text-indent","text-rendering","text-shadow","text-overflow","text-transform","line-height","outline-color","outline-offset","outline-style","outline-width","padding-bottom","padding-left","padding-right","padding-top"];s.RedactorClearStyle={title:"None",func:"styles.setStyle"},t.each(o.opts.classes,function(t,e){s[e["class"]]={title:e.name,func:"styles.setStyle"}}),i=this.button.addDropdown(this.$toolbar.find(".re-styles"),s),this.dropdown.show(e,"styles"),n.appendTo(this.$editor),i.children("a").each(function(e,i){var s,o=i.className.replace("redactor-dropdown-","");n.removeClass().addClass(o),s=window.getComputedStyle(n.get(0)),t.each(s,function(e,n){var o=s.getPropertyValue(n);return"display"===n&&"none"===o?void t(i).html(t(i).html()+" <em>(Hidden)</em>"):("color"===n&&"rgb(255, 255, 255)"===o&&(o="rgb(0, 0, 0)"),void(t.inArray(n,r)!==-1&&(i.style[n]=o)))})}),n.remove(),e.preventDefault()},parseForClasses:function(){var e=this;if(e.opts.localStylesheet){var i,n;t.each(document.styleSheets,function(t,n){if(n.href&&n.href.indexOf(e.opts.localStylesheet)>=0)return i=n,!1}),i&&(n=i.cssRules||i.rules||[],t.each(n,function(t,i){if(!i.selectorText)return!0;var n=i.selectorText.replace(/.redactor-editor/g,""),s=/\.[a-zA-Z0-9-_]+/.exec(n),o=/stylename_[a-zA-Z0-9-_]+/.exec(n);o&&(o=o[0].replace("stylename_","").replace(/__/g," ").replace(/\b[a-z]/g,function(t){return t.toUpperCase()})),s&&(s=s[0].replace(/^\./,"")),s&&s.length&&o&&o.length&&e.opts.classes.push({"class":s,name:o})}))}},initialize:function(){if(this.opts.classes||(this.opts.classes=[]),this.styles.parseForClasses(),this.opts.buttons.indexOf("styles")!==-1){var t=this.button.addAfter("formatting","styles","Style",null,{});this.$toolbar.find("a.re-styles").addClass("fsredactor-icon fsredactor-style re-has-dropdown"),t.one("click",this.styles.applyStylePreview)}},clearStyles:function(){return t("#redactor-overlay-box").length?(this.fs.$editTarget.removeAttr("class"),void this.code.sync()):(t.each(this.selection.getNodes(),function(e,i){t(i).removeAttr("class")}),void this.code.sync())},setStyle:function(e){return"RedactorClearStyle"===e?void this.styles.clearStyles():void this.fs.setInlineStyle(function(i){t(i).addClass(e)})}},e}),i("modules/tabifier",[],function(){"use strict";function t(){}return t.prototype={get:function(t){if(!this.opts.tabifier)return t;var e=["area","body","head","hr","i?frame","link","meta","noscript","style","script","table","tbody","thead","tfoot"],i=["li","dt","dt","h[1-6]","option","script"],n=["p","blockquote","div","dl","fieldset","form","frameset","map","ol","pre","select","td","th","tr","ul"];this.tabifier.lineBefore=new RegExp("^<(/?"+e.join("|/?")+"|"+i.join("|")+")[ >]"),this.tabifier.lineAfter=new RegExp("^<(br|/?"+e.join("|/?")+"|/"+i.join("|/")+")[ >]"),this.tabifier.newLevel=new RegExp("^</?("+n.join("|")+")[ >]");var s=0,o=t.length,r=0,a=null,l=null,c="",d="",h="";for(this.tabifier.cleanlevel=0;s<o;s++){if(r=s,-1===t.substr(s).indexOf("<"))return d+=t.substr(s),this.tabifier.finish(d);for(;r<o&&"<"!==t.charAt(r);)r++;for(s!==r&&(h=t.substr(s,r-s),h.match(/^\s{2,}$/g)||("\n"===d.charAt(d.length-1)?d+=this.tabifier.getTabs():"\n"===h.charAt(0)&&(d+="\n"+this.tabifier.getTabs(),h=h.replace(/^\s+/,"")),d+=h),h.match(/\n/)&&(d+="\n"+this.tabifier.getTabs())),a=r;r<o&&">"!==t.charAt(r);)r++;c=t.substr(a,r-a),s=r;var u;if("!--"===c.substr(1,3)){if(!c.match(/--$/)){for(;"-->"!==t.substr(r,3);)r++;r+=2,c=t.substr(a,r-a),s=r}"\n"!==d.charAt(d.length-1)&&(d+="\n"),d+=this.tabifier.getTabs(),d+=c+">\n"}else"!"===c[1]?d=this.tabifier.placeTag(c+">",d):"?"===c[1]?d+=c+">\n":(u=c.match(/^<(script|style|pre)/i))?(u[1]=u[1].toLowerCase(),c=this.tabifier.cleanTag(c),d=this.tabifier.placeTag(c,d),l=String(t.substr(s+1)).toLowerCase().indexOf("</"+u[1]),l&&(h=t.substr(s+1,l),s+=l,d+=h)):(c=this.tabifier.cleanTag(c),d=this.tabifier.placeTag(c,d))}return this.tabifier.finish(d)},getTabs:function(){for(var t="",e=0;e<this.tabifier.cleanlevel;e++)t+="\t";return t},finish:function(t){return t=t.replace(/\n\s*\n/g,"\n"),t=t.replace(/^[\s\n]*/,""),t=t.replace(/[\s\n]*$/,""),t=t.replace(/<script(.*?)>\n<\/script>/gi,"<script$1></script>"),this.tabifier.cleanlevel=0,t},cleanTag:function(t){var e="";t=t.replace(/\n/g," "),t=t.replace(/\s{2,}/g," "),t=t.replace(/^\s+|\s+$/g," ");var i="";t.match(/\/$/)&&(i="/",t=t.replace(/\/+$/,""));for(var n;n=/\s*([^= ]+)(?:=((['"']).*?\3|[^ ]+))?/.exec(t);)n[2]?e+=n[1].toLowerCase()+"="+n[2]:n[1]&&(e+=n[1].toLowerCase()),e+=" ",t=t.substr(n[0].length);return e.replace(/\s*$/,"")+i+">"},placeTag:function(t,e){var i=t.match(this.tabifier.newLevel);return(t.match(this.tabifier.lineBefore)||i)&&(e=e.replace(/\s*$/,""),e+="\n"),i&&"/"===t.charAt(1)&&this.tabifier.cleanlevel--,"\n"===e.charAt(e.length-1)&&(e+=this.tabifier.getTabs()),i&&"/"!==t.charAt(1)&&this.tabifier.cleanlevel++,e+=t,(t.match(this.tabifier.lineAfter)||t.match(this.tabifier.newLevel))&&(e=e.replace(/ *$/,"")),e}},t}),i("text!view/table/settings_modal.html",[],function(){return'<section>\r\n\t<div class="redactor-table-column1-fieldset">\r\n\t\t<label for="redactor-table-columns">Columns</label><input id="redactor-table-columns" type="number"/>\r\n\t</div>\r\n\t<div class="redactor-table-column2-fieldset">\r\n\t\t<label for="redactor-table-rows">Rows</label><input id="redactor-table-rows" type="number"/>\r\n\t</div>\r\n\t<div class="redactor-table-column-clear"></div>\r\n\t<div class="redactor-table-column1-fieldset">\r\n\t\t<label for="redactor-table-cellspacing">Cellspacing</label><input id="redactor-table-cellspacing" type="number"/>px\r\n\t</div>\r\n\t<div class="redactor-table-column-clear"></div>\r\n\t<div class="redactor-table-column1-fieldset">\r\n\t\t<label for="redactor-table-width">Width</label><input id="redactor-table-width" placeholder="auto" type="number"/>\r\n\t\t\t<select id="redactor-table-width-unit"><option>%</option><option>px</option></select>\r\n\t</div>\r\n\t<div class="redactor-table-column2-fieldset">\r\n\t\t<label for="redactor-table-height">Height</label><input id="redactor-table-height" placeholder="auto" type="number"/>\r\n\t</div>\r\n\t<div class="redactor-table-column-clear"></div>\r\n\t<label for="redactor-table-align">Alignment</label>\r\n\t<ul id="redactor-table-align">\r\n\t\t<li><input id="redactor-table-align-none" name="redactor-table-align" type="radio" value=""><label for="redactor-table-align-none">None</label></li>\r\n\t\t<li><input id="redactor-table-align-left" name="redactor-table-align" type="radio" value="left"><label for="redactor-table-align-left">Left</label></li>\r\n\t\t<li><input id="redactor-table-align-center" name="redactor-table-align" type="radio" value="center"><label for="redactor-table-align-center">Center</label></li>\r\n\t\t<li><input id="redactor-table-align-right" name="redactor-table-align" type="radio" value="right"><label for="redactor-table-align-right">Right</label></li>\r\n\t</ul>\r\n\t<div class="redactor-table-column-double-fieldset">\r\n\t\t<label for="redactor-table-class">Class</label><input id="redactor-table-class" placeholder="Choose class..." type="text" />\r\n\t</div>\r\n\t<div class="redactor-table-column-double-fieldset">\r\n\t\t<label for="redactor-table-border">Border</label><input id="redactor-table-border" type="number"/>\r\n\t</div>\r\n\t<div class="redactor-table-column-clear"></div>\r\n\t<div class="redactor-table-column-double-fieldset">\r\n\t\t<label for="redactor-table-background-color">Background Color</label><input id="redactor-table-background-color" type="text"/><button type="button" for="redactor-table-background-color" class="redactor-color-picker-button"></button>\r\n\t</div>\r\n\t<div class="redactor-table-column-double-fieldset">\r\n\t\t<label for="redactor-table-border-color">Border Color</label><input id="redactor-table-border-color" type="text"/><button type="button" for="redactor-table-border-color" class="redactor-color-picker-button"></button>\r\n\t</div>\r\n\t<div class="redactor-table-column-clear"></div>\r\n</section>\r\n'}),i("text!view/table/border_dropdown.html",[],function(){return'<label for="redactor-table-edit-border">Border</label>\r\n<input type="number" name="redactor-table-edit-border" id="redactor-table-edit-border" />px\r\n<div>\r\n\t<button type="button" class="redactor-table-edit-border-toggle" id="redactor-table-edit-border-top">Top</button>\r\n\t<button type="button" class="redactor-table-edit-border-toggle" id="redactor-table-edit-border-bottom">Bottom</button>\r\n</div>\r\n<div>\r\n\t<button type="button" class="redactor-table-edit-border-toggle" id="redactor-table-edit-border-left">Left</button>\r\n\t<button type="button" class="redactor-table-edit-border-toggle" id="redactor-table-edit-border-right">Right</button>\r\n</div>\r\n'}),i("text!view/table/width_dropdown.html",[],function(){return'<label for="redactor-table-edit-width">Width</label><input type="number" name="redactor-table-edit-width" id="redactor-table-edit-width" />\r\n<label><select id="redactor-table-edit-width-unit"><option>%</option><option>px</option></select></label>\r\n'}),i("modules/table",["jquery","text!view/table/settings_modal.html","text!view/table/border_dropdown.html","text!view/table/width_dropdown.html"],function(t,e,i,n){"use strict";function s(){}var o="redactor-table-cell-selected",r="."+o,a="td, th",l="&#8203;";return s.prototype={initialize:function(){var s=this,o={};o.insert_table={title:this.lang.get("insert_table"),func:this.table.show};var r=this.button.get("table");r.length&&(this.button.addDropdown(r,o),r=this.button.add("table-align","Alignment"),this.button.addDropdown(r,{left:{title:"Left",func:this.table.align},right:{title:"Right",func:this.table.align},center:{title:"Center",func:this.table.align}}),r=this.button.add("table-vertical-align","Vertical Alignment"),this.button.addDropdown(r,{top:{title:"Top",func:this.table.verticalAlign},middle:{title:"Middle",func:this.table.verticalAlign},bottom:{title:"Bottom",func:this.table.verticalAlign}}),r=this.button.add("table-rows-columns","Rows and Columns"),this.button.addDropdown(r,{addRowAbove:{title:"Add Row Above",func:this.table.addRowAbove},addRowBelow:{title:"Add Row Below",func:this.table.addRowBelow},addColumnBefore:{title:"Add Column Before",func:this.table.addColumnBefore},addColumnAfter:{title:"Add Column After",func:this.table.addColumnAfter},removeRow:{title:"Remove Row",func:this.table.removeRow},removeColumn:{title:"Remove Column",func:this.table.removeColumn},selectRow:{title:"Select Row",func:this.table.selectRow},selectColumn:{title:"Select Column",func:this.table.selectColumn},selectAll:{title:"Select All Cells",func:this.table.selectAllCells},toggleTH:{title:"Toggle as Table Headers",func:this.table.swapCellType}}),r=this.button.add("table-border","Border"),this.button.addDropdown(r),o=r.data("dropdown")[0],o.innerHTML=i,t(".re-table-border",this.$toolbar).on("click",function(){var e=parseInt(s.table.getSelectionCommonProperty("borderTopWidth")),i=parseInt(s.table.getSelectionCommonProperty("borderRightWidth")),n=parseInt(s.table.getSelectionCommonProperty("borderBottomWidth")),o=parseInt(s.table.getSelectionCommonProperty("borderLeftWidth"));t("#redactor-table-edit-border").val(Math.max(1,e,i,n,o)),t("#redactor-table-edit-border-top").toggleClass("redactor-button-active",!!e),t("#redactor-table-edit-border-right").toggleClass("redactor-button-active",!!i),t("#redactor-table-edit-border-bottom").toggleClass("redactor-button-active",!!n),t("#redactor-table-edit-border-left").toggleClass("redactor-button-active",!!o)}),t(o).on("click",".redactor-table-edit-border-toggle",function(){return t(this).toggleClass("redactor-button-active"),s.table.processBorder(t(this).closest(".redactor-dropdown")),!1}).on("click change keyup","#redactor-table-edit-border",function(){return s.table.processBorder(t(this).closest(".redactor-dropdown")),!1}),r=this.button.add("table-border-color","Border Color"),o=this.button.addDropdown(r),o.width(242),this.fs.buildPicker(o,"borderColor",this.fs.colors,this.table.setBorderColor,this.table.removeBorderColor),r=this.button.add("table-background-color","Background Color"),o=this.button.addDropdown(r),o.width(242),this.fs.buildPicker(o,"backgroundColor",this.fs.colors,this.table.setBackgroundColor,this.table.removeBackgroundColor),r=this.button.add("table-width","Width"),this.button.addDropdown(r),o=r.data("dropdown")[0],o.innerHTML=n,t(".re-table-width",this.$toolbar).on("click",function(){var e=s.table.getSelectionColumns(),i="100",n="%";if(e.length){var r=e[0].style.width;t.trim(r).length&&(i=parseInt(r),n=r.replace(/\d+/,""))}t("#redactor-table-edit-width",o).val(i),t("#redactor-table-edit-width-unit",o).val(n)}),t(o).on("click change keyup","#redactor-table-edit-width, #redactor-table-edit-width-unit",function(){return s.table.processWidth(t(this).closest(".redactor-dropdown")),!1}),this.$toolbar.find(".re-table-align, .re-table-vertical-align, .re-table-rows-columns, .re-table-border, .re-table-border-color, .re-table-background-color, .re-table-width").addClass("redactor-table-edit-only-button redactor-button-hidden"),this.$toolbar.find(".re-table").addClass("redactor-table-edit-button"),this.table.modal_table_edit=e,this.$element.on("sync.redactor-api",this.table.onSync),this.$element.on("observed.redactor.table",this.table.setEditable))},onSync:function(){var t=this.$textarea.val();t=t.replace(/(<table([^>]*)class="([^>]*))redactor-table-selected/gi,"$1"),t=t.replace(/(<table([^>]*)class="([^>]*))redactor-table-edit-mode/gi,"$1"),this.$textarea.val(t)},setEditable:function(e,i){var n=this,s=t(i),o=[];return o.push({name:"Delete","class":"re-trash",title:"Delete Table",onClick:function(){return!!confirm("Are you sure you want to delete this table?")&&(n.fs.hideEditableControls(),s.remove(),n.code.sync(),void 0)}}),o.push({name:"Settings","class":"re-cog",title:"Edit Table Properties",onClick:function(){return n.table.show(s),!1}}),o.push({name:"Edit","class":"re-pencil",title:"Edit Table Cells",onClick:function(){return n.table.enableTableEditMode(s),!1}}),s.off(".editcontrols").on("click.editcontrols touchstart.editcontrols",function(e){return(!s.closest(n.fs.$editTarget).length||!n.$editor.hasClass("redactor-table-edit-mode"))&&(t(e.target).closest("table")[0]!==n.table.getSelectedTable()[0]&&(n.table.tableCleanUp(s),n.table.setSelectedTable(s[0]),n.fs.loadEditableControls({bCancelSelection:!0,element:s,buttons:o,offset:{top:-20,left:-1},onHide:function(){return s[0]===n.table.getSelectedTable()[0]&&(n.table.disableTableEditMode(s),n.table.setSelectedTable(null)),!0}}),e.stopPropagation(),e.preventDefault(),void 0))}),!1},enableTableEditMode:function(e){var i=this,n=t(this.selection.getNodes()).filter("td,th");return this.$editor.hasClass("redactor-table-edit-mode")?void this.table.disableTableEditMode(e):(this.$editor.addClass("redactor-table-edit-mode").prop("contenteditable",!1).prepend('<div class="redactor-table-edit-mode-overlay">'),this.$toolbar.find(".re-table").addClass("redactor-active").on("click.redactor-table-edit",function(){return i.table.disableTableEditMode(e),i.dropdown.hideAll(),!1}),e.find("td,th").each(function(){t(this).attr("unselectable","on")}),this.table.$previousButtons=this.$toolbar.find("a:not(.redactor-table-edit-button, .redactor-button-hidden)"),this.table.$previousButtons.addClass("redactor-button-hidden"),this.$toolbar.find(".redactor-table-edit-only-button").removeClass("redactor-button-hidden"),e.addClass("redactor-table-edit-mode"),this.table.setLastSelected(null),this.selection.remove(),n.length&&this.table.setSelection(n),e.on("mousedown.redactor-table-edit",a,function(){var n=t(this).parentsUntil(i.table.getSelectedTable()).filter("td:first")[0]||this,s=e.find(r);e.off("mouseover.redactor-table-edit").on("mouseover.redactor-table-edit",a,function(r){var a=t(this).parentsUntil(i.table.getSelectedTable()).filter("td:first")[0]||this;i.table.expandSelection(e,n,a,!0),(r.ctrlKey||r.metaKey)&&s.addClass(o)}).on("mouseup.redactor-table-edit",function(){e.off("mouseover.redactor-table-edit")}),i.dropdown.hideAll()}).on("click.redactor-table-edit",a,function(n){var s=t(this).parentsUntil(i.table.getSelectedTable()).filter("td:first")[0]||this;n.shiftKey&&i.table.getLastSelected()?(!n.ctrlKey&&!n.metaKey&&i.table.resetSelection(e),i.table.expandSelection(e,i.table.getLastSelected(),s),i.table.setLastSelected(s)):n.ctrlKey||n.metaKey?(t(s).toggleClass(o),t(s).hasClass(o)&&i.table.setLastSelected(s)):(i.table.resetSelection(e),t(s).addClass(o),i.table.setLastSelected(s))}),void 0)},disableTableEditMode:function(e){return!!e.length&&(this.$editor.removeClass("redactor-table-edit-mode").prop("contenteditable",!0).find(".redactor-table-edit-mode-overlay").remove(),this.$toolbar.find(".re-table").removeClass("redactor-active").off(".redactor-table-edit"),this.$toolbar.find(".redactor-table-edit-only-button").addClass("redactor-button-hidden"),e.removeClass("redactor-table-edit-mode").find(r).removeClass(o),e.find("td,th").each(function(){t(this).removeAttr("unselectable")}),this.opts.visual&&this.table.$previousButtons&&this.table.$previousButtons.removeClass("redactor-button-hidden"),e.off(".redactor-table-edit"),this.code.sync(),void 0)},tableCleanUp:function(e){e.find("td, th").each(function(){var e,i=t(this),n=i.contents();if(n.length)for(e in n)if(3!==n[e].nodeType)return;(!n.length||!/[\w]/.test(i.contents().text()))&&i.html(l)})},align:function(t){this.table.getSelection().css("text-align",t)},verticalAlign:function(t){this.table.getSelection().css("vertical-align",t)},getLastSelected:function(){return this.table.lastSelected=this.table.lastSelected||this.table.getSelection().get(0),this.table.lastSelected},setLastSelected:function(t){this.table.lastSelected=t},setSelection:function(e,i){i&&this.table.resetSelection(this.table.getSelectedTable()),t(e).addClass(o)},getSelection:function(){return t(this.table.target).find(r)},getSelectionCommonProperty:function(t){var e;return this.table.getSelection().each(function(){if(e){if(e!==this.style[t])return e=!1,!1}else e=this.style[t]}),e},getSelectionColumns:function(){var e=this.table.getSelectionColumnIndexes(),i=t(),n=this.table.getSelectedTable();return t.each(e,function(t,e){i=i.add(n.find("colgroup").children("col").eq(e))}),i},getSelectionColumnIndexes:function(){return t.unique(this.table.getSelection().map(function(){return t(this).index()})).get()},setupColumns:function(){var e=this.table.getSelectedTable(),i=e.find("col").length,n=e.find("colgroup"),s=0;for(n.length||(e.prepend("<colgroup>"),n=e.find("colgroup")),t("tr:first",e).find("> td, > th").each(function(){t(this).attr("colspan")?s+=+t(this).attr("colspan"):s++});i<s;i++)n.append("<col/>")},getSelectedTable:function(){return t(this.table.target)},setSelectedTable:function(e){this.table.target=e,this.$editor.find(".redactor-table-selected").removeClass("redactor-table-selected"),t(this.table.target).addClass("redactor-table-selected"),this.table.setupColumns(),this.table.setLastSelected(null)},resetSelection:function(t){t.find(r).removeClass(o)},expandSelection:function(t,e,i,n){var s,r,a=Math.min(e.cellIndex,i.cellIndex),l=Math.min(e.parentNode.rowIndex,i.parentNode.rowIndex),c=Math.max(e.cellIndex,i.cellIndex),d=Math.max(e.parentNode.rowIndex,i.parentNode.rowIndex);for(n&&this.table.resetSelection(t),r=l;r<=d;r++)for(s=a;s<=c;s++)t.find("> tr, > thead > tr, > tbody > tr, > tfoot > tr").eq(r).find("> td, > th").eq(s).addClass(o)},show:function(e){var i=this;"insert_table"===e&&(e=!1),this.modal.addTemplate("table",this.table.modal_table_edit),this.modal.load("table",this.lang.get("insert_table"),500),this.modal.createCancelButton();var n=this.modal.createActionButton(this.lang.get("save"));n.on("click",function(){i.table.save(e)}),this.selection.save(),this.modal.show();var s=t('<div style="display:none; position:absolute; background: #fff"/>');if(this.$modal.append(s),this.$modal.on("keyup change","#redactor-table-background-color, #redactor-table-border-color",function(){var e=t(this);e.next(".redactor-color-picker-button").css("backgroundColor",e.val())}),this.$modal.on("click",".redactor-color-picker-button",function(){var e=t(this);return s.$triggerer=t("#"+e.attr("for")),s.show().css({top:e.position().top}),i.$modal.one("click",function(){s.hide()}),!1}),this.fs.buildPicker(s,"tableSetting",this.fs.colors,function(t,e){s.$triggerer.val(e).change(),s.hide()},function(){s.$triggerer.val("").change(),s.hide()}),e.length){var o=this.fs.rgb2hex(e[0].style.borderColor)||"#000000",r=this.fs.rgb2hex(e[0].style.backgroundColor);t("#redactor-table-rows").val(e[0].rows.length),t("#redactor-table-columns").val(e[0].rows[0].children.length),t("#redactor-table-cellspacing").val(parseInt(e[0].style.borderSpacing)||0),t("#redactor-table-width").val(parseInt(e[0].style.width)||""),t("#redactor-table-width-unit").val("px"===e[0].style.width.slice(-2)?"px":"%"),t("#redactor-table-height").val(parseInt(e[0].style.height)||""),t("#redactor-table-border").val(parseInt(e[0].style.borderWidth)||0),t("#redactor-table-border-color").val(o),t("#redactor-table-background-color").val(r),t("#redactor-table-align-"+("0px auto"===e[0].style.margin?"center":e[0].style["float"])).prop("checked",!0),e.removeClass("redactor-table-selected"),e.removeClass("redactor-table-edit-mode"),t("#redactor-table-class").val(e[0].className),t('.redactor-color-picker-button[for="redactor-table-background-color"]').css("backgroundColor",r),t('.redactor-color-picker-button[for="redactor-table-border-color"]').css("backgroundColor",o)}if(t.fn.selectize){var a=this.opts.classes?t.map(this.opts.classes,function(t){return{value:t["class"],text:t.name}}):[],l=t("#redactor-table-class").selectize({delimiter:" ",persist:!1,create:!0});l[0].selectize.addOption(a),l[0].selectize.$control.on("keyup",function(t){t.stopPropagation()})}t("#redactor-table-columns")[0].focus()},save:function(e){var i,n,s,o,r=t("#redactor-table-rows").val(),a=t("#redactor-table-columns").val(),c=t("#redactor-table-cellspacing").val(),d=t("#redactor-table-width").val(),h=t("#redactor-table-width-unit").val(),u=t("#redactor-table-height").val(),f=t('input[name="redactor-table-align"]:checked',this.$modal).val(),p=t("#redactor-table-class").val(),m=t("#redactor-table-border").val(),g=t("#redactor-table-border-color").val()||"#000000",v=t("#redactor-table-background-color").val(),y=0,b=0,w=t("<div>"),_=Math.floor(99999*Math.random()),k=!0;if(e.length?(k=!1,y=e[0].rows.length,b=e[0].rows[0].children.length):e=t('<table id="table'+_+'"><tbody></tbody></table>'),e.css({borderCollapse:c>0?"separate":"collapse",borderSpacing:c?c+"px":"",borderWidth:m?m+"px":"",borderColor:g,borderStyle:m?"solid":"",backgroundColor:v,width:d?d+h:"",height:u?u+"px":"","float":"center"===f?"":f}).attr("class",p),"center"===f&&e.css("margin","0px auto"),e.find("tr").each(function(){var e=a-b;if(e>0)for(i=0;i<e;i++)t(this).append(t("<td>"+l+"</td>"));else for(i=0;i<-e;i++)t(this).find("th:last, td:last").remove()}),0===y||y<r)for(i=y;i<r;i++){for(n=t("<tr>"),s=0;s<a;s++)o=t("<td>"+l+"</td>"),0===i&&0===s&&o.append(this.selection.getMarker()),t(n).append(o);e.append(n)}else for(i=y;i>r;i--)e.find("tr:last").remove();if(this.modal.close(),this.selection.restore(),this.code.sync(),k){w.append(e);var x=w.html();this.buffer.set();var C=this.selection.getBlock()||this.selection.getCurrent();C&&"BODY"!==C.tagName&&"TD"!==C.tagName&&"TH"!==C.tagName?("LI"===C.tagName&&(C=t(C).closest("ul, ol")),t(C).after(x)):this.insert.html(x),this.selection.restore();var S=this.$editor.find("#table"+_);if(!this.opts.linebreaks&&(this.utils.browser("mozilla")||this.utils.browser("msie"))){var T=S.next();0===T.length&&S.after(this.opts.emptyHtml)}this.observe.buttons(),this.observe.images(),S.find("span.redactor-selection-marker").remove(),S.removeAttr("id"),this.code.sync(),this.core.setCallback("insertedTable",S)}},getTable:function(){var e=t(this.selection.getParent()).closest("table");return!!this.utils.isRedactorParent(e)&&(0!==e.size()&&e)},addRowAbove:function(){var t=this.table.getCurrentRow();t.before(this.table.newRow(t[0].cells.length))},addRowBelow:function(){var t=this.table.getCurrentRow();t.after(this.table.newRow(t[0].cells.length))},removeRow:function(){this.table.getAllRows().has(r).remove()},getAllRows:function(){return this.table.getSelectedTable().find("> tr, > thead > tr, > tbody > tr, > tfoot > tr")},getCurrentRow:function(){return t(this.table.getLastSelected()).closest("tr")},newRow:function(e){var i,n=t("<tr></tr>");for(i=0;i<e;i++)n.append(t("<td>"+l+"</td>"));return n},addColumnAfter:function(){var e=t(this.table.getLastSelected()).index();this.table.getAllRows().each(function(){t("<td>"+l+"</td>").insertAfter(t("> td,> th",this).eq(e))}),this.table.getSelectedTable().find("> col, > colgroup > col").eq(e).after("<col/>")},addColumnBefore:function(){var e=t(this.table.getLastSelected()).index();this.table.getAllRows().each(function(){t("<td>"+l+"</td>").insertBefore(t("> td,> th",this).eq(e))}),this.table.getSelectedTable().find("> col, > colgroup > col").eq(e).before("<col/>")},removeColumn:function(){var e=this.table.getSelectionColumnIndexes().reverse(),i=this;t.each(e,function(e,n){i.table.getAllRows().each(function(){t("> td,> th",this).eq(n).remove()})})},swapCellType:function(){var e=!1,i=function(e){return function(){var i=t(this),n=t(e),s=n[0];return s.className=this.className,t.extend(s.classList,this.classList),t.extend(s.attributes,this.attributes),n.append(i.contents())}};this.table.getSelection().each(function(n){0===n&&"TH"===this.tagName&&(e=!0),e&&"TD"!==this.tagName?t(this).replaceWith(i("<td>")):"TH"!==this.tagName&&t(this).replaceWith(i("<th>"))})},selectRow:function(){this.table.setSelection(t(this.table.getLastSelected()).siblings("td,th").andSelf(),!0)},selectColumn:function(){var e=t(this.table.getLastSelected()).index();this.table.setSelection(t("td:eq("+e+"),th:eq("+e+")",this.table.getAllRows()),!0)},selectAllCells:function(){this.table.setSelection(t(a,this.table.getAllRows()),!0)},setBorderColor:function(t,e){this.table.getSelection().css("borderColor",e)},removeBorderColor:function(){this.table.getSelection().css("borderColor","")},setBackgroundColor:function(t,e){this.table.getSelection().css("backgroundColor",e)},removeBackgroundColor:function(){this.table.getSelection().css("backgroundColor","")},processBorder:function(e){var i=t("#redactor-table-edit-border-top",e).hasClass("redactor-button-active"),n=t("#redactor-table-edit-border-right",e).hasClass("redactor-button-active"),s=t("#redactor-table-edit-border-bottom",e).hasClass("redactor-button-active"),o=t("#redactor-table-edit-border-left",e).hasClass("redactor-button-active"),r=t("#redactor-table-edit-border",e).val()+"px"||"1px";this.table.getSelection().css({borderTopWidth:i?r:0,borderRightWidth:n?r:0,borderBottomWidth:s?r:0,borderLeftWidth:o?r:0,borderStyle:"solid"})},processWidth:function(e){var i=t("#redactor-table-edit-width",e).val(),n=t("#redactor-table-edit-width-unit",e).val();this.table.getSelectionColumns().css("width",i+n)},restoreAfterDelete:function(t){this.selection.restore(),t.find("span.redactor-selection-marker").remove(),this.code.sync()},deleteTable:function(){var t=this.table.getTable();if(t){this.buffer.set();var e=t.next();this.opts.linebreaks||0===e.length?this.caret.setAfter(t):this.caret.setStart(e),t.remove(),this.code.sync()}}},s}),i("modules/textdirection",[],function(){"use strict";function t(){}return t.prototype={initialize:function(){var t=this,e={};e.ltr={title:"Left to Right",func:t.textdirection.setLtr},e.rtl={title:"Right to Left",
func:t.textdirection.setRtl};var i=this.button.get("textdirection");i.length&&this.button.addDropdown(i,e)},setRtl:function(){this.buffer.set(),this.block.setAttr("dir","rtl")},setLtr:function(){this.buffer.set(),this.block.removeAttr("dir")}},t}),i("modules/tidy",["jquery"],function(t){"use strict";function e(){}return e.prototype={setupAllowed:function(){if(this.opts.allowedTags&&(this.opts.deniedTags=!1),this.opts.allowedAttr&&(this.opts.removeAttr=!1),!this.opts.linebreaks){var t=["p","section"];this.opts.allowedTags&&this.tidy.addToAllowed(t),this.opts.deniedTags&&this.tidy.removeFromDenied(t)}},addToAllowed:function(e){for(var i=e.length,n=0;n<i;n++)t.inArray(e[n],this.opts.allowedTags)===-1&&this.opts.allowedTags.push(e[n])},removeFromDenied:function(e){for(var i=e.length,n=0;n<i;n++){var s=t.inArray(e[n],this.opts.deniedTags);s!==-1&&this.opts.deniedTags.splice(s,1)}},load:function(e,i){return this.tidy.settings={deniedTags:this.opts.deniedTags,allowedTags:this.opts.allowedTags,removeComments:this.opts.removeComments,replaceTags:this.opts.replaceTags,replaceStyles:this.opts.replaceStyles,removeDataAttr:this.opts.removeDataAttr,removeAttr:this.opts.removeAttr,allowedAttr:this.opts.allowedAttr,removeWithoutAttr:this.opts.removeWithoutAttr,removeEmpty:this.opts.removeEmpty},t.extend(this.tidy.settings,i),e=this.tidy.removeComments(e),this.tidy.$div=t("<div />").append(e),this.tidy.replaceTags(),this.tidy.replaceStyles(),this.tidy.removeTags(),this.tidy.removeAttr(),this.tidy.removeEmpty(),this.tidy.removeParagraphsInLists(),this.tidy.removeDataAttr(),this.tidy.removeWithoutAttr(),e=this.tidy.$div.html(),this.tidy.$div.remove(),e},removeComments:function(t){return this.tidy.settings.removeComments?t.replace(/<!--[\s\S]*?-->/gi,""):t},replaceTags:function(e){if(!this.tidy.settings.replaceTags)return e;for(var i=this.tidy.settings.replaceTags.length,n=[],s=[],o=0;o<i;o++)s.push(this.tidy.settings.replaceTags[o][1]),n.push(this.tidy.settings.replaceTags[o][0]);t.each(n,t.proxy(function(e,i){this.tidy.$div.find(i).replaceWith(function(){return t("<"+s[e]+" />",{html:t(this).html()})})},this))},replaceStyles:function(){if(this.tidy.settings.replaceStyles){var e=this.tidy.settings.replaceStyles.length;this.tidy.$div.find("span").each(t.proxy(function(i,n){function s(e,i){var n=document.createElement(i);return t(n).append(t(e).contents())}for(var o=t(n),r=o.attr("style"),a=0;a<e;a++)if(r&&r.match(new RegExp("^"+this.tidy.settings.replaceStyles[a][0],"i"))){var l=this.tidy.settings.replaceStyles[a][1];o.replaceWith(s(o[0],l))}},this))}},removeTags:function(){!this.tidy.settings.deniedTags&&this.tidy.settings.allowedTags&&this.tidy.$div.find("*").not(this.tidy.settings.allowedTags.join(",")).each(function(e,i){""===i.innerHTML?t(i).remove():t(i).contents().unwrap()}),this.tidy.settings.deniedTags&&this.tidy.$div.find(this.tidy.settings.deniedTags.join(",")).each(function(e,i){""===i.innerHTML?t(i).remove():t(i).contents().unwrap()})},removeAttr:function(){var e,i;if(!this.tidy.settings.removeAttr&&this.tidy.settings.allowedAttr){var n=[],s=[];for(i=this.tidy.settings.allowedAttr.length,e=0;e<i;e++)n.push(this.tidy.settings.allowedAttr[e][0]),s.push(this.tidy.settings.allowedAttr[e][1]);this.tidy.$div.find("*").each(t.proxy(function(e,i){var o=t(i),r=t.inArray(o[0].tagName.toLowerCase(),n),a=this.tidy.removeAttrGetRemoves(r,s,o);a&&t.each(a,function(t,e){o.removeAttr(e)})},this))}if(this.tidy.settings.removeAttr)for(i=this.tidy.settings.removeAttr.length,e=0;e<i;e++){var o=this.tidy.settings.removeAttr[e][1];t.isArray(o)&&(o=o.join(" ")),this.tidy.$div.find(this.tidy.settings.removeAttr[e][0]).removeAttr(o)}},removeAttrGetRemoves:function(e,i,n){var s=[];return e===-1?t.each(n[0].attributes,function(t,e){s.push(e.name)}):"*"===i[e].toString()?s=[]:t.each(n[0].attributes,function(n,o){t.isArray(i[e])?t.inArray(o.name,i[e])===-1&&s.push(o.name):i[e]!==o.name&&s.push(o.name)}),s},removeAttrs:function(e,i){return i=new RegExp(i,"g"),e.each(function(){for(var e=t(this),n=this.attributes.length-1,s=n;s>=0;s--){var o=this.attributes[s];o&&o.specified&&o.name.search(i)>=0&&e.removeAttr(o.name)}})},removeEmpty:function(){this.tidy.settings.removeEmpty&&this.tidy.$div.find(this.tidy.settings.removeEmpty.join(",")).each(function(){var e=t(this),i=e.text();i=i.replace(/[\u200B-\u200D\uFEFF]/g,""),i=i.replace(/&nbsp;/gi,""),i=i.replace(/\s/g,""),""===i&&0===e.children().length&&e.remove()})},removeParagraphsInLists:function(){this.tidy.$div.find("li p").contents().unwrap()},removeDataAttr:function(){if(this.tidy.settings.removeDataAttr){var e=this.tidy.settings.removeDataAttr;t.isArray(this.tidy.settings.removeDataAttr)&&(e=this.tidy.settings.removeDataAttr.join(",")),this.tidy.removeAttrs(this.tidy.$div.find(e),"^(data-)")}},removeWithoutAttr:function(){this.tidy.settings.removeWithoutAttr&&this.tidy.$div.find(this.tidy.settings.removeWithoutAttr.join(",")).each(function(){0===this.attributes.length&&t(this).contents().unwrap()})}},e}),i("modules/toolbar",["jquery"],function(t){"use strict";function e(){}return e.prototype={init:function(){return{backcolor:{title:this.lang.get("backcolor")},html:{title:this.lang.get("html"),func:"code.toggle"},formatting:{title:this.lang.get("formatting"),dropdown:{p:{title:this.lang.get("paragraph"),func:"block.format"},blockquote:{title:this.lang.get("quote"),func:"block.format"},pre:{title:this.lang.get("code"),func:"block.format"},h1:{title:this.lang.get("header1"),func:"block.format"},h2:{title:this.lang.get("header2"),func:"block.format"},h3:{title:this.lang.get("header3"),func:"block.format"},h4:{title:this.lang.get("header4"),func:"block.format"},h5:{title:this.lang.get("header5"),func:"block.format"},h6:{title:this.lang.get("header6"),func:"block.format"}}},fontcolor:{title:this.lang.get("fontcolor")},fontfamily:{title:"Change Font Family"},fontsize:{title:"Change Font Size"},fullscreen:{title:"Fullscreen",func:"fullscreen.toggle"},bold:{title:this.lang.get("bold"),func:"inline.format"},embed:{title:this.lang.get("embed"),func:"embed.show"},italic:{title:this.lang.get("italic"),func:"inline.format"},deleted:{title:this.lang.get("deleted"),func:"inline.format"},underline:{title:this.lang.get("underline"),func:"inline.format"},unorderedlist:{title:"&bull; "+this.lang.get("unorderedlist"),func:"list.toggle"},orderedlist:{title:"1. "+this.lang.get("orderedlist"),func:"list.toggle"},outdent:{title:"< "+this.lang.get("outdent"),func:"indent.decrease"},indent:{title:"> "+this.lang.get("indent"),func:"indent.increase"},image:{title:this.lang.get("image"),func:"image.show"},file:{title:this.lang.get("file"),func:"file.show"},link:{title:this.lang.get("link"),dropdown:{link:{title:this.lang.get("link_insert"),func:"link.show"},unlink:{title:this.lang.get("unlink"),func:"link.unlink"}}},media:{title:this.lang.get("media"),func:"media.show"},table:{title:this.lang.get("table")},textdirection:{title:"Change Text Direction"},alignment:{title:this.lang.get("alignment"),dropdown:{left:{title:this.lang.get("align_left"),func:"alignment.left"},center:{title:this.lang.get("align_center"),func:"alignment.center"},right:{title:this.lang.get("align_right"),func:"alignment.right"},justify:{title:this.lang.get("align_justify"),func:"alignment.justify"}}},horizontalrule:{title:this.lang.get("horizontalrule"),func:"line.insert"},undo:{title:"Undo",func:"buffer.undo"},redo:{title:"Redo",func:"buffer.redo"}}},build:function(){this.toolbar.hideButtons(),this.toolbar.hideButtonsOnMobile(),this.toolbar.isButtonSourceNeeded(),0!==this.opts.buttons.length&&(this.$toolbar=this.toolbar.createContainer(),this.toolbar.setOverflow(),this.toolbar.append(),this.toolbar.setFormattingTags(),this.toolbar.loadButtons(),this.toolbar.setFixed(),this.opts.activeButtons&&this.$editor.on("mouseup.redactor keyup.redactor focus.redactor",t.proxy(this.observe.buttons,this)))},createContainer:function(){return t("<ul>").addClass("redactor-toolbar").attr("id","redactor-toolbar-"+this.uuid)},setFormattingTags:function(){t.each(this.opts.toolbar.formatting.dropdown,t.proxy(function(e){t.inArray(e,this.opts.formatting)===-1&&delete this.opts.toolbar.formatting.dropdown[e]},this))},loadButtons:function(){t.each(this.opts.buttons,t.proxy(function(e,i){if(this.opts.toolbar[i]){if("file"===i){if(this.opts.fileUpload===!1)return;if(!this.opts.fileUpload&&this.opts.s3===!1)return}var n=this.opts.toolbar[i];this.$toolbar.append(t("<li>").append(this.button.build(i,n)))}},this))},append:function(){this.opts.toolbarExternal?(this.$toolbar.addClass("redactor-toolbar-external"),t(this.opts.toolbarExternal).html(this.$toolbar)):this.$box.prepend(this.$toolbar)},setFixed:function(){this.utils.isDesktop()&&(this.opts.toolbarExternal||this.opts.toolbarFixed&&(this.toolbar.observeScroll(),t(this.opts.toolbarFixedTarget).on("scroll.redactor."+this.uuid,t.proxy(this.toolbar.observeScroll,this))))},setOverflow:function(){this.utils.isMobile()&&this.opts.toolbarOverflow&&this.$toolbar.addClass("redactor-toolbar-overflow")},isButtonSourceNeeded:function(){if(!this.opts.source){var t=this.opts.buttons.indexOf("html");t!==-1&&this.opts.buttons.splice(t,1)}},hideButtons:function(){0!==this.opts.buttonsHide.length&&t.each(this.opts.buttonsHide,t.proxy(function(t,e){var i=this.opts.buttons.indexOf(e);i>=0&&this.opts.buttons.splice(i,1)},this))},hideButtonsOnMobile:function(){this.utils.isMobile()&&0!==this.opts.buttonsHideOnMobile.length&&t.each(this.opts.buttonsHideOnMobile,t.proxy(function(t,e){var i=this.opts.buttons.indexOf(e);this.opts.buttons.splice(i,1)},this))},observeScroll:function(){var e=t(this.opts.toolbarFixedTarget).scrollTop(),i=1;this.opts.toolbarFixedTarget===document&&(i=this.$box.offset().top),e>i?this.toolbar.observeScrollEnable(e,i):this.toolbar.observeScrollDisable()},observeScrollEnable:function(e,i){var n=this.$toolbar.height(),s=i+this.$box.height()-n,o=this.$box.innerWidth();this.$box.css("paddingTop",n+"px"),this.$toolbar.addClass("toolbar-fixed-box"),this.$toolbar.css({position:"fixed",width:o,top:0,left:this.$box.offset().left-t(this.opts.toolbarFixedTarget).scrollLeft()}),e>s&&t(".redactor-dropdown-"+this.uuid+":visible").hide(),this.toolbar.setDropdownsFixed(),this.$toolbar.css("visibility",e<s?"visible":"hidden")},observeScrollDisable:function(){this.$toolbar.css({position:"relative",width:"auto",top:0,left:0,visibility:"visible"}),this.$box.css("paddingTop",""),this.toolbar.unsetDropdownsFixed(),this.$toolbar.removeClass("toolbar-fixed-box")},setDropdownsFixed:function(){var e=this.$toolbar.innerHeight()+this.opts.toolbarFixedTopOffset,i="fixed";this.opts.toolbarFixedTarget!==document&&(e=this.$toolbar.innerHeight()+this.$toolbar.offset().top+this.opts.toolbarFixedTopOffset,i="absolute"),t(".redactor-dropdown-"+this.uuid).each(function(){t(this).css({position:i,top:e+"px"})})},unsetDropdownsFixed:function(){var e=this.$toolbar.innerHeight()+this.$toolbar.offset().top;t(".redactor-dropdown-"+this.uuid).each(function(){t(this).css({position:"absolute",top:e+"px"})})}},e}),i("modules/upload",["jquery"],function(t){"use strict";function e(){}return e.prototype={init:function(e,i,n){this.upload.direct=!1,this.upload.callback=n,this.upload.url=i,this.upload.$el=t(e),this.upload.$droparea=t('<div id="redactor-droparea" />'),this.upload.$placeholdler=t('<div id="redactor-droparea-placeholder" />').text(this.lang.get("upload_label")),this.upload.$input=t('<input type="file" name="file" />'),this.upload.$placeholdler.append(this.upload.$input),this.upload.$droparea.append(this.upload.$placeholdler),this.upload.$el.append(this.upload.$droparea),this.upload.$droparea.off("redactor.upload"),this.upload.$input.off("redactor.upload"),this.upload.$droparea.on("dragover.redactor.upload",t.proxy(this.upload.onDrag,this)),this.upload.$droparea.on("dragleave.redactor.upload",t.proxy(this.upload.onDragLeave,this)),this.upload.$input.on("change.redactor.upload",t.proxy(function(t){t=t.originalEvent||t,this.upload.traverseFile(this.upload.$input[0].files[0],t)},this)),this.upload.$droparea.on("drop.redactor.upload",t.proxy(function(t){t.preventDefault(),this.upload.$droparea.removeClass("drag-hover").addClass("drag-drop"),this.upload.onDrop(t)},this))},directUpload:function(t,e){this.upload.direct=!0,this.upload.traverseFile(t,e)},onDrop:function(t){t=t.originalEvent||t;var e=t.dataTransfer.files;this.upload.traverseFile(e[0],t)},traverseFile:function(t,e){if(this.opts.s3)return this.upload.setConfig(t),void this.upload.s3uploadFile(t);var i=window.FormData?new FormData:null;if(window.FormData){this.upload.setConfig(t);var n="image"===this.upload.type?this.opts.imageUploadParam:this.opts.fileUploadParam;i.append(n,t)}this.progress.show(),this.core.setCallback("uploadStart",e,i),this.upload.sendData(i,e)},setConfig:function(t){this.upload.getType(t),this.upload.direct&&(this.upload.url="image"===this.upload.type?this.opts.imageUpload:this.opts.fileUpload,this.upload.callback="image"===this.upload.type?this.image.insert:this.file.insert)},getType:function(t){this.upload.type="image",this.opts.imageTypes.indexOf(t.type)===-1&&(this.upload.type="file")},getHiddenFields:function(e,i){return e===!1||"object"!=typeof e?i:(t.each(e,t.proxy(function(e,n){null!==n&&0===n.toString().indexOf("#")&&(n=t(n).val()),i.append(e,n)},this)),i)},sendData:function(e,i){"image"===this.upload.type?(e=this.upload.getHiddenFields(this.opts.uploadImageFields,e),e=this.upload.getHiddenFields(this.upload.imageFields,e)):(e=this.upload.getHiddenFields(this.opts.uploadFileFields,e),e=this.upload.getHiddenFields(this.upload.fileFields,e));var n=new XMLHttpRequest;n.open("POST",this.upload.url),n.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.onreadystatechange=t.proxy(function(){if(4===n.readyState){var e=n.responseText;e=e.replace(/^\[/,""),e=e.replace(/\]$/,"");var s;try{s="string"==typeof e?t.parseJSON(e):e}catch(t){s={error:!0}}this.progress.hide(),this.upload.direct||this.upload.$droparea.removeClass("drag-drop"),this.upload.callback(s,this.upload.direct,i)}},this),n.send(e)},onDrag:function(t){t.preventDefault(),this.upload.$droparea.addClass("drag-hover")},onDragLeave:function(t){t.preventDefault(),this.upload.$droparea.removeClass("drag-hover")},clearImageFields:function(){this.upload.imageFields={}},addImageFields:function(t,e){this.upload.imageFields[t]=e},removeImageFields:function(t){delete this.upload.imageFields[t]},clearFileFields:function(){this.upload.fileFields={}},addFileFields:function(t,e){this.upload.fileFields[t]=e},removeFileFields:function(t){delete this.upload.fileFields[t]},s3uploadFile:function(e){this.upload.s3executeOnSignedUrl(e,t.proxy(function(t){this.upload.s3uploadToS3(e,t)},this))},s3executeOnSignedUrl:function(t,e){var i=new XMLHttpRequest,n="?";"-1"!==this.opts.s3.search(/\?/)&&(n="&"),i.open("GET",this.opts.s3+n+"name="+t.name+"&type="+t.type,!0),i.overrideMimeType&&i.overrideMimeType("text/plain; charset=x-user-defined");var s=this;i.onreadystatechange=function(){4===this.readyState&&200===this.status?(s.progress.show(),e(decodeURIComponent(this.responseText))):4===this.readyState&&200!==this.status},i.send()},s3createCORSRequest:function(t,e){var i=new XMLHttpRequest;return"withCredentials"in i?i.open(t,e,!0):"undefined"!=typeof XDomainRequest?(i=new XDomainRequest,i.open(t,e)):i=null,i},s3uploadToS3:function(e,i){var n=this.upload.s3createCORSRequest("PUT",i);!n||(n.onload=t.proxy(function(){if(200===n.status){this.progress.hide();var t=i.split("?");if(!t[0])return!1;this.upload.direct||this.upload.$droparea.removeClass("drag-drop");var e={filelink:t[0]};if("file"===this.upload.type){var s=t[0].split("/");e.filename=s[s.length-1]}this.upload.callback(e,this.upload.direct,!1)}},this),n.onerror=function(){},n.upload.onprogress=function(){},n.setRequestHeader("Content-Type",e.type),n.setRequestHeader("x-amz-acl","public-read"),n.send(e))}},e}),i("modules/utils",["jquery"],function(t){"use strict";function e(){}return e.prototype={isMobile:function(){return/(iPhone|iPod|BlackBerry|Android)/.test(navigator.userAgent)},isDesktop:function(){return!/(iPhone|iPod|iPad|BlackBerry|Android)/.test(navigator.userAgent)},isString:function(t){return"[object String]"===Object.prototype.toString.call(t)},isEmpty:function(e,i){return e=e.replace(/[\u200B-\u200D\uFEFF]/g,""),e=e.replace(/&nbsp;/gi,""),e=e.replace(/<\/?br\s?\/?>/g,""),e=e.replace(/\s/g,""),e=e.replace(/^<p>[^\W\w\D\d]*?<\/p>$/i,""),e=e.replace(/<iframe([^>]*)>$/i,"iframe"),e=e.replace(/<source([^>]*)>$/i,"source"),i!==!1&&(e=e.replace(/<[^\/>][^>]*><\/[^>]+>/gi,""),e=e.replace(/<[^\/>][^>]*><\/[^>]+>/gi,"")),e=t.trim(e),""===e},normalize:function(t){return"undefined"==typeof t?0:parseInt(t.replace("px",""),10)},hexToRgb:function(t){if("undefined"!=typeof t){if(t.search(/^#/)===-1)return t;var e=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;t=t.replace(e,function(t,e,i,n){return e+e+i+i+n+n});var i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return"rgb("+parseInt(i[1],16)+", "+parseInt(i[2],16)+", "+parseInt(i[3],16)+")"}},getOuterHtml:function(e){return t("<div>").append(t(e).eq(0).clone()).html()},getAlignmentElement:function(e){return t.inArray(e.tagName,this.opts.alignmentTags)!==-1?t(e):t(e).closest(this.opts.alignmentTags.toString().toLowerCase(),this.$editor[0])},removeEmptyAttr:function(e,i){var n=t(e);return"undefined"==typeof n.attr(i)||""===n.attr(i)&&(n.removeAttr(i),!0)},removeEmpty:function(e,i){var n=t(t.parseHTML(i));if(n.find(".redactor-invisible-space").removeAttr("style").removeAttr("class"),0===n.find("hr, br, img, video, iframe, source").length){var s=t.trim(n.text());this.utils.isEmpty(s,!1)&&n.remove()}},saveScroll:function(){this.saveEditorScroll=this.$editor.scrollTop(),this.saveBodyScroll=t(window).scrollTop(),this.opts.scrollTarget&&(this.saveTargetScroll=t(this.opts.scrollTarget).scrollTop())},restoreScroll:function(){"undefined"==typeof this.saveScroll&&"undefined"==typeof this.saveBodyScroll||(t(window).scrollTop(this.saveBodyScroll),this.$editor.scrollTop(this.saveEditorScroll),this.opts.scrollTarget&&t(this.opts.scrollTarget).scrollTop(this.saveTargetScroll))},createSpaceElement:function(){var t=document.createElement("span");return t.className="redactor-invisible-space",t.innerHTML=this.opts.invisibleSpace,t},removeInlineTags:function(e){var i=this.opts.inlineTags;i.push("span"),"PRE"===e.tagName&&i.push("a"),t(e).find(i.join(",")).not("span.redactor-selection-marker").contents().unwrap()},replaceWithContents:function(e,i){var n=this;return t(e).replaceWith(function(){return i===!0&&n.utils.removeInlineTags(this),t(this).contents()}),t(e)},replaceToTag:function(e,i,n){var s,o=this;return t(e).replaceWith(function(){s=t("<"+i+" />").append(t(this).contents());for(var e=0;e<this.attributes.length;e++)s.attr(this.attributes[e].name,this.attributes[e].value);return n===!0&&o.utils.removeInlineTags(s),s}),s},isStartOfElement:function(){var t=this.selection.getBlock();if(!t)return!1;var e=this.caret.getOffsetOfElement(t);return 0===e},isEndOfElement:function(e){if("undefined"==typeof e&&(e=this.selection.getBlock(),!e))return!1;var i=this.caret.getOffsetOfElement(e),n=t.trim(t(e).text()).replace(/\n\r\n/g,"");return i===n.length},isEndOfEditor:function(){var e=this.$editor[0],i=this.caret.getOffsetOfElement(e),n=t.trim(t(e).html().replace(/(<([^>]+)>)/gi,""));return i===n.length},isBlock:function(t){return t=t[0]||t,t&&this.utils.isBlockTag(t.tagName)},isBlockTag:function(t){return"undefined"!=typeof t&&this.reIsBlock.test(t)},isInline:function(t){return t=t[0]||t,t&&this.utils.isInlineTag(t.tagName)},isInlineTag:function(t){return"undefined"!=typeof t&&this.reIsInline.test(t)},isTag:function(e,i){var n=t(e).closest(i,this.$editor[0]);return 1===n.length&&n[0]},isSelectAll:function(){return this.selectAll},enableSelectAll:function(){this.selectAll=!0},disableSelectAll:function(){this.selectAll=!1},isRedactorParent:function(e){return!!e&&(0!==t(e).parents(".redactor-editor").length&&!t(e).hasClass("redactor-editor")&&e)},isCurrentOrParentHeader:function(){return this.utils.isCurrentOrParent(["H1","H2","H3","H4","H5","H6"])},isCurrentOrParent:function(e){var i=this.selection.getParent(),n=this.selection.getCurrent();if(t.isArray(e)){var s=0;return t.each(e,t.proxy(function(t,e){this.utils.isCurrentOrParentOne(n,i,e)&&s++},this)),0!==s}return this.utils.isCurrentOrParentOne(n,i,e)},isCurrentOrParentOne:function(t,e,i){return i=i.toUpperCase(),e&&e.tagName===i?e:!(!t||t.tagName!==i)&&t},isOldIe:function(){return!!(this.utils.browser("msie")&&parseInt(this.utils.browser("version"),10)<9)},isLessIe10:function(){return!!(this.utils.browser("msie")&&parseInt(this.utils.browser("version"),10)<10)},isIe11:function(){return!!navigator.userAgent.match(/Trident\/7\./)},browser:function(t){var e=navigator.userAgent.toLowerCase(),i=/(opr)[\/]([\w.]+)/.exec(e)||/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("trident")>=0&&/(rv)(?::| )([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return"safari"===t?"undefined"!=typeof i[3]&&"safari"===i[3]:"version"===t?i[2]:"webkit"===t?"chrome"===i[1]||"opr"===i[1]||"webkit"===i[1]:"rv"===i[1]?"msie"===t:"opr"===i[1]?"webkit"===t:t===i[1]}},e}),i("Redactor",["require","jquery","jquery-redactor-shim","options","modules/alignment","modules/block","modules/buffer","modules/build","modules/button","modules/caret","modules/clean","modules/code","modules/codeMirror","modules/core","modules/dropdown","modules/embed","modules/file","modules/focus","modules/fontcolor","modules/fontfamily","modules/fontsize","modules/fs","modules/fullscreen","modules/image","modules/indent","modules/inline","modules/insert","modules/keydown","modules/keyup","modules/lang","modules/line","modules/link","modules/linkify","modules/list","modules/media","modules/modal","modules/observe","modules/paragraphize","modules/paste","modules/placeholder","modules/progress","modules/resize","modules/selection","modules/shortcuts","modules/styles","modules/tabifier","modules/table","modules/textdirection","modules/tidy","modules/toolbar","modules/upload","modules/utils"],function(t){"use strict";function e(t,e){var s=this;this.beforeInit(e).always(function(e){if(s.$element=i(t),s.uuid=n++,s.rtePaste=!1,s.$pasteBox=!1,s.loadOptions(e),s.loadModules(s.modules),isNaN(s.opts.indentValue)&&(s.opts.indentValue=parseFloat(i(document.body).css("font-size"))),s.opts&&s.opts.codeOnly&&(s.opts.visual=!1),s.formatting={},i.merge(s.opts.blockLevelElements,s.opts.alignmentTags),s.reIsBlock=new RegExp("^("+s.opts.blockLevelElements.join("|")+")$","i"),s.reIsInline=new RegExp("^("+s.opts.inlineTags.join("|")+")$","i"),s.tidy.setupAllowed(),s.opts.deniedTags!==!1)for(var o=["html","head","link","body","meta","applet"],r=0;r<o.length;r++)s.opts.deniedTags.push(o[r]);s.lang.load(),i.extend(s.opts.shortcuts,s.opts.shortcutsAdd),s.core.setCallback("start"),s.start=!0,s.build.run(),s.fs.init(),s.fs.hidePluginButtons(),s.$element.on("modalOpened.redactor-api",s.fs.modalIframeBrowseInit),s.$element.on("dropdownShown.redactor-api",s.fs.dropdownShow),s.$element.on("sync.redactor-api",s.fs.sync)})}var i=t("jquery"),n=0;return t("jquery-redactor-shim"),Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var e=Array.prototype.slice.call(arguments,1),i=this,n=function(){},s=function(){return i.apply(this instanceof n?this:t,e.concat(Array.prototype.slice.call(arguments)))};return n.prototype=this.prototype,s.prototype=new n,s}),i.fn.redactor=function(t){var n=[],s=Array.prototype.slice.call(arguments,1);return"string"==typeof t?this.each(function(){var e,o=i.data(this,"redactor");if(t.search(/\./)!==-1?(e=t.split("."),"undefined"!=typeof o[e[0]]&&(e=o[e[0]][e[1]])):e=o[t],"undefined"!=typeof o&&i.isFunction(e)){var r=e.apply(o,s);void 0!==r&&r!==o&&n.push(r)}else i.error('No such method "'+t+'" for Redactor')}):this.each(function(){i.data(this,"redactor",{}),i.data(this,"redactor",new e(this,t))}),0===n.length?this:1===n.length?n[0]:n},window.hasRedactor=!0,window.Redactor=e.prototype={version:"1.1.3",keyCode:{BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,SPACE:32,ESC:27,TAB:9,CTRL:17,META:91,SHIFT:16,ALT:18,RIGHT:39,LEFT:37,LEFT_WIN:91},opts:t("options"),modules:["alignment","block","buffer","build","button","caret","clean","code","codeMirror","core","dropdown","embed","file","focus","fs","fontcolor","fontfamily","fontsize","fullscreen","image","indent","inline","insert","keydown","keyup","lang","line","link","linkify","list","media","modal","observe","paragraphize","paste","placeholder","progress","resize","selection","shortcuts","styles","tabifier","table","textdirection","tidy","toolbar","upload","utils"],loadOptions:function(t){this.opts=i.extend({},i.extend(!0,{},this.opts),this.$element.data(),t)},beforeInit:function(t){var e=i.Deferred();return e.resolve(t),e},getModuleMethods:function(t){return Object.getOwnPropertyNames(Object.getPrototypeOf(t)).filter(function(e){return"function"==typeof t[e]})},loadModules:function(t){for(var e=t.length,i=0;i<e;i++)this.bindModuleMethods(t[i])},bindModuleMethods:function(t){if("undefined"!=typeof this[t]){this[t]=new this[t];for(var e=this.getModuleMethods(this[t]),i=e.length,n=0;n<i;n++)this[t][e[n]]=this[t][e[n]].bind(this)}},alignment:t("modules/alignment"),block:t("modules/block"),buffer:t("modules/buffer"),build:t("modules/build"),button:t("modules/button"),caret:t("modules/caret"),clean:t("modules/clean"),code:t("modules/code"),codeMirror:t("modules/codeMirror"),core:t("modules/core"),dropdown:t("modules/dropdown"),embed:t("modules/embed"),file:t("modules/file"),focus:t("modules/focus"),fontcolor:t("modules/fontcolor"),fontfamily:t("modules/fontfamily"),fontsize:t("modules/fontsize"),fs:t("modules/fs"),fullscreen:t("modules/fullscreen"),image:t("modules/image"),indent:t("modules/indent"),inline:t("modules/inline"),insert:t("modules/insert"),keydown:t("modules/keydown"),keyup:t("modules/keyup"),lang:t("modules/lang"),line:t("modules/line"),link:t("modules/link"),linkify:t("modules/linkify"),list:t("modules/list"),media:t("modules/media"),modal:t("modules/modal"),observe:t("modules/observe"),paragraphize:t("modules/paragraphize"),paste:t("modules/paste"),placeholder:t("modules/placeholder"),progress:t("modules/progress"),resize:t("modules/resize"),selection:t("modules/selection"),shortcuts:t("modules/shortcuts"),styles:t("modules/styles"),tabifier:t("modules/tabifier"),table:t("modules/table"),textdirection:t("modules/textdirection"),tidy:t("modules/tidy"),toolbar:t("modules/toolbar"),upload:t("modules/upload"),utils:t("modules/utils")},e}),e("Redactor")}),function(t,e,i,n){"use strict";function s(t){t.buttonsHide=t.buttonsHide||[];var e={edit_background_color:"backcolor",edit_font_color:"fontcolor",edit_font_face:"fontfamily",edit_font_size:"fontsize",edit_html:"html",edit_images:"image",insert_tables:"table"};return i.each(e,function(e,i){o[e]||t.buttonsHide.push(i)}),t.forceImage&&(t.buttonsHide=n.without(t.buttonsHide,"image")),t}var o;e.prototype.opts=i.extend(e.prototype.opts,{aviaryPopupURL:"/cf_filemanager/imageedit.cfm?mode=editor&file={file}&composer",browseFileURL:"/cf_filemanager/adminfiles.cfm?opener=iframe",browseMediaURL:"/fs/pages/media_picker",browseSiteURL:"/fs/pages/picker",localStylesheet:"styles.cfm",link:{anchorSelector:".fsContentEditable [id], .redactor-editor [id]",mediaTest:/^#media-playlist-link/,siteFileTest:/^(file.cfm|\/?uploaded)/gi,onMediaBrowseReturn:function(t){return t.path="#media-playlist-link",t}},media:{onMediaBrowseReturn:function(t){return t.path="/cf_media/embed.cfm?"+t.flashVars,t}}}),e.prototype.beforeInit=function(e){var n=i.Deferred();return o=o||(window.FSApp?window.FSApp.currentUser.get("rights").editor:void 0),o?n.resolve(s(e)):t.getInternalNS("user").getCurrentUser().always(function(t){o=t.rights?t.rights.editor:{},n.resolve(s(e))}),n.promise()}}(FS,Redactor,jQuery,_),function(t,e,i,n){"use strict";var s={baseFloatZIndex:1e5,baseurl:"/",isComposer:!0,pagePickers:0,stylesSet:"fs_styles:/styles_ckeditor.cfm",toolbar:[{name:"document",items:["fskitchensink","autoFormat","sourceUndo","sourceRedo","Undo","Redo","Bold","Italic","Format","Styles","JustifyGrouped","RemoveFormat","Table","HorizontalRule","fsLink","fsImage","fsmedia","BulletedList","NumberedList","Underline","IndentGrouped","BidiGrouped"]},{name:"styles",items:[]},{name:"otherthings",items:["Blockquote","SpecialChar","PasteCode","Mathjax","Superscript","Subscript","Strike","Abbr"]}]},o={toolbar:[{name:"document",items:["fskitchensink","Undo","Redo"]},{name:"basicstyles",items:["Bold","Italic","Underline","Strike","Abbr"]},{name:"paragraph",items:["NumberedList","BulletedList","IndentGrouped","JustifyGrouped"]},{name:"links",items:["fsLink"]},{name:"styles",items:["Format","Styles"]}]},r={codeOnly:!0,startupMode:"source",toolbar:[{items:["autoFormat","sourceUndo","sourceRedo"],name:"document"}]},a=i.once(function(){var r=r||(e.FSApp?e.FSApp.currentUser.get("rights").editor:void 0),a=n.Deferred(),l=i.findWhere(s.toolbar,{name:"styles"}).items;return r?a.resolve():t.getInternalNS("user").getCurrentUser().done(function(t){r=t.rights?t.rights.editor:{},a.resolve()}).fail(function(){a.reject()}),a.done(function(){r.edit_html&&(i.findWhere(s.toolbar,{name:"document"}).items.unshift("Source"),i.findWhere(o.toolbar,{name:"document"}).items.unshift("Source")),r.edit_font_face&&l.push("Font"),r.edit_font_size&&l.push("FontSize"),r.edit_font_color&&l.push("TextColor"),r.edit_background_color&&l.push("BGColor")}),a.promise()});t.ckeditor={getConfig:function(t){var l=n.Deferred(),c=a();return"basic"==t?t=o:"source"==t&&(t=r),t=i.extend(t||{},{contentsCss:i.without(i.pluck(document.styleSheets,"href"),null),usePickerEvents:t.usePickerEvents||!!e.FSApp}),c.done(function(){l.resolve(i.extend({},s,t))}),l.promise()}}}(FS,window,FS._||_,FS.$||jQuery),function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],t):"undefined"!=typeof exports?module.exports=t(require("jquery")):t(jQuery)}(function(t){"use strict";var e=window.Slick||{};e=function(){function e(e,n){var s,o=this;o.defaults={accessibility:!0,adaptiveHeight:!1,appendArrows:t(e),appendDots:t(e),arrows:!0,asNavFor:null,prevArrow:'<button class="slick-prev" aria-label="Previous" type="button">Previous</button>',nextArrow:'<button class="slick-next" aria-label="Next" type="button">Next</button>',autoplay:!1,autoplaySpeed:3e3,centerMode:!1,centerPadding:"50px",cssEase:"ease",customPaging:function(e,i){return t('<button type="button" />').text(i+1)},dots:!1,dotsClass:"slick-dots",draggable:!0,easing:"linear",edgeFriction:.35,fade:!1,focusOnSelect:!1,focusOnChange:!1,infinite:!0,initialSlide:0,lazyLoad:"ondemand",mobileFirst:!1,pauseOnHover:!0,pauseOnFocus:!0,pauseOnDotsHover:!1,respondTo:"window",responsive:null,rows:1,rtl:!1,slide:"",slidesPerRow:1,slidesToShow:1,slidesToScroll:1,speed:500,swipe:!0,swipeToSlide:!1,touchMove:!0,touchThreshold:5,useCSS:!0,useTransform:!0,variableWidth:!1,vertical:!1,verticalSwiping:!1,waitForAnimate:!0,zIndex:1e3},o.initials={animating:!1,dragging:!1,autoPlayTimer:null,currentDirection:0,currentLeft:null,currentSlide:0,direction:1,$dots:null,listWidth:null,listHeight:null,loadIndex:0,$nextArrow:null,$prevArrow:null,scrolling:!1,slideCount:null,slideWidth:null,$slideTrack:null,$slides:null,sliding:!1,slideOffset:0,swipeLeft:null,swiping:!1,$list:null,touchObject:{},transformsEnabled:!1,unslicked:!1},t.extend(o,o.initials),o.activeBreakpoint=null,o.animType=null,o.animProp=null,o.breakpoints=[],o.breakpointSettings=[],o.cssTransitions=!1,o.focussed=!1,o.interrupted=!1,o.hidden="hidden",o.paused=!0,o.positionProp=null,o.respondTo=null,o.rowCount=1,o.shouldClick=!0,o.$slider=t(e),o.$slidesCache=null,o.transformType=null,o.transitionType=null,o.visibilityChange="visibilitychange",o.windowWidth=0,o.windowTimer=null,s=t(e).data("slick")||{},o.options=t.extend({},o.defaults,n,s),o.currentSlide=o.options.initialSlide,o.originalSettings=o.options,"undefined"!=typeof document.mozHidden?(o.hidden="mozHidden",o.visibilityChange="mozvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(o.hidden="webkitHidden",o.visibilityChange="webkitvisibilitychange"),o.autoPlay=t.proxy(o.autoPlay,o),o.autoPlayClear=t.proxy(o.autoPlayClear,o),o.autoPlayIterator=t.proxy(o.autoPlayIterator,o),o.changeSlide=t.proxy(o.changeSlide,o),o.clickHandler=t.proxy(o.clickHandler,o),o.selectHandler=t.proxy(o.selectHandler,o),
o.setPosition=t.proxy(o.setPosition,o),o.swipeHandler=t.proxy(o.swipeHandler,o),o.dragHandler=t.proxy(o.dragHandler,o),o.keyHandler=t.proxy(o.keyHandler,o),o.instanceUid=i++,o.htmlExpr=/^(?:\s*(<[\w\W]+>)[^>]*)$/,o.registerBreakpoints(),o.init(!0)}var i=0;return e}(),e.prototype.activateADA=function(){var t=this;t.$slideTrack.find(".slick-active").attr({"aria-hidden":"false"}).find("a, input, button, select").attr({tabindex:"0"})},e.prototype.addSlide=e.prototype.slickAdd=function(e,i,n){var s=this;if("boolean"==typeof i)n=i,i=null;else if(i<0||i>=s.slideCount)return!1;s.unload(),"number"==typeof i?0===i&&0===s.$slides.length?t(e).appendTo(s.$slideTrack):n?t(e).insertBefore(s.$slides.eq(i)):t(e).insertAfter(s.$slides.eq(i)):n===!0?t(e).prependTo(s.$slideTrack):t(e).appendTo(s.$slideTrack),s.$slides=s.$slideTrack.children(this.options.slide),s.$slideTrack.children(this.options.slide).detach(),s.$slideTrack.append(s.$slides),s.$slides.each(function(e,i){t(i).attr("data-slick-index",e)}),s.$slidesCache=s.$slides,s.reinit()},e.prototype.animateHeight=function(){var t=this;if(1===t.options.slidesToShow&&t.options.adaptiveHeight===!0&&t.options.vertical===!1){var e=t.$slides.eq(t.currentSlide).outerHeight(!0);t.$list.animate({height:e},t.options.speed)}},e.prototype.animateSlide=function(e,i){var n={},s=this;s.animateHeight(),s.options.rtl===!0&&s.options.vertical===!1&&(e=-e),s.transformsEnabled===!1?s.options.vertical===!1?s.$slideTrack.animate({left:e},s.options.speed,s.options.easing,i):s.$slideTrack.animate({top:e},s.options.speed,s.options.easing,i):s.cssTransitions===!1?(s.options.rtl===!0&&(s.currentLeft=-s.currentLeft),t({animStart:s.currentLeft}).animate({animStart:e},{duration:s.options.speed,easing:s.options.easing,step:function(t){t=Math.ceil(t),s.options.vertical===!1?(n[s.animType]="translate("+t+"px, 0px)",s.$slideTrack.css(n)):(n[s.animType]="translate(0px,"+t+"px)",s.$slideTrack.css(n))},complete:function(){i&&i.call()}})):(s.applyTransition(),e=Math.ceil(e),s.options.vertical===!1?n[s.animType]="translate3d("+e+"px, 0px, 0px)":n[s.animType]="translate3d(0px,"+e+"px, 0px)",s.$slideTrack.css(n),i&&setTimeout(function(){s.disableTransition(),i.call()},s.options.speed))},e.prototype.getNavTarget=function(){var e=this,i=e.options.asNavFor;return i&&null!==i&&(i=t(i).not(e.$slider)),i},e.prototype.asNavFor=function(e){var i=this,n=i.getNavTarget();null!==n&&"object"==typeof n&&n.each(function(){var i=t(this).slick("getSlick");i.unslicked||i.slideHandler(e,!0)})},e.prototype.applyTransition=function(t){var e=this,i={};e.options.fade===!1?i[e.transitionType]=e.transformType+" "+e.options.speed+"ms "+e.options.cssEase:i[e.transitionType]="opacity "+e.options.speed+"ms "+e.options.cssEase,e.options.fade===!1?e.$slideTrack.css(i):e.$slides.eq(t).css(i)},e.prototype.autoPlay=function(){var t=this;t.autoPlayClear(),t.slideCount>t.options.slidesToShow&&(t.autoPlayTimer=setInterval(t.autoPlayIterator,t.options.autoplaySpeed))},e.prototype.autoPlayClear=function(){var t=this;t.autoPlayTimer&&clearInterval(t.autoPlayTimer)},e.prototype.autoPlayIterator=function(){var t=this,e=t.currentSlide+t.options.slidesToScroll;t.paused||t.interrupted||t.focussed||(t.options.infinite===!1&&(1===t.direction&&t.currentSlide+1===t.slideCount-1?t.direction=0:0===t.direction&&(e=t.currentSlide-t.options.slidesToScroll,t.currentSlide-1===0&&(t.direction=1))),t.slideHandler(e))},e.prototype.buildArrows=function(){var e=this;e.options.arrows===!0&&(e.$prevArrow=t(e.options.prevArrow).addClass("slick-arrow"),e.$nextArrow=t(e.options.nextArrow).addClass("slick-arrow"),e.slideCount>e.options.slidesToShow?(e.$prevArrow.removeClass("slick-hidden").removeAttr("aria-hidden tabindex"),e.$nextArrow.removeClass("slick-hidden").removeAttr("aria-hidden tabindex"),e.htmlExpr.test(e.options.prevArrow)&&e.$prevArrow.prependTo(e.options.appendArrows),e.htmlExpr.test(e.options.nextArrow)&&e.$nextArrow.appendTo(e.options.appendArrows),e.options.infinite!==!0&&e.$prevArrow.addClass("slick-disabled").attr("aria-disabled","true")):e.$prevArrow.add(e.$nextArrow).addClass("slick-hidden").attr({"aria-disabled":"true",tabindex:"-1"}))},e.prototype.buildDots=function(){var e,i,n=this;if(n.options.dots===!0){for(n.$slider.addClass("slick-dotted"),i=t("<ul />").addClass(n.options.dotsClass),e=0;e<=n.getDotCount();e+=1)i.append(t("<li />").append(n.options.customPaging.call(this,n,e)));n.$dots=i.appendTo(n.options.appendDots),n.$dots.find("li").first().addClass("slick-active")}},e.prototype.buildOut=function(){var e=this;e.$slides=e.$slider.children(e.options.slide+":not(.slick-cloned)").addClass("slick-slide"),e.slideCount=e.$slides.length,e.$slides.each(function(e,i){t(i).attr("data-slick-index",e).data("originalStyling",t(i).attr("style")||"")}),e.$slider.addClass("slick-slider"),e.$slideTrack=0===e.slideCount?t('<div class="slick-track"/>').appendTo(e.$slider):e.$slides.wrapAll('<div class="slick-track"/>').parent(),e.$list=e.$slideTrack.wrap('<div class="slick-list"/>').parent(),e.$slideTrack.css("opacity",0),e.options.centerMode!==!0&&e.options.swipeToSlide!==!0||(e.options.slidesToScroll=1),t("img[data-lazy]",e.$slider).not("[src]").addClass("slick-loading"),e.setupInfinite(),e.buildArrows(),e.buildDots(),e.updateDots(),e.setSlideClasses("number"==typeof e.currentSlide?e.currentSlide:0),e.options.draggable===!0&&e.$list.addClass("draggable")},e.prototype.buildRows=function(){var t,e,i,n,s,o,r,a=this;if(n=document.createDocumentFragment(),o=a.$slider.children(),a.options.rows>1){for(r=a.options.slidesPerRow*a.options.rows,s=Math.ceil(o.length/r),t=0;t<s;t++){var l=document.createElement("div");for(e=0;e<a.options.rows;e++){var c=document.createElement("div");for(i=0;i<a.options.slidesPerRow;i++){var d=t*r+(e*a.options.slidesPerRow+i);o.get(d)&&c.appendChild(o.get(d))}l.appendChild(c)}n.appendChild(l)}a.$slider.empty().append(n),a.$slider.children().children().children().css({width:100/a.options.slidesPerRow+"%",display:"inline-block"})}},e.prototype.checkResponsive=function(e,i){var n,s,o,r=this,a=!1,l=r.$slider.width(),c=window.innerWidth||t(window).width();if("window"===r.respondTo?o=c:"slider"===r.respondTo?o=l:"min"===r.respondTo&&(o=Math.min(c,l)),r.options.responsive&&r.options.responsive.length&&null!==r.options.responsive){s=null;for(n in r.breakpoints)r.breakpoints.hasOwnProperty(n)&&(r.originalSettings.mobileFirst===!1?o<r.breakpoints[n]&&(s=r.breakpoints[n]):o>r.breakpoints[n]&&(s=r.breakpoints[n]));null!==s?null!==r.activeBreakpoint?(s!==r.activeBreakpoint||i)&&(r.activeBreakpoint=s,"unslick"===r.breakpointSettings[s]?r.unslick(s):(r.options=t.extend({},r.originalSettings,r.breakpointSettings[s]),e===!0&&(r.currentSlide=r.options.initialSlide),r.refresh(e)),a=s):(r.activeBreakpoint=s,"unslick"===r.breakpointSettings[s]?r.unslick(s):(r.options=t.extend({},r.originalSettings,r.breakpointSettings[s]),e===!0&&(r.currentSlide=r.options.initialSlide),r.refresh(e)),a=s):null!==r.activeBreakpoint&&(r.activeBreakpoint=null,r.options=r.originalSettings,e===!0&&(r.currentSlide=r.options.initialSlide),r.refresh(e),a=s),e||a===!1||r.$slider.trigger("breakpoint",[r,a])}},e.prototype.changeSlide=function(e,i){var n,s,o,r=this,a=t(e.currentTarget);switch(a.is("a")&&e.preventDefault(),a.is("li")||(a=a.closest("li")),o=r.slideCount%r.options.slidesToScroll!==0,n=o?0:(r.slideCount-r.currentSlide)%r.options.slidesToScroll,e.data.message){case"previous":s=0===n?r.options.slidesToScroll:r.options.slidesToShow-n,r.slideCount>r.options.slidesToShow&&r.slideHandler(r.currentSlide-s,!1,i);break;case"next":s=0===n?r.options.slidesToScroll:n,r.slideCount>r.options.slidesToShow&&r.slideHandler(r.currentSlide+s,!1,i);break;case"index":var l=0===e.data.index?0:e.data.index||a.index()*r.options.slidesToScroll;r.slideHandler(r.checkNavigable(l),!1,i),a.children().trigger("focus");break;default:return}},e.prototype.checkNavigable=function(t){var e,i,n=this;if(e=n.getNavigableIndexes(),i=0,t>e[e.length-1])t=e[e.length-1];else for(var s in e){if(t<e[s]){t=i;break}i=e[s]}return t},e.prototype.cleanUpEvents=function(){var e=this;e.options.dots&&null!==e.$dots&&(t("li",e.$dots).off("click.slick",e.changeSlide).off("mouseenter.slick",t.proxy(e.interrupt,e,!0)).off("mouseleave.slick",t.proxy(e.interrupt,e,!1)),e.options.accessibility===!0&&e.$dots.off("keydown.slick",e.keyHandler)),e.$slider.off("focus.slick blur.slick"),e.options.arrows===!0&&e.slideCount>e.options.slidesToShow&&(e.$prevArrow&&e.$prevArrow.off("click.slick",e.changeSlide),e.$nextArrow&&e.$nextArrow.off("click.slick",e.changeSlide),e.options.accessibility===!0&&(e.$prevArrow&&e.$prevArrow.off("keydown.slick",e.keyHandler),e.$nextArrow&&e.$nextArrow.off("keydown.slick",e.keyHandler))),e.$list.off("touchstart.slick mousedown.slick",e.swipeHandler),e.$list.off("touchmove.slick mousemove.slick",e.swipeHandler),e.$list.off("touchend.slick mouseup.slick",e.swipeHandler),e.$list.off("touchcancel.slick mouseleave.slick",e.swipeHandler),e.$list.off("click.slick",e.clickHandler),t(document).off(e.visibilityChange,e.visibility),e.cleanUpSlideEvents(),e.options.accessibility===!0&&e.$list.off("keydown.slick",e.keyHandler),e.options.focusOnSelect===!0&&t(e.$slideTrack).children().off("click.slick",e.selectHandler),t(window).off("orientationchange.slick.slick-"+e.instanceUid,e.orientationChange),t(window).off("resize.slick.slick-"+e.instanceUid,e.resize),t("[draggable!=true]",e.$slideTrack).off("dragstart",e.preventDefault),t(window).off("load.slick.slick-"+e.instanceUid,e.setPosition)},e.prototype.cleanUpSlideEvents=function(){var e=this;e.$list.off("mouseenter.slick",t.proxy(e.interrupt,e,!0)),e.$list.off("mouseleave.slick",t.proxy(e.interrupt,e,!1))},e.prototype.cleanUpRows=function(){var t,e=this;e.options.rows>1&&(t=e.$slides.children().children(),t.removeAttr("style"),e.$slider.empty().append(t))},e.prototype.clickHandler=function(t){var e=this;e.shouldClick===!1&&(t.stopImmediatePropagation(),t.stopPropagation(),t.preventDefault())},e.prototype.destroy=function(e){var i=this;i.autoPlayClear(),i.touchObject={},i.cleanUpEvents(),t(".slick-cloned",i.$slider).detach(),i.$dots&&i.$dots.remove(),i.$prevArrow&&i.$prevArrow.length&&(i.$prevArrow.removeClass("slick-disabled slick-arrow slick-hidden").removeAttr("aria-hidden aria-disabled tabindex").css("display",""),i.htmlExpr.test(i.options.prevArrow)&&i.$prevArrow.remove()),i.$nextArrow&&i.$nextArrow.length&&(i.$nextArrow.removeClass("slick-disabled slick-arrow slick-hidden").removeAttr("aria-hidden aria-disabled tabindex").css("display",""),i.htmlExpr.test(i.options.nextArrow)&&i.$nextArrow.remove()),i.$slides&&(i.$slides.removeClass("slick-slide slick-active slick-center slick-visible slick-current").removeAttr("aria-hidden").removeAttr("data-slick-index").each(function(){t(this).attr("style",t(this).data("originalStyling"))}),i.$slideTrack.children(this.options.slide).detach(),i.$slideTrack.detach(),i.$list.detach(),i.$slider.append(i.$slides)),i.cleanUpRows(),i.$slider.removeClass("slick-slider"),i.$slider.removeClass("slick-initialized"),i.$slider.removeClass("slick-dotted"),i.unslicked=!0,e||i.$slider.trigger("destroy",[i])},e.prototype.disableTransition=function(t){var e=this,i={};i[e.transitionType]="",e.options.fade===!1?e.$slideTrack.css(i):e.$slides.eq(t).css(i)},e.prototype.fadeSlide=function(t,e){var i=this;i.cssTransitions===!1?(i.$slides.eq(t).css({zIndex:i.options.zIndex}),i.$slides.eq(t).animate({opacity:1},i.options.speed,i.options.easing,e)):(i.applyTransition(t),i.$slides.eq(t).css({opacity:1,zIndex:i.options.zIndex}),e&&setTimeout(function(){i.disableTransition(t),e.call()},i.options.speed))},e.prototype.fadeSlideOut=function(t){var e=this;e.cssTransitions===!1?e.$slides.eq(t).animate({opacity:0,zIndex:e.options.zIndex-2},e.options.speed,e.options.easing):(e.applyTransition(t),e.$slides.eq(t).css({opacity:0,zIndex:e.options.zIndex-2}))},e.prototype.filterSlides=e.prototype.slickFilter=function(t){var e=this;null!==t&&(e.$slidesCache=e.$slides,e.unload(),e.$slideTrack.children(this.options.slide).detach(),e.$slidesCache.filter(t).appendTo(e.$slideTrack),e.reinit())},e.prototype.focusHandler=function(){var e=this;e.$slider.off("focus.slick blur.slick").on("focus.slick blur.slick","*",function(i){i.stopImmediatePropagation();var n=t(this);setTimeout(function(){e.options.pauseOnFocus&&(e.focussed=n.is(":focus"),e.autoPlay())},0)})},e.prototype.getCurrent=e.prototype.slickCurrentSlide=function(){var t=this;return t.currentSlide},e.prototype.getDotCount=function(){var t=this,e=0,i=0,n=0;if(t.options.infinite===!0)if(t.slideCount<=t.options.slidesToShow)++n;else for(;e<t.slideCount;)++n,e=i+t.options.slidesToScroll,i+=t.options.slidesToScroll<=t.options.slidesToShow?t.options.slidesToScroll:t.options.slidesToShow;else if(t.options.centerMode===!0)n=t.slideCount;else if(t.options.asNavFor)for(;e<t.slideCount;)++n,e=i+t.options.slidesToScroll,i+=t.options.slidesToScroll<=t.options.slidesToShow?t.options.slidesToScroll:t.options.slidesToShow;else n=1+Math.ceil((t.slideCount-t.options.slidesToShow)/t.options.slidesToScroll);return n-1},e.prototype.getLeft=function(t){var e,i,n,s,o=this,r=0;return o.slideOffset=0,i=o.$slides.first().outerHeight(!0),o.options.infinite===!0?(o.slideCount>o.options.slidesToShow&&(o.slideOffset=o.slideWidth*o.options.slidesToShow*-1,s=-1,o.options.vertical===!0&&o.options.centerMode===!0&&(2===o.options.slidesToShow?s=-1.5:1===o.options.slidesToShow&&(s=-2)),r=i*o.options.slidesToShow*s),o.slideCount%o.options.slidesToScroll!==0&&t+o.options.slidesToScroll>o.slideCount&&o.slideCount>o.options.slidesToShow&&(t>o.slideCount?(o.slideOffset=(o.options.slidesToShow-(t-o.slideCount))*o.slideWidth*-1,r=(o.options.slidesToShow-(t-o.slideCount))*i*-1):(o.slideOffset=o.slideCount%o.options.slidesToScroll*o.slideWidth*-1,r=o.slideCount%o.options.slidesToScroll*i*-1))):t+o.options.slidesToShow>o.slideCount&&(o.slideOffset=(t+o.options.slidesToShow-o.slideCount)*o.slideWidth,r=(t+o.options.slidesToShow-o.slideCount)*i),o.slideCount<=o.options.slidesToShow&&(o.slideOffset=0,r=0),o.options.centerMode===!0&&o.slideCount<=o.options.slidesToShow?o.slideOffset=o.slideWidth*Math.floor(o.options.slidesToShow)/2-o.slideWidth*o.slideCount/2:o.options.centerMode===!0&&o.options.infinite===!0?o.slideOffset+=o.slideWidth*Math.floor(o.options.slidesToShow/2)-o.slideWidth:o.options.centerMode===!0&&(o.slideOffset=0,o.slideOffset+=o.slideWidth*Math.floor(o.options.slidesToShow/2)),e=o.options.vertical===!1?t*o.slideWidth*-1+o.slideOffset:t*i*-1+r,o.options.variableWidth===!0&&(n=o.slideCount<=o.options.slidesToShow||o.options.infinite===!1?o.$slideTrack.children(".slick-slide").eq(t):o.$slideTrack.children(".slick-slide").eq(t+o.options.slidesToShow),e=o.options.rtl===!0?n[0]?(o.$slideTrack.width()-n[0].offsetLeft-n.width())*-1:0:n[0]?n[0].offsetLeft*-1:0,o.options.centerMode===!0&&(n=o.slideCount<=o.options.slidesToShow||o.options.infinite===!1?o.$slideTrack.children(".slick-slide").eq(t):o.$slideTrack.children(".slick-slide").eq(t+o.options.slidesToShow+1),e=o.options.rtl===!0?n[0]?(o.$slideTrack.width()-n[0].offsetLeft-n.width())*-1:0:n[0]?n[0].offsetLeft*-1:0,e+=(o.$list.width()-n.outerWidth())/2)),e},e.prototype.getOption=e.prototype.slickGetOption=function(t){var e=this;return e.options[t]},e.prototype.getNavigableIndexes=function(){var t,e=this,i=0,n=0,s=[];for(e.options.infinite===!1?t=e.slideCount:(i=e.options.slidesToScroll*-1,n=e.options.slidesToScroll*-1,t=2*e.slideCount);i<t;)s.push(i),i=n+e.options.slidesToScroll,n+=e.options.slidesToScroll<=e.options.slidesToShow?e.options.slidesToScroll:e.options.slidesToShow;return s},e.prototype.getSlick=function(){return this},e.prototype.getSlideCount=function(){var e,i,n,s=this;return n=s.options.centerMode===!0?s.slideWidth*Math.floor(s.options.slidesToShow/2):0,s.options.swipeToSlide===!0?(s.$slideTrack.find(".slick-slide").each(function(e,o){if(o.offsetLeft-n+t(o).outerWidth()/2>s.swipeLeft*-1)return i=o,!1}),e=Math.abs(t(i).attr("data-slick-index")-s.currentSlide)||1):s.options.slidesToScroll},e.prototype.goTo=e.prototype.slickGoTo=function(t,e){var i=this;i.changeSlide({data:{message:"index",index:parseInt(t)}},e)},e.prototype.init=function(e){var i=this;t(i.$slider).hasClass("slick-initialized")||(t(i.$slider).addClass("slick-initialized"),i.buildRows(),i.buildOut(),i.setProps(),i.startLoad(),i.loadSlider(),i.initializeEvents(),i.updateArrows(),i.updateDots(),i.checkResponsive(!0),i.focusHandler()),e&&i.$slider.trigger("init",[i]),i.options.accessibility===!0&&i.initADA(),i.options.autoplay&&(i.paused=!1,i.autoPlay())},e.prototype.initADA=function(){var e=this,i=Math.ceil(e.slideCount/e.options.slidesToShow),n=e.getNavigableIndexes().filter(function(t){return t>=0&&t<e.slideCount});e.$slides.add(e.$slideTrack.find(".slick-cloned")).attr({"aria-hidden":"true",tabindex:"-1"}).find("a, input, button, select").attr({tabindex:"-1"}),null!==e.$dots&&(e.$slides.not(e.$slideTrack.find(".slick-cloned")).each(function(i){var s=n.indexOf(i);t(this).attr({role:"tabpanel",id:"slick-slide"+e.instanceUid+i,tabindex:-1}),s!==-1&&t(this).attr({"aria-describedby":"slick-slide-control"+e.instanceUid+s})}),e.$dots.attr("role","tablist").find("li").each(function(s){var o=n[s];t(this).attr({role:"presentation"}),t(this).find("button").first().attr({role:"tab",id:"slick-slide-control"+e.instanceUid+s,"aria-controls":"slick-slide"+e.instanceUid+o,"aria-label":s+1+" of "+i,"aria-selected":null,tabindex:"-1"})}).eq(e.currentSlide).find("button").attr({"aria-selected":"true",tabindex:"0"}).end());for(var s=e.currentSlide,o=s+e.options.slidesToShow;s<o;s++)e.$slides.eq(s).attr("tabindex",0);e.activateADA()},e.prototype.initArrowEvents=function(){var t=this;t.options.arrows===!0&&t.slideCount>t.options.slidesToShow&&(t.$prevArrow.off("click.slick").on("click.slick",{message:"previous"},t.changeSlide),t.$nextArrow.off("click.slick").on("click.slick",{message:"next"},t.changeSlide),t.options.accessibility===!0&&(t.$prevArrow.on("keydown.slick",t.keyHandler),t.$nextArrow.on("keydown.slick",t.keyHandler)))},e.prototype.initDotEvents=function(){var e=this;e.options.dots===!0&&(t("li",e.$dots).on("click.slick",{message:"index"},e.changeSlide),e.options.accessibility===!0&&e.$dots.on("keydown.slick",e.keyHandler)),e.options.dots===!0&&e.options.pauseOnDotsHover===!0&&t("li",e.$dots).on("mouseenter.slick",t.proxy(e.interrupt,e,!0)).on("mouseleave.slick",t.proxy(e.interrupt,e,!1))},e.prototype.initSlideEvents=function(){var e=this;e.options.pauseOnHover&&(e.$list.on("mouseenter.slick",t.proxy(e.interrupt,e,!0)),e.$list.on("mouseleave.slick",t.proxy(e.interrupt,e,!1)))},e.prototype.initializeEvents=function(){var e=this;e.initArrowEvents(),e.initDotEvents(),e.initSlideEvents(),e.$list.on("touchstart.slick mousedown.slick",{action:"start"},e.swipeHandler),e.$list.on("touchmove.slick mousemove.slick",{action:"move"},e.swipeHandler),e.$list.on("touchend.slick mouseup.slick",{action:"end"},e.swipeHandler),e.$list.on("touchcancel.slick mouseleave.slick",{action:"end"},e.swipeHandler),e.$list.on("click.slick",e.clickHandler),t(document).on(e.visibilityChange,t.proxy(e.visibility,e)),e.options.accessibility===!0&&e.$list.on("keydown.slick",e.keyHandler),e.options.focusOnSelect===!0&&t(e.$slideTrack).children().on("click.slick",e.selectHandler),t(window).on("orientationchange.slick.slick-"+e.instanceUid,t.proxy(e.orientationChange,e)),t(window).on("resize.slick.slick-"+e.instanceUid,t.proxy(e.resize,e)),t("[draggable!=true]",e.$slideTrack).on("dragstart",e.preventDefault),t(window).on("load.slick.slick-"+e.instanceUid,e.setPosition),t(e.setPosition)},e.prototype.initUI=function(){var t=this;t.options.arrows===!0&&t.slideCount>t.options.slidesToShow&&(t.$prevArrow.show(),t.$nextArrow.show()),t.options.dots===!0&&t.slideCount>t.options.slidesToShow&&t.$dots.show()},e.prototype.keyHandler=function(t){var e=this;t.target.tagName.match("TEXTAREA|INPUT|SELECT")||(37===t.keyCode&&e.options.accessibility===!0?e.changeSlide({data:{message:e.options.rtl===!0?"next":"previous"}}):39===t.keyCode&&e.options.accessibility===!0&&e.changeSlide({data:{message:e.options.rtl===!0?"previous":"next"}}))},e.prototype.lazyLoad=function(){function e(e){t("img[data-lazy]",e).each(function(){var e=t(this),i=t(this).attr("data-lazy"),n=t(this).attr("data-srcset"),s=t(this).attr("data-sizes")||r.$slider.attr("data-sizes"),o=document.createElement("img");o.onload=function(){e.animate({opacity:0},100,function(){n&&(e.attr("srcset",n),s&&e.attr("sizes",s)),e.attr("src",i).animate({opacity:1},200,function(){e.removeAttr("data-lazy data-srcset data-sizes").removeClass("slick-loading")}),r.$slider.trigger("lazyLoaded",[r,e,i])})},o.onerror=function(){e.removeAttr("data-lazy").removeClass("slick-loading").addClass("slick-lazyload-error"),r.$slider.trigger("lazyLoadError",[r,e,i])},o.src=i})}var i,n,s,o,r=this;if(r.options.centerMode===!0?r.options.infinite===!0?(s=r.currentSlide+(r.options.slidesToShow/2+1),o=s+r.options.slidesToShow+2):(s=Math.max(0,r.currentSlide-(r.options.slidesToShow/2+1)),o=2+(r.options.slidesToShow/2+1)+r.currentSlide):(s=r.options.infinite?r.options.slidesToShow+r.currentSlide:r.currentSlide,o=Math.ceil(s+r.options.slidesToShow),r.options.fade===!0&&(s>0&&s--,o<=r.slideCount&&o++)),i=r.$slider.find(".slick-slide").slice(s,o),"anticipated"===r.options.lazyLoad)for(var a=s-1,l=o,c=r.$slider.find(".slick-slide"),d=0;d<r.options.slidesToScroll;d++)a<0&&(a=r.slideCount-1),i=i.add(c.eq(a)),i=i.add(c.eq(l)),a--,l++;e(i),r.slideCount<=r.options.slidesToShow?(n=r.$slider.find(".slick-slide"),e(n)):r.currentSlide>=r.slideCount-r.options.slidesToShow?(n=r.$slider.find(".slick-cloned").slice(0,r.options.slidesToShow),e(n)):0===r.currentSlide&&(n=r.$slider.find(".slick-cloned").slice(r.options.slidesToShow*-1),e(n))},e.prototype.loadSlider=function(){var t=this;t.setPosition(),t.$slideTrack.css({opacity:1}),t.$slider.removeClass("slick-loading"),t.initUI(),"progressive"===t.options.lazyLoad&&t.progressiveLazyLoad()},e.prototype.next=e.prototype.slickNext=function(){var t=this;t.changeSlide({data:{message:"next"}})},e.prototype.orientationChange=function(){var t=this;t.checkResponsive(),t.setPosition()},e.prototype.pause=e.prototype.slickPause=function(){var t=this;t.autoPlayClear(),t.paused=!0},e.prototype.play=e.prototype.slickPlay=function(){var t=this;t.autoPlay(),t.options.autoplay=!0,t.paused=!1,t.focussed=!1,t.interrupted=!1},e.prototype.postSlide=function(e){var i=this;if(!i.unslicked&&(i.$slider.trigger("afterChange",[i,e]),i.animating=!1,i.slideCount>i.options.slidesToShow&&i.setPosition(),i.swipeLeft=null,i.options.autoplay&&i.autoPlay(),i.options.accessibility===!0&&(i.initADA(),i.options.focusOnChange))){var n=t(i.$slides.get(i.currentSlide));n.attr("tabindex",0).focus()}},e.prototype.prev=e.prototype.slickPrev=function(){var t=this;t.changeSlide({data:{message:"previous"}})},e.prototype.preventDefault=function(t){t.preventDefault()},e.prototype.progressiveLazyLoad=function(e){e=e||1;var i,n,s,o,r,a=this,l=t("img[data-lazy]",a.$slider);l.length?(i=l.first(),n=i.attr("data-lazy"),s=i.attr("data-srcset"),o=i.attr("data-sizes")||a.$slider.attr("data-sizes"),r=document.createElement("img"),r.onload=function(){s&&(i.attr("srcset",s),o&&i.attr("sizes",o)),i.attr("src",n).removeAttr("data-lazy data-srcset data-sizes").removeClass("slick-loading"),a.options.adaptiveHeight===!0&&a.setPosition(),a.$slider.trigger("lazyLoaded",[a,i,n]),a.progressiveLazyLoad()},r.onerror=function(){e<3?setTimeout(function(){a.progressiveLazyLoad(e+1)},500):(i.removeAttr("data-lazy").removeClass("slick-loading").addClass("slick-lazyload-error"),a.$slider.trigger("lazyLoadError",[a,i,n]),a.progressiveLazyLoad())},r.src=n):a.$slider.trigger("allImagesLoaded",[a])},e.prototype.refresh=function(e){var i,n,s=this;n=s.slideCount-s.options.slidesToShow,!s.options.infinite&&s.currentSlide>n&&(s.currentSlide=n),s.slideCount<=s.options.slidesToShow&&(s.currentSlide=0),i=s.currentSlide,s.destroy(!0),t.extend(s,s.initials,{currentSlide:i}),s.init(),e||s.changeSlide({data:{message:"index",index:i}},!1)},e.prototype.registerBreakpoints=function(){var e,i,n,s=this,o=s.options.responsive||null;if("array"===t.type(o)&&o.length){s.respondTo=s.options.respondTo||"window";for(e in o)if(n=s.breakpoints.length-1,o.hasOwnProperty(e)){for(i=o[e].breakpoint;n>=0;)s.breakpoints[n]&&s.breakpoints[n]===i&&s.breakpoints.splice(n,1),n--;s.breakpoints.push(i),s.breakpointSettings[i]=o[e].settings}s.breakpoints.sort(function(t,e){return s.options.mobileFirst?t-e:e-t})}},e.prototype.reinit=function(){var e=this;e.$slides=e.$slideTrack.children(e.options.slide).addClass("slick-slide"),e.slideCount=e.$slides.length,e.currentSlide>=e.slideCount&&0!==e.currentSlide&&(e.currentSlide=e.currentSlide-e.options.slidesToScroll),e.slideCount<=e.options.slidesToShow&&(e.currentSlide=0),e.registerBreakpoints(),e.setProps(),e.setupInfinite(),e.buildArrows(),e.updateArrows(),e.initArrowEvents(),e.buildDots(),e.updateDots(),e.initDotEvents(),e.cleanUpSlideEvents(),e.initSlideEvents(),e.checkResponsive(!1,!0),e.options.focusOnSelect===!0&&t(e.$slideTrack).children().on("click.slick",e.selectHandler),e.setSlideClasses("number"==typeof e.currentSlide?e.currentSlide:0),e.setPosition(),e.focusHandler(),e.paused=!e.options.autoplay,e.autoPlay(),e.$slider.trigger("reInit",[e])},e.prototype.resize=function(){var e=this;t(window).width()!==e.windowWidth&&(clearTimeout(e.windowDelay),e.windowDelay=window.setTimeout(function(){e.windowWidth=t(window).width(),e.checkResponsive(),e.unslicked||e.setPosition()},50))},e.prototype.removeSlide=e.prototype.slickRemove=function(t,e,i){var n=this;return"boolean"==typeof t?(e=t,t=e===!0?0:n.slideCount-1):t=e===!0?--t:t,!(n.slideCount<1||t<0||t>n.slideCount-1)&&(n.unload(),i===!0?n.$slideTrack.children().remove():n.$slideTrack.children(this.options.slide).eq(t).remove(),n.$slides=n.$slideTrack.children(this.options.slide),n.$slideTrack.children(this.options.slide).detach(),n.$slideTrack.append(n.$slides),n.$slidesCache=n.$slides,void n.reinit())},e.prototype.setCSS=function(t){var e,i,n=this,s={};n.options.rtl===!0&&(t=-t),e="left"==n.positionProp?Math.ceil(t)+"px":"0px",i="top"==n.positionProp?Math.ceil(t)+"px":"0px",s[n.positionProp]=t,n.transformsEnabled===!1?n.$slideTrack.css(s):(s={},n.cssTransitions===!1?(s[n.animType]="translate("+e+", "+i+")",n.$slideTrack.css(s)):(s[n.animType]="translate3d("+e+", "+i+", 0px)",n.$slideTrack.css(s)))},e.prototype.setDimensions=function(){var t=this;t.options.vertical===!1?t.options.centerMode===!0&&t.$list.css({padding:"0px "+t.options.centerPadding}):(t.$list.height(t.$slides.first().outerHeight(!0)*t.options.slidesToShow),t.options.centerMode===!0&&t.$list.css({padding:t.options.centerPadding+" 0px"})),t.listWidth=t.$list.width(),t.listHeight=t.$list.height(),t.options.vertical===!1&&t.options.variableWidth===!1?(t.slideWidth=Math.ceil(t.listWidth/t.options.slidesToShow),t.$slideTrack.width(Math.ceil(t.slideWidth*t.$slideTrack.children(".slick-slide").length))):t.options.variableWidth===!0?t.$slideTrack.width(5e3*t.slideCount):(t.slideWidth=Math.ceil(t.listWidth),t.$slideTrack.height(Math.ceil(t.$slides.first().outerHeight(!0)*t.$slideTrack.children(".slick-slide").length)));var e=t.$slides.first().outerWidth(!0)-t.$slides.first().width();t.options.variableWidth===!1&&t.$slideTrack.children(".slick-slide").width(t.slideWidth-e)},e.prototype.setFade=function(){var e,i=this;i.$slides.each(function(n,s){e=i.slideWidth*n*-1,i.options.rtl===!0?t(s).css({position:"relative",right:e,top:0,zIndex:i.options.zIndex-2,opacity:0}):t(s).css({position:"relative",left:e,top:0,zIndex:i.options.zIndex-2,opacity:0})}),i.$slides.eq(i.currentSlide).css({zIndex:i.options.zIndex-1,opacity:1})},e.prototype.setHeight=function(){var t=this;if(1===t.options.slidesToShow&&t.options.adaptiveHeight===!0&&t.options.vertical===!1){var e=t.$slides.eq(t.currentSlide).outerHeight(!0);t.$list.css("height",e)}},e.prototype.setOption=e.prototype.slickSetOption=function(){var e,i,n,s,o,r=this,a=!1;if("object"===t.type(arguments[0])?(n=arguments[0],a=arguments[1],o="multiple"):"string"===t.type(arguments[0])&&(n=arguments[0],s=arguments[1],a=arguments[2],"responsive"===arguments[0]&&"array"===t.type(arguments[1])?o="responsive":"undefined"!=typeof arguments[1]&&(o="single")),"single"===o)r.options[n]=s;else if("multiple"===o)t.each(n,function(t,e){r.options[t]=e});else if("responsive"===o)for(i in s)if("array"!==t.type(r.options.responsive))r.options.responsive=[s[i]];else{for(e=r.options.responsive.length-1;e>=0;)r.options.responsive[e].breakpoint===s[i].breakpoint&&r.options.responsive.splice(e,1),e--;r.options.responsive.push(s[i])}a&&(r.unload(),r.reinit())},e.prototype.setPosition=function(){var t=this;t.setDimensions(),t.setHeight(),t.options.fade===!1?t.setCSS(t.getLeft(t.currentSlide)):t.setFade(),t.$slider.trigger("setPosition",[t])},e.prototype.setProps=function(){var t=this,e=document.body.style;t.positionProp=t.options.vertical===!0?"top":"left","top"===t.positionProp?t.$slider.addClass("slick-vertical"):t.$slider.removeClass("slick-vertical"),void 0===e.WebkitTransition&&void 0===e.MozTransition&&void 0===e.msTransition||t.options.useCSS===!0&&(t.cssTransitions=!0),t.options.fade&&("number"==typeof t.options.zIndex?t.options.zIndex<3&&(t.options.zIndex=3):t.options.zIndex=t.defaults.zIndex),void 0!==e.OTransform&&(t.animType="OTransform",t.transformType="-o-transform",t.transitionType="OTransition",void 0===e.perspectiveProperty&&void 0===e.webkitPerspective&&(t.animType=!1)),void 0!==e.MozTransform&&(t.animType="MozTransform",t.transformType="-moz-transform",t.transitionType="MozTransition",void 0===e.perspectiveProperty&&void 0===e.MozPerspective&&(t.animType=!1)),void 0!==e.webkitTransform&&(t.animType="webkitTransform",t.transformType="-webkit-transform",t.transitionType="webkitTransition",void 0===e.perspectiveProperty&&void 0===e.webkitPerspective&&(t.animType=!1)),void 0!==e.msTransform&&(t.animType="msTransform",t.transformType="-ms-transform",t.transitionType="msTransition",void 0===e.msTransform&&(t.animType=!1)),void 0!==e.transform&&t.animType!==!1&&(t.animType="transform",t.transformType="transform",t.transitionType="transition"),t.transformsEnabled=t.options.useTransform&&null!==t.animType&&t.animType!==!1},e.prototype.setSlideClasses=function(t){var e,i,n,s,o=this;if(i=o.$slider.find(".slick-slide").removeClass("slick-active slick-center slick-current").attr("aria-hidden","true"),o.$slides.eq(t).addClass("slick-current"),o.options.centerMode===!0){var r=o.options.slidesToShow%2===0?1:0;e=Math.floor(o.options.slidesToShow/2),o.options.infinite===!0&&(t>=e&&t<=o.slideCount-1-e?o.$slides.slice(t-e+r,t+e+1).addClass("slick-active").attr("aria-hidden","false"):(n=o.options.slidesToShow+t,i.slice(n-e+1+r,n+e+2).addClass("slick-active").attr("aria-hidden","false")),0===t?i.eq(i.length-1-o.options.slidesToShow).addClass("slick-center"):t===o.slideCount-1&&i.eq(o.options.slidesToShow).addClass("slick-center")),o.$slides.eq(t).addClass("slick-center")}else t>=0&&t<=o.slideCount-o.options.slidesToShow?o.$slides.slice(t,t+o.options.slidesToShow).addClass("slick-active").attr("aria-hidden","false"):i.length<=o.options.slidesToShow?i.addClass("slick-active").attr("aria-hidden","false"):(s=o.slideCount%o.options.slidesToShow,n=o.options.infinite===!0?o.options.slidesToShow+t:t,o.options.slidesToShow==o.options.slidesToScroll&&o.slideCount-t<o.options.slidesToShow?i.slice(n-(o.options.slidesToShow-s),n+s).addClass("slick-active").attr("aria-hidden","false"):i.slice(n,n+o.options.slidesToShow).addClass("slick-active").attr("aria-hidden","false"));"ondemand"!==o.options.lazyLoad&&"anticipated"!==o.options.lazyLoad||o.lazyLoad()},e.prototype.setupInfinite=function(){var e,i,n,s=this;if(s.options.fade===!0&&(s.options.centerMode=!1),s.options.infinite===!0&&s.options.fade===!1&&(i=null,s.slideCount>s.options.slidesToShow)){for(n=s.options.centerMode===!0?s.options.slidesToShow+1:s.options.slidesToShow,e=s.slideCount;e>s.slideCount-n;e-=1)i=e-1,t(s.$slides[i]).clone(!0).attr("id","").attr("data-slick-index",i-s.slideCount).prependTo(s.$slideTrack).addClass("slick-cloned");for(e=0;e<n+s.slideCount;e+=1)i=e,t(s.$slides[i]).clone(!0).attr("id","").attr("data-slick-index",i+s.slideCount).appendTo(s.$slideTrack).addClass("slick-cloned");s.$slideTrack.find(".slick-cloned").find("[id]").each(function(){t(this).attr("id","")})}},e.prototype.interrupt=function(t){var e=this;t||e.autoPlay(),e.interrupted=t},e.prototype.selectHandler=function(e){var i=this,n=t(e.target).is(".slick-slide")?t(e.target):t(e.target).parents(".slick-slide"),s=parseInt(n.attr("data-slick-index"));
return s||(s=0),i.slideCount<=i.options.slidesToShow?void i.slideHandler(s,!1,!0):void i.slideHandler(s)},e.prototype.slideHandler=function(t,e,i){var n,s,o,r,a,l=null,c=this;if(e=e||!1,!(c.animating===!0&&c.options.waitForAnimate===!0||c.options.fade===!0&&c.currentSlide===t))return e===!1&&c.asNavFor(t),n=t,l=c.getLeft(n),r=c.getLeft(c.currentSlide),c.currentLeft=null===c.swipeLeft?r:c.swipeLeft,c.options.infinite===!1&&c.options.centerMode===!1&&(t<0||t>c.getDotCount()*c.options.slidesToScroll)?void(c.options.fade===!1&&(n=c.currentSlide,i!==!0?c.animateSlide(r,function(){c.postSlide(n)}):c.postSlide(n))):c.options.infinite===!1&&c.options.centerMode===!0&&(t<0||t>c.slideCount-c.options.slidesToScroll)?void(c.options.fade===!1&&(n=c.currentSlide,i!==!0?c.animateSlide(r,function(){c.postSlide(n)}):c.postSlide(n))):(c.options.autoplay&&clearInterval(c.autoPlayTimer),s=n<0?c.slideCount%c.options.slidesToScroll!==0?c.slideCount-c.slideCount%c.options.slidesToScroll:c.slideCount+n:n>=c.slideCount?c.slideCount%c.options.slidesToScroll!==0?0:n-c.slideCount:n,c.animating=!0,c.$slider.trigger("beforeChange",[c,c.currentSlide,s]),o=c.currentSlide,c.currentSlide=s,c.setSlideClasses(c.currentSlide),c.options.asNavFor&&(a=c.getNavTarget(),a=a.slick("getSlick"),a.slideCount<=a.options.slidesToShow&&a.setSlideClasses(c.currentSlide)),c.updateDots(),c.updateArrows(),c.options.fade===!0?(i!==!0?(c.fadeSlideOut(o),c.fadeSlide(s,function(){c.postSlide(s)})):c.postSlide(s),void c.animateHeight()):void(i!==!0?c.animateSlide(l,function(){c.postSlide(s)}):c.postSlide(s)))},e.prototype.startLoad=function(){var t=this;t.options.arrows===!0&&t.slideCount>t.options.slidesToShow&&(t.$prevArrow.hide(),t.$nextArrow.hide()),t.options.dots===!0&&t.slideCount>t.options.slidesToShow&&t.$dots.hide(),t.$slider.addClass("slick-loading")},e.prototype.swipeDirection=function(){var t,e,i,n,s=this;return t=s.touchObject.startX-s.touchObject.curX,e=s.touchObject.startY-s.touchObject.curY,i=Math.atan2(e,t),n=Math.round(180*i/Math.PI),n<0&&(n=360-Math.abs(n)),n<=45&&n>=0?s.options.rtl===!1?"left":"right":n<=360&&n>=315?s.options.rtl===!1?"left":"right":n>=135&&n<=225?s.options.rtl===!1?"right":"left":s.options.verticalSwiping===!0?n>=35&&n<=135?"down":"up":"vertical"},e.prototype.swipeEnd=function(){var t,e,i=this;if(i.dragging=!1,i.swiping=!1,i.scrolling)return i.scrolling=!1,!1;if(i.interrupted=!1,i.shouldClick=!(i.touchObject.swipeLength>10),void 0===i.touchObject.curX)return!1;if(i.touchObject.edgeHit===!0&&i.$slider.trigger("edge",[i,i.swipeDirection()]),i.touchObject.swipeLength>=i.touchObject.minSwipe){switch(e=i.swipeDirection()){case"left":case"down":t=i.options.swipeToSlide?i.checkNavigable(i.currentSlide+i.getSlideCount()):i.currentSlide+i.getSlideCount(),i.currentDirection=0;break;case"right":case"up":t=i.options.swipeToSlide?i.checkNavigable(i.currentSlide-i.getSlideCount()):i.currentSlide-i.getSlideCount(),i.currentDirection=1}"vertical"!=e&&(i.slideHandler(t),i.touchObject={},i.$slider.trigger("swipe",[i,e]))}else i.touchObject.startX!==i.touchObject.curX&&(i.slideHandler(i.currentSlide),i.touchObject={})},e.prototype.swipeHandler=function(t){var e=this;if(!(e.options.swipe===!1||"ontouchend"in document&&e.options.swipe===!1||e.options.draggable===!1&&t.type.indexOf("mouse")!==-1))switch(e.touchObject.fingerCount=t.originalEvent&&void 0!==t.originalEvent.touches?t.originalEvent.touches.length:1,e.touchObject.minSwipe=e.listWidth/e.options.touchThreshold,e.options.verticalSwiping===!0&&(e.touchObject.minSwipe=e.listHeight/e.options.touchThreshold),t.data.action){case"start":e.swipeStart(t);break;case"move":e.swipeMove(t);break;case"end":e.swipeEnd(t)}},e.prototype.swipeMove=function(t){var e,i,n,s,o,r,a=this;return o=void 0!==t.originalEvent?t.originalEvent.touches:null,!(!a.dragging||a.scrolling||o&&1!==o.length)&&(e=a.getLeft(a.currentSlide),a.touchObject.curX=void 0!==o?o[0].pageX:t.clientX,a.touchObject.curY=void 0!==o?o[0].pageY:t.clientY,a.touchObject.swipeLength=Math.round(Math.sqrt(Math.pow(a.touchObject.curX-a.touchObject.startX,2))),r=Math.round(Math.sqrt(Math.pow(a.touchObject.curY-a.touchObject.startY,2))),!a.options.verticalSwiping&&!a.swiping&&r>4?(a.scrolling=!0,!1):(a.options.verticalSwiping===!0&&(a.touchObject.swipeLength=r),i=a.swipeDirection(),void 0!==t.originalEvent&&a.touchObject.swipeLength>4&&(a.swiping=!0,t.preventDefault()),s=(a.options.rtl===!1?1:-1)*(a.touchObject.curX>a.touchObject.startX?1:-1),a.options.verticalSwiping===!0&&(s=a.touchObject.curY>a.touchObject.startY?1:-1),n=a.touchObject.swipeLength,a.touchObject.edgeHit=!1,a.options.infinite===!1&&(0===a.currentSlide&&"right"===i||a.currentSlide>=a.getDotCount()&&"left"===i)&&(n=a.touchObject.swipeLength*a.options.edgeFriction,a.touchObject.edgeHit=!0),a.options.vertical===!1?a.swipeLeft=e+n*s:a.swipeLeft=e+n*(a.$list.height()/a.listWidth)*s,a.options.verticalSwiping===!0&&(a.swipeLeft=e+n*s),a.options.fade!==!0&&a.options.touchMove!==!1&&(a.animating===!0?(a.swipeLeft=null,!1):void a.setCSS(a.swipeLeft))))},e.prototype.swipeStart=function(t){var e,i=this;return i.interrupted=!0,1!==i.touchObject.fingerCount||i.slideCount<=i.options.slidesToShow?(i.touchObject={},!1):(void 0!==t.originalEvent&&void 0!==t.originalEvent.touches&&(e=t.originalEvent.touches[0]),i.touchObject.startX=i.touchObject.curX=void 0!==e?e.pageX:t.clientX,i.touchObject.startY=i.touchObject.curY=void 0!==e?e.pageY:t.clientY,void(i.dragging=!0))},e.prototype.unfilterSlides=e.prototype.slickUnfilter=function(){var t=this;null!==t.$slidesCache&&(t.unload(),t.$slideTrack.children(this.options.slide).detach(),t.$slidesCache.appendTo(t.$slideTrack),t.reinit())},e.prototype.unload=function(){var e=this;t(".slick-cloned",e.$slider).remove(),e.$dots&&e.$dots.remove(),e.$prevArrow&&e.htmlExpr.test(e.options.prevArrow)&&e.$prevArrow.remove(),e.$nextArrow&&e.htmlExpr.test(e.options.nextArrow)&&e.$nextArrow.remove(),e.$slides.removeClass("slick-slide slick-active slick-visible slick-current").attr("aria-hidden","true").css("width","")},e.prototype.unslick=function(t){var e=this;e.$slider.trigger("unslick",[e,t]),e.destroy()},e.prototype.updateArrows=function(){var t,e=this;t=Math.floor(e.options.slidesToShow/2),e.options.arrows===!0&&e.slideCount>e.options.slidesToShow&&!e.options.infinite&&(e.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false"),e.$nextArrow.removeClass("slick-disabled").attr("aria-disabled","false"),0===e.currentSlide?(e.$prevArrow.addClass("slick-disabled").attr("aria-disabled","true"),e.$nextArrow.removeClass("slick-disabled").attr("aria-disabled","false")):e.currentSlide>=e.slideCount-e.options.slidesToShow&&e.options.centerMode===!1?(e.$nextArrow.addClass("slick-disabled").attr("aria-disabled","true"),e.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false")):e.currentSlide>=e.slideCount-1&&e.options.centerMode===!0&&(e.$nextArrow.addClass("slick-disabled").attr("aria-disabled","true"),e.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false")))},e.prototype.updateDots=function(){var t=this;null!==t.$dots&&(t.$dots.find("li").removeClass("slick-active").end(),t.$dots.find("li").eq(Math.floor(t.currentSlide/t.options.slidesToScroll)).addClass("slick-active"))},e.prototype.visibility=function(){var t=this;t.options.autoplay&&(document[t.hidden]?t.interrupted=!0:t.interrupted=!1)},t.fn.slick=function(){var t,i,n=this,s=arguments[0],o=Array.prototype.slice.call(arguments,1),r=n.length;for(t=0;t<r;t++)if("object"==typeof s||"undefined"==typeof s?n[t].slick=new e(n[t],s):i=n[t].slick[s].apply(n[t].slick,o),"undefined"!=typeof i)return i;return n}}),/*!
 * JavaScript Cookie v2.0.3
 * https://github.com/js-cookie/js-cookie
 *
 * Copyright 2006, 2015 Klaus Hartl & Fagner Brack
 * Released under the MIT license
 */
function(t){if("function"==typeof define&&define.amd)define(t);else if("object"==typeof exports)module.exports=t();else{var e=window.Cookies,i=window.Cookies=t();i.noConflict=function(){return window.Cookies=e,i}}}(function(){function t(){for(var t=0,e={};t<arguments.length;t++){var i=arguments[t];for(var n in i)e[n]=i[n]}return e}function e(i){function n(e,s,o){var r;if(arguments.length>1){if(o=t({path:"/"},n.defaults,o),"number"==typeof o.expires){var a=new Date;a.setMilliseconds(a.getMilliseconds()+864e5*o.expires),o.expires=a}try{r=JSON.stringify(s),/^[\{\[]/.test(r)&&(s=r)}catch(t){}return s=encodeURIComponent(String(s)),s=s.replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),e=encodeURIComponent(String(e)),e=e.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),e=e.replace(/[\(\)]/g,escape),document.cookie=[e,"=",s,o.expires&&"; expires="+o.expires.toUTCString(),o.path&&"; path="+o.path,o.domain&&"; domain="+o.domain,o.secure?"; secure":""].join("")}e||(r={});for(var l=document.cookie?document.cookie.split("; "):[],c=/(%[0-9A-Z]{2})+/g,d=0;d<l.length;d++){var h=l[d].split("="),u=h[0].replace(c,decodeURIComponent),f=h.slice(1).join("=");'"'===f.charAt(0)&&(f=f.slice(1,-1));try{if(f=i&&i(f,u)||f.replace(c,decodeURIComponent),this.json)try{f=JSON.parse(f)}catch(t){}if(e===u){r=f;break}e||(r[u]=f)}catch(t){}}return r}return n.get=n.set=n,n.getJSON=function(){return n.apply({json:!0},[].slice.call(arguments))},n.defaults={},n.remove=function(e,i){n(e,"",t(i,{expires:-1}))},n.withConverter=e,n}return e()}),
//! moment.js
//! version : 2.10.6
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.moment=e()}(this,function(){"use strict";function t(){return Li.apply(null,arguments)}function e(t){Li=t}function i(t){return"[object Array]"===Object.prototype.toString.call(t)}function n(t){return t instanceof Date||"[object Date]"===Object.prototype.toString.call(t)}function s(t,e){var i,n=[];for(i=0;i<t.length;++i)n.push(e(t[i],i));return n}function o(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function r(t,e){for(var i in e)o(e,i)&&(t[i]=e[i]);return o(e,"toString")&&(t.toString=e.toString),o(e,"valueOf")&&(t.valueOf=e.valueOf),t}function a(t,e,i,n){return Dt(t,e,i,n,!0).utc()}function l(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function c(t){return null==t._pf&&(t._pf=l()),t._pf}function d(t){if(null==t._isValid){var e=c(t);t._isValid=!(isNaN(t._d.getTime())||!(e.overflow<0)||e.empty||e.invalidMonth||e.invalidWeekday||e.nullInput||e.invalidFormat||e.userInvalidated),t._strict&&(t._isValid=t._isValid&&0===e.charsLeftOver&&0===e.unusedTokens.length&&void 0===e.bigHour)}return t._isValid}function h(t){var e=a(NaN);return null!=t?r(c(e),t):c(e).userInvalidated=!0,e}function u(t,e){var i,n,s;if("undefined"!=typeof e._isAMomentObject&&(t._isAMomentObject=e._isAMomentObject),"undefined"!=typeof e._i&&(t._i=e._i),"undefined"!=typeof e._f&&(t._f=e._f),"undefined"!=typeof e._l&&(t._l=e._l),"undefined"!=typeof e._strict&&(t._strict=e._strict),"undefined"!=typeof e._tzm&&(t._tzm=e._tzm),"undefined"!=typeof e._isUTC&&(t._isUTC=e._isUTC),"undefined"!=typeof e._offset&&(t._offset=e._offset),"undefined"!=typeof e._pf&&(t._pf=c(e)),"undefined"!=typeof e._locale&&(t._locale=e._locale),Oi.length>0)for(i in Oi)n=Oi[i],s=e[n],"undefined"!=typeof s&&(t[n]=s);return t}function f(e){u(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),$i===!1&&($i=!0,t.updateOffset(this),$i=!1)}function p(t){return t instanceof f||null!=t&&null!=t._isAMomentObject}function m(t){return t<0?Math.ceil(t):Math.floor(t)}function g(t){var e=+t,i=0;return 0!==e&&isFinite(e)&&(i=m(e)),i}function v(t,e,i){var n,s=Math.min(t.length,e.length),o=Math.abs(t.length-e.length),r=0;for(n=0;n<s;n++)(i&&t[n]!==e[n]||!i&&g(t[n])!==g(e[n]))&&r++;return r+o}function y(){}function b(t){return t?t.toLowerCase().replace("_","-"):t}function w(t){for(var e,i,n,s,o=0;o<t.length;){for(s=b(t[o]).split("-"),e=s.length,i=b(t[o+1]),i=i?i.split("-"):null;e>0;){if(n=_(s.slice(0,e).join("-")))return n;if(i&&i.length>=e&&v(s,i,!0)>=e-1)break;e--}o++}return null}function _(t){var e=null;if(!Ni[t]&&"undefined"!=typeof module&&module&&module.exports)try{e=ji._abbr,require("./locale/"+t),k(e)}catch(t){}return Ni[t]}function k(t,e){var i;return t&&(i="undefined"==typeof e?C(t):x(t,e),i&&(ji=i)),ji._abbr}function x(t,e){return null!==e?(e.abbr=t,Ni[t]=Ni[t]||new y,Ni[t].set(e),k(t),Ni[t]):(delete Ni[t],null)}function C(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return ji;if(!i(t)){if(e=_(t))return e;t=[t]}return w(t)}function S(t,e){var i=t.toLowerCase();Fi[i]=Fi[i+"s"]=Fi[e]=t}function T(t){return"string"==typeof t?Fi[t]||Fi[t.toLowerCase()]:void 0}function E(t){var e,i,n={};for(i in t)o(t,i)&&(e=T(i),e&&(n[e]=t[i]));return n}function D(e,i){return function(n){return null!=n?(M(this,e,n),t.updateOffset(this,i),this):P(this,e)}}function P(t,e){return t._d["get"+(t._isUTC?"UTC":"")+e]()}function M(t,e,i){return t._d["set"+(t._isUTC?"UTC":"")+e](i)}function A(t,e){var i;if("object"==typeof t)for(i in t)this.set(i,t[i]);else if(t=T(t),"function"==typeof this[t])return this[t](e);return this}function I(t,e,i){var n=""+Math.abs(t),s=e-n.length,o=t>=0;return(o?i?"+":"":"-")+Math.pow(10,Math.max(0,s)).toString().substr(1)+n}function L(t,e,i,n){var s=n;"string"==typeof n&&(s=function(){return this[n]()}),t&&(Bi[t]=s),e&&(Bi[e[0]]=function(){return I(s.apply(this,arguments),e[1],e[2])}),i&&(Bi[i]=function(){return this.localeData().ordinal(s.apply(this,arguments),t)})}function j(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function O(t){var e,i,n=t.match(Hi);for(e=0,i=n.length;e<i;e++)Bi[n[e]]?n[e]=Bi[n[e]]:n[e]=j(n[e]);return function(s){var o="";for(e=0;e<i;e++)o+=n[e]instanceof Function?n[e].call(s,t):n[e];return o}}function $(t,e){return t.isValid()?(e=N(e,t.localeData()),zi[e]=zi[e]||O(e),zi[e](t)):t.localeData().invalidDate()}function N(t,e){function i(t){return e.longDateFormat(t)||t}var n=5;for(Ri.lastIndex=0;n>=0&&Ri.test(t);)t=t.replace(Ri,i),Ri.lastIndex=0,n-=1;return t}function F(t){return"function"==typeof t&&"[object Function]"===Object.prototype.toString.call(t)}function H(t,e,i){sn[t]=F(e)?e:function(t){return t&&i?i:e}}function R(t,e){return o(sn,t)?sn[t](e._strict,e._locale):new RegExp(z(t))}function z(t){return t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,e,i,n,s){return e||i||n||s}).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function B(t,e){var i,n=e;for("string"==typeof t&&(t=[t]),"number"==typeof e&&(n=function(t,i){i[e]=g(t)}),i=0;i<t.length;i++)on[t[i]]=n}function W(t,e){B(t,function(t,i,n,s){n._w=n._w||{},e(t,n._w,n,s)})}function q(t,e,i){null!=e&&o(on,t)&&on[t](e,i._a,i,t)}function U(t,e){return new Date(Date.UTC(t,e+1,0)).getUTCDate()}function V(t){return this._months[t.month()]}function Y(t){return this._monthsShort[t.month()]}function G(t,e,i){var n,s,o;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),n=0;n<12;n++){if(s=a([2e3,n]),i&&!this._longMonthsParse[n]&&(this._longMonthsParse[n]=new RegExp("^"+this.months(s,"").replace(".","")+"$","i"),this._shortMonthsParse[n]=new RegExp("^"+this.monthsShort(s,"").replace(".","")+"$","i")),i||this._monthsParse[n]||(o="^"+this.months(s,"")+"|^"+this.monthsShort(s,""),this._monthsParse[n]=new RegExp(o.replace(".",""),"i")),i&&"MMMM"===e&&this._longMonthsParse[n].test(t))return n;if(i&&"MMM"===e&&this._shortMonthsParse[n].test(t))return n;if(!i&&this._monthsParse[n].test(t))return n}}function K(t,e){var i;return"string"==typeof e&&(e=t.localeData().monthsParse(e),"number"!=typeof e)?t:(i=Math.min(t.date(),U(t.year(),e)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,i),t)}function X(e){return null!=e?(K(this,e),t.updateOffset(this,!0),this):P(this,"Month")}function Q(){return U(this.year(),this.month())}function J(t){var e,i=t._a;return i&&c(t).overflow===-2&&(e=i[an]<0||i[an]>11?an:i[ln]<1||i[ln]>U(i[rn],i[an])?ln:i[cn]<0||i[cn]>24||24===i[cn]&&(0!==i[dn]||0!==i[hn]||0!==i[un])?cn:i[dn]<0||i[dn]>59?dn:i[hn]<0||i[hn]>59?hn:i[un]<0||i[un]>999?un:-1,c(t)._overflowDayOfYear&&(e<rn||e>ln)&&(e=ln),c(t).overflow=e),t}function Z(e){t.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function tt(t,e){var i=!0;return r(function(){return i&&(Z(t+"\n"+(new Error).stack),i=!1),e.apply(this,arguments)},e)}function et(t,e){mn[t]||(Z(e),mn[t]=!0)}function it(t){var e,i,n=t._i,s=gn.exec(n);if(s){for(c(t).iso=!0,e=0,i=vn.length;e<i;e++)if(vn[e][1].exec(n)){t._f=vn[e][0];break}for(e=0,i=yn.length;e<i;e++)if(yn[e][1].exec(n)){t._f+=(s[6]||" ")+yn[e][0];break}n.match(tn)&&(t._f+="Z"),_t(t)}else t._isValid=!1}function nt(e){var i=bn.exec(e._i);return null!==i?void(e._d=new Date(+i[1])):(it(e),void(e._isValid===!1&&(delete e._isValid,t.createFromInputFallback(e))))}function st(t,e,i,n,s,o,r){var a=new Date(t,e,i,n,s,o,r);return t<1970&&a.setFullYear(t),a}function ot(t){var e=new Date(Date.UTC.apply(null,arguments));return t<1970&&e.setUTCFullYear(t),e}function rt(t){return at(t)?366:365}function at(t){return t%4===0&&t%100!==0||t%400===0}function lt(){return at(this.year())}function ct(t,e,i){var n,s=i-e,o=i-t.day();return o>s&&(o-=7),o<s-7&&(o+=7),n=Pt(t).add(o,"d"),{week:Math.ceil(n.dayOfYear()/7),year:n.year()}}function dt(t){return ct(t,this._week.dow,this._week.doy).week}function ht(){return this._week.dow}function ut(){return this._week.doy}function ft(t){var e=this.localeData().week(this);return null==t?e:this.add(7*(t-e),"d")}function pt(t){var e=ct(this,1,4).week;return null==t?e:this.add(7*(t-e),"d")}function mt(t,e,i,n,s){var o,r=6+s-n,a=ot(t,0,1+r),l=a.getUTCDay();return l<s&&(l+=7),i=null!=i?1*i:s,o=1+r+7*(e-1)-l+i,{year:o>0?t:t-1,dayOfYear:o>0?o:rt(t-1)+o}}function gt(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==t?e:this.add(t-e,"d")}function vt(t,e,i){return null!=t?t:null!=e?e:i}function yt(t){var e=new Date;return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function bt(t){var e,i,n,s,o=[];if(!t._d){for(n=yt(t),t._w&&null==t._a[ln]&&null==t._a[an]&&wt(t),t._dayOfYear&&(s=vt(t._a[rn],n[rn]),t._dayOfYear>rt(s)&&(c(t)._overflowDayOfYear=!0),i=ot(s,0,t._dayOfYear),t._a[an]=i.getUTCMonth(),t._a[ln]=i.getUTCDate()),e=0;e<3&&null==t._a[e];++e)t._a[e]=o[e]=n[e];for(;e<7;e++)t._a[e]=o[e]=null==t._a[e]?2===e?1:0:t._a[e];24===t._a[cn]&&0===t._a[dn]&&0===t._a[hn]&&0===t._a[un]&&(t._nextDay=!0,t._a[cn]=0),t._d=(t._useUTC?ot:st).apply(null,o),null!=t._tzm&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[cn]=24)}}function wt(t){var e,i,n,s,o,r,a;e=t._w,null!=e.GG||null!=e.W||null!=e.E?(o=1,r=4,i=vt(e.GG,t._a[rn],ct(Pt(),1,4).year),n=vt(e.W,1),s=vt(e.E,1)):(o=t._locale._week.dow,r=t._locale._week.doy,i=vt(e.gg,t._a[rn],ct(Pt(),o,r).year),n=vt(e.w,1),null!=e.d?(s=e.d,s<o&&++n):s=null!=e.e?e.e+o:o),a=mt(i,n,s,r,o),t._a[rn]=a.year,t._dayOfYear=a.dayOfYear}function _t(e){if(e._f===t.ISO_8601)return void it(e);e._a=[],c(e).empty=!0;var i,n,s,o,r,a=""+e._i,l=a.length,d=0;for(s=N(e._f,e._locale).match(Hi)||[],i=0;i<s.length;i++)o=s[i],n=(a.match(R(o,e))||[])[0],n&&(r=a.substr(0,a.indexOf(n)),r.length>0&&c(e).unusedInput.push(r),a=a.slice(a.indexOf(n)+n.length),d+=n.length),Bi[o]?(n?c(e).empty=!1:c(e).unusedTokens.push(o),q(o,n,e)):e._strict&&!n&&c(e).unusedTokens.push(o);c(e).charsLeftOver=l-d,a.length>0&&c(e).unusedInput.push(a),c(e).bigHour===!0&&e._a[cn]<=12&&e._a[cn]>0&&(c(e).bigHour=void 0),e._a[cn]=kt(e._locale,e._a[cn],e._meridiem),bt(e),J(e)}function kt(t,e,i){var n;return null==i?e:null!=t.meridiemHour?t.meridiemHour(e,i):null!=t.isPM?(n=t.isPM(i),n&&e<12&&(e+=12),n||12!==e||(e=0),e):e}function xt(t){var e,i,n,s,o;if(0===t._f.length)return c(t).invalidFormat=!0,void(t._d=new Date(NaN));for(s=0;s<t._f.length;s++)o=0,e=u({},t),null!=t._useUTC&&(e._useUTC=t._useUTC),e._f=t._f[s],_t(e),d(e)&&(o+=c(e).charsLeftOver,o+=10*c(e).unusedTokens.length,c(e).score=o,(null==n||o<n)&&(n=o,i=e));r(t,i||e)}function Ct(t){if(!t._d){var e=E(t._i);t._a=[e.year,e.month,e.day||e.date,e.hour,e.minute,e.second,e.millisecond],bt(t)}}function St(t){var e=new f(J(Tt(t)));return e._nextDay&&(e.add(1,"d"),e._nextDay=void 0),e}function Tt(t){var e=t._i,s=t._f;return t._locale=t._locale||C(t._l),null===e||void 0===s&&""===e?h({nullInput:!0}):("string"==typeof e&&(t._i=e=t._locale.preparse(e)),p(e)?new f(J(e)):(i(s)?xt(t):s?_t(t):n(e)?t._d=e:Et(t),t))}function Et(e){var o=e._i;void 0===o?e._d=new Date:n(o)?e._d=new Date(+o):"string"==typeof o?nt(e):i(o)?(e._a=s(o.slice(0),function(t){return parseInt(t,10)}),bt(e)):"object"==typeof o?Ct(e):"number"==typeof o?e._d=new Date(o):t.createFromInputFallback(e)}function Dt(t,e,i,n,s){var o={};return"boolean"==typeof i&&(n=i,i=void 0),o._isAMomentObject=!0,o._useUTC=o._isUTC=s,o._l=i,o._i=t,o._f=e,o._strict=n,St(o)}function Pt(t,e,i,n){return Dt(t,e,i,n,!1)}function Mt(t,e){var n,s;if(1===e.length&&i(e[0])&&(e=e[0]),!e.length)return Pt();for(n=e[0],s=1;s<e.length;++s)e[s].isValid()&&!e[s][t](n)||(n=e[s]);return n}function At(){var t=[].slice.call(arguments,0);return Mt("isBefore",t)}function It(){var t=[].slice.call(arguments,0);return Mt("isAfter",t)}function Lt(t){var e=E(t),i=e.year||0,n=e.quarter||0,s=e.month||0,o=e.week||0,r=e.day||0,a=e.hour||0,l=e.minute||0,c=e.second||0,d=e.millisecond||0;this._milliseconds=+d+1e3*c+6e4*l+36e5*a,this._days=+r+7*o,this._months=+s+3*n+12*i,this._data={},this._locale=C(),this._bubble()}function jt(t){return t instanceof Lt}function Ot(t,e){L(t,0,0,function(){var t=this.utcOffset(),i="+";return t<0&&(t=-t,i="-"),i+I(~~(t/60),2)+e+I(~~t%60,2)})}function $t(t){var e=(t||"").match(tn)||[],i=e[e.length-1]||[],n=(i+"").match(Cn)||["-",0,0],s=+(60*n[1])+g(n[2]);return"+"===n[0]?s:-s}function Nt(e,i){var s,o;return i._isUTC?(s=i.clone(),o=(p(e)||n(e)?+e:+Pt(e))-+s,s._d.setTime(+s._d+o),t.updateOffset(s,!1),s):Pt(e).local()}function Ft(t){return 15*-Math.round(t._d.getTimezoneOffset()/15)}function Ht(e,i){var n,s=this._offset||0;return null!=e?("string"==typeof e&&(e=$t(e)),Math.abs(e)<16&&(e*=60),!this._isUTC&&i&&(n=Ft(this)),this._offset=e,this._isUTC=!0,null!=n&&this.add(n,"m"),s!==e&&(!i||this._changeInProgress?ee(this,Xt(e-s,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,t.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?s:Ft(this)}function Rt(t,e){return null!=t?("string"!=typeof t&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()}function zt(t){return this.utcOffset(0,t)}function Bt(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(Ft(this),"m")),this}function Wt(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset($t(this._i)),this}function qt(t){return t=t?Pt(t).utcOffset():0,(this.utcOffset()-t)%60===0}function Ut(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Vt(){if("undefined"!=typeof this._isDSTShifted)return this._isDSTShifted;var t={};if(u(t,this),t=Tt(t),t._a){var e=t._isUTC?a(t._a):Pt(t._a);this._isDSTShifted=this.isValid()&&v(t._a,e.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function Yt(){return!this._isUTC}function Gt(){return this._isUTC}function Kt(){return this._isUTC&&0===this._offset}function Xt(t,e){var i,n,s,r=t,a=null;return jt(t)?r={ms:t._milliseconds,d:t._days,M:t._months}:"number"==typeof t?(r={},e?r[e]=t:r.milliseconds=t):(a=Sn.exec(t))?(i="-"===a[1]?-1:1,r={y:0,d:g(a[ln])*i,h:g(a[cn])*i,m:g(a[dn])*i,s:g(a[hn])*i,ms:g(a[un])*i}):(a=Tn.exec(t))?(i="-"===a[1]?-1:1,r={y:Qt(a[2],i),M:Qt(a[3],i),d:Qt(a[4],i),h:Qt(a[5],i),m:Qt(a[6],i),s:Qt(a[7],i),w:Qt(a[8],i)}):null==r?r={}:"object"==typeof r&&("from"in r||"to"in r)&&(s=Zt(Pt(r.from),Pt(r.to)),r={},r.ms=s.milliseconds,r.M=s.months),n=new Lt(r),jt(t)&&o(t,"_locale")&&(n._locale=t._locale),n}function Qt(t,e){var i=t&&parseFloat(t.replace(",","."));return(isNaN(i)?0:i)*e}function Jt(t,e){var i={milliseconds:0,months:0};return i.months=e.month()-t.month()+12*(e.year()-t.year()),t.clone().add(i.months,"M").isAfter(e)&&--i.months,i.milliseconds=+e-+t.clone().add(i.months,"M"),i}function Zt(t,e){var i;return e=Nt(e,t),t.isBefore(e)?i=Jt(t,e):(i=Jt(e,t),i.milliseconds=-i.milliseconds,i.months=-i.months),i}function te(t,e){return function(i,n){var s,o;return null===n||isNaN(+n)||(et(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period)."),o=i,i=n,n=o),i="string"==typeof i?+i:i,s=Xt(i,n),ee(this,s,t),this}}function ee(e,i,n,s){var o=i._milliseconds,r=i._days,a=i._months;s=null==s||s,o&&e._d.setTime(+e._d+o*n),r&&M(e,"Date",P(e,"Date")+r*n),a&&K(e,P(e,"Month")+a*n),s&&t.updateOffset(e,r||a)}function ie(t,e){var i=t||Pt(),n=Nt(i,this).startOf("day"),s=this.diff(n,"days",!0),o=s<-6?"sameElse":s<-1?"lastWeek":s<0?"lastDay":s<1?"sameDay":s<2?"nextDay":s<7?"nextWeek":"sameElse";return this.format(e&&e[o]||this.localeData().calendar(o,this,Pt(i)))}function ne(){return new f(this)}function se(t,e){var i;return e=T("undefined"!=typeof e?e:"millisecond"),"millisecond"===e?(t=p(t)?t:Pt(t),+this>+t):(i=p(t)?+t:+Pt(t),i<+this.clone().startOf(e))}function oe(t,e){var i;return e=T("undefined"!=typeof e?e:"millisecond"),"millisecond"===e?(t=p(t)?t:Pt(t),+this<+t):(i=p(t)?+t:+Pt(t),+this.clone().endOf(e)<i)}function re(t,e,i){return this.isAfter(t,i)&&this.isBefore(e,i)}function ae(t,e){var i;return e=T(e||"millisecond"),"millisecond"===e?(t=p(t)?t:Pt(t),+this===+t):(i=+Pt(t),+this.clone().startOf(e)<=i&&i<=+this.clone().endOf(e))}function le(t,e,i){var n,s,o=Nt(t,this),r=6e4*(o.utcOffset()-this.utcOffset());return e=T(e),"year"===e||"month"===e||"quarter"===e?(s=ce(this,o),"quarter"===e?s/=3:"year"===e&&(s/=12)):(n=this-o,s="second"===e?n/1e3:"minute"===e?n/6e4:"hour"===e?n/36e5:"day"===e?(n-r)/864e5:"week"===e?(n-r)/6048e5:n),i?s:m(s)}function ce(t,e){var i,n,s=12*(e.year()-t.year())+(e.month()-t.month()),o=t.clone().add(s,"months");return e-o<0?(i=t.clone().add(s-1,"months"),n=(e-o)/(o-i)):(i=t.clone().add(s+1,"months"),n=(e-o)/(i-o)),-(s+n)}function de(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function he(){var t=this.clone().utc();return 0<t.year()&&t.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():$(t,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):$(t,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function ue(e){var i=$(this,e||t.defaultFormat);return this.localeData().postformat(i)}function fe(t,e){return this.isValid()?Xt({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function pe(t){return this.from(Pt(),t)}function me(t,e){return this.isValid()?Xt({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function ge(t){return this.to(Pt(),t)}function ve(t){var e;return void 0===t?this._locale._abbr:(e=C(t),null!=e&&(this._locale=e),this)}function ye(){return this._locale}function be(t){switch(t=T(t)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===t&&this.weekday(0),"isoWeek"===t&&this.isoWeekday(1),"quarter"===t&&this.month(3*Math.floor(this.month()/3)),this}function we(t){return t=T(t),void 0===t||"millisecond"===t?this:this.startOf(t).add(1,"isoWeek"===t?"week":t).subtract(1,"ms")}function _e(){return+this._d-6e4*(this._offset||0)}function ke(){return Math.floor(+this/1e3)}function xe(){return this._offset?new Date(+this):this._d}function Ce(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]}function Se(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}}function Te(){return d(this)}function Ee(){return r({},c(this))}function De(){return c(this).overflow}function Pe(t,e){L(0,[t,t.length],0,e)}function Me(t,e,i){return ct(Pt([t,11,31+e-i]),e,i).week}function Ae(t){var e=ct(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==t?e:this.add(t-e,"y")}function Ie(t){var e=ct(this,1,4).year;return null==t?e:this.add(t-e,"y")}function Le(){return Me(this.year(),1,4)}function je(){var t=this.localeData()._week;return Me(this.year(),t.dow,t.doy)}function Oe(t){return null==t?Math.ceil((this.month()+1)/3):this.month(3*(t-1)+this.month()%3)}function $e(t,e){return"string"!=typeof t?t:isNaN(t)?(t=e.weekdaysParse(t),"number"==typeof t?t:null):parseInt(t,10)}function Ne(t){return this._weekdays[t.day()]}function Fe(t){return this._weekdaysShort[t.day()]}function He(t){return this._weekdaysMin[t.day()]}function Re(t){var e,i,n;for(this._weekdaysParse=this._weekdaysParse||[],e=0;e<7;e++)if(this._weekdaysParse[e]||(i=Pt([2e3,1]).day(e),n="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[e]=new RegExp(n.replace(".",""),"i")),this._weekdaysParse[e].test(t))return e}function ze(t){var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(t=$e(t,this.localeData()),this.add(t-e,"d")):e}function Be(t){var e=(this.day()+7-this.localeData()._week.dow)%7;return null==t?e:this.add(t-e,"d")}function We(t){return null==t?this.day()||7:this.day(this.day()%7?t:t-7)}function qe(t,e){L(t,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}function Ue(t,e){return e._meridiemParse}function Ve(t){return"p"===(t+"").toLowerCase().charAt(0)}function Ye(t,e,i){return t>11?i?"pm":"PM":i?"am":"AM"}function Ge(t,e){e[un]=g(1e3*("0."+t))}function Ke(){return this._isUTC?"UTC":""}function Xe(){return this._isUTC?"Coordinated Universal Time":""}function Qe(t){return Pt(1e3*t)}function Je(){return Pt.apply(null,arguments).parseZone()}function Ze(t,e,i){var n=this._calendar[t];return"function"==typeof n?n.call(e,i):n}function ti(t){var e=this._longDateFormat[t],i=this._longDateFormat[t.toUpperCase()];return e||!i?e:(this._longDateFormat[t]=i.replace(/MMMM|MM|DD|dddd/g,function(t){return t.slice(1)}),this._longDateFormat[t])}function ei(){return this._invalidDate}function ii(t){return this._ordinal.replace("%d",t)}function ni(t){return t}function si(t,e,i,n){var s=this._relativeTime[i];return"function"==typeof s?s(t,e,i,n):s.replace(/%d/i,t)}function oi(t,e){var i=this._relativeTime[t>0?"future":"past"];return"function"==typeof i?i(e):i.replace(/%s/i,e)}function ri(t){var e,i;for(i in t)e=t[i],"function"==typeof e?this[i]=e:this["_"+i]=e;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}function ai(t,e,i,n){var s=C(),o=a().set(n,e);return s[i](o,t)}function li(t,e,i,n,s){if("number"==typeof t&&(e=t,t=void 0),t=t||"",null!=e)return ai(t,e,i,s);var o,r=[];for(o=0;o<n;o++)r[o]=ai(t,o,i,s);return r}function ci(t,e){return li(t,e,"months",12,"month")}function di(t,e){return li(t,e,"monthsShort",12,"month")}function hi(t,e){return li(t,e,"weekdays",7,"day")}function ui(t,e){return li(t,e,"weekdaysShort",7,"day")}function fi(t,e){return li(t,e,"weekdaysMin",7,"day")}function pi(){var t=this._data;return this._milliseconds=Kn(this._milliseconds),this._days=Kn(this._days),this._months=Kn(this._months),t.milliseconds=Kn(t.milliseconds),t.seconds=Kn(t.seconds),t.minutes=Kn(t.minutes),t.hours=Kn(t.hours),t.months=Kn(t.months),t.years=Kn(t.years),this}function mi(t,e,i,n){var s=Xt(e,i);return t._milliseconds+=n*s._milliseconds,t._days+=n*s._days,t._months+=n*s._months,t._bubble()}function gi(t,e){return mi(this,t,e,1)}function vi(t,e){return mi(this,t,e,-1)}function yi(t){return t<0?Math.floor(t):Math.ceil(t)}function bi(){var t,e,i,n,s,o=this._milliseconds,r=this._days,a=this._months,l=this._data;return o>=0&&r>=0&&a>=0||o<=0&&r<=0&&a<=0||(o+=864e5*yi(_i(a)+r),r=0,a=0),l.milliseconds=o%1e3,t=m(o/1e3),l.seconds=t%60,e=m(t/60),l.minutes=e%60,i=m(e/60),l.hours=i%24,r+=m(i/24),s=m(wi(r)),a+=s,r-=yi(_i(s)),n=m(a/12),a%=12,l.days=r,l.months=a,l.years=n,this}function wi(t){return 4800*t/146097}function _i(t){return 146097*t/4800}function ki(t){var e,i,n=this._milliseconds;if(t=T(t),"month"===t||"year"===t)return e=this._days+n/864e5,i=this._months+wi(e),"month"===t?i:i/12;switch(e=this._days+Math.round(_i(this._months)),t){case"week":return e/7+n/6048e5;case"day":return e+n/864e5;case"hour":return 24*e+n/36e5;case"minute":return 1440*e+n/6e4;case"second":return 86400*e+n/1e3;case"millisecond":return Math.floor(864e5*e)+n;default:throw new Error("Unknown unit "+t)}}function xi(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*g(this._months/12)}function Ci(t){return function(){return this.as(t)}}function Si(t){return t=T(t),this[t+"s"]()}function Ti(t){return function(){return this._data[t]}}function Ei(){return m(this.days()/7)}function Di(t,e,i,n,s){return s.relativeTime(e||1,!!i,t,n)}function Pi(t,e,i){var n=Xt(t).abs(),s=hs(n.as("s")),o=hs(n.as("m")),r=hs(n.as("h")),a=hs(n.as("d")),l=hs(n.as("M")),c=hs(n.as("y")),d=s<us.s&&["s",s]||1===o&&["m"]||o<us.m&&["mm",o]||1===r&&["h"]||r<us.h&&["hh",r]||1===a&&["d"]||a<us.d&&["dd",a]||1===l&&["M"]||l<us.M&&["MM",l]||1===c&&["y"]||["yy",c];return d[2]=e,d[3]=+t>0,d[4]=i,Di.apply(null,d)}function Mi(t,e){return void 0!==us[t]&&(void 0===e?us[t]:(us[t]=e,!0))}function Ai(t){var e=this.localeData(),i=Pi(this,!t,e);return t&&(i=e.pastFuture(+this,i)),e.postformat(i)}function Ii(){var t,e,i,n=fs(this._milliseconds)/1e3,s=fs(this._days),o=fs(this._months);t=m(n/60),e=m(t/60),n%=60,t%=60,i=m(o/12),o%=12;var r=i,a=o,l=s,c=e,d=t,h=n,u=this.asSeconds();return u?(u<0?"-":"")+"P"+(r?r+"Y":"")+(a?a+"M":"")+(l?l+"D":"")+(c||d||h?"T":"")+(c?c+"H":"")+(d?d+"M":"")+(h?h+"S":""):"P0D"}var Li,ji,Oi=t.momentProperties=[],$i=!1,Ni={},Fi={},Hi=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Ri=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,zi={},Bi={},Wi=/\d/,qi=/\d\d/,Ui=/\d{3}/,Vi=/\d{4}/,Yi=/[+-]?\d{6}/,Gi=/\d\d?/,Ki=/\d{1,3}/,Xi=/\d{1,4}/,Qi=/[+-]?\d{1,6}/,Ji=/\d+/,Zi=/[+-]?\d+/,tn=/Z|[+-]\d\d:?\d\d/gi,en=/[+-]?\d+(\.\d{1,3})?/,nn=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,sn={},on={},rn=0,an=1,ln=2,cn=3,dn=4,hn=5,un=6;L("M",["MM",2],"Mo",function(){return this.month()+1}),L("MMM",0,0,function(t){return this.localeData().monthsShort(this,t)}),L("MMMM",0,0,function(t){return this.localeData().months(this,t)}),S("month","M"),H("M",Gi),H("MM",Gi,qi),H("MMM",nn),H("MMMM",nn),B(["M","MM"],function(t,e){e[an]=g(t)-1}),B(["MMM","MMMM"],function(t,e,i,n){var s=i._locale.monthsParse(t,n,i._strict);null!=s?e[an]=s:c(i).invalidMonth=t});var fn="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),pn="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),mn={};t.suppressDeprecationWarnings=!1;var gn=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,vn=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],yn=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],bn=/^\/?Date\((\-?\d+)/i;t.createFromInputFallback=tt("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))}),L(0,["YY",2],0,function(){return this.year()%100}),L(0,["YYYY",4],0,"year"),L(0,["YYYYY",5],0,"year"),L(0,["YYYYYY",6,!0],0,"year"),S("year","y"),H("Y",Zi),H("YY",Gi,qi),H("YYYY",Xi,Vi),H("YYYYY",Qi,Yi),H("YYYYYY",Qi,Yi),B(["YYYYY","YYYYYY"],rn),B("YYYY",function(e,i){i[rn]=2===e.length?t.parseTwoDigitYear(e):g(e)}),B("YY",function(e,i){i[rn]=t.parseTwoDigitYear(e)}),t.parseTwoDigitYear=function(t){return g(t)+(g(t)>68?1900:2e3)};var wn=D("FullYear",!1);L("w",["ww",2],"wo","week"),L("W",["WW",2],"Wo","isoWeek"),S("week","w"),S("isoWeek","W"),H("w",Gi),H("ww",Gi,qi),H("W",Gi),H("WW",Gi,qi),W(["w","ww","W","WW"],function(t,e,i,n){e[n.substr(0,1)]=g(t)});var _n={dow:0,doy:6};L("DDD",["DDDD",3],"DDDo","dayOfYear"),S("dayOfYear","DDD"),H("DDD",Ki),H("DDDD",Ui),B(["DDD","DDDD"],function(t,e,i){i._dayOfYear=g(t)}),t.ISO_8601=function(){};var kn=tt("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(){var t=Pt.apply(null,arguments);return t<this?this:t}),xn=tt("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(){var t=Pt.apply(null,arguments);return t>this?this:t});Ot("Z",":"),Ot("ZZ",""),H("Z",tn),H("ZZ",tn),B(["Z","ZZ"],function(t,e,i){i._useUTC=!0,i._tzm=$t(t)});var Cn=/([\+\-]|\d\d)/gi;t.updateOffset=function(){};var Sn=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,Tn=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/;Xt.fn=Lt.prototype;var En=te(1,"add"),Dn=te(-1,"subtract");t.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";var Pn=tt("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return void 0===t?this.localeData():this.locale(t)});L(0,["gg",2],0,function(){return this.weekYear()%100}),L(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Pe("gggg","weekYear"),Pe("ggggg","weekYear"),Pe("GGGG","isoWeekYear"),Pe("GGGGG","isoWeekYear"),S("weekYear","gg"),S("isoWeekYear","GG"),H("G",Zi),H("g",Zi),H("GG",Gi,qi),H("gg",Gi,qi),H("GGGG",Xi,Vi),H("gggg",Xi,Vi),H("GGGGG",Qi,Yi),H("ggggg",Qi,Yi),W(["gggg","ggggg","GGGG","GGGGG"],function(t,e,i,n){e[n.substr(0,2)]=g(t)}),W(["gg","GG"],function(e,i,n,s){i[s]=t.parseTwoDigitYear(e)}),L("Q",0,0,"quarter"),S("quarter","Q"),H("Q",Wi),B("Q",function(t,e){e[an]=3*(g(t)-1)}),L("D",["DD",2],"Do","date"),S("date","D"),H("D",Gi),H("DD",Gi,qi),H("Do",function(t,e){return t?e._ordinalParse:e._ordinalParseLenient}),B(["D","DD"],ln),B("Do",function(t,e){e[ln]=g(t.match(Gi)[0],10)});var Mn=D("Date",!0);L("d",0,"do","day"),L("dd",0,0,function(t){return this.localeData().weekdaysMin(this,t)}),L("ddd",0,0,function(t){return this.localeData().weekdaysShort(this,t)}),L("dddd",0,0,function(t){return this.localeData().weekdays(this,t)}),L("e",0,0,"weekday"),L("E",0,0,"isoWeekday"),S("day","d"),S("weekday","e"),S("isoWeekday","E"),H("d",Gi),H("e",Gi),H("E",Gi),H("dd",nn),H("ddd",nn),H("dddd",nn),W(["dd","ddd","dddd"],function(t,e,i){var n=i._locale.weekdaysParse(t);null!=n?e.d=n:c(i).invalidWeekday=t}),W(["d","e","E"],function(t,e,i,n){e[n]=g(t)});var An="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),In="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Ln="Su_Mo_Tu_We_Th_Fr_Sa".split("_");L("H",["HH",2],0,"hour"),L("h",["hh",2],0,function(){return this.hours()%12||12}),qe("a",!0),qe("A",!1),S("hour","h"),H("a",Ue),H("A",Ue),H("H",Gi),H("h",Gi),H("HH",Gi,qi),H("hh",Gi,qi),B(["H","HH"],cn),B(["a","A"],function(t,e,i){i._isPm=i._locale.isPM(t),i._meridiem=t}),B(["h","hh"],function(t,e,i){e[cn]=g(t),c(i).bigHour=!0});var jn=/[ap]\.?m?\.?/i,On=D("Hours",!0);L("m",["mm",2],0,"minute"),S("minute","m"),H("m",Gi),H("mm",Gi,qi),B(["m","mm"],dn);var $n=D("Minutes",!1);L("s",["ss",2],0,"second"),S("second","s"),H("s",Gi),H("ss",Gi,qi),B(["s","ss"],hn);var Nn=D("Seconds",!1);L("S",0,0,function(){return~~(this.millisecond()/100)}),L(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),L(0,["SSS",3],0,"millisecond"),L(0,["SSSS",4],0,function(){return 10*this.millisecond()}),L(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),L(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),L(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),L(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),L(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),S("millisecond","ms"),H("S",Ki,Wi),H("SS",Ki,qi),H("SSS",Ki,Ui);var Fn;for(Fn="SSSS";Fn.length<=9;Fn+="S")H(Fn,Ji);for(Fn="S";Fn.length<=9;Fn+="S")B(Fn,Ge);var Hn=D("Milliseconds",!1);L("z",0,0,"zoneAbbr"),L("zz",0,0,"zoneName");var Rn=f.prototype;Rn.add=En,Rn.calendar=ie,Rn.clone=ne,Rn.diff=le,Rn.endOf=we,Rn.format=ue,Rn.from=fe,Rn.fromNow=pe,Rn.to=me,Rn.toNow=ge,Rn.get=A,Rn.invalidAt=De,Rn.isAfter=se,Rn.isBefore=oe,Rn.isBetween=re,Rn.isSame=ae,Rn.isValid=Te,Rn.lang=Pn,Rn.locale=ve,Rn.localeData=ye,Rn.max=xn,Rn.min=kn,Rn.parsingFlags=Ee,Rn.set=A,Rn.startOf=be,Rn.subtract=Dn,Rn.toArray=Ce,Rn.toObject=Se,Rn.toDate=xe,Rn.toISOString=he,Rn.toJSON=he,Rn.toString=de,Rn.unix=ke,Rn.valueOf=_e,Rn.year=wn,Rn.isLeapYear=lt,Rn.weekYear=Ae,Rn.isoWeekYear=Ie,Rn.quarter=Rn.quarters=Oe,Rn.month=X,Rn.daysInMonth=Q,Rn.week=Rn.weeks=ft,Rn.isoWeek=Rn.isoWeeks=pt,Rn.weeksInYear=je,Rn.isoWeeksInYear=Le,Rn.date=Mn,Rn.day=Rn.days=ze,Rn.weekday=Be,Rn.isoWeekday=We,Rn.dayOfYear=gt,Rn.hour=Rn.hours=On,Rn.minute=Rn.minutes=$n,Rn.second=Rn.seconds=Nn,Rn.millisecond=Rn.milliseconds=Hn,Rn.utcOffset=Ht,Rn.utc=zt,Rn.local=Bt,Rn.parseZone=Wt,Rn.hasAlignedHourOffset=qt,Rn.isDST=Ut,Rn.isDSTShifted=Vt,Rn.isLocal=Yt,Rn.isUtcOffset=Gt,Rn.isUtc=Kt,Rn.isUTC=Kt,Rn.zoneAbbr=Ke,Rn.zoneName=Xe,Rn.dates=tt("dates accessor is deprecated. Use date instead.",Mn),Rn.months=tt("months accessor is deprecated. Use month instead",X),Rn.years=tt("years accessor is deprecated. Use year instead",wn),Rn.zone=tt("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",Rt);var zn=Rn,Bn={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},Wn={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",
LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},qn="Invalid date",Un="%d",Vn=/\d{1,2}/,Yn={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},Gn=y.prototype;Gn._calendar=Bn,Gn.calendar=Ze,Gn._longDateFormat=Wn,Gn.longDateFormat=ti,Gn._invalidDate=qn,Gn.invalidDate=ei,Gn._ordinal=Un,Gn.ordinal=ii,Gn._ordinalParse=Vn,Gn.preparse=ni,Gn.postformat=ni,Gn._relativeTime=Yn,Gn.relativeTime=si,Gn.pastFuture=oi,Gn.set=ri,Gn.months=V,Gn._months=fn,Gn.monthsShort=Y,Gn._monthsShort=pn,Gn.monthsParse=G,Gn.week=dt,Gn._week=_n,Gn.firstDayOfYear=ut,Gn.firstDayOfWeek=ht,Gn.weekdays=Ne,Gn._weekdays=An,Gn.weekdaysMin=He,Gn._weekdaysMin=Ln,Gn.weekdaysShort=Fe,Gn._weekdaysShort=In,Gn.weekdaysParse=Re,Gn.isPM=Ve,Gn._meridiemParse=jn,Gn.meridiem=Ye,k("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10,i=1===g(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th";return t+i}}),t.lang=tt("moment.lang is deprecated. Use moment.locale instead.",k),t.langData=tt("moment.langData is deprecated. Use moment.localeData instead.",C);var Kn=Math.abs,Xn=Ci("ms"),Qn=Ci("s"),Jn=Ci("m"),Zn=Ci("h"),ts=Ci("d"),es=Ci("w"),is=Ci("M"),ns=Ci("y"),ss=Ti("milliseconds"),os=Ti("seconds"),rs=Ti("minutes"),as=Ti("hours"),ls=Ti("days"),cs=Ti("months"),ds=Ti("years"),hs=Math.round,us={s:45,m:45,h:22,d:26,M:11},fs=Math.abs,ps=Lt.prototype;ps.abs=pi,ps.add=gi,ps.subtract=vi,ps.as=ki,ps.asMilliseconds=Xn,ps.asSeconds=Qn,ps.asMinutes=Jn,ps.asHours=Zn,ps.asDays=ts,ps.asWeeks=es,ps.asMonths=is,ps.asYears=ns,ps.valueOf=xi,ps._bubble=bi,ps.get=Si,ps.milliseconds=ss,ps.seconds=os,ps.minutes=rs,ps.hours=as,ps.days=ls,ps.weeks=Ei,ps.months=cs,ps.years=ds,ps.humanize=Ai,ps.toISOString=Ii,ps.toString=Ii,ps.toJSON=Ii,ps.locale=ve,ps.localeData=ye,ps.toIsoString=tt("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Ii),ps.lang=Pn,L("X",0,0,"unix"),L("x",0,0,"valueOf"),H("x",Zi),H("X",en),B("X",function(t,e,i){i._d=new Date(1e3*parseFloat(t,10))}),B("x",function(t,e,i){i._d=new Date(g(t))}),t.version="2.10.6",e(Pt),t.fn=zn,t.min=At,t.max=It,t.utc=a,t.unix=Qe,t.months=ci,t.isDate=n,t.locale=k,t.invalid=h,t.duration=Xt,t.isMoment=p,t.weekdays=hi,t.parseZone=Je,t.localeData=C,t.isDuration=jt,t.monthsShort=di,t.weekdaysMin=fi,t.defineLocale=x,t.weekdaysShort=ui,t.normalizeUnits=T,t.relativeTimeThreshold=Mi;var ms=t;return ms}),!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.rome=t()}}(function(){return function t(e,i,n){function s(r,a){if(!i[r]){if(!e[r]){var l="function"==typeof require&&require;if(!a&&l)return l(r,!0);if(o)return o(r,!0);var c=new Error("Cannot find module '"+r+"'");throw c.code="MODULE_NOT_FOUND",c}var d=i[r]={exports:{}};e[r][0].call(d.exports,function(t){var i=e[r][1][t];return s(i?i:t)},d,d.exports,t,e,i,n)}return i[r].exports}for(var o="function"==typeof require&&require,r=0;r<n.length;r++)s(n[r]);return s}({1:[function(t,e){"use strict";function i(t,e,i){function r(){g.sleeping=!0}function a(){return l()}function l(t){var i=e.getBoundingClientRect(),n=document.body.scrollTop||document.documentElement.scrollTop;return v?(t=v.read(),{x:(t.absolute?0:i.left)+t.x,y:(t.absolute?0:i.top)+n+t.y+20}):{x:i.left,y:i.top+n}}function c(t){d(t)}function d(i){if(p)throw new Error("Bullseye can't refresh after being destroyed. Create another instance instead.");if(v&&!i)return g.sleeping=!1,void v.refresh();var n=l(i);v||e===t||(n.y+=e.offsetHeight),t.style.left=n.x+"px",t.style.top=n.y+"px"}function h(){v&&v.destroy(),n.remove(window,"resize",m),p=!0}var u=i,f=e&&e.tagName;f||2!==arguments.length||(u=e),f||(e=t),u||(u={});var p=!1,m=s(d,30),g={update:u.autoupdateToCaret!==!1&&c},v=u.caret&&o(e,g);return d(),u.tracking!==!1&&n.add(window,"resize",m),{read:a,refresh:d,destroy:h,sleep:r}}var n=t("crossvent"),s=t("./throttle"),o=t("./tailormade");e.exports=i},{"./tailormade":11,"./throttle":12,crossvent:18}],2:[function(t,e){(function(i){"use strict";var n,s=i.document,o=t("./getSelectionRaw"),r=t("./getSelectionNullOp"),a=t("./getSelectionSynthetic"),l=t("./isHost");n=l.method(i,"getSelection")?o:"object"==typeof s.selection&&s.selection?a:r,e.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./getSelectionNullOp":3,"./getSelectionRaw":4,"./getSelectionSynthetic":5,"./isHost":6}],3:[function(t,e){"use strict";function i(){}function n(){return{removeAllRanges:i,addRange:i}}e.exports=n},{}],4:[function(t,e){(function(t){"use strict";function i(){return t.getSelection()}e.exports=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],5:[function(t,e){(function(i){"use strict";function n(t){var e=this,i=t.createRange();this._selection=t,this._ranges=[],"Control"===t.type?u(e):d(i)?h(e,i):a(e)}function s(t,e){for(var i,n=b.createControlRange(),s=0,o=e.length;o>s;++s){i=c(e[s]);try{n.add(i)}catch(t){throw new Error("setRanges(): Element could not be added to control selection")}}n.select(),u(t)}function o(t,e){var i=t.getAllRanges();t.removeAllRanges();for(var n=0,s=i.length;s>n;++n)p(e,i[n])||t.addRange(i[n]);t.rangeCount||a(t)}function r(t,e){var i="start",n="end";t.anchorNode=e[i+"Container"],t.anchorOffset=e[i+"Offset"],t.focusNode=e[n+"Container"],t.focusOffset=e[n+"Offset"]}function a(t){t.anchorNode=t.focusNode=null,t.anchorOffset=t.focusOffset=0,t.rangeCount=0,t.isCollapsed=!0,t._ranges.length=0}function l(t){if(!t.length||1!==t[0].nodeType)return!1;for(var e=1,i=t.length;i>e;++e)if(!m(t[0],t[e]))return!1;return!0}function c(t){var e=t.getNodes();if(!l(e))throw new Error("getSingleElementFromRange(): range did not consist of a single element");return e[0]}function d(t){return t&&void 0!==t.text}function h(t,e){t._ranges=[e],r(t,e,!1),t.rangeCount=1,t.isCollapsed=e.collapsed}function u(t){if(t._ranges.length=0,"None"===t._selection.type)a(t);else{var e=t._selection.createRange();if(d(e))h(t,e);else{t.rangeCount=e.length;for(var i,n=0;n<t.rangeCount;++n)i=y.createRange(),i.selectNode(e.item(n)),t._ranges.push(i);t.isCollapsed=1===t.rangeCount&&t._ranges[0].collapsed,r(t,t._ranges[t.rangeCount-1],!1)}}}function f(t,e){for(var i=t._selection.createRange(),n=c(e),s=b.createControlRange(),o=0,r=i.length;r>o;++o)s.add(i.item(o));try{s.add(n)}catch(t){throw new Error("addRange(): Element could not be added to control selection")}s.select(),u(t)}function p(t,e){return t.startContainer===e.startContainer&&t.startOffset===e.startOffset&&t.endContainer===e.endContainer&&t.endOffset===e.endOffset}function m(t,e){for(var i=e;i.parentNode;){if(i.parentNode===t)return!0;i=i.parentNode}return!1}function g(){return new n(i.document.selection)}var v=t("./rangeToTextRange"),y=i.document,b=y.body,w=n.prototype;w.removeAllRanges=function(){var t;try{this._selection.empty(),"None"!==this._selection.type&&(t=b.createTextRange(),t.select(),this._selection.empty())}catch(t){}a(this)},w.addRange=function(t){"Control"===this._selection.type?f(this,t):(v(t).select(),this._ranges[0]=t,this.rangeCount=1,this.isCollapsed=this._ranges[0].collapsed,r(this,t,!1))},w.setRanges=function(t){this.removeAllRanges();var e=t.length;e>1?s(this,t):e&&this.addRange(t[0])},w.getRangeAt=function(t){if(0>t||t>=this.rangeCount)throw new Error("getRangeAt(): index out of bounds");return this._ranges[t].cloneRange()},w.removeRange=function(t){if("Control"!==this._selection.type)return void o(this,t);for(var e,i=this._selection.createRange(),n=c(t),s=b.createControlRange(),r=!1,a=0,l=i.length;l>a;++a)e=i.item(a),e!==n||r?s.add(i.item(a)):r=!0;s.select(),u(this)},w.eachRange=function(t,e){var i=0,n=this._ranges.length;for(i=0;n>i;++i)if(t(this.getRangeAt(i)))return e},w.getAllRanges=function(){var t=[];return this.eachRange(function(e){t.push(e)}),t},w.setSingleRange=function(t){this.removeAllRanges(),this.addRange(t)},e.exports=g}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./rangeToTextRange":7}],6:[function(t,e){"use strict";function i(t,e){var i=typeof t[e];return"function"===i||!("object"!==i||!t[e])||"unknown"===i}function n(t,e){return"undefined"!=typeof t[e]}function s(t){return function(e,i){for(var n=i.length;n--;)if(!t(e,i[n]))return!1;return!0}}e.exports={method:i,methods:s(i),property:n,properties:s(n)}},{}],7:[function(t,e){(function(t){"use strict";function i(t){if(t.collapsed)return s({node:t.startContainer,offset:t.startOffset},!0);var e=s({node:t.startContainer,offset:t.startOffset},!0),i=s({node:t.endContainer,offset:t.endOffset},!1),n=r.createTextRange();return n.setEndPoint("StartToStart",e),n.setEndPoint("EndToEnd",i),n}function n(t){var e=t.nodeType;return 3===e||4===e||8===e}function s(t,e){var i,s,a,l,c=t.offset,d=r.createTextRange(),h=n(t.node);return h?(i=t.node,s=i.parentNode):(l=t.node.childNodes,i=c<l.length?l[c]:null,s=t.node),a=o.createElement("span"),a.innerHTML="&#feff;",i?s.insertBefore(a,i):s.appendChild(a),d.moveToElementText(a),d.collapse(!e),s.removeChild(a),h&&d[e?"moveStart":"moveEnd"]("character",c),d}var o=t.document,r=o.body;e.exports=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],8:[function(t,e){"use strict";var i=t("./getSelection"),n=t("./setSelection");e.exports={get:i,set:n}},{"./getSelection":2,"./setSelection":9}],9:[function(t,e){(function(i){"use strict";function n(t){function e(){var e=s(),i=r.createRange();t.startContainer&&(t.endContainer?i.setEnd(t.endContainer,t.endOffset):i.setEnd(t.startContainer,t.startOffset),i.setStart(t.startContainer,t.startOffset),e.removeAllRanges(),e.addRange(i))}function i(){o(t).select()}r.createRange?e():i()}var s=t("./getSelection"),o=t("./rangeToTextRange"),r=i.document;e.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./getSelection":2,"./rangeToTextRange":7}],10:[function(t,e){"use strict";function i(t){return{start:t.selectionStart,end:t.selectionEnd}}function n(t){function e(e,n){return i!==t&&(i?i.focus():t.blur()),{start:e,end:n}}var i=document.activeElement;i!==t&&t.focus();var n=document.selection.createRange(),r=n.getBookmark(),a=t.value,l=s(a),c=n.parentElement();if(null===c||!o(c))return e(0,0);n.text=l+n.text+l;var d=t.value;return t.value=a,n.moveToBookmark(r),n.select(),e(d.indexOf(l),d.lastIndexOf(l)-l.length)}function s(t){var e;do e="@@marker."+Math.random()*new Date;while(-1!==t.indexOf(e));return e}function o(t){return"INPUT"===t.tagName&&"text"===t.type||"TEXTAREA"===t.tagName}function r(t,e){t.selectionStart=l(t,e.start),t.selectionEnd=l(t,e.end)}function a(t,e){var i=t.createTextRange();"end"===e.start&&"end"===e.end?(i.collapse(!1),i.select()):(i.collapse(!0),i.moveEnd("character",l(t,e.end)),i.moveStart("character",l(t,e.start)),i.select())}function l(t,e){return"end"===e?t.value.length:e||0}function c(t,e){return 2===arguments.length&&h(t,e),d(t)}var d=i,h=r;document.selection&&document.selection.createRange&&(d=n,h=a),e.exports=c},{}],11:[function(t,e){(function(i){"use strict";function n(t,e){function i(){}function n(){return(_?f:p)()}function r(){return x.sleeping?void 0:(x.update||i)(n())}function f(){var e=s(t),i=v(),n=m(i,e.start);return h.body.removeChild(i.mirror),n}function p(){var t=l();if(t.rangeCount){var e=t.getRangeAt(0),i="P"===e.startContainer.nodeName&&0===e.startOffset;if(i)return{x:e.startContainer.offsetLeft,y:e.startContainer.offsetTop,absolute:!0};if(e.getClientRects){var n=e.getClientRects();if(n.length>0)return{x:n[0].left,y:n[0].top,absolute:!0}}}return{x:0,y:0}}function m(e,i){var n=h.createElement("span"),s=e.mirror,o=e.computed;return y(s,g(t).substring(0,i)),"INPUT"===t.tagName&&(s.textContent=s.textContent.replace(/\s/g,"\xa0")),y(n,g(t).substring(i)||"."),s.appendChild(n),{x:n.offsetLeft+parseInt(o.borderLeftWidth),y:n.offsetTop+parseInt(o.borderTopWidth)}}function g(t){return _?t.value:t.innerHTML}function v(){function e(t){s[t]=i[t]}var i=d.getComputedStyle?getComputedStyle(t):t.currentStyle,n=h.createElement("div"),s=n.style;return h.body.appendChild(n),"INPUT"!==t.tagName&&(s.wordWrap="break-word"),s.whiteSpace="pre-wrap",s.position="absolute",s.visibility="hidden",c.forEach(e),u?(s.width=parseInt(i.width)-2+"px",t.scrollHeight>parseInt(i.height)&&(s.overflowY="scroll")):s.overflow="hidden",{mirror:n,computed:i}}function y(t,e){_?t.textContent=e:t.innerHTML=e}function b(e){var i=e?"remove":"add";o[i](t,"keydown",k),o[i](t,"keyup",k),o[i](t,"input",k),o[i](t,"paste",k),o[i](t,"change",k)}function w(){b(!0)}var _="INPUT"===t.tagName||"TEXTAREA"===t.tagName,k=a(r,30),x=e||{};return b(),{read:n,refresh:k,destroy:w}}var s=t("sell"),o=t("crossvent"),r=t("seleccion"),a=t("./throttle"),l=r.get,c=["direction","boxSizing","width","height","overflowX","overflowY","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","paddingTop","paddingRight","paddingBottom","paddingLeft","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","fontSizeAdjust","lineHeight","fontFamily","textAlign","textTransform","textIndent","textDecoration","letterSpacing","wordSpacing"],d=i,h=document,u=null!==d.mozInnerScreenX&&void 0!==d.mozInnerScreenX;e.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./throttle":12,crossvent:18,seleccion:8,sell:10}],12:[function(t,e){"use strict";function i(t,e){var i,n=-1/0;return function(){function s(){clearTimeout(i),i=null;var o=n+e,r=Date.now();r>o?(n=r,t()):i=setTimeout(s,o-r)}i||s()}}e.exports=i},{}],13:[function(t,e){"use strict";var i=t("ticky");e.exports=function(t,e,n){t&&i(function(){t.apply(n||null,e||[])})}},{ticky:16}],14:[function(t,e){"use strict";var i=t("atoa"),n=t("./debounce");e.exports=function(t,e){var s=e||{},o={};return void 0===t&&(t={}),t.on=function(e,i){return o[e]?o[e].push(i):o[e]=[i],t},t.once=function(e,i){return i._once=!0,t.on(e,i),t},t.off=function(e,i){var n=arguments.length;if(1===n)delete o[e];else if(0===n)o={};else{var s=o[e];if(!s)return t;s.splice(s.indexOf(i),1)}return t},t.emit=function(){var e=i(arguments);return t.emitterSnapshot(e.shift()).apply(this,e)},t.emitterSnapshot=function(e){var r=(o[e]||[]).slice(0);return function(){var o=i(arguments),a=this||t;if("error"===e&&s["throws"]!==!1&&!r.length)throw 1===o.length?o[0]:o;return r.forEach(function(i){s.async?n(i,o,a):i.apply(a,o),i._once&&t.off(e,i)}),t}},t}},{"./debounce":13,atoa:15}],15:[function(t,e){e.exports=function(t,e){return Array.prototype.slice.call(t,e)}},{}],16:[function(t,e){var i,n="function"==typeof setImmediate;i=n?function(t){setImmediate(t)}:function(t){setTimeout(t,0)},e.exports=i},{}],17:[function(t,e){(function(t){function i(){try{var t=new n("cat",{detail:{foo:"bar"}});return"cat"===t.type&&"bar"===t.detail.foo}catch(t){}return!1}var n=t.CustomEvent;e.exports=i()?n:"function"==typeof document.createEvent?function(t,e){var i=document.createEvent("CustomEvent");return e?i.initCustomEvent(t,e.bubbles,e.cancelable,e.detail):i.initCustomEvent(t,!1,!1,void 0),i}:function(t,e){var i=document.createEventObject();return i.type=t,e?(i.bubbles=Boolean(e.bubbles),i.cancelable=Boolean(e.cancelable),i.detail=e.detail):(i.bubbles=!1,i.cancelable=!1,i.detail=void 0),i}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],18:[function(t,e){(function(i){"use strict";function n(t,e,i,n){return t.addEventListener(e,i,n)}function s(t,e,i){return t.attachEvent("on"+e,c(t,e,i))}function o(t,e,i,n){return t.removeEventListener(e,i,n)}function r(t,e,i){return t.detachEvent("on"+e,d(t,e,i))}function a(t,e,i){function n(){var t;return p.createEvent?(t=p.createEvent("Event"),t.initEvent(e,!0,!0)):p.createEventObject&&(t=p.createEventObject()),t}function s(){return new u(e,{detail:i})}var o=-1===f.indexOf(e)?s():n();t.dispatchEvent?t.dispatchEvent(o):t.fireEvent("on"+e,o)}function l(t,e,n){return function(e){var s=e||i.event;s.target=s.target||s.srcElement,s.preventDefault=s.preventDefault||function(){s.returnValue=!1},s.stopPropagation=s.stopPropagation||function(){s.cancelBubble=!0},s.which=s.which||s.keyCode,n.call(t,s)}}function c(t,e,i){var n=d(t,e,i)||l(t,e,i);return v.push({wrapper:n,element:t,type:e,fn:i}),n}function d(t,e,i){var n=h(t,e,i);if(n){var s=v[n].wrapper;return v.splice(n,1),s}}function h(t,e,i){var n,s;for(n=0;n<v.length;n++)if(s=v[n],s.element===t&&s.type===e&&s.fn===i)return n}var u=t("custom-event"),f=t("./eventmap"),p=document,m=n,g=o,v=[];i.addEventListener||(m=s,g=r),e.exports={add:m,remove:g,fabricate:a}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./eventmap":19,"custom-event":17}],19:[function(t,e){(function(t){"use strict";var i=[],n="",s=/^on/;for(n in t)s.test(n)&&i.push(n.slice(2));e.exports=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],20:[function(t,e){"use strict";function i(t,e){var i=l[t.id];return i&&i[e.id]}function n(t,e){var i=l[t.id];i||(i=l[t.id]={});var n=o(e);i[e.id]=n,t.on("data",n),t.on("destroyed",s.bind(null,t,e))}function s(t,e){var i=l[t.id];if(i){var n=i[e.id];t.off("data",n),delete i[e.id]}}function o(t){return function(){t.refresh()}}function r(t,e){a(e.associated)||i(t,e)||n(t,e)}var a=t("./isInput"),l={};e.exports={add:r,remove:s}},{"./isInput":30}],21:[function(t,e){"use strict";function i(t){function e(){return Pt}function i(i){return dt=d(i||t,Pt),ft||(ft=r({className:dt.styles.container})),pt=dt.weekdayFormat,mt=pt.length,vt=n,gt=n,yt=n,bt=n,dt.appendTo.appendChild(ft),Y(ft),St=!1,ht=dt.initialValue?dt.initialValue:h.moment(),ut=ht.clone(),Pt.back=O,Pt.container=ft,Pt.destroyed=!1,Pt.destroy=m.bind(Pt,!1),Pt.emitValues=q,Pt.getDate=at,Pt.getDateString=lt,Pt.getMoment=ct,Pt.hide=M,Pt.next=$,Pt.options=v,Pt.options.reset=y,Pt.refresh=U,Pt.restore=e,Pt.setValue=V,Pt.show=P,g(),p(),Pt}function p(){Pt.emit("ready",c(dt))}function m(t){ft&&ft.parentNode&&ft.parentNode.removeChild(ft),dt&&g(!0);var n=Pt.emitterSnapshot("destroyed");return Pt.back=f,Pt.destroyed=!0,Pt.destroy=e,Pt.emitValues=e,Pt.getDate=f,Pt.getDateString=f,Pt.getMoment=f,Pt.hide=e,Pt.next=f,Pt.options=e,Pt.options.reset=e,Pt.refresh=e,Pt.restore=i,Pt.setValue=e,Pt.show=e,Pt.off(),t!==!0&&n(),Pt}function g(t){var e=t?"remove":"add";dt.autoHideOnBlur&&s[e](document.documentElement,"focus",L,!0),dt.autoHideOnClick&&s[e](document,"click",j)}function v(t){return 0===arguments.length?c(dt):(m(),i(t),Pt)}function y(){return v({appendTo:dt.appendTo})}function b(){St||(St=!0,w(),_(),Pt.emit("render"))}function w(){function t(t){var e=r({className:dt.styles.month,parent:wt});0===t&&(_t=r({type:"button",className:dt.styles.back,attributes:{type:"button"},parent:e})),t===dt.monthsInCalendar-1&&(kt=r({type:"button",className:dt.styles.next,attributes:{type:"button"},parent:e}));var i,n=r({className:dt.styles.monthLabel,parent:e}),s=r({type:"table",className:dt.styles.dayTable,parent:e}),o=r({type:"thead",className:dt.styles.dayHead,parent:s}),a=r({type:"tr",className:dt.styles.dayRow,parent:o}),l=r({type:"tbody",className:dt.styles.dayBody,parent:s});for(i=0;mt>i;i++)r({type:"th",className:dt.styles.dayHeadElem,parent:a,text:pt[k(i)]});l.setAttribute(Tt,t),Et.push({label:n,body:l})}if(dt.date){var e;for(Et=[],wt=r({className:dt.styles.date,parent:ft}),e=0;e<dt.monthsInCalendar;e++)t(e);s.add(_t,"click",O),s.add(kt,"click",$),s.add(wt,"click",it)}}function _(){if(dt.time&&dt.timeInterval){var t=r({className:dt.styles.time,parent:ft});xt=r({className:dt.styles.selectedTime,parent:t,text:ht.format(dt.timeFormat)}),s.add(xt,"click",C),Ct=r({className:dt.styles.timeList,parent:t}),s.add(Ct,"click",rt);for(var e=h.moment("00:00:00","HH:mm:ss"),i=e.clone().add(1,"days");e.isBefore(i);)r({className:dt.styles.timeOption,parent:Ct,text:e.format(dt.timeFormat)}),e.add(dt.timeInterval,"seconds")}}function k(t,e){var i=e?-1:1,n=t+dt.weekStart*i;return(n>=mt||0>n)&&(n+=mt*-i),n}function x(){if(dt.time&&St){var t,e,i,n,s=Ct.children,o=s.length;for(n=0;o>n;n++)i=s[n],e=h.moment(a(i),dt.timeFormat),t=ot(ht.clone(),e),i.style.display=X(t,!1,dt.timeValidator)?"block":"none"}}function C(t){var e="boolean"==typeof t?t:"none"===Ct.style.display;e?S():T()}function S(){Ct&&(Ct.style.display="block")}function T(){Ct&&(Ct.style.display="none")}function E(){ft.style.display="inline-block",Pt.emit("show")}function D(){"none"!==ft.style.display&&(ft.style.display="none",Pt.emit("hide"))}function P(){return b(),U(),C(!dt.date),E(),Pt}function M(){return T(),setTimeout(D,0),Pt}function A(){T();var t=u.contains(ft,dt.styles.positioned);return t&&setTimeout(D,0),Pt}function I(t){var e=t.target;if(e===Pt.associated)return!0;for(;e;){if(e===ft)return!0;e=e.parentNode}}function L(t){I(t)||A()}function j(t){I(t)||A()}function O(){N("subtract")}function $(){N("add")}function N(t){var e,i="add"===t?-1:1,n=dt.monthsInCalendar+i*st(bt);ut[t](n,"months"),e=Z(ut.clone()),ht=e||ht,e&&(ut=e.clone()),F(),Pt.emit("add"===t?"next":"back",ht.month())}function F(t){H(),W(),t!==!0&&q(),x()}function H(){function t(t,e){var i=ut.clone().add(e,"months");a(t.label,i.format(dt.monthFormat)),Y(t.body)}if(dt.date&&St){var e=ut.year(),i=ut.month(),n=ut.date();if(n!==yt||i!==vt||e!==gt){var s=z();if(yt=ut.date(),vt=ut.month(),gt=ut.year(),s)return void R();Et.forEach(t),G()}}}function R(){function t(t){var e,i=[];for(e=0;e<t.length;e++)i.push(t[e]);return i}function e(e){return t(e.children)}function i(t){return!u.contains(t,dt.styles.dayPrevMonth)&&!u.contains(t,dt.styles.dayNextMonth)}var n=ut.date()-1;nt(!1),Et.forEach(function(s){var o;B(s.date,ut)&&(o=t(s.body.children).map(e),o=Array.prototype.concat.apply([],o).filter(i),nt(o[n]))})}function z(){function t(t){return!!gt&&B(t.date,ut)}return Et.some(t)}function B(t,e){return t&&e&&t.year()===e.year()&&t.month()===e.month()}function W(){dt.time&&St&&a(xt,ht.format(dt.timeFormat))}function q(){return Pt.emit("data",lt()),Pt.emit("year",ht.year()),Pt.emit("month",ht.month()),Pt.emit("day",ht.day()),Pt.emit("time",ht.format(dt.timeFormat)),Pt}function U(){return gt=!1,vt=!1,yt=!1,F(!0),Pt}function V(t){var e=l(t,dt.inputFormat);if(null!==e)return ht=Z(e)||ht,ut=ht.clone(),F(!0),Pt}function Y(t,e){for(;t&&t.firstChild;)t.removeChild(t.firstChild);e===!0&&t.parentNode.removeChild(t)}function G(){var t;for(t=0;t<dt.monthsInCalendar;t++)K(t)}function K(t){function e(t){var e,n,s;for(e=0;e<t.length;e++)u.children.length===mt&&(u=r({type:"tr",className:dt.styles.dayRow,parent:o.body})),n=t.base.clone().add(e,"days"),s=r({type:"td",parent:u,text:n.format(dt.dayFormat),className:i(n,t.cell.join(" ").split(" ")).join(" ")}),t.selectable&&n.date()===c&&nt(s)}function i(t,e){return X(t,!0,dt.dateValidator)||e.push(m),e}function n(t,e){return t&&e.push(dt.styles.dayConcealed),e}var s,o=Et[t],a=ut.clone().add(t,"months"),l=a.daysInMonth(),c=a.month()!==ht.month()?-1:ht.date(),d=a.clone().date(1),h=k(d.day(),!0),u=r({type:"tr",className:dt.styles.dayRow,parent:o.body}),f=n(0!==t,[dt.styles.dayBodyElem,dt.styles.dayPrevMonth]),p=n(t!==dt.monthsInCalendar-1,[dt.styles.dayBodyElem,dt.styles.dayNextMonth]),m=dt.styles.dayDisabled;e({base:d.clone().subtract(h,"days"),length:h,cell:f}),e({base:d.clone(),length:l,cell:[dt.styles.dayBodyElem],selectable:!0}),s=d.clone().add(l,"days"),e({base:s,length:mt-u.children.length,cell:p}),_t.disabled=!Q(d,!0),kt.disabled=!J(s,!0),o.date=a.clone()}function X(t,e,i){if(!Q(t,e))return!1;if(!J(t,e))return!1;var n=(i||Function.prototype).call(Pt,t.toDate());return n!==!1}function Q(t,e){var i=!!dt.min&&(e?dt.min.clone().startOf("day"):dt.min);return!i||!t.isBefore(i)}function J(t,e){var i=!!dt.max&&(e?dt.max.clone().endOf("day"):dt.max);return!i||!t.isAfter(i)}function Z(t){if(dt.min&&t.isBefore(dt.min))return Z(dt.min.clone());if(dt.max&&t.isAfter(dt.max))return Z(dt.max.clone());var e=t.clone().subtract(1,"days");return et(e,t,"add")?tt(e):(e=t.clone(),et(e,t,"subtract")?tt(e):void 0)}function tt(t){var e,i=t.clone().subtract(dt.timeInterval,"seconds"),n=Math.ceil(Dt/dt.timeInterval);for(e=0;n>e;e++)if(i.add(dt.timeInterval,"seconds"),i.date()>t.date()&&i.subtract(1,"days"),dt.timeValidator.call(Pt,i.toDate())!==!1)return i}function et(t,e,i){for(var n=!1;n===!1&&(t[i](1,"days"),t.month()===e.month());)n=dt.dateValidator.call(Pt,t.toDate());return n!==!1}function it(t){var e=t.target;if(!u.contains(e,dt.styles.dayDisabled)&&u.contains(e,dt.styles.dayBodyElem)){var i=parseInt(a(e),10),n=u.contains(e,dt.styles.dayPrevMonth),s=u.contains(e,dt.styles.dayNextMonth),o=st(e)-st(bt);ht.add(o,"months"),(n||s)&&ht.add(n?-1:1,"months"),nt(e),ht.date(i),ot(ht,Z(ht)||ht),ut=ht.clone(),dt.autoClose===!0&&A(),F()}}function nt(t){bt&&u.remove(bt,dt.styles.selectedDay),t&&u.add(t,dt.styles.selectedDay),bt=t}function st(t){for(var e;t&&t.getAttribute;){if(e=t.getAttribute(Tt),"string"==typeof e)return parseInt(e,10);t=t.parentNode}return 0}function ot(t,e){return t.hour(e.hour()).minute(e.minute()).second(e.second()),t}function rt(t){var e=t.target;if(u.contains(e,dt.styles.timeOption)){var i=h.moment(a(e),dt.timeFormat);ot(ht,i),ut=ht.clone(),q(),W(),!dt.date&&dt.autoClose===!0||"time"===dt.autoClose?A():T()}}function at(){return ht.toDate()}function lt(t){return ht.format(t||dt.inputFormat)}function ct(){return ht.clone()}var dt,ht,ut,ft,pt,mt,gt,vt,yt,bt,wt,_t,kt,xt,Ct,St=!1,Tt="data-rome-offset",Et=[],Dt=86400,Pt=o({associated:t.associated});return i(),setTimeout(p,0),Pt}var n,s=t("crossvent"),o=t("contra/emitter"),r=t("./dom"),a=t("./text"),l=t("./parse"),c=t("./clone"),d=t("./defaults"),h=t("./momentum"),u=t("./classes"),f=t("./noop");e.exports=i},{"./classes":22,"./clone":23,"./defaults":25,"./dom":26,"./momentum":31,"./noop":32,"./parse":33,"./text":45,"contra/emitter":14,crossvent:18}],22:[function(t,e){"use strict";function i(t){return t.className.replace(a,"").split(l)}function n(t,e){t.className=e.join(" ")}function s(t,e){var i=o(t,e);i.push(e),n(t,i)}function o(t,e){var s=i(t),o=s.indexOf(e);return-1!==o&&(s.splice(o,1),n(t,s)),s}function r(t,e){return-1!==i(t).indexOf(e)}var a=/^\s+|\s+$/g,l=/\s+/;e.exports={add:s,remove:o,contains:r}},{}],23:[function(t,e){"use strict";function i(t){var e,s={};for(var o in t)e=t[o],s[o]=e?n.isMoment(e)?e.clone():e._isStylesConfiguration?i(e):e:e;return s}var n=t("./momentum");e.exports=i},{"./momentum":31}],24:[function(t,e){"use strict";function i(t,e){var i,a=n.find(t);return a?a:(i=r(t)?s(t,e):o(t,e),n.assign(t,i),i)}var n=t("./index"),s=t("./input"),o=t("./inline"),r=t("./isInput");e.exports=i},{"./index":27,"./inline":28,"./input":29,"./isInput":30}],25:[function(t,e){"use strict";function i(t,e){var i,r,a=t||{};if(a.autoHideOnClick===r&&(a.autoHideOnClick=!0),a.autoHideOnBlur===r&&(a.autoHideOnBlur=!0),a.autoClose===r&&(a.autoClose=!0),a.appendTo===r&&(a.appendTo=document.body),"parent"===a.appendTo){if(!s(e.associated))throw new Error("Inline calendars must be appended to a parent node explicitly.");a.appendTo=e.associated.parentNode}if(a.invalidate===r&&(a.invalidate=!0),a.required===r&&(a.required=!1),a.date===r&&(a.date=!0),a.time===r&&(a.time=!0),a.date===!1&&a.time===!1)throw new Error("At least one of `date` or `time` must be `true`.");if(a.inputFormat===r&&(a.inputFormat=a.date&&a.time?"YYYY-MM-DD HH:mm":a.date?"YYYY-MM-DD":"HH:mm"),a.initialValue=a.initialValue===r?null:n(a.initialValue,a.inputFormat),a.min=a.min===r?null:n(a.min,a.inputFormat),a.max=a.max===r?null:n(a.max,a.inputFormat),a.timeInterval===r&&(a.timeInterval=1800),a.min&&a.max)if(a.max.isBefore(a.min)&&(i=a.max,a.max=a.min,a.min=i),a.date===!0){if(a.max.clone().subtract(1,"days").isBefore(a.min))throw new Error("`max` must be at least one day after `min`")}else if(1e3*a.timeInterval-a.min%(1e3*a.timeInterval)>a.max-a.min)throw new Error("`min` to `max` range must allow for at least one time option that matches `timeInterval`");if(a.dateValidator===r&&(a.dateValidator=Function.prototype),a.timeValidator===r&&(a.timeValidator=Function.prototype),a.timeFormat===r&&(a.timeFormat="HH:mm"),a.weekStart===r&&(a.weekStart=o.moment().weekday(0).day()),a.weekdayFormat===r&&(a.weekdayFormat="min"),"long"===a.weekdayFormat)a.weekdayFormat=o.moment.weekdays();else if("short"===a.weekdayFormat)a.weekdayFormat=o.moment.weekdaysShort();else if("min"===a.weekdayFormat)a.weekdayFormat=o.moment.weekdaysMin();else if(!Array.isArray(a.weekdayFormat)||a.weekdayFormat.length<7)throw new Error("`weekdays` must be `min`, `short`, or `long`");a.monthsInCalendar===r&&(a.monthsInCalendar=1),a.monthFormat===r&&(a.monthFormat="MMMM YYYY"),a.dayFormat===r&&(a.dayFormat="DD"),a.styles===r&&(a.styles={}),a.styles._isStylesConfiguration=!0;var l=a.styles;return l.back===r&&(l.back="rd-back"),l.container===r&&(l.container="rd-container"),l.positioned===r&&(l.positioned="rd-container-attachment"),l.date===r&&(l.date="rd-date"),l.dayBody===r&&(l.dayBody="rd-days-body"),l.dayBodyElem===r&&(l.dayBodyElem="rd-day-body"),l.dayPrevMonth===r&&(l.dayPrevMonth="rd-day-prev-month"),l.dayNextMonth===r&&(l.dayNextMonth="rd-day-next-month"),l.dayDisabled===r&&(l.dayDisabled="rd-day-disabled"),l.dayConcealed===r&&(l.dayConcealed="rd-day-concealed"),l.dayHead===r&&(l.dayHead="rd-days-head"),l.dayHeadElem===r&&(l.dayHeadElem="rd-day-head"),l.dayRow===r&&(l.dayRow="rd-days-row"),l.dayTable===r&&(l.dayTable="rd-days"),l.month===r&&(l.month="rd-month"),l.monthLabel===r&&(l.monthLabel="rd-month-label"),l.next===r&&(l.next="rd-next"),l.selectedDay===r&&(l.selectedDay="rd-day-selected"),l.selectedTime===r&&(l.selectedTime="rd-time-selected"),l.time===r&&(l.time="rd-time"),l.timeList===r&&(l.timeList="rd-time-list"),l.timeOption===r&&(l.timeOption="rd-time-option"),a}var n=t("./parse"),s=t("./isInput"),o=t("./momentum");e.exports=i},{"./isInput":30,"./momentum":31,"./parse":33}],26:[function(t,e){"use strict";function i(t){var e=t||{};e.type||(e.type="div");var i=document.createElement(e.type);return e.className&&(i.className=e.className),e.text&&(i.innerText=i.textContent=e.text),e.attributes&&Object.keys(e.attributes).forEach(function(t){i.setAttribute(t,e.attributes[t])}),e.parent&&e.parent.appendChild(i),i}e.exports=i},{}],27:[function(t,e){"use strict";function i(t){if("number"!=typeof t&&t&&t.getAttribute)return i(t.getAttribute(o));var e=r[t];return e!==s?e:null}function n(t,e){t.setAttribute(o,e.id=r.push(e)-1)}var s,o="data-rome-id",r=[];e.exports={find:i,assign:n}},{}],28:[function(t,e){"use strict";function i(t,e){var i=e||{};i.appendTo=t,i.associated=t;var s=n(i);return s.show(),s}var n=t("./calendar");e.exports=i},{"./calendar":21}],29:[function(t,e){"use strict";function i(t,e){function i(e){w=r(e||w,C),c.add(C.container,w.styles.positioned),n.add(C.container,"mousedown",f),n.add(C.container,"click",u),C.getDate=b(C.getDate),C.getDateString=b(C.getDateString),C.getMoment=b(C.getMoment),w.initialValue&&(t.value=w.initialValue.format(w.inputFormat)),x=s(C.container,t),C.on("data",v),C.on("show",x.refresh),h(),S()}function d(){h(!0),x.destroy(),x=null}function h(e){var s=e?"remove":"add";n[s](t,"click",m),n[s](t,"touchend",m),n[s](t,"focusin",m),n[s](t,"change",S),n[s](t,"keypress",S),n[s](t,"keydown",S),n[s](t,"input",S),w.invalidate&&n[s](t,"blur",p),e?(C.once("ready",i),C.off("destroyed",d)):(C.off("ready",i),C.once("destroyed",d))}function u(){k=!0,t.focus(),k=!1}function f(){function t(){_=!1}_=!0,setTimeout(t,0)}function p(){_||y()||C.emitValues()}function m(){k||C.show()}function g(){var e=t.value.trim();if(!y()){var i=l.moment(e,w.inputFormat,w.strictParse);C.setValue(i)}}function v(e){t.value=e}function y(){return w.required===!1&&""===t.value.trim()}function b(t){return function(){return y()?null:t.apply(this,arguments)}}var w=e||{};w.associated=t;var _,k,x,C=a(w),S=o(g,30);return i(w),C}var n=t("crossvent"),s=t("bullseye"),o=t("./throttle"),r=(t("./clone"),t("./defaults")),a=t("./calendar"),l=t("./momentum"),c=t("./classes");e.exports=i},{"./calendar":21,"./classes":22,"./clone":23,"./defaults":25,"./momentum":31,"./throttle":46,bullseye:1,crossvent:18}],30:[function(t,e){"use strict";function i(t){return t&&t.nodeName&&"input"===t.nodeName.toLowerCase()}e.exports=i},{}],31:[function(t,e){"use strict";function i(t){return t&&Object.prototype.hasOwnProperty.call(t,"_isAMomentObject");
}var n={moment:null,isMoment:i};e.exports=n},{}],32:[function(t,e){"use strict";function i(){}e.exports=i},{}],33:[function(t,e){"use strict";function i(t,e){return"string"==typeof t?s.moment(t,e):"[object Date]"===Object.prototype.toString.call(t)?s.moment(t):s.isMoment(t)?t.clone():void 0}function n(t,e){var n=i(t,"string"==typeof e?e:null);return n&&n.isValid()?n:null}var s=t("./momentum");e.exports=n},{"./momentum":31}],34:[function(){"use strict";Array.prototype.filter||(Array.prototype.filter=function(t,e){var i=[];return this.forEach(function(n,s,o){t.call(e,n,s,o)&&i.push(n)},e),i})},{}],35:[function(){"use strict";Array.prototype.forEach||(Array.prototype.forEach=function(t,e){if(void 0===this||null===this||"function"!=typeof t)throw new TypeError;for(var i=this,n=i.length,s=0;n>s;s++)s in i&&t.call(e,i[s],s,i)})},{}],36:[function(){"use strict";Array.prototype.indexOf||(Array.prototype.indexOf=function(t,e){if(void 0===this||null===this)throw new TypeError;var i=this.length;for(e=+e||0,1/0===Math.abs(e)?e=0:0>e&&(e+=i,0>e&&(e=0));i>e;e++)if(this[e]===t)return e;return-1})},{}],37:[function(){"use strict";Array.isArray||(Array.isArray=function(t){return""+t!==t&&"[object Array]"===Object.prototype.toString.call(t)})},{}],38:[function(){"use strict";Array.prototype.map||(Array.prototype.map=function(t,e){var i,n,s;if(null==this)throw new TypeError("this is null or not defined");var o=Object(this),r=o.length>>>0;if("function"!=typeof t)throw new TypeError(t+" is not a function");for(arguments.length>1&&(i=e),n=new Array(r),s=0;r>s;)s in o&&(n[s]=t.call(i,o[s],s,o)),s++;return n})},{}],39:[function(){"use strict";Array.prototype.some||(Array.prototype.some=function(t,e){var i,n;if(null==this)throw new TypeError("this is null or not defined");var s=Object(this),o=s.length>>>0;if("function"!=typeof t)throw new TypeError(t+" is not a function");for(arguments.length>1&&(i=e),n=0;o>n;){if(n in s){var r=t.call(i,s[n],n,s);if(r)return!0}n++}return!1})},{}],40:[function(){"use strict";Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var e=Array.prototype.slice.call(arguments,1),i=this,n=function(){},s=function(){var s=this instanceof n&&t?this:t,o=e.concat(Array.prototype.slice.call(arguments));return i.apply(s,o)};return n.prototype=this.prototype,s.prototype=new n,s})},{}],41:[function(){"use strict";var t=Object.prototype.hasOwnProperty,e=!{toString:null}.propertyIsEnumerable("toString"),i=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],n=i.length;Object.keys||(Object.keys=function(s){if("object"!=typeof s&&("function"!=typeof s||null===s))throw new TypeError("Object.keys called on non-object");var o,r,a=[];for(o in s)t.call(s,o)&&a.push(o);if(e)for(r=0;n>r;r++)t.call(s,i[r])&&a.push(i[r]);return a})},{}],42:[function(){"use strict";String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")})},{}],43:[function(t,e){"use strict";t("./polyfills/function.bind"),t("./polyfills/array.foreach"),t("./polyfills/array.map"),t("./polyfills/array.filter"),t("./polyfills/array.isarray"),t("./polyfills/array.indexof"),t("./polyfills/array.some"),t("./polyfills/string.trim"),t("./polyfills/object.keys");var i=t("./core"),n=t("./index"),s=t("./use");i.use=s.bind(i),i.find=n.find,i.val=t("./validators"),e.exports=i},{"./core":24,"./index":27,"./polyfills/array.filter":34,"./polyfills/array.foreach":35,"./polyfills/array.indexof":36,"./polyfills/array.isarray":37,"./polyfills/array.map":38,"./polyfills/array.some":39,"./polyfills/function.bind":40,"./polyfills/object.keys":41,"./polyfills/string.trim":42,"./use":47,"./validators":48}],44:[function(t,e){(function(i){var n=t("./rome"),s=t("./momentum");if(n.use(i.moment),void 0===s.moment)throw new Error("rome depends on moment.js, you can get it at http://momentjs.com, or you could use the bundled distribution file instead.");e.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./momentum":31,"./rome":43}],45:[function(t,e){"use strict";function i(t,e){return 2===arguments.length&&(t.innerText=t.textContent=e),t.innerText||t.textContent}e.exports=i},{}],46:[function(t,e){"use strict";e.exports=function(t,e){var i,n=-1/0;return function(){function s(){clearTimeout(i),i=null;var o=n+e,r=+new Date;r>o?(n=r,t.apply(this,arguments)):i=setTimeout(s,o-r)}i||s()}}},{}],47:[function(t,e){"use strict";function i(t){this.moment=n.moment=t}var n=t("./momentum");e.exports=i},{"./momentum":31}],48:[function(t,e){"use strict";function i(t){return function(e){var i=o(e);return function(n){var a=s.find(e),l=o(n),c=i||a&&a.getMoment();return!c||(a&&r.add(this,a),t(l,c))}}}function n(t,e){return function(i,n){function a(t){var e,i,n=s.find(t);return n?e=i=n.getMoment():Array.isArray(t)?(e=t[0],i=t[1]):e=i=t,n&&r.add(n,this),{start:o(e).startOf("day").toDate(),end:o(i).endOf("day").toDate()}}var l,c=arguments.length;return Array.isArray(i)?l=i:1===c?l=[i]:2===c&&(l=[[i,n]]),function(i){return l.map(a.bind(this))[t](e.bind(this,i))}}}var s=t("./index"),o=t("./parse"),r=t("./association"),a=i(function(t,e){return t>=e}),l=i(function(t,e){return t>e}),c=i(function(t,e){return e>=t}),d=i(function(t,e){return e>t}),h=n("every",function(t,e){return e.start>t||e.end<t}),u=n("some",function(t,e){return e.start<=t&&e.end>=t});e.exports={afterEq:a,after:l,beforeEq:c,before:d,except:h,only:u}},{"./association":20,"./index":27,"./parse":33}]},{},[44])(44)}),function(){function t(i){this.extend(t,google.maps.OverlayView),this.b=[],this.d=null,this.g=100,this.m=!1,i=i||{},void 0==i.backgroundColor&&(i.backgroundColor=this.A),void 0==i.borderColor&&(i.borderColor=this.B),void 0==i.borderRadius&&(i.borderRadius=this.C),void 0==i.borderWidth&&(i.borderWidth=this.D),void 0==i.padding&&(i.padding=this.H),void 0==i.arrowPosition&&(i.arrowPosition=this.u),void 0==i.disableAutoPan&&(i.disableAutoPan=!1),void 0==i.disableAnimation&&(i.disableAnimation=!1),void 0==i.minWidth&&(i.minWidth=this.G),void 0==i.shadowStyle&&(i.shadowStyle=this.I),void 0==i.arrowSize&&(i.arrowSize=this.v),void 0==i.arrowStyle&&(i.arrowStyle=this.w),void 0==i.closeSrc&&(i.closeSrc=this.F),e(this),this.setValues(i)}function e(t){var e=t.c=document.createElement("DIV");e.style.position="absolute",e.style.zIndex=t.g,(t.i=document.createElement("DIV")).style.position="relative";var n=t.j=document.createElement("IMG");n.style.position="absolute",n.style.border=0,n.style.zIndex=t.g+1,n.style.cursor="pointer",n.src=t.get("closeSrc"),google.maps.event.addDomListener(n,"click",function(){t.close(),google.maps.event.trigger(t,"closeclick")});var s=t.e=document.createElement("DIV");s.style.overflowX="auto",s.style.overflowY="auto",s.style.cursor="default",s.style.clear="both",s.style.position="relative";var o=t.k=document.createElement("DIV");s.appendChild(o),o=t.N=document.createElement("DIV"),o.style.position="relative";var a=t.n=document.createElement("DIV"),l=t.l=document.createElement("DIV"),c=i(t);a.style.position=l.style.position="absolute",a.style.left=l.style.left="50%",a.style.height=l.style.height="0",a.style.width=l.style.width="0",a.style.marginLeft=r(-c),a.style.borderWidth=r(c),a.style.borderBottomWidth=0,c=t.a=document.createElement("DIV"),c.style.position="absolute",e.style.display=c.style.display="none",e.appendChild(t.i),e.appendChild(n),e.appendChild(s),o.appendChild(a),o.appendChild(l),e.appendChild(o),e=document.createElement("style"),e.setAttribute("type","text/css"),t.h="_ibani_"+Math.round(1e4*Math.random()),e.textContent="."+t.h+"{-webkit-animation-name:"+t.h+";-webkit-animation-duration:0.5s;-webkit-animation-iteration-count:1;}@-webkit-keyframes "+t.h+" {from {-webkit-transform: scale(0)}50% {-webkit-transform: scale(1.2)}90% {-webkit-transform: scale(0.95)}to {-webkit-transform: scale(1)}}",document.getElementsByTagName("head")[0].appendChild(e)}function i(t){return parseInt(t.get("arrowSize"),10)||0}function n(t){return parseInt(t.get("borderRadius"),10)||0}function s(t){return parseInt(t.get("borderWidth"),10)||0}function o(t){return parseInt(t.get("padding"),10)||0}function r(t){return t?t+"px":t}function a(t){var e="mousedown mousemove mouseover mouseout mouseup mousewheel DOMMouseScroll touchstart touchend touchmove dblclick contextmenu click".split(" "),i=t.c;t.s=[];for(var n,s=0;n=e[s];s++)t.s.push(google.maps.event.addDomListener(i,n,function(t){t.cancelBubble=!0,t.stopPropagation&&t.stopPropagation()}))}function l(t,e,i){h(t),e&&t.setMap(e),i&&(t.set("anchor",i),t.bindTo("anchorPoint",i),t.bindTo("position",i)),t.c.style.display=t.a.style.display="",t.get("disableAnimation")||(t.c.className+=" "+t.h,t.a.className+=" "+t.h),v(t),t.m=!0,t.get("disableAutoPan")||window.setTimeout(function(){t.o()},200)}function c(t){t=t.replace(/^\s*([\S\s]*)\b\s*$/,"$1");var e=document.createElement("DIV");if(e.innerHTML=t,1==e.childNodes.length)return e.removeChild(e.firstChild);for(t=document.createDocumentFragment();e.firstChild;)t.appendChild(e.firstChild);return t}function d(t){if(t)for(var e;e=t.firstChild;)t.removeChild(e)}function h(t){if(t.k){d(t.k);var e=t.getContent();if(e){"string"==typeof e&&(e=c(e)),t.k.appendChild(e);for(var i,e=t.k.getElementsByTagName("IMG"),n=0;i=e[n];n++)google.maps.event.addDomListener(i,"load",function(){var e=!t.get("disableAutoPan");v(t),!e||0!=t.b.length&&0!=t.d.index||t.o()});google.maps.event.trigger(t,"domready")}v(t)}}function u(t){if(t.b&&t.b.length){for(var e,i=0;e=t.b[i];i++)f(t,e.f);t.d.style.zIndex=t.g,i=s(t),e=o(t)/2,t.d.style.borderBottomWidth=0,t.d.style.paddingBottom=r(e+i)}}function f(t,e){var i=t.get("backgroundColor"),a=t.get("borderColor"),l=n(t),c=s(t),d=o(t),h=r(-Math.max(d,l)),l=r(l),u=t.g;e.index&&(u-=e.index);var f,i={cssFloat:"left",position:"relative",cursor:"pointer",backgroundColor:i,border:r(c)+" solid "+a,padding:r(d/2)+" "+r(d),marginRight:h,whiteSpace:"nowrap",borderRadiusTopLeft:l,MozBorderRadiusTopleft:l,webkitBorderTopLeftRadius:l,borderRadiusTopRight:l,MozBorderRadiusTopright:l,webkitBorderTopRightRadius:l,zIndex:u,display:"inline"};for(f in i)e.style[f]=i[f];f=t.get("tabClassName"),void 0!=f&&(e.className+=" "+f)}function p(t,e){e.U=google.maps.event.addDomListener(e,"click",function(){m(t,this)})}function m(t,e){if(e){var i=o(t)/2,n=s(t);if(t.d){var a=t.d;a.style.zIndex=t.g-a.index,a.style.paddingBottom=r(i),a.style.borderBottomWidth=r(n)}e.style.zIndex=t.g,e.style.borderBottomWidth=0,e.style.marginBottomWidth="-10px",e.style.paddingBottom=r(i+n),t.setContent(t.b[e.index].content),h(t),t.d=e,v(t)}else t.setContent(""),h(t)}function g(t,e,i){var n=document.createElement("DIV");return n.style.display="inline",n.style.position="absolute",n.style.visibility="hidden","string"==typeof t?n.innerHTML=t:n.appendChild(t.cloneNode(!0)),document.body.appendChild(n),t=new google.maps.Size(n.offsetWidth,n.offsetHeight),e&&t.width>e&&(n.style.width=r(e),t=new google.maps.Size(n.offsetWidth,n.offsetHeight)),i&&t.height>i&&(n.style.height=r(i),t=new google.maps.Size(n.offsetWidth,n.offsetHeight)),document.body.removeChild(n),delete n,t}function v(t){var e=t.get("map");if(e){var a=o(t);s(t),n(t);var l=i(t),d=e.getDiv(),h=2*l,e=d.offsetWidth-h,d=d.offsetHeight-h-y(t),h=0,u=t.get("minWidth")||0,f=t.get("minHeight")||0,p=t.get("maxWidth")||0,m=t.get("maxHeight")||0,p=Math.min(e,p),m=Math.min(d,m),v=0;if(t.b.length)for(var b,w=0;b=t.b[w];w++){var _=g(b.f,p,m);b=g(b.content,p,m),u<_.width&&(u=_.width),v+=_.width,f<_.height&&(f=_.height),_.height>h&&(h=_.height),u<b.width&&(u=b.width),f<b.height&&(f=b.height)}else w=t.get("content"),"string"==typeof w&&(w=c(w)),w&&(b=g(w,p,m),u<b.width&&(u=b.width),f<b.height&&(f=b.height));p&&(u=Math.min(u,p)),m&&(f=Math.min(f,m)),u=Math.max(u,v),u==v&&(u+=2*a),u=Math.max(u,2*l),u>e&&(u=e),f>d&&(f=d-h),t.i&&(t.t=h,t.i.style.width=r(v)),t.e.style.width=r(u),t.e.style.height=r(f)}n(t),a=s(t),e=2,t.b.length&&t.t&&(e+=t.t),l=2+a,(d=t.e)&&d.clientHeight<d.scrollHeight&&(l+=15),t.j.style.right=r(l),t.j.style.top=r(e+a),t.draw()}function y(t){return t.get("anchor")&&(t=t.get("anchorPoint"))?-1*t.y:0}var b;window.InfoBubble=t,b=t.prototype,b.v=15,b.w=0,b.I=1,b.G=50,b.u=50,b.H=10,b.D=1,b.B="#ccc",b.C=10,b.A="#fff",b.F="https://maps.gstatic.com/intl/en_us/mapfiles/iw_close.gif",b.extend=function(t,e){return function(t){for(var e in t.prototype)this.prototype[e]=t.prototype[e];return this}.apply(t,[e])},b.ea=function(t){this.set("backgroundClassName",t)},t.prototype.setBackgroundClassName=t.prototype.ea,t.prototype.O=function(){this.k.className=this.get("backgroundClassName")},t.prototype.backgroundClassName_changed=t.prototype.O,t.prototype.pa=function(t){this.set("tabClassName",t)},t.prototype.setTabClassName=t.prototype.pa,t.prototype.sa=function(){u(this)},t.prototype.tabClassName_changed=t.prototype.sa,t.prototype.da=function(t){this.set("arrowStyle",t)},t.prototype.setArrowStyle=t.prototype.da,t.prototype.M=function(){this.p()},t.prototype.arrowStyle_changed=t.prototype.M,t.prototype.ca=function(t){this.set("arrowSize",t)},t.prototype.setArrowSize=t.prototype.ca,t.prototype.p=function(){this.r()},t.prototype.arrowSize_changed=t.prototype.p,t.prototype.ba=function(t){this.set("arrowPosition",t)},t.prototype.setArrowPosition=t.prototype.ba,t.prototype.L=function(){var t=parseInt(this.get("arrowPosition"),10)||0;this.n.style.left=this.l.style.left=t+"%",v(this)},t.prototype.arrowPosition_changed=t.prototype.L,t.prototype.setZIndex=function(t){this.set("zIndex",t)},t.prototype.setZIndex=t.prototype.setZIndex,t.prototype.getZIndex=function(){return parseInt(this.get("zIndex"),10)||this.g},t.prototype.ua=function(){var t=this.getZIndex();this.c.style.zIndex=this.g=t,this.j.style.zIndex=t+1},t.prototype.zIndex_changed=t.prototype.ua,t.prototype.na=function(t){this.set("shadowStyle",t)},t.prototype.setShadowStyle=t.prototype.na,t.prototype.qa=function(){var t="",e="",i="";switch(parseInt(this.get("shadowStyle"),10)||0){case 0:t="none";break;case 1:e="40px 15px 10px rgba(33,33,33,0.3)",i="transparent";break;case 2:e="0 0 2px rgba(33,33,33,0.3)",i="rgba(33,33,33,0.35)"}this.a.style.boxShadow=this.a.style.webkitBoxShadow=this.a.style.MozBoxShadow=e,this.a.style.backgroundColor=i,this.m&&(this.a.style.display=t,this.draw())},t.prototype.shadowStyle_changed=t.prototype.qa,t.prototype.ra=function(){this.set("hideCloseButton",!1)},t.prototype.showCloseButton=t.prototype.ra,t.prototype.R=function(){this.set("hideCloseButton",!0)},t.prototype.hideCloseButton=t.prototype.R,t.prototype.S=function(){this.j.style.display=this.get("hideCloseButton")?"none":""},t.prototype.hideCloseButton_changed=t.prototype.S,t.prototype.setBackgroundColor=function(t){t&&this.set("backgroundColor",t)},t.prototype.setBackgroundColor=t.prototype.setBackgroundColor,t.prototype.P=function(){var t=this.get("backgroundColor");this.e.style.backgroundColor=t,this.l.style.borderColor=t+" transparent transparent",u(this)},t.prototype.backgroundColor_changed=t.prototype.P,t.prototype.setBorderColor=function(t){t&&this.set("borderColor",t)},t.prototype.setBorderColor=t.prototype.setBorderColor,t.prototype.Q=function(){var t=this.get("borderColor"),e=this.e,i=this.n;e.style.borderColor=t,i.style.borderColor=t+" transparent transparent",e.style.borderStyle=i.style.borderStyle=this.l.style.borderStyle="solid",u(this)},t.prototype.borderColor_changed=t.prototype.Q,t.prototype.fa=function(t){this.set("borderRadius",t)},t.prototype.setBorderRadius=t.prototype.fa,t.prototype.q=function(){var t=n(this),e=s(this);this.e.style.borderRadius=this.e.style.MozBorderRadius=this.e.style.webkitBorderRadius=this.a.style.borderRadius=this.a.style.MozBorderRadius=this.a.style.webkitBorderRadius=r(t),this.i.style.paddingLeft=this.i.style.paddingRight=r(t+e),v(this)},t.prototype.borderRadius_changed=t.prototype.q,t.prototype.ga=function(t){this.set("borderWidth",t)},t.prototype.setBorderWidth=t.prototype.ga,t.prototype.r=function(){var t=s(this);this.e.style.borderWidth=r(t),this.i.style.top=r(t);var t=s(this),e=i(this),n=parseInt(this.get("arrowStyle"),10)||0,o=r(e),a=r(Math.max(0,e-t)),l=this.n,c=this.l;this.N.style.marginTop=r(-t),l.style.borderTopWidth=o,c.style.borderTopWidth=a,0==n||1==n?(l.style.borderLeftWidth=o,c.style.borderLeftWidth=a):l.style.borderLeftWidth=c.style.borderLeftWidth=0,0==n||2==n?(l.style.borderRightWidth=o,c.style.borderRightWidth=a):l.style.borderRightWidth=c.style.borderRightWidth=0,2>n?(l.style.marginLeft=r(-e),c.style.marginLeft=r(-(e-t))):l.style.marginLeft=c.style.marginLeft=0,l.style.display=0==t?"none":"",u(this),this.q(),v(this)},t.prototype.borderWidth_changed=t.prototype.r,t.prototype.ma=function(t){this.set("padding",t)},t.prototype.setPadding=t.prototype.ma,t.prototype.ha=function(t){t&&this.j&&(this.j.src=t)},t.prototype.setCloseSrc=t.prototype.ha,t.prototype.Z=function(){var t=o(this);this.e.style.padding=r(t),u(this),v(this)},t.prototype.padding_changed=t.prototype.Z,t.prototype.onAdd=function(){this.c||e(this),a(this);var t=this.getPanes();t&&(t.floatPane.appendChild(this.c),t.floatShadow.appendChild(this.a))},t.prototype.onAdd=t.prototype.onAdd,t.prototype.draw=function(){var t=this.getProjection();if(t){var e=this.get("position");if(e){var n=0;this.d&&(n=this.d.offsetHeight);var s=y(this),o=i(this),a=parseInt(this.get("arrowPosition"),10)||0,a=a/100,t=t.fromLatLngToDivPixel(e),e=this.e.offsetWidth,l=this.c.offsetHeight;if(e){l=t.y-(l+o),s&&(l-=s);var c=t.x-e*a;switch(this.c.style.top=r(l),this.c.style.left=r(c),parseInt(this.get("shadowStyle"),10)){case 1:this.a.style.top=r(l+n-1),this.a.style.left=r(c),this.a.style.width=r(e),this.a.style.height=r(this.e.offsetHeight-o);break;case 2:e*=.8,this.a.style.top=r(s?t.y:t.y+o),this.a.style.left=r(t.x-e*a),this.a.style.width=r(e),this.a.style.height=r(2)}}}else this.close()}},t.prototype.draw=t.prototype.draw,t.prototype.onRemove=function(){this.c&&this.c.parentNode&&this.c.parentNode.removeChild(this.c),this.a&&this.a.parentNode&&this.a.parentNode.removeChild(this.a);for(var t,e=0;t=this.s[e];e++)google.maps.event.removeListener(t)},t.prototype.onRemove=t.prototype.onRemove,t.prototype.T=function(){return this.m},t.prototype.isOpen=t.prototype.T,t.prototype.close=function(){this.c&&(this.c.style.display="none",this.c.className=this.c.className.replace(this.h,"")),this.a&&(this.a.style.display="none",this.a.className=this.a.className.replace(this.h,"")),this.m=!1},t.prototype.close=t.prototype.close,t.prototype.open=function(t,e){var i=this;window.setTimeout(function(){l(i,t,e)},0)},t.prototype.open=t.prototype.open,t.prototype.setPosition=function(t){t&&this.set("position",t)},t.prototype.setPosition=t.prototype.setPosition,t.prototype.getPosition=function(){return this.get("position")},t.prototype.getPosition=t.prototype.getPosition,t.prototype.$=function(){this.draw()},t.prototype.position_changed=t.prototype.$,t.prototype.o=function(){var t=this.getProjection();if(t&&this.c){var e=y(this),i=this.c.offsetHeight+e,e=this.get("map"),n=e.getDiv().offsetHeight,s=this.getPosition(),o=t.fromLatLngToContainerPixel(e.getCenter()),s=t.fromLatLngToContainerPixel(s),i=o.y-i,n=n-o.y,o=0;0>i&&(o=(-1*i+n)/2),s.y-=o,s=t.fromContainerPixelToLatLng(s),e.getCenter()!=s&&e.panTo(s)}},t.prototype.panToView=t.prototype.o,t.prototype.setContent=function(t){this.set("content",t)},t.prototype.setContent=t.prototype.setContent,t.prototype.getContent=function(){return this.get("content")},t.prototype.getContent=t.prototype.getContent,t.prototype.oa=function(t){(t=this.b[t-1])&&m(this,t.f)},t.prototype.setTabActive=t.prototype.oa,t.prototype.ja=function(t){this.set("maxWidth",t)},t.prototype.setMaxWidth=t.prototype.ja,t.prototype.W=function(){v(this)},t.prototype.maxWidth_changed=t.prototype.W,t.prototype.ia=function(t){this.set("maxHeight",t)},t.prototype.setMaxHeight=t.prototype.ia,t.prototype.V=function(){v(this)},t.prototype.maxHeight_changed=t.prototype.V,t.prototype.la=function(t){this.set("minWidth",t)},t.prototype.setMinWidth=t.prototype.la,t.prototype.Y=function(){v(this)},t.prototype.minWidth_changed=t.prototype.Y,t.prototype.ka=function(t){this.set("minHeight",t)},t.prototype.setMinHeight=t.prototype.ka,t.prototype.X=function(){v(this)},t.prototype.minHeight_changed=t.prototype.X,t.prototype.J=function(t,e){var i=document.createElement("DIV");i.innerHTML=t,f(this,i),p(this,i),this.i.appendChild(i),this.b.push({label:t,content:e,f:i}),i.index=this.b.length-1,i.style.zIndex=this.g-i.index,this.d||m(this,i),i.className=i.className+" "+this.h,v(this)},t.prototype.addTab=t.prototype.J,t.prototype.ta=function(t,e,i){!this.b.length||0>t||t>=this.b.length||(t=this.b[t],void 0!=e&&(t.f.innerHTML=t.label=e),void 0!=i&&(t.content=i),this.d==t.f&&(this.setContent(t.content),h(this)),v(this))},t.prototype.updateTab=t.prototype.ta,t.prototype.aa=function(t){if(!(!this.b.length||0>t||t>=this.b.length)){var e=this.b[t];e.f.parentNode.removeChild(e.f),google.maps.event.removeListener(e.f.U),this.b.splice(t,1),delete e;for(var i,n=0;i=this.b[n];n++)i.f.index=n;e.f==this.d&&(this.d=this.b[t]?this.b[t].f:this.b[t-1]?this.b[t-1].f:void 0,m(this,this.d)),v(this)}},t.prototype.removeTab=t.prototype.aa,t.prototype.K=function(){this.draw()},t.prototype.anchorPoint_changed=t.prototype.K}(),/*!
 * typeahead.js 1.2.0
 * https://github.com/twitter/typeahead.js
 * Copyright 2013-2017 Twitter, Inc. and other contributors; Licensed MIT
 */
!function(t,e){"function"==typeof define&&define.amd?define(["jquery"],function(t){return e(t)}):"object"==typeof exports?module.exports=e(require("jquery")):e(t.jQuery)}(this,function(t){var e=function(){"use strict";return{isMsie:function(){return!!/(msie|trident)/i.test(navigator.userAgent)&&navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]},isBlankString:function(t){return!t||/^\s*$/.test(t)},escapeRegExChars:function(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isArray:t.isArray,isFunction:t.isFunction,isObject:t.isPlainObject,isUndefined:function(t){return"undefined"==typeof t},isElement:function(t){return!(!t||1!==t.nodeType)},isJQuery:function(e){return e instanceof t},toStr:function(t){return e.isUndefined(t)||null===t?"":t+""},bind:t.proxy,each:function(e,i){function n(t,e){return i(e,t)}t.each(e,n)},map:t.map,filter:t.grep,every:function(e,i){var n=!0;return e?(t.each(e,function(t,s){if(!(n=i.call(null,s,t,e)))return!1}),!!n):n},some:function(e,i){var n=!1;return e?(t.each(e,function(t,s){if(n=i.call(null,s,t,e))return!1}),!!n):n},mixin:t.extend,identity:function(t){return t},clone:function(e){return t.extend(!0,{},e)},getIdGenerator:function(){var t=0;return function(){return t++}},templatify:function(e){function i(){return String(e)}return t.isFunction(e)?e:i},defer:function(t){setTimeout(t,0)},debounce:function(t,e,i){var n,s;return function(){var o,r,a=this,l=arguments;return o=function(){n=null,i||(s=t.apply(a,l))},r=i&&!n,clearTimeout(n),n=setTimeout(o,e),r&&(s=t.apply(a,l)),s}},throttle:function(t,e){var i,n,s,o,r,a;return r=0,a=function(){r=new Date,s=null,o=t.apply(i,n)},function(){var l=new Date,c=e-(l-r);return i=this,n=arguments,c<=0?(clearTimeout(s),s=null,r=l,o=t.apply(i,n)):s||(s=setTimeout(a,c)),o}},stringify:function(t){return e.isString(t)?t:JSON.stringify(t)},guid:function(){function t(t){var e=(Math.random().toString(16)+"000000000").substr(2,8);return t?"-"+e.substr(0,4)+"-"+e.substr(4,4):e}return"tt-"+t()+t(!0)+t(!0)+t()},noop:function(){}}}(),i=function(){"use strict";function t(t){var r,a;return a=e.mixin({},o,t),r={css:s(),classes:a,html:i(a),selectors:n(a)},{css:r.css,html:r.html,classes:r.classes,selectors:r.selectors,mixin:function(t){e.mixin(t,r)}}}function i(t){return{wrapper:'<span class="'+t.wrapper+'"></span>',menu:'<div role="listbox" class="'+t.menu+'"></div>'}}function n(t){var i={};return e.each(t,function(t,e){i[e]="."+t}),i}function s(){var t={wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none",opacity:"1"},input:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},inputWithNoHint:{position:"relative",verticalAlign:"top"},menu:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"},ltr:{left:"0",right:"auto"},rtl:{left:"auto",right:" 0"}};return e.isMsie()&&e.mixin(t.input,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"}),t}var o={wrapper:"twitter-typeahead",input:"tt-input",hint:"tt-hint",menu:"tt-menu",dataset:"tt-dataset",suggestion:"tt-suggestion",selectable:"tt-selectable",empty:"tt-empty",open:"tt-open",cursor:"tt-cursor",highlight:"tt-highlight"};return t}(),n=function(){"use strict";function i(e){e&&e.el||t.error("EventBus initialized without el"),this.$el=t(e.el)}var n,s;return n="typeahead:",s={render:"rendered",cursorchange:"cursorchanged",select:"selected",autocomplete:"autocompleted"},e.mixin(i.prototype,{_trigger:function(e,i){var s=t.Event(n+e);return this.$el.trigger.call(this.$el,s,i||[]),s},before:function(t){var e,i;return e=[].slice.call(arguments,1),i=this._trigger("before"+t,e),i.isDefaultPrevented()},trigger:function(t){var e;this._trigger(t,[].slice.call(arguments,1)),(e=s[t])&&this._trigger(e,[].slice.call(arguments,1))}}),i}(),s=function(){"use strict";function t(t,e,i,n){var s;if(!i)return this;for(e=e.split(l),i=n?a(i,n):i,this._callbacks=this._callbacks||{};s=e.shift();)this._callbacks[s]=this._callbacks[s]||{sync:[],async:[]},this._callbacks[s][t].push(i);return this}function e(e,i,n){return t.call(this,"async",e,i,n)}function i(e,i,n){return t.call(this,"sync",e,i,n)}function n(t){var e;if(!this._callbacks)return this;for(t=t.split(l);e=t.shift();)delete this._callbacks[e];return this}function s(t){var e,i,n,s,r;if(!this._callbacks)return this;for(t=t.split(l),n=[].slice.call(arguments,1);(e=t.shift())&&(i=this._callbacks[e]);)s=o(i.sync,this,[e].concat(n)),r=o(i.async,this,[e].concat(n)),s()&&c(r);return this}function o(t,e,i){function n(){for(var n,s=0,o=t.length;!n&&s<o;s+=1)n=t[s].apply(e,i)===!1;return!n}return n}function r(){var t;return t=window.setImmediate?function(t){setImmediate(function(){t()})}:function(t){setTimeout(function(){t()},0)}}function a(t,e){return t.bind?t.bind(e):function(){t.apply(e,[].slice.call(arguments,0))}}var l=/\s+/,c=r();return{onSync:i,onAsync:e,off:n,trigger:s}}(),o=function(t){"use strict";function i(t){return o[t.toUpperCase()]||t}function n(t,n,s,o){for(var r,a=[],l=0,c=t.length;l<c;l++){var d=e.escapeRegExChars(t[l]);o&&(d=d.replace(/\S/g,i)),a.push(d)}return r=s?"\\b("+a.join("|")+")\\b":"("+a.join("|")+")",n?new RegExp(r):new RegExp(r,"i")}var s={node:null,pattern:null,tagName:"strong",className:null,wordsOnly:!1,caseSensitive:!1,diacriticInsensitive:!1},o={A:"[Aa\xaa\xc0-\xc5\xe0-\xe5\u0100-\u0105\u01cd\u01ce\u0200-\u0203\u0226\u0227\u1d2c\u1d43\u1e00\u1e01\u1e9a\u1ea0-\u1ea3\u2090\u2100\u2101\u213b\u249c\u24b6\u24d0\u3371-\u3374\u3380-\u3384\u3388\u3389\u33a9-\u33af\u33c2\u33ca\u33df\u33ff\uff21\uff41]",B:"[Bb\u1d2e\u1d47\u1e02-\u1e07\u212c\u249d\u24b7\u24d1\u3374\u3385-\u3387\u33c3\u33c8\u33d4\u33dd\uff22\uff42]",C:"[Cc\xc7\xe7\u0106-\u010d\u1d9c\u2100\u2102\u2103\u2105\u2106\u212d\u216d\u217d\u249e\u24b8\u24d2\u3376\u3388\u3389\u339d\u33a0\u33a4\u33c4-\u33c7\uff23\uff43]",D:"[Dd\u010e\u010f\u01c4-\u01c6\u01f1-\u01f3\u1d30\u1d48\u1e0a-\u1e13\u2145\u2146\u216e\u217e\u249f\u24b9\u24d3\u32cf\u3372\u3377-\u3379\u3397\u33ad-\u33af\u33c5\u33c8\uff24\uff44]",E:"[Ee\xc8-\xcb\xe8-\xeb\u0112-\u011b\u0204-\u0207\u0228\u0229\u1d31\u1d49\u1e18-\u1e1b\u1eb8-\u1ebd\u2091\u2121\u212f\u2130\u2147\u24a0\u24ba\u24d4\u3250\u32cd\u32ce\uff25\uff45]",F:"[Ff\u1da0\u1e1e\u1e1f\u2109\u2131\u213b\u24a1\u24bb\u24d5\u338a-\u338c\u3399\ufb00-\ufb04\uff26\uff46]",G:"[Gg\u011c-\u0123\u01e6\u01e7\u01f4\u01f5\u1d33\u1d4d\u1e20\u1e21\u210a\u24a2\u24bc\u24d6\u32cc\u32cd\u3387\u338d-\u338f\u3393\u33ac\u33c6\u33c9\u33d2\u33ff\uff27\uff47]",H:"[Hh\u0124\u0125\u021e\u021f\u02b0\u1d34\u1e22-\u1e2b\u1e96\u210b-\u210e\u24a3\u24bd\u24d7\u32cc\u3371\u3390-\u3394\u33ca\u33cb\u33d7\uff28\uff48]",I:"[Ii\xcc-\xcf\xec-\xef\u0128-\u0130\u0132\u0133\u01cf\u01d0\u0208-\u020b\u1d35\u1d62\u1e2c\u1e2d\u1ec8-\u1ecb\u2071\u2110\u2111\u2139\u2148\u2160-\u2163\u2165-\u2168\u216a\u216b\u2170-\u2173\u2175-\u2178\u217a\u217b\u24a4\u24be\u24d8\u337a\u33cc\u33d5\ufb01\ufb03\uff29\uff49]",J:"[Jj\u0132-\u0135\u01c7-\u01cc\u01f0\u02b2\u1d36\u2149\u24a5\u24bf\u24d9\u2c7c\uff2a\uff4a]",K:"[Kk\u0136\u0137\u01e8\u01e9\u1d37\u1d4f\u1e30-\u1e35\u212a\u24a6\u24c0\u24da\u3384\u3385\u3389\u338f\u3391\u3398\u339e\u33a2\u33a6\u33aa\u33b8\u33be\u33c0\u33c6\u33cd-\u33cf\uff2b\uff4b]",L:"[Ll\u0139-\u0140\u01c7-\u01c9\u02e1\u1d38\u1e36\u1e37\u1e3a-\u1e3d\u2112\u2113\u2121\u216c\u217c\u24a7\u24c1\u24db\u32cf\u3388\u3389\u33d0-\u33d3\u33d5\u33d6\u33ff\ufb02\ufb04\uff2c\uff4c]",M:"[Mm\u1d39\u1d50\u1e3e-\u1e43\u2120\u2122\u2133\u216f\u217f\u24a8\u24c2\u24dc\u3377-\u3379\u3383\u3386\u338e\u3392\u3396\u3399-\u33a8\u33ab\u33b3\u33b7\u33b9\u33bd\u33bf\u33c1\u33c2\u33ce\u33d0\u33d4-\u33d6\u33d8\u33d9\u33de\u33df\uff2d\uff4d]",N:"[Nn\xd1\xf1\u0143-\u0149\u01ca-\u01cc\u01f8\u01f9\u1d3a\u1e44-\u1e4b\u207f\u2115\u2116\u24a9\u24c3\u24dd\u3381\u338b\u339a\u33b1\u33b5\u33bb\u33cc\u33d1\uff2e\uff4e]",O:"[Oo\xba\xd2-\xd6\xf2-\xf6\u014c-\u0151\u01a0\u01a1\u01d1\u01d2\u01ea\u01eb\u020c-\u020f\u022e\u022f\u1d3c\u1d52\u1ecc-\u1ecf\u2092\u2105\u2116\u2134\u24aa\u24c4\u24de\u3375\u33c7\u33d2\u33d6\uff2f\uff4f]",P:"[Pp\u1d3e\u1d56\u1e54-\u1e57\u2119\u24ab\u24c5\u24df\u3250\u3371\u3376\u3380\u338a\u33a9-\u33ac\u33b0\u33b4\u33ba\u33cb\u33d7-\u33da\uff30\uff50]",Q:"[Qq\u211a\u24ac\u24c6\u24e0\u33c3\uff31\uff51]",R:"[Rr\u0154-\u0159\u0210-\u0213\u02b3\u1d3f\u1d63\u1e58-\u1e5b\u1e5e\u1e5f\u20a8\u211b-\u211d\u24ad\u24c7\u24e1\u32cd\u3374\u33ad-\u33af\u33da\u33db\uff32\uff52]",S:"[Ss\u015a-\u0161\u017f\u0218\u0219\u02e2\u1e60-\u1e63\u20a8\u2101\u2120\u24ae\u24c8\u24e2\u33a7\u33a8\u33ae-\u33b3\u33db\u33dc\ufb06\uff33\uff53]",T:"[Tt\u0162-\u0165\u021a\u021b\u1d40\u1d57\u1e6a-\u1e71\u1e97\u2121\u2122\u24af\u24c9\u24e3\u3250\u32cf\u3394\u33cf\ufb05\ufb06\uff34\uff54]",U:"[Uu\xd9-\xdc\xf9-\xfc\u0168-\u0173\u01af\u01b0\u01d3\u01d4\u0214-\u0217\u1d41\u1d58\u1d64\u1e72-\u1e77\u1ee4-\u1ee7\u2106\u24b0\u24ca\u24e4\u3373\u337a\uff35\uff55]",V:"[Vv\u1d5b\u1d65\u1e7c-\u1e7f\u2163-\u2167\u2173-\u2177\u24b1\u24cb\u24e5\u2c7d\u32ce\u3375\u33b4-\u33b9\u33dc\u33de\uff36\uff56]",W:"[Ww\u0174\u0175\u02b7\u1d42\u1e80-\u1e89\u1e98\u24b2\u24cc\u24e6\u33ba-\u33bf\u33dd\uff37\uff57]",X:"[Xx\u02e3\u1e8a-\u1e8d\u2093\u213b\u2168-\u216b\u2178-\u217b\u24b3\u24cd\u24e7\u33d3\uff38\uff58]",Y:"[Yy\xdd\xfd\xff\u0176-\u0178\u0232\u0233\u02b8\u1e8e\u1e8f\u1e99\u1ef2-\u1ef9\u24b4\u24ce\u24e8\u33c9\uff39\uff59]",Z:"[Zz\u0179-\u017e\u01f1-\u01f3\u1dbb\u1e90-\u1e95\u2124\u2128\u24b5\u24cf\u24e9\u3390-\u3394\uff3a\uff5a]"};return function(i){function o(e){var n,s,o;return(n=a.exec(e.data))&&(o=t.createElement(i.tagName),i.className&&(o.className=i.className),s=e.splitText(n.index),s.splitText(n[0].length),o.appendChild(s.cloneNode(!0)),e.parentNode.replaceChild(o,s)),!!n}function r(t,e){for(var i,n=3,s=0;s<t.childNodes.length;s++)i=t.childNodes[s],i.nodeType===n?s+=e(i)?1:0:r(i,e)}var a;i=e.mixin({},s,i),i.node&&i.pattern&&(i.pattern=e.isArray(i.pattern)?i.pattern:[i.pattern],a=n(i.pattern,i.caseSensitive,i.wordsOnly,i.diacriticInsensitive),r(i.node,o))}}(window.document),r=function(){"use strict";function i(i,s){i=i||{},i.input||t.error("input is missing"),s.mixin(this),this.$hint=t(i.hint),this.$input=t(i.input),this.$input.attr({"aria-activedescendant":"","aria-owns":this.$input.attr("id")+"_listbox",role:"combobox","aria-readonly":"true","aria-autocomplete":"list"}),t(s.menu).attr("id",this.$input.attr("id")+"_listbox"),this.query=this.$input.val(),this.queryWhenFocused=this.hasFocus()?this.query:null,this.$overflowHelper=n(this.$input),this._checkLanguageDirection(),0===this.$hint.length&&(this.setHint=this.getHint=this.clearHint=this.clearHintIfInvalid=e.noop),this.onSync("cursorchange",this._updateDescendent)}function n(e){return t('<pre aria-hidden="true"></pre>').css({position:"absolute",visibility:"hidden",whiteSpace:"pre",fontFamily:e.css("font-family"),fontSize:e.css("font-size"),fontStyle:e.css("font-style"),fontVariant:e.css("font-variant"),fontWeight:e.css("font-weight"),wordSpacing:e.css("word-spacing"),letterSpacing:e.css("letter-spacing"),textIndent:e.css("text-indent"),textRendering:e.css("text-rendering"),textTransform:e.css("text-transform")}).insertAfter(e)}function o(t,e){return i.normalizeQuery(t)===i.normalizeQuery(e)}function r(t){return t.altKey||t.ctrlKey||t.metaKey||t.shiftKey}var a;return a={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"},i.normalizeQuery=function(t){return e.toStr(t).replace(/^\s*/g,"").replace(/\s{2,}/g," ")},e.mixin(i.prototype,s,{_onBlur:function(){this.resetInputValue(),this.trigger("blurred")},_onFocus:function(){this.queryWhenFocused=this.query,this.trigger("focused")},_onKeydown:function(t){var e=a[t.which||t.keyCode];this._managePreventDefault(e,t),e&&this._shouldTrigger(e,t)&&this.trigger(e+"Keyed",t)},_onInput:function(){this._setQuery(this.getInputValue()),this.clearHintIfInvalid(),this._checkLanguageDirection()},_managePreventDefault:function(t,e){var i;switch(t){case"up":case"down":i=!r(e);break;default:i=!1}i&&e.preventDefault()},_shouldTrigger:function(t,e){var i;switch(t){case"tab":i=!r(e);break;default:i=!0}return i},_checkLanguageDirection:function(){var t=(this.$input.css("direction")||"ltr").toLowerCase();this.dir!==t&&(this.dir=t,this.$hint.attr("dir",t),this.trigger("langDirChanged",t))},_setQuery:function(t,e){var i,n;i=o(t,this.query),n=!!i&&this.query.length!==t.length,this.query=t,e||i?!e&&n&&this.trigger("whitespaceChanged",this.query):this.trigger("queryChanged",this.query)},_updateDescendent:function(t,e){this.$input.attr("aria-activedescendant",e)},bind:function(){var t,i,n,s,o=this;return t=e.bind(this._onBlur,this),i=e.bind(this._onFocus,this),n=e.bind(this._onKeydown,this),s=e.bind(this._onInput,this),this.$input.on("blur.tt",t).on("focus.tt",i).on("keydown.tt",n),!e.isMsie()||e.isMsie()>9?this.$input.on("input.tt",s):this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",function(t){a[t.which||t.keyCode]||e.defer(e.bind(o._onInput,o,t))}),this},focus:function(){this.$input.focus()},blur:function(){this.$input.blur()},getLangDir:function(){return this.dir},getQuery:function(){return this.query||""},setQuery:function(t,e){this.setInputValue(t),this._setQuery(t,e)},hasQueryChangedSinceLastFocus:function(){return this.query!==this.queryWhenFocused},getInputValue:function(){return this.$input.val()},setInputValue:function(t){this.$input.val(t),this.clearHintIfInvalid(),this._checkLanguageDirection()},resetInputValue:function(){this.setInputValue(this.query)},getHint:function(){return this.$hint.val()},setHint:function(t){this.$hint.val(t)},clearHint:function(){this.setHint("")},clearHintIfInvalid:function(){var t,e,i,n;t=this.getInputValue(),e=this.getHint(),i=t!==e&&0===e.indexOf(t),n=""!==t&&i&&!this.hasOverflow(),!n&&this.clearHint()},hasFocus:function(){return this.$input.is(":focus")},hasOverflow:function(){var t=this.$input.width()-2;return this.$overflowHelper.text(this.getInputValue()),this.$overflowHelper.width()>=t},isCursorAtEnd:function(){var t,i,n;return t=this.$input.val().length,i=this.$input[0].selectionStart,e.isNumber(i)?i===t:!document.selection||(n=document.selection.createRange(),n.moveStart("character",-t),t===n.text.length)},destroy:function(){this.$hint.off(".tt"),this.$input.off(".tt"),this.$overflowHelper.remove(),this.$hint=this.$input=this.$overflowHelper=t("<div>")}}),i}(),a=function(){"use strict";function i(i,s){i=i||{},i.templates=i.templates||{},i.templates.notFound=i.templates.notFound||i.templates.empty,i.source||t.error("missing source"),i.node||t.error("missing node"),i.name&&!a(i.name)&&t.error("invalid dataset name: "+i.name),s.mixin(this),this.highlight=!!i.highlight,this.name=e.toStr(i.name||c()),this.limit=i.limit||5,this.displayFn=n(i.display||i.displayKey),this.templates=r(i.templates,this.displayFn),this.source=i.source.__ttAdapter?i.source.__ttAdapter():i.source,this.async=e.isUndefined(i.async)?this.source.length>2:!!i.async,this._resetLastSuggestion(),this.$el=t(i.node).attr("role","presentation").addClass(this.classes.dataset).addClass(this.classes.dataset+"-"+this.name)}function n(t){function i(e){return e[t]}return t=t||e.stringify,e.isFunction(t)?t:i}function r(i,n){function s(i){return t('<div role="option">').attr("id",e.guid()).text(n(i))}return{notFound:i.notFound&&e.templatify(i.notFound),pending:i.pending&&e.templatify(i.pending),header:i.header&&e.templatify(i.header),footer:i.footer&&e.templatify(i.footer),suggestion:i.suggestion||s}}function a(t){return/^[_a-zA-Z0-9-]+$/.test(t)}var l,c;return l={dataset:"tt-selectable-dataset",val:"tt-selectable-display",obj:"tt-selectable-object"},c=e.getIdGenerator(),i.extractData=function(e){var i=t(e);return i.data(l.obj)?{dataset:i.data(l.dataset)||"",val:i.data(l.val)||"",obj:i.data(l.obj)||null}:null},e.mixin(i.prototype,s,{_overwrite:function(t,e){e=e||[],e.length?this._renderSuggestions(t,e):this.async&&this.templates.pending?this._renderPending(t):!this.async&&this.templates.notFound?this._renderNotFound(t):this._empty(),this.trigger("rendered",e,!1,this.name)},_append:function(t,e){e=e||[],e.length&&this.$lastSuggestion.length?this._appendSuggestions(t,e):e.length?this._renderSuggestions(t,e):!this.$lastSuggestion.length&&this.templates.notFound&&this._renderNotFound(t),this.trigger("rendered",e,!0,this.name)},_renderSuggestions:function(t,e){var i;i=this._getSuggestionsFragment(t,e),this.$lastSuggestion=i.children().last(),this.$el.html(i).prepend(this._getHeader(t,e)).append(this._getFooter(t,e))},_appendSuggestions:function(t,e){var i,n;i=this._getSuggestionsFragment(t,e),n=i.children().last(),this.$lastSuggestion.after(i),this.$lastSuggestion=n},_renderPending:function(t){var e=this.templates.pending;this._resetLastSuggestion(),e&&this.$el.html(e({query:t,dataset:this.name}))},_renderNotFound:function(t){var e=this.templates.notFound;this._resetLastSuggestion(),e&&this.$el.html(e({query:t,dataset:this.name}))},_empty:function(){this.$el.empty(),this._resetLastSuggestion()},_getSuggestionsFragment:function(i,n){var s,r=this;return s=document.createDocumentFragment(),e.each(n,function(e){var n,o;o=r._injectQuery(i,e),n=t(r.templates.suggestion(o)).data(l.dataset,r.name).data(l.obj,e).data(l.val,r.displayFn(e)).addClass(r.classes.suggestion+" "+r.classes.selectable),s.appendChild(n[0])}),this.highlight&&o({className:this.classes.highlight,node:s,pattern:i}),t(s)},_getFooter:function(t,e){return this.templates.footer?this.templates.footer({query:t,suggestions:e,dataset:this.name}):null},_getHeader:function(t,e){return this.templates.header?this.templates.header({query:t,suggestions:e,dataset:this.name}):null},_resetLastSuggestion:function(){this.$lastSuggestion=t()},_injectQuery:function(t,i){return e.isObject(i)?e.mixin({_query:t},i):i},update:function(e){function i(t){r||(r=!0,t=(t||[]).slice(0,s.limit),a=t.length,s._overwrite(e,t),a<s.limit&&s.async&&s.trigger("asyncRequested",e,s.name))}function n(i){if(i=i||[],!o&&a<s.limit){s.cancel=t.noop;var n=Math.abs(a-s.limit);a+=n,s._append(e,i.slice(0,n)),s.async&&s.trigger("asyncReceived",e,s.name)}}var s=this,o=!1,r=!1,a=0;this.cancel(),this.cancel=function(){o=!0,s.cancel=t.noop,s.async&&s.trigger("asyncCanceled",e,s.name)},this.source(e,i,n),!r&&i([])},cancel:t.noop,clear:function(){this._empty(),this.cancel(),this.trigger("cleared")},isEmpty:function(){return this.$el.is(":empty")},destroy:function(){this.$el=t("<div>")}}),i}(),l=function(){"use strict";function i(i,n){function s(e){var i=o.$node.find(e.node).first();return e.node=i.length?i:t("<div>").appendTo(o.$node),new a(e,n)}var o=this;i=i||{},i.node||t.error("node is required"),n.mixin(this),this.$node=t(i.node),this.query=null,this.datasets=e.map(i.datasets,s)}return e.mixin(i.prototype,s,{_onSelectableClick:function(e){this.trigger("selectableClicked",t(e.currentTarget))},_onRendered:function(t,e,i,n){this.$node.toggleClass(this.classes.empty,this._allDatasetsEmpty()),this.trigger("datasetRendered",e,i,n)},_onCleared:function(){this.$node.toggleClass(this.classes.empty,this._allDatasetsEmpty()),this.trigger("datasetCleared")},_propagate:function(){this.trigger.apply(this,arguments)},_allDatasetsEmpty:function(){return e.every(this.datasets,e.bind(function(t){var e=t.isEmpty();return this.$node.attr("aria-expanded",!e),e},this))},_getSelectables:function(){return this.$node.find(this.selectors.selectable)},_removeCursor:function(){var t=this.getActiveSelectable();t&&t.removeClass(this.classes.cursor)},_ensureVisible:function(t){var e,i,n,s;e=t.position().top,i=e+t.outerHeight(!0),n=this.$node.scrollTop(),s=this.$node.height()+parseInt(this.$node.css("paddingTop"),10)+parseInt(this.$node.css("paddingBottom"),10),e<0?this.$node.scrollTop(n+e):s<i&&this.$node.scrollTop(n+(i-s))},bind:function(){var i,n=this;return i=e.bind(this._onSelectableClick,this),this.$node.on("click.tt",this.selectors.selectable,i),this.$node.on("mouseover",this.selectors.selectable,function(){n.setCursor(t(this))}),this.$node.on("mouseleave",function(){n._removeCursor()}),e.each(this.datasets,function(t){t.onSync("asyncRequested",n._propagate,n).onSync("asyncCanceled",n._propagate,n).onSync("asyncReceived",n._propagate,n).onSync("rendered",n._onRendered,n).onSync("cleared",n._onCleared,n)}),this},isOpen:function(){return this.$node.hasClass(this.classes.open)},open:function(){this.$node.scrollTop(0),this.$node.addClass(this.classes.open)},close:function(){this.$node.attr("aria-expanded",!1),this.$node.removeClass(this.classes.open),this._removeCursor()},setLanguageDirection:function(t){this.$node.attr("dir",t)},selectableRelativeToCursor:function(t){var e,i,n,s;return i=this.getActiveSelectable(),e=this._getSelectables(),n=i?e.index(i):-1,s=n+t,s=(s+1)%(e.length+1)-1,s=s<-1?e.length-1:s,s===-1?null:e.eq(s)},setCursor:function(t){this._removeCursor(),(t=t&&t.first())&&(t.addClass(this.classes.cursor),this._ensureVisible(t))},getSelectableData:function(t){return t&&t.length?a.extractData(t):null},getActiveSelectable:function(){var t=this._getSelectables().filter(this.selectors.cursor).first();return t.length?t:null},getTopSelectable:function(){var t=this._getSelectables().first();return t.length?t:null},update:function(t){function i(e){e.update(t)}var n=t!==this.query;return n&&(this.query=t,e.each(this.datasets,i)),n},empty:function(){function t(t){t.clear()}e.each(this.datasets,t),this.query=null,this.$node.addClass(this.classes.empty)},destroy:function(){function i(t){t.destroy()}this.$node.off(".tt"),this.$node=t("<div>"),e.each(this.datasets,i)}}),i}(),c=function(){"use strict";function i(i){this.$el=t("<span></span>",{role:"status","aria-live":"polite"}).css({position:"absolute",padding:"0",border:"0",height:"1px",width:"1px","margin-bottom":"-1px","margin-right":"-1px",overflow:"hidden",clip:"rect(0 0 0 0)","white-space":"nowrap"}),i.$input.after(this.$el),e.each(i.menu.datasets,e.bind(function(t){t.onSync&&(t.onSync("rendered",e.bind(this.update,this)),t.onSync("cleared",e.bind(this.cleared,this)))},this))}return e.mixin(i.prototype,{update:function(t,e){var i,n=e.length;i=1===n?{result:"result",is:"is"}:{result:"results",is:"are"},this.$el.text(n+" "+i.result+" "+i.is+" available, use up and down arrow keys to navigate.")},cleared:function(){this.$el.text("")}}),i}(),d=function(){"use strict";function t(){l.apply(this,[].slice.call(arguments,0))}var i=l.prototype;return e.mixin(t.prototype,l.prototype,{open:function(){return!this._allDatasetsEmpty()&&this._show(),i.open.apply(this,[].slice.call(arguments,0))},close:function(){return this._hide(),i.close.apply(this,[].slice.call(arguments,0))},_onRendered:function(){return this._allDatasetsEmpty()?this._hide():this.isOpen()&&this._show(),i._onRendered.apply(this,[].slice.call(arguments,0))},_onCleared:function(){return this._allDatasetsEmpty()?this._hide():this.isOpen()&&this._show(),i._onCleared.apply(this,[].slice.call(arguments,0))},setLanguageDirection:function(t){return this.$node.css("ltr"===t?this.css.ltr:this.css.rtl),i.setLanguageDirection.apply(this,[].slice.call(arguments,0))},_hide:function(){this.$node.hide()},_show:function(){this.$node.css("display","block")}}),t}(),h=function(){"use strict";function i(i,s){var o,r,a,l,c,d,h,u,f,p,m;i=i||{},i.input||t.error("missing input"),i.menu||t.error("missing menu"),i.eventBus||t.error("missing event bus"),s.mixin(this),this.eventBus=i.eventBus,this.minLength=e.isNumber(i.minLength)?i.minLength:1,this.input=i.input,this.menu=i.menu,this.enabled=!0,this.autoselect=!!i.autoselect,this.active=!1,this.input.hasFocus()&&this.activate(),this.dir=this.input.getLangDir(),this._hacks(),this.menu.bind().onSync("selectableClicked",this._onSelectableClicked,this).onSync("asyncRequested",this._onAsyncRequested,this).onSync("asyncCanceled",this._onAsyncCanceled,this).onSync("asyncReceived",this._onAsyncReceived,this).onSync("datasetRendered",this._onDatasetRendered,this).onSync("datasetCleared",this._onDatasetCleared,this),o=n(this,"activate","open","_onFocused"),r=n(this,"deactivate","_onBlurred"),a=n(this,"isActive","isOpen","_onEnterKeyed"),l=n(this,"isActive","isOpen","_onTabKeyed"),c=n(this,"isActive","_onEscKeyed"),d=n(this,"isActive","open","_onUpKeyed"),h=n(this,"isActive","open","_onDownKeyed"),u=n(this,"isActive","isOpen","_onLeftKeyed"),f=n(this,"isActive","isOpen","_onRightKeyed"),p=n(this,"_openIfActive","_onQueryChanged"),m=n(this,"_openIfActive","_onWhitespaceChanged"),this.input.bind().onSync("focused",o,this).onSync("blurred",r,this).onSync("enterKeyed",a,this).onSync("tabKeyed",l,this).onSync("escKeyed",c,this).onSync("upKeyed",d,this).onSync("downKeyed",h,this).onSync("leftKeyed",u,this).onSync("rightKeyed",f,this).onSync("queryChanged",p,this).onSync("whitespaceChanged",m,this).onSync("langDirChanged",this._onLangDirChanged,this)}function n(t){var i=[].slice.call(arguments,1);return function(){var n=[].slice.call(arguments);e.each(i,function(e){return t[e].apply(t,n)})}}return e.mixin(i.prototype,{_hacks:function(){var i,n;i=this.input.$input||t("<div>"),n=this.menu.$node||t("<div>"),i.on("blur.tt",function(t){var s,o,r;s=document.activeElement,o=n.is(s),r=n.has(s).length>0,e.isMsie()&&(o||r)&&(t.preventDefault(),t.stopImmediatePropagation(),e.defer(function(){i.focus()}))}),n.on("mousedown.tt",function(t){t.preventDefault()})},_onSelectableClicked:function(t,e){this.select(e)},_onDatasetCleared:function(){this._updateHint()},_onDatasetRendered:function(t,e,i,n){if(this._updateHint(),this.autoselect){var s=this.selectors.cursor.substr(1);this.menu.$node.find(this.selectors.suggestion).first().addClass(s)}this.eventBus.trigger("render",e,i,n)},_onAsyncRequested:function(t,e,i){this.eventBus.trigger("asyncrequest",i,e)},_onAsyncCanceled:function(t,e,i){this.eventBus.trigger("asynccancel",i,e)},_onAsyncReceived:function(t,e,i){this.eventBus.trigger("asyncreceive",i,e)},_onFocused:function(){this._minLengthMet()&&this.menu.update(this.input.getQuery())},_onBlurred:function(){this.input.hasQueryChangedSinceLastFocus()&&this.eventBus.trigger("change",this.input.getQuery())},_onEnterKeyed:function(t,e){var i;(i=this.menu.getActiveSelectable())?this.select(i)&&(e.preventDefault(),e.stopPropagation()):this.autoselect&&this.select(this.menu.getTopSelectable())&&(e.preventDefault(),e.stopPropagation())},_onTabKeyed:function(t,e){var i;(i=this.menu.getActiveSelectable())?this.select(i)&&e.preventDefault():(i=this.menu.getTopSelectable())&&this.autocomplete(i)&&e.preventDefault()},_onEscKeyed:function(){this.close()},_onUpKeyed:function(){this.moveCursor(-1)},_onDownKeyed:function(){this.moveCursor(1)},_onLeftKeyed:function(){"rtl"===this.dir&&this.input.isCursorAtEnd()&&this.autocomplete(this.menu.getActiveSelectable()||this.menu.getTopSelectable())},_onRightKeyed:function(){"ltr"===this.dir&&this.input.isCursorAtEnd()&&this.autocomplete(this.menu.getActiveSelectable()||this.menu.getTopSelectable())},_onQueryChanged:function(t,e){this._minLengthMet(e)?this.menu.update(e):this.menu.empty()},_onWhitespaceChanged:function(){this._updateHint()},_onLangDirChanged:function(t,e){this.dir!==e&&(this.dir=e,this.menu.setLanguageDirection(e))},_openIfActive:function(){this.isActive()&&this.open()},_minLengthMet:function(t){return t=e.isString(t)?t:this.input.getQuery()||"",t.length>=this.minLength},_updateHint:function(){var t,i,n,s,o,a,l;t=this.menu.getTopSelectable(),i=this.menu.getSelectableData(t),n=this.input.getInputValue(),!i||e.isBlankString(n)||this.input.hasOverflow()?this.input.clearHint():(s=r.normalizeQuery(n),o=e.escapeRegExChars(s),a=new RegExp("^(?:"+o+")(.+$)","i"),l=a.exec(i.val),l&&this.input.setHint(n+l[1]))},isEnabled:function(){return this.enabled},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},isActive:function(){return this.active},activate:function(){return!!this.isActive()||!(!this.isEnabled()||this.eventBus.before("active"))&&(this.active=!0,this.eventBus.trigger("active"),!0)},deactivate:function(){return!this.isActive()||!this.eventBus.before("idle")&&(this.active=!1,this.close(),this.eventBus.trigger("idle"),!0)},isOpen:function(){return this.menu.isOpen()},open:function(){return this.isOpen()||this.eventBus.before("open")||(this.menu.open(),this._updateHint(),this.eventBus.trigger("open")),this.isOpen()},close:function(){return this.isOpen()&&!this.eventBus.before("close")&&(this.menu.close(),this.input.clearHint(),this.input.resetInputValue(),this.eventBus.trigger("close")),!this.isOpen()},setVal:function(t){this.input.setQuery(e.toStr(t))},getVal:function(){return this.input.getQuery()},select:function(t){var e=this.menu.getSelectableData(t);return!(!e||this.eventBus.before("select",e.obj,e.dataset)||(this.input.setQuery(e.val,!0),this.eventBus.trigger("select",e.obj,e.dataset),this.close(),0))},autocomplete:function(t){var e,i,n;return e=this.input.getQuery(),i=this.menu.getSelectableData(t),n=i&&e!==i.val,!(!n||this.eventBus.before("autocomplete",i.obj,i.dataset)||(this.input.setQuery(i.val),this.eventBus.trigger("autocomplete",i.obj,i.dataset),0))},moveCursor:function(t){var e,i,n,s,o,r,a;return e=this.input.getQuery(),i=this.menu.selectableRelativeToCursor(t),n=this.menu.getSelectableData(i),s=n?n.obj:null,o=n?n.dataset:null,a=i?i.attr("id"):null,this.input.trigger("cursorchange",a),r=this._minLengthMet()&&this.menu.update(e),!r&&!this.eventBus.before("cursorchange",s,o)&&(this.menu.setCursor(i),n?this.input.setInputValue(n.val):(this.input.resetInputValue(),this._updateHint()),this.eventBus.trigger("cursorchange",s,o),!0)},destroy:function(){this.input.destroy(),this.menu.destroy()}}),i}();!function(){"use strict";function s(e,i){e.each(function(){var e,n=t(this);(e=n.data(g.typeahead))&&i(e,n)})}function o(t,e){return t.clone().addClass(e.classes.hint).removeData().css(e.css.hint).css(u(t)).prop({readonly:!0,required:!1}).removeAttr("id name placeholder").removeClass("required").attr({spellcheck:"false",tabindex:-1})}function a(t,e){t.data(g.attrs,{dir:t.attr("dir"),autocomplete:t.attr("autocomplete"),spellcheck:t.attr("spellcheck"),style:t.attr("style")}),t.addClass(e.classes.input).attr({spellcheck:!1});try{!t.attr("dir")&&t.attr("dir","auto")}catch(t){}return t}function u(t){return{backgroundAttachment:t.css("background-attachment"),backgroundClip:t.css("background-clip"),backgroundColor:t.css("background-color"),backgroundImage:t.css("background-image"),backgroundOrigin:t.css("background-origin"),backgroundPosition:t.css("background-position"),backgroundRepeat:t.css("background-repeat"),backgroundSize:t.css("background-size")}}function f(t){var i,n;i=t.data(g.www),n=t.parent().filter(i.selectors.wrapper),e.each(t.data(g.attrs),function(i,n){e.isUndefined(i)?t.removeAttr(n):t.attr(n,i)}),t.removeData(g.typeahead).removeData(g.www).removeData(g.attr).removeClass(i.classes.input),n.length&&(t.detach().insertAfter(n),n.remove())}function p(i){var n,s;return n=e.isJQuery(i)||e.isElement(i),s=n?t(i).first():[],s.length?s:null}var m,g,v;m=t.fn.typeahead,g={www:"tt-www",attrs:"tt-attrs",typeahead:"tt-typeahead"},v={initialize:function(s,u){function f(){var i,f,v,y,b,w,_,k,x,C,S,T;e.each(u,function(t){t.highlight=!!s.highlight}),i=t(this),f=t(m.html.wrapper),v=p(s.hint),y=p(s.menu),b=s.hint!==!1&&!v,w=s.menu!==!1&&!y,b&&(v=o(i,m)),w&&(y=t(m.html.menu).css(m.css.menu)),v&&v.val(""),i=a(i,m),(b||w)&&(f.css(m.css.wrapper),i.css(b?m.css.input:m.css.inputWithNoHint),i.wrap(f).parent().prepend(b?v:null).append(w?y:null)),T=w?d:l,_=new n({el:i}),k=new r({hint:v,input:i},m),x=new T({node:y,datasets:u},m),C=new c({$input:i,menu:x}),S=new h({input:k,menu:x,eventBus:_,minLength:s.minLength,autoselect:s.autoselect},m),i.data(g.www,m),i.data(g.typeahead,S)}var m;return u=e.isArray(u)?u:[].slice.call(arguments,1),s=s||{},m=i(s.classNames),this.each(f)},isEnabled:function(){var t;return s(this.first(),function(e){t=e.isEnabled()}),t},enable:function(){return s(this,function(t){t.enable()}),this},disable:function(){return s(this,function(t){t.disable()}),this},isActive:function(){var t;return s(this.first(),function(e){t=e.isActive()}),t},activate:function(){return s(this,function(t){t.activate()}),this},deactivate:function(){return s(this,function(t){t.deactivate()}),this},isOpen:function(){var t;return s(this.first(),function(e){t=e.isOpen()}),t},open:function(){return s(this,function(t){t.open()}),this},close:function(){return s(this,function(t){t.close()}),this},select:function(e){var i=!1,n=t(e);return s(this.first(),function(t){i=t.select(n)}),i},autocomplete:function(e){var i=!1,n=t(e);return s(this.first(),function(t){i=t.autocomplete(n)}),i},moveCursor:function(t){var e=!1;return s(this.first(),function(i){e=i.moveCursor(t)}),e},val:function(t){
var i;return arguments.length?(s(this,function(i){i.setVal(e.toStr(t))}),this):(s(this.first(),function(t){i=t.getVal()}),i)},destroy:function(){return s(this,function(t,e){f(e),t.destroy()}),this}},t.fn.typeahead=function(t){return v[t]?v[t].apply(this,[].slice.call(arguments,1)):v.initialize.apply(this,arguments)},t.fn.typeahead.noConflict=function(){return t.fn.typeahead=m,this}}()}),FS.cookies=Cookies.noConflict(),FS.rome=window.rome,FS.moment=window.moment,function(t){"use strict";var e,i=".",n=t.getInternalNS("elements.constants");n.classes={elementContent:"fsElementContent",loadMoreButton:"fsLoadMoreButton",loadMoreClicked:"fsLoadMoreClicked",loadingDots:"fsLoadingDots",loadingDotsOverlay:"fsLoadingDotsOverlay",selectAll:"fsSelectAll",stateActive:"fsStateActive",stateExpanded:"fsStateExpanded",stateHidden:"fsStateHidden",stateOpen:"fsStateOpen",stateSelected:"fsStateSelected"},e=n.classes,n.selectors={elementContent:i+e.elementContent,loadMoreButton:i+e.loadMoreButton,loadingDotsOverlay:i+e.loadingDotsOverlay,selectAll:i+e.selectAll,stateActive:i+e.stateActive,stateExpanded:i+e.stateExpanded,stateHidden:i+e.stateHidden,stateOpen:i+e.stateOpen,stateSelected:i+e.stateSelected}}(FS),function(){function t(t){for(;t;){if("DIALOG"==t.nodeName.toUpperCase())return t;t=t.parentElement}return null}function e(t){t&&t.blur&&t!=document.body&&t.blur()}function i(t,e){for(var i=0;i<t.length;++i)if(t[i]==e)return!0;return!1}function n(t){if(this.dialog_=t,this.replacedStyleTop_=!1,this.openAsModal_=!1,t.hasAttribute("role")||t.setAttribute("role","dialog"),t.show=this.show.bind(this),t.showModal=this.showModal.bind(this),t.close=this.close.bind(this),"returnValue"in t||(t.returnValue=""),this.maybeHideModal=this.maybeHideModal.bind(this),"MutationObserver"in window){var e=new MutationObserver(this.maybeHideModal);e.observe(t,{attributes:!0,attributeFilter:["open"]})}else t.addEventListener("DOMAttrModified",this.maybeHideModal);Object.defineProperty(t,"open",{set:this.setOpen.bind(this),get:t.hasAttribute.bind(t,"open")}),this.backdrop_=document.createElement("div"),this.backdrop_.className="fsDialogBackdrop",this.backdropClick_=this.backdropClick_.bind(this)}var s=window.CustomEvent;s&&"object"!=typeof s||(s=function(t,e){e=e||{};var i=document.createEvent("CustomEvent");return i.initCustomEvent(t,!!e.bubbles,!!e.cancelable,e.detail||null),i},s.prototype=window.Event.prototype),n.prototype={get dialog(){return this.dialog_},maybeHideModal:function(){this.openAsModal_&&(this.dialog_.hasAttribute("open")&&document.body.contains(this.dialog_)||(this.openAsModal_=!1,this.dialog_.style.zIndex="",this.replacedStyleTop_&&(this.dialog_.style.top="",this.replacedStyleTop_=!1),this.backdrop_.removeEventListener("click",this.backdropClick_),this.backdrop_.parentElement&&this.backdrop_.parentElement.removeChild(this.backdrop_),o.dm.removeDialog(this)))},setOpen:function(t){t?this.dialog_.hasAttribute("open")||this.dialog_.setAttribute("open",""):(this.dialog_.removeAttribute("open"),this.maybeHideModal())},backdropClick_:function(t){var e=document.createEvent("MouseEvents");e.initMouseEvent(t.type,t.bubbles,t.cancelable,window,t.detail,t.screenX,t.screenY,t.clientX,t.clientY,t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,t.button,t.relatedTarget),this.dialog_.dispatchEvent(e),t.stopPropagation()},focus_:function(){var t=this.dialog_.querySelector("[autofocus]:not([disabled])");if(!t){var i=["button","input","keygen","select","textarea"],n=i.map(function(t){return t+":not([disabled])"});n.push('[tabindex]:not([disabled]):not([tabindex=""])'),t=this.dialog_.querySelector(n.join(", "))}e(document.activeElement),t&&t.focus()},updateZIndex:function(t,e){this.backdrop_.style.zIndex=t,this.dialog_.style.zIndex=e},show:function(){this.dialog_.open||(this.setOpen(!0),this.focus_())},showModal:function(){if(this.dialog_.hasAttribute("open"))throw new Error("Failed to execute 'showModal' on dialog: The element is already open, and therefore cannot be opened modally.");if(!document.body.contains(this.dialog_))throw new Error("Failed to execute 'showModal' on dialog: The element is not in a Document.");if(!o.dm.pushDialog(this))throw new Error("Failed to execute 'showModal' on dialog: There are too many open modal dialogs.");this.show(),this.openAsModal_=!0,o.needsCentering(this.dialog_)?(o.reposition(this.dialog_),this.replacedStyleTop_=!0):this.replacedStyleTop_=!1,this.backdrop_.addEventListener("click",this.backdropClick_),this.dialog_.parentNode.insertBefore(this.backdrop_,this.dialog_.nextSibling)},close:function(t){if(!this.dialog_.hasAttribute("open"))throw new Error("Failed to execute 'close' on dialog: The element does not have an 'open' attribute, and therefore cannot be closed.");this.setOpen(!1),void 0!==t&&(this.dialog_.returnValue=t);var e=new s("close",{bubbles:!1,cancelable:!1});this.dialog_.dispatchEvent(e)}};var o={};o.reposition=function(t){var e=document.body.scrollTop||document.documentElement.scrollTop,i=e+(window.innerHeight-t.offsetHeight)/2;t.style.top=Math.max(e,i)+"px"},o.isInlinePositionSetByStylesheet=function(t){for(var e=0;e<document.styleSheets.length;++e){var n=document.styleSheets[e],s=null;try{s=n.cssRules}catch(t){}if(s)for(var o=0;o<s.length;++o){var r=s[o],a=null;try{a=document.querySelectorAll(r.selectorText)}catch(t){}if(a&&i(a,t)){var l=r.style.getPropertyValue("top"),c=r.style.getPropertyValue("bottom");if(l&&"auto"!=l||c&&"auto"!=c)return!0}}}return!1},o.needsCentering=function(t){var e=window.getComputedStyle(t);return"absolute"==e.position&&(!("auto"!=t.style.top&&""!=t.style.top||"auto"!=t.style.bottom&&""!=t.style.bottom)&&!o.isInlinePositionSetByStylesheet(t))},o.forceRegisterDialog=function(t){if(t.showModal&&console.warn("This browser already supports <dialog>, the polyfill may not work correctly",t),"DIALOG"!=t.nodeName.toUpperCase())throw new Error("Failed to register dialog: The element is not a dialog.");new n(t)},o.registerDialog=function(t){t.showModal||o.forceRegisterDialog(t)},o.DialogManager=function(){this.pendingDialogStack=[],this.overlay=document.createElement("div"),this.overlay.className="fsDialogOverlay",this.overlay.addEventListener("click",function(t){t.stopPropagation()}),this.handleKey_=this.handleKey_.bind(this),this.handleFocus_=this.handleFocus_.bind(this),this.handleRemove_=this.handleRemove_.bind(this),this.zIndexLow_=1e5,this.zIndexHigh_=100150},o.DialogManager.prototype.topDialogElement=function(){if(this.pendingDialogStack.length){var t=this.pendingDialogStack[this.pendingDialogStack.length-1];return t.dialog}return null},o.DialogManager.prototype.blockDocument=function(){document.body.appendChild(this.overlay),document.body.addEventListener("focus",this.handleFocus_,!0),document.addEventListener("keydown",this.handleKey_),document.addEventListener("DOMNodeRemoved",this.handleRemove_)},o.DialogManager.prototype.unblockDocument=function(){document.body.removeChild(this.overlay),document.body.removeEventListener("focus",this.handleFocus_,!0),document.removeEventListener("keydown",this.handleKey_),document.removeEventListener("DOMNodeRemoved",this.handleRemove_)},o.DialogManager.prototype.updateStacking=function(){for(var t=this.zIndexLow_,e=0;e<this.pendingDialogStack.length;e++)e==this.pendingDialogStack.length-1&&(this.overlay.style.zIndex=t++),this.pendingDialogStack[e].updateZIndex(t++,t++)},o.DialogManager.prototype.handleFocus_=function(i){var n=t(i.target);if(n!=this.topDialogElement())return i.preventDefault(),i.stopPropagation(),e(i.target),!1},o.DialogManager.prototype.handleKey_=function(t){if(27==t.keyCode){t.preventDefault(),t.stopPropagation();var e=new s("cancel",{bubbles:!1,cancelable:!0}),i=this.topDialogElement();i.dispatchEvent(e)&&i.close()}},o.DialogManager.prototype.handleRemove_=function(t){if("DIALOG"==t.target.nodeName.toUpperCase()){var e=t.target;e.open&&this.pendingDialogStack.some(function(t){if(t.dialog==e)return t.maybeHideModal(),!0})}},o.DialogManager.prototype.pushDialog=function(t){var e=(this.zIndexHigh_-this.zIndexLow_)/2-1;return!(this.pendingDialogStack.length>=e)&&(this.pendingDialogStack.push(t),1==this.pendingDialogStack.length&&this.blockDocument(),this.updateStacking(),!0)},o.DialogManager.prototype.removeDialog=function(t){var e=this.pendingDialogStack.indexOf(t);e!=-1&&(this.pendingDialogStack.splice(e,1),this.updateStacking(),0==this.pendingDialogStack.length&&this.unblockDocument())},o.dm=new o.DialogManager,document.addEventListener("submit",function(e){var i=e.target;if(i&&i.hasAttribute("method")&&"dialog"==i.getAttribute("method").toLowerCase()){e.preventDefault();var n=t(e.target);if(n){var s,o=[document.activeElement,e.explicitOriginalTarget],r=["BUTTON","INPUT"];o.some(function(t){if(t&&t.form==e.target&&r.indexOf(t.nodeName.toUpperCase())!=-1)return s=t.value,!0}),n.close(s)}}},!0),o.forceRegisterDialog=o.forceRegisterDialog,o.registerDialog=o.registerDialog,"function"==typeof define&&"amd"in define?define(function(){return o}):"object"==typeof module&&"object"==typeof module.exports?module.exports=o:window.dialogPolyfill=o}(),function(t,e,i){"use strict";var n=i.$,s=i._,o=i.getInternalNS("dialogs"),r=i.util,a=s.template('<dialog id="<%= id %>Dialog" class="fsDialog <%= dialogClass %>" aria-describedby="<%= id %>DialogContent"><button id="<%= id %>CloseButton" class="fsDialogCloseButton" type="button" aria-label="Close"></button><div id="<%= id %>DialogContent" class="fsDialogContent" aria-live="polite" aria-busy="true" aria-atomic="true"><div class="fsLoadingDots"></div></div></dialog>');r.ensureDialog=t.createElement("DIALOG").showModal?i._.noop:e.dialogPolyfill.registerDialog,delete e.dialogPolyfill,o.Dialog=function(e){var i,o,l,c;return e.removeOnClose=e.removeOnClose!==!1,e.id=e.id||"fs_"+s.uniqueId()+"_",o=n(a({dialogClass:e.dialogClass,id:e.id})),l=o.find(".fsDialogContent"),i=o[0],r.ensureDialog(i),o.on("close cancel",function(){e.removeOnClose&&o.remove(),c.focus()}),o.find(".fsDialogCloseButton").click(function(){i.close()}),{addContent:function(t){l.append(t)},close:function(){i.close()},getContentElement:function(){return l},open:function(e){c=e,n(t.body).append(o),i.showModal()},setContent:function(t){l.html(t).attr("aria-busy","false")},setLoading:function(){l.html('<div class="fsLoadingDots"></div>').attr("aria-busy","true")}}}}(document,window,FS),function(t,e,i){"use strict";function n(){function t(t){return n[t]||(n[t]=[null])}function e(t,e){var n=!1;return t==e||(t&&e&&(n=!0,X.each(t,function(s){if(e[s]==i||t[s]!=e[s])return n=!1,!1})),n)}var n={};this.addState=function(e,i){t(e).push(i)},this.getBackLinkState=function(i){for(var n=t(i),s=this.getCurrentState(i),o=0;o<n.length;o++)if(e(n[o],s))return o>0?n[o-1]:null;return null},this.getCurrentState=function(e){var i=t(e);return i.length>1?i[i.length-1]:null},this.didChangeState=function(t){return!e(et.getCurrentHistoryState()[t],this.getCurrentState(t))},this.isStatesEmpty=function(){return X.isEmptyObject(n)}}function s(t){var e=t?t.find(Dt):X(Dt);e.each(function(){var t=X(this);t.height(Math.round(t.width()*t.data("aspectratio")))})}function o(t,e,i,n,s,o,r){return X.ajax({cache:!1,type:"POST",url:ut,data:{copy_element_id:o,copy_timestamp:r,element_type_id:n,is_organizational:i,page_id:s,parent_id:t,sibling_id:e},error:function(){alert("There was an error creating the element. Please try again.")}})}function r(t,e,i){var n,s,o,r={dialogClass:"fsElementDialog fs"+t};return e&&(r.id="fsEl_"+e+"_"+(i||0)+"_",s=X("#"+r.id+"Dialog"),s.length&&(s[0].close(),s.remove())),o=nt.Dialog(r),n=o.getContentElement(),n.data("type",t.replace("Element","")),Q.extend(o,{setContentSuccess:function(t){o.setContent(t),Z.triggerElementDialogShown(n)}})}function a(t,e,i){return i=Q.defaults(i||{},{elementUpdatedData:[],updateDOM:!0}),X.ajax({cache:!1,data:Q.defaults(e||{},{is_draft:k}),type:"GET",url:ut+"/"+t}).then(function(e){var n=X(e),s=h(t);return s.attr("aria-busy",!1),i.updateDOM&&(s.replaceWith(n),i.elementUpdatedData.unshift(n),Z.triggerElementUpdated.apply(null,i.elementUpdatedData)),n})}function l(){return e.location.protocol+"//"+e.location.hostname}function c(){return e.history.state||{}}function d(t){return t.closest('[id^="fsEl_"]')}function h(t){return X("#fsEl_"+t)}function u(t){return t.attr("id").split("_")[1]}function f(t,e){var i,n,s,o=/\/~([\w\-]+)\/([\w\-]+)/,r=/^\/fs\/pages\/(\d+)/;return e||r.test(t)?(s=t.split("?")[1],e||(e=parseInt(t.match(r)[1])),o.test(t)&&(n=t.match(o),i=n[1].replace(/\-/g,"_")+"="+n[2],s=i+(s?"&"+s:"")),{pageID:e,queryString:s}):{}}function p(){return Pt.data("pageid")}function m(t){var n,s,o={};if(t===i?n=e.location.search.substring(1):(s=t.split("?"),n=s.length>0?s[1]:null),n)for(var r,a,l=0,c=n.split("&"),d=c.length;l<d;l++)a=c[l].split("="),r=X.trim(decodeURIComponent(a[0])),r&&(o[r]=decodeURIComponent(a[1]));return o}function g(){return X(_t).find("> .fsElement.fsStateEditable[data-shared-id]")}function v(t){return parseInt(t.attr("id").split("_")[2])||0}function y(t){return t.closest("li").attr("id").split(/-|_/g)[1]}function b(){return G||(G=X.Deferred(),X.get("/fs/sessions/user/csrf-token").done(function(t){G.resolve(X(t).val())}).fail(function(){G.reject(),G=i})),G.promise()}function w(){return Pt.hasClass(rt)}function _(){return Pt.hasClass(ct)}function k(){return Pt.hasClass(lt)}function x(){return Pt.hasClass(Ct)}function C(t){return t.hasClass("fsStateEditable")}function S(){return X(st).length>0}function T(t,e){var i=Q.defaults(e,{is_draft:C(t),is_load_more:!0,parent_id:u(t)});return t.data("element-override")&&(i.element_override=t.data("element-override")),X.ajax({cache:!1,data:i,url:"/fs/elements/"+i.parent_id,error:function(){alert("There was an error with the element. Please try again."),t.children(vt).remove()}})}function E(t){var e,i,n,s=X(this),o={},r=["Constituent","EnotifyArchive"],a=s.data("start-row");e=d(s);for(var l=0;l<r.length;l++)if(e.hasClass("fs"+r[l])){n=r[l];break}if(!e)return!1;switch(i=e.children(ht),n){case"Constituent":t.preventDefault(),o.const_page=s.data("page"),o=X.extend(o,s.closest(".fsElementPagination").data("searchparams"));break;case"EnotifyArchive":o.start_row=a}D(i),T(e,o).done(function(t){var o=X(t);if("EnotifyArchive"==n){var r=o.find(ht).children(":not(.fsElementEmpty)");i.siblings(vt).remove(),i.append(r),e.addClass("fsLoadMoreClicked"),s.remove(),Z.triggerElementMoreLoaded(e,r)}else e.replaceWith(o),Z.triggerElementUpdated(o)})}function D(t){t.closest(".fsElement").attr("aria-busy",!0),t.before('<div class="fsLoadingDotsOverlay" style="height:'+t.height()+"px; width: "+t.width()+'px">'+wt+"</div>")}function P(){var t=X(this),e=t.find(".fsLoginUsername input"),i=t.find(".fsLoginPassword input");if(e.length){if(0==X.trim(e.val()).length)return alert("Please enter your username to log in."),e.val(""),e.focus(),!1;if(0==i.val().length)return alert("Please enter your password to log in."),i.val(""),i.focus(),!1}return D(t),!!t.find('input[name="authenticity_token"]').length||(X.get("/fs/sessions/user/csrf-token",function(e){t.append(e).submit()}),!1)}function M(t){var e,i,n={axis:"x",items:"> li:not(:has(> .fsAddPanelGroupTab))",beforeActivate:function(t){t.preventDefault()},update:function(t,n){var s=X(n.item),o=s.prev(),r=y(s),a=h(r),l=o.length?y(o):0,c=h(l);I(a,c,e).done(function(){0==l?i.after(a):c.after(a)})}};t.hasClass("fsPageContent")?t.find(".fsPanelGroup").each(function(){e=X(this),i=e.children(ht).children(".fsTabsNav"),i.sortable(n)}):(e=t,i=e.children(ht).children(".fsTabsNav"),i.sortable(n))}function A(t,e){t.find(Tt).addBack(Tt).sortable(et.SORTABLE_CONFIG),t.find("> "+ht).sortable(X.extend({},et.SORTABLE_CONFIG,{axis:"y",cancel:".fsElementEditSettings, .fsElementDelete, .redactor-editor, .redactor-box",connectWith:!1,containment:"parent",cursorAt:!1,helper:"original",items:e,update:function(t,e){var i=X(e.item),n=i.prev(".fsElement"),s=X(this);I(i,n,i.parent().parent()).fail(function(){s.sortable("cancel")})}}))}function I(e,i,n){var s=u(e),o=u(n),r=i.length?u(i):0;return X.ajax({cache:!1,dataType:"json",type:"PUT",url:ut+"/"+s,data:{page_id:p(),element:{parent_id:o,sibling_id:r}},error:function(){alert("There was an error saving the element. Please refresh and try again.")},success:function(){t.events.triggerElementMoved(e,i),L("element:update",s)}})}function L(t,i){var n,s,o=0==t.indexOf("element:")&&"element:settings:display"!=t;w()&&o?(n=X(ot),n.find(".fsElementBannerPublish").removeClass(mt),s={data:u(n),event:"banner:update"}):s=x()&&o?{data:g().data("shared-id"),event:"sharedElement:update"}:{data:i,event:t},e.location.origin||(e.location.origin=l()+(e.location.port?":"+e.location.port:"")),e.parent.postMessage(JSON.stringify(s),e.location.origin)}function j(t,e){var i=r("AthleticsEvent");X.post({cache:!1,data:{action:"getAthleticEventDialogHTML",athleticOccurID:t},dataType:"html",url:"/cf_calendar/ajax/fullcalendar.cfm"}).done(function(t){i.setContentSuccess(t),e.data("use-alerts")||i.getContentElement().find("a.fsAlertIcon.fsAthleticsEvent").remove()}).fail(function(){i.setContent("<p>There was an error loading the Athletic Event Details.</p>")}),i.open(e)}function O(t,i,n){var s="/cf_directory/cp.cfm?eventtype="+t+"&eventid="+i;n&&(s+="&calendar_ids="+n),e.open(s,"","width=600,height=700")}function $(t,e,i,n){var s=Math.ceil(i/n);if(t.empty(),!(i<=n)){e>1&&t.append(N(e-1,e,"&lt;",{"class":"fsPreviousPageLink"})),t.append(N(1,e,1,{"class":"fsFirstPageLink"}));for(var o=e-1,r=[];o>1;){if(r.push(N(o,e,o)),e-o>1&&o>4&&s>10){r.push(N(Math.floor(e/2),e,"&hellip;"));break}o--}for(t.append(r.reverse()),o=Math.max(e,2);o<s;){if(t.append(N(o,e,o)),o-e>1&&s-o>3&&s>10){t.append(N(Math.floor((o+s)/2),e,"&hellip;"));break}o++}t.append(N(s,e,s,{"class":"fsLastPageLink"})),e<s&&t.append(N(e+1,e,"&gt;",{"class":"fsNextPageLink"})),t.append(X("<span>").text("showing "+((e-1)*n+1)+" - "+e*n+" of "+i))}}function N(t,e,i,n){var s="Page "+t,o=X('<a href="#">').attr("aria-label",s).attr(n||{}).html(i).data("page",t);return t==e&&(o.attr({"aria-current":!0,"aria-label":s+", Current Page"}),o.prop("disabled",!0),o.addClass("fsStateActive")),o}function F(t,e){Q.each(t.data("linked-element-ids"),function(t){var i=h(t);i&&a(t,e)})}function H(t){t.closest(".fsElement").attr("aria-busy",!1).find(vt).remove()}function R(t){t.each(function(){var t=X(this),e=X("<span>",{"class":"fsClearInputContainer"}),i=X("<button></button>",{"aria-label":"Clear"});i.toggleClass(mt,!t.val().length),t.on("change input",function(){i.toggleClass(mt,!t.val().length)}),i.on("click",function(){t.val("").trigger("change").focus()}),t.wrap(e).after(i)})}function z(t){t.on("click",ft,function(){var t=X(this);t.toggleClass(pt)})}function B(t,e){t.on("click",kt,function(){var t=X(this),e=t.text()==xt;t.parent().find(bt).prop("checked",e),t.text(e?at:xt)}).on("change",gt,function(){X(this).closest(e).find(kt).trigger("updateLabel")}).on("updateLabel",kt,function(){var t=X(this);t.text(0==t.parent().find(bt+yt).length?at:xt)})}function W(t,e,i,n){var s=u(t),o=v(t),l=r(i,s,o);o&&(e.shared_element_id=o),a(s,e,{updateDOM:!1}).done(function(t){l.setContentSuccess(t.find(".fsElementContent").html()),t.hasClass("fsResourceElement")&&l.getContentElement().find("audio, video").on("play pause",function(t){var e=X(this),i=e.data(),n=e.is("video")?"Video":"Audio",s="resource"+n+t.type.charAt(0).toUpperCase()+t.type.slice(1);U(s,i.resourceTitle,i.resourceUuid)})}).fail(function(t,e,i){l.setContent("<p>An error occurred while retrieving the data:</p><p>"+i+"</p>")}),l.open(n)}function q(){return Pt.hasClass(Et)}function U(t,e,i){var n={event:t,resourceTitle:e,url:l()+"/fs/resource-manager/view/"+i};it.push(n)}function V(t){if(e.history.pushState){var i,n={},s=m();X.each(t,function(t,e){null===e||"element_id"==t?delete s[t]:s[t]=e}),i=X.param(s),i=i.length>0?"?"+i:i,n[t.element_id]=t,e.history.pushState(X.extend(c(),n),"",i)}}function Y(t){if(e.history.replaceState&&t){var i=e.location,n=i.pathname;t.virtualParam&&(n=n.split("~")[0].replace(/\/$/,"")+t.virtualParam),n+=t.queryString?"?"+X.param(Q.extend(m(),t.queryString)):i.search,e.history.replaceState({},"",n)}}var G,K,X=t.$,Q=t._,J=t.getInternalNS("elements.constants.classes"),Z=t.events,tt=t.getInternalNS("elements.constants.selectors"),et=t.getInternalNS("elements.utils"),it=e.dataLayer||[],nt=t.getInternalNS("dialogs"),st="#fsAccountBar",ot=".fsBannerEdit",rt="fsBannerEditMode",at="Deselect All",lt="fsDraftMode",ct="fsComposeMode",dt="fsElementContent",ht="."+dt,ut="/fs/elements",ft=".fsStyleExpandable",pt="fsStateExpanded",mt=J.stateHidden,gt='input[type="checkbox"]',vt=".fsLoadingDotsOverlay",yt=":not(:checked)",bt="li:not("+tt.stateHidden+") "+gt,wt='<div class="fsLoadingDots"></div>',_t="#fsPageContent",kt=tt.selectAll,xt="Select All",Ct="fsSharedElementEditMode",St="> "+ht+".fsStateEditable",Tt=ot+", .fsDiv.fsStateEditable, .fsPanel"+tt.stateOpen+" "+St+", .fsContainer "+St+", .fsTab.fsStateEditable, .fsPersonalizationPanelElement "+St,Et="fsSuppressGoogleMaps",Dt=".fsEmbeddedMediaResponsive",Pt=X(document.body);K={ElementHistory:n,SORTABLE_SELECTOR:Tt,adjustMediaAspectRatio:s,createElement:o,fetchElementHTML:a,getCurrentHistoryState:c,getElement:d,getElementByID:h,getElementID:u,getInternalLinkProperties:f,getPageID:p,getQueryStringValues:m,getSharedElement:g,getTabID:y,getToken:b,inBannerEditMode:w,inComposeMode:_,inDraftMode:k,inSharedElementEditMode:x,isLoggedIn:S,loadElementData:T,loadMoreHandler:E,loadingOverlay:D,loginFormSubmitHandler:P,makePanelGroupTabsSortable:M,makeSubelementsSortable:A,moveBehind:I,notifyAdminInterface:L,openAthleticEventPopup:j,openCalendarAlertPopup:O,pagination:$,populateLinkedElements:F,removeLoadingOverlay:H,setupClearInputButtons:R,setupExpandableHeaders:z,setupSelectAllButtons:B,showElementPopupDialog:W,suppressGoogleMaps:q,trackResourceEvent:U,updateQueryStringValueAndHistory:V,updateURLParams:Y},X.extend(et,K)}(FS,window),function(t,e){"use strict";function i(t,e,i){var n,o,r=K.data("element"),a=Z('<div id="newEl_'+(new Date).getTime()+'" class="'+Rt+'">'+ue+"</div>");r.hasClass(Rt)?"above"==K.find("button."+Ne).val()?a.insertBefore(r):a.insertAfter(r):r.replaceWith(a),n=a.prev(zt),o=n.length?dt(n):0,rt(dt(lt(a.parent())),o,!1,Z(t).data("type-id"),ut(),e,i).fail(function(){var t=lt(a.parent());a.remove(),s(t)}).done(function(t){var i=Z(t);a.replaceWith(i),i.find(et.SORTABLE_SELECTOR).sortable(ri),i.hasClass(bt)?I(i):i.hasClass(Ot)&&i.find(qe).sortable(ri),vt("element:create",dt(i)),yt.triggerElementAdded(i),e&&i.find(zt).each(function(){yt.triggerElementAdded(Z(this))})}),K.dialog("close")}function n(){var t=Z("#fsElementSettingShowBoards"),e=Z("#fsElementSettingsDisplayBoardsMethod");t.click(function(){U(t.siblings("#fsConstituentSettingDisplayBoardsLinkContainer"),!this.checked)}),e.find("input:radio").click(function(){U(e.siblings(Te),"fsElementSettingsOpenMethodFolders"!=this.id)}),Z("#fsElementSettingLinkedPostFolderPicker").click(function(t){var e=t.originalEvent.target,i={id:e.id,pickerOptions:{selectedItemIDs:Z(Se).map(function(){return Z(this).val()})}};vt("postFolderPicker:open",i)})}function s(t){var e;switch(t.data("type")){case"Banner":case"Div":case"Tab":e=t;break;case"Container":case"Panel":case"PersonalizationPanel":e=t.find("> "+Wt);break;default:return}e.find(zt).length?e.find("> "+te).remove():e.append('<div class="fsElementAddWrapper '+Zt+'"><button class="fsElementAdd">ADD ELEMENT</button></div>')}function o(){sessionStorage.removeItem("copiedElement"),Ke.find(Vt).removeClass(Ut)}function r(){Ke.removeClass(Dt),Y.hide()}function a(t){var e,i,n,s;t.data("editor")==Mt?(i=g(y(t,At).attr("id")),n=Z.trim(i.getData()),e=t.parent().parent().find(".fsContentOverlay"),tt.defer(function(){i.destroy()})):(n=Z.trim(t.redactor("code.get")),e=t.prev(".fsContentOverlay"),t.redactor("core.destroy")),s=""==n,e.toggleClass("fsStateEmpty",s).find(Nt).toggleClass(kt,s).text(s?"Click here to add content":"EDIT CONTENT"),t.closest($t).removeClass(Le),Ke.removeClass(Le),Je.trigger("resize",{forceUpdate:!0})}function l(t){t?L(Z(ve)):(it&&Z(Et).find(".fsElementBannerExit").click(),G&&G.dialog("isOpen")&&G.dialog("close"),Ke.hasClass(Jt)&&K.dialog("close"),h()),Ke.toggleClass(jt,t)}function c(){return"true"==sessionStorage.getItem("composeModeEnabled")}function d(e){var i=Z("#fsDateFilterSettingPostCount"),n=i.next("label"),s=Z("#fsDateFilterSettingDisplayRange"),o=Z("#fsDateFilterSettingDaysAfter"),r=Z("#fsDateFilterSettingDaysBefore"),a={autoHideOnBlur:!1,inputFormat:"YYYY-MM-DD",time:!1},l=document.getElementById("fsDateFilterSettingStartDate"),c=document.getElementById("fsDateFilterSettingEndDate");"athletics"!=e&&(i.find("option[value='0']").remove(),s.find("option[value='5']").remove()),"news"!=e?s.find("option[value='0']").remove():(s.find("option[value='1']").remove(),s.find("option[value='2']").remove(),U(o,!0),U(Z('label[for="fsDateFilterSettingDaysAfter"]'),!0)),l&&(t.rome(l,Z.extend({dateValidator:t.rome.val.beforeEq(c)},a)),Z(".rd-container").on("focusin",function(t){t.stopPropagation()})),c&&t.rome(c,Z.extend({dateValidator:t.rome.val.afterEq(l)},a)),s.on("change",function(){var t=Z(this),s=t.val(),a=i.val(),l=(1==a?"item":"items")+" from",c=i.find("option[value='0']");U(t.siblings(".fsDateFilterSettingDateRange"),3!=s),U(t.siblings(".fsDateFilterSettingDayRange"),4!=s),U(t.parent().siblings(".fsDateFilterSettingEventYear"),5!=s),n.html(l),"athletics"==e&&(1==s||2==s||5==s?(c.length||(c=Z('<option value="0">all</option>'),i.append(c)),5==s&&(c.prop("selected",!0),i.change())):(c.remove(),0==a&&i.change())),r.change(),o.change()}),r.on("change",function(){U(Z(".fsDisplayPastEventsToggleContainer"),4==s.val()&&r.val()>0)}),o.on("change",function(){U(Z(".fsDisplayUpcomingEventsToggleContainer"),4==s.val()&&o.val()>0)}),i.on("change",function(){var t=Z(this),e=(1==t.val()?"item":"items")+" from";n.html(e),U(Z(".fsDateFilterSettingDisplayMoreContainer"),0==t.val())})}function h(){Z(".ui-sortable").sortable("destroy")}function u(t){t?Qe.hasClass(Ht)||(Qe.addClass(Ht),Qe.on("mousewheel DOMMouseScroll",f)):(Qe.removeClass(Ht),Qe.off("mousewheel DOMMouseScroll",f))}function f(t){t=e.event||t.originalEvent,t.stopPropagation?t.stopPropagation():t.cancelBubble=!0,Je.scrollTop(Je.scrollTop()+60*Math.max(-1,Math.min(1,-t.wheelDelta||t.detail)))}function p(t){if(0!=t.length){var e,i=dt(t),n=k(t),s=t.data("shared-id");if(t.data("use-new"))return void vt("element:settings:display",b(t,i,n,s));T(),G.dialog("option","title",n.split(/(?=[A-Z])/).join(" ")+("Banner"==n?"":" Element")+" Settings"),G.html(ue),G.dialog("open"),e=G.parent().find(".ui-dialog-buttonset"),e.addClass(pe),s&&G.data(ie,s),t.hasClass("fsSharedContainer")?G.html('<h3 class="fsSharedElementTitle">This container is shared!</h3><p>Shared containers can only be edited in the Shared Element editor</p>').append(Z('<button class="fsSharedElementButton">Edit Shared</button>').on("click",function(){vt("sharedElement:display",s)})):Z.ajax({cache:!1,dataType:"html",url:ne+"/"+i+"/settings"+(0==i?"/"+w(t):""),error:function(t){G.dialog("close"),403==t.status?alert(t.responseText):alert("There was an error loading the settings for this element. Please try again.")},success:function(o){G.data(Xt,i),0==i&&G.data(ee,w(t)),!s||st&&dt(ft())==i?(E(o,n,!1),e.removeClass(pe)):G.html('<h3 class="fsSharedElementTitle">This element is shared!</h3><p>Would you like to orphan just this element or edit the shared element?</p>').append(Z('<button class="fsSharedElementButton">Orphan and Edit</button>').on("click",function(){E(o,n,!0),e.removeClass(pe)}),Z('<button class="fsSharedElementButton">Edit Shared</button>').on("click",function(){vt("sharedElement:display",s)}))}})}}function m(){var t="fsElementLibraryWrapper",e="fsElementLocation";if(!K){var n,s;K=Z('<div id="fsElementLibrary"><div id="'+t+'">'+ue+'</div><div id="'+Qt+'"><div class="fsElementCopiedItem"><span></span><div><p class="name"></p><p class="message">Paste this Element</p></div></div><button value="clear" >Clear</button></div><button class="'+Ne+" "+e+'" value="below" >Place Below</button><button class="'+e+'" value="above">Place Above</button></div>'),s=K.find("button."+e),K.dialog(Z.extend({},ni,{appendTo:Ke,dialogClass:"fsElementsDialog",width:500,close:function(){Ke.removeClass(Jt),K.data("element").removeClass(_t)},open:function(){Ke.addClass(Jt),K.data("libraryLoaded")&&s.toggleClass(se,!K.data("showLocation")),Z(".ui-widget-overlay").bind("click",function(){K.dialog("close")})}})),K.siblings(".ui-dialog-titlebar").remove(),Z.ajax({cache:!1,data:{page_id:ut()},dataType:"html",url:ne+"/library",error:function(){alert("There was an error loading the element library. Please try again."),K.remove(),K=!1},success:function(n){K.find("#"+t).html(n),s.toggleClass(se,!K.data("showLocation")),K.data("libraryLoaded",!0);var o=K.find(".fsElementLibraryCategoryShared");st&&(o.find(".fsContainerIcon").parent().remove(),0==o.find(".fsElementLibraryItem").length&&(o.remove(),K.find(".fsTab").eq(o.index()).remove())),ot&&K.find(".fsEmbeddedMapIcon").parent().remove(),K.on("click","button."+e,function(){Z(this).hasClass(Ne)||s.toggleClass(Ne)}),K.on("click",".fsTab",function(){var t=Z(this);return t.addClass(Ne).siblings().removeClass(Ne),K.find(".fsElementLibraryCategory").addClass(se).eq(t.index()).removeClass(se),!1}),K.on("click",".fsElementLibraryItem:not(.fsStateDisabled)",function(){i(this)})}}),n=Z("#"+Qt),n.find("button[value=clear]").click(function(){o(),q()}),n.click(function(){var t=v();i(this,t.id,t.timestamp)})}return q(),K}function g(t){return CKEDITOR.instances[t.replace(Pt,"")]}function v(){var t=sessionStorage.getItem("copiedElement");if(t)return JSON.parse(t)}function y(t,e){return t.parent().parent().find(e)}function b(t,e,i,n){var s=ct(e).closest(".fsBanner");return{bannerID:s.length?dt(s):0,elementID:e,inSharedElementEditMode:st,isSharedContainer:t.hasClass("fsSharedContainer"),pageID:ut(),settingsID:w(t),sharedElementID:ft().length>0?dt(ft()):0,sharedElementTypeID:n,type:i,parentType:s.length?s.parent().hasClass("fsBannerLeft")?"Left Banner":s.parent().hasClass("fsBannerRight")?"Right Banner":"Page":"Page"}}function w(t){return parseInt(t.data("settings-id"))}function _(t){return t.attr("data-title")}function k(t){return t.attr("data-type")}function x(t){var e=G.primaryButtons,i=G.primaryTitle;X.after(t),X.switchClass(Ee,De),t.removeClass($e,400),G.removeClass(Oe),i&&G.dialog("option","title",i),e&&G.dialog("option","buttons",e),G.dialog("open")}function C(){Z("#fsAthleticsFilterTypeList").change(function(){var t=Z(this),e=t.val(),i=Z("#fsAthleticsFilter_"+e.toLowerCase());t.find('option[value="'+e.toUpperCase()+'"]').remove(),i.find("select").prop(Ft,!1),t.parent().before(i.toggleClass(se)),1==t.children().length&&Z("#fsAthleticsFilterTypes").hide()}),Z(".fsRemoveFilter").click(function(){var t=Z(this).data("remove"),e=Z("#fsAthleticsFilterTypeList"),i=e.find(":first-child"),n=Z("#fsAthleticsFilter_"+t);return n.addClass(se),n.find('select, input[type="radio"]').prop(Ft,!0),e.append('<option value="'+t.toUpperCase()+'">'+t.charAt(0).toUpperCase()+t.slice(1)+"</option>"),e.html(e.find("option:not(':first-child')").sort(function(t,e){return t.text==e.text?0:t.text<e.text?-1:1})).prepend(i),e.is(":visible")||Z("#fsAthleticsFilterTypes").show(),!1})}function S(){Z("#fsDateSeparatorSetting").on("change",function(){var t=Z("#fsDateSeparatorSetting option:selected").val();Z("#fsDateFormatSetting option").each(function(){var e=Z(this);e.html(e.html().replace(/[\/.-]|&nbsp;|\u2022/g,t))})}),Z("#fsDateFormatSetting").on("change",function(){var t=Z("#fsDateFormatSetting option:selected").val();U(Z("#fsCustomDateContainer"),"custom"!=t)}),Z(".fsToggleCustomFormatExample").on("click",function(t){t.preventDefault(),Z(".fsCustomFormatExample").toggleClass(se)})}function T(){G||(G=Z('<div id="fsPageDialog"></div>').appendTo(Ke),G.dialog(Z.extend({},ni,{dialogClass:"fsElementSettingsDialog",buttons:[{text:"Cancel",click:function(){Z(this).dialog("close")}},{id:"fsElementSettingSaveButton",text:"Save",click:function(){var t,i,n=Z(this),s=n.data(Xt),o=ne+"/"+s+"/",r=ut(),a=ct(s).closest(".fsBanner"),l=n.data("orphan");n.hasClass(He)?(i={banner_id:a.length?dt(a):0,page_id:r,shared_element_name:n.find("#fsElementShareName").val()},z(!0,"Saving shared element settings"),Z.ajax({cache:!1,data:i,dataType:"json",type:"POST",url:o+"shared",error:function(t){var e,i=t.responseJSON;e=403==t.status&&t.responseJSON.message?t.responseJSON.message:i&&i.name?"The shared element name "+i.name:"There was an error creating the shared element",alert(e)},success:function(t){vt("sharedElement:create",t),it?A(ct(s).closest(".fsBanner")).done(function(){n.dialog("close");
}):e.location.reload()}}).always(function(){z(!1)})):(t=Z("#fsElementSettings, .fsSecondaryElementSettings").find("input,textarea,select"),i=t.serializeArray(),r&&i.push({name:"page_id",value:r}),l&&i.push({name:"orphan",value:!0}),z(!0,"Saving element settings"),Z.ajax({cache:!1,data:i,type:"PUT",url:o+"settings"+(0==s?"/"+n.data(ee):""),error:function(t){var e=Z.parseJSON(t.responseText);403==t.status?alert(e.message):422==t.status&&"has already been taken"==e.title?alert("This banner name is in use. Please change the name and try again."):alert("There was an error saving the settings for this element. Please try again.")},success:function(t){var e=Z(t),o=!l&&n.data(ie);if(n.dialog("close"),ct(s).replaceWith(e),n.removeData(ie),e.hasClass("fsBanner")){var r,a={id:parseInt(s)},c=i.length,d=0;for(d;d<c;d++)r=i[d].name.match(/settings\[(\w*)\]$/),r&&(a[r[1]]=i[d].value);vt("banner:update",a),L(e)}else o?vt("sharedElement:update",o):st?vt("sharedElement:update",ft().data("shared-id")):(vt("element:update",s),L(Z(ve)));yt.triggerElementUpdated(e)}}).always(function(){z(!1)}))}}],close:function(){Z(this).hasClass(He)&&V(),Je.off("keyup.settingsDialog"),Z(".fsSecondarySettingsDialog").dialog("close").dialog("destroy").remove(),Ke.removeClass("fsDialogOpen")},open:function(){Je.on("keyup.settingsDialog",function(t){13!=t.keyCode||Z("#fsElementSettingSaveButton").hasClass(se)||"TEXTAREA"==document.activeElement.tagName||"true"==Z(document.activeElement).attr("contenteditable")||Z(".selectize-dropdown-content").is(":visible")||Z("#fsElementSettingSaveButton").trigger("click")}),Ke.addClass("fsDialogOpen")}})),G.on("change","#fsElementSubtypeList input[type=radio]",function(t){Z("#fsSubtypeSettingsFlag").attr("class","fsSubtypeSelected"+Z(t.target).val())}),G.on("click",".fsStyleAccordionHeader",function(){Z(this).toggleClass(Ne)}),G.on("click",'.fsStyleAccordionHeader input[type="radio"], .fsStyleAccordionHeader label',function(t){t.stopPropagation(),Z(this).closest(".fsStyleAccordionHeader").addClass(Ne)}),G.on("focus","#fsElementSettingTitle",function(){Z(this).select()}),G.on("change","#fsElementSettingShowTitle",function(){Z("#fsElementSettingTitle").toggleClass("fsElementTitleHidden",!this.checked)})),Z("#fsElementSettingSaveButton").addClass(se)}function E(t,i,n){var s,o=Z('<div><div id="fsPageDialogContent">'+t+"</div></div>"),r=o.find(Fe);r.length&&o.prepend(r),G.html(o.html()).data("orphan",n),Z("#fsElementSettingSaveButton").removeClass(se),Z("select[multiple]").selectize({hideSelected:!1,plugins:["fsSelectize"],onInitialize:function(){var t=Z(this);t[0].settings.create=t[0].$input.data("create");var e=t[0].$input.data("maxitems");isNaN(e)||(t[0].settings.maxItems=e)}}),X=Z(Pe),oi[i]&&oi[i](),Z(Ct).on("change",function(){Z(St).attr("src",Z(this).val())}),Z("#fsElementSettingBackgroundImageFileManager").on("click",function(){Z(e).one("message.pageThumbnailSelected",function(t){var e=JSON.parse(t.originalEvent.data);"fileManager:selected"==e.event&&Z(Ct).val(e.path).trigger("change")}),O("gif,png,jpg,jpeg,svg")}),s=Z.extend({},si,{buttonsHide:["embed","media","table"],linebreaks:!0,paragraphize:!1}),Z("#settings_header_text, #settings_footer_text").redactor(s),x(Z(".fsSecondaryElementSettings")),et.setupClearInputButtons(G.find(Lt))}function D(t){function e(e,s){var o,r=s||n.find(".fsGroupPickerTree").jstree(!0).get_selected(!0),a=r.length;t.multiple?o=0==a?"No Groups Selected":1==a?"1 Group Selected":a+" Groups Selected":(o=r[0].text,x(i)),Z("#fsSelectedGroupsCount").text(o)}var i=Z("#fsSelectGroupsDialogContent"),n=Z("#fsSelectGroupsTree"),s={hiddenFieldName:"settings[group_ids][]"};t.multiple=0!=t.multiple,n.fsGroupPicker(Z.extend(s,t)).on("groupPicker:selectionLoaded groupPicker:change",e),Z("#fsOpenSelectGroupsDialogButton").click(function(){W(i,t.multiple?"Select Groups":"Choose Group")})}function P(){Z(ze).change(function(){1==Z(this).val()?Z(Re).prop(Ft,!0).val(1):Z(Re).prop(Ft,!1)})}function M(){Z(".fsSettingShowThumbnail").on("change",function(){var t=Z(this),e=t.siblings(".fsElementSettingThumbnailOptions");U(e,!t.prop("checked"))}),Z(".fsSettingThumbnailPosition").on("change",function(){var t=Z(this),e=t.siblings(".fsElementSettingThumbnailAlignShapeContainer");U(e,t.val()>=2)})}function A(t){return $(lt(t),!0).done(function(t){Ke.addClass(Dt),L(t),B(t.find(le))})}function I(t){et.makeSubelementsSortable(t,be)}function L(t){t.find(et.SORTABLE_SELECTOR).addBack(et.SORTABLE_SELECTOR).sortable(ri),I(t.find(wt)),et.makeSubelementsSortable(t.find(".fsPersonalizationElement"),".fsPersonalizationPanelElement"),et.makePanelGroupTabsSortable(t)}function j(t){ii=t,vt("contentElement:unsavedEdits",{unsavedEdits:ii})}function O(t){var i="/cf_filemanager/adminfiles.cfm?do=refresh&opener=cmsAssets&ext="+t,n="toolbar=no,location=no,directories=no,status=no,menubar=no,scrollbars=yes,resizable=yes,width=750,height=550",s=e.open(i,"popupFileManager",n);s.focus()}function $(t,e){return at(dt(lt(t)),{in_draft_mode:!0,is_draft:e,page_id:ut()})}function N(){return ei.enabled&&ei.access?2:0}function F(t){var e,i,n,s=lt(t),o={},r=dt(s),l=ti[r]||{},c=ut();t.data("editor")==Mt?(e=g(y(t,At).attr("id")),n=e.getResourcesUsed(),tt.each(l.resources,function(t){n.indexOf(t.uuid)==-1&&(t._destroy=!0,l.changed=!0)}),tt.each(n,function(t){var e=tt.find(l.resources,function(e){return t==e.uuid});e||(l.resources.push({uuid:t}),l.changed=!0)}),i=e.getData()):i=t.redactor("code.get"),i!=Q?(o.element_id=r,l&&l.resources&&(o.content_resources_attributes=l.resources),c&&(o.page_id=c),o.content=i,Z.ajax({contentType:"application/json",data:JSON.stringify(o),dataType:"json",type:"PUT",url:"/fs/element-settings/"+w(s)}).done(function(e){j(!1),0==r?vt("sharedElement:update",s.data("shared-id")):vt("element:update",r),a(t),s.replaceWith(e.element_html)}).fail(function(t){403==t.status?alert(t.responseJSON.message):alert("An error occurred saving your content")})):a(t)}function H(t){Z("#fsDateFilterSettingDisplayMoreItemsText").on("change",function(){var e=Z(this);""==e.val()&&e.val(t)})}function R(){var t=Z(ge);Z("#fsElementSettingShowLink").on("change",function(){var t=Z(this).siblings(Me);t.length&&U(t,!this.checked)}),t.find("input:radio").on("click",function(){U(t.siblings(re),"fsElementSettingsOpenMethodPage"!=this.id),U(t.siblings(".fsLinkedElementContainer"),"fsElementSettingsOpenMethodElement"!=this.id)})}function z(t,e){vt("showLoadingOverlay",{message:e,state:t})}function B(t){if(t.length){var e=t.map(function(){return Z(this).data("title")}).get();vt("showMissingLinkedPageErrors",{errors:e})}}function W(t,e){G.primaryTitle=G.dialog("option","title"),G.primaryButtons=G.dialog("option","buttons"),X.after(t),X.switchClass(De,Ee),t.addClass($e,400),G.addClass(Oe),G.dialog("option","buttons",[{text:"Back",click:function(){x(t)}}]),e&&G.dialog("option","title",e),G.dialog("open")}function q(){var t=Z("#"+Qt),e=v();e&&(t.find("p.name").text(e.title),t.find("span:first-child").attr("class","fs"+e.type+"Icon"),t.data("elementID",e.id)),t.toggleClass(se,!e)}function U(t,e){t.toggleClass(se,e)}function V(){var t="Save";G.toggleClass(He),G.hasClass(He)&&(t+=" and Convert to Shared Element"),G.parent().find('button > span:contains("Save")').text(t)}var Y,G,K,X,Q,J,Z=t.$,tt=t._,et=t.getInternalNS("elements.utils"),it=et.inBannerEditMode(),nt=et.inDraftMode(),st=et.inSharedElementEditMode(),ot=et.suppressGoogleMaps(),rt=et.createElement,at=et.fetchElementHTML,lt=et.getElement,ct=et.getElementByID,dt=et.getElementID,ht=et.getInternalLinkProperties,ut=et.getPageID,ft=et.getSharedElement,pt=et.getTabID,mt=t.getInternalNS("elements.media"),gt=et.moveBehind,vt=et.notifyAdminInterface,yt=t.events,bt="fsAccordion",wt="."+bt,_t="fsStateActive",kt="fsAdminWarning",xt="."+kt,Ct="#fsElementSettingBackgroundImagePath",St="#fsElementSettingBackgroundImagePreview",Tt="fsBannerEditOverlay",Et=".fsBannerEdit",Dt="fsBannerEditMode",Pt="cke_",Mt="cke",At="."+Mt,It="fsClearInput",Lt="."+It,jt="fsComposeMode",Ot="fsContainer",$t=".fsContent",Nt=".fsContentOverlayText",Ft="disabled",Ht="fsDevicePreviewMode",Rt="fsElement",zt="."+Rt,Bt="fsElementContent",Wt="."+Bt,qt=".fsContentEditable",Ut="fsElementCopied",Vt="."+Ut,Yt=".fsElementCopy",Gt="fsStateElementDragging",Kt=".fsElementEditSettings",Xt="elementID",Qt="fsElementLibraryClipboard",Jt="fsElementLibraryOpen",Zt="fsElementEmptyPlaceholder",te="."+Zt,ee="elementSettingsID",ie="sharedElementID",ne="/fs/elements",se="fsStateHidden",oe=".fsLinkedPageClearButton",re=".fsLinkedPageContainer",ae=".fsLinkedPageID",le=".fsElementMissingLinkedPage",ce=".fsLinkedPageName",de="fsLinkedPageNameDefault",he=[".fsAthleticsEvent",".fsCalendar",".fsNews",".fsPostElement",".fsCommentList",".fsIssueElement"],ue='<div class="fsLoadingDots"></div>',fe=".fsMediaSettingsSelectedMediaNodes",pe="fsOneButton",me="fsStateOpen",ge="#fsElementSettingsOpenMethod",ve="#fsPageContent",ye="fsPanel",be="."+ye,we="fsPanelGroup",_e="."+we,ke="fsTabsNavItem",xe=".fsTabsNav",Ce=_e+" "+xe,Se=".fsLinkedPostFolderIDs",Te="#fsElementSettingsDisplayPostFoldersMethod",Ee="fsElementSettingsOffScreen",De="fsElementSettingsOnScreen",Pe="#fsElementSettings",Me=".fsElementSettingShowReadMoreContainer",Ae="redactor-editor",Ie="."+Ae,Le="fsStateRichTextEditing",je="."+Le,Oe="fsSecondaryElementSettingsVisible",$e="fsSecondaryElementSettingsOnScreen",Ne="fsStateSelected",Fe="#fsElementShareButton",He="fsElementShareSettings",Re="#settings_slideshow_slide_count",ze="#settings_slideshow_transition_effect",Be="fsStateEditable",We="."+Be,qe="> "+Wt+We,Ue="#fsSelectedMediaName",Ve="fsTabs",Ye="."+Ve,Ge=Ye+" > "+Wt,Ke=Z(document.body),Xe=Z(document),Qe=Z("html"),Je=Z(e),Ze=Z('meta[name="csrf-token"]').attr("content"),ti={},ei=t.getNS("managers.resources"),ii=!1,ni={autoOpen:!1,closeOnEscape:!0,draggable:!0,modal:!0,position:["center",15],resizable:!1},si={buttonsHide:["media"]},oi={AthleticsTeam:function(){C(),Z('input[name="settings[subtype]"]').on("change",function(){var t=Z(this);U(Z("#fsAthleticSettingTeamSchoolContainer"),"Profile"==t.val()&&!Z("#fsAthleticSettingTeamName").prop("checked"))}),Z("#fsAthleticSettingLinkTeamsToPage").on("change",function(){var t=Z(this),e=t.siblings(re);U(e,!t.prop("checked"))}),Z("#fsAthleticSettingGroupTeams").on("change",function(){var t=Z(this),e=t.siblings(".fsAthleticSettingGroupTeamsBy");U(e,!t.prop("checked"))}),Z("#fsAthleticSettingTeamName").on("change",function(){U(Z("#fsAthleticSettingTeamSchoolContainer"),!Z(this).prop("checked"))}),R()},Calendar:function(){d("calendar"),P(),S(),R(),H("Load More Events"),Z("#fsCalendarSettingEndDate, #fsCalendarSettingStartDate").datepicker({dateFormat:"yy-mm-dd"}),Z("#fsElementSettingSlideshowAutoplay").on("change",function(){var t=Z(".fsElementSettingSlideshowDuration");U(t,!Z(this).prop("checked"))}),Z("#fsCalendarSettingCombineWeekendDays").on("change",function(){Z("#fsCalendarSettingWeekStartsOnContainer").toggleClass(se,Z(this).is(":checked"))}),Z("#fsCalendarSettingDisplayAthleticEvents").on("change",function(){Z("#fsCalendarSettingsTeamsContainer").toggleClass(se,!Z(this).is(":checked"))}),Z(".fsCalendarSettingEventDisplayType").on("change",function(){U(Z(".fsCalendarSettingsCalendars"),1==Z(this).val()),U(Z(".fsCalendarSettingDisplayTypeSpecific"),0==Z(this).val())}),Z('input[name="settings[subtype]"]').on("change",function(){var t="Event"==Z(this).val();U(Z(".fsCalendarSettingsCalendars"),t&&1==Z(".fsCalendarSettingEventDisplayType:checked").val())})},Constituent:function(){var t=Z("#fsConstituentID"),e=Z("#fsConstituentSettingName");M(),R(),n(),D({excludeRoles:!0}),Z('input[name="settings[any_roles]"]').on("change",function(){U(Z("#fsConstituentSettingRoleSelect"),1==Z(this).val())}),Z('input[name="settings[use_default_format]"]').on("change",function(){U(Z(".fsConstituentCustomFormatSetting"),1==Z(this).val())}),Z('input[name="settings[display_degrees]"]').on("change",function(){U(Z("#fsConstituentSettingDegreeFields"))}),Z('input[name="settings[custom_format_display_degrees]"]').on("change",function(){U(Z("#fsCustomFormatDegreeFields"))}),Z("#fsConstituentSettingDisplayAddress").on("change",function(){var t=Z(this);t.siblings(".fsConstituentSettingAddressTypeContainer").toggleClass(se,!t.prop("checked"))}),Z("#fsConstituentSettingCustomFormatDisplayAddresses").on("change",function(){var t=Z(this);t.siblings(".fsConstituentSettingCustomFormatAddressTypeContainer").toggleClass(se,!t.prop("checked"))}),Z("#fsConstituentSettingDisplayDirectoryEmails, #fsConstituentSettingDisplayProfileEmails").on("change",function(){var t=Z(this),e=Z(this).siblings(".fsElementSettingEmailOptions");U(e,!t.prop("checked"))}),Z("#fsElementSettingShowLink").on("change",function(){U(Z("#fsConstituentSettingDisplayProfileLinkContainer"),!Z(this).prop("checked"))}),Z("#fsConstituentSettingDisplayProfileLink").on("change",function(){Z("#fsConstituentSettingProfileLinkText").prop("readonly",!Z(this).prop("checked"))}),Z('input[name="settings[subtype]"]').on("change",function(){var t=Z(this).val();"Directory"==t?Z(".fsConstituentFormatSettings").html("<span></span>Pop-Up Details"):"Profile"==t&&Z(".fsConstituentFormatSettings").html("<span></span>Field Details")}),e.attr("placeholder","Please enter a name..."),e.autocomplete({minLength:2,change:function(i,n){n.item||(e.val(""),t.val(""))},open:function(){e.autocomplete("widget").addClass("fsConstituentsSettingAutoComplete")},select:function(i,n){return i.stopPropagation(),i.preventDefault(),t.val(n.item.personid),e.val(n.item.name),!1},source:function(t,e){Z.ajax({dataType:"json",url:"/cf_endpoints/routes.cfm/constituents/autosuggest.json",data:{filter:t.term},success:function(t){e(t)}})}}).data("ui-autocomplete")._renderItem=function(t,e){return Z("<li>").data("item.autocomplete",e).append('<a><div><img src="'+e.avatar+'"> <span>'+e.name+"</span></div></a>").appendTo(t)}},Groups:function(){D({multiple:!1,onlyGroupSpaces:!0,topLevelDisabled:!1})},Media:function(){var t,e=Z("#fsSelectMediaDialogContent");Z("#fsMediaSettingsPlayerControls").on("change",function(){var t={disabled:2==Z(this).val()};t.disabled&&(t.checked=!0),Z("#fsMediaSettingsAutoPlay").prop(t)}),t=Z(fe+" input:checked").next("label").text(),Z(Ue).text((t?t:"No media")+" selected"),mt.initPicker(e),e.on("mediaPicker:change",function(t,e){Z(Ue).text(e+" selected")}),Z("#fsShowSelectMediaSettingsButton").click(function(){W(e,"Select Media")})},News:function(){d("news"),P(),S(),M(),R(),H("Load More News"),Z("#fsElementSubtypeList").on("change",'input[name="settings[subtype]"]',function(){Z("#fsNewsSettingDisplayTypeNewsPost").prop("checked")&&"Post"!=Z(this).val()&&Z("#fsNewsSettingDisplayTypeNews").prop("checked",!0).change()}),Z(".fsNewsSettingDisplayType").on("change",function(){var t=Z(this),e=t.closest(".fsNewsSettingGeneral").find(".fsNewsSettingCategories");U(e.insertAfter(t.parent()),2==t.val()||4==t.val())}),Z("#fsNewsSettingShowBody").on("change",function(){var t=Z(this),e=t.siblings(".fsNewsSettingCalloutOption");U(e,!t.prop("checked"))}),Z("#fsNewsSettingShowComments").on("change",function(){var t=Z(this),e=t.siblings(".fsNewsSettingCommentOptions");U(e,!t.prop("checked"))}),Z("#fsElementSettingSlideshowAutoplay").on("change",function(){U(Z(".fsElementSettingSlideshowDuration"),!Z(this).is(":checked"))}),Z("#fsNewsSettingPostShowBody").on("change",function(){var t=Z(this),e=t.siblings(".fsNewsSettingPostCalloutOption");U(e,!t.prop("checked"))})},Vimeo:function(){Z("#fsVimeoURL").keyup(function(t){U(Z("#fsVimeoSettings"),!/com\/\D+/.test(t.currentTarget.value))})},Youtube:function(){var t=function(){var t=0;return function(e,i){clearTimeout(t),t=setTimeout(e,i)}}();Z("#fsYoutubeURL").keyup(function(e){t(function(){var t=e.currentTarget.value,i=!(/(list|p)=[\w-]+/.test(t)||/\/(user|channel)\/[\w-]+/.test(t)||/com\/\w+/.test(t)&&!/\/watch.*(?:v)=/.test(t));U(Z("#fsYoutubeSettings"),i)},300)})}},ri={connectWith:et.SORTABLE_SELECTOR,cursorAt:{left:5,top:5},distance:10,items:">"+zt+We+":not("+Ge+" > "+be+")",placeholder:"fsElementPlaceholder",scrollSensitivity:125,tolerance:"pointer",cancel:je+", :input:not(.fsElementMovable),.CodeMirror,.redactor-box,.fsEmbeddedGoogleMap,"+be+" > header h2,.fsBannerOverlayWrapper",helper:function(t,e){return Z("<div/>",{height:"auto",id:"fsElementDragHelper",text:e.data("title")+" Element",width:"250px"})},start:function(){Z(this).sortable("refreshPositions"),Ke.addClass(Gt)},stop:function(){Ke.removeClass(Gt)},update:function(t,e){var i=Z(this);if(s(lt(i)),this===e.item.parent()[0]){var n=Z(e.item),o=n.parent(),r=n.prev(zt),a=o.hasClass(ke);a&&(o=ct(pt(o)),r=o.find("> "+Wt+" > "+zt).last()),gt(n,r,lt(o)).fail(function(){i.sortable("cancel"),Z(e.sender).sortable("cancel")}).success(function(){a&&(r.length?n.insertAfter(r):n.appendTo(o.find(Wt)),s(lt(o))),yt.triggerElementMoved(n)})}else e.item.parent().parent().hasClass(bt)&&!e.item.hasClass(ye)&&i.sortable("cancel")}};if(Xe.ajaxSend(function(t,e,i){/PUT|POST|PATCH|DELETE/.test(i.type)&&e.setRequestHeader("X-CSRF-Token",Ze)}),Xe.ajaxError(function(t,i){401==i.status&&(e.alert("You are not authorized. Please log in and try again."),top.location.href=nt?"/admin.cfm":"/fs/login")}),Ke.on("click",$t+" > "+Wt+We,function(){var i,n,s=Z(this),o=s.closest($t),r=s.find(qt),a=!1;if(sessionStorage.setItem("expandPageID",Ke.data("pageid")),Ke.hasClass(jt)&&"undefined"!=typeof CKEDITOR)if(r.hasClass(Ae)||o.hasClass(Le)?a=!0:Ke.add(o).addClass(Le),r.data("editor")==Mt)a||(i={fsHasResources:N(),startupFocus:!0,usePickerEvents:!0,on:{blur:function(){e.cancelEditorBlurSave?e.console.warn("Editor blur fired but was cancelled because cancelEditorBlurSave is true."):F(r)},change:function(){ii||j(!0)},instanceReady:function(){Q=this.getData(),n=dt(lt(s)),ti[n]?(ti[n].resources=[],ti[n].changed=!1):ti[n]={changed:!1,resources:[]},tt.each(r.data("resources"),function(t){ti[n].resources.push({id:t.id,uuid:t.uuid})})}}},e.FS.ckeditor.getConfig(i).done(function(e){e.fsHasResourcesCompatibilityMode=t.managers.resources.compatibilityMode,CKEDITOR.replace(r.get(0),e)}));else if(!r.hasClass(Ae)){var l=Z.extend({},si,{focus:!0,blurCallback:function(){Z(".redactor-image-editter, .redactor-link-tooltip").is(":visible")||F(r)},changeCallback:function(){ii||j(!0)},initCallback:function(){Ke.find(je).not(o).each(function(){F(Z(this).find(qt))}),Q=this.code.get()}});r.redactor(l)}}),Ke.on("click",$t+"[data-shared-id]:not([data-settings-id])",function(t){var e=lt(Z(this));Ke.hasClass(jt)&&!Z(t.target).hasClass("fsElementAdd")&&p(e)}),Ke.on("click",".fsElementAdd",function(t){var e=Z(this).parent(),i=e.hasClass(Zt),n=i?e:lt(e);n.addClass(_t),m().data("element",n).data("showLocation",!i).dialog("option","position",{at:"center",my:"center top",of:t}).dialog("open")}),Ke.on("mousedown",".fsElementSave",function(){var t=y(Z(this),qt);return F(t),!1}),Ke.on("mousedown",".fsElementCancel",function(){var t,e=y(Z(this),qt);return e.data("editor")==Mt?(t=y(Z(this),At),g(t.attr("id")).setData(Q)):(t=y(Z(this),Ie),t.redactor("code.set",Q)),a(e),j(!1),!1}),Ke.on("click",".fsElementBannerEdit",function(){Y||(Y=Z('<div id="'+Tt+'"></div>'),Ke.append(Y)),Y.show(),h(),A(Z(this))}),Ke.on("click",".fsElementBannerExit, #"+Tt,function(){h(),L(Z(ve)),$(lt(Z(Et)),!1).done(r)}),Ke.on("click",".fsElementBannerPublish",function(){vt("banner:requestPublish",dt(lt(Z(this))))}),Ke.on("click",Kt,function(){var t,e=Z(this);return t=e.is(Ge+" > ul "+Kt)?ct(pt(e)):lt(e),p(t),!1}),Ke.on("click",Yt,function(){var t,e=Z(this),i=lt(e),n="fsElementCopySuccessful",s=k(i);return"SharedContainer"==s?s="Container":"PanelGroup"==s&&(s+=i.hasClass("fsTabs")?"Tabs":"Accordion"),o(),t={id:dt(i),timestamp:Date.now(),title:_(i),type:s},sessionStorage.setItem("copiedElement",JSON.stringify(t)),e.addClass(Ut).addClass(n),setTimeout(function(){e.removeClass(n)},1e3),!1}),Ke.on("click",".fsElementDelete",function(){var t,e,i,n,o=Z(this),r="",a=o.is(Ge+" > ul .fsElementDelete")||o.is(Ce+" > .fsElementDelete"),l=Z('<div id="fsElementDeleteDialog"></div>').appendTo(Ke);if(a){i=o.closest("li");var c=i.parent();if(c.find(".fsTabsNavItem").length<2)return alert("Sorry, you cannot delete at this time. This element requires at least one panel."),!1;e=pt(o),t=ct(e)}else t=lt(o),e=dt(t);return n=_(t),t.find(zt).not(zt+be).length>0&&(r+='<p class="fsWarning">WARNING: Deleting this will also delete any elements it contains.</p>'),r+='<p>Are you sure you want to delete "'+n+'"?</p>',l.dialog(Z.extend({},ni,{dialogClass:"fsElementDeleteDialog",title:"Delete "+n,buttons:[{text:"Cancel",click:function(){Z(this).dialog("close")}},{id:"fsElementDeleteConfirmButton",text:"Delete",click:function(){var n=Z(this);n.html(ue),Z.ajax({cache:!1,dataType:"json",type:"DELETE",url:ne+"/"+e+"?page_id="+ut(),error:function(){n.dialog("close"),alert("There was an error deleting this element. Please try again.")},success:function(){var o=lt(t.parent());a&&i.remove(),yt.triggerElementDeleted(t),t.remove(),s(o),vt("element:delete",e),n.dialog("close")}})}}]})),l.html(r),l.dialog("open"),!1}),Ke.on("click",".fsAddTab",function(){var t=Z(this),e=t.closest(Ye),i=dt(e),n=t.parent().prev(),s=t.html();t.prop(Ft,!0).html(ue),rt(i,n.length>0?dt(n):0,!0).done(function(t){var s=Z(t).addClass(me),o=e.find("ul .fsElementActionButtonContainer").first().clone(),r=dt(Z(t)),a=Z("<li>",{id:"fsTab_"+r});a.append(Z("<a>",{href:"#"+s.attr("id"),html:"New Tab"})).append(o).addClass(ke),a.insertAfter(n),e.find("> "+Wt+" > .fsElement").last().after(s),yt.triggerElementUpdated(e),yt.triggerElementAdded(s),L(Z(ve)),vt("element:create",i)}).always(function(){t.prop(Ft,!1).html(s)})}),Ke.on("click",zt+We+" "+xt+":not("+Nt+"), "+zt+We+" .fsElementEmpty",function(){var t=lt(Z(this));nt&&c()&&t.find(Kt).length&&p(t)}),it&&L(Z(Et)),st&&L(Z(ve)),nt&&c()&&!Ke.hasClass("fsBannerPreviewMode")&&l(!0),Ke.on("click",Fe,function(){return V(),!1}),Ke.on("click",oe,function(t){var e=Z(t.originalEvent.target),i=e.closest(re),n=i.find(ce);i.find(ae).val(0),n.data("defaulttext")?n.text(n.data("defaulttext")).addClass(de):n.empty().addClass(se),e.closest(oe).addClass(se)}),Ke.on("click",".fsLinkedPagePickerButton",function(t){var e=t.originalEvent.target,i={id:e.id,pickerOptions:{allowBranchSelection:!0,depth:Z(e).attr("data-depth"),selectedPageIDs:[ut()]}};vt("pagePicker:open",i)}),nt){var ai=".redactor-box a, .redactor-dropdown a, .redactor-link-tooltip a, #redactor-modal a,.fsMediaGalleryObject a, .fsTabs a, .fsTabsNav .ui-tabs-anchor, .jstree-checkbox-selectall,.fsNotification a, .fsAlternateViewToggleLink, .fsElementPagination a, .juicer-feed a";Ke.on("click","a[href]:not("+ai+")",function(){var t=Z(this),i=t.attr("href"),n=ht(i,t.data("page-id"));return!!/^(javascript:|mailto:|tel:|#)/.test(i)||(n.pageID?vt("page:show",{pageID:n.pageID,queryString:n.queryString}):e.open(i,"fsPopWin"),!1)})}if(Je.on("message",function(t){var i;try{i=JSON.parse(t.originalEvent.data)}catch(t){i={event:""}}switch(i.event&&"fsGlobal:"==i.event.substr(0,9)&&e.parent.postMessage(JSON.stringify(i),e.location.origin),i.event){case"composeMode":l(i.data);break;case"devicePreview:open":u(!0);break;case"devicePreview:close":u(!1);break;case"element:updated":var n=Z(i.data.elementHtml),s=ct(i.data.elementID),o="linked-element-ids",r=n.data(o)||[],a=s.data(o)||[],c=s.closest(".fsBanner");s.replaceWith(n),tt.isEqual(r,a)||tt.each(tt.unique(r.concat(a)),function(t){var e=ct(t);e.length&&at(t)}),yt.triggerElementUpdated(n),c.length&&(c.find(".fsElementBannerPublish").removeClass(se),et.notifyAdminInterface("banner:update",et.getElementID(c)));break;case"pagePicker:return":var d=Z("#"+i.data.target).closest(re);d.find(ae).val(i.data.pageID),d.find(ce).text(i.data.pageName).removeClass(se+" "+de),d.find(oe).removeClass(se);break;case"postFolderPicker:return":var h=Z("#"+i.data.target).closest(Te),f=Z("<input>",{"class":"fsLinkedPostFolderIDs",multiple:"multiple",name:"settings[board_folder_ids][]",type:"hidden"}),p=i.data.selectedItemIDs;h.find(Se).remove(),Z.each(p,function(t,e){h.append(f.clone().val(e))}),0==p.length&&h.append(f),h.find(".fsLinkedPostFoldersSelected").text(p.length+" folders selected")}t.preventDefault()}),Ke.on("click",".fsElementPagination a, .fsLoadMoreButton:not("+he.map(function(t){return t+" .fsLoadMoreButton"}).join(",")+")",et.loadMoreHandler),Je.resize(function(){clearInterval(J),J=setTimeout(et.adjustMediaAspectRatio,250)}),Z.widget("ui.dialog",Z.ui.dialog,{_allowInteraction:function(t){return!!this._super(t)||(t.target.ownerDocument!=this.document[0]||(!!Z(t.target).closest("#redactor-modal, .redactor-dropdown, .redactor-link-tooltip, .redactor-box-fullscreen").length||void 0))},_moveToTop:function(t,e){t&&this.options.modal||this._super(t,e)}}),nt){var li=tt.debounce(function(){Ke.hasClass(jt)&&Z(ve).find(et.SORTABLE_SELECTOR).sortable(ri)},750);yt.onElementShown("Panel",li),yt.onElementHidden("Panel",li),Z(function(){var t=v();if(et.setupClearInputButtons(Ke.find(Lt)),B(Ke.find(le)),t){var e=ct(t.id);e&&e.find(Yt+":first").addClass(Ut)}})}et.SORTABLE_CONFIG=ri}(FS,window),function(t){"use strict";function e(t,e,i,n,s){return t<i&&(s||i*n>=e)}function i(t){for(var e=t.parent();e;){if("inline"!=e.css("display")&&parseInt(e.css("width"))>m)return e;e=e.parent()}return t}function n(t){var n,s,o,r,a=t.closest(".fsDialog"),c=t.closest(".fsPanel"),h=t.attr("data-aspect-ratio"),u=t.data("cache-id"),f=d[u],p=t.attr("width"),g=JSON.parse(t.attr("data-image-sizes").replace(/%22/g,'"')),v=!1,y="IMG"==t.prop("tagName"),b=!1,w={alt:t.attr("alt"),style:t.attr("style")||""};c.length&&!c.hasClass("fsStateOpen")||a.length&&!a.attr("open")&&!a.hasClass("fsStateOpen")||(t.attr("alt","").css({margin:0,padding:0}),f||(v=!0,u=l.uniqueId(),f=d[u]={$parentElement:i(t),cachedSize:0,sizes:l.sortBy(g,"width")},t.data("cache-id",u)),o=t.width(),s=t.innerHeight(),(y&&!v||o<m)&&(o=f.$parentElement.width(),b=!0,o>p&&(o=p)),r=b||s<m,t.attr(w),e(o,s,f.cachedSize,h,r)||(n=l.find(f.sizes,function(t,i){return e(o,s,t.width,h,r)||i==f.sizes.length-1}),y&&t.attr("src")!=n.url?(t.one("load",function(){t.data("image-loaded",!0),t.trigger("image:loaded")}),t.data("image-loaded",!1),t.attr("src",n.url),f.cachedSize=n.width):y||t.css("background-image").replace(/url\(['"]?([^'"]+)['"]?\)/,"$1")==n.url||(t.css("background-image","url('"+n.url+"')"),f.cachedSize=n.width)))}function s(t){a(p).each(function(){var e=a(this);t&&u.getElement(e).attr("data-manual-resource-scaling")||n(e)})}function o(t){t.find(p).addBack(p).each(function(){n(a(this))})}var r,a=t.$,l=t._,c=a(window),d={},h=t.getNS("events"),u=t.getInternalNS("elements.utils"),f="all",p="[data-image-sizes]",m=40;r=l.debounce(s,500),c.resize(function(){r(!1)}),h.onElementAdded(f,o),h.onElementDialogShown(f,o),h.onElementMoved(f,o),h.onElementShown(h.ALL_CONTAINERS_TYPE,o),h.onElementUpdated(f,o),s(!0),t.util.updateDynamicImages=o}(FS),function(t){"use strict";function e(e){return t(e).closest(u)}function i(t){var i=e(t);i.find(c).val(""),i.find(f+","+p).addClass(h),i.find(d).removeClass(h),i.find(c).focus()}function n(t){var i=e(t);i.find(d+","+p+","+m).addClass(h),i.find(f).removeClass(h).find(".fsLoginUsername").focus()}function s(t){var i=e(t);i.find(d+","+f).addClass(h),i.find(p).removeClass(h),i.find(p+" .fsLoginNewFirstName").focus()}function o(t){var i=e(t);i.find(w).removeClass(h),i.find(_).addClass(h),i.find(g).text(""),i.find(y).val(""),i.find(v).val(""),i.find(b).val(""),i.find(v).focus()}function r(t,i){var n=e(t);n.find(w).addClass(h),n.find(_).removeClass(h),n.find(g).text(i),n.find(y).val(i),n.find(b).focus()}function a(){return t(".fsStaggeredLogin").length>0}var l=FS.getInternalNS("elements.utils"),c=".fsLoginForgotEmail",d=".fsLoginForgotView",h="fsStateHidden",u=".fsAccount",f=".fsLoginMainView",p=".fsLoginNewView",m=".fsResetPasswordView",g=".fsStaggeredLoginUsernameDisplay",v='input[name="usernameCheck"]',y='input[name="username"]',b='input[name="password"]',w=".fsStaggeredLoginStage1",_=".fsStaggeredLoginStage2";t(".fsLoginForgotPasswordLink a").on("click",function(){var e=t(this);return"#"!=e.attr("href")||(i(this),!1)}),t(".fsLoginNewAccountLink a").on("click",function(){var e=t(this);return"#"!=e.attr("href")||(s(this),!1)}),t(".fsLoginForgotCancel, .fsLoginNewCancel, .fsResetCancel").on("click",function(){n(this)}),a()?(t(".fsStaggeredLoginCheckAuthType").submit(function(e){e.preventDefault();var i=t(this),n=i.find(v).val();l.loadingOverlay(i),t.when(l.getToken()).then(function(e){t.ajax({dataType:"json",type:"POST",url:"/fs/auth/checkauthtype",data:{authenticity_token:e,username:n}}).done(function(t){t.oauth_redirect?window.location=t.oauth_redirect:r(i,n)}).fail(function(t,e,i){400==t.status?alert("Your username was missing. Please enter it and try again."):alert(i)}).always(function(){l.removeLoadingOverlay(i)})})}),t(".fsStaggeredLoginSubmit").submit(l.loginFormSubmitHandler),t(".fsStaggeredLoginGotoStage1").click(function(){o(t(this))})):t(".fsAccount form").submit(l.loginFormSubmitHandler),t(".fsResetContinue").on("click",function(){var i,s=t(this),o=e(s),r=o.find(".fsResetRequestKey"),a=o.find(".fsResetUsername"),l=o.find(".fsResetNewPassword"),c=o.find(".fsResetNewVerifyPassword"),d=t.trim(a.val()),u=t.trim(r.val()),f=t.trim(l.val()),p=t.trim(c.val());return o.find(".fsError").addClass(h),0==d.length?(i="Please enter your username to continue.",alert(i),a.next(".fsError").removeClass(h).html(i),void a.val("").focus()):0==f.length?(i="Please enter a password to continue.",alert(i),l.next(".fsError").removeClass(h).html(i),void l.val("").focus()):0==p.length?(i="Please verify the password by typing it again.",alert(i),c.next(".fsError").removeClass(h).html(i),void c.val("").focus()):f!=p?(i="Please verify the password by ensuring that both passwords match.",l.next(".fsError").removeClass(h).html(i),c.next(".fsError").removeClass(h).html(i),void alert(i)):(s.prop("disabled",!0),void t.ajax({dataType:"json",type:"POST",url:"/cf_endpoints/routes.cfm/constituents/reset_password.json",data:{password:f,password_confirm:p,request_key:u,username:d},error:function(t,e,i){alert(i),s.prop("disabled",!1)},success:function(t){t.success?(alert("You have successfully updated your password. Please log in using your new password."),n(s)):alert(t.error),s.prop("disabled",!1)}}))}),t(".fsLoginForgotSubmit").on("click",function(){var e=t(this),i=e.siblings(c),s=t.trim(i.val());return 0==s.length?(alert("Please enter an email address to continue."),i.val(""),void i.focus()):(e.prop("disabled",!0),void t.ajax({data:{email:s},dataType:"json",type:"POST",url:"/cf_endpoints/routes.cfm/constituents/forgot.json",error:function(t,i,n){alert(n),e.prop("disabled",!1)},success:function(t){t.success?(alert("You have been sent an email with your login information."),n(e)):alert(t.error),e.prop("disabled",!1)}}))}),t(".fsLoginNewContinue").on("click",function(){var i=t(this),n=e(this),s=n.find('.fsLoginNewFirstName + input[type="text"]'),o=n.find('.fsLoginNewLastName + input[type="text"]'),r=n.find('.fsLoginNewEmail + input[type="text"]'),a=n.find('.fsLoginNewVerifyEmail + input[type="text"]'),l=n.find('.fsLoginNewPassword + input[type="password"]'),c=n.find('.fsLoginNewVerifyPassword + input[type="password"]'),d=n.find(".fsLoginNewCaptcha"),h=n.find('.fsLoginNewCaptcha textarea[name="g-recaptcha-response"]'),u=t.trim(s.val()),p=t.trim(o.val()),m=t.trim(r.val()),g=t.trim(a.val()),v=l.val(),w=c.val(),_="",k="";if(0==u.length)return alert("Please enter your first name to continue."),void s.val("").focus();if(0==p.length)return alert("Please enter your last name to continue."),void o.val("").focus();if(0==m.length)return alert("Please enter your email address to continue."),void r.val("").focus();if(0==g.length)return alert("Please verify your email address by typing it again."),void a.val("").focus();if(m!=g)return void alert("Please verify your email address by ensuring that both addresses match.");if(0==v.length)return alert("Please enter a password to continue."),void l.val("").focus();if(0==w.length)return alert("Please verify the password by typing it again."),void c.val("").focus();if(v!=w)return void alert("Please verify the password by ensuring that both passwords match.");if(d.length>0&&h.length>0&&(_=d.val(),k=h.val(),0==k.length))return alert("Please complete the CAPTCHA to continue."),void h.focus();i.prop("disabled",!0);var x={email:m,first_name:u,last_name:p,password:v,verify_email:g,verify_password:w};k.length>0&&(x.captcha_response=k),t.ajax({data:x,dataType:"json",type:"POST",url:"/cf_endpoints/routes.cfm/constituents/new.json",error:function(t,e,n){alert(n),i.prop("disabled",!1)},success:function(t){t.success?(alert("You have been sent an email with your new account information."),
n.find(y).val(m),n.find(b).val(v),n.find(f+" form").submit()):alert(t.error),i.prop("disabled",!1)}})})}(jQuery),function(t,e,i){"use strict";function n(){var n=t(this),s=i.getElement(n),o=s.children(r),a=s.hasClass("fsList")?s.find(".fsListItems"):s.find(".fsEventTable"),d={},h=n.data("start-row"),u=a.data("event-year");d.athletics_team_id=n.data("filter-id"),d.start_row=h,n.hasClass(l)?(d.is_load_more=!1,d.start_event_year=t(c).val()):u&&(d.start_event_year=u),i.loadingOverlay(o),i.loadElementData(s,d).done(function(i){var a,c=t(i);n.hasClass(l)?(a=c.find(r),o.replaceWith(a),o=s.children(r)):(s.hasClass("fsTable")?(a=c.find(".fsEventTable > tbody").children(),s.find(".fsLoadMoreButtonRow").replaceWith(a)):(a=c.find(r).children(":not(.fsElementEmpty)"),n.replaceWith(a)),s.addClass("fsLoadMoreClicked"),e.triggerElementMoreLoaded(s,a)),o.siblings(".fsLoadingDotsOverlay").remove()})}function s(e){e.on("click",".fsLoadMoreButton",n).on("change",c,n).on("click",".fsAthleticsEventDetailLink, .fsAthleticsEventRecapLink, .fsAthleticsEventReadMoreLink",function(e){var n=t(this),s=i.getElement(n),o=n.data("occurid");return"page"==n.data("linktype")||(e.preventDefault(),void(s.data("linked-element-ids")?(i.populateLinkedElements(s,{occur_id:o}),i.updateURLParams({virtualParam:"/~occur-id/"+o})):"popup"==n.data("linktype")&&i.openAthleticEventPopup(o,n)))}).on("click",".fsAlertIcon",function(e){e.preventDefault(),window.open("/cf_directory/cp.cfm?eventtype=Athletics&eventid="+t(this).data("eventid"),"","width=600,height=600")}).on("click",".fsRSSIcon, .fsAlertsIcon",function(t){t.preventDefault(),window.open("/cf_athletics/cms_athletic_feeds.cfm","","width=600,height=600")})}var o="fsElementContent",r="."+o,a="AthleticsEvent",l="fsSelectStartEventYear",c="."+l;e.onElementAdded(a,s),e.onElementUpdated(a,s),e.onElementDialogShown(a,s),s(t(".fs"+a))}(FS.$,FS.events,FS.getInternalNS("elements.utils")),function(t){"use strict";function e(t){t.find(".fsAthleticsBioLink").on("click",function(){var t=n(this),e=t.closest(".fsElementTable"),i=t.text(),s=t.data("person-id"),o=e.data("team-id"),r=e.data("team-name"),a="toolbar=no,location=no,directories=no,status=no,menubar=no,scrollbars=yes,resizable=yes,width=520,height=400",l="/cf_athletics/components/display.cfc?method=outputBio&view=bio&personid="+s+"&teamID="+o+"&derivedName="+encodeURI(i)+"&teamName="+encodeURI(r),c=window.open(l,"bioPop",a);return c.focus(),!1})}var i="AthleticsRoster",n=t.$,s=t.events;s.onElementAdded(i,e),s.onElementUpdated(i,e),e(n(".fs"+i))}(FS),function(t,e){"use strict";function i(t){t.on("change",".fsAthleticsTeamDirectory",function(){var i=e(this),s=i.val();if(""==s)return!1;if(t.data("linked-element-ids"))n(t,s);else if(a){var o=r(s,i.data("page-id"));l("page:show",{pageID:o.pageID,queryString:o.queryString})}else window.location.href=s}).on("click",".fsAthleticsTeamName > a[data-team-id]",function(){return n(t,e(this).data("team-id")),!1})}function n(t,e){o.populateLinkedElements(t,{athletics_team_id:e}),o.updateURLParams({virtualParam:"/~athletics-team-id/"+e})}var s=t.events,o=t.getInternalNS("elements.utils"),r=o.getInternalLinkProperties,a=o.inDraftMode(),l=o.notifyAdminInterface;e(".fsAthleticsTeam").each(function(){i(e(this))}),s.onElementAdded("athleticsteam",i),s.onElementUpdated("athleticsteam",i)}(FS,FS.$),function(t){"use strict";var e=t.$,i=t.events,n=e("body"),s=".fsMenu",o="fsStateMenuOpen";t.menu={hide:function(){n.hasClass(o)&&(n.removeClass(o),i.triggerElementHidden(e(s)))},show:function(){n.hasClass(o)||(n.addClass(o),i.triggerElementShown(e(s)))},toggle:function(){n.hasClass(o)?t.menu.hide():t.menu.show()}},i.onElementUpdated("Banner",function(t){t.find(".fsElement").each(function(){i.triggerElementUpdated(e(this))})})}(FS),function(t){"use strict";function e(t){t.on("click",".fsBoardLink[data-slug][data-opens-in=element]",function(){var t=i(this),e=s.getElement(t);return s.populateLinkedElements(e,{board_id:t.data("board-id"),page_id:s.getPageID()}),s.updateURLParams({virtualParam:"/~board/"+t.data("slug")}),!1})}var i=t.$,n=t.events,s=t.getInternalNS("elements.utils"),o="Board";n.onElementAdded(o,e),n.onElementUpdated(o,e),n.onElementDialogShown(o,e),i(".fs"+o+"Element").each(function(){e(i(this))})}(FS),function(t){"use strict";var e=t.$,i=t.getInternalNS("elements.calendar.utils"),n=t.getInternalNS("elements.constants.classes"),s=t.getInternalNS("elements.utils"),o=t.moment;i.getDateDivFromMoment=function(t,e){return t.find('.fsCalendarDate[data-day="'+e.date()+'"][data-year="'+e.year()+'"][data-month="'+e.month()+'"]')},i.getMomentFromDateDiv=function(t){return o({date:t.data("day"),month:t.data("month"),year:t.data("year")})},i.monthPickerClickHandler=function(i,r){var a=i.find(".fsCalendarMonthYearPicker");if(a.length)a.toggleClass(n.stateHidden);else{var l,c,d,h=i.find(".fsCalendarGridShowMonthPickerButton"),u=h.data("month"),f=h.data("year"),p=s.getElementID(i);a=e('<div><div class="fsCalendarMonthYearPicker"><div class="fsCalendarMonthPicker"><ul/></div><div class="fsCalendarYearPicker"><ul/></div><button class="fsStyleUpdateButton" disabled>GO</button></div></div>'),c=a.find(".fsCalendarMonthPicker ul"),d=a.find(".fsCalendarYearPicker ul"),l=a.find("button"),t._.each(o.months(),function(t,i){var n="fsCalendarGridMonthPickerInput"+t+"-"+p,s=i+1,o=e("<li>"),r=e("<label>",{"for":n,text:t}),a=e("<input>",{checked:s==u,id:n,name:"fsCalendarMonthInput-"+p,type:"radio",value:s<10?"0"+s:s});o.append(a),o.append(r),c.append(o)});for(var m=f-5;m<=f+5;m++){var g="fsElementGridYearPickerInput"+m+"-"+p,v=e("<label>",{"for":g,text:m}),y=e("<li>"),b=e("<input>",{checked:m==f,id:g,name:"fsCalendarYearInput-"+p,type:"radio",value:m});y.append(b),y.append(v),d.append(y)}a.find(".fsCalendarMonthYearPicker").on("change","input",function(){var t=c.find("input:checked").val(),e=d.find("input:checked").val();l.prop("disabled",!1).val(e+"-"+t+"-01")}),l.click(function(){a.find(".fsCalendarMonthYearPicker").addClass(n.stateHidden)}).click(r),h.parent().append(a)}}}(FS),function(t,e){"use strict";function i(t,e,i){var n=t.find(A),s="fsCalendar"+e+"Browser";t.find(".fsDisplayNavigation input[value="+e+"]").prop("checked",!0),n.removeClass("fsCalendarMonthBrowser fsCalendarWeekBrowser fsCalendarDayBrowser").addClass(s),"Week"==e?g(t,i):"Day"==e?f(t,i):m(t)}function n(t){var e=t.find(E),i=t.find(T);return e.length?e:z.getDateDivFromMoment(t,z.getMomentFromDateDiv(i))}function s(t){var e=t.find(A);return e.hasClass("fsCalendarDayBrowser")?"Day":e.hasClass("fsCalendarWeekBrowser")?"Week":"Month"}function o(t){return(B.get(t)||"").split(":").filter(function(t){return""!=t})}function r(t){var e=_(t.target),n=V.getElement(e),o=n.children(P),r=e.val(),a=s(n),l=R(e.val()),c=W[V.getElementID(n)].filters,h=e.data("start-row");return r&&(c.cal_date=r),h&&(c.start_row=h),a.match(/^(Day|Week)$/)&&z.getDateDivFromMoment(n,l).length?(i(n,a,l),!1):(V.loadingOverlay(o),void V.loadElementData(n,c).done(function(t){var e=_(t);n.replaceWith(e),q.triggerElementUpdated(e,a,l),U.triggerUpdated(V.getElementID(n),c),d(n,l)}))}function a(t){"complete"==document.readyState?c(t):t.data("willResizeOnLoad")||(t.data("willResizeOnLoad",!0),_(e).one("load",function(){c(t)}))}function l(t,e,i,n,s,o,r){var a=_("<ul>"),l=_("<span><strong>"+r+"</strong></span>"),c=e.length>0?"Select All":"Deselect All",d=_('<button class="fsSelectAll fsStyleDefaultButton fsStyleFloatRight">'+c+"</button>");_.each(t,function(t,o){var r=_("<li>"),l=o[i],c=s+l;r.append(_("<input>",{checked:e.indexOf(l.toString())==-1,id:c,type:"checkbox",value:l})),r.append(_("<label>",{"for":c,text:o[n]})),a.append(r)}),o.html(a).prepend(d).prepend(l),V.setupSelectAllButtons(o,o)}function c(e){e.find(".fsCalendarRow").each(function(){var e,i=_(".fsCalendarDaybox",this);i.css("height",""),e=t._.reduce(i,function(t,e){var i,n,s=_(e);return s.hasClass("fsCalendarWeekendDayBox")?(n=s.children("div"),i=2*Math.max(_(n[0]).outerHeight(),_(n[1]).outerHeight())):i=s.outerHeight(),Math.max(t,i)},0),i.css("height",e+"px")})}function d(t,e){var i=W[V.getElementID(t)],n=e.format(j);V.updateURLParams({queryString:{cal_date:n}}),i.filters.cal_date=n,i.date=e}function h(t,e,i,n){t.find(T).data({day:e,month:i,year:n})}function u(t,n,c){var d=t.attr("data-calendar-ids")||"",h=V.getElementID(t),u=t.attr("data-team-ids")||"",f=t.data("trigger-element-ids");n&&c&&t.hasClass("fsGrid")&&i(t,n,c),f&&U.onFilter(h,f,function(e,n){var o=s(t),r=W[h],a=!0;if(k.has(n,"calendarIDsToHide")){var l="hide_cals_el_"+h;n.calendarIDsToHide.length>0?B.set(l,n.calendarIDsToHide.join(":")):B.remove(l)}if(k.has(n,"teamIDsToHide")){var c="hide_teams_el_"+h;n.teamIDsToHide.length>0?B.set(c,n.teamIDsToHide.join(":")):B.remove(c)}if(k.has(n,"date")&&(r.date=n.date,r.filters.cal_date=n.date.format(j),t.hasClass("fsList"))){var d=n.date.format(j);r.filters.start_date=d,r.filters.end_date=d}if(k.has(n,"keywords")&&(r.filters.keywords=n.keywords),k.has(n,"rangeStart")&&(r.filters.start_date=n.rangeStart?n.rangeStart.format(j):null),k.has(n,"rangeEnd")&&(r.filters.end_date=n.rangeEnd?n.rangeEnd.format(j):null),k.isEqual(k.keys(n),["date"])){var u=z.getDateDivFromMoment(t,n.date);u.length&&!u.parent().hasClass("fsCalendarOutOfRange")&&(a=!1)}a?(V.loadingOverlay(t.find(P)),V.fetchElementHTML(h,r.filters,{elementUpdatedData:[o,r.date]}).done(function(){U.triggerUpdated(h,r.filters,e)})):i(t,o,r.date)}),t.on("click",".fsAlertIcon",function(t){var e=_(this);t.preventDefault(),V.openCalendarAlertPopup(e.siblings(".fsCalendarEventLink").data("ath-id")?"athletics":"calendar",e.data("eventid"))}).on("click",".fsAlertsIcon",function(t){t.preventDefault(),V.openCalendarAlertPopup("calendar","all",V.getElement(_(this)).data("calendar-ids"))}).on("click",".fsAlternateViewToggleLink",function(i){i.preventDefault();var n=_(this),s=t.find(".fsDayContainer:first > article > time"),o=t.hasClass("fsGrid")?z.getMomentFromDateDiv(t.find(T)):R(s.attr("datetime")),r=t.data("element-override")?t.data("element-override"):V.getElementID(t),a="element_override="+r+"&cal_date="+o.format(j);V.inDraftMode()?V.notifyAdminInterface("page:show",{pageID:n.data("page-id"),queryString:a}):e.location.href=n.attr("href")+"?"+a}).on("click",".fsLoadMoreButton",function(){var e=_(this),i=t.find(P),n={},s=V.getQueryStringValues(),o=e.data("start-row");s.cal_date&&s.cal_date.length&&(n.cal_date=s.cal_date),o&&(n.start_row=o),k.extend(n,W[h].filters),V.loadingOverlay(i),V.loadElementData(t,n).done(function(n){var s=_(n),o=s.find(P).children(":not(.fsElementEmpty)");i.siblings(".fsLoadingDotsOverlay").remove(),i.append(o),t.addClass("fsLoadMoreClicked"),e.remove(),q.triggerElementMoreLoaded(t,o)})}).on("click",".fsRSSIcon",function(t){var i=V.getElement(_(this));t.preventDefault(),e.open("/cf_calendar/cms_calendar_feeds.cfm?element_id="+h+"&calendar_ids="+i.data("calendar-ids")+"&team_ids="+i.data("team-ids"),"","width=550,height=625")}).on("click",".fsRequestEventControl",function(t){t.preventDefault(),e.open("/cf_calendar/postEvent.cfm?calendar_ids="+_(this).data("calendarids"),"","width=625,height=725")}).on("click",".fsDisplayNavigation input",function(){i(t,_(this).val())}).on("click",".fsCalendarFilter",function(t){var e,n=_(this),r=n.closest(".fsElement"),a=n.data("element-id"),c="hide_cals_el_"+a,f="hide_teams_el_"+a,p=_(".fsCalendarFilterDialog[data-element-id='"+a+"']");t.preventDefault(),p.length?p.dialog("open"):(p=_('<div class="fsCalendarFilterDialog" data-element-id="'+a+'"><div class="fsCalendarFilterDialogContent"><div class="fsCalendarFilterDialogCalendars"><div class="fsLoadingDots"></div></div><div class="fsCalendarFilterDialogTeams"><div class="fsLoadingDots"></div></div></div>'),p.dialog({modal:!0,title:"Calendar Filter",buttons:[{text:"Cancel",click:function(){var t,e=_(this),i=o(c),n=o(f);e.find("fsCalendarFilterDialogCalendars input").each(function(){t=_(this),t.prop("checked",i.indexOf(t.val())==-1)}),e.find("fsCalendarFilterDialogTeams input").each(function(){t=_(this),t.prop("checked",n.indexOf(t.val())==-1)}),e.dialog("close")}},{"class":".fsAppModalDialogApply",text:"Apply",click:function(){var t=_(this),e=s(r),n=W[h],o=t.find(".fsCalendarFilterDialogCalendars input:checkbox:not(:checked)").map(function(){return this.value}).get(),l=t.find(".fsCalendarFilterDialogTeams input:checkbox:not(:checked)").map(function(){return this.value}).get();o.length>0?B.set(c,o.join(":")):B.remove(c),l.length>0?B.set(f,l.join(":")):B.remove(f),t.dialog("close"),r.html('<div class="fsLoadingDots"></div>'),V.fetchElementHTML(a,n.filters).done(function(t){r=t,i(r,e,n.date)})}}]}),d.length?(e="/cf_endpoints/routes.cfm/calendars.json?calendar_ids="+d,r.data("display-group-calendars")&&(e+="&include_group_calendars=true"),_.getJSON(e).done(function(t){l(t,o(c),"calendarid","calendarname","calendar_filter_id_",p.find(".fsCalendarFilterDialogCalendars"),"Display Calendar Events")})):p.find(".fsCalendarFilterDialogCalendars").html(""),u.length?_.getJSON("/cf_endpoints/routes.cfm/athletics/teams.json?team_ids="+u).done(function(t){l(t,o(f),"id","name","team_filter_id_",p.find(".fsCalendarFilterDialogTeams"),"Display Athletic Events by Team")}):p.find(".fsCalendarFilterDialogTeams").html(""))}).on("click",N,p).on("click",".fsCalendarPrevMonth, .fsCalendarNextMonth",r),a(t)}function f(t,e){var i,s;i=e?z.getDateDivFromMoment(t,e):n(t),e=z.getMomentFromDateDiv(i),s=i.parent().find(".fsCalendarInfo"),t.find(".fsCalendarRow").removeClass(L),t.find(".fsCalendarEventGrid").addClass(L),h(t,i.data(D),i.data(O),i.data(F)),t.find(T).html(s.length?s.clone():"<em>no events to show</em>").removeClass(L),y(t,e),U.triggerDisplayChanged(V.getElementID(t),"Day",e),v(t,i,"days")}function p(){var t=V.getElement(_(this));return"Month"==s(t)&&void z.monthPickerClickHandler(t,r)}function m(t){var e=t.find('.fsCalendarDaybox:not(.fsCalendarOutOfRange) .fsCalendarDate[data-day="1"]');t.find(".fsCalendarEventGrid, .fsCalendarRow").removeClass(L),h(t,e.data(D),e.data(O),e.data(F)),t.find(T).addClass(L),b(t),U.triggerDisplayChanged(V.getElementID(t),"Month"),v(t,e,"months")}function g(t,e){var i,s,o;o=e?z.getDateDivFromMoment(t,e):n(t),s=o.parents(".fsCalendarRow"),t.find(".fsCalendarEventGrid").removeClass(L),s.removeClass(L).siblings(".fsCalendarRow").addClass(L),i=s.find(S+":first"),h(t,i.data(D),i.data(O),i.data(F)),t.find(T).addClass(L),w(t),U.triggerDisplayChanged(V.getElementID(t),"Week",z.getMomentFromDateDiv(i)),v(t,i,"weeks")}function v(t,e,i){var n=R([e.data(F),e.data(O),e.data(D)]),s=n.clone().add(1,i),o=n.clone().subtract(1,i);t.find(".fsCalendarNextMonth").val(s.format(j)),t.find(".fsCalendarPrevMonth").val(o.format(j))}function y(e,i){var n="md"==t.currentPage.dateFormat?"MMMM D, YYYY":"D MMMM, YYYY";e.find(I).html(i.format(n)),d(e,i)}function b(t){var e=t.find('.fsCalendarDaybox:not(.fsCalendarOutOfRange) .fsCalendarDate[data-day="1"]'),i=t.find(I);i.html(z.getMomentFromDateDiv(e).format("MMMM YYYY"))}function w(e){var i=e.find(".fsCalendarRow:not(."+L+")"),n=i.find(S+":first"),s=i.find(S+":last"),o=e.find(I),r="dm"==t.currentPage.dateFormat?"D MMMM":"MMMM D",a=z.getMomentFromDateDiv(n);o.html(a.format(r)+" - "+z.getMomentFromDateDiv(s).format(r)),d(e,a)}var _=t.$,k=t._,x=t.getInternalNS("elements.constants.classes"),C=t.getInternalNS("elements.constants.selectors"),S=".fsCalendarDate",T=".fsCalendarDayView",E=".fsCalendarToday > .fsCalendarDate",D="day",P=C.elementContent,M="Calendar",A=".fsCalendarGridBrowser",I=".fsCalendarGridBrowser > span",L=x.stateHidden,j="YYYY-MM-DD",O="month",$="fsCalendarGridShowMonthPickerButton",N="."+$,F="year",H=_(document.body),R=t.moment,z=t.getInternalNS("elements.calendar.utils"),B=t.cookies,W={},q=t.events,U=t.getInternalNS("elements.linkedEvents"),V=t.getInternalNS("elements.utils");q.onElementAdded(M,u),q.onElementUpdated(M,u),q.onElementDialogShown(M,u),q.onElementShown(q.ALL_CONTAINERS_TYPE,a),_(".fs"+M).each(function(){var t=_(this);W[V.getElementID(t)]={filters:{}},u(t)}),H.on("click",'.fsCalendarEventLink[href="#"]',function(t){var e=_(this),i=V.getElement(e),n=e.data("occur-id");return t.preventDefault(),e.data("ath-id")?V.openAthleticEventPopup(n,e):i.data("linked-element-ids")?(V.populateLinkedElements(i,{occur_id:n}),V.updateURLParams({virtualParam:"/~occur_id/"+n})):V.showElementPopupDialog(i,{occur_id:n,show_event:!0},M,e),!1})}(FS,window),function(t){"use strict";var e=t.getInternalNS("elements.element_tools.utils"),i=t.getInternalNS("elements.linkedEvents"),n=t.getInternalNS("elements.utils");e.setupSearch=function(e){var s,o,r=e.find(".fsElementToolsDateRange"),a=e.find(".fsElementToolsKeyword > input"),l=r.length>0,c=a.length>0;if(l){var d=r.find(".fsElementToolsDateRangeStart"),h=r.find(".fsElementToolsDateRangeEnd");o=t.rome(d[0],{dateValidator:t.rome.val.beforeEq(h[0]),time:!1}),s=t.rome(h[0],{dateValidator:t.rome.val.afterEq(d[0]),time:!1})}c&&e.on("click",".fsButtonClear",function(){a.val("")}),e.on("click",".fsElementToolsSearchButton",function(){var t={};l&&(t.rangeStart=o.getMoment(),t.rangeEnd=s.getMoment()),c&&(t.keywords=a.val()),i.triggerFilter(n.getElementID(e),t)})}}(FS),function(t){"use strict";function e(t){var e=a(t.target),n=e.val(),s=g.getElement(e),o=g.getElementID(s),r={cal_date:n},l=c(n);g.loadingOverlay(s.find(b)),g.fetchElementHTML(o,r).done(i),p.triggerFilter(g.getElementID(s),{date:l,rangeEnd:l.clone().endOf("month"),rangeStart:l.clone().startOf("month")})}function i(t){var e=g.getElementID(t),i=S[e]||{};if(t.find(".fsCalendarDaybox").removeClass(v),l.has(i,"displayMode")&&l.has(i,"momentObject")&&"Month"!=i.displayMode){var n=d.getDateDivFromMoment(t,i.momentObject).parent();n.addClass(v),"Week"==i.displayMode&&n.siblings(".fsCalendarDaybox").addClass(v)}}function n(t){t.hasClass("fsLegend")?s(t):t.hasClass("fsSearch")?u.setupSearch(t):t.hasClass("fsMiniGrid")&&o(t)}function s(t){1==t.find(C).length&&(t.on("click",".fsUpdateFilters",function(){var e=t.find(C+" input:checked"),i=t.find(k+x);p.triggerFilter(g.getElementID(t),{calendarIDsToHide:i.not(y).map(function(){return this.value}).get(),teamIDsToHide:i.filter(y).map(function(){return this.value}).get()}),"selected"==e.val()&&e.trigger("change")}).on("change",C+" input",function(){var e=t.find(".fsCalendarGroups > li");"all"==a(this).val()?t.find("li").removeClass(_):(t.find(".fsToolsList > li").each(function(){var t=a(this);t.toggleClass(_,t.find(k).is(x))}),e.each(function(){var t=a(this);t.toggleClass(_,0==t.find(k+":checked").length)})),e.each(function(){a(this).find(m.selectAll).trigger("updateLabel")})}),g.setupExpandableHeaders(t),g.setupSelectAllButtons(t,".fsCalendarGroups > li"))}function o(t){var n=g.getElementID(t),s=t.data("linked-element-ids");t.on("click",".fsCalendarDaybox",function(){var e=a(this),i=d.getMomentFromDateDiv(e.find(".fsCalendarDate"));p.triggerFilter(g.getElementID(t),{date:i}),e.hasClass("fsCalendarOutOfRange")&&(g.loadingOverlay(t.find(b)),g.fetchElementHTML(g.getElementID(t),{cal_date:i.format("YYYY-MM-DD")}))}),t.on("click",".fsCalendarGridShowMonthPickerButton",r).on("click",".fsCalendarPrevMonth, .fsCalendarNextMonth",e),s&&(p.onUpdated(n,s,function(e,s,o){o!=n&&(g.loadingOverlay(t.find(b)),g.fetchElementHTML(n,l.omit(s,["end_date","start_date"])).done(i))}),p.onDisplayChanged(n,s,function(e,s,o){S[n]={displayMode:s,momentObject:o},i(t)}))}function r(){d.monthPickerClickHandler(g.getElement(a(this)),e)}var a=t.$,l=t._,c=t.moment,d=t.getInternalNS("elements.calendar.utils"),h=t.getInternalNS("elements.constants.classes"),u=t.getInternalNS("elements.element_tools.utils"),f=t.getNS("events"),p=t.getInternalNS("elements.linkedEvents"),m=t.getInternalNS("elements.constants.selectors"),g=t.getInternalNS("elements.utils"),v=h.stateActive,y=".fsCalendarFilterInput[data-calendartype=athletics]",b=m.elementContent,w="CalendarTools",_=h.stateHidden,k=".fsCalendarFilterInput",x=":not(:checked)",C=".fsElementControls",S={};f.onElementAdded(w,n),f.onElementUpdated(w,n),a(".fs"+w).each(function(){n(a(this))})}(FS),function(t){"use strict";var e=t.$,i=e(document.body),n=t.getInternalNS("elements.utils"),s="Constituent";i.on("click",'.fsConstituentProfileLink[href="#"]',function(t){var i=e(this),o=n.getElement(i),r=i.data("constituent-id");return t.preventDefault(),o.data("linked-element-ids")?(n.populateLinkedElements(o,{const_id:r}),n.updateURLParams({virtualParam:"/~const-id/"+r})):n.showElementPopupDialog(o,{const_id:r,show_profile:!0},s,i),!1})}(FS),function(t){"use strict";function e(t){var e=u(t);e.bubbles.forEach(function(t){t.setMap(null)}),e.markers.forEach(function(t){t.setMap(null)}),e.markers=[],e.bubbles=[]}function i(t){var e=u(t);e.startInfoBubble.close(),e.bubbles.forEach(function(t){t.close()})}function n(t,e){var n=new InfoBubble(M),s="",o=t.data("link-email"),r=t.data("link-profile"),a=u(t),l=t.data("profile-url"),c=new google.maps.Marker({icon:"https://maps.google.com/mapfiles/ms/icons/green-dot.png",map:a.map,position:{lat:e.latitude,lng:e.longitude}});e.people.forEach(function(t){s+="<div>",r&&t.is_parent&&(s+='<a href="'+l+"/~const-id/"+t.person_id+'" target="_blank">'),s+=t.first_name+" "+t.last_name,r&&t.is_parent?(s+="</a>",o&&t.email&&(s+=' <a href="mailto:'+t.email+'"><span class="fsEmailIcon"><span class="fsStyleSROnly">'+t.email+"</span></span></a>")):t.current_grade.length&&(s+=", Grade "+t.current_grade),s+="</div>"}),s+='<div class="'+k+'">'+e.address+"</div>",n.setContent(s),a.markers.push(c),a.bubbles.push(n),google.maps.event.addListener(c,"click",function(){i(t),n.open(a.map,c)})}function s(t,s,o){var r,l=u(t),c=l.errorInfoBubble,d=l.map,f=l.startMarker,p=l.startInfoBubble,m='<div>Find families within <a href="#" data-radius=".25">0.25 miles</a>, <a href="#" data-radius=".5">0.50 miles</a>, <a href="#" data-radius="1">1 mile</a>, <a href="#" data-radius="5">5 miles</a>, <a href="#" data-radius="10">10 miles</a>, or <a href="#" data-radius="20">20 miles</a> of</div><div class="'+k+'">'+o+"</div>",g=E("<div>",{html:m});f.setMap(d),f.setPosition(s),p.setContent(g[0]),google.maps.event.addListener(f,"click",function(){i(t),p.open(d,f)}),g.on("click","a",function(){var i=E(this).data("radius"),o=h(i);return d.setZoom(o),d.setCenter(s),p.close(),a(t,s,i).done(function(i){e(t),i.length?i.forEach(function(e){n(t,e)}):(r=E("<div>",{html:'<p>There are no households to display in the specified area.</p><p><a href="#">Try again</a></p>'}),r.on("click","a",function(){return c.close(),p.open(d,f),!1}),c.setContent(r[0]),c.open(d,f))}).fail(function(){alert("Sorry, there was a problem retrieving the households for the specified bounds. Please try again."),l.startInfoBubble.open()}),!1}),google.maps.event.addListenerOnce(d,"idle",function(){p.open(d,f)}),d.setCenter(s),t.find(C).val(o)}function o(t){var e=t.data("location"),i=t.data("location-latitude"),n=t.data("location-longitude");s(t,{lat:i,lng:n},e)}function r(t){return E.ajax({data:{latlng:t.latitude+","+t.longitude},dataType:"json",method:"GET",url:w})}function a(t,e,i){var n=new google.maps.Circle({center:e,radius:1609.344*i});return E.ajax({dataType:"json",method:"GET",url:"/cf_endpoints/routes.cfm/constituents/household_geolocation.json",data:{bounds:n.getBounds().toUrlValue(),group_ids:t.data("group-ids"),search_by_role:"student"}})}function l(t){var e,i="",n=["address_1","address_2","address_3","city","state_short","zip_code","country_short"];return n.forEach(function(n){e=t[n],e.length&&(i.length&&(i+="zip_code"==n?" ":", "),i+=e)}),i}function c(t){return E.ajax({data:{address:t},dataType:"json",method:"GET",url:w})}function d(){return E.ajax({dataType:"json",method:"GET",url:"/cf_endpoints/routes.cfm/constituents/current/home_address.json"})}function h(t){return Math.round(14-Math.log(t)/Math.LN2)}function u(t){return P[t.attr("id")]}function f(t){var i=E(t.target).closest(b);navigator.geolocation&&(g(i,!0),navigator.geolocation.getCurrentPosition(function(n){r(n.coords).done(function(o){o.results&&o.results.length&&(e(i),s(E(t.target).closest(b),{lat:n.coords.latitude,lng:n.coords.longitude},o.results[0].formatted_address))}).always(function(){g(i,!1)})},function(t){g(i,!1),alert(t.message)},{timeout:1e4}))}function p(t){var i=E(t.target).closest(b),n=i.find(C).val();n.length?(g(i,!0),c(n).done(function(t){t.results&&t.results.length&&(e(i),s(i,t.results[0].geometry.location,n))}).always(function(){g(i,!1)})):alert("Please enter an address first")}function m(e){var i=e.find(S),n=e.data("map-start-radius"),r=1==e.data("map-start"),a={bubbles:[],errorInfoBubble:new InfoBubble(M),markers:[],startInfoBubble:new InfoBubble(M),startMarker:new google.maps.Marker,map:new google.maps.Map(i[0],{clickableIcons:!1,zoom:10})};P[e.attr("id")]=a,a.map.setZoom(h(n)),r?d().done(function(t){var i=l(t);i.length?t.location?s(e,t.location,i):c(i).done(function(t){t.results&&t.results.length&&s(e,t.results[0].geometry.location,t.results[0].formatted_address)}).fail(function(){o(e)}):o(e)}).fail(function(){o(e)}):o(e),navigator.geolocation&&e.find(v).removeClass(_),e.find(T).on("click",p),e.find(v).on("click",f),e.find(C).on("keyup",function(t){13==t.keyCode&&p(t)}),e.on("click",".fsEmbeddedMapHideAddress",function(){return t.util.popup("/cf_directory/cp.cfm","updateProfile",620,600),!1})}function g(t,e){t.find(x).toggleClass(_,!e)}var v=".fsEmbeddedMapCurrentLocationButton",y="ConstituentMap",b=".fsConstituentMap",w="https://maps.googleapis.com/maps/api/geocode/json",_=t.getInternalNS("elements.constants.classes").stateHidden,k="fsGoogleMapInfoBubbleAddress",x=".fsLoadingDotsOverlay",C=".fsEmbeddedMapLocationInput",S=".fsEmbeddedGoogleMap",T=".fsEmbeddedMapUpdateButton",E=t.$,D=t.events,P={},M={backgroundClassName:"fsGoogleMapInfoBubble",borderRadius:0,maxHeight:130,maxWidth:250,minHeight:130,minWidth:250};D.onElementAdded(y,m),D.onElementUpdated(y,m),D.onElementDialogShown(y,m),D.onGoogleMapsReady(function(){E(b).each(function(){m(E(this))})})}(FS),function(t){"use strict";function e(t){var e=p.template('<div class="fsBoardSubscriptionLinks">\t\t\t\t\t<h2>Subscriptions</h2>\t\t\t\t\t<p>\t\t\t\t\t\t<%= subscriptions.message%>\t\t\t\t\t</p>\t\t\t\t\t<ul>\t\t\t\t\t\t<% _.each(subscriptions.boards, function(board) {  %>\t\t\t\t\t\t\t<li><strong><%= board%></strong></li>\t\t\t\t\t\t<% }); %>\t\t\t\t\t</ul>\t\t\t\t\t<div class="fsDialogFooterButtons">\t\t\t\t\t\t<button class="fsDialogCancelButton fsStyleDefaultButton">Close</button>\t\t\t\t\t</div>\t\t\t\t</div>',{variable:"subscriptions"});return e(t)}function i(t){u=p.random(1);var e=window.location.pathname+window.location.search,i={boardCount:t.length,boards:t,boardsLabel:1!=t.length?"boards":"board",captchaModifier:0==u?"":"not"},n=p.template('<div class="fsBoardSubscriptionSignup">\t\t\t\t\t<h2>Subscriptions</h2>\t\t\t\t\t<p>You are subscribing to <%= boardCount %> <%= boardsLabel %>. Where would you like to receive these email alerts?</p>\t\t\t\t\t\t<div class="fsFormField">\t\t\t\t\t\t\t<label class="fsFieldLabel" for="fsAlertSignupFirstName">First Name</label>\t\t\t\t\t\t\t<input id="fsAlertSignupFirstName" class="fsStyleDefaultField">\t\t\t\t\t\t</div>\t\t\t\t\t\t<div class="fsFormField">\t\t\t\t\t\t\t<label class="fsFieldLabel" for="fsAlertSignupLastName">Last Name</label>\t\t\t\t\t\t\t<input id="fsAlertSignupLastName" class="fsStyleDefaultField">\t\t\t\t\t\t</div>\t\t\t\t\t\t<div class="fsFormField">\t\t\t\t\t\t\t<label class="fsFieldLabel" for="fsAlertSignupEmail">Email Address</label>\t\t\t\t\t\t\t<input id="fsAlertSignupEmail" class="fsStyleDefaultField">\t\t\t\t\t\t</div>\t\t\t\t\t\t<div class="fsFormField" id="fsAlertCaptchaSection">\t\t\t\t\t\t\t<input type="checkbox" id="fsAlertCaptcha"  class="fsStyleDefaultField">\t\t\t\t\t\t\t<label class="fsFieldLabel" for="fsAlertCaptcha">I am <%= captchaModifier %> a human</label>\t\t\t\t\t\t</div>\t\t\t\t\t</p>\t\t\t\t\t<div><p><a id="fsLoginRedirect" href="/fs/login?login_destination=<%= login_destination %>">Already have an account?</a></p></div>\t\t\t\t\t<div class="fsDialogFooterButtons">\t\t\t\t\t\t<button class="fsDialogCancelButton fsStyleDefaultButton">Close</button>\t\t\t\t\t\t<button class="fsDialogAlertSignupButton fsStyleUpdateButton">Signup</button>\t\t\t\t\t</div>\t\t\t\t</div>');return e.indexOf("showBoardAlertsDialog=true")===-1&&(e+=(window.location.search.length?"&":"?")+"showBoardAlertsDialog=true"),i.login_destination=encodeURIComponent(e),n(i)}function n(t){var e=p.template('<div class="fsBoardSubscriptionLinks">\t\t\t\t\t<h2>Subscriptions</h2>\t\t\t\t\t<p>\t\t\t\t\t\tSelect the board(s) for which you would like to receive an email alert when \t\t\t\t\t\ta new post is added. When finished click the "Next" button.\t\t\t\t\t</p>\t\t\t\t\t<ul>\t\t\t\t\t\t<% _.each(options.boards, function(board) {  %>\t\t\t\t\t\t\t<li>\t\t\t\t\t\t\t\t<input name="fsSelectedBoardAlerts" type="checkbox" \t\t\t\t\t\t\t\t\t<%= (options.preselects.indexOf(board.id) >= 0 ? "checked=checked" : "") %> \t\t\t\t\t\t\t\t\tid="fsBoardSubscriptionLink_<%= board.id%>" value="<%= board.id%>">\t\t\t\t\t\t\t\t<label for="fsBoardSubscriptionLink_<%= board.id%>"><%= board.name%></label>\t\t\t\t\t\t\t</li>\t\t\t\t\t\t<% }); %>\t\t\t\t\t</ul>\t\t\t\t\t<div class="fsDialogFooterButtons">\t\t\t\t\t\t<button class="fsDialogCancelButton fsStyleDefaultButton">Cancel</button>\t\t\t\t\t\t<button class="fsDialogNextButton fsStyleUpdateButton" disabled="disabled">Next</button>\t\t\t\t\t</div>\t\t\t\t</div>',{variable:"options"});return e(t)}function s(t,e){var i=p.template('<div class="fsBoardSubscriptionEmailSelection">\t\t\t\t<h2>Subscriptions</h2>\t\t\t\t<p>\t\t\t\t\tYou are subscribing to <%= boardCount %> <%= boardsLabel %>. \t\t\t\t\tWhere would you like to receive these email alerts?\t\t\t\t</p>\t\t\t\t<ul>\t\t\t\t\t<li>\t\t\t\t\t\t<input name="fsSelectedBoardAlertEmails" type="checkbox" \t\t\t\t\t\t\tid="fsBoardAlertEmailLink_0" value="0">\t\t\t\t\t\t<label for="fsBoardAlertEmailLink_0">\t\t\t\t\t\t\t<span class="fsBoardAlertEmailType">Primary<span>\t\t\t\t\t\t\t<span class="fsBoardAlertEmailAddress"><%= primaryEmail.Email %></span>\t\t\t\t\t\t</label>\t\t\t\t\t</li>\t\t\t\t\t<% _.each(emails, function(email) {  %>\t\t\t\t\t\t<li>\t\t\t\t\t\t\t<input name="fsSelectedBoardAlertEmails" type="checkbox" \t\t\t\t\t\t\t\tid="fsBoardAlertEmailLink_<%= email.Person_ContactTypeID%>" value="<%= email.Person_ContactTypeID%>">\t\t\t\t\t\t\t<label for="fsBoardAlertEmailLink_<%= email.Person_ContactTypeID%>">\t\t\t\t\t\t\t\t<span class="fsBoardAlertEmailType"><%= email.LabelName || "Email" %></span>\t\t\t\t\t\t\t\t<span class="fsBoardAlertEmailAddress"><%= email.Email %></span>\t\t\t\t\t\t\t</label>\t\t\t\t\t\t</li>\t\t\t\t\t<% }); %>\t\t\t\t</ul>\t\t\t\t<div class="fsDialogFooterButtons">\t\t\t\t\t<button class="fsDialogCancelButton fsStyleDefaultButton">Cancel</button>\t\t\t\t\t<button class="fsDialogSubscribeButton fsStyleUpdateButton" disabled="disabled">Subscribe</button>\t\t\t\t</div>\t\t\t</div>');return i({boardCount:t.length,boardsLabel:1!=t.length?"boards":"board",emails:e,primaryEmail:p.findWhere(e,{IsPrimary:!0})})}function o(t){var e=p.template('<div class="fsBoardRSSLinks">\t\t\t\t\t<ul>\t\t\t\t\t\t<% _.each(boards, function(board) {  %>\t\t\t\t\t\t\t<li><a href="/fs/post-manager/boards/<%= board.id%>/posts/feed" target="blank"><%= board.name%></a></li>\t\t\t\t\t\t<% }); %>\t\t\t\t\t</ul>\t\t\t\t</div>',{variable:"boards"});return e(t)}function r(t,e){g.isLoggedIn()?a(t,e):l(t,e)}function a(t,e){e.setLoading(),f.ajax({dataType:"json",method:"GET",url:"/fs/sessions/user/emails"}).done(function(i){var n=f(s(t,i));e.setContent(n),n.on("click",".fsDialogSubscribeButton",function(){var i=n.find(b+":checked").map(function(){return f(this).val()}).get();d(t,i,e)}).on("click",b,function(){var t=0==n.find(b+":checked").length;n.find(".fsDialogSubscribeButton").prop("disabled",t)})}).fail(function(){window.alert("There was a problem fetching your email information. Please try again."),e.close()})}function l(t,e){var n=Number(e.getContentElement()[0].id.replace(/[^0-9\.-]+/g,"")),s=f(i(t));v.setItem(_+n,t),e.setContent(s),s.on("click",".fsDialogAlertSignupButton",function(){var i,n,o,r=s.find("#fsAlertCaptchaSection"),a=r.find("#fsAlertCaptcha");return r.find(".fsError").remove(),0==u&&!a.prop("checked")||1==u&&a.prop("checked")?void r.append('<div class="fsError">Please confirm that you are not a robot.</div>'):(i=s.find("#fsAlertSignupEmail"),n=s.find("#fsAlertSignupFirstName"),o=s.find("#fsAlertSignupLastName"),0==n.val().length?(window.alert("Please enter your first name to continue."),void n.val("").focus()):0==o.val().length?(window.alert("Please enter your last name to continue."),void o.val("").focus()):0==i.val().length?(window.alert("Please enter your email address to continue."),
void i.val("").focus()):(e.setLoading(),void f.when(g.getToken()).then(function(s){var r={authenticity_token:s,board_ids:t,email:i.val(),first:n.val(),last:o.val()};h(r,e)})))})}function c(t,e,i,s){var a,l=m.Dialog({dialogClass:i,id:"fsAlertsForEl_"+t+"_"}),c=i==w,d={boards:e,preselects:[]};if(c){var h=v.getItem(_+t);d.preselects=h?h.split(",").map(Number):[],a=f(n(d))}else a=f(o(e));l.setContent(a),l.open(s),l.getContentElement().on("click",".fsDialogCancelButton",function(){v.removeItem(_+t),l.close()}),c&&(a.find(".fsDialogNextButton").prop("disabled",!d.preselects.length),a.on("click",".fsDialogNextButton",function(){var t=a.find(y+":checked").map(function(){return f(this).val()}).get();r(t,l)}).on("click",y,function(){var t=0==a.find(y+":checked").length;a.find(".fsDialogNextButton").prop("disabled",t)}))}function d(t,e,i){i.setLoading(),f.when(g.getToken()).then(function(n){var s={authenticity_token:n,board_ids:t,email_type_ids:e};h(s,i)})}function h(t,i){f.ajax({data:t,dataType:"json",method:"PUT",url:"/fs/post-manager/boards/subscribe"}).done(function(t){var n=f(e(t));i.setContent(n)}).fail(function(t){t&&t.responseJSON&&t.responseJSON.message?window.alert(t.responseJSON.message):window.alert("There was a problem creating subscriptions for these alerts. Please try again."),i.close()})}var u,f=t.$,p=t._,m=t.getInternalNS("dialogs"),g=t.getInternalNS("elements.utils"),v=t.localStorage,y="input[name=fsSelectedBoardAlerts]",b="input[name=fsSelectedBoardAlertEmails]",w="fsBoardSubscriptions",_="boardAlertSubscriptions_";m.showBoardAlertsDialog=c}(FS,window),function(t){"use strict";function e(t){var e=t.find(s),i={lat:t.data("location-latitude"),lng:t.data("location-longitude")},n=new google.maps.Map(e[0],{center:i,zoom:10});new google.maps.Marker({map:n,position:i})}var i="EmbeddedMap",n=".fsEmbeddedMap",s=".fsEmbeddedGoogleMap",o=t.$,r=t.events;r.onElementAdded(i,e),r.onElementUpdated(i,e),r.onElementDialogShown(i,e),r.onGoogleMapsReady(function(){o(n).each(function(){e(o(this))})})}(FS),function(t,e){"use strict";function i(e){if(e.length){if(window.Juicer)Juicer.initialize();else if(!n){var i=document.createElement("script");n=!0,i.type="text/javascript",i.src="//assets.juicer.io/embed-amd.js",i.onload=i.onreadystatechange=function(){this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(i.onload=i.onreadystatechange=null,Juicer.initialize(),Juicer.Constants.FACEBOOK_APP_ID=0x66ce12943f58e)},document.body.appendChild(i)}e.on("click",".fsSlideshowPlay",function(){var e=t(this).closest(h);e.removeClass(l),e.addClass(c),e.find(a).slick("slickSetOption","autoplay",!0),e.find(a).slick("slickPlay"),e.find(".fsSlideshowPause").attr("aria-hidden","false").removeClass(s.stateHidden),e.find(".fsSlideshowPlay").attr("aria-hidden","true").addClass(s.stateHidden)}),e.on("click",".fsSlideshowPause",function(){var e=t(this).closest(h);e.removeClass(c),e.addClass(l),e.find(a).slick("slickSetOption","autoplay",!1),e.find(a).slick("slickPause"),e.find(".fsSlideshowPause").attr("aria-hidden","true").addClass(s.stateHidden),e.find(".fsSlideshowPlay").attr("aria-hidden","false").removeClass(s.stateHidden)})}}var n=!1,s=FS.getInternalNS("elements.constants.classes"),o="Feeds",r="juicer-feed",a="."+r,l="fsStatePaused",c="fsStatePlaying",d="fsElementSlideshow",h="."+d;e.onElementUpdated(o,i),e.onElementAdded(o,i),e.onElementShown(e.ALL_CONTAINERS_TYPE,i),i(t(".fs"+o))}(FS.$,FS.events),/*! iFrame Resizer (iframeSizer.min.js ) - v2.8.5 - 2015-03-25
 *  Desc: Force cross domain iframes to size to content.
 *  Requires: iframeResizer.contentWindow.min.js to be loaded into the target frame.
 *  Copyright: (c) 2015 David J. Bradshaw - dave@bradshaw.net
 *  License: MIT
 */
!function(){"use strict";function t(t,e,i){"addEventListener"in window?t.addEventListener(e,i,!1):"attachEvent"in window&&t.attachEvent("on"+e,i)}function e(){var t,e=["moz","webkit","o","ms"];for(t=0;t<e.length&&!S;t+=1)S=window[e[t]+"RequestAnimationFrame"];S||s(" RequestAnimationFrame not supported")}function i(){var t="Host page";return window.top!==window.self&&(t=window.parentIFrame?window.parentIFrame.getId():"Nested host page"),t}function n(t){return _+"["+i()+"]"+t}function s(t){y&&"object"==typeof window.console&&console.log(n(t))}function o(t){"object"==typeof window.console&&console.warn(n(t))}function r(t){function e(){function t(){d(I),l(),E[L].resizedCallback(I)}r("Height"),r("Width"),h(t,I,"resetPage")}function i(t){var e=t.id;s(" Removing iFrame: "+e),t.parentNode.removeChild(t),E[e].closedCallback(e),s(" --")}function n(){var t=A.substr(k).split(":");return{iframe:document.getElementById(t[0]),id:t[0],height:t[1],width:t[2],type:t[3]}}function r(t){var e=Number(E[L]["max"+t]),i=Number(E[L]["min"+t]),n=t.toLowerCase(),o=Number(I[n]);if(i>e)throw new Error("Value for min"+t+" can not be greater than max"+t);s(" Checking "+n+" is in range "+i+"-"+e),i>o&&(o=i,s(" Set "+n+" to min value")),o>e&&(o=e,s(" Set "+n+" to max value")),I[n]=""+o}function u(){var e=t.origin,i=I.iframe.src.split("/").slice(0,3).join("/");if(E[L].checkOrigin&&(s(" Checking connection is from: "+i),""+e!="null"&&e!==i))throw new Error("Unexpected message received from: "+e+" for "+I.iframe.id+". Message was: "+t.data+". This error can be disabled by adding the checkOrigin: false option.");return!0}function f(){return _===(""+A).substr(0,k)}function p(){var t=I.type in{"true":1,"false":1};return t&&s(" Ignoring init message from meta parent page"),t}function m(t){return A.substr(A.indexOf(":")+w+t)}function g(t){s(" MessageCallback passed: {iframe: "+I.iframe.id+", message: "+t+"}"),E[L].messageCallback({iframe:I.iframe,message:JSON.parse(t)}),s(" --")}function b(){if(null===I.iframe)throw new Error("iFrame ("+I.id+") does not exist on "+x);return!0}function S(t){var e=t.getBoundingClientRect();return a(),{x:parseInt(e.left,10)+parseInt(C.x,10),y:parseInt(e.top,10)+parseInt(C.y,10)}}function T(t){function e(){C=r,D(),s(" --")}function i(){return{x:Number(I.width)+n.x,y:Number(I.height)+n.y}}var n=t?S(I.iframe):{x:0,y:0},r=i();s(" Reposition requested from iFrame (offset x:"+n.x+" y:"+n.y+")"),window.top!==window.self?window.parentIFrame?t?parentIFrame.scrollToOffset(r.x,r.y):parentIFrame.scrollTo(I.width,I.height):o(" Unable to scroll to requested position, window.parentIFrame not found"):e()}function D(){!1!==E[L].scrollCallback(C)&&l()}function P(t){function e(t){var e=S(t);s(" Moving to in page link (#"+i+") at x: "+e.x+" y: "+e.y),C={x:e.x,y:e.y},D(),s(" --")}var i=t.split("#")[1]||"",n=decodeURIComponent(i),o=document.getElementById(n)||document.getElementsByName(n)[0];window.top!==window.self?window.parentIFrame?parentIFrame.moveToAnchor(i):s(" In page link #"+i+" not found and window.parentIFrame not found"):o?e(o):s(" In page link #"+i+" not found")}function M(){switch(I.type){case"close":i(I.iframe),E[L].resizedCallback(I);break;case"message":g(m(6));break;case"scrollTo":T(!1);break;case"scrollToOffset":T(!0);break;case"inPageLink":P(m(9));break;case"reset":c(I);break;case"init":e(),E[L].initCallback(I.iframe);break;default:e()}}var A=t.data,I={},L=null;f()&&(I=n(),L=I.id,y=E[L].log,s(" Received: "+A),!p()&&b()&&u()&&(M(),v=!1))}function a(){null===C&&(C={x:void 0!==window.pageXOffset?window.pageXOffset:document.documentElement.scrollLeft,y:void 0!==window.pageYOffset?window.pageYOffset:document.documentElement.scrollTop},s(" Get page position: "+C.x+","+C.y))}function l(){null!==C&&(window.scrollTo(C.x,C.y),s(" Set page position: "+C.x+","+C.y),C=null)}function c(t){function e(){d(t),u("reset","reset",t.iframe)}s(" Size reset requested by "+("init"===t.type?"host page":"iFrame")),a(),h(e,t,"init")}function d(t){function e(e){t.iframe.style[e]=t[e]+"px",s(" IFrame ("+i+") "+e+" set to "+t[e]+"px")}var i=t.iframe.id;E[i].sizeHeight&&e("height"),E[i].sizeWidth&&e("width")}function h(t,e,i){i!==e.type&&S?(s(" Requesting animation frame"),S(t)):t()}function u(t,e,i){s("["+t+"] Sending msg to iframe ("+e+")"),i.contentWindow.postMessage(_+e,"*")}function f(e){function i(){function t(t){1/0!==E[p][t]&&0!==E[p][t]&&(f.style[t]=E[p][t]+"px",s(" Set "+t+" = "+E[p][t]+"px"))}t("maxHeight"),t("minHeight"),t("maxWidth"),t("minWidth")}function n(t){return""===t&&(f.id=t="iFrameResizer"+g++,y=(e||{}).log,s(" Added missing iframe ID: "+t+" ("+f.src+")")),t}function o(){s(" IFrame scrolling "+(E[p].scrolling?"enabled":"disabled")+" for "+p),f.style.overflow=!1===E[p].scrolling?"hidden":"auto",f.scrolling=!1===E[p].scrolling?"no":"yes"}function r(){("number"==typeof E[p].bodyMargin||"0"===E[p].bodyMargin)&&(E[p].bodyMarginV1=E[p].bodyMargin,E[p].bodyMargin=""+E[p].bodyMargin+"px")}function a(){return p+":"+E[p].bodyMarginV1+":"+E[p].sizeWidth+":"+E[p].log+":"+E[p].interval+":"+E[p].enablePublicMethods+":"+E[p].autoResize+":"+E[p].bodyMargin+":"+E[p].heightCalculationMethod+":"+E[p].bodyBackground+":"+E[p].bodyPadding+":"+E[p].tolerance+":"+E[p].enableInPageLinks}function l(e){t(f,"load",function(){var t=v;u("iFrame.onload",e,f),!t&&E[p].heightCalculationMethod in T&&c({iframe:f,height:0,width:0,type:"init"})}),u("init",e,f)}function d(t){if("object"!=typeof t)throw new TypeError("Options is not an object.")}function h(t){t=t||{},E[p]={},d(t);for(var e in D)D.hasOwnProperty(e)&&(E[p][e]=t.hasOwnProperty(e)?t[e]:D[e]);y=E[p].log}var f=this,p=n(f.id);h(e),o(),i(),r(),l(a())}function p(){function t(t,e){if(!t.tagName)throw new TypeError("Object is not a valid DOM element");if("IFRAME"!==t.tagName.toUpperCase())throw new TypeError("Expected <IFRAME> tag, found <"+t.tagName+">.");f.call(t,e)}return function(e,i){switch(typeof i){case"undefined":case"string":Array.prototype.forEach.call(document.querySelectorAll(i||"iframe"),function(i){t(i,e)});break;case"object":t(i,e);break;default:throw new TypeError("Unexpected data type ("+typeof i+").")}}}function m(t){t.fn.iFrameResize=function(t){return this.filter("iframe").each(function(e,i){f.call(i,t)}).end()}}var g=0,v=!0,y=!1,b="message",w=b.length,_="[iFrameSizer]",k=_.length,x="",C=null,S=window.requestAnimationFrame,T={max:1,scroll:1,bodyScroll:1,documentElementScroll:1},E={},D={autoResize:!0,bodyBackground:null,bodyMargin:null,bodyMarginV1:8,bodyPadding:null,checkOrigin:!0,enableInPageLinks:!1,enablePublicMethods:!1,heightCalculationMethod:"offset",interval:32,log:!1,maxHeight:1/0,maxWidth:1/0,minHeight:0,minWidth:0,scrolling:!1,sizeHeight:!0,sizeWidth:!1,tolerance:0,closedCallback:function(){},initCallback:function(){},messageCallback:function(){},resizedCallback:function(){},scrollCallback:function(){return!0}};e(),t(window,"message",r),window.jQuery&&m(jQuery),"function"==typeof define&&define.amd?define([],p):"object"==typeof module&&"object"==typeof module.exports?module.exports=p():window.iFrameResize=p()}(),function(t,e){"use strict";function i(t){t.find("iframe").iFrameResize({checkOrigin:!1})}var n="Form";e.onElementAdded(n,i),e.onElementUpdated(n,i),i(t(".fs"+n))}(FS.$,FS.events),function(t){"use strict";function e(t){var e=s.getElementID(t),a=t.data("trigger-element-ids");t.on("click",".fsLoadMoreButton",function(){var e=$(this),i=t.find(n.elementContent),r={},a=e.data("start-row");a&&(r.start_row=a),s.loadingOverlay(i),s.loadElementData(t,r).done(function(n){var s=$(n),r=s.find(".fsListItems").children(),a=s.find(".fsLoadMoreButton");i.siblings(".fsLoadingDotsOverlay").remove(),i.find(".fsListItems").append(r),e.replaceWith(a),t.addClass("fsLoadMoreClicked"),o.triggerElementMoreLoaded(t,r)})}),t.on("click",".fsIssueLink[data-opens-in=element]",function(){return i({issue_id:$(this).data("issue-id"),preview:$(this).data("preview")},t)}),t.on("change",".fsIssueDropdownSelection",function(){return i({issue_id:$(this).val(),preview:$(this).data("preview")},t)}),a&&r.onFilter(e,a,function(o,a){return o!=e&&("keywords"in a&&(t.data("keywords",a.keywords),i(null,t)),s.loadingOverlay(t.find(n.elementContent)),void s.fetchElementHTML(e,a).done(function(){r.triggerUpdated(e,null,o)}))})}function i(t,e){var i={keywords:e.data("keywords")};return t&&($.extend(i,t),s.updateURLParams({virtualParam:"/~issue-id/"+t.issue_id})),r.triggerFilter(s.getElementID(e),i),!1}var n=t.getInternalNS("elements.constants.selectors"),s=t.getInternalNS("elements.utils"),o=t.events,r=t.getInternalNS("elements.linkedEvents"),a="Issue";$(".fs"+a+"Element").each(function(){e($(this))}),o.onElementAdded(a,e),o.onElementUpdated(a,e),o.onElementDialogShown(a,e)}(FS,window),function(t){"use strict";function e(t){n.setupSearch(t)}var i=t.$,n=t.getInternalNS("elements.element_tools.utils"),s=t.getNS("events"),o="IssueTools";s.onElementAdded(o,e),s.onElementUpdated(o,e),i(".fs"+o+"Element").each(function(){e(i(this))})}(FS),function(t,e,i,n,s){"use strict";function o(t){var e=q(t).find(ce),i=e.find(je),n=e.find(jt).length>0,s=d(t),o=e.find(K).length>0,r=e.width(),a=r<Vt,l=n||s.mediaType==Wt||s.mediaType==Ut&&r<Yt,c=n&&r<Kt+(o?30:0)||!n&&(s.mediaType==Wt&&r<Gt||s.mediaType==Ut&&r<Xt),h=n&&!o||r<Qt;i.toggleClass(Nt,c).css("left",n&&o?130:""),e.find(be).toggleClass(Nt,l),e.find(Ht+","+Zt+","+me).toggleClass(Nt,a),e.find(Be).toggleClass(Nt,h).css("left",a?40:"")}function r(t){var e=q(t),i=e.find(Q);return f()?Y.height():p(e)?F.find(pt).height():Math.round(i.width()*parseFloat(i.data("aspectratio")))}function a(t,n,s,o){var r,a,d,g,v,b,w,S=0,T=q(t),E=[],D=T.find(Q)[0],O=0,H=q(D),R=H.data("autoplay"),z=H.data("loop"),U=H.data("randomstart");if(!H.data("setup-started"))return H.data("setup-started",!0),d=H.data("videoresolution"),g=parseInt(H.data("playercontrols")),b=parseInt(H.data("playlistid")),w=parseInt(H.data("posterscaling")),k(T),isNaN(b)||b<=0?void M(H):void q.ajax("/cf_endpoints/routes.cfm/media/groups/"+b+"/objects.json",{error:function(t){404==t.status?M(H):e.alert("An error occurred while attempting to retrieve the media data.")},success:function(e){var b,M,V={},Y="";for(S=0;S<ii.length;S++)if("function"==typeof D[ii[S]]){ei=ii[S];break}for(S=0;S<Ze.length;S++)if("function"==typeof document[Ze[S]]){Je=Ze[S];break}switch(H.find("noscript").remove(),a=q(ni.replace("#{timestamp}",(new Date).getTime())),r=a.find(He),a.find(se).toggleClass(Nt,g!=le),a.find(tt).toggleClass(Nt,g!=re),a.find(st).toggleClass(Nt,g==ae),H.append(a),v=a.attr("id"),e.group_type){case Wt:H.addClass("fsMediaPlaylistAudio");break;case qt:H.addClass("fsMediaPlaylistImage");break;case Ut:H.addClass("fsMediaPlaylistVideo")}if(Ge||(a.find(ie).attr("aria-label","Play"),a.find(me).attr("aria-label","Previous"),a.find(Zt).attr("aria-label","Next"),a.find(Be).attr("aria-label","Mute"),a.find(be).attr("aria-label","Quality"),a.find(Ht).attr("aria-label","Description"),a.find(Lt).attr("aria-label","Enter Fullscreen")),(o||!l()&&p(a))&&a.find(Lt).addClass(xt).removeAttr("aria-label"),e.group_type==qt){for(S=0;S<e.objects.length;S++)V={description:e.objects[S].object_description,image:e.objects[S].display_path,objectID:e.objects[S].object_id,thumb:e.objects[S].thumbnail_path,title:e.objects[S].object_title},E.push(V);if(U&&E.length&&(O=Math.floor(Math.random()*E.length)),!isNaN(parseInt(n)))for(S=0;S<E.length;S++)if(E[S].objectID==n){O=S;break}if(i.run(r[0],{autoplay:R,dataSource:E,show:O,showCounter:!1,showImagenav:!1,showInfo:!1,thumbnails:!1,transition:"fade",transitionSpeed:600,extend:function(){var t=!1;this.bind("pause",function(){a.find(K).jPlayer("pause")}),this.bind("play",function(){a.find(K).jPlayer("play")}),this.bind("image",function(e){var i=q(e.imageTarget);0==e.index&&t&&!z&&(this.pause(),P(T),a.find(K).jPlayer("pause",0),a.find(ie).removeClass(te),t=!1),e.index==E.length-1&&(t=!0),p(r)||(r.find($t+" "+Ot+" img").css("cursor","pointer"),i.click(this.proxy(function(t){t.stopPropagation(),f()||this.openLightbox()}))),i.attr("alt",e.galleriaData.title),j("mediaPlayerImageDisplayed",e.galleriaData.title,i.attr("src"))}),this.bind("loadstart",function(t){var e=t.galleriaData,i=e.description&&e.description.length>0?e.description:"No description available",n=e.title&&e.title.length>0?e.title:"&nbsp;";a.find(je).text(t.index+1+" / "+E.length),a.find($e).html(n),a.find(ct).html(i),p(a)&&(F.find(wt).html(n),F.find(vt).html(i))}),this.bind("lightbox_image",function(t){var e=q(".galleria-lightbox-title").text(),i=q(t.imageTarget);i.attr("alt",e),g!=ae&&this.pause(),a.find(ie).removeClass(te),Ge||a.find(ie).attr("aria-label","Play"),j("mediaPlayerLightboxImageDisplayed",e,i.attr("src"))})}}),r.find($t).css("bottom",0).css("left",0).css("right",0).css("top",0),e.song_path){M=e.song_path.split("."),Y=M[M.length-1].split("?")[0];var X,Q={loop:!0,preload:g==re?"metadata":"none",solution:"html,flash",supplied:Y,swfPath:"/assets/jplayer",volume:1,ready:function(){var t=q(this),i={};"m4a"==Y?i.m4a=e.song_path:i.mp3=e.song_path,t.jPlayer("setMedia",i),R&&t.jPlayer("play")}};X=q("<div>",{"class":G}),r.prepend(X),X.jPlayer(Q)}else a.find(Be).addClass(Nt);R&&(a.find(se).addClass(Nt),a.find(ie).addClass(te),Ge||a.find(ie).attr("aria-label","Pause"),g!=ae&&a.find(it).removeClass(Nt),h(T,!0))}else if(e.group_type==Wt||e.group_type==Ut){var J,Z=[],et=R&&e.group_type==Ut;if(w==he&&e.objects.length){var nt=e.objects.length>O?O:0;$(t,e.group_type==Wt?e.objects[nt].thumbnail_path:e.objects[nt].display_path)}else u(t);for(S=0;S<e.objects.length;S++)V={desc:e.objects[S].object_description,displayPath:e.objects[S].display_path,objectID:e.objects[S].object_id,title:e.objects[S].object_title,video1080:"",video360:"",video480:"",video720:""},e.group_type==Wt?(M=e.objects[S].song_path.split("."),b=M[M.length-1].split("?")[0],"m4a"==b?(Y.indexOf("m4a")==-1&&(Y.length&&(Y+=","),Y+="m4a"),V.m4a=e.objects[S].song_path):(Y.indexOf("mp3")==-1&&(Y.length&&(Y+=","),Y+="mp3"),V.mp3=e.objects[S].song_path),w==ue&&(V.poster=e.objects[S].thumbnail_path)):(M=e.objects[S].normal_video_path.split("."),b=M[M.length-1].split("?")[0],w==ue&&(V.poster=e.objects[S].display_path),e.objects[S].mobile_video_path&&e.objects[S].mobile_video_path.length&&(V.video360=e.objects[S].mobile_video_path),e.objects[S].normal_video_path&&e.objects[S].normal_video_path.length&&(V.video480=e.objects[S].normal_video_path),e.objects[S].hd_video_path&&e.objects[S].hd_video_path.length&&(V.video720=e.objects[S].hd_video_path),e.objects[S].fullhd_video_path&&e.objects[S].fullhd_video_path.length&&(V.video1080=e.objects[S].fullhd_video_path),"flv"==b?Y.indexOf("flv")==-1&&(Y.length&&(Y+=","),Y+="flv"):Y.indexOf("m4v")==-1&&(Y.length&&(Y+=","),Y+="m4v")),Z.push(V);if(U&&Z.length&&(O=Math.floor(Math.random()*Z.length)),!isNaN(parseInt(n)))for(S=0;S<Z.length;S++)if(Z[S].objectID==n){O=S;break}Xe[v]={index:O,mediaType:e.group_type,playing:!1,playlist:Z,quality:d||ti.getItem(Rt)||"1080p"},et&&(J=a.find(Be),J.addClass(We),Ge||J.attr("aria-label","Unmute")),r.jPlayer({muted:et,preload:g==re?"metadata":"none",solution:"html,flash",supplied:Y,swfPath:"/assets/jplayer",volume:1,size:{height:"100%",width:"100%"},ended:function(){y(T);var t=Xe[v].index;t>0||z?r.jPlayer("play"):(w==he&&H.find(fe).removeClass(Nt),P(T))},error:function(t){t.jPlayer.error.type==q.jPlayer.error.NO_SOLUTION&&(a.addClass(Nt),H.append('<div class="fsMediaSetupError"><h3>Media Error</h3><p>No solution was found for playing this media. You will need to upgrade your browser to one that is compatible with HTML 5 media and supports H.264 video and MP3 audio or you will need to <a href="https://get.adobe.com/flashplayer/" target="_blank">install the latest version of Adobe Flash player </a>.</p></div>'))},loadedmetadata:function(t){N(T,t)},pause:function(t){var i,n=t.jPlayer.status;Xe[v].playing=!1,t.jPlayer.status.ended&&Xe[v].index!=Xe[v].playlist.length-1||(a.find(ie).removeClass(te),Ge||a.find(ie).attr("aria-label","Play"),t.jPlayer.status.ended||(i=e.group_type==Ut?"mediaPlayerVideoPaused":"mediaPlayerAudioPaused",j(i,n.media.title,n.src,{currentTime:n.currentTime})))},play:function(i){var n,s=i.jPlayer.status;Xe[v].playing=!0,a.find(ie).addClass(te),e.group_type==Ut?(u(t),n="mediaPlayerVideoPlayed"):n="mediaPlayerAudioPlayed",j(n,s.media.title,s.src,{currentTime:s.currentTime})},progress:function(t){var e,i,n=0;t.jPlayer.html.active?(i=r.find("audio, video")[0].buffered,e=i.length>0?i.end(i.length-1):0,n=Math.round(e/t.jPlayer.status.duration*100)):n=Math.round(t.jPlayer.status.seekPercent),a.find(ve).css("width",n+"%")},ready:function(){Xe[v].index=O,m(T),R?(r.jPlayer("play",s),h(T,!0),a.find(se).addClass(Nt),g!=ae&&a.find(it).removeClass(Nt)):r.jPlayer("pause",s)},timeupdate:function(t){N(T,t)}})}a.on("click",ie,function(t){t.stopPropagation(),L(T)}),a.on("click",se,function(){L(T),q(this).addClass(Nt),a.find(tt).removeClass(Nt)}),a.on("click",it+","+He,function(){g!=ae&&(Ke++,1==Ke?B=setTimeout(function(){L(T),Ke=0},250):(Ke=0,clearTimeout(B),a.find(Lt).hasClass(xt)||I(T)))}),a.on("click",me,function(t){t.stopPropagation(),_(T)}),a.on("click",Zt,function(t){t.stopPropagation(),y(T)}),a.on("click",_e+" div",function(t){t.stopPropagation(),C(T,q(this).data("resolution"))}),a.on("click",lt+","+Ht,function(t){t.stopPropagation(),A(T)}),a.on("click",Be,function(t){var e=q(this);t.stopPropagation(),e.hasClass(We)?(e.removeClass(We),Ge||e.attr("aria-label","Mute"),x(T,!1)):(e.addClass(We),Ge||e.attr("aria-label","Unmute"),x(T,!0))}),a.on("click mousemove",function(){clearTimeout(W),P(T),W=setTimeout(function(){h(T)},3e3)}),a.on("mouseleave",function(){h(T)}),a.on("click",be,function(t){var e=a.find(it),i=a.find(_e);t.stopPropagation(),e.addClass(Nt),i.removeClass(Nt),i.height(.5625*i.width())}),a.on("click",Me,function(t){var e=q(this),i=t.pageX-e.offset().left,n=i/e.width()*100;t.stopPropagation(),r.jPlayer("playHead",n)}),a.on("mouseleave",Me,function(){var t=q(this);t.removeAttr("aria-label"),t.find(Ce+","+Te).width(0),a.find(De).css("opacity",0)}),a.on("mousemove",Me,function(t){var e,i,n=q(this),s=n.find(Ce),o=n.find(Te),l=n.find(Ie),d=r.data("jPlayer").status.duration,h={left:0,opacity:90,width:80},u=t.pageX-n.offset().left;if(u>=l.width()?(s.width(0),o.width(u)):(s.width(u),o.width(0)),d>0){switch(e=a.find(De),i=c(Math.round(d*(u/n.width()))),i.length){case 4:h.width=50;break;case 5:h.width=60;break;case 7:h.width=70}h.left=u-h.width/2+parseInt(e.css("padding-left")),e.css(h).html(i)}}),a.on("click",Lt,function(t){t.stopPropagation(),q(this).hasClass(xt)||I(T)}),k(T,!0)}})}function l(){return ei.length}function c(t){var e,i,n,s="";return e=t>3600?t%3600:0,i=parseInt(t/60)-(e>0?60*e:0),n=t-(e>0?60*e:0)-60*i,e>0&&(s+=e+":"+(i<10?"0":"")),s+=i+":"+(n<10?"0":"")+n}function d(t){return Xe[q(t).find(ce).attr("id")]}function h(t,e){var i,n,s,o=q(t).find(ce),r=!0;o.find(jt).length?(n=o.find(He),r=n.data("galleria")._playing):(s=d(t),r=!!s&&s.playing),(e||r)&&(i=o.find(it),o.addClass(Ne),"opacity"in document.body.style?i.css("opacity",0):i.addClass(Nt))}function u(t){q(t).find(fe).addClass(Nt)}function f(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement}function p(t){return t.closest(F).length>0}function m(t,e){var i=q(t),n=i.find(He),s=i.find(ce),o=i.find(_e),r=i.find(be),a=s.attr("id"),l=Xe[a].playlist,c=Xe[a].index,d=Xe[a].quality,h=l[c].video360.split("."),u=h[h.length-1].split("?")[0],f="1080p,720p,480p,360p",p=parseInt(d),m=Xe[a].playing,g="";if(o.empty().removeClass("fsMediaResolutionFullHD fsMediaResolutionHD fsMediaResolutionStandard"),l[c].video1080.length?o.addClass("fsMediaResolutionFullHD"):l[c].video720.length?o.addClass("fsMediaResolutionHD"):o.addClass("fsMediaResolutionStandard"),g+=l[c].video1080.length>0?'<div data-resolution="1080p"></div>':"",g+=l[c].video720.length>0?'<div data-resolution="720p"></div>':"",g+='<div data-resolution="480p"></div>',g+='<div data-resolution="360p"></div>',g+='<div class="fsMediaResolutionClose">X</div>',o.append(g),"flv"==u)l[c].flv=l[c].video360;else if("mp4"==u)for(var v=0;v<4;v++){var y=f.split(",")[v],b=parseInt(y);if(l[c]["video"+b]&&b<=p){d=y,l[c].m4v=l[c]["video"+b];break}}r.html(d),n.jPlayer("setMedia",l[c]),n.find("video, object").removeAttr("title"),m?n.jPlayer("play",e):n.jPlayer("pause",e),O(i)}function g(t,i){var n=q(t),s=n.closest(Et),o=s.children(St),r=s.attr("id").split("_").pop(),a={element_id:r,media_category_id:"",media_channel_id:"",media_group_id:""},l="",c=q.extend({},a);n.hasClass("fsMediaFolderLink")?(c[n.data("type")]=n.data("id"),Ve.updateQueryStringValueAndHistory(c),l=n.attr("href")):n.hasClass("fsMediaBackLink")?(l=n.attr("href"),n.data("id")&&(c[n.data("type")]=n.data("id")),Ve.updateQueryStringValueAndHistory(c)):l=i?"?"+q.param(i):e.location.search,Qe.addState(r,q.extend(a,Ve.getQueryStringValues(l))),w(o),q.ajax({cache:!1,url:"/fs/elements/"+r+l+(l?"&":"?")+"is_draft="+s.hasClass("fsStateEditable")}).done(function(t){o.html(q(t).find(St).html());var e=o.find("a.fsMediaBackLink"),i=Qe.getBackLinkState(r);e.attr("href",i?"?"+q.param(i):""),i&&(i.media_channel_id?e.data("type","media_channel_id").data("id",i.media_channel_id):i.media_category_id&&e.data("type","media_category_id").data("id",i.media_category_id)),S(s)}).fail(function(){s.children(".fsLoadingDotsOverlay").remove(),e.alert("There was an error with the element. Please try again.")})}function v(t,i){var n,s,o,r,a=505;navigator.userAgent.indexOf("Chrome")!=-1&&navigator.userAgent.indexOf("Mac OS")!=-1&&(a=555),n=a+i/1,s="toolbar=no,location=no,directories=no,status=no,menubar=no,scrollbars=yes,resizable=yes,width=805,height="+n,t.indexOf("grp=")!=-1&&(t=t.replace("grp=","g=")),o="/cf_media/index.cfm?"+t,r=e.open(o,"popupmedia",s),!r||r.closed||"undefined"==typeof r.closed?e.alert("The media link popup didn't open! Check your popup blocker settings and try again."):r.focus()}function y(t){var e=q(t),i=e.find(ce),n=e.find(He);if(i.find(jt).length)n.data("galleria").pause().next(),i.find(ie).removeClass(te);else{var s=i.attr("id"),o=Xe[s].mediaType,r=Xe[s].playing,a=Xe[s].playlist,l=parseInt(e.find(Q).data("posterscaling")),c=Xe[s].index;c<a.length-1?c++:c=0,l!=he||o!=Ut||r||$(t,a[c].displayPath),Xe[s].index=c,m(e)}}function b(t,e,i,n,o,r,l,c,d){var h="";E(),t&&(e==s&&(e=0),i==s&&(i=!1),r==s&&(r=!1),o||(o=""),F.removeClass(),d&&F.addClass(d),F.toggleClass(kt,l),l&&(h+='<div id="'+bt+'"></div>'),h+='<div id="'+ft+'"><div class="'+Dt+'"><div class="'+X+'" data-autoplay="'+i+'" data-aspectratio="0.5625" data-playercontrols="1" data-playlistid="'+t+'" data-posterscaling="1" data-videoresolution="'+o+'"></div></div></div>',F.toggleClass(_t,c),c&&(h+='<div id="'+gt+'"></div>'),H.html(h),z.showModal(),a(H,e,n,r))}function w(t){t.prepend('<div class="fsLoadingDotsOverlay" style="height:'+t.height()+'px"><div class="fsLoadingDots"></div></div>')}function _(t){var e=q(t),i=e.find(ce),n=e.find(He);if(i.find(jt).length)n.data("galleria").pause().prev(),i.find(ie).removeClass(te);else{var s=i.attr("id"),o=Xe[s].mediaType,r=Xe[s].playing,a=Xe[s].playlist,l=parseInt(e.find(Q).data("posterscaling")),c=Xe[s].index;c>0?c--:c=a.length-1,l!=he||o!=Ut||r||$(t,a[c].displayPath),Xe[s].index=c,m(e)}}function k(t,e){var i,n=q(t),s=n.find(ce);s.length&&(s.closest(Q).height(r(n)),e&&o(n),i=n.find(He),i.find(jt).length&&i.data("galleria").resize())}function x(t,e){var i=q(t),n=i.find(He);n.jPlayer("mute",e),n.find(K).jPlayer("mute",e)}function C(t,e){var i=q(t),n=i.find(He),o=i.find(ce),r=o.find(it);o.find(_e).addClass(Nt),r.removeClass(Nt),e!=s&&(Xe[o.attr("id")].quality=e,ti.setItem(Rt,e),m(i,n.data("jPlayer").status.currentTime))}function S(t){var e,i;t?(i=q(t),e=i.find(Bt)):(e=q(Bt),i=q(Et)),e.each(function(){var t=q(this),e=t.data("mediatype"),i=t.data("playlistid");e!=qt&&t.on("click",".fsMediaGalleryObject[data-objectid]",function(e){var n=q(this),s=t.data("videoresolution"),o=t.data("dialog-show-description"),r=t.data("dialog-show-title");return b(i,n.data("objectid"),!0,0,s,Ye,r,o,"fsMediaGalleryDialog"),e.preventDefault(),!1})}),i.find(".fsMediaFolderLink, .fsMediaBackLink").on("click",function(t){if(q(this).attr("href").indexOf("history.back")==-1)return g(this),t.preventDefault(),!1})}function T(){Qe.isStatesEmpty()&&Y.on("popstate",function(t){q(Et).each(function(){if(t.originalEvent.state){var e=q(this),i=e.attr("id").split("_").pop(),n=t.originalEvent.state[i];Qe.didChangeState(i)&&g(e,n)}else g(this)})})}function E(){F||(F=q("<dialog>",{id:yt}),H=q("<div>",{id:mt}),R=q("<button>",{"aria-label":"close media player",id:ut}),R.click(function(){H.empty(),z.close()}),U.append(F.append(H).append(R)),z=F[0],t.util.ensureDialog(z))}function D(t){q(Q+":visible",t).each(function(){var t=q(this);t.hasClass(ot)||t.closest(Pt).each(function(){a(this)})})}function P(t){var e=q(t).find(ce),i=e.find(it);e.removeClass(Ne),"opacity"in document.body.style?i.css("opacity",.9):i.removeClass(Nt)}function M(t){q(t).append('<div class="fsAdminWarning">Select a media playlist</div>')}function A(t){var e,i,n=q(t),s=n.find(it),o=n.find(ht),r=n.find(He),a="",l="";o.is(":visible")?(s.removeClass(Nt),o.addClass(Nt)):(s.addClass(Nt),o.removeClass(Nt),e=r.data("galleria"),i=r.data("jPlayer"),e?(l=e.getData().title,a=q(e.getActiveImage()).attr("src")):i&&(l=i.status.media.title,a=i.status.src),j("mediaPlayerDescriptionDisplayed",l,a))}function I(t){var e,i,n,s,o,r=q(t),a=r.find(He),c=r.find(ce),d=r.find(Q)[0];f()?document[Je]():l()?d[ei]():(a.find(jt).length?(e=a.data("galleria").getIndex(),s=a.data("galleria")._playing,o=a.data("galleria").getData(e).objectID):(e=Xe[c.attr("id")].index,i=Xe[c.attr("id")].quality,n=a.data("jPlayer").status.currentTime,s=Xe[c.attr("id")].playing,o=Xe[c.attr("id")].playlist[e].objectID),b(r.find(Q).data("playlistid"),o,s,n,i,!0))}function L(t){var e=q(t),i=e.find(He),n=e.find(ie);if(n.hasClass(te))n.removeClass(te),Ge||n.attr("aria-label","Play"),n.closest(ce).find(jt).length?i.data("galleria").pause():i.jPlayer("pause");else{if(e.width()<300&&!p(e)&&!e.find(jt).length){var s=d(e);if(s.mediaType==Ut){var o=i.data("jPlayer").status.currentTime,r=s.quality,a=s.playlist[s.index].objectID,l=e.find(Q).data("playlistid");return void b(l,a,!0,o,r,Ye)}}n.addClass(te),Ge||n.attr("aria-label","Pause"),n.closest(ce).find(jt).length?i.data("galleria").play(5e3):i.jPlayer("play")}}function j(t,e,i,n){var s={event:t,mediaTitle:e,url:i};n&&q.extend(s,n),qe.push(s)}function O(t){var e=q(t).find(ce),i=e.attr("id"),n=Xe[i].playlist,s=Xe[i].index,o=q.trim(n[s].desc).length?n[s].desc:"No description available";e.find($e).text(n[s].title),e.find(ct).html(o),e.find("img").attr("alt",o),p(e)&&(F.find(wt).text(n[s].title),F.find(vt).html(n[s].desc))}function $(t,e){q(t).find(fe).removeClass(Nt).css("background-image",'url("'+e+'")')}function N(t,e){var i=q(t),n=c(Math.round(e.jPlayer.status.currentTime))+" / "+c(Math.round(e.jPlayer.status.duration));i.find(je).html(n),i.find(Ie).css("width",Math.round(e.jPlayer.status.currentPercentAbsolute)+"%")}var F,H,R,z,B,W,q=t.$,U=q(document.body),V=q(document),Y=q(e),G="fsMediaBackgroundAudio",K="."+G,X="fsMediaContainer",Q="."+X,J="fsMediaControl",Z="fsMediaControlsBottom",tt="."+Z,et="fsMediaControlsContainer",it="."+et,nt="fsMediaControlsTop",st="."+nt,ot="fsMediaCustomPlayer",rt="fsMediaDescription",at="fsMediaDescriptionClose",lt="."+at,ct="."+rt,dt="fsMediaDescriptionContainer",ht="."+dt,ut="fsMediaPlayerDialogCloseButton",ft="fsMediaPlayerDialogContainer",pt="#"+ft,mt="fsMediaPlayerDialogContent",gt="fsMediaPlayerDialogDescription",vt="#"+gt,yt="fsMediaPlayerDialog",bt="fsMediaPlayerDialogTitle",wt="#"+bt,_t="fsMediaPlayerDialogWithDescription",kt="fsMediaPlayerDialogWithTitle",xt="fsDisabled",Ct="fsElementContent",St="."+Ct,Tt="fsGallery",Et="."+Tt,Dt="fsMedia",Pt="."+Dt,Mt="media",At="fsMediaExitFullscreen",It="fsMediaFullscreen",Lt="."+It,jt=".galleria-container",Ot=".galleria-image",$t=".galleria-stage",Nt="fsStateHidden",Ft="fsMediaInfo",Ht="."+Ft,Rt="mediaPlayerQuality",zt="fsMediaGallery",Bt="."+zt,Wt=2,qt=1,Ut=3,Vt=200,Yt=260,Gt=315,Kt=290,Xt=375,Qt=115,Jt="fsMediaNext",Zt="."+Jt,te="fsMediaPause",ee="fsMediaPlay",ie="."+ee,ne="fsMediaPlayOverlay",se="."+ne,oe="fsMediaPlayer",re=1,ae=2,le=0,ce="."+oe,de="fsMediaPoster",he=1,ue=0,fe="."+de,pe="fsMediaPrevious",me="."+pe,ge="fsMediaProgressBar",ve="."+ge,ye="fsMediaQuality",be="."+ye,we="fsMediaQualityMenu",_e="."+we,ke="fsMediaSeekBar",xe="fsMediaSeekBarBack",Ce="."+xe,Se="fsMediaSeekBarForward",Te="."+Se,Ee="fsMediaSeekPreview",De="."+Ee,Pe="fsMediaStatusBar",Me="."+Pe,Ae="fsMediaTimeBar",Ie="."+Ae,Le="fsMediaTimeLabel",je="."+Le,Oe="fsMediaTitle",$e="."+Oe,Ne="fsMediaTransparentCursor",Fe="fsMediaView",He="."+Fe,Re="fsMediaViewContainer",ze="fsMediaVolume",Be="."+ze,We="fsMediaVolumeMuted",qe=e.dataLayer||[],Ue=t.events,Ve=t.getInternalNS("elements.utils"),Ye=Ve.inDraftMode(),Ge=!1,Ke=0,Xe={},Qe=new Ve.ElementHistory,Je="",Ze=["exitFullscreen","msExitFullscreen","mozCancelFullScreen","webkitExitFullscreen"],ti=t.localStorage,ei="",ii=["requestFullscreen","msRequestFullscreen","mozRequestFullScreen","webkitRequestFullscreen"],ni='<div id="fsMediaPlayer-#{timestamp}" class="'+oe+'"><div class="'+Re+'"><div class="'+Fe+'">Loading media...</div><div class="fsCroppedImage '+de+'"></div></div><div class="'+nt+" "+et+'"><div class="'+Oe+'">&nbsp;</div></div><div class="'+Z+" "+et+" "+Nt+'"><div class="'+Ee+'"></div><div class="'+Pe+'"><div class="'+ke+'"></div><div class="'+ge+'"></div><div class="'+Se+'"></div><div class="'+Ae+'"></div><div class="'+xe+'"></div></div><div class="fsMediaControls"><button class="'+ee+" "+J+'"></button><button class="'+pe+" "+J+'"></button><button class="'+Jt+" "+J+'"></button><button class="'+ze+" "+J+'"></button><button class="'+ye+" "+J+'"><span></span></button><button class="'+Ft+" "+J+'"></button><button class="'+It+" "+J+'"></button><div class="'+Le+'"></div></div></div><div class="'+dt+" "+Nt+'"><div class="fsMediaDescriptionTransparentLayer"></div><div class="'+rt+'"></div><div class="'+at+'">X</div></div><div class="'+we+" "+Nt+'"></div><button class="'+ne+'" aria-label="View"></button></div>';Y.resize(function(){q(Pt).each(function(){k(this,!0)})}),V.on("fullscreenchange mozfullscreenchange webkitfullscreenchange MSFullscreenChange",function(){var t=q(Lt),e=q(ce+" "+$t+" "+Ot+" img"),i=f(),n=(i?"Exit":"Enter")+" Fullscreen",s=i?"default":"pointer";t.toggleClass(At,i),Ge||t.attr("aria-label",n),e.css("cursor",s)}),V.on("fullscreenerror mozfullscreenerror webkitfullscreenerror MSFullscreenError",function(t){var e,i,n,s,o,r=q(t.originalEvent.srcElement),a=r.find(He),l=0;r.find(jt).length?(e=a.data("galleria").getIndex(),s=a.data("galleria").getData(e).objectID,n=a.data("galleria")._playing,r.find(ie).removeClass(te),a.data("galleria").pause()):(o=r.find(ce).attr("id"),e=Xe[o].index,i=Xe[o].quality,l=a.data("jPlayer").status.currentTime,n=Xe[o].playing,s=Xe[o].playlist[e].objectID,a.jPlayer("pause")),b(r.data("playlistid"),s,n,l,i,!0)}),Ue.onElementAdded(Mt,function(t){var e=t.find(Q);e.length&&!e.hasClass(ot)&&a(t)}),Ue.onElementHidden(Ue.ALL_CONTAINERS_TYPE,function(t){t.find(He).each(function(){var t=q(this).data("galleria");t&&t.destroy()}),t.find(ce).remove(),t.find(Q).data("setup-started",!1)}),Ue.onElementMoved(Mt,function(){Y.resize()}),Ue.onElementShown(Ue.ALL_CONTAINERS_TYPE,D),Ue.onElementUpdated(Mt,function(t){var e=t.find(Q),i=t.find(ce);e.length&&!e.hasClass(ot)?(i.off("click mouseleave mousemove"),a(t)):(S(t),1==q(Et).length&&T())}),U.on("mediaPlayer.loadPlaylist",function(t,e){var i=q("#"+e.player).closest(".fsElement"),n=i.find(Q),s=i.find(ce);n.data("playlistid",e.playlist),s.off("click mouseleave mousemove"),a(i)}),n.option({resizeDuration:200,wrapAround:!0}),q(function(){try{document.createEvent("TouchEvent"),Ge=!0}catch(t){Ge=!1}U.on("click","a[data-media-playlist-id], a[href*=popMedia\\(]",function(){var t,e,i=q(this),n=i.data("media-playlist-id"),s=/popMedia\(['"]+((g|cat|chnl)=(\d+))['"]+\)/,o=!!i.data("media-dialog-description"),r=!!i.data("media-dialog-title");if(!n){if(e=s.exec(i.prop("href")),"g"!=e[2])return t=i.closest("article"),w(t),q.ajax("/cf_media/popheight.cfm").done(function(t){v(e[1],t)}).fail(function(){v(e[1],80)}).always(function(){t.children(".fsLoadingDotsOverlay").remove()}),!1;n=e[3]}return b(n,null,!0,0,null,Ye,r,o,"fsMediaLinkDialog"),!1}),D(),S(),q(Et).length&&T()})}(FS,window,Galleria,lightbox),function(t,e){"use strict";function i(t){var i=c.getElementID(t),o=t.data("trigger-element-ids");t.on("click",".fsAlertsIcon",function(t){t.preventDefault(),e.open("/cf_directory/cp.cfm?news=0","","width=600,height=700")}).on("click",".fsRSSIcon",function(t){
t.preventDefault(),e.open("/cf_news/rss.cfm","","width=600,height=700")}).on("click",".fsCommentCount",function(){var t=n(this),e=t.siblings(".fsCommentList");e.toggleClass(u),t.toggleClass(p,e.hasClass(u))}).on("click",".fsLoadMoreButton",function(){var e=n(this),o=t.find(d),a={},l=e.data("start-row");l&&(a.start_row=l),s.extend(a,g[i].filters),c.loadingOverlay(o),c.loadElementData(t,a).done(function(i){var s=n(i),a=s.find(".fsListItems").children(),l=s.find(".fsLoadMoreButton");o.siblings(".fsLoadingDotsOverlay").remove(),o.find(".fsListItems").append(a),e.replaceWith(l),t.addClass("fsLoadMoreClicked"),r.triggerElementMoreLoaded(t,a)})}).on("click",".fsPostComment",function(){var t=n(this),e=t.closest(".fsComments").find(".fsCommentCount"),i=t.siblings(".fsMyComment"),s=t.closest(".fsCommentForm"),o=n.trim(i.val()),r=parseInt(t.closest(".fsComments").data("newsid"));isNaN(r)||r<=0?alert("Sorry, we are unable to determine what news post you are commenting on."):0==o.length?(alert("Please type a comment before submitting!"),i.val(""),i.focus()):(t.prop("disabled",!0),n.ajax({data:{comment:o},dataType:"json",type:"POST",url:"/cf_endpoints/routes.cfm/news/posts/"+r+".json",error:function(e,i,n){alert(n),t.prop("disabled",!1)},success:function(n){if(n.success)if(n.warnings.length>0)s.after('<div class="fsCommentWarning">'+n.warnings+"</div>");else{var r='<div class="fsComment"><div><span class="fsName">';r+=s.find(".fsName").text(),r+="</span></div><div>"+o+"</div></div>",s.after(r)}else alert(n.warnings);var a=s.siblings(".fsComment").length;e.text(a+" Comment"+(1!=a?"s":"")),i.val(""),t.prop("disabled",!1)}}))}),o&&a.onFilter(i,o,function(e,n){var o=g[i];n.categoryIDs&&(o.filters.category_ids=n.categoryIDs.length?n.categoryIDs:void 0),s.has(n,"keywords")&&(o.filters.keywords=n.keywords.length?n.keywords:void 0),s.has(n,"rangeStart")&&(o.filters.start_date=n.rangeStart?n.rangeStart.format(f):void 0),s.has(n,"rangeEnd")&&(o.filters.end_date=n.rangeEnd?n.rangeEnd.format(f):void 0),c.loadingOverlay(t.find(d)),c.fetchElementHTML(i,o.filters).done(function(){a.triggerUpdated(i,o.filters,e)})}),n(e).resize()}var n=t.$,s=t._,o=t.getInternalNS("elements.constants.classes"),r=t.events,a=t.getInternalNS("elements.linkedEvents"),l=t.getInternalNS("elements.constants.selectors"),c=t.getInternalNS("elements.utils"),d=l.elementContent,h="News",u=o.stateExpanded,f="YYYY-MM-DD",p=o.stateSelected,m=n(document.body),g={};r.onElementAdded(h,i),r.onElementUpdated(h,i),r.onElementDialogShown(h,i),n(".fs"+h).each(function(){var t=n(this);g[c.getElementID(t)]={filters:{}},i(t)}),m.on("click",'.fsNewsPostLink[href="#"]',function(t){var e=n(this),i=e.closest("article"),s=c.getElement(e),o=i.data("news-id");return t.preventDefault(),s.data("linked-element-ids")?(c.populateLinkedElements(s,{news_id:o}),c.updateURLParams({virtualParam:i.data("post-lookup")})):c.showElementPopupDialog(s,{news_id:o,page_id:c.getPageID(),show_post:!0},h,e),!1})}(FS,window),function(t){"use strict";function e(t){t.hasClass("fsCategoryFilter")?i(t):t.hasClass("fsSearch")&&s.setupSearch(t)}function i(t){var e=t.data("linked-element-ids");e&&(a.setupSelectAllButtons(t,".fsElementContent"),t.on("click",".fsStyleUpdateButton",function(){r.triggerFilter(a.getElementID(t),{categoryIDs:t.find("input:checked").map(function(){return this.value}).get()})}))}var n=t.$,s=t.getInternalNS("elements.element_tools.utils"),o=t.getNS("events"),r=t.getInternalNS("elements.linkedEvents"),a=t.getInternalNS("elements.utils"),l="NewsTools";o.onElementAdded(l,e),o.onElementUpdated(l,e),n(".fs"+l).each(function(){e(n(this))})}(FS),function(t){"use strict";function e(){var t=!!window.location.hash&&window.location.hash.match(/^#fs-panel-([0-9_]+)$/);return!!t&&t[1]}function i(t){var i=t.find("> "+p+" > .fsPanel.fsStateOpen:first");if(t.children(p).children(".fsTabsNav").children(x).removeClass(g),i.length)o(C+c(i)).addClass(g);else if(t.hasClass(S)&&t.find("ul.fsTabsNav:not(:hidden)").length){var n=e(),s=t.find("> "+p+" > #fsEl_"+n+".fsPanel");if(n&&s.addClass(v).length)o(C+n).addClass(g),r.triggerElementShown(s);else{var a=t.find("> "+p+" > .fsPanel:first");a.addClass(v),o(C+c(a)).addClass(g),r.triggerElementShown(a)}}}function n(t){var n,g=o(t),b=g.hasClass(S),w=g.data("one-panel");if(g.on("click","> "+p+" > .fsTabsNav > "+x+" > a",function(t){t.preventDefault();var e=o(this),n=d(e.parent()),s=l(n),a=g.find(y+":first");g.children(p).children(".fsPanel").removeClass(v),s.addClass(v),i(g),r.triggerElementHidden(a),r.triggerElementShown(s)}).on("click","> "+p+" > .fsPanel > header",function(){var t=o(this),e=t.parent();if(w){var n=g.find(y);if(n.length&&(s(n),c(n)==c(e)))return!1}return s(e),i(g),!1}).on("click","> "+p+" > .fsAddPanel, .fsAddPanelGroupTab:first",function(){var t=o(this),e=t.parents(_).first(),n=e.hasClass(S),s=c(e),r=e.children(p).children(".fsPanel").last(),l=e.children(p).children(".fsTabsNav").children(x).last(),d=l.clone(),g=t.html();t.prop(f,!0).html(m),h(s,r.length>0?c(r):0,!0).always(function(){t.prop(f,!1).html(g)}).done(function(s){var h=o(s).addClass(v),f=c(h);n?(e.children(p).children(".fsPanel").removeClass(v),h.insertAfter(r)):t.before(h),d.attr("id","fsTab-"+f),d.find("a").attr("href","#fs-panel-"+c(h)).html(h.data("title")),d.insertAfter(l),h.find(p).sortable(a.SORTABLE_CONFIG),u("element:create",f),n&&i(e)})}),b)i(g);else{var k=e();if(k){var C=g.find("#fsEl_"+k);C.find(p).is(":hidden")&&C.find("> header").click()}n=g.find(y),n.length&&r.triggerElementShown(n)}a.inComposeMode()&&a.makePanelGroupTabsSortable(g)}function s(t){t.find("> "+p).slideToggle({always:function(){var t=o(this);t.is(":hidden")&&t.css("display","")}}),t.toggleClass(v),r["triggerElement"+(t.hasClass(v)?"Shown":"Hidden")](t)}var o=t.$,r=t.events,a=t.getInternalNS("elements.utils"),l=a.getElementByID,c=a.getElementID,d=a.getTabID,h=a.createElement,u=a.notifyAdminInterface,f="disabled",p=".fsElementContent",m='<div class="fsLoadingDots"></div>',g="fsStateSelected",v="fsStateOpen",y="> "+p+" > .fsPanel."+v,b="panel",w="panelgroup",_=".fsPanelGroup",k="fsTabsNavItem",x="."+k,C="#fsTab-",S="fsTabs";r.onElementAdded(w,n),r.onElementUpdated(w,n),r.onElementUpdated(b,function(t){0==t.siblings(".fsPanel."+v).length&&(t.addClass(v),r.triggerElementShown(t)),o(C+c(t)).find("a").html(t.data("title"))}),r.onElementMoved(b,function(t,e){var i=c(t),n=e.length?c(e):0,s=o(C+i);return!!s&&void(0==n?s.parent().prepend(s):o(C+n).after(s))}),r.onElementDeleted(b,function(t){o(C+c(t)).remove()}),r.onElementShown(b,function(t){var e=t.find(_);e.length&&e.each(function(){i(o(this))})}),o(window).resize(t._.debounce(function(){o(_).each(function(){i(o(this))})},250)),o(_).each(function(){n(o(this))})}(FS,window),function(t){"use strict";var e=t.$;e(".fsPersonalReports").on("click","a",function(){return t.util.popup("/cf_group/report.cfm?reportid="+e(this).data("report-id"),"personalReportsPopup",700,600),!1})}(FS),function(t){"use strict";function e(){var t=s(b);t.find(r.SORTABLE_SELECTOR).addBack(r.SORTABLE_SELECTOR).sortable(r.SORTABLE_CONFIG),r.makeSubelementsSortable(t,g+".fsStateEditable")}function i(t){var e=t.find(g+'[data-matched="true"]').first();t.find(g).each(function(){var t=s(this);t.toggleClass(y,r.inDraftMode()&&!t.is(e))})}function n(t){var n=s(t);n.find(".fsAddPanel").click(function(){var t=s(this),e=t.parents(b).first(),o=c(e),a=e.children(u).children(g).last(),l=t.html();t.prop(h,!0).html(f),d(o,a.length>0?c(a):0,!0).always(function(){t.prop(h,!1).html(l)}).done(function(e){var o=s(e).addClass(p);t.before(o),i(n),o.find(u).sortable(r.SORTABLE_CONFIG),r.notifyAdminInterface("element:create",c(o))})}),i(n),e()}var s=t.$,o=t.events,r=t.getInternalNS("elements.utils"),a=t.getInternalNS("elements.constants.classes"),l=t.getInternalNS("elements.constants.selectors"),c=r.getElementID,d=r.createElement,h="disabled",u=l.elementContent,f='<div class="fsLoadingDots"></div>',p=a.stateOpen,m="PersonalizationPanel",g=".fsPersonalizationPanelElement",v="Personalization",y="fsPersonalizationHiddenPanel",b=".fsPersonalizationElement.fsStateEditable";o.onElementAdded(v,n),o.onElementUpdated(v,n),o.onElementUpdated(m,function(t){i(t.parents(b)),e()}),o.onElementMoved(m,function(t){i(t.parents(b))}),s(b).each(function(){n(s(this))})}(FS,window),function(t){"use strict";function e(t){return{draft_page:m.inDraftMode(),element_id:m.getElementID(t),page_id:t.closest("body").data("pageid")}}function i(t,i,n){var o=t.closest(b).prev("article").data("post-id"),r=a("<div/>",{"class":c.loadingDots});t.append(r),a.get("/fs/post-manager/posts/"+o+"/comments",a.extend(e(i),{comments_date:n,is_popup:!!t.closest("dialog").length})).done(function(e){s(e,t)}).fail(function(){window.alert("There was an error retrieving the comments. Please try again.")}).always(function(){r.remove()})}function n(t,e){var i,n="";return null!=t.author_cf_id&&t.author_avatar_hash&&(n=g({avatar_hash:t.author_avatar_hash,cf_id:t.author_cf_id})),i=a(v({author:t.author,avatar:n,body:t.formatted_body,datetime:t.created_at,formattedDate:t.formatted_date,formattedTime:t.formatted_time})),e&&i.addClass("fsNewComment"),i}function s(t,e){var i=a();if(!e.find(".fsCommentForm").length){var s=a('<div class="fsCommentForm" />');if(!m.inDraftMode()){var o=a('<textarea class="fsMyComment fsStyleDefaultTextarea" placeholder="Comment..."/>\t\t\t\t\t<button class="fsPostComment fsStyleUpdateButton">Comment</button>'),r=m.getElement(e).attr("id").split("_").splice(1).join("_");a(C).length?s.append(o):e.closest(b).prev("article").data("authenticated-comments")||(s.append('<label for="fsPostElementMyCommentNameField'+r+'" class="fsFieldLabel fsMyCommentFieldName">Name</label>\t\t\t\t\t\t\t<input id="fsPostElementMyCommentNameField'+r+'" class="fsMyCommentName fsStyleDefaultField">\t\t\t\t\t\t\t<label for="fsPostElementMyCommentEmailField'+r+'" class="fsFieldLabel fsMyCommentFieldEmail">Email</label>\t\t\t\t\t\t\t<input id="fsPostElementMyCommentEmailField'+r+'" class="fsMyCommentEmail fsStyleDefaultField">'),s.append(o))}e.prepend(s)}l.each(t,function(t){i=i.add(n(t,!1))}),e.append(i),e.next(p.loadMoreButton).remove(),10==t.length&&e.after(y({commentsDate:t[t.length-1].created_at}))}function o(s){var o=m.getElementID(s),r=m.getQueryStringValues(),g=s.data("trigger-element-ids");s.on("click",p.elementContent+">"+p.loadMoreButton,function(){var e=a(this),i=s.find(p.elementContent),n=l.clone(f[m.getElementID(s)]),o=e.data("start-row");o&&(n.start_row=o),m.loadingOverlay(i),m.loadElementData(s,n).done(function(n){var o=a(n),r=o.find(".fsListItems").children(),l=o.find(".fsLoadMoreButton");i.siblings(p.loadingDotsOverlay).remove(),i.find(".fsListItems").append(r),e.replaceWith(l),s.addClass(c.loadMoreClicked),e.remove(),t.util.updateDynamicImages(r),h.triggerElementMoreLoaded(s,r)})}).on("click",".fsCommentCount",function(){var t=a(this),e=t.next(".fsCommentList");e.toggleClass(_),e.next(p.loadMoreButton).toggleClass(c.stateHidden),t.toggleClass(x,e.hasClass(_)),e.hasClass(_)&&!e.find("div.fsComment").length&&i(e,s)}).on("click",".fsPostComment",function(){var t=a(this),i=t.closest(b).prev("article"),o=t.parent(),r=o.find(".fsMyComment"),l=t.add(r),c=o.find(".fsMyCommentName").val(),d=o.find(".fsMyCommentEmail").val(),h=r.val();return i.data("authenticated-comments")||a(C).length||c.length&&d.length?h?(l.attr("disabled","disabled"),void a.when(m.getToken()).then(function(o){a.post("/fs/post-manager/posts/"+i.data("post-id")+"/comments.json",a.extend(e(s),{authenticity_token:o,author_email:d,author_name:c,body:h,is_popup:!!t.closest("dialog").length})).done(function(e){var i=t.closest(".fsCommentForm");e.pending_approval?i.next(".fsCommentPendingApproval").length||i.after(a("<p>",{"class":"fsCommentPendingApproval fsNotification",text:"Your comment is pending approval."})):i.after(n(e,!0)),r.val("")}).fail(function(t){var e="",i=t.responseJSON;i&&(i.message&&(e=". "+i.message),i.length&&(e=": "+i.join(". "))),window.alert("There was a problem posting your comment"+e+". Please try again.")}).always(function(){l.removeAttr("disabled")})})):void window.alert("Comment text is required."):void window.alert("Name and Email are required.")}).on("click",b+" "+p.loadMoreButton,function(){i(a(this).prev(".fsCommentList"),s,a(this).data("comments-date"))}).on("submit",".fsCommentLoginForm",function(){var t=a(this);return t.find('input[name="login_destination"]').length||(t.append(a("<input>",{name:"login_destination",type:"hidden",value:window.location.pathname})),t.append(a("<input>",{name:"failure_redirect_to_login",type:"hidden",value:!0}))),m.loginFormSubmitHandler.bind(this)()}).on("click",".fsPostLink[data-slug][data-opens-in=element]",function(){var t=a(this),e=t.closest("article").data("post-id");return m.populateLinkedElements(s,{element_id:m.getElementID(s),page_id:m.getPageID(),post_id:e}),m.updateURLParams({virtualParam:"/~board/"+t.data("slug")}),!1}).on("click",".fsRSSIcon",function(){var t=a(this);return d.showBoardAlertsDialog(o,t.data("boards"),"fsRSSFeed",t),!1}).on("click",".fsAlertsIcon",function(){var t=a(this);return d.showBoardAlertsDialog(o,t.data("boards"),S,t),!1}).on("click",".fsPostLink[data-opens-in=popup]",function(){var t=a(this),e=t.closest("article").data("post-id");return m.showElementPopupDialog(m.getElement(t),{is_popup:!0,post_id:e,show_post:!0},w+"Element",t),!1}),g&&u.onFilter(o,g,function(t,e){var i=s.data("board-id");f[o]=l.defaults({board_id:i,current_post_id:s.find("article").first().data("post-id"),end_date:e.rangeEnd?e.rangeEnd.format(k):null,issue_id:e.issue_id,keywords:e.keywords,post_category_id:e.post_category_id,preview:e.preview,start_date:e.rangeStart?e.rangeStart.format(k):null,tag_id:e.tag_id},f[o]),f[o]=l.omit(f[o],function(t){return!t}),m.loadingOverlay(s.find(p.elementContent)),m.fetchElementHTML(o,l.extend({navigate:e.navigate},f[o])).done(function(){u.triggerUpdated(o,null,t)}).fail(function(i){e.navigate&&404==i.status&&(s.find(".fsLoadingDotsOverlay").remove(),u.triggerUpdated(o,{navigationFailed:e.navigate},t))})}),r.showBoardAlertsDialog&&d.showBoardAlertsDialog(o,s.find(".fsAlertsIcon").data("boards"),S,s),m.adjustMediaAspectRatio(s),m.inDraftMode()&&a(".fsAlertsIcon").addClass("fsStateDisabled").prop("disabled",!0).attr("aria-label","This feature is not accessible in the admin view. To subscribe, please use the published view.")}function r(t){var e=m.getElementID(t);f[e]={},t.data("category-id")>0&&(f[e].post_category_id=t.data("category-id")),t.data("tag-ids")>0&&(f[e].tag_id=t.data("tag-ids")),t.data("issue-id")>0&&(f[e].issue_id=t.data("issue-id"))}var a=t.$,l=t._,c=t.getInternalNS("elements.constants.classes"),d=t.getInternalNS("dialogs"),h=t.events,u=t.getInternalNS("elements.linkedEvents"),f={},p=t.getInternalNS("elements.constants.selectors"),m=t.getInternalNS("elements.utils"),g=l.template('<img class="fsAvatar" src="/cf_social/serveAvatar.cfm?id=<%= cf_id%>&auth_code=<%= avatar_hash%>">'),v=l.template('<div class="fsCommentContainer fsStyleAutoclear">\t\t\t\t<div class="fsCommentDetails">\t\t\t\t\t<%= avatar%>\t\t\t\t\t<span class="fsName"><%= author%></span>\t\t\t\t\t<span class="fsSeparator">-</span>\t\t\t\t\t<span class="fsDateTime">\t\t\t\t\t\t<time class="fsDate" datetime="<%= datetime %>"><%= formattedDate%></time>\t\t\t\t\t\t<time class="fsTime" datetime="<%= datetime %>"><%= formattedTime%></time>\t\t\t\t\t</span>\t\t\t\t</div>\t\t\t\t<div class="fsComment"><%= body%></div>\t\t\t</div>'),y=l.template('<button class="fsLoadMoreButton" data-comments-date="<%= commentsDate%>">Load More</button>'),b=".fsComments",w="Post",_=c.stateExpanded,k="YYYY-MM-DD",x=c.stateSelected,C="#fsAccountBar",S="fsBoardSubscriptions";h.onElementAdded(w,o),h.onElementUpdated(w,o),h.onElementDialogShown(w,o),h.onElementUpdated(w,function(t){m.populateLinkedElements(t,{element_id:m.getElementID(t),page_id:m.getPageID(),post_id:t.find(p.elementContent+" > article").data("post-id")})}),a(".fs"+w+"Element").each(function(){var t=a(this);o(t),r(t)})}(FS,window),function(t){"use strict";function e(t){t.hasClass("fsCategoryFilter")||t.hasClass("fsTagFilter")?i(t):t.hasClass("fsSearch")?a.setupSearch(t):t.hasClass("fsNavigation")&&n(t)}function i(t){var e=d.getElementID(t);t.on("click",".fsCategoryLink",function(){var i=o(this),n=i.data("category-id"),r={element_id:e,post_category_id:n},a=d.getCurrentHistoryState();return a[e]&&a[e].post_category_id==n||(d.updateQueryStringValueAndHistory(r),s(t,r)),!1}),t.on("click",".fsTagLink",function(){var i=o(this),n=i.data("tag-id"),r={element_id:e,tag_id:n},a=d.getCurrentHistoryState();return a[e]&&a[e].tag_id==n||(d.updateQueryStringValueAndHistory(r),s(t,r)),!1}),o(window).off("popstate.element_"+e).on("popstate.element_"+e,function(i){var n=i.originalEvent.state;h.didChangeState(e)&&s(t,n?n[e]:null)})}function n(t){var e=d.getElementID(t);t.on("click",".fsPreviousButton",function(){t.find(".fsNotification").remove(),c.triggerFilter(d.getElementID(t),{element_id:e,navigate:"previous"})}),t.on("click",".fsNextButton",function(){t.find(".fsNotification").remove(),c.triggerFilter(d.getElementID(t),{element_id:e,navigate:"next"})}),c.onUpdated(e,t.data("linked-element-ids"),function(e,i){t.find(".fsNotification").remove(),i&&i.navigationFailed&&t.find(r.selectors.elementContent).append(o('<div class="fsNotification">No '+i.navigationFailed+" post available</div>"))})}function s(t,e){var i=d.getElementID(t),n=e||{element_id:i,post_category_id:"",tag_id:""},s=n.hasOwnProperty("tag_id")?"tag_id":"post_category_id";h.addState(i,n),n[s]=n[s]||"",c.triggerFilter(i,n),t.find(".fsToolsList > li").removeClass(r.classes.stateSelected).find("["+("tag_id"==s?"data-tag-id":"data-category-id")+'="'+n[s]+'"]').closest("li").addClass(r.classes.stateSelected)}var o=t.$,r=t.getInternalNS("elements.constants"),a=t.getInternalNS("elements.element_tools.utils"),l=t.getNS("events"),c=t.getInternalNS("elements.linkedEvents"),d=t.getInternalNS("elements.utils"),h=new d.ElementHistory,u="PostTools";l.onElementAdded(u,e),l.onElementUpdated(u,e),o(".fs"+u+"Element").each(function(){e(o(this))})}(FS),function(t){"use strict";function e(t){t&&t.data("autoplay")&&t[0].play()}function i(t,e,i,n,s,o){var r={display_in_dialog:!0,element_id:n,page_id:s,post_id:o,resource:i},a=e.data(),l="resource"+a.resourceType+"LightboxDisplay";d.trackResourceEvent(l,a.resourceTitle,i),d.showElementPopupDialog(t,r,h+"Element",e),t.hasClass("fsStatePlaying")&&e.hasClass("fsResourceLink")&&t.find(".fsSlideshowPause").trigger("click")}function n(n){var s=d.getElementID(n),a=n.data("linked-element-ids"),h=n.data("source-element-id"),f=n.data("source-page-id"),p=n.data("source-post-id"),m=n.data("trigger-element-ids");n.on("click","a[data-resource-uuid]",function(){var t=o(this),e=t.data("resource-uuid"),r={display_in_element:!0,element_id:h,page_id:f,post_id:p,resource:e};if(!t.closest("figcaption, .fsDescription").length||t.hasClass("fsResourceLink"))return a?l.triggerFilter(s,r):i(n,t,e,h,f,p),!1}).on("click","a[data-resource-collection-id]",function(){var t=o(this),e=t.data("resource-collection-id"),i=t.data("collection-loading"),u=n.hasClass("fsListNav"),m=t.parentsUntil(n).filter("ul").length+1,g={depth:m,display_in_element:!0,element_id:h,page_id:f,post_id:p,resource_collection:e};return t.data("collection-navigates")&&(i?t.closest("li").toggleClass(r.stateExpanded):(t.data("collection-loading",!0),d.loadingOverlay(n.find(c.elementContent)),d.fetchElementHTML(s,g,{updateDOM:!u}).done(function(e){if(u){var i=o(e).find(".fsElementContent > ul");0==i.length&&(i=o('<ul class="fsStyleDefaultList"><li class="fsListItem"><div class="fsNotification"></div></li></ul>'),i.find(".fsNotification").text(o(e).find(".fsElementEmpty").text())),t.closest("li").append(i).addClass(r.stateExpanded),d.removeLoadingOverlay(n)}else d.updateURLParams({virtualParam:"/~resource-collection/"+t.data("resource-collection-id")})}))),a&&l.triggerFilter(s,g),!1}).on("click",".fsElementPagination a",function(){var t=n.find(c.elementContent),e={element_id:h,page_id:f,post_id:p,resource_collection:n.data("resource-collection-id")};return e["element_"+s+"_page"]=o(this).data("page"),d.loadingOverlay(t),d.updateQueryStringValueAndHistory(e),d.fetchElementHTML(s,e),!1}).on("click",".fsResourceLink",function(){var e,i=o(this).data();t._.includes(["Document","Pdf","Raw"],i.resourceType)&&(e="resource"+i.resourceType+"Download",d.trackResourceEvent(e,i.resourceTitle,i.resourceUuid))}),n.hasClass(u)||n.find("audio, video").on("play pause",function(t){var e=o(t.target),i=e.data(),n=t.type.charAt(0).toUpperCase()+t.type.slice(1),s=e.is("video")?"resourceVideo"+n:"resourceAudioPlay"+n;d.trackResourceEvent(s,i.resourceTitle,i.resourceUuid)}),m&&l.onFilter(s,m,function(t,o){var r=n.hasClass("fsSingleItem"),h=o.hasOwnProperty("resource_collection")&&r,u=o.hasOwnProperty("resource")&&!r&&t!=s;return u?void i(n,n,o.resource,t,f,p):void(h||a&&t==s||(d.loadingOverlay(n.find(c.elementContent)),d.fetchElementHTML(s,o).done(function(){e(d.getElementByID(s).find("audio, video").first()),l.triggerUpdated(s,null,t)})))}),n.find("picture img").each(function(){var t=o(this).data(),e="resourceSingleImageDisplay";n.hasClass(u)?e="resourceSlideshowImageDisplay":n.hasClass("fsGrid")&&(e="resourceGridImageDisplay"),d.trackResourceEvent(e,t.resourceTitle,t.resourceUuid)})}function s(t){var i,n,s=o(".fsResource.fsElementDialog");i=t.find("audio, video").first(),n=t.find("img[data-image-sizes]"),e(i),s.toggleClass("fsResourceAudioOnly",i&&"AUDIO"==i.prop("tagName")),n.length&&o(window).trigger("resize",{forceUpdate:!0})}var o=t.$,r=t.getInternalNS("elements.constants.classes"),a=t.events,l=t.getInternalNS("elements.linkedEvents"),c=t.getInternalNS("elements.constants.selectors"),d=t.getInternalNS("elements.utils"),h="Resource",u="fsSlideshow";a.onElementAdded(h,n),a.onElementUpdated(h,n),a.onElementDialogShown(h,s),o(".fs"+h+"Element").each(function(){var t=o(this);n(t)})}(FS),function(t,e){"use strict";function i(t,e,i,s,o){var r,d="",h="";if(0==t.hits.length)o.prepend(a);else{r=t.hits,o.prepend(c(n(r.shift()))),m.each(r,function(t){d+=c(n(t))}),i.prepend(d);for(var u=1;u<=t.nbPages;u++)h+=l({count:u,selected:t.page==u-1});e.html(h),s.html("About "+t.nbHits+" results ("+t.processingTimeMS+" milliseconds)")}}function n(t){return t.fileType="",t.titleBlock=d,t.snippet=s(t),t.pageURL=e.location.protocol+"//"+e.location.hostname+t.page_path,t}function s(t){for(var e=b.length,i=t._snippetResult,n=0;n<e;n++){var s=i[b[n]];if(s&&s.value&&"none"!=s.matchLevel)return s.value}}function o(t,e,n,s,o,r,a){a.find(".gsc-webResult").remove(),s.empty().data("searchterm",t),r.empty();var l=algoliasearch(n.data("app-id"),n.data("api-key")),c=l.initIndex(n.data("index"));c.search(t,{highlightPostTag:"</strong>",highlightPreTag:"<strong>",hitsPerPage:10,maxValuesPerFacet:100,page:e,restrictSearchableAttributes:["content","title"],snippetEllipsisText:"&hellip;"}).then(function(t){i(t,s,o,r,a)},function(){alert("Error, please try again.")})}function r(t){var e=t.find(".gsst_a"),i=t.find(".gsc-cursor-box"),n=t.find(".gsc-expansionArea"),s=t.find("input.gsc-input"),r=t.find(".gsc-result-info"),a=t.find(".gsc-results"),l=t.find(".gsc-control-cse[data-displaypart=2]").length,c=w.getQueryStringValues(),d=!!c.q&&decodeURIComponent(c.q.replace(/\+/g,"%20"));e.length&&(e.hide(),e.click(function(){s.val(""),e.hide()}),s.keyup(function(){e.toggle(s.val().length>0)})),a.length&&d&&(s.length&&(s.val(d),e.show()),o(d,0,t,i,n,r,a)),t.find(".gsc-search-box").submit(function(){return!l||(o(s.val(),0,t,i,n,r,a),!1)}),i.on("click",".gsc-cursor-page",function(){var e=Number(g(this).html());o(i.data("searchterm"),e-1,t,i,n,r,a)})}function a(t){return h||(h=m.template(g("#fsSearchNoResultsTemplate").html())),h(t)}function l(t){return u||(u=m.template(g("#fsSearchPagingTemplate").html())),u(t)}function c(t){return f||(f=m.template(g("#fsSearchResultTemplate").html())),f(t)}function d(t){return p||(p=m.template(g("#fsSearchTitleBlock").html())),p(t)}var h,u,f,p,m=t._,g=t.$,v="Search",y=t.events,b=["title","content"],w=t.getInternalNS("elements.utils");y.onElementAdded(v,r),y.onElementUpdated(v,r),g(".fsSearch").each(function(){r(g(this))})}(FS,window),function(t){"use strict";function e(t){t.find(k+", "+x+", "+C).empty()}function i(t){if(!t.data(b)){var e=algoliasearch(t.data(v),t.data(g));t.data(b,e.initIndex(t.data(w)+"pages"))}return t.data(b)}function n(t){for(var e=t._snippetResult,i=0;i<A;i++)for(var n=0;n<L;n++){var s=e[I[n]];if(s&&s.value&&s.matchLevel==M[i])return s.value}}function s(t,e){var i=window.location.protocol+"//"+window.location.hostname;return"pages"==e?i+t.page_path:"resources"==e?i+t.view_url:i+"/fs/pages/search-results-item/"+e.slice(0,-1)+"/"+t.id}function o(t,e){return 1==t?e:e+"s"}function r(t,e){var i=t.find(y),r=t.find(x);r.empty(),i.empty(),e.userData&&u.each(e.userData,function(e){i.append(N(t,".fsSearchCustomResultTemplate")(e))}),t.find(k).html(N(t,".fsSearchResultInfoTemplate")({label:o(e[m],"result"),timing:e[p]+" "+o(e[p],"millisecond"),total:e[m]})),e[m]>0&&u.each(e.hits,function(e){r.append(N(t,".fsSearchResultTemplate")({snippet:n(e),title:e.page_name,url:s(e,"pages")}))}),O.pagination(t.find(C),e.page+1,e[m],e.hitsPerPage),r.removeClass(E.classes.stateHidden)}function a(t){return function(e,i,n){t.search(e,$).then(function(t){n(t.hits)})}}function l(t,n,s){var o=i(t);return n=f.trim(n),0==n.length?e(t):(t.data(_,n),void o.search(n,u.defaults({page:s||0},$)).then(function(e){r(t,e)},function(){alert("Error, please try again.")}))}function c(t){t.hasClass("fsSearchForm")?d(t):t.hasClass("fsList")&&h(t)}function d(t){var e=t.data(g),i=O.getElementID(t),o=t.data("linked-element-ids"),r=t.find(".fsStyleSearchField"),l=t.find(".fsButtonClear"),c=function(){l.toggleClass(E.classes.stateHidden,""==r.val())};if(o){var d=O.getElementByID(o[0]);d.length&&t.on("submit","form",function(){return P.triggerFilter(i,{query:f("#fsSearchInput_"+i).val()}),!1})}if(e){var h=t.data(v),u=[{highlight:!0,minLength:2}],p=O.inDraftMode(),m=t.data(w);e.pages&&u.push({async:!0,display:"page_name",limit:3,name:"pages",source:a(algoliasearch(h,e.pages).initIndex(m+"pages")),templates:{header:"Pages",suggestion:function(e){return N(t,".fsSearchSuggestionTemplate")({snippet:n(e),title:e.page_name,url:s(e,"pages")})}}}),e.posts&&u.push({async:!0,display:"title",limit:3,name:"posts",source:a(algoliasearch(h,e.posts).initIndex(m+"posts")),templates:{header:"Posts",suggestion:function(e){return N(t,".fsSearchSuggestionTemplate")({snippet:n(e),title:e.title,url:""})}}}),e.resources&&u.push({async:!0,display:"title",limit:3,name:"resources",source:a(algoliasearch(h,e.resources).initIndex(m+"resources")),templates:{header:"Resources",suggestion:function(e){return N(t,".fsSearchSuggestionTemplate")({snippet:n(e),title:e.filename,url:""})}}}),r.typeahead.apply(r,u),r.on("typeahead:select",function(t,e,i){p&&"pages"==i?O.notifyAdminInterface("page:show",{pageID:e.page_id}):p?window.open(s(e,i),"_blank"):window.location=s(e,i)})}r.on("keyup click change",function(){c()}),l.on("click",function(){r.val(""),c()})}function h(t){var e=O.getElementID(t),i=t.data(_),n=t.data("trigger-element-ids");n&&P.onFilter(e,n,function(e,i){l(t,i.query)}),i&&l(t,i),t.on("click",C+" a",function(){return l(t,t.data(_),f(this).data("page")-1),!1})}var u=t._,f=t.$,p="processingTimeMS",m="nbHits",g="api-key",v="app-id",y=".fsSearchCustomResults",b="algolia-index",w="index-prefix",_="search-term",k=".fsSearchResultInfo",x=".fsListItems",C=".fsElementPagination",S="Search",T=t.getInternalNS("elements"),E=T.constants,D=t.events,P=T.linkedEvents,M=["full","partial","none"],A=M.length,I=["title","content"],L=I.length,j={interpolate:/{(.+?)}/g},O=T.utils,$={highlightPostTag:"</span>",highlightPreTag:'<span class="fsSearchResultMatch">',hitsPerPage:10,page:0,snippetEllipsisText:"&hellip;"},N=u.memoize(function(t,e){return u.template(t.find(e).html(),j)},function(t,e){return e+O.getElementID(t)});f(".fsSearchElement").each(function(){c(f(this))}),D.onElementAdded(S,c),D.onElementUpdated(S,c)}(FS),function(t,e,i){"use strict";function n(t){return t.find("article.slick-active audio, article.slick-active video")}function s(e){return t(e.currentTarget).find("article.slick-active picture img")}function o(t,e){var i;1==e&&(i=n(t),i.each(r))}function r(e,i){var n,s=t(i).data();s.autoplay&&(n="VIDEO"==i.tagName?"Video":"Audio",g[s.resourceUuid]||(g[s.resourceUuid]=!0,m.trackResourceEvent("resourceSlideshow"+n+"Autoplay",s.resourceTitle,s.resourceUuid)),i.play(!0))}function a(t){t.hasClass(_)&&h(t)}function l(e){e.find(k).each(function(){h(t(this))})}function c(e){t(e).find(".fsElementSlideshow").each(function(){var e=t(this).get(0).slick;e&&(e.setPosition(),e.slickGoTo(0,!0))})}function d(e){e.each(function(){var e=t(this).children().not("fieldset");e.height(t(FS._.max(e,function(e){return t(e).height()})).height())})}function h(e,i){var r=e.find("img[data-image-sizes], video"),a=e.find(".fsElementSlideshow"),l=a.data("arrows"),c=a.data("autoplay"),h=a.data("fade"),_=!1,k=a.data("slides-to-show"),x=!1,C=a.data("vertical");return r.length&&!i?void f(e,r):(C&&d(a),a.on("init",function(){o(a,k)}),a.on("click",".fsSlideshowPlay, .fsSlideshowPause",function(){var e=t(this).hasClass("fsSlideshowPlay"),i=t(this).closest(e?y:w);x=!e,i.removeClass(e?v:b),i.addClass(e?b:v),a.slick(e?"slickPlay":"slickPause"),e&&_&&(_=!1,a.slick("slickNext")),1==k&&n(a).each(function(){this[e?"play":"pause"]()}),i.find(".fsSlideshowPause").attr("aria-hidden",!e).toggleClass(p.stateHidden),i.find(".fsSlideshowPlay").attr("aria-hidden",e).toggleClass(p.stateHidden)}),a.on("beforeChange",function(){n(a).each(function(){this.paused||this.pause()})}),a.on("afterChange",function(){a.closest(w).length&&o(a,k),s(a).each(function(){var e=t(this).data();g[e.resourceUuid]||(g[e.resourceUuid]=!0,m.trackResourceEvent("resourceSlideshowImageDisplay",e.resourceTitle,e.resourceUuid))}),setTimeout(function(){u(a)},10)}),a.find("audio, video").on("playing",function(){a.slick("slickPause")}).on("ended",function(){c&&(x?_=!0:(1==k&&a.slick("slickNext"),a.slick("slickPlay")))}),a.slick({accessibility:!0,adaptiveHeight:a.data("adaptive-height"),arrows:l,autoplay:c,autoplaySpeed:a.data("autoplay-speed"),dots:a.data("dots"),dotsClass:"fsPager",fade:h,infinite:!0,nextArrow:l?e.find(".fsNextButton"):"",prevArrow:l?e.find(".fsPrevButton"):"",slide:"article",slidesToScroll:k,slidesToShow:k,vertical:C&&!h}),u(a),void(r.length&&t(window).trigger("resize")))}function u(t){var e=t.closest(k);t.find(".slick-track").attr("aria-label",e.attr("aria-label")||"Slideshow"),t.find(".fsPager li").removeAttr("role"),t.find(".fsPager button").removeAttr("role")}function f(e,i){var n=i.map(function(){var e=t(this),i=t.Deferred();return"VIDEO"==e.prop("tagName")?4==e[0].readyState?i.resolve():e.one("loadedmetadata",function(){i.resolve()}):e.data("image-loaded")?i.resolve():e.one("image:loaded",function(){i.resolve()}),i}).get();t.when.apply(null,n).then(function(){h(e,!0)})}var p=FS.getInternalNS("elements.constants.classes"),m=FS.getInternalNS("elements.utils"),g={},v="fsStatePaused",y="."+v,b="fsStatePlaying",w="."+b,_="fsSlideshow",k="."+_;i.each(["News","Calendar","Feeds","Post","Resource","Issue"],function(t){e.onElementAdded(t,a),e.onElementUpdated(t,a)}),e.onElementShown("Panel",c),e.onElementUpdated(e.ALL_CONTAINERS_TYPE,l),l(t(document.body))}(FS.$,FS.events,FS._),function(t,e,i){"use strict";function n(e){var i,n="https://graph.facebook.com/",s=e.data();s.id&&(i=e.find(".fsElementContent"),""==s.accesstoken&&i.html(a("Unable to connect to Facebook at this time. Please try refreshing in a couple of minutes.")),t.ajax({data:{fields:h,limit:s.maxposts},dataType:"jsonp",url:n+s.id+"/"+s.posttype+"?access_token="+s.accesstoken,error:function(){i.html(a("An error occurred while connecting to the Facebook API"))},success:function(e){var n="https://www.facebook.com/"+s.id;if(e.error)i.html(a("The specified page is not available"));else{e.link&&(n=e.link);var o,r,l,c,d=0,h=t("<ul>",{"class":"fsFacebookList"}),u=t('<li class="fsFacebookListItem"></li>');for(e=e.data;d<e.length;d++){if(u.html('<span class="fsFacebookFrom">'+e[d].from.name+"</span>"),e[d].to&&e[d].to.name&&u.append(' <strong>to</strong> <span class="fsFacebookTo">'+e[d].to.name+"</span>"),e[d].message){c=e[d].message.match(/https?:\/\/[^\s|"|'|>]*/i),l=e[d].message.replace("<","&lt;"),l=l.replace(">","&gt;");for(r in c)"index"!=r&&"input"!=r&&"lastIndex"!=r&&(l=l.replace(c[r],'<a href="'+c[r]+'" target="_blank">'+c[r]+"</a>"));u.append("&nbsp;"+l)}switch(o=!1,l=t("<div>",{"class":"fsFacebookExtras fsStyleAutoclear"}),e[d].picture&&(l.append('<img class="fsFacebookThumb" src="'+e[d].picture+'">'),
o=!0),e[d].type){case"link":case"photo":case"video":e[d].name?(l.append('<a target="_blank" class="fsFacebookTitle" href="'+e[d].link+'">'+e[d].name+"</a>"),o=!0):e[d].link&&(l.append('<a target="_blank" class="fsFacebookTitle" href="'+e[d].link+'">'+e[d].link+"</a>"),o=!0)}e[d].caption&&(l.append('<div class="fsFacebookCaption">'+e[d].caption+"</div>"),o=!0),e[d].description&&(l.append('<div class="fsFacebookDesc">'+e[d].description+"</div>"),o=!0),e[d].likes&&e[d].likes.data&&(l.append('<div class="fsFacebookLikes">'+e[d].likes.data.length+" likes</div>"),o=!0),o&&u.append(l),u.clone().appendTo(h)}t('<li class="fsFacebookFollow"><a href="'+n+'" target="_blank">View facebook page</a></li>').appendTo(h),i.html(h)}}}))}function s(e){function n(t){l(o,i.location.protocol+"//player.vimeo.com/video/"+t+"?byline=0&api=1",r.title)}function s(e){t.ajax({dataType:"jsonp",url:i.location.protocol+"//vimeo.com/api/v2/"+e+r.id+"/videos.json",error:function(){o.html(a("An error occurred while connecting to the Vimeo API"))},success:function(i){var s,l,c=0;if(i.length){if(n(i[0].id),!r.mostrecent){for(s=t('<ul class="fsVimeoList">'),l=t('<li class="fsVimeoListItem fsStyleAutoclear"><img class="fsVimeoThumb"><div class="fsVimeoTitle"></div><div class="fsVimeoViews"></div><div class="fsVimeoDesc"></div></li>');c<i.length&&(l.find("img").attr({alt:i[c].title,src:i[c].thumbnail_medium,title:i[c].title}),l.find(".fsVimeoViews").html(i[c].stats_number_of_plays+" views"),l.find(".fsVimeoTitle").html(i[c].title),l.find(".fsVimeoDesc").html(i[c].description),l.clone().click(function(){n(i[t(this).index()].id)}).appendTo(s),c!=r.maxvideos-1);c++);t('<li class="vimeo_view_link"><a href="https://www.vimeo.com/'+e.replace(/(channel|group)/,"$1s")+r.id+'" class="fsStyleDefaultButton" target="_blank">View on vimeo</a></li>').appendTo(s),o.append(s)}}else o.html(a("No videos found"))}})}var o,r=e.data();if(r.id&&r.videotype)switch(o=e.find(".fsElementContent"),r.videotype){case"album":s("album/");break;case"channel":s("channel/");break;case"group":s("group/");break;case"user":s("");break;case"video":n(r.id)}}function o(e){var n,s=e.data(),o=function(e){r(e.data.video,!0),t(e.originalEvent.target).closest(".fsElement")[0].scrollIntoView()},r=function(t,e){l(n,i.location.protocol+"//www.youtube.com/embed/"+t+"?enablejsapi=1"+(e?"&autoplay=1":"")+"&origin="+i.location.protocol+i.location.hostname,s.title)},c=function(e,i){t.ajax({dataType:"jsonp",url:"https://www.googleapis.com/youtube/v3/"+e+"?"+i,data:{alt:"json",key:u,maxResults:s.mostrecent?1:s.maxvideos,order:"date",part:"channels"==e?"id":"snippet",type:"video"},error:function(){n.html(a("An error occurred while connecting to the YouTube API"))},success:function(e){var i;if(e.error){var s=e.error.errors.map(function(t){return t.reason+": "+t.message});n.html(a(s.join("<br>")))}if("youtube#channelListResponse"==e.kind)return void(e.items.length?c("search","channelId="+e.items[0].id):n.html(a("No channels found for the specified user")));if(e.items.length){if(r(e.items[0].id.videoId||e.items[0].snippet.resourceId.videoId),e.items.length>1){var l=t("<ul>",{"class":"fsYoutubeList"});for(i=0;i<e.items.length;i++){var d=t("<li>",{"class":"fsYoutubeListItem fsStyleAutoclear"});d.append(t("<img>",{"class":"fsYoutubeThumb fsStyleFloatLeft",src:e.items[i].snippet.thumbnails["default"].url})),d.append(t("<div>",{"class":"fsYoutubeTitle",text:e.items[i].snippet.title})),d.append(t("<div>",{"class":"fsYoutubeDesc",text:e.items[i].snippet.description})),d.click({video:e.items[i].id.videoId||e.items[i].snippet.resourceId.videoId},o),l.append(d)}n.append(l)}}else n.html(a("No videos found"))}})};if(s.id)switch(n=e.find(".fsElementContent"),s.videotype){case"channel":c("search","channelId="+s.id);break;case"playlist":c("playlistItems","playlistId="+s.id);break;case"user":c("channels","forUsername="+s.id);break;case"video":r(s.id)}}function r(t){return Math.round(t/16*9)}function a(t){return'<div class="fsElementEmpty">'+t+"</div>"}function l(t,e,i){var n=t.find("iframe"),s='<iframe class="fsSocialVideoFrame" type="text/html" height="'+r(t.width())+'" src="'+e+'" webkitAllowFullScreen mozallowfullscreen allowFullScreen title="'+(i||"Embedded video player")+'"></iframe>';n.length?n.replaceWith(s):t.html(s)}function c(t){t.hasClass("fsFacebook")?n(t):t.hasClass("fsVimeo")?s(t):t.hasClass("fsYoutube")&&o(t)}function d(e){e.find(".fsVimeo, .fsYoutube").each(function(){var e=t(this).find("iframe");e.height(r(e.outerWidth()))})}var h="caption,description,from,likes,link,message,name,picture,to,type",u="AIzaSyDZOIEiCKAvQN4NM-pPOIjRpwPU5gslVdg";t(function(){t(".fsFacebook, .fsVimeo, .fsYoutube").each(function(){c(t(this))})}),e.onElementUpdated("facebook",c),e.onElementUpdated("vimeo",c),e.onElementUpdated("youtube",c),e.onElementShown("panel",d),t(i).resize(function(){d(t("body"))})}(FS.$,FS.events,window),function(t){"use strict";function e(t){var e=t.find("> .fsElementContent");e.data("ui-tabs")?e.tabs("refresh"):e.tabs({activate:function(t,e){o.triggerElementHidden(e.oldPanel),o.triggerElementShown(e.newPanel)}}),r.inComposeMode()&&t.find(".ui-tabs-nav").sortable({axis:"x",items:"> li:not(:has(> .fsAddTab))",beforeActivate:function(t){t.preventDefault()},update:function(t,e){var i=s(e.item);r.moveBehind(i,i.prev(),i.closest(".fsElement"))}})}var i="tab",n="tabs",s=t.$,o=t.events,r=t.getInternalNS("elements.utils");o.onElementUpdated(n,e),o.onElementUpdated(n,e),o.onElementUpdated(i,function(t){var i=t.parent().find("#fsTab_"+r.getElementID(t)+" > a"),n=t.data("title");i.text(n),t.find("> .fsElementActionButtonContainer").remove(),e(t.closest(".fsTabs"))}),o.onElementAdded(i,function(t){t.closest(".fsElementContent").tabs({active:-1})}),s(".fsTabs:not(.fsPanelGroup)").each(function(){e(s(this))})}(FS),function(t,e){"use strict";function i(){var t=s.template('<div class="fsMessagesNotifications">\t\t\t\t\t<h2>Notifications</h2>\t\t\t\t\t<iframe src="/fs/dialogs/notifications" frameborder="0"></iframe>\t\t\t\t</div>');return t()}var n,s=t._,o=t.$,r=t.getInternalNS("managers.messages"),a=t.getInternalNS("dialogs");r.showNotificationsModal=function(){return n||(n=a.Dialog({id:"fsMessagesNotifications",removeOnClose:!1}),n.setContent(i())),n.open(o(e.body)),!1}}(FS,document),function(t){"use strict";function e(t){return t.find(u+":checked").val()}function i(t){n(t),t.find(u).change(function(){n(t)}),l.showNotificationsModal&&a.showNotificationsModal(),t.find(".fsUnsubscribeButton").click(function(){var i=window.location.href,n=i.substr(i.lastIndexOf("/")+1);return 0!=e(t)?null:(o.loadingOverlay(t.find(h.elementContent)),void s.getJSON("/fs/comms-manager/unsubscribe/"+n).error(function(t){window.alert(t.responseJSON.message)}).done(function(){t.find(".fsUnsubscribeSuccessNotification").removeClass(f),t.find(".fsUnsubscribeForm").addClass(f)}).always(function(){o.removeLoadingOverlay(t)}))}),t.find(".fsManagePreferencesButton").click(function(){o.isLoggedIn()?a.showNotificationsModal():window.location="/fs/login?login_destination=/fs/pages/unsubscribe?showNotificationsModal=true"})}function n(t){var i=e(t);t.find("div.fsUnsubscribeFromList > div.fsNotification").toggleClass(f,0!=i),t.find("div.fsUnsubscribeFromAll > div.fsNotification").toggleClass(f,1!=i)}var s=t.$,o=t.getInternalNS("elements.utils"),r=t.getNS("events"),a=t.getInternalNS("managers.messages"),l=o.getQueryStringValues(),c="UnsubscribeForm",d=t.getInternalNS("elements.constants.classes"),h=t.getInternalNS("elements.constants.selectors"),u='input[name="fsUnsubscribeOptions"]',f=d.stateHidden;r.onElementAdded(c,i),r.onElementUpdated(c,i),s(".fs"+c+"Element").each(function(){i(s(this))})}(FS),/*!
 * jsTree {{VERSION}}
 * http://jstree.com/
 *
 * Copyright (c) 2014 Ivan Bozhanov (http://vakata.com)
 *
 * Licensed same as jquery - under the terms of the MIT License
 *   http://www.opensource.org/licenses/mit-license.php
 */
/*!
 * if using jslint please allow for the jQuery global and use following options: 
 * jslint: browser: true, ass: true, bitwise: true, continue: true, nomen: true, plusplus: true, regexp: true, unparam: true, todo: true, white: true
 */
function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports?require("jquery"):jQuery)}(function(t,e){"use strict";if(!t.jstree){var i,n,s=0,o=!1,r=!1,a=!1,l=[],c=t("script:last").attr("src"),d=document,h=d.createElement("LI");h.setAttribute("role","treeitem"),i=d.createElement("I"),i.className="jstree-icon jstree-ocl",i.setAttribute("role","presentation"),h.appendChild(i),i=d.createElement("A"),i.className="jstree-anchor",i.setAttribute("href","#"),i.setAttribute("tabindex","-1"),n=d.createElement("I"),n.className="jstree-icon jstree-themeicon",n.setAttribute("role","presentation"),i.appendChild(n),h.appendChild(i),i=n=null,t.jstree={version:"{{VERSION}}",defaults:{plugins:[]},plugins:{},path:c&&c.indexOf("/")!==-1?c.replace(/\/[^\/]+$/,""):"",idregex:/[\\:&!^|()\[\]<>@*'+~#";.,=\- \/${}%?`]/g},t.jstree.create=function(e,i){var n=new t.jstree.core(++s),o=i;return i=t.extend(!0,{},t.jstree.defaults,i),o&&o.plugins&&(i.plugins=o.plugins),t.each(i.plugins,function(t,e){"core"!==t&&(n=n.plugin(e,i[e]))}),n.init(e,i),n},t.jstree.destroy=function(){t(".jstree:jstree").jstree("destroy"),t(document).off(".jstree")},t.jstree.core=function(t){this._id=t,this._cnt=0,this._wrk=null,this._data={core:{themes:{name:!1,dots:!1,icons:!1},selected:[],last_error:{},working:!1,worker_queue:[],focused:null}}},t.jstree.reference=function(e){var i=null,n=null;if(e&&e.id&&(e=e.id),!n||!n.length)try{n=t(e)}catch(t){}if(!n||!n.length)try{n=t("#"+e.replace(t.jstree.idregex,"\\$&"))}catch(t){}return n&&n.length&&(n=n.closest(".jstree")).length&&(n=n.data("jstree"))?i=n:t(".jstree").each(function(){var n=t(this).data("jstree");if(n&&n._model.data[e])return i=n,!1}),i},t.fn.jstree=function(i){var n="string"==typeof i,s=Array.prototype.slice.call(arguments,1),o=null;return!(i===!0&&!this.length)&&(this.each(function(){var r=t.jstree.reference(this),a=n&&r?r[i]:null;if(o=n&&a?a.apply(r,s):null,r||n||i!==e&&!t.isPlainObject(i)||t(this).data("jstree",new t.jstree.create(this,i)),(r&&!n||i===!0)&&(o=r||!1),null!==o&&o!==e)return!1}),null!==o&&o!==e?o:this)},t.expr[":"].jstree=t.expr.createPseudo(function(){return function(i){return t(i).hasClass("jstree")&&t(i).data("jstree")!==e}}),t.jstree.defaults.core={data:!1,strings:!1,check_callback:!1,error:t.noop,animation:200,multiple:!0,themes:{name:!1,url:!1,dir:!1,dots:!0,icons:!0,stripes:!1,variant:!1,responsive:!1},expand_selected_onload:!0,worker:!0,force_text:!1,dblclick_toggle:!0},t.jstree.core.prototype={plugin:function(e,i){var n=t.jstree.plugins[e];return n?(this._data[e]={},n.prototype=this,new n(i,this)):this},init:function(e,i){this._model={data:{"#":{id:"#",parent:null,parents:[],children:[],children_d:[],state:{loaded:!1}}},changed:[],force_full_redraw:!1,redraw_timeout:!1,default_state:{loaded:!0,opened:!1,selected:!1,disabled:!1}},this.element=t(e).addClass("jstree jstree-"+this._id),this.settings=i,this._data.core.ready=!1,this._data.core.loaded=!1,this._data.core.rtl="rtl"===this.element.css("direction"),this.element[this._data.core.rtl?"addClass":"removeClass"]("jstree-rtl"),this.element.attr("role","tree"),this.settings.core.multiple&&this.element.attr("aria-multiselectable",!0),this.element.attr("tabindex")||this.element.attr("tabindex","0"),this.bind(),this.trigger("init"),this._data.core.original_container_html=this.element.find(" > ul > li").clone(!0),this._data.core.original_container_html.find("li").addBack().contents().filter(function(){return 3===this.nodeType&&(!this.nodeValue||/^\s+$/.test(this.nodeValue))}).remove(),this.element.html("<ul class='jstree-container-ul jstree-children' role='group'><li id='j"+this._id+"_loading' class='jstree-initial-node jstree-loading jstree-leaf jstree-last' role='tree-item'><i class='jstree-icon jstree-ocl'></i><a class='jstree-anchor' href='#'><i class='jstree-icon jstree-themeicon-hidden'></i>"+this.get_string("Loading ...")+"</a></li></ul>"),this.element.attr("aria-activedescendant","j"+this._id+"_loading"),this._data.core.li_height=this.get_container_ul().children("li").first().height()||24,this.trigger("loading"),this.load_node("#")},destroy:function(t){if(this._wrk)try{window.URL.revokeObjectURL(this._wrk),this._wrk=null}catch(t){}t||this.element.empty(),this.teardown()},teardown:function(){this.unbind(),this.element.removeClass("jstree").removeData("jstree").find("[class^='jstree']").addBack().attr("class",function(){return this.className.replace(/jstree[^ ]*|$/gi,"")}),this.element=null},bind:function(){var e="",i=null,n=0;this.element.on("dblclick.jstree",function(){if(document.selection&&document.selection.empty)document.selection.empty();else if(window.getSelection){var t=window.getSelection();try{t.removeAllRanges(),t.collapse()}catch(t){}}}).on("mousedown.jstree",t.proxy(function(t){t.target===this.element[0]&&(t.preventDefault(),n=+new Date)},this)).on("mousedown.jstree",".jstree-ocl",function(t){t.preventDefault()}).on("click.jstree",".jstree-ocl",t.proxy(function(t){this.toggle_node(t.target)},this)).on("dblclick.jstree",".jstree-anchor",t.proxy(function(t){this.settings.core.dblclick_toggle&&this.toggle_node(t.target)},this)).on("click.jstree",".jstree-anchor",t.proxy(function(e){e.preventDefault(),e.currentTarget!==document.activeElement&&t(e.currentTarget).focus(),this.activate_node(e.currentTarget,e)},this)).on("keydown.jstree",".jstree-anchor",t.proxy(function(e){if("INPUT"===e.target.tagName)return!0;var i=null;switch(this._data.core.rtl&&(37===e.which?e.which=39:39===e.which&&(e.which=37)),e.which){case 32:e.ctrlKey&&(e.type="click",t(e.currentTarget).trigger(e));break;case 13:e.type="click",t(e.currentTarget).trigger(e);break;case 37:e.preventDefault(),this.is_open(e.currentTarget)?this.close_node(e.currentTarget):(i=this.get_parent(e.currentTarget),i&&"#"!==i.id&&this.get_node(i,!0).children(".jstree-anchor").focus());break;case 38:e.preventDefault(),i=this.get_prev_dom(e.currentTarget),i&&i.length&&i.children(".jstree-anchor").focus();break;case 39:e.preventDefault(),this.is_closed(e.currentTarget)?this.open_node(e.currentTarget,function(t){this.get_node(t,!0).children(".jstree-anchor").focus()}):this.is_open(e.currentTarget)&&(i=this.get_node(e.currentTarget,!0).children(".jstree-children")[0],i&&t(this._firstChild(i)).children(".jstree-anchor").focus());break;case 40:e.preventDefault(),i=this.get_next_dom(e.currentTarget),i&&i.length&&i.children(".jstree-anchor").focus();break;case 106:this.open_all();break;case 36:e.preventDefault(),i=this._firstChild(this.get_container_ul()[0]),i&&t(i).children(".jstree-anchor").filter(":visible").focus();break;case 35:e.preventDefault(),this.element.find(".jstree-anchor").filter(":visible").last().focus()}},this)).on("load_node.jstree",t.proxy(function(e,i){i.status&&("#"!==i.node.id||this._data.core.loaded||(this._data.core.loaded=!0,this._firstChild(this.get_container_ul()[0])&&this.element.attr("aria-activedescendant",this._firstChild(this.get_container_ul()[0]).id),this.trigger("loaded")),this._data.core.ready||setTimeout(t.proxy(function(){if(!this.get_container_ul().find(".jstree-loading").length){if(this._data.core.ready=!0,this._data.core.selected.length){if(this.settings.core.expand_selected_onload){var e,i,n=[];for(e=0,i=this._data.core.selected.length;e<i;e++)n=n.concat(this._model.data[this._data.core.selected[e]].parents);for(n=t.vakata.array_unique(n),e=0,i=n.length;e<i;e++)this.open_node(n[e],!1,0)}this.trigger("changed",{action:"ready",selected:this._data.core.selected})}this.trigger("ready")}},this),0))},this)).on("keypress.jstree",t.proxy(function(n){if("INPUT"===n.target.tagName)return!0;i&&clearTimeout(i),i=setTimeout(function(){e=""},500);var s=String.fromCharCode(n.which).toLowerCase(),o=this.element.find(".jstree-anchor").filter(":visible"),r=o.index(document.activeElement)||0,a=!1;if(e+=s,e.length>1){if(o.slice(r).each(t.proxy(function(i,n){if(0===t(n).text().toLowerCase().indexOf(e))return t(n).focus(),a=!0,!1},this)),a)return;if(o.slice(0,r).each(t.proxy(function(i,n){if(0===t(n).text().toLowerCase().indexOf(e))return t(n).focus(),a=!0,!1},this)),a)return}if(new RegExp("^"+s+"+$").test(e)){if(o.slice(r+1).each(t.proxy(function(e,i){if(t(i).text().toLowerCase().charAt(0)===s)return t(i).focus(),a=!0,!1},this)),a)return;if(o.slice(0,r+1).each(t.proxy(function(e,i){if(t(i).text().toLowerCase().charAt(0)===s)return t(i).focus(),a=!0,!1},this)),a)return}},this)).on("init.jstree",t.proxy(function(){var t=this.settings.core.themes;this._data.core.themes.dots=t.dots,this._data.core.themes.stripes=t.stripes,this._data.core.themes.icons=t.icons,this.set_theme(t.name||"default",t.url),this.set_theme_variant(t.variant)},this)).on("loading.jstree",t.proxy(function(){this[this._data.core.themes.dots?"show_dots":"hide_dots"](),this[this._data.core.themes.icons?"show_icons":"hide_icons"](),this[this._data.core.themes.stripes?"show_stripes":"hide_stripes"]()},this)).on("blur.jstree",".jstree-anchor",t.proxy(function(e){this._data.core.focused=null,t(e.currentTarget).filter(".jstree-hovered").mouseleave(),this.element.attr("tabindex","0")},this)).on("focus.jstree",".jstree-anchor",t.proxy(function(e){var i=this.get_node(e.currentTarget);i&&i.id&&(this._data.core.focused=i.id),this.element.find(".jstree-hovered").not(e.currentTarget).mouseleave(),t(e.currentTarget).mouseenter(),this.element.attr("tabindex","-1")},this)).on("focus.jstree",t.proxy(function(){+new Date-n>500&&!this._data.core.focused&&(n=0,this.get_node(this.element.attr("aria-activedescendant"),!0).find("> .jstree-anchor").focus())},this)).on("mouseenter.jstree",".jstree-anchor",t.proxy(function(t){this.hover_node(t.currentTarget)},this)).on("mouseleave.jstree",".jstree-anchor",t.proxy(function(t){this.dehover_node(t.currentTarget)},this))},unbind:function(){this.element.off(".jstree"),t(document).off(".jstree-"+this._id)},trigger:function(t,e){e||(e={}),e.instance=this,this.element.triggerHandler(t.replace(".jstree","")+".jstree",e)},get_container:function(){return this.element},get_container_ul:function(){return this.element.children(".jstree-children").first()},get_string:function(e){var i=this.settings.core.strings;return t.isFunction(i)?i.call(this,e):i&&i[e]?i[e]:e},_firstChild:function(t){for(t=t?t.firstChild:null;null!==t&&1!==t.nodeType;)t=t.nextSibling;return t},_nextSibling:function(t){for(t=t?t.nextSibling:null;null!==t&&1!==t.nodeType;)t=t.nextSibling;return t},_previousSibling:function(t){for(t=t?t.previousSibling:null;null!==t&&1!==t.nodeType;)t=t.previousSibling;return t},get_node:function(e,i){e&&e.id&&(e=e.id);var n;try{if(this._model.data[e])e=this._model.data[e];else if("string"==typeof e&&this._model.data[e.replace(/^#/,"")])e=this._model.data[e.replace(/^#/,"")];else if("string"==typeof e&&(n=t("#"+e.replace(t.jstree.idregex,"\\$&"),this.element)).length&&this._model.data[n.closest(".jstree-node").attr("id")])e=this._model.data[n.closest(".jstree-node").attr("id")];else if((n=t(e,this.element)).length&&this._model.data[n.closest(".jstree-node").attr("id")])e=this._model.data[n.closest(".jstree-node").attr("id")];else{if(!(n=t(e,this.element)).length||!n.hasClass("jstree"))return!1;e=this._model.data["#"]}return i&&(e="#"===e.id?this.element:t("#"+e.id.replace(t.jstree.idregex,"\\$&"),this.element)),e}catch(t){return!1}},get_path:function(t,e,i){if(t=t.parents?t:this.get_node(t),!t||"#"===t.id||!t.parents)return!1;var n,s,o=[];for(o.push(i?t.id:t.text),n=0,s=t.parents.length;n<s;n++)o.push(i?t.parents[n]:this.get_text(t.parents[n]));return o=o.reverse().slice(1),e?o.join(e):o},get_next_dom:function(e,i){var n;if(e=this.get_node(e,!0),e[0]===this.element[0]){for(n=this._firstChild(this.get_container_ul()[0]);n&&0===n.offsetHeight;)n=this._nextSibling(n);return!!n&&t(n)}if(!e||!e.length)return!1;if(i){n=e[0];do n=this._nextSibling(n);while(n&&0===n.offsetHeight);return!!n&&t(n)}if(e.hasClass("jstree-open")){for(n=this._firstChild(e.children(".jstree-children")[0]);n&&0===n.offsetHeight;)n=this._nextSibling(n);if(null!==n)return t(n)}n=e[0];do n=this._nextSibling(n);while(n&&0===n.offsetHeight);return null!==n?t(n):e.parentsUntil(".jstree",".jstree-node").next(".jstree-node:visible").first()},get_prev_dom:function(e,i){var n;if(e=this.get_node(e,!0),e[0]===this.element[0]){for(n=this.get_container_ul()[0].lastChild;n&&0===n.offsetHeight;)n=this._previousSibling(n);return!!n&&t(n)}if(!e||!e.length)return!1;if(i){n=e[0];do n=this._previousSibling(n);while(n&&0===n.offsetHeight);return!!n&&t(n)}n=e[0];do n=this._previousSibling(n);while(n&&0===n.offsetHeight);if(null!==n){for(e=t(n);e.hasClass("jstree-open");)e=e.children(".jstree-children").first().children(".jstree-node:visible:last");return e}return n=e[0].parentNode.parentNode,!(!n||!n.className||n.className.indexOf("jstree-node")===-1)&&t(n)},get_parent:function(t){return t=this.get_node(t),!(!t||"#"===t.id)&&t.parent},get_children_dom:function(t){return t=this.get_node(t,!0),t[0]===this.element[0]?this.get_container_ul().children(".jstree-node"):!(!t||!t.length)&&t.children(".jstree-children").children(".jstree-node")},is_parent:function(t){return t=this.get_node(t),t&&(t.state.loaded===!1||t.children.length>0)},is_loaded:function(t){return t=this.get_node(t),t&&t.state.loaded},is_loading:function(t){return t=this.get_node(t),t&&t.state&&t.state.loading},is_open:function(t){return t=this.get_node(t),t&&t.state.opened},is_closed:function(t){return t=this.get_node(t),t&&this.is_parent(t)&&!t.state.opened},is_leaf:function(t){return!this.is_parent(t)},load_node:function(e,i){var n,s,o,r,a;if(t.isArray(e))return this._load_nodes(e.slice(),i),!0;if(e=this.get_node(e),!e)return i&&i.call(this,e,!1),!1;if(e.state.loaded){for(e.state.loaded=!1,n=0,s=e.children_d.length;n<s;n++){for(o=0,r=e.parents.length;o<r;o++)this._model.data[e.parents[o]].children_d=t.vakata.array_remove_item(this._model.data[e.parents[o]].children_d,e.children_d[n]);this._model.data[e.children_d[n]].state.selected&&(a=!0,this._data.core.selected=t.vakata.array_remove_item(this._data.core.selected,e.children_d[n])),delete this._model.data[e.children_d[n]]}e.children=[],e.children_d=[],a&&this.trigger("changed",{action:"load_node",node:e,selected:this._data.core.selected})}return e.state.loading=!0,this.get_node(e,!0).addClass("jstree-loading").attr("aria-busy",!0),this._load_node(e,t.proxy(function(t){e=this._model.data[e.id],e.state.loading=!1,e.state.loaded=t;var n=this.get_node(e,!0);e.state.loaded&&!e.children.length&&n&&n.length&&!n.hasClass("jstree-leaf")&&n.removeClass("jstree-closed jstree-open").addClass("jstree-leaf"),n.removeClass("jstree-loading").attr("aria-busy",!1),this.trigger("load_node",{node:e,status:t}),i&&i.call(this,e,t)},this)),!0},_load_nodes:function(t,e,i){var n,s,o=!0,r=function(){this._load_nodes(t,e,!0)},a=this._model.data;for(n=0,s=t.length;n<s;n++)!a[t[n]]||a[t[n]].state.loaded&&i||(this.is_loading(t[n])||this.load_node(t[n],r),o=!1);o&&e&&!e.done&&(e.call(this,t),e.done=!0)},load_all:function(t,e){if(t||(t="#"),t=this.get_node(t),!t)return!1;var i,n,s=[],o=this._model.data,r=o[t.id].children_d;for(t.state&&!t.state.loaded&&s.push(t.id),i=0,n=r.length;i<n;i++)o[r[i]]&&o[r[i]].state&&!o[r[i]].state.loaded&&s.push(r[i]);s.length?this._load_nodes(s,function(){this.load_all(t,e)}):(e&&e.call(this,t),this.trigger("load_all",{node:t}))},_load_node:function(e,i){var n,s=this.settings.core.data;return s?t.isFunction(s)?s.call(this,e,t.proxy(function(n){n===!1&&i.call(this,!1),this["string"==typeof n?"_append_html_data":"_append_json_data"](e,"string"==typeof n?t(n):n,function(t){i.call(this,t)})},this)):"object"==typeof s?s.url?(s=t.extend(!0,{},s),t.isFunction(s.url)&&(s.url=s.url.call(this,e)),t.isFunction(s.data)&&(s.data=s.data.call(this,e)),t.ajax(s).done(t.proxy(function(n,s,o){var r=o.getResponseHeader("Content-Type");return r.indexOf("json")!==-1||"object"==typeof n?this._append_json_data(e,n,function(t){i.call(this,t)}):r.indexOf("html")!==-1||"string"==typeof n?this._append_html_data(e,t(n),function(t){i.call(this,t)}):(this._data.core.last_error={error:"ajax",plugin:"core",id:"core_04",reason:"Could not load node",data:JSON.stringify({id:e.id,xhr:o})},this.settings.core.error.call(this,this._data.core.last_error),i.call(this,!1))},this)).fail(t.proxy(function(t){i.call(this,!1),this._data.core.last_error={error:"ajax",plugin:"core",id:"core_04",reason:"Could not load node",data:JSON.stringify({id:e.id,xhr:t})},this.settings.core.error.call(this,this._data.core.last_error)},this))):(n=t.isArray(s)||t.isPlainObject(s)?JSON.parse(JSON.stringify(s)):s,"#"===e.id?this._append_json_data(e,n,function(t){i.call(this,t)}):(this._data.core.last_error={error:"nodata",plugin:"core",id:"core_05",reason:"Could not load node",data:JSON.stringify({id:e.id})},this.settings.core.error.call(this,this._data.core.last_error),i.call(this,!1))):"string"==typeof s?"#"===e.id?this._append_html_data(e,t(s),function(t){i.call(this,t)}):(this._data.core.last_error={error:"nodata",plugin:"core",id:"core_06",reason:"Could not load node",data:JSON.stringify({id:e.id})},this.settings.core.error.call(this,this._data.core.last_error),i.call(this,!1)):i.call(this,!1):"#"===e.id?this._append_html_data(e,this._data.core.original_container_html.clone(!0),function(t){i.call(this,t)}):i.call(this,!1)},_node_changed:function(t){t=this.get_node(t),t&&this._model.changed.push(t.id)},_append_html_data:function(e,i,n){e=this.get_node(e),e.children=[],e.children_d=[];var s,o,r,a=i.is("ul")?i.children():i,l=e.id,c=[],d=[],h=this._model.data,u=h[l],f=this._data.core.selected.length;for(a.each(t.proxy(function(e,i){s=this._parse_model_from_html(t(i),l,u.parents.concat()),s&&(c.push(s),d.push(s),h[s].children_d.length&&(d=d.concat(h[s].children_d)))},this)),u.children=c,u.children_d=d,o=0,r=u.parents.length;o<r;o++)h[u.parents[o]].children_d=h[u.parents[o]].children_d.concat(d);this.trigger("model",{nodes:d,parent:l}),"#"!==l?(this._node_changed(l),this.redraw()):(this.get_container_ul().children(".jstree-initial-node").remove(),this.redraw(!0)),this._data.core.selected.length!==f&&this.trigger("changed",{action:"model",selected:this._data.core.selected}),n.call(this,!0)},_append_json_data:function(e,i,n,s){e=this.get_node(e),e.children=[],e.children_d=[],i.d&&(i=i.d,"string"==typeof i&&(i=JSON.parse(i))),t.isArray(i)||(i=[i]);var o=null,r={df:this._model.default_state,dat:i,par:e.id,m:this._model.data,t_id:this._id,t_cnt:this._cnt,sel:this._data.core.selected},a=function(t,e){t.data&&(t=t.data);var i,n,s,o,r=t.dat,a=t.par,l=[],c=[],d=[],h=t.df,u=t.t_id,f=t.t_cnt,p=t.m,m=p[a],g=t.sel,v=function(t,i,n){n=n?n.concat():[],i&&n.unshift(i);var s,o,r,a,l=t.id.toString(),c={id:l,text:t.text||"",icon:t.icon===e||t.icon,parent:i,parents:n,children:t.children||[],children_d:t.children_d||[],data:t.data,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(s in h)h.hasOwnProperty(s)&&(c.state[s]=h[s]);if(t&&t.data&&t.data.jstree&&t.data.jstree.icon&&(c.icon=t.data.jstree.icon),t&&t.data&&(c.data=t.data,t.data.jstree))for(s in t.data.jstree)t.data.jstree.hasOwnProperty(s)&&(c.state[s]=t.data.jstree[s]);if(t&&"object"==typeof t.state)for(s in t.state)t.state.hasOwnProperty(s)&&(c.state[s]=t.state[s]);if(t&&"object"==typeof t.li_attr)for(s in t.li_attr)t.li_attr.hasOwnProperty(s)&&(c.li_attr[s]=t.li_attr[s]);if(c.li_attr.id||(c.li_attr.id=l),t&&"object"==typeof t.a_attr)for(s in t.a_attr)t.a_attr.hasOwnProperty(s)&&(c.a_attr[s]=t.a_attr[s]);for(t&&t.children&&t.children===!0&&(c.state.loaded=!1,c.children=[],c.children_d=[]),p[c.id]=c,s=0,o=c.children.length;s<o;s++)r=v(p[c.children[s]],c.id,n),a=p[r],c.children_d.push(r),a.children_d.length&&(c.children_d=c.children_d.concat(a.children_d));return delete t.data,delete t.children,p[c.id].original=t,c.state.selected&&d.push(c.id),c.id},y=function(t,i,n){n=n?n.concat():[],i&&n.unshift(i);var s,o,r,a,l,c=!1;do c="j"+u+"_"+ ++f;while(p[c]);l={id:!1,text:"string"==typeof t?t:"",icon:"object"!=typeof t||t.icon===e||t.icon,parent:i,parents:n,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(s in h)h.hasOwnProperty(s)&&(l.state[s]=h[s]);if(t&&t.id&&(l.id=t.id.toString()),t&&t.text&&(l.text=t.text),t&&t.data&&t.data.jstree&&t.data.jstree.icon&&(l.icon=t.data.jstree.icon),t&&t.data&&(l.data=t.data,t.data.jstree))for(s in t.data.jstree)t.data.jstree.hasOwnProperty(s)&&(l.state[s]=t.data.jstree[s]);if(t&&"object"==typeof t.state)for(s in t.state)t.state.hasOwnProperty(s)&&(l.state[s]=t.state[s]);if(t&&"object"==typeof t.li_attr)for(s in t.li_attr)t.li_attr.hasOwnProperty(s)&&(l.li_attr[s]=t.li_attr[s]);if(l.li_attr.id&&!l.id&&(l.id=l.li_attr.id.toString()),l.id||(l.id=c),l.li_attr.id||(l.li_attr.id=l.id),t&&"object"==typeof t.a_attr)for(s in t.a_attr)t.a_attr.hasOwnProperty(s)&&(l.a_attr[s]=t.a_attr[s]);if(t&&t.children&&t.children.length){for(s=0,o=t.children.length;s<o;s++)r=y(t.children[s],l.id,n),a=p[r],l.children.push(r),a.children_d.length&&(l.children_d=l.children_d.concat(a.children_d));l.children_d=l.children_d.concat(l.children)}return t&&t.children&&t.children===!0&&(l.state.loaded=!1,l.children=[],l.children_d=[]),delete t.data,delete t.children,l.original=t,p[l.id]=l,l.state.selected&&d.push(l.id),l.id};if(r.length&&r[0].id!==e&&r[0].parent!==e){for(n=0,s=r.length;n<s;n++)r[n].children||(r[n].children=[]),p[r[n].id.toString()]=r[n];for(n=0,s=r.length;n<s;n++)p[r[n].parent.toString()].children.push(r[n].id.toString()),m.children_d.push(r[n].id.toString());for(n=0,s=m.children.length;n<s;n++)i=v(p[m.children[n]],a,m.parents.concat()),c.push(i),p[i].children_d.length&&(c=c.concat(p[i].children_d));for(n=0,s=m.parents.length;n<s;n++)p[m.parents[n]].children_d=p[m.parents[n]].children_d.concat(c);o={cnt:f,mod:p,sel:g,par:a,dpc:c,add:d}}else{for(n=0,s=r.length;n<s;n++)i=y(r[n],a,m.parents.concat()),i&&(l.push(i),c.push(i),p[i].children_d.length&&(c=c.concat(p[i].children_d)));for(m.children=l,m.children_d=c,n=0,s=m.parents.length;n<s;n++)p[m.parents[n]].children_d=p[m.parents[n]].children_d.concat(c);o={cnt:f,mod:p,sel:g,par:a,dpc:c,add:d}}return"undefined"!=typeof window&&"undefined"!=typeof window.document?o:void postMessage(o)},l=function(e,i){if(this._cnt=e.cnt,this._model.data=e.mod,i){var s,o,r=e.add,a=e.sel,l=this._data.core.selected.slice(),c=this._model.data;if(a.length!==l.length||t.vakata.array_unique(a.concat(l)).length!==a.length){for(s=0,o=a.length;s<o;s++)t.inArray(a[s],r)===-1&&t.inArray(a[s],l)===-1&&(c[a[s]].state.selected=!1);for(s=0,o=l.length;s<o;s++)t.inArray(l[s],a)===-1&&(c[l[s]].state.selected=!0)}}e.add.length&&(this._data.core.selected=this._data.core.selected.concat(e.add)),this.trigger("model",{nodes:e.dpc,parent:e.par}),"#"!==e.par?(this._node_changed(e.par),this.redraw()):this.redraw(!0),e.add.length&&this.trigger("changed",{action:"model",selected:this._data.core.selected}),n.call(this,!0)};if(this.settings.core.worker&&window.Blob&&window.URL&&window.Worker)try{null===this._wrk&&(this._wrk=window.URL.createObjectURL(new window.Blob(["self.onmessage = "+a.toString()],{type:"text/javascript"}))),!this._data.core.working||s?(this._data.core.working=!0,o=new window.Worker(this._wrk),o.onmessage=t.proxy(function(t){l.call(this,t.data,!0);try{o.terminate(),o=null}catch(t){}this._data.core.worker_queue.length?this._append_json_data.apply(this,this._data.core.worker_queue.shift()):this._data.core.working=!1},this),r.par?o.postMessage(r):this._data.core.worker_queue.length?this._append_json_data.apply(this,this._data.core.worker_queue.shift()):this._data.core.working=!1):this._data.core.worker_queue.push([e,i,n,!0])}catch(t){l.call(this,a(r),!1),this._data.core.worker_queue.length?this._append_json_data.apply(this,this._data.core.worker_queue.shift()):this._data.core.working=!1}else l.call(this,a(r),!1)},_parse_model_from_html:function(e,i,n){n=n?[].concat(n):[],i&&n.unshift(i);var s,o,r,a,l,c=this._model.data,d={id:!1,text:!1,icon:!0,parent:i,parents:n,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(r in this._model.default_state)this._model.default_state.hasOwnProperty(r)&&(d.state[r]=this._model.default_state[r]);if(a=t.vakata.attributes(e,!0),t.each(a,function(e,i){return i=t.trim(i),!i.length||(d.li_attr[e]=i,void("id"===e&&(d.id=i.toString())))}),a=e.children("a").first(),a.length&&(a=t.vakata.attributes(a,!0),t.each(a,function(e,i){i=t.trim(i),i.length&&(d.a_attr[e]=i)})),a=e.children("a").first().length?e.children("a").first().clone():e.clone(),a.children("ins, i, ul").remove(),a=a.html(),a=t("<div />").html(a),d.text=this.settings.core.force_text?a.text():a.html(),a=e.data(),d.data=a?t.extend(!0,{},a):null,d.state.opened=e.hasClass("jstree-open"),d.state.selected=e.children("a").hasClass("jstree-clicked"),d.state.disabled=e.children("a").hasClass("jstree-disabled"),d.data&&d.data.jstree)for(r in d.data.jstree)d.data.jstree.hasOwnProperty(r)&&(d.state[r]=d.data.jstree[r]);a=e.children("a").children(".jstree-themeicon"),a.length&&(d.icon=!a.hasClass("jstree-themeicon-hidden")&&a.attr("rel")),d.state.icon&&(d.icon=d.state.icon),a=e.children("ul").children("li");do l="j"+this._id+"_"+ ++this._cnt;while(c[l]);return d.id=d.li_attr.id?d.li_attr.id.toString():l,a.length?(a.each(t.proxy(function(e,i){s=this._parse_model_from_html(t(i),d.id,n),o=this._model.data[s],d.children.push(s),o.children_d.length&&(d.children_d=d.children_d.concat(o.children_d))},this)),d.children_d=d.children_d.concat(d.children)):e.hasClass("jstree-closed")&&(d.state.loaded=!1),d.li_attr["class"]&&(d.li_attr["class"]=d.li_attr["class"].replace("jstree-closed","").replace("jstree-open","")),d.a_attr["class"]&&(d.a_attr["class"]=d.a_attr["class"].replace("jstree-clicked","").replace("jstree-disabled","")),c[d.id]=d,d.state.selected&&this._data.core.selected.push(d.id),d.id},_parse_model_from_flat_json:function(t,i,n){n=n?n.concat():[],i&&n.unshift(i);var s,o,r,a,l=t.id.toString(),c=this._model.data,d=this._model.default_state,h={id:l,text:t.text||"",icon:t.icon===e||t.icon,parent:i,parents:n,children:t.children||[],children_d:t.children_d||[],data:t.data,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(s in d)d.hasOwnProperty(s)&&(h.state[s]=d[s]);if(t&&t.data&&t.data.jstree&&t.data.jstree.icon&&(h.icon=t.data.jstree.icon),t&&t.data&&(h.data=t.data,t.data.jstree))for(s in t.data.jstree)t.data.jstree.hasOwnProperty(s)&&(h.state[s]=t.data.jstree[s]);if(t&&"object"==typeof t.state)for(s in t.state)t.state.hasOwnProperty(s)&&(h.state[s]=t.state[s]);if(t&&"object"==typeof t.li_attr)for(s in t.li_attr)t.li_attr.hasOwnProperty(s)&&(h.li_attr[s]=t.li_attr[s]);if(h.li_attr.id||(h.li_attr.id=l),t&&"object"==typeof t.a_attr)for(s in t.a_attr)t.a_attr.hasOwnProperty(s)&&(h.a_attr[s]=t.a_attr[s]);for(t&&t.children&&t.children===!0&&(h.state.loaded=!1,h.children=[],h.children_d=[]),c[h.id]=h,s=0,o=h.children.length;s<o;s++)r=this._parse_model_from_flat_json(c[h.children[s]],h.id,n),a=c[r],h.children_d.push(r),a.children_d.length&&(h.children_d=h.children_d.concat(a.children_d));return delete t.data,delete t.children,c[h.id].original=t,h.state.selected&&this._data.core.selected.push(h.id),h.id},_parse_model_from_json:function(t,i,n){n=n?n.concat():[],i&&n.unshift(i);var s,o,r,a,l,c=!1,d=this._model.data,h=this._model.default_state;do c="j"+this._id+"_"+ ++this._cnt;while(d[c]);l={id:!1,text:"string"==typeof t?t:"",icon:"object"!=typeof t||t.icon===e||t.icon,parent:i,parents:n,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(s in h)h.hasOwnProperty(s)&&(l.state[s]=h[s]);if(t&&t.id&&(l.id=t.id.toString()),t&&t.text&&(l.text=t.text),t&&t.data&&t.data.jstree&&t.data.jstree.icon&&(l.icon=t.data.jstree.icon),t&&t.data&&(l.data=t.data,t.data.jstree))for(s in t.data.jstree)t.data.jstree.hasOwnProperty(s)&&(l.state[s]=t.data.jstree[s]);if(t&&"object"==typeof t.state)for(s in t.state)t.state.hasOwnProperty(s)&&(l.state[s]=t.state[s]);if(t&&"object"==typeof t.li_attr)for(s in t.li_attr)t.li_attr.hasOwnProperty(s)&&(l.li_attr[s]=t.li_attr[s]);if(l.li_attr.id&&!l.id&&(l.id=l.li_attr.id.toString()),l.id||(l.id=c),l.li_attr.id||(l.li_attr.id=l.id),t&&"object"==typeof t.a_attr)for(s in t.a_attr)t.a_attr.hasOwnProperty(s)&&(l.a_attr[s]=t.a_attr[s]);if(t&&t.children&&t.children.length){for(s=0,o=t.children.length;s<o;s++)r=this._parse_model_from_json(t.children[s],l.id,n),a=d[r],l.children.push(r),a.children_d.length&&(l.children_d=l.children_d.concat(a.children_d));l.children_d=l.children_d.concat(l.children)}return t&&t.children&&t.children===!0&&(l.state.loaded=!1,l.children=[],l.children_d=[]),delete t.data,delete t.children,l.original=t,d[l.id]=l,l.state.selected&&this._data.core.selected.push(l.id),l.id},_redraw:function(){var t,e,i,n=this._model.force_full_redraw?this._model.data["#"].children.concat([]):this._model.changed.concat([]),s=document.createElement("UL"),o=this._data.core.focused;for(e=0,i=n.length;e<i;e++)t=this.redraw_node(n[e],!0,this._model.force_full_redraw),t&&this._model.force_full_redraw&&s.appendChild(t);this._model.force_full_redraw&&(s.className=this.get_container_ul()[0].className,s.setAttribute("role","group"),this.element.empty().append(s)),null!==o&&(t=this.get_node(o,!0),t&&t.length&&t.children(".jstree-anchor")[0]!==document.activeElement?t.children(".jstree-anchor").focus():this._data.core.focused=null),this._model.force_full_redraw=!1,this._model.changed=[],this.trigger("redraw",{nodes:n})},redraw:function(t){t&&(this._model.force_full_redraw=!0),this._redraw()},draw_children:function(t){var e=this.get_node(t),i=!1,n=!1,s=!1,o=document;if(!e)return!1;if("#"===e.id)return this.redraw(!0);if(t=this.get_node(t,!0),!t||!t.length)return!1;if(t.children(".jstree-children").remove(),t=t[0],e.children.length&&e.state.loaded){for(s=o.createElement("UL"),s.setAttribute("role","group"),s.className="jstree-children",i=0,n=e.children.length;i<n;i++)s.appendChild(this.redraw_node(e.children[i],!0,!0));t.appendChild(s)}},redraw_node:function(e,i,n,s){var o=this.get_node(e),r=!1,a=!1,l=!1,c=!1,d=!1,u=!1,f="",p=document,m=this._model.data,g=!1,v=null,y=0,b=0;if(!o)return!1;if("#"===o.id)return this.redraw(!0);if(i=i||0===o.children.length,e=document.querySelector?this.element[0].querySelector("#"+("0123456789".indexOf(o.id[0])!==-1?"\\3"+o.id[0]+" "+o.id.substr(1).replace(t.jstree.idregex,"\\$&"):o.id.replace(t.jstree.idregex,"\\$&"))):document.getElementById(o.id))e=t(e),n||(r=e.parent().parent()[0],r===this.element[0]&&(r=null),a=e.index()),i||!o.children.length||e.children(".jstree-children").length||(i=!0),i||(l=e.children(".jstree-children")[0]),g=e.children(".jstree-anchor")[0]===document.activeElement,e.remove();else if(i=!0,!n){if(r="#"!==o.parent?t("#"+o.parent.replace(t.jstree.idregex,"\\$&"),this.element)[0]:null,!(null===r||r&&m[o.parent].state.opened))return!1;a=t.inArray(o.id,null===r?m["#"].children:m[o.parent].children)}e=h.cloneNode(!0),f="jstree-node ";for(c in o.li_attr)if(o.li_attr.hasOwnProperty(c)){if("id"===c)continue;"class"!==c?e.setAttribute(c,o.li_attr[c]):f+=o.li_attr[c]}o.a_attr.id||(o.a_attr.id=o.id+"_anchor"),e.setAttribute("aria-selected",!!o.state.selected),e.setAttribute("aria-level",o.parents.length),e.setAttribute("aria-labelledby",o.a_attr.id),o.state.disabled&&e.setAttribute("aria-disabled",!0),o.state.loaded&&!o.children.length?f+=" jstree-leaf":(f+=o.state.opened&&o.state.loaded?" jstree-open":" jstree-closed",e.setAttribute("aria-expanded",o.state.opened&&o.state.loaded)),null!==o.parent&&m[o.parent].children[m[o.parent].children.length-1]===o.id&&(f+=" jstree-last"),e.id=o.id,e.className=f,f=(o.state.selected?" jstree-clicked":"")+(o.state.disabled?" jstree-disabled":"");for(d in o.a_attr)if(o.a_attr.hasOwnProperty(d)){if("href"===d&&"#"===o.a_attr[d])continue;"class"!==d?e.childNodes[1].setAttribute(d,o.a_attr[d]):f+=" "+o.a_attr[d]}if(f.length&&(e.childNodes[1].className="jstree-anchor "+f),(o.icon&&o.icon!==!0||o.icon===!1)&&(o.icon===!1?e.childNodes[1].childNodes[0].className+=" jstree-themeicon-hidden":o.icon.indexOf("/")===-1&&o.icon.indexOf(".")===-1?e.childNodes[1].childNodes[0].className+=" "+o.icon+" jstree-themeicon-custom":(e.childNodes[1].childNodes[0].style.backgroundImage="url("+o.icon+")",e.childNodes[1].childNodes[0].style.backgroundPosition="center center",e.childNodes[1].childNodes[0].style.backgroundSize="auto",e.childNodes[1].childNodes[0].className+=" jstree-themeicon-custom")),this.settings.core.force_text?e.childNodes[1].appendChild(p.createTextNode(o.text)):e.childNodes[1].innerHTML+=o.text,i&&o.children.length&&(o.state.opened||s)&&o.state.loaded){for(u=p.createElement("UL"),u.setAttribute("role","group"),u.className="jstree-children",
c=0,d=o.children.length;c<d;c++)u.appendChild(this.redraw_node(o.children[c],i,!0));e.appendChild(u)}if(l&&e.appendChild(l),!n){for(r||(r=this.element[0]),c=0,d=r.childNodes.length;c<d;c++)if(r.childNodes[c]&&r.childNodes[c].className&&r.childNodes[c].className.indexOf("jstree-children")!==-1){v=r.childNodes[c];break}v||(v=p.createElement("UL"),v.setAttribute("role","group"),v.className="jstree-children",r.appendChild(v)),r=v,a<r.childNodes.length?r.insertBefore(e,r.childNodes[a]):r.appendChild(e),g&&(y=this.element[0].scrollTop,b=this.element[0].scrollLeft,e.childNodes[1].focus(),this.element[0].scrollTop=y,this.element[0].scrollLeft=b)}return o.state.opened&&!o.state.loaded&&(o.state.opened=!1,setTimeout(t.proxy(function(){this.open_node(o.id,!1,0)},this),0)),e},open_node:function(i,n,s){var o,r,a,l;if(t.isArray(i)){for(i=i.slice(),o=0,r=i.length;o<r;o++)this.open_node(i[o],n,s);return!0}if(i=this.get_node(i),!i||"#"===i.id)return!1;if(s=s===e?this.settings.core.animation:s,!this.is_closed(i))return n&&n.call(this,i,!1),!1;if(this.is_loaded(i))a=this.get_node(i,!0),l=this,a.length&&(s&&a.children(".jstree-children").length&&a.children(".jstree-children").stop(!0,!0),i.children.length&&!this._firstChild(a.children(".jstree-children")[0])&&this.draw_children(i),s?(this.trigger("before_open",{node:i}),a.children(".jstree-children").css("display","none").end().removeClass("jstree-closed").addClass("jstree-open").attr("aria-expanded",!0).children(".jstree-children").stop(!0,!0).slideDown(s,function(){this.style.display="",l.trigger("after_open",{node:i})})):(this.trigger("before_open",{node:i}),a[0].className=a[0].className.replace("jstree-closed","jstree-open"),a[0].setAttribute("aria-expanded",!0))),i.state.opened=!0,n&&n.call(this,i,!0),a.length||this.trigger("before_open",{node:i}),this.trigger("open_node",{node:i}),s&&a.length||this.trigger("after_open",{node:i});else{if(this.is_loading(i))return setTimeout(t.proxy(function(){this.open_node(i,n,s)},this),500);this.load_node(i,function(t,e){return e?this.open_node(t,n,s):!!n&&n.call(this,t,!1)})}},_open_to:function(e){if(e=this.get_node(e),!e||"#"===e.id)return!1;var i,n,s=e.parents;for(i=0,n=s.length;i<n;i+=1)"#"!==i&&this.open_node(s[i],!1,0);return t("#"+e.id.replace(t.jstree.idregex,"\\$&"),this.element)},close_node:function(i,n){var s,o,r,a;if(t.isArray(i)){for(i=i.slice(),s=0,o=i.length;s<o;s++)this.close_node(i[s],n);return!0}return i=this.get_node(i),!(!i||"#"===i.id)&&(!this.is_closed(i)&&(n=n===e?this.settings.core.animation:n,r=this,a=this.get_node(i,!0),a.length&&(n?a.children(".jstree-children").attr("style","display:block !important").end().removeClass("jstree-open").addClass("jstree-closed").attr("aria-expanded",!1).children(".jstree-children").stop(!0,!0).slideUp(n,function(){this.style.display="",a.children(".jstree-children").remove(),r.trigger("after_close",{node:i})}):(a[0].className=a[0].className.replace("jstree-open","jstree-closed"),a.attr("aria-expanded",!1).children(".jstree-children").remove())),i.state.opened=!1,this.trigger("close_node",{node:i}),void(n&&a.length||this.trigger("after_close",{node:i}))))},toggle_node:function(e){var i,n;if(t.isArray(e)){for(e=e.slice(),i=0,n=e.length;i<n;i++)this.toggle_node(e[i]);return!0}return this.is_closed(e)?this.open_node(e):this.is_open(e)?this.close_node(e):void 0},open_all:function(t,e,i){if(t||(t="#"),t=this.get_node(t),!t)return!1;var n,s,o,r="#"===t.id?this.get_container_ul():this.get_node(t,!0);if(!r.length){for(n=0,s=t.children_d.length;n<s;n++)this.is_closed(this._model.data[t.children_d[n]])&&(this._model.data[t.children_d[n]].state.opened=!0);return this.trigger("open_all",{node:t})}i=i||r,o=this,r=this.is_closed(t)?r.find(".jstree-closed").addBack():r.find(".jstree-closed"),r.each(function(){o.open_node(this,function(t,n){n&&this.is_parent(t)&&this.open_all(t,e,i)},e||0)}),0===i.find(".jstree-closed").length&&this.trigger("open_all",{node:this.get_node(i)})},close_all:function(e,i){if(e||(e="#"),e=this.get_node(e),!e)return!1;var n,s,o="#"===e.id?this.get_container_ul():this.get_node(e,!0),r=this;if(!o.length){for(n=0,s=e.children_d.length;n<s;n++)this._model.data[e.children_d[n]].state.opened=!1;return this.trigger("close_all",{node:e})}o=this.is_open(e)?o.find(".jstree-open").addBack():o.find(".jstree-open"),t(o.get().reverse()).each(function(){r.close_node(this,i||0)}),this.trigger("close_all",{node:e})},is_disabled:function(t){return t=this.get_node(t),t&&t.state&&t.state.disabled},enable_node:function(e){var i,n;if(t.isArray(e)){for(e=e.slice(),i=0,n=e.length;i<n;i++)this.enable_node(e[i]);return!0}return e=this.get_node(e),!(!e||"#"===e.id)&&(e.state.disabled=!1,this.get_node(e,!0).children(".jstree-anchor").removeClass("jstree-disabled").attr("aria-disabled",!1),void this.trigger("enable_node",{node:e}))},disable_node:function(e){var i,n;if(t.isArray(e)){for(e=e.slice(),i=0,n=e.length;i<n;i++)this.disable_node(e[i]);return!0}return e=this.get_node(e),!(!e||"#"===e.id)&&(e.state.disabled=!0,this.get_node(e,!0).children(".jstree-anchor").addClass("jstree-disabled").attr("aria-disabled",!0),void this.trigger("disable_node",{node:e}))},activate_node:function(t,i){if(this.is_disabled(t))return!1;if(this._data.core.last_clicked=this._data.core.last_clicked&&this._data.core.last_clicked.id!==e?this.get_node(this._data.core.last_clicked.id):null,this._data.core.last_clicked&&!this._data.core.last_clicked.state.selected&&(this._data.core.last_clicked=null),!this._data.core.last_clicked&&this._data.core.selected.length&&(this._data.core.last_clicked=this.get_node(this._data.core.selected[this._data.core.selected.length-1])),this.settings.core.multiple&&(i.metaKey||i.ctrlKey||i.shiftKey)&&(!i.shiftKey||this._data.core.last_clicked&&this.get_parent(t)&&this.get_parent(t)===this._data.core.last_clicked.parent))if(i.shiftKey){var n,s,o=this.get_node(t).id,r=this._data.core.last_clicked.id,a=this.get_node(this._data.core.last_clicked.parent).children,l=!1;for(n=0,s=a.length;n<s;n+=1)a[n]===o&&(l=!l),a[n]===r&&(l=!l),l||a[n]===o||a[n]===r?this.select_node(a[n],!0,!1,i):this.deselect_node(a[n],!0,i);this.trigger("changed",{action:"select_node",node:this.get_node(t),selected:this._data.core.selected,event:i})}else this.is_selected(t)?this.deselect_node(t,!1,i):this.select_node(t,!1,!1,i);else!this.settings.core.multiple&&(i.metaKey||i.ctrlKey||i.shiftKey)&&this.is_selected(t)?this.deselect_node(t,!1,i):(this.deselect_all(!0),this.select_node(t,!1,!1,i),this._data.core.last_clicked=this.get_node(t));this.trigger("activate_node",{node:this.get_node(t)})},hover_node:function(t){if(t=this.get_node(t,!0),!t||!t.length||t.children(".jstree-hovered").length)return!1;var e=this.element.find(".jstree-hovered"),i=this.element;e&&e.length&&this.dehover_node(e),t.children(".jstree-anchor").addClass("jstree-hovered"),this.trigger("hover_node",{node:this.get_node(t)}),setTimeout(function(){i.attr("aria-activedescendant",t[0].id)},0)},dehover_node:function(t){return t=this.get_node(t,!0),!!(t&&t.length&&t.children(".jstree-hovered").length)&&(t.children(".jstree-anchor").removeClass("jstree-hovered"),void this.trigger("dehover_node",{node:this.get_node(t)}))},select_node:function(e,i,n,s){var o,r,a;if(t.isArray(e)){for(e=e.slice(),r=0,a=e.length;r<a;r++)this.select_node(e[r],i,n,s);return!0}return e=this.get_node(e),!(!e||"#"===e.id)&&(o=this.get_node(e,!0),void(e.state.selected||(e.state.selected=!0,this._data.core.selected.push(e.id),n||(o=this._open_to(e)),o&&o.length&&o.attr("aria-selected",!0).children(".jstree-anchor").addClass("jstree-clicked"),this.trigger("select_node",{node:e,selected:this._data.core.selected,event:s}),i||this.trigger("changed",{action:"select_node",node:e,selected:this._data.core.selected,event:s}))))},deselect_node:function(e,i,n){var s,o,r;if(t.isArray(e)){for(e=e.slice(),s=0,o=e.length;s<o;s++)this.deselect_node(e[s],i,n);return!0}return e=this.get_node(e),!(!e||"#"===e.id)&&(r=this.get_node(e,!0),void(e.state.selected&&(e.state.selected=!1,this._data.core.selected=t.vakata.array_remove_item(this._data.core.selected,e.id),r.length&&r.attr("aria-selected",!1).children(".jstree-anchor").removeClass("jstree-clicked"),this.trigger("deselect_node",{node:e,selected:this._data.core.selected,event:n}),i||this.trigger("changed",{action:"deselect_node",node:e,selected:this._data.core.selected,event:n}))))},select_all:function(t){var e,i,n=this._data.core.selected.concat([]);for(this._data.core.selected=this._model.data["#"].children_d.concat(),e=0,i=this._data.core.selected.length;e<i;e++)this._model.data[this._data.core.selected[e]]&&(this._model.data[this._data.core.selected[e]].state.selected=!0);this.redraw(!0),this.trigger("select_all",{selected:this._data.core.selected}),t||this.trigger("changed",{action:"select_all",selected:this._data.core.selected,old_selection:n})},deselect_all:function(t){var e,i,n=this._data.core.selected.concat([]);for(e=0,i=this._data.core.selected.length;e<i;e++)this._model.data[this._data.core.selected[e]]&&(this._model.data[this._data.core.selected[e]].state.selected=!1);this._data.core.selected=[],this.element.find(".jstree-clicked").removeClass("jstree-clicked").parent().attr("aria-selected",!1),this.trigger("deselect_all",{selected:this._data.core.selected,node:n}),t||this.trigger("changed",{action:"deselect_all",selected:this._data.core.selected,old_selection:n})},is_selected:function(t){return t=this.get_node(t),!(!t||"#"===t.id)&&t.state.selected},get_selected:function(e){return e?t.map(this._data.core.selected,t.proxy(function(t){return this.get_node(t)},this)):this._data.core.selected.slice()},get_top_selected:function(e){var i,n,s,o,r=this.get_selected(!0),a={};for(i=0,n=r.length;i<n;i++)a[r[i].id]=r[i];for(i=0,n=r.length;i<n;i++)for(s=0,o=r[i].children_d.length;s<o;s++)a[r[i].children_d[s]]&&delete a[r[i].children_d[s]];r=[];for(i in a)a.hasOwnProperty(i)&&r.push(i);return e?t.map(r,t.proxy(function(t){return this.get_node(t)},this)):r},get_bottom_selected:function(e){var i,n,s=this.get_selected(!0),o=[];for(i=0,n=s.length;i<n;i++)s[i].children.length||o.push(s[i].id);return e?t.map(o,t.proxy(function(t){return this.get_node(t)},this)):o},get_state:function(){var t,e={core:{open:[],scroll:{left:this.element.scrollLeft(),top:this.element.scrollTop()},/*!
					'themes' : {
						'name' : this.get_theme(),
						'icons' : this._data.core.themes.icons,
						'dots' : this._data.core.themes.dots
					},
					*/
selected:[]}};for(t in this._model.data)this._model.data.hasOwnProperty(t)&&"#"!==t&&(this._model.data[t].state.opened&&e.core.open.push(t),this._model.data[t].state.selected&&e.core.selected.push(t));return e},set_state:function(i,n){if(i){if(i.core){var s,o,r,a;if(i.core.open)return t.isArray(i.core.open)?(s=!0,o=!1,r=this,t.each(i.core.open.concat([]),function(e,a){o=r.get_node(a),o&&(r.is_loaded(a)?(r.is_closed(a)&&r.open_node(a,!1,0),i&&i.core&&i.core.open&&t.vakata.array_remove_item(i.core.open,a)):(r.is_loading(a)||r.open_node(a,t.proxy(function(e,s){!s&&i&&i.core&&i.core.open&&t.vakata.array_remove_item(i.core.open,e.id),this.set_state(i,n)},r),0),s=!1))}),s&&(delete i.core.open,this.set_state(i,n)),!1):(delete i.core.open,this.set_state(i,n),!1);if(i.core.scroll)return i.core.scroll&&i.core.scroll.left!==e&&this.element.scrollLeft(i.core.scroll.left),i.core.scroll&&i.core.scroll.top!==e&&this.element.scrollTop(i.core.scroll.top),delete i.core.scroll,this.set_state(i,n),!1;/*!
					if(state.core.themes) {
						if(state.core.themes.name) {
							this.set_theme(state.core.themes.name);
						}
						if(typeof state.core.themes.dots !== 'undefined') {
							this[ state.core.themes.dots ? "show_dots" : "hide_dots" ]();
						}
						if(typeof state.core.themes.icons !== 'undefined') {
							this[ state.core.themes.icons ? "show_icons" : "hide_icons" ]();
						}
						delete state.core.themes;
						delete state.core.open;
						this.set_state(state, callback);
						return false;
					}
					*/
if(i.core.selected)return a=this,this.deselect_all(),t.each(i.core.selected,function(t,e){a.select_node(e)}),delete i.core.selected,this.set_state(i,n),!1;if(t.isEmptyObject(i.core))return delete i.core,this.set_state(i,n),!1}return!t.isEmptyObject(i)||(i=null,n&&n.call(this),this.trigger("set_state"),!1)}return!1},refresh:function(e,i){this._data.core.state=i===!0?{}:this.get_state(),i&&t.isFunction(i)&&(this._data.core.state=i.call(this,this._data.core.state)),this._cnt=0,this._model.data={"#":{id:"#",parent:null,parents:[],children:[],children_d:[],state:{loaded:!1}}};var n=this.get_container_ul()[0].className;e||(this.element.html("<ul class='"+n+"' role='group'><li class='jstree-initial-node jstree-loading jstree-leaf jstree-last' role='treeitem' id='j"+this._id+"_loading'><i class='jstree-icon jstree-ocl'></i><a class='jstree-anchor' href='#'><i class='jstree-icon jstree-themeicon-hidden'></i>"+this.get_string("Loading ...")+"</a></li></ul>"),this.element.attr("aria-activedescendant","j"+this._id+"_loading")),this.load_node("#",function(e,i){i&&(this.get_container_ul()[0].className=n,this._firstChild(this.get_container_ul()[0])&&this.element.attr("aria-activedescendant",this._firstChild(this.get_container_ul()[0]).id),this.set_state(t.extend(!0,{},this._data.core.state),function(){this.trigger("refresh")})),this._data.core.state=null})},refresh_node:function(e){if(e=this.get_node(e),!e||"#"===e.id)return!1;var i=[],n=[];this._data.core.selected.concat([]);n.push(e.id),e.state.opened===!0&&i.push(e.id),this.get_node(e,!0).find(".jstree-open").each(function(){i.push(this.id)}),this._load_nodes(n,t.proxy(function(t){this.open_node(i,!1,0),this.select_node(this._data.core.selected),this.trigger("refresh_node",{node:e,nodes:t})},this))},set_id:function(e,i){if(e=this.get_node(e),!e||"#"===e.id)return!1;var n,s,o=this._model.data;for(i=i.toString(),o[e.parent].children[t.inArray(e.id,o[e.parent].children)]=i,n=0,s=e.parents.length;n<s;n++)o[e.parents[n]].children_d[t.inArray(e.id,o[e.parents[n]].children_d)]=i;for(n=0,s=e.children.length;n<s;n++)o[e.children[n]].parent=i;for(n=0,s=e.children_d.length;n<s;n++)o[e.children_d[n]].parents[t.inArray(e.id,o[e.children_d[n]].parents)]=i;return n=t.inArray(e.id,this._data.core.selected),n!==-1&&(this._data.core.selected[n]=i),n=this.get_node(e.id,!0),n&&n.attr("id",i),delete o[e.id],e.id=i,o[i]=e,!0},get_text:function(t){return t=this.get_node(t),!(!t||"#"===t.id)&&t.text},set_text:function(e,i){var n,s;if(t.isArray(e)){for(e=e.slice(),n=0,s=e.length;n<s;n++)this.set_text(e[n],i);return!0}return e=this.get_node(e),!(!e||"#"===e.id)&&(e.text=i,this.get_node(e,!0).length&&this.redraw_node(e.id),this.trigger("set_text",{obj:e,text:i}),!0)},get_json:function(e,i,n){if(e=this.get_node(e||"#"),!e)return!1;i&&i.flat&&!n&&(n=[]);var s,o,r={id:e.id,text:e.text,icon:this.get_icon(e),li_attr:t.extend(!0,{},e.li_attr),a_attr:t.extend(!0,{},e.a_attr),state:{},data:(!i||!i.no_data)&&t.extend(!0,{},e.data)};if(i&&i.flat?r.parent=e.parent:r.children=[],!i||!i.no_state)for(s in e.state)e.state.hasOwnProperty(s)&&(r.state[s]=e.state[s]);if(i&&i.no_id&&(delete r.id,r.li_attr&&r.li_attr.id&&delete r.li_attr.id,r.a_attr&&r.a_attr.id&&delete r.a_attr.id),i&&i.flat&&"#"!==e.id&&n.push(r),!i||!i.no_children)for(s=0,o=e.children.length;s<o;s++)i&&i.flat?this.get_json(e.children[s],i,n):r.children.push(this.get_json(e.children[s],i));return i&&i.flat?n:"#"===e.id?r.children:r},create_node:function(i,n,s,o,r){if(null===i&&(i="#"),i=this.get_node(i),!i)return!1;if(s=s===e?"last":s,!s.toString().match(/^(before|after)$/)&&!r&&!this.is_loaded(i))return this.load_node(i,function(){this.create_node(i,n,s,o,!0)});n||(n={text:this.get_string("New node")}),"string"==typeof n&&(n={text:n}),n.text===e&&(n.text=this.get_string("New node"));var a,l,c,d;switch("#"===i.id&&("before"===s&&(s="first"),"after"===s&&(s="last")),s){case"before":a=this.get_node(i.parent),s=t.inArray(i.id,a.children),i=a;break;case"after":a=this.get_node(i.parent),s=t.inArray(i.id,a.children)+1,i=a;break;case"inside":case"first":s=0;break;case"last":s=i.children.length;break;default:s||(s=0)}if(s>i.children.length&&(s=i.children.length),n.id||(n.id=!0),!this.check("create_node",n,i,s))return this.settings.core.error.call(this,this._data.core.last_error),!1;if(n.id===!0&&delete n.id,n=this._parse_model_from_json(n,i.id,i.parents.concat()),!n)return!1;for(a=this.get_node(n),l=[],l.push(n),l=l.concat(a.children_d),this.trigger("model",{nodes:l,parent:i.id}),i.children_d=i.children_d.concat(l),c=0,d=i.parents.length;c<d;c++)this._model.data[i.parents[c]].children_d=this._model.data[i.parents[c]].children_d.concat(l);for(n=a,a=[],c=0,d=i.children.length;c<d;c++)a[c>=s?c+1:c]=i.children[c];return a[s]=n.id,i.children=a,this.redraw_node(i,!0),o&&o.call(this,this.get_node(n)),this.trigger("create_node",{node:this.get_node(n),parent:i.id,position:s}),n.id},rename_node:function(e,i){var n,s,o;if(t.isArray(e)){for(e=e.slice(),n=0,s=e.length;n<s;n++)this.rename_node(e[n],i);return!0}return e=this.get_node(e),!(!e||"#"===e.id)&&(o=e.text,this.check("rename_node",e,this.get_parent(e),i)?(this.set_text(e,i),this.trigger("rename_node",{node:e,text:i,old:o}),!0):(this.settings.core.error.call(this,this._data.core.last_error),!1))},delete_node:function(e){var i,n,s,o,r,a,l,c,d,h;if(t.isArray(e)){for(e=e.slice(),i=0,n=e.length;i<n;i++)this.delete_node(e[i]);return!0}if(e=this.get_node(e),!e||"#"===e.id)return!1;if(s=this.get_node(e.parent),o=t.inArray(e.id,s.children),h=!1,!this.check("delete_node",e,s,o))return this.settings.core.error.call(this,this._data.core.last_error),!1;for(o!==-1&&(s.children=t.vakata.array_remove(s.children,o)),r=e.children_d.concat([]),r.push(e.id),c=0,d=r.length;c<d;c++){for(a=0,l=e.parents.length;a<l;a++)o=t.inArray(r[c],this._model.data[e.parents[a]].children_d),o!==-1&&(this._model.data[e.parents[a]].children_d=t.vakata.array_remove(this._model.data[e.parents[a]].children_d,o));this._model.data[r[c]].state.selected&&(h=!0,o=t.inArray(r[c],this._data.core.selected),o!==-1&&(this._data.core.selected=t.vakata.array_remove(this._data.core.selected,o)))}for(this.trigger("delete_node",{node:e,parent:s.id}),h&&this.trigger("changed",{action:"delete_node",node:e,selected:this._data.core.selected,parent:s.id}),c=0,d=r.length;c<d;c++)delete this._model.data[r[c]];return this.redraw_node(s,!0),!0},check:function(e,i,n,s,o){i=i&&i.id?i:this.get_node(i),n=n&&n.id?n:this.get_node(n);var r=e.match(/^move_node|copy_node|create_node$/i)?n:i,a=this.settings.core.check_callback;return"move_node"!==e&&"copy_node"!==e||o&&o.is_multi||i.id!==n.id&&t.inArray(i.id,n.children)!==s&&t.inArray(n.id,i.children_d)===-1?(r&&r.data&&(r=r.data),r&&r.functions&&(r.functions[e]===!1||r.functions[e]===!0)?(r.functions[e]===!1&&(this._data.core.last_error={error:"check",plugin:"core",id:"core_02",reason:"Node data prevents function: "+e,data:JSON.stringify({chk:e,pos:s,obj:!(!i||!i.id)&&i.id,par:!(!n||!n.id)&&n.id})}),r.functions[e]):!(a===!1||t.isFunction(a)&&a.call(this,e,i,n,s,o)===!1||a&&a[e]===!1)||(this._data.core.last_error={error:"check",plugin:"core",id:"core_03",reason:"User config for core.check_callback prevents function: "+e,data:JSON.stringify({chk:e,pos:s,obj:!(!i||!i.id)&&i.id,par:!(!n||!n.id)&&n.id})},!1)):(this._data.core.last_error={error:"check",plugin:"core",id:"core_01",reason:"Moving parent inside child",data:JSON.stringify({chk:e,pos:s,obj:!(!i||!i.id)&&i.id,par:!(!n||!n.id)&&n.id})},!1)},last_error:function(){return this._data.core.last_error},move_node:function(i,n,s,o,r,a){var l,c,d,h,u,f,p,m,g,v,y,b,w,_;if(n=this.get_node(n),s=s===e?0:s,!n)return!1;if(!s.toString().match(/^(before|after)$/)&&!r&&!this.is_loaded(n))return this.load_node(n,function(){this.move_node(i,n,s,o,!0)});if(t.isArray(i)){for(i=i.slice(),l=0,c=i.length;l<c;l++)this.move_node(i[l],n,s,o,r,!0)&&(n=i[l],s="after");return this.redraw(),!0}if(i=i&&i.id?i:this.get_node(i),!i||"#"===i.id)return!1;if(d=(i.parent||"#").toString(),u=s.toString().match(/^(before|after)$/)&&"#"!==n.id?this.get_node(n.parent):n,f=i.instance?i.instance:this._model.data[i.id]?this:t.jstree.reference(i.id),p=!f||!f._id||this._id!==f._id,h=f&&f._id&&d&&f._model.data[d]&&f._model.data[d].children?t.inArray(i.id,f._model.data[d].children):-1,p)return!!this.copy_node(i,n,s,o,r)&&(f&&f.delete_node(i),!0);switch("#"===n.id&&("before"===s&&(s="first"),"after"===s&&(s="last")),s){case"before":s=t.inArray(n.id,u.children);break;case"after":s=t.inArray(n.id,u.children)+1;break;case"inside":case"first":s=0;break;case"last":s=u.children.length;break;default:s||(s=0)}if(s>u.children.length&&(s=u.children.length),!this.check("move_node",i,u,s,{core:!0,is_multi:f&&f._id&&f._id!==this._id,is_foreign:!f||!f._id}))return this.settings.core.error.call(this,this._data.core.last_error),!1;if(i.parent===u.id){for(m=u.children.concat(),g=t.inArray(i.id,m),g!==-1&&(m=t.vakata.array_remove(m,g),s>g&&s--),g=[],v=0,y=m.length;v<y;v++)g[v>=s?v+1:v]=m[v];g[s]=i.id,u.children=g,this._node_changed(u.id),this.redraw("#"===u.id)}else{for(g=i.children_d.concat(),g.push(i.id),v=0,y=i.parents.length;v<y;v++){for(m=[],_=f._model.data[i.parents[v]].children_d,b=0,w=_.length;b<w;b++)t.inArray(_[b],g)===-1&&m.push(_[b]);f._model.data[i.parents[v]].children_d=m}for(f._model.data[d].children=t.vakata.array_remove_item(f._model.data[d].children,i.id),v=0,y=u.parents.length;v<y;v++)this._model.data[u.parents[v]].children_d=this._model.data[u.parents[v]].children_d.concat(g);for(m=[],v=0,y=u.children.length;v<y;v++)m[v>=s?v+1:v]=u.children[v];for(m[s]=i.id,u.children=m,u.children_d.push(i.id),u.children_d=u.children_d.concat(i.children_d),i.parent=u.id,g=u.parents.concat(),g.unshift(u.id),_=i.parents.length,i.parents=g,g=g.concat(),v=0,y=i.children_d.length;v<y;v++)this._model.data[i.children_d[v]].parents=this._model.data[i.children_d[v]].parents.slice(0,_*-1),Array.prototype.push.apply(this._model.data[i.children_d[v]].parents,g);"#"!==d&&"#"!==u.id||(this._model.force_full_redraw=!0),this._model.force_full_redraw||(this._node_changed(d),this._node_changed(u.id)),a||this.redraw()}return o&&o.call(this,i,u,s),this.trigger("move_node",{node:i,parent:u.id,position:s,old_parent:d,old_position:h,is_multi:f&&f._id&&f._id!==this._id,is_foreign:!f||!f._id,old_instance:f,new_instance:this}),!0},copy_node:function(i,n,s,o,r,a){var l,c,d,h,u,f,p,m,g,v,y;if(n=this.get_node(n),s=s===e?0:s,!n)return!1;if(!s.toString().match(/^(before|after)$/)&&!r&&!this.is_loaded(n))return this.load_node(n,function(){this.copy_node(i,n,s,o,!0)});if(t.isArray(i)){for(i=i.slice(),l=0,c=i.length;l<c;l++)h=this.copy_node(i[l],n,s,o,r,!0),h&&(n=h,s="after");return this.redraw(),!0}if(i=i&&i.id?i:this.get_node(i),!i||"#"===i.id)return!1;switch(m=(i.parent||"#").toString(),g=s.toString().match(/^(before|after)$/)&&"#"!==n.id?this.get_node(n.parent):n,v=i.instance?i.instance:this._model.data[i.id]?this:t.jstree.reference(i.id),y=!v||!v._id||this._id!==v._id,"#"===n.id&&("before"===s&&(s="first"),"after"===s&&(s="last")),s){case"before":s=t.inArray(n.id,g.children);break;case"after":s=t.inArray(n.id,g.children)+1;break;case"inside":case"first":s=0;break;case"last":s=g.children.length;break;default:s||(s=0)}if(s>g.children.length&&(s=g.children.length),!this.check("copy_node",i,g,s,{core:!0,is_multi:v&&v._id&&v._id!==this._id,is_foreign:!v||!v._id}))return this.settings.core.error.call(this,this._data.core.last_error),!1;if(p=v?v.get_json(i,{no_id:!0,no_data:!0,no_state:!0}):i,!p)return!1;if(p.id===!0&&delete p.id,p=this._parse_model_from_json(p,g.id,g.parents.concat()),!p)return!1;for(h=this.get_node(p),i&&i.state&&i.state.loaded===!1&&(h.state.loaded=!1),d=[],d.push(p),d=d.concat(h.children_d),this.trigger("model",{nodes:d,parent:g.id}),u=0,f=g.parents.length;u<f;u++)this._model.data[g.parents[u]].children_d=this._model.data[g.parents[u]].children_d.concat(d);for(d=[],u=0,f=g.children.length;u<f;u++)d[u>=s?u+1:u]=g.children[u];return d[s]=h.id,g.children=d,g.children_d.push(h.id),g.children_d=g.children_d.concat(h.children_d),"#"===g.id&&(this._model.force_full_redraw=!0),this._model.force_full_redraw||this._node_changed(g.id),a||this.redraw("#"===g.id),o&&o.call(this,h,g,s),this.trigger("copy_node",{node:h,original:i,parent:g.id,position:s,old_parent:m,old_position:v&&v._id&&m&&v._model.data[m]&&v._model.data[m].children?t.inArray(i.id,v._model.data[m].children):-1,is_multi:v&&v._id&&v._id!==this._id,is_foreign:!v||!v._id,old_instance:v,new_instance:this}),h.id},cut:function(e){if(e||(e=this._data.core.selected.concat()),t.isArray(e)||(e=[e]),!e.length)return!1;var i,n,s,l=[];for(n=0,s=e.length;n<s;n++)i=this.get_node(e[n]),i&&i.id&&"#"!==i.id&&l.push(i);return!!l.length&&(o=l,a=this,r="move_node",void this.trigger("cut",{node:e}))},copy:function(e){if(e||(e=this._data.core.selected.concat()),t.isArray(e)||(e=[e]),!e.length)return!1;var i,n,s,l=[];for(n=0,s=e.length;n<s;n++)i=this.get_node(e[n]),i&&i.id&&"#"!==i.id&&l.push(i);return!!l.length&&(o=l,a=this,r="copy_node",void this.trigger("copy",{node:e}))},get_buffer:function(){return{mode:r,node:o,inst:a}},can_paste:function(){return r!==!1&&o!==!1},paste:function(t,e){return t=this.get_node(t),!!(t&&r&&r.match(/^(copy_node|move_node)$/)&&o)&&(this[r](o,t,e)&&this.trigger("paste",{parent:t.id,node:o,mode:r}),o=!1,r=!1,void(a=!1))},clear_buffer:function(){o=!1,r=!1,a=!1,this.trigger("clear_buffer")},edit:function(e,i){if(e=this.get_node(e),!e)return!1;if(this.settings.core.check_callback===!1)return this._data.core.last_error={error:"check",plugin:"core",id:"core_07",reason:"Could not edit node because of check_callback"},this.settings.core.error.call(this,this._data.core.last_error),!1;i="string"==typeof i?i:e.text,this.set_text(e,""),e=this._open_to(e);var n=this._data.core.rtl,s=this.element.width(),o=e.children(".jstree-anchor"),r=t("<span>"),/*!
				oi = obj.children("i:visible"),
				ai = a.children("i:visible"),
				w1 = oi.width() * oi.length,
				w2 = ai.width() * ai.length,
				*/
a=i,l=t("<div />",{css:{position:"absolute",top:"-200px",left:n?"0px":"-1000px",visibility:"hidden"}}).appendTo("body"),c=t("<input />",{value:a,"class":"jstree-rename-input",css:{padding:"0",border:"1px solid silver","box-sizing":"border-box",display:"inline-block",height:this._data.core.li_height+"px",lineHeight:this._data.core.li_height+"px",width:"150px"},blur:t.proxy(function(){var i=r.children(".jstree-rename-input"),n=i.val();""===n&&(n=a),l.remove(),r.replaceWith(o),r.remove(),this.set_text(e,a),this.rename_node(e,t("<div></div>").text(n)[this.settings.core.force_text?"text":"html"]())===!1&&this.set_text(e,a)},this),keydown:function(t){var e=t.which;27===e&&(this.value=a),27!==e&&13!==e&&37!==e&&38!==e&&39!==e&&40!==e&&32!==e||t.stopImmediatePropagation(),27!==e&&13!==e||(t.preventDefault(),this.blur())},click:function(t){t.stopImmediatePropagation()},mousedown:function(t){t.stopImmediatePropagation()},keyup:function(){c.width(Math.min(l.text("pW"+this.value).width(),s))},keypress:function(t){if(13===t.which)return!1}}),d={fontFamily:o.css("fontFamily")||"",fontSize:o.css("fontSize")||"",fontWeight:o.css("fontWeight")||"",fontStyle:o.css("fontStyle")||"",fontStretch:o.css("fontStretch")||"",fontVariant:o.css("fontVariant")||"",letterSpacing:o.css("letterSpacing")||"",wordSpacing:o.css("wordSpacing")||""};r.attr("class",o.attr("class")).append(o.contents().clone()).append(c),o.replaceWith(r),l.css(d),c.css(d).width(Math.min(l.text("pW"+c[0].value).width(),s))[0].select()},set_theme:function(e,i){if(!e)return!1;if(i===!0){var n=this.settings.core.themes.dir;n||(n=t.jstree.path+"/themes"),i=n+"/"+e+"/style.css"}i&&t.inArray(i,l)===-1&&(t("head").append('<link rel="stylesheet" href="'+i+'" type="text/css" />'),l.push(i)),this._data.core.themes.name&&this.element.removeClass("jstree-"+this._data.core.themes.name),this._data.core.themes.name=e,this.element.addClass("jstree-"+e),this.element[this.settings.core.themes.responsive?"addClass":"removeClass"]("jstree-"+e+"-responsive"),this.trigger("set_theme",{theme:e})},get_theme:function(){return this._data.core.themes.name},set_theme_variant:function(t){this._data.core.themes.variant&&this.element.removeClass("jstree-"+this._data.core.themes.name+"-"+this._data.core.themes.variant),this._data.core.themes.variant=t,t&&this.element.addClass("jstree-"+this._data.core.themes.name+"-"+this._data.core.themes.variant)},get_theme_variant:function(){return this._data.core.themes.variant},show_stripes:function(){this._data.core.themes.stripes=!0,this.get_container_ul().addClass("jstree-striped")},hide_stripes:function(){this._data.core.themes.stripes=!1,this.get_container_ul().removeClass("jstree-striped")},toggle_stripes:function(){this._data.core.themes.stripes?this.hide_stripes():this.show_stripes()},show_dots:function(){this._data.core.themes.dots=!0,this.get_container_ul().removeClass("jstree-no-dots")},hide_dots:function(){this._data.core.themes.dots=!1,this.get_container_ul().addClass("jstree-no-dots")},toggle_dots:function(){this._data.core.themes.dots?this.hide_dots():this.show_dots()},show_icons:function(){this._data.core.themes.icons=!0,this.get_container_ul().removeClass("jstree-no-icons")},hide_icons:function(){this._data.core.themes.icons=!1,this.get_container_ul().addClass("jstree-no-icons")},toggle_icons:function(){this._data.core.themes.icons?this.hide_icons():this.show_icons()},set_icon:function(e,i){var n,s,o,r;if(t.isArray(e)){for(e=e.slice(),n=0,s=e.length;n<s;n++)this.set_icon(e[n],i);return!0}return e=this.get_node(e),!(!e||"#"===e.id)&&(r=e.icon,e.icon=i,o=this.get_node(e,!0).children(".jstree-anchor").children(".jstree-themeicon"),i===!1?this.hide_icon(e):i===!0?(o.removeClass("jstree-themeicon-custom "+r).css("background","").removeAttr("rel"),r===!1&&this.show_icon(e)):i.indexOf("/")===-1&&i.indexOf(".")===-1?(o.removeClass(r).css("background",""),o.addClass(i+" jstree-themeicon-custom").attr("rel",i),r===!1&&this.show_icon(e)):(o.removeClass(r).css("background",""),o.addClass("jstree-themeicon-custom").css("background","url('"+i+"') center center no-repeat").attr("rel",i),r===!1&&this.show_icon(e)),!0)},get_icon:function(t){return t=this.get_node(t),!(!t||"#"===t.id)&&t.icon},hide_icon:function(e){var i,n;if(t.isArray(e)){for(e=e.slice(),i=0,n=e.length;i<n;i++)this.hide_icon(e[i]);return!0}return e=this.get_node(e),!(!e||"#"===e)&&(e.icon=!1,this.get_node(e,!0).children(".jstree-anchor").children(".jstree-themeicon").addClass("jstree-themeicon-hidden"),!0)},show_icon:function(e){var i,n,s;if(t.isArray(e)){for(e=e.slice(),i=0,n=e.length;i<n;i++)this.show_icon(e[i]);return!0}return e=this.get_node(e),!(!e||"#"===e)&&(s=this.get_node(e,!0),e.icon=!s.length||s.children(".jstree-anchor").children(".jstree-themeicon").attr("rel"),e.icon||(e.icon=!0),s.children(".jstree-anchor").children(".jstree-themeicon").removeClass("jstree-themeicon-hidden"),!0)}},t.vakata={},t.vakata.attributes=function(e,i){e=t(e)[0];var n=i?{}:[];return e&&e.attributes&&t.each(e.attributes,function(e,s){t.inArray(s.name.toLowerCase(),["style","contenteditable","hasfocus","tabindex"])===-1&&null!==s.value&&""!==t.trim(s.value)&&(i?n[s.name]=s.value:n.push(s.name))}),n},t.vakata.array_unique=function(t){var e,i,n,s=[];for(e=0,n=t.length;e<n;e++){for(i=0;i<=e&&t[e]!==t[i];i++);i===e&&s.push(t[e])}return s},t.vakata.array_remove=function(t,e,i){var n=t.slice((i||e)+1||t.length);return t.length=e<0?t.length+e:e,t.push.apply(t,n),t},t.vakata.array_remove_item=function(e,i){var n=t.inArray(i,e);return n!==-1?t.vakata.array_remove(e,n):e}}}),function(t){"use strict";"function"==typeof define&&define.amd?define("jstree.wholerow",["jquery","jstree"],t):"object"==typeof exports?t(require("jquery"),require("jstree")):t(jQuery,jQuery.jstree)}(function(t){"use strict";if(!t.jstree.plugins.wholerow){var e=document.createElement("DIV");e.setAttribute("unselectable","on"),e.setAttribute("role","presentation"),e.className="jstree-wholerow",e.innerHTML="&#160;",t.jstree.plugins.wholerow=function(i,n){this.bind=function(){n.bind.call(this),this.element.on("ready.jstree set_state.jstree",t.proxy(function(){this.hide_dots()},this)).on("init.jstree loading.jstree ready.jstree",t.proxy(function(){this.get_container_ul().addClass("jstree-wholerow-ul")},this)).on("deselect_all.jstree",t.proxy(function(){this.element.find(".jstree-wholerow-clicked").removeClass("jstree-wholerow-clicked")},this)).on("changed.jstree",t.proxy(function(t,e){this.element.find(".jstree-wholerow-clicked").removeClass("jstree-wholerow-clicked");var i,n,s=!1;for(i=0,n=e.selected.length;i<n;i++)s=this.get_node(e.selected[i],!0),s&&s.length&&s.children(".jstree-wholerow").addClass("jstree-wholerow-clicked")},this)).on("open_node.jstree",t.proxy(function(t,e){this.get_node(e.node,!0).find(".jstree-clicked").parent().children(".jstree-wholerow").addClass("jstree-wholerow-clicked")},this)).on("hover_node.jstree dehover_node.jstree",t.proxy(function(t,e){"hover_node"===t.type&&this.is_disabled(e.node)||this.get_node(e.node,!0).children(".jstree-wholerow")["hover_node"===t.type?"addClass":"removeClass"]("jstree-wholerow-hovered")},this)).on("contextmenu.jstree",".jstree-wholerow",t.proxy(function(e){e.preventDefault();var i=t.Event("contextmenu",{metaKey:e.metaKey,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey,pageX:e.pageX,pageY:e.pageY});t(e.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(i)},this)).on("click.jstree",".jstree-wholerow",function(e){e.stopImmediatePropagation();var i=t.Event("click",{metaKey:e.metaKey,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey});t(e.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(i).focus()}).on("click.jstree",".jstree-leaf > .jstree-ocl",t.proxy(function(e){e.stopImmediatePropagation();var i=t.Event("click",{metaKey:e.metaKey,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey});t(e.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(i).focus()},this)).on("mouseover.jstree",".jstree-wholerow, .jstree-icon",t.proxy(function(t){return t.stopImmediatePropagation(),this.is_disabled(t.currentTarget)||this.hover_node(t.currentTarget),!1},this)).on("mouseleave.jstree",".jstree-node",t.proxy(function(t){this.dehover_node(t.currentTarget)},this))},this.teardown=function(){this.settings.wholerow&&this.element.find(".jstree-wholerow").remove(),n.teardown.call(this)},this.redraw_node=function(i){if(i=n.redraw_node.apply(this,arguments)){var s=e.cloneNode(!0);t.inArray(i.id,this._data.core.selected)!==-1&&(s.className+=" jstree-wholerow-clicked"),this._data.core.focused&&this._data.core.focused===i.id&&(s.className+=" jstree-wholerow-hovered"),i.insertBefore(s,i.childNodes[0])}return i}}}}),function(t){"use strict";"function"==typeof define&&define.amd?define("jstree.checkbox",["jquery","jstree"],t):"object"==typeof exports?t(require("jquery"),require("jstree")):t(jQuery,jQuery.jstree)}(function(t){"use strict";if(!t.jstree.plugins.checkbox){var e=document.createElement("I"),i=document.createElement("a");e.className="jstree-icon jstree-checkbox",i.className="jstree-checkbox-selectall",t.jstree.defaults.checkbox={cascadeDown:!0,cascadeUp:!1,keep_selected_style:!0,select_all_includes_self:!1,select_and_deselect_all_controls:!0,select_and_disable_children:!0,three_state:!0,visible:!0,whole_node:!0},t.jstree.plugins.checkbox=function(n,s){this.bind=function(){s.bind.call(this),this._data.checkbox.uto=!1,this.element.on("init.jstree",t.proxy(function(){this._data.checkbox.visible=this.settings.checkbox.visible,this.settings.checkbox.keep_selected_style||this.element.addClass("jstree-checkbox-no-clicked"),this.settings.checkbox.select_and_disable_children&&this.element.addClass("jstree-select-and-disable-children"),this.settings.checkbox.show_disabled_checkbox_controls&&this.element.addClass("show-disabled-checkbox-controls")},this)).on("loading.jstree",t.proxy(function(){this[this._data.checkbox.visible?"show_checkboxes":"hide_checkboxes"]()},this)),this.settings.checkbox.select_and_deselect_all_controls&&this.element.on("click",".jstree-checkbox-selectall",t.proxy(function(e){var i=t(e.target),n=t.makeArray(t(e.target).parent().find("li.jstree-node").not(function(e,i){return t(i).children().is(".jstree-disabled")}));this.settings.checkbox.select_all_includes_self&&!i.siblings(".jstree-anchor").is(".jstree-disabled")&&(n=[i,n]),i.hasClass("jstree-checkbox-deselectall")?this.deselect_node(n):this.select_node(n)},this)),this.element.on("changed.jstree move_node.jstree copy_node.jstree redraw.jstree open_node.jstree close_node.jstree",t.proxy(function(){this._data.checkbox.uto&&clearTimeout(this._data.checkbox.uto),this._data.checkbox.uto=setTimeout(t.proxy(this._undetermined,this),50)},this)).on("model.jstree",t.proxy(function(e,i){var n,s,o,r,a,l,c=this._model.data,d=c[i.parent],h=i.nodes,u=[];if(this.settings.checkbox.cascadeDown)if(d.state.selected){for(s=0,o=h.length;s<o;s++)c[h[s]].state.selected=!0,this.settings.checkbox.select_and_disable_children&&(c[h[s]].state.selected=!1,c[h[s]].state.disabled=!0);this.settings.checkbox.select_and_disable_children||(this._data.core.selected=this._data.core.selected.concat(h))}else for(s=0,o=h.length;s<o;s++)if(c[h[s]].state.selected){for(r=0,a=c[h[s]].children_d.length;r<a;r++)c[c[h[s]].children_d[r]].state.selected=!0;this.settings.checkbox.select_and_disable_children||(this._data.core.selected=this._data.core.selected.concat(c[h[s]].children_d))}if(!this.settings.checkbox.select_and_disable_children&&this.settings.checkbox.cascadeUp){for(s=0,o=d.children_d.length;s<o;s++)c[d.children_d[s]].children.length||u.push(c[d.children_d[s]].parent);for(u=t.vakata.array_unique(u),r=0,a=u.length;r<a;r++)for(d=c[u[r]];d&&"#"!==d.id;){for(n=0,s=0,o=d.children.length;s<o;s++)n+=c[d.children[s]].state.selected;if(n!==o)break;d.state.selected=!0,this._data.core.selected.push(d.id),l=this.get_node(d,!0),l&&l.length&&l.children(".jstree-anchor").andSelf().addClass("jstree-clicked"),d=this.get_node(d.parent)}}this._data.core.selected=t.vakata.array_unique(this._data.core.selected)},this)).on("select_node.jstree",t.proxy(function(e,i){var n,s,o,r,a=i.node,l=this._model.data,c=this.get_node(a.parent),d=this.get_node(a,!0);if(this.open_node(a),this.settings.checkbox.cascadeDown)for(this.settings.checkbox.select_and_disable_children||(this._data.core.selected=t.vakata.array_unique(this._data.core.selected.concat(a.children_d))),n=0,s=a.children_d.length;n<s;n++)r=l[a.children_d[n]],r.state.selected=!0,this.settings.checkbox.select_and_disable_children&&(r.state.selected=!1,r.state.disabled=!0),r&&r.original&&r.original.state&&r.original.state.undetermined&&(r.original.state.undetermined=!1);if(!this.settings.checkbox.select_and_deselect_all_controls&&this.settings.checkbox.cascadeUp)for(;c&&"#"!==c.id;){for(o=0,n=0,s=c.children.length;n<s;n++)o+=l[c.children[n]].state.selected;if(o!==s)break;c.state.selected=!0,this._data.core.selected.push(c.id),r=this.get_node(c,!0),r&&r.length&&r.children(".jstree-anchor").not(".jstree-disabled").andSelf().addClass("jstree-clicked"),c=this.get_node(c.parent)}this.settings.checkbox.cascadeDown&&d.length&&(d.find(".jstree-anchor").not(".jstree-disabled").not(".jstree-disabled").addClass("jstree-clicked"),this.settings.checkbox.select_and_disable_children&&d.find(".jstree-children .jstree-anchor").addClass("jstree-disabled"))},this)).on("deselect_all.jstree",t.proxy(function(){var t,e,i,n=this.get_node("#"),s=this._model.data;for(t=0,e=n.children_d.length;t<e;t++)i=s[n.children_d[t]],i&&i.original&&i.original.state&&i.original.state.undetermined&&(i.original.state.undetermined=!1)},this)).on("deselect_node.jstree",t.proxy(function(e,i){var n,s,o,r=i.node,a=this.get_node(r,!0);if(r&&r.original&&r.original.state&&r.original.state.undetermined&&(r.original.state.undetermined=!1),this.settings.checkbox.cascadeDown)for(n=0,s=r.children_d.length;n<s;n++)o=this._model.data[r.children_d[n]],o.state.selected=!1,this.settings.checkbox.select_and_disable_children&&(o.state.disabled=!1),o&&o.original&&o.original.state&&o.original.state.undetermined&&(o.original.state.undetermined=!1),this._data.core.selected=t.vakata.array_remove_item(this._data.core.selected,o.id);if(this.settings.checkbox.cascadeUp)for(n=0,s=r.parents.length;n<s;n++)o=this._model.data[r.parents[n]],o&&o.original&&o.original.state&&o.original.state.undetermined&&(o.original.state.undetermined=!1),o=this.get_node(r.parents[n],!0),o&&o.length&&o.children(".jstree-anchor").not(".jstree-disabled").removeClass("jstree-clicked");if(o=[],!this.settings.checkbox.select_and_deselect_all_controls){for(n=0,s=this._data.core.selected.length;n<s;n++)t.inArray(this._data.core.selected[n],r.children_d)===-1&&t.inArray(this._data.core.selected[n],r.parents)===-1&&o.push(this._data.core.selected[n]);this._data.core.selected=t.vakata.array_unique(o)}this.settings.checkbox.cascadeDown&&a.length&&a.length&&a.find(".jstree-anchor, .jstree-node").andSelf().removeClass("jstree-clicked jstree-disabled")},this)).on("delete_node.jstree",t.proxy(function(t,e){for(var i,n,s,o,r=this.get_node(e.parent),a=this._model.data;r&&"#"!==r.id;){for(s=0,i=0,n=r.children.length;i<n;i++)s+=a[r.children[i]].state.selected;if(s!==n)break;r.state.selected=!0,this._data.core.selected.push(r.id),o=this.get_node(r,!0),o&&o.length&&o.children(".jstree-anchor").andSelf().addClass("jstree-clicked"),r=this.get_node(r.parent)}},this)).on("move_node.jstree",t.proxy(function(e,i){var n,s,o,r,a,l=i.is_multi,c=i.old_parent,d=this.get_node(i.parent),h=this._model.data;if(!l)for(n=this.get_node(c);n&&"#"!==n.id;){for(s=0,o=0,r=n.children.length;o<r;o++)s+=h[n.children[o]].state.selected;if(s!==r)break;n.state.selected=!0,this._data.core.selected.push(n.id),a=this.get_node(n,!0),a&&a.length&&a.children(".jstree-anchor").andSelf().addClass("jstree-clicked"),n=this.get_node(n.parent)}for(n=d;n&&"#"!==n.id;){for(s=0,o=0,r=n.children.length;o<r;o++)s+=h[n.children[o]].state.selected;if(s===r)n.state.selected||(n.state.selected=!0,this._data.core.selected.push(n.id),a=this.get_node(n,!0),a&&a.length&&a.children(".jstree-anchor").andSelf().addClass("jstree-clicked"));else{if(!n.state.selected)break;n.state.selected=!1,this._data.core.selected=t.vakata.array_remove_item(this._data.core.selected,n.id),a=this.get_node(n,!0),a&&a.length&&a.children(".jstree-anchor").andSelf().removeClass("jstree-clicked")}n=this.get_node(n.parent)}},this))},this._undetermined=function(){var e,i,n=this._model.data,s=this._data.core.selected,o=[],r=this;for(e=0,i=s.length;e<i;e++)n[s[e]]&&n[s[e]].parents&&(o=o.concat(n[s[e]].parents));if(this.element.find(".jstree-closed").not(":has(.jstree-children)").each(function(){var t,s=r.get_node(this);if(s.state.loaded)for(e=0,i=s.children_d.length;e<i;e++)t=n[s.children_d[e]],!t.state.loaded&&t.original&&t.original.state&&t.original.state.undetermined&&t.original.state.undetermined===!0&&(o.push(t.id),o=o.concat(t.parents));else s.original&&s.original.state&&s.original.state.undetermined&&s.original.state.undetermined===!0&&(o.push(s.id),o=o.concat(s.parents))}),o=t.vakata.array_unique(o),o=t.vakata.array_remove_item(o,"#"),this.element.find(".jstree-undetermined").andSelf().removeClass("jstree-undetermined"),this.settings.checkbox.select_and_deselect_all_controls){var a=this.element.find(".jstree-checkbox-selectall");a.removeClass("jstree-checkbox-deselectall fsStateHidden"),a.filter(function(){var e=t(this).siblings(".jstree-anchor");return(!r.settings.checkbox.select_all_includes_self||e.is(".jstree-clicked")||e.is(".jstree-disabled"))&&0==t(this).siblings(".jstree-children").find(".jstree-anchor").not(".jstree-disabled").not(".jstree-clicked").length}).addClass("jstree-checkbox-deselectall"),a.filter(function(){var e=t(this).siblings(".jstree-children");return e.find(".jstree-anchor.jstree-disabled").not(".jstree-clicked").length>0&&0==e.find(".jstree-open").find(".jstree-anchor").not(".jstree-disabled").length}).addClass("fsStateHidden")}if(this.settings.checkbox.select_and_disable_children&&this.element.find(".jstree-clicked .jstree-children .jstree-anchor").addClass("jstree-clicked"),this.settings.checkbox.three_state)for(e=0,i=o.length;e<i;e++)s=this.get_node(o[e],!0),s&&s.length&&(n[o[e]].state.selected||s&&s.length&&(s.children(".jstree-anchor").children(".jstree-checkbox").addClass("jstree-undetermined"),s.addClass("jstree-undetermined")));this.element.trigger("after_redraw")},this.redraw_node=function(n,o,r){var a=this.get_node(n).id;if(n=s.redraw_node.call(this,n,o,r)){var l,c,d=null;for(l=0,c=n.childNodes.length;l<c;l++)if(n.childNodes[l]&&n.childNodes[l].className&&n.childNodes[l].className.indexOf("jstree-anchor")!==-1){d=n.childNodes[l];break}d&&(d.insertBefore(e.cloneNode(!1),d.childNodes[0]),this.settings.checkbox.select_and_deselect_all_controls&&n.className.indexOf("jstree-leaf")==-1&&n.insertBefore(i.cloneNode(!0),d.nextSibling)),this._model.data[a]&&this._model.data[a].state.selected&&(n.className=[n.className,"jstree-clicked"].join(" "))}return!r&&this.settings.checkbox.three_state&&(this._data.checkbox.uto&&clearTimeout(this._data.checkbox.uto),this._data.checkbox.uto=setTimeout(t.proxy(this._undetermined,this),50)),this.settings.checkbox.node_class_function&&(n.className=[n.className,this.settings.checkbox.node_class_function(this._model.data[a].data)].join(" ")),n},this.activate_node=function(e,i){return(this.settings.checkbox.whole_node||t(i.target).hasClass("jstree-checkbox"))&&(i.ctrlKey=!0),s.activate_node.call(this,e,i)},this.show_checkboxes=function(){this._data.core.themes.checkboxes=!0,this.get_container_ul().removeClass("jstree-no-checkboxes")},this.hide_checkboxes=function(){this._data.core.themes.checkboxes=!1,this.get_container_ul().addClass("jstree-no-checkboxes")},this.toggle_checkboxes=function(){this._data.core.themes.checkboxes?this.hide_checkboxes():this.show_checkboxes()}}}}),function(t){"use strict";function e(e,i){for(var n,s,o,r=-1;r<i.length;)for(r=i.length,n=0;n<e.length;n++)s=parseInt(e[n].id.replace(/^\D+/g,"")),i.indexOf(s)>-1&&null!=e[n].parent_id&&i.indexOf(e[n].parent_id)==-1&&i.push(e[n].parent_id);return o=t.grep(e,function(t){var e=parseInt(t.id.replace(/^\D+/g,""));return i.indexOf(e)>-1})}function i(e){return t.makeArray(e.find("."+o).map(function(){return parseInt(this.value)}))}function n(e,i,s,o,r,a){s=s||[],t.each(e,function(t,e){var l=e.id;e.state=e.state||{},0==l&&(e.li_attr={"class":"fsGroupPickerRoles"}),e.id=i+l,r&&"parent_id"in e?e.parent=null==e.parent_id?"#":i+e.parent_id:!("children"in e)&&"has_children"in e&&(e.children=e.has_children),!("text"in e)&&"name"in e&&(e.text=e.name),e.state.disabled=o||!!e.disabled||a.indexOf(l)>-1,e.state.selected=s.indexOf(l)>-1,"children"in e&&"object"==typeof e.children&&n(e.children,i,s,o,r,a)})}var s="fsGroupPickerField",o="fsGroupPickerFieldItem",r="fsGroupPickerTree",a="fsGroupPickerInheritedTree",l="fsGroupPickerSelectedTree",c="fsStateHidden";t.fn.fsGroupPicker=function(d){d=d||{};var h=d.hiddenFieldName||"selectedGroup",u=0!=d.multiple,f=1==d.readOnly,p=0!=d.topLevelDisabled,m=d.preselectedValues||[],g=d.inheritedValues||[];return"string"==typeof m&&t.trim(m).length&&(m=m.split(",")),this.each(function(){var v=t(this),y=t('<input type="hidden" multiple="multiple" id="'+s+'" name="'+h+'">'),b=t('<div class="'+r+'">'),w=t('<div class="'+a+'"></div>'),_=t('<div class="'+a+'Container"><h2>Groups inherited from parent collections</h2></div>'),k=t('<div class="'+l+" "+c+'">'),x=i(v),C=t('<button class="fsGroupPickerViewButton">View Selected</button>').on("click",function(){var e=t(this),i="View Selected"==t.trim(e.text());e.text(i?"View All":"View Selected"),b.toggleClass(c,i),k.toggleClass(c,!i),i?(k.jstree(!0)._data.core.ready=!1,k.jstree(!0).load_node("#")):0==v.find("."+o).length&&C.prop("disabled",!0)});if(u&&v.prepend(C,k),v.prepend(b,y),m.length>0)for(var S=0;S<m.length;S++)v.append('<input type="hidden" multiple="multiple" class="'+o+'" name="'+h+'" value="'+m[S]+'">');else 0==v.find("."+o).length&&C.prop("disabled",!0);u&&v.find("."+o).length&&(k.removeClass(c),b.addClass(c),C.text("View All")),u&&g.length&&(_.append(w),v.prepend(_)),b.jstree({plugins:u?["checkbox","wholerow"]:["wholerow"],core:{data:function(e,s){var o=t.merge(i(v),g);t.getJSON("/cf_endpoints/routes.cfm/constituents/groups"+("#"!=e.id?"/"+e.id.replace(r,"")+"/children":"")+".json?"+(p?"":"top_level_disabled=false&")+(d.onlyGroupSpaces?"only_group_spaces":"")).done(function(t){d.excludeRoles&&"#"==e.id&&t.splice(0,1),n(t,r,o,f,!1,g),s(t)})}}}).on("select_node.jstree",function(t,e){u||y.nextAll("."+o).remove(),y.after(y.clone().val(e.node.id.replace(r,"")).removeAttr("id").addClass(o)),C.prop("disabled",!1),v.trigger("groupPicker:change")}).on("deselect_node.jstree",function(t,e){y.nextAll("."+o+"[value="+e.node.id.replace(r,"")+"]").remove(),0==v.find("."+o).length&&b.is(":visible")&&C.prop("disabled",!0),v.trigger("groupPicker:change")}),u?k.jstree({plugins:["checkbox","wholerow"],core:{data:function(s,o){var r=t.merge(i(v),g);r.length&&t.getJSON("/cf_endpoints/routes.cfm/constituents/groups.json?include_ancestors&group_ids="+r).done(function(t){n(t,l,r,f,!0,g),v.trigger("groupPicker:selectionLoaded",[t]),o(t),g.length&&w.jstree({core:{data:e(t,g)}})})}}}).on("select_node.jstree",function(t,e){var i=e.node.id.replace(l,"");b.find("#"+r+i).length?b.jstree(!0).select_node(r+i):y.after(y.clone().val(i).removeAttr("id").addClass(o)),v.trigger("groupPicker:change")}).on("deselect_node.jstree",function(t,e){var i=e.node.id.replace(l,"");b.find("#"+r+i).length?b.jstree(!0).deselect_node(r+i):y.nextAll("."+o+"[value="+i+"]").remove(),v.trigger("groupPicker:change")}):x.length&&t.getJSON("/cf_endpoints/routes.cfm/constituents/groups.json?include_ancestors&group_ids="+x).done(function(t){n(t,"",[],f),v.trigger("groupPicker:selectionLoaded",[t])})})}}(jQuery),function(t){"use strict";function e(t,e){return t.find(c+'[data-mediatype="'+e+'"]').length>0}var i=t.$,n="fsStateHidden",s=".fsMediaSettingsChannel",o=s+"Node",r=".fsMediaSettingsFolder",a=r+"Node",l=".fsMediaSettingsPlaylist",c=l+"Node",d=".fsMediaSettingsSelectedMediaNodes",h="fsStateSelected";t.getInternalNS("elements.media").initPicker=function(t){t.find(".fsMediaSettingsSelectedMedia input:checked").parents("ul").siblings(".fsStyleAccordionHeader").addClass(h),i(".fsElementSettingMediaPlayer, .fsElementSettingMediaGallery").on("change",'input[name="settings[subtype]"]',function(){var e=i(d),o=e.find(s+":checked"),a=e.find(r+":checked"),c="Player"==i(this).val();if(i(s+":not(#fsMediaChannelAll), "+r).toggleClass(n,c),i("#fsMediaSettingsAllChannelsNode").toggleClass(n,c),c){var u,f,p,m=".fsStyleAccordionHeader:first";o.length>0?p=o:a.length>0&&(p=a),p&&(f="fsMediaChannelAll"==o.attr("id")?p.closest("ul").siblings("ul").first().children("li").first():p.closest("li"),p==o&&(m+=", ul "+m),p.prop("checked",!1),f.find(m).addClass(h),u=f.find(l+":first"),u.prop("checked",!0),t.trigger("mediaPicker:change",u.next("label").text()))}}),t.find(".fsMediaSettingsSelectedMediaNodes").on("change",s,function(e){var s=i(this);return s.hasClass(n)?void s.prop("checked",!1):(i(d).find(r+":checked, "+l+":checked").prop("checked",!1),void t.trigger("mediaPicker:change",i(e.target).next("label").text()))}).on("change",r,function(e){var o=i(this);return o.hasClass(n)?void o.prop("checked",!1):(i(d).find(s+":checked, "+l+":checked").prop("checked",!1),void t.trigger("mediaPicker:change",i(e.target).next("label").text()))}).on("change",l,function(e){i(d).find(s+":checked, "+r+":checked").prop("checked",!1),t.trigger("mediaPicker:change",i(e.target).next("label").text())}),t.on("click",".fsStyleAccordionHeader",function(t){t.stopPropagation(),i(this).toggleClass(h)}),t.on("click",'.fsStyleAccordionHeader input[type="radio"], .fsStyleAccordionHeader label',function(t){t.stopPropagation(),i(this).closest(".fsStyleAccordionHeader").addClass(h)}),t.find(".fsMediaSettingsTypes").on("change","input[type=radio]",function(){var t=i(this).val();i(o+", "+a+", "+c).removeClass(n),t>=1&&t<=3&&i(o).each(function(){var s=i(this);e(s,t)?s.find(a).each(function(){var s=i(this);e(s,t)?s.find(c+'[data-mediatype!="'+t+'"]').addClass(n):s.addClass(n)}):s.addClass(n)})})}}(FS),/**
 * sifter.js
 * Copyright (c) 2013 Brian Reavis & contributors
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this
 * file except in compliance with the License. You may obtain a copy of the License at:
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under
 * the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF
 * ANY KIND, either express or implied. See the License for the specific language
 * governing permissions and limitations under the License.
 *
 * @author Brian Reavis <brian@thirdroute.com>
 */
function(t,e){"function"==typeof define&&define.amd?define("sifter",e):"object"==typeof exports?module.exports=e():t.Sifter=e()}(this,function(){var t=function(t,e){this.items=t,this.settings=e||{diacritics:!0}};t.prototype.tokenize=function(t){if(t=s(String(t||"").toLowerCase()),!t||!t.length)return[];var e,i,n,r,l=[],c=t.split(/ +/);for(e=0,i=c.length;e<i;e++){if(n=o(c[e]),this.settings.diacritics)for(r in a)a.hasOwnProperty(r)&&(n=n.replace(new RegExp(r,"g"),a[r]));l.push({string:c[e],regex:new RegExp(n,"i")})}return l},t.prototype.iterator=function(t,e){var i;i=r(t)?Array.prototype.forEach||function(t){for(var e=0,i=this.length;e<i;e++)t(this[e],e,this)}:function(t){for(var e in this)this.hasOwnProperty(e)&&t(this[e],e,this)},i.apply(t,[e])},t.prototype.getScoreFunction=function(t,e){var i,s,o,r,a;i=this,t=i.prepareSearch(t,e),o=t.tokens,s=t.options.fields,r=o.length,a=t.options.nesting;var l=function(t,e){var i,n;return t?(t=String(t||""),n=t.search(e.regex),n===-1?0:(i=e.string.length/t.length,0===n&&(i+=.5),i)):0},c=function(){var t=s.length;return t?1===t?function(t,e){return l(n(e,s[0],a),t)}:function(e,i){for(var o=0,r=0;o<t;o++)r+=l(n(i,s[o],a),e);return r/t}:function(){return 0}}();return r?1===r?function(t){return c(o[0],t)}:"and"===t.options.conjunction?function(t){for(var e,i=0,n=0;i<r;i++){if(e=c(o[i],t),e<=0)return 0;n+=e}return n/r}:function(t){for(var e=0,i=0;e<r;e++)i+=c(o[e],t);return i/r}:function(){return 0}},t.prototype.getSortFunction=function(t,i){var s,o,r,a,l,c,d,h,u,f,p;if(r=this,t=r.prepareSearch(t,i),p=!t.query&&i.sort_empty||i.sort,u=function(t,e){return"$score"===t?e.score:n(r.items[e.id],t,i.nesting)},l=[],p)for(s=0,o=p.length;s<o;s++)(t.query||"$score"!==p[s].field)&&l.push(p[s]);if(t.query){for(f=!0,s=0,o=l.length;s<o;s++)if("$score"===l[s].field){f=!1;break}f&&l.unshift({field:"$score",direction:"desc"})}else for(s=0,o=l.length;s<o;s++)if("$score"===l[s].field){l.splice(s,1);break}for(h=[],s=0,o=l.length;s<o;s++)h.push("desc"===l[s].direction?-1:1);return c=l.length,c?1===c?(a=l[0].field,d=h[0],function(t,i){return d*e(u(a,t),u(a,i))}):function(t,i){var n,s,o;for(n=0;n<c;n++)if(o=l[n].field,s=h[n]*e(u(o,t),u(o,i)))return s;return 0}:null},t.prototype.prepareSearch=function(t,e){if("object"==typeof t)return t;e=i({},e);var n=e.fields,s=e.sort,o=e.sort_empty;return n&&!r(n)&&(e.fields=[n]),s&&!r(s)&&(e.sort=[s]),o&&!r(o)&&(e.sort_empty=[o]),{options:e,query:String(t||"").toLowerCase(),tokens:this.tokenize(t),total:0,items:[]}},t.prototype.search=function(t,e){var i,n,s,o,r=this;return n=this.prepareSearch(t,e),e=n.options,t=n.query,o=e.score||r.getScoreFunction(n),t.length?r.iterator(r.items,function(t,s){i=o(t),(e.filter===!1||i>0)&&n.items.push({score:i,id:s})}):r.iterator(r.items,function(t,e){n.items.push({score:1,id:e})}),s=r.getSortFunction(n,e),s&&n.items.sort(s),n.total=n.items.length,"number"==typeof e.limit&&(n.items=n.items.slice(0,e.limit)),n};var e=function(t,e){return"number"==typeof t&&"number"==typeof e?t>e?1:t<e?-1:0:(t=l(String(t||"")),e=l(String(e||"")),t>e?1:e>t?-1:0)},i=function(t){var e,i,n,s;for(e=1,i=arguments.length;e<i;e++)if(s=arguments[e])for(n in s)s.hasOwnProperty(n)&&(t[n]=s[n]);return t},n=function(t,e,i){if(t&&e){if(!i)return t[e];for(var n=e.split(".");n.length&&(t=t[n.shift()]););return t}},s=function(t){return(t+"").replace(/^\s+|\s+$|/g,"")},o=function(t){return(t+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")},r=Array.isArray||"undefined"!=typeof $&&$.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},a={a:"[a\u1e00\u1e01\u0102\u0103\xc2\xe2\u01cd\u01ce\u023a\u2c65\u0226\u0227\u1ea0\u1ea1\xc4\xe4\xc0\xe0\xc1\xe1\u0100\u0101\xc3\xe3\xc5\xe5\u0105\u0104\xc3\u0105\u0104]",b:"[b\u2422\u03b2\u0392B\u0e3f\ud800\udf01\u16d2]",c:"[c\u0106\u0107\u0108\u0109\u010c\u010d\u010a\u010bC\u0304c\u0304\xc7\xe7\u1e08\u1e09\u023b\u023c\u0187\u0188\u0255\u1d04\uff23\uff43]",d:"[d\u010e\u010f\u1e0a\u1e0b\u1e10\u1e11\u1e0c\u1e0d\u1e12\u1e13\u1e0e\u1e0f\u0110\u0111D\u0326d\u0326\u0189\u0256\u018a\u0257\u018b\u018c\u1d6d\u1d81\u1d91\u0221\u1d05\uff24\uff44\xf0]",e:"[e\xc9\xe9\xc8\xe8\xca\xea\u1e18\u1e19\u011a\u011b\u0114\u0115\u1ebc\u1ebd\u1e1a\u1e1b\u1eba\u1ebb\u0116\u0117\xcb\xeb\u0112\u0113\u0228\u0229\u0118\u0119\u1d92\u0246\u0247\u0204\u0205\u1ebe\u1ebf\u1ec0\u1ec1\u1ec4\u1ec5\u1ec2\u1ec3\u1e1c\u1e1d\u1e16\u1e17\u1e14\u1e15\u0206\u0207\u1eb8\u1eb9\u1ec6\u1ec7\u2c78\u1d07\uff25\uff45\u0258\u01dd\u018f\u0190\u03b5]",f:"[f\u0191\u0192\u1e1e\u1e1f]",g:"[g\u0262\u20b2\u01e4\u01e5\u011c\u011d\u011e\u011f\u0122\u0123\u0193\u0260\u0120\u0121]",h:"[h\u0124\u0125\u0126\u0127\u1e28\u1e29\u1e96\u1e96\u1e24\u1e25\u1e22\u1e23\u0266\u02b0\u01f6\u0195]",i:"[i\xcd\xed\xcc\xec\u012c\u012d\xce\xee\u01cf\u01d0\xcf\xef\u1e2e\u1e2f\u0128\u0129\u012e\u012f\u012a\u012b\u1ec8\u1ec9\u0208\u0209\u020a\u020b\u1eca\u1ecb\u1e2c\u1e2d\u0197\u0268\u0268\u0306\u1d7b\u1d96\u0130iI\u0131\u026a\uff29\uff49]",j:"[j\u0237\u0134\u0135\u0248\u0249\u029d\u025f\u02b2]",k:"[k\u0198\u0199\ua740\ua741\u1e30\u1e31\u01e8\u01e9\u1e32\u1e33\u1e34\u1e35\u03ba\u03f0\u20ad]",l:"[l\u0141\u0142\u013d\u013e\u013b\u013c\u0139\u013a\u1e36\u1e37\u1e38\u1e39\u1e3c\u1e3d\u1e3a\u1e3b\u013f\u0140\u023d\u019a\u2c60\u2c61\u2c62\u026b\u026c\u1d85\u026d\u0234\u029f\uff2c\uff4c]",n:"[n\u0143\u0144\u01f8\u01f9\u0147\u0148\xd1\xf1\u1e44\u1e45\u0145\u0146\u1e46\u1e47\u1e4a\u1e4b\u1e48\u1e49N\u0308n\u0308\u019d\u0272\u0220\u019e\u1d70\u1d87\u0273\u0235\u0274\uff2e\uff4e\u014a\u014b]",o:"[o\xd8\xf8\xd6\xf6\xd3\xf3\xd2\xf2\xd4\xf4\u01d1\u01d2\u0150\u0151\u014e\u014f\u022e\u022f\u1ecc\u1ecd\u019f\u0275\u01a0\u01a1\u1ece\u1ecf\u014c\u014d\xd5\xf5\u01ea\u01eb\u020c\u020d\u0555\u0585]",p:"[p\u1e54\u1e55\u1e56\u1e57\u2c63\u1d7d\u01a4\u01a5\u1d71]",q:"[q\ua756\ua757\u02a0\u024a\u024b\ua758\ua759q\u0303]",r:"[r\u0154\u0155\u024c\u024d\u0158\u0159\u0156\u0157\u1e58\u1e59\u0210\u0211\u0212\u0213\u1e5a\u1e5b\u2c64\u027d]",s:"[s\u015a\u015b\u1e60\u1e61\u1e62\u1e63\ua7a8\ua7a9\u015c\u015d\u0160\u0161\u015e\u015f\u0218\u0219S\u0308s\u0308]",t:"[t\u0164\u0165\u1e6a\u1e6b\u0162\u0163\u1e6c\u1e6d\u01ae\u0288\u021a\u021b\u1e70\u1e71\u1e6e\u1e6f\u01ac\u01ad]",u:"[u\u016c\u016d\u0244\u0289\u1ee4\u1ee5\xdc\xfc\xda\xfa\xd9\xf9\xdb\xfb\u01d3\u01d4\u0170\u0171\u016c\u016d\u01af\u01b0\u1ee6\u1ee7\u016a\u016b\u0168\u0169\u0172\u0173\u0214\u0215\u222a]",v:"[v\u1e7c\u1e7d\u1e7e\u1e7f\u01b2\u028b\ua75e\ua75f\u2c71\u028b]",w:"[w\u1e82\u1e83\u1e80\u1e81\u0174\u0175\u1e84\u1e85\u1e86\u1e87\u1e88\u1e89]",x:"[x\u1e8c\u1e8d\u1e8a\u1e8b\u03c7]",y:"[y\xdd\xfd\u1ef2\u1ef3\u0176\u0177\u0178\xff\u1ef8\u1ef9\u1e8e\u1e8f\u1ef4\u1ef5\u024e\u024f\u01b3\u01b4]",z:"[z\u0179\u017a\u1e90\u1e91\u017d\u017e\u017b\u017c\u1e92\u1e93\u1e94\u1e95\u01b5\u01b6]"},l=function(){var t,e,i,n,s="",o={};for(i in a)if(a.hasOwnProperty(i))for(n=a[i].substring(2,a[i].length-1),s+=n,t=0,e=n.length;t<e;t++)o[n.charAt(t)]=i;var r=new RegExp("["+s+"]","g");return function(t){return t.replace(r,function(t){return o[t]}).toLowerCase()}}();return t}),/**
 * microplugin.js
 * Copyright (c) 2013 Brian Reavis & contributors
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this
 * file except in compliance with the License. You may obtain a copy of the License at:
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under
 * the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF
 * ANY KIND, either express or implied. See the License for the specific language
 * governing permissions and limitations under the License.
 *
 * @author Brian Reavis <brian@thirdroute.com>
 */
function(t,e){"function"==typeof define&&define.amd?define("microplugin",e):"object"==typeof exports?module.exports=e():t.MicroPlugin=e()}(this,function(){var t={};t.mixin=function(t){t.plugins={},t.prototype.initializePlugins=function(t){var i,n,s,o=this,r=[];if(o.plugins={names:[],settings:{},requested:{},loaded:{}},e.isArray(t))for(i=0,n=t.length;i<n;i++)"string"==typeof t[i]?r.push(t[i]):(o.plugins.settings[t[i].name]=t[i].options,r.push(t[i].name));else if(t)for(s in t)t.hasOwnProperty(s)&&(o.plugins.settings[s]=t[s],r.push(s));for(;r.length;)o.require(r.shift())},t.prototype.loadPlugin=function(e){var i=this,n=i.plugins,s=t.plugins[e];if(!t.plugins.hasOwnProperty(e))throw new Error('Unable to find "'+e+'" plugin');n.requested[e]=!0,n.loaded[e]=s.fn.apply(i,[i.plugins.settings[e]||{}]),n.names.push(e)},t.prototype.require=function(t){var e=this,i=e.plugins;if(!e.plugins.loaded.hasOwnProperty(t)){if(i.requested[t])throw new Error('Plugin has circular dependency ("'+t+'")');e.loadPlugin(t)}return i.loaded[t]},t.define=function(e,i){t.plugins[e]={name:e,fn:i}}};var e={isArray:Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}};return t}),/**
 * selectize.js (v0.12.3)
 * Copyright (c) 2013–2015 Brian Reavis & contributors
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this
 * file except in compliance with the License. You may obtain a copy of the License at:
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under
 * the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF
 * ANY KIND, either express or implied. See the License for the specific language
 * governing permissions and limitations under the License.
 *
 * @author Brian Reavis <brian@thirdroute.com>
 */
function(t,e){"function"==typeof define&&define.amd?define("selectize",["jquery","sifter","microplugin"],e):"object"==typeof exports?module.exports=e(require("jquery"),require("sifter"),require("microplugin")):t.Selectize=e(t.jQuery,t.Sifter,t.MicroPlugin)}(this,function(t,e,i){"use strict";var n=function(t,e){if("string"!=typeof e||e.length){var i="string"==typeof e?new RegExp(e,"i"):e,n=function(t){var e=0;if(3===t.nodeType){var s=t.data.search(i);if(s>=0&&t.data.length>0){var o=t.data.match(i),r=document.createElement("span");r.className="highlight";var a=t.splitText(s),l=(a.splitText(o[0].length),a.cloneNode(!0));r.appendChild(l),a.parentNode.replaceChild(r,a),e=1}}else if(1===t.nodeType&&t.childNodes&&!/(script|style)/i.test(t.tagName))for(var c=0;c<t.childNodes.length;++c)c+=n(t.childNodes[c]);return e};return t.each(function(){n(this)})}};jQuery.fn.removeHighlight=function(){return this.find("span.highlight").each(function(){this.parentNode.firstChild.nodeName;var t=this.parentNode;t.replaceChild(this.firstChild,this),t.normalize()}).end()};var s=function(){};s.prototype={on:function(t,e){this._events=this._events||{},this._events[t]=this._events[t]||[],this._events[t].push(e)},off:function(t,e){var i=arguments.length;return 0===i?delete this._events:1===i?delete this._events[t]:(this._events=this._events||{},void(t in this._events!=!1&&this._events[t].splice(this._events[t].indexOf(e),1)))},trigger:function(t){if(this._events=this._events||{},t in this._events!=!1)for(var e=0;e<this._events[t].length;e++)this._events[t][e].apply(this,Array.prototype.slice.call(arguments,1))}},s.mixin=function(t){for(var e=["on","off","trigger"],i=0;i<e.length;i++)t.prototype[e[i]]=s.prototype[e[i]]};var o=/Mac/.test(navigator.userAgent),r=65,a=13,l=27,c=37,d=38,h=80,u=39,f=40,p=78,m=8,g=46,v=16,y=o?91:17,b=o?18:17,w=9,_=1,k=2,x=!/android/i.test(window.navigator.userAgent)&&!!document.createElement("input").validity,C=function(t){return"undefined"!=typeof t},S=function(t){return"undefined"==typeof t||null===t?null:"boolean"==typeof t?t?"1":"0":t+""},T=function(t){return(t+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},E={};E.before=function(t,e,i){var n=t[e];t[e]=function(){return i.apply(t,arguments),n.apply(t,arguments)}},E.after=function(t,e,i){var n=t[e];t[e]=function(){var e=n.apply(t,arguments);return i.apply(t,arguments),e}};var D=function(t){var e=!1;return function(){e||(e=!0,t.apply(this,arguments))}},P=function(t,e){var i;return function(){var n=this,s=arguments;window.clearTimeout(i),i=window.setTimeout(function(){t.apply(n,s)},e)}},M=function(t,e,i){var n,s=t.trigger,o={};t.trigger=function(){var i=arguments[0];return e.indexOf(i)===-1?s.apply(t,arguments):void(o[i]=arguments)},i.apply(t,[]),t.trigger=s;for(n in o)o.hasOwnProperty(n)&&s.apply(t,o[n])},A=function(t,e,i,n){t.on(e,i,function(e){for(var i=e.target;i&&i.parentNode!==t[0];)i=i.parentNode;return e.currentTarget=i,n.apply(this,[e])})},I=function(t){var e={};if("selectionStart"in t)e.start=t.selectionStart,e.length=t.selectionEnd-e.start;else if(document.selection){t.focus();var i=document.selection.createRange(),n=document.selection.createRange().text.length;i.moveStart("character",-t.value.length),e.start=i.text.length-n,e.length=n}return e},L=function(t,e,i){var n,s,o={};if(i)for(n=0,s=i.length;n<s;n++)o[i[n]]=t.css(i[n]);else o=t.css();e.css(o)},j=function(e,i){if(!e)return 0;var n=t("<test>").css({position:"absolute",top:-99999,left:-99999,width:"auto",padding:0,whiteSpace:"pre"}).text(e).appendTo("body");L(i,n,["letterSpacing","fontSize","fontFamily","fontWeight","textTransform"]);var s=n.width();return n.remove(),s},O=function(t){var e=null,i=function(i,n){var s,o,r,a,l,c,d,h;i=i||window.event||{},n=n||{},i.metaKey||i.altKey||(n.force||t.data("grow")!==!1)&&(s=t.val(),i.type&&"keydown"===i.type.toLowerCase()&&(o=i.keyCode,r=o>=97&&o<=122||o>=65&&o<=90||o>=48&&o<=57||32===o,o===g||o===m?(h=I(t[0]),h.length?s=s.substring(0,h.start)+s.substring(h.start+h.length):o===m&&h.start?s=s.substring(0,h.start-1)+s.substring(h.start+1):o===g&&"undefined"!=typeof h.start&&(s=s.substring(0,h.start)+s.substring(h.start+1))):r&&(c=i.shiftKey,d=String.fromCharCode(i.keyCode),d=c?d.toUpperCase():d.toLowerCase(),s+=d)),a=t.attr("placeholder"),!s&&a&&(s=a),l=j(s,t)+4,l!==e&&(e=l,t.width(l),t.triggerHandler("resize")))};t.on("keydown keyup update blur",i),i()},$=function(t){var e=document.createElement("div");return e.appendChild(t.cloneNode(!0)),e.innerHTML},N=function(t,e){e||(e={});var i="Selectize";console.error(i+": "+t),e.explanation&&(console.group&&console.group(),console.error(e.explanation),console.group&&console.groupEnd())},F=function(i,n){var s,o,r,a,l=this;a=i[0],a.selectize=l;var c=window.getComputedStyle&&window.getComputedStyle(a,null);if(r=c?c.getPropertyValue("direction"):a.currentStyle&&a.currentStyle.direction,r=r||i.parents("[dir]:first").attr("dir")||"",t.extend(l,{order:0,settings:n,$input:i,tabIndex:i.attr("tabindex")||"",tagType:"select"===a.tagName.toLowerCase()?_:k,rtl:/rtl/i.test(r),eventNS:".selectize"+ ++F.count,highlightedValue:null,isOpen:!1,isDisabled:!1,isRequired:i.is("[required]"),isInvalid:!1,isLocked:!1,isFocused:!1,isInputHidden:!1,isSetup:!1,isShiftDown:!1,isCmdDown:!1,isCtrlDown:!1,ignoreFocus:!1,ignoreBlur:!1,ignoreHover:!1,hasOptions:!1,currentResults:null,lastValue:"",caretPos:0,loading:0,loadedSearches:{},$activeOption:null,$activeItems:[],optgroups:{},options:{},userOptions:{},items:[],renderCache:{},onSearchChange:null===n.loadThrottle?l.onSearchChange:P(l.onSearchChange,n.loadThrottle)}),l.sifter=new e(this.options,{diacritics:n.diacritics}),l.settings.options){for(s=0,o=l.settings.options.length;s<o;s++)l.registerOption(l.settings.options[s]);delete l.settings.options}if(l.settings.optgroups){for(s=0,o=l.settings.optgroups.length;s<o;s++)l.registerOptionGroup(l.settings.optgroups[s]);delete l.settings.optgroups}l.settings.mode=l.settings.mode||(1===l.settings.maxItems?"single":"multi"),"boolean"!=typeof l.settings.hideSelected&&(l.settings.hideSelected="multi"===l.settings.mode),l.initializePlugins(l.settings.plugins),l.setupCallbacks(),l.setupTemplates(),l.setup()};return s.mixin(F),"undefined"!=typeof i?i.mixin(F):N("Dependency MicroPlugin is missing",{explanation:'Make sure you either: (1) are using the "standalone" version of Selectize, or (2) require MicroPlugin before you load Selectize.'}),t.extend(F.prototype,{setup:function(){var e,i,n,s,r,a,l,c,d,h,u=this,f=u.settings,p=u.eventNS,m=t(window),g=t(document),w=u.$input;if(l=u.settings.mode,c=w.attr("class")||"",e=t("<div>").addClass(f.wrapperClass).addClass(c).addClass(l),i=t("<div>").addClass(f.inputClass).addClass("items").appendTo(e),n=t('<input type="text" autocomplete="off" />').appendTo(i).attr("tabindex",w.is(":disabled")?"-1":u.tabIndex),a=t(f.dropdownParent||e),s=t("<div>").addClass(f.dropdownClass).addClass(l).hide().appendTo(a),r=t("<div>").addClass(f.dropdownContentClass).appendTo(s),(h=w.attr("id"))&&(n.attr("id",h+"-selectized"),t("label[for='"+h+"']").attr("for",h+"-selectized")),u.settings.copyClassesToDropdown&&s.addClass(c),e.css({width:w[0].style.width}),u.plugins.names.length&&(d="plugin-"+u.plugins.names.join(" plugin-"),e.addClass(d),s.addClass(d)),(null===f.maxItems||f.maxItems>1)&&u.tagType===_&&w.attr("multiple","multiple"),u.settings.placeholder&&n.attr("placeholder",f.placeholder),!u.settings.splitOn&&u.settings.delimiter){var k=u.settings.delimiter.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");u.settings.splitOn=new RegExp("\\s*"+k+"+\\s*")}w.attr("autocorrect")&&n.attr("autocorrect",w.attr("autocorrect")),w.attr("autocapitalize")&&n.attr("autocapitalize",w.attr("autocapitalize")),u.$wrapper=e,u.$control=i,u.$control_input=n,u.$dropdown=s,u.$dropdown_content=r,s.on("mouseenter","[data-selectable]",function(){return u.onOptionHover.apply(u,arguments)}),s.on("mousedown click","[data-selectable]",function(){return u.onOptionSelect.apply(u,arguments)}),A(i,"mousedown","*:not(input)",function(){return u.onItemSelect.apply(u,arguments)}),O(n),i.on({mousedown:function(){return u.onMouseDown.apply(u,arguments)},click:function(){return u.onClick.apply(u,arguments)}}),n.on({mousedown:function(t){t.stopPropagation()},keydown:function(){return u.onKeyDown.apply(u,arguments)},keyup:function(){return u.onKeyUp.apply(u,arguments)},keypress:function(){return u.onKeyPress.apply(u,arguments)},resize:function(){u.positionDropdown.apply(u,[])},blur:function(){return u.onBlur.apply(u,arguments)},focus:function(){return u.ignoreBlur=!1,u.onFocus.apply(u,arguments)},paste:function(){return u.onPaste.apply(u,arguments)}}),g.on("keydown"+p,function(t){u.isCmdDown=t[o?"metaKey":"ctrlKey"],u.isCtrlDown=t[o?"altKey":"ctrlKey"],u.isShiftDown=t.shiftKey}),g.on("keyup"+p,function(t){t.keyCode===b&&(u.isCtrlDown=!1),t.keyCode===v&&(u.isShiftDown=!1),t.keyCode===y&&(u.isCmdDown=!1)}),g.on("mousedown"+p,function(t){if(u.isFocused){if(t.target===u.$dropdown[0]||t.target.parentNode===u.$dropdown[0])return!1;u.$control.has(t.target).length||t.target===u.$control[0]||u.blur(t.target)}}),m.on(["scroll"+p,"resize"+p].join(" "),function(){u.isOpen&&u.positionDropdown.apply(u,arguments)}),m.on("mousemove"+p,function(){u.ignoreHover=!1}),this.revertSettings={$children:w.children().detach(),tabindex:w.attr("tabindex")},w.attr("tabindex",-1).hide().after(u.$wrapper),t.isArray(f.items)&&(u.setValue(f.items),delete f.items),x&&w.on("invalid"+p,function(t){t.preventDefault(),u.isInvalid=!0,u.refreshState()}),u.updateOriginalInput(),u.refreshItems(),u.refreshState(),u.updatePlaceholder(),u.isSetup=!0,w.is(":disabled")&&u.disable(),u.on("change",this.onChange),w.data("selectize",u),w.addClass("selectized"),u.trigger("initialize"),f.preload===!0&&u.onSearchChange("")},setupTemplates:function(){var e=this,i=e.settings.labelField,n=e.settings.optgroupLabelField,s={optgroup:function(t){return'<div class="optgroup">'+t.html+"</div>"},optgroup_header:function(t,e){return'<div class="optgroup-header">'+e(t[n])+"</div>"},option:function(t,e){return'<div class="option">'+e(t[i])+"</div>"},item:function(t,e){return'<div class="item">'+e(t[i])+"</div>"},option_create:function(t,e){return'<div class="create">Add <strong>'+e(t.input)+"</strong>&hellip;</div>"}};e.settings.render=t.extend({},s,e.settings.render)},setupCallbacks:function(){var t,e,i={initialize:"onInitialize",change:"onChange",item_add:"onItemAdd",item_remove:"onItemRemove",clear:"onClear",option_add:"onOptionAdd",option_remove:"onOptionRemove",option_clear:"onOptionClear",optgroup_add:"onOptionGroupAdd",optgroup_remove:"onOptionGroupRemove",optgroup_clear:"onOptionGroupClear",dropdown_open:"onDropdownOpen",dropdown_close:"onDropdownClose",type:"onType",load:"onLoad",focus:"onFocus",blur:"onBlur"};for(t in i)i.hasOwnProperty(t)&&(e=this.settings[i[t]],e&&this.on(t,e))},onClick:function(t){var e=this;e.isFocused||(e.focus(),t.preventDefault())},onMouseDown:function(e){var i=this,n=e.isDefaultPrevented();t(e.target);if(i.isFocused){if(e.target!==i.$control_input[0])return"single"===i.settings.mode?i.isOpen?i.close():i.open():n||i.setActiveItem(null),!1}else n||window.setTimeout(function(){i.focus()},0)},onChange:function(){this.$input.trigger("change")},onPaste:function(e){var i=this;return i.isFull()||i.isInputHidden||i.isLocked?void e.preventDefault():void(i.settings.splitOn&&setTimeout(function(){var e=i.$control_input.val();if(e.match(i.settings.splitOn))for(var n=t.trim(e).split(i.settings.splitOn),s=0,o=n.length;s<o;s++)i.createItem(n[s])},0))},onKeyPress:function(t){if(this.isLocked)return t&&t.preventDefault();var e=String.fromCharCode(t.keyCode||t.which);return this.settings.create&&"multi"===this.settings.mode&&e===this.settings.delimiter?(this.createItem(),t.preventDefault(),!1):void 0},onKeyDown:function(t){var e=(t.target===this.$control_input[0],this);if(e.isLocked)return void(t.keyCode!==w&&t.preventDefault());switch(t.keyCode){case r:if(e.isCmdDown)return void e.selectAll();break;case l:return void(e.isOpen&&(t.preventDefault(),t.stopPropagation(),e.close()));case p:if(!t.ctrlKey||t.altKey)break;case f:if(!e.isOpen&&e.hasOptions)e.open();else if(e.$activeOption){e.ignoreHover=!0;var i=e.getAdjacentOption(e.$activeOption,1);i.length&&e.setActiveOption(i,!0,!0)}return void t.preventDefault();case h:if(!t.ctrlKey||t.altKey)break;case d:if(e.$activeOption){e.ignoreHover=!0;var n=e.getAdjacentOption(e.$activeOption,-1);n.length&&e.setActiveOption(n,!0,!0)}return void t.preventDefault();case a:return void(e.isOpen&&e.$activeOption&&(e.onOptionSelect({currentTarget:e.$activeOption}),t.preventDefault()));case c:return void e.advanceSelection(-1,t);case u:return void e.advanceSelection(1,t);case w:return e.settings.selectOnTab&&e.isOpen&&e.$activeOption&&(e.onOptionSelect({currentTarget:e.$activeOption}),e.isFull()||t.preventDefault()),void(e.settings.create&&e.createItem()&&t.preventDefault());case m:case g:return void e.deleteSelection(t)}return!e.isFull()&&!e.isInputHidden||(o?t.metaKey:t.ctrlKey)?void 0:void t.preventDefault()},onKeyUp:function(t){var e=this;if(e.isLocked)return t&&t.preventDefault();var i=e.$control_input.val()||"";e.lastValue!==i&&(e.lastValue=i,e.onSearchChange(i),e.refreshOptions(),e.trigger("type",i))},onSearchChange:function(t){var e=this,i=e.settings.load;i&&(e.loadedSearches.hasOwnProperty(t)||(e.loadedSearches[t]=!0,e.load(function(n){i.apply(e,[t,n])})))},onFocus:function(t){var e=this,i=e.isFocused;return e.isDisabled?(e.blur(),t&&t.preventDefault(),!1):void(e.ignoreFocus||(e.isFocused=!0,"focus"===e.settings.preload&&e.onSearchChange(""),i||e.trigger("focus"),e.$activeItems.length||(e.showInput(),e.setActiveItem(null),e.refreshOptions(!!e.settings.openOnFocus)),e.refreshState()))},onBlur:function(t,e){var i=this;if(i.isFocused&&(i.isFocused=!1,!i.ignoreFocus)){if(!i.ignoreBlur&&document.activeElement===i.$dropdown_content[0])return i.ignoreBlur=!0,void i.onFocus(t);var n=function(){i.close(),i.setTextboxValue(""),i.setActiveItem(null),i.setActiveOption(null),i.setCaret(i.items.length),i.refreshState(),e&&e.focus(),i.ignoreFocus=!1,i.trigger("blur")};i.ignoreFocus=!0,i.settings.create&&i.settings.createOnBlur?i.createItem(null,!1,n):n()}},onOptionHover:function(t){this.ignoreHover||this.setActiveOption(t.currentTarget,!1)},onOptionSelect:function(e){var i,n,s=this;e.preventDefault&&(e.preventDefault(),e.stopPropagation()),n=t(e.currentTarget),n.hasClass("create")?s.createItem(null,function(){s.settings.closeAfterSelect&&s.close()}):(i=n.attr("data-value"),"undefined"!=typeof i&&(s.lastQuery=null,s.setTextboxValue(""),s.addItem(i),s.settings.closeAfterSelect?s.close():!s.settings.hideSelected&&e.type&&/mouse/.test(e.type)&&s.setActiveOption(s.getOption(i))))},onItemSelect:function(t){var e=this;e.isLocked||"multi"===e.settings.mode&&(t.preventDefault(),e.setActiveItem(t.currentTarget,t))},load:function(t){var e=this,i=e.$wrapper.addClass(e.settings.loadingClass);e.loading++,t.apply(e,[function(t){e.loading=Math.max(e.loading-1,0),t&&t.length&&(e.addOption(t),e.refreshOptions(e.isFocused&&!e.isInputHidden)),e.loading||i.removeClass(e.settings.loadingClass),e.trigger("load",t)}])},setTextboxValue:function(t){var e=this.$control_input,i=e.val()!==t;i&&(e.val(t).triggerHandler("update"),this.lastValue=t)},getValue:function(){return this.tagType===_&&this.$input.attr("multiple")?this.items:this.items.join(this.settings.delimiter)},setValue:function(t,e){var i=e?[]:["change"];M(this,i,function(){this.clear(e),this.addItems(t,e)})},setActiveItem:function(e,i){var n,s,o,r,a,l,c,d,h=this;if("single"!==h.settings.mode){if(e=t(e),!e.length)return t(h.$activeItems).removeClass("active"),h.$activeItems=[],void(h.isFocused&&h.showInput());if(n=i&&i.type.toLowerCase(),"mousedown"===n&&h.isShiftDown&&h.$activeItems.length){for(d=h.$control.children(".active:last"),r=Array.prototype.indexOf.apply(h.$control[0].childNodes,[d[0]]),a=Array.prototype.indexOf.apply(h.$control[0].childNodes,[e[0]]),r>a&&(c=r,r=a,a=c),s=r;s<=a;s++)l=h.$control[0].childNodes[s],h.$activeItems.indexOf(l)===-1&&(t(l).addClass("active"),h.$activeItems.push(l));i.preventDefault()}else"mousedown"===n&&h.isCtrlDown||"keydown"===n&&this.isShiftDown?e.hasClass("active")?(o=h.$activeItems.indexOf(e[0]),h.$activeItems.splice(o,1),e.removeClass("active")):h.$activeItems.push(e.addClass("active")[0]):(t(h.$activeItems).removeClass("active"),h.$activeItems=[e.addClass("active")[0]]);h.hideInput(),this.isFocused||h.focus()}},setActiveOption:function(e,i,n){var s,o,r,a,l,c=this;c.$activeOption&&c.$activeOption.removeClass("active"),c.$activeOption=null,e=t(e),e.length&&(c.$activeOption=e.addClass("active"),!i&&C(i)||(s=c.$dropdown_content.height(),o=c.$activeOption.outerHeight(!0),i=c.$dropdown_content.scrollTop()||0,r=c.$activeOption.offset().top-c.$dropdown_content.offset().top+i,a=r,l=r-s+o,r+o>s+i?c.$dropdown_content.stop().animate({scrollTop:l},n?c.settings.scrollDuration:0):r<i&&c.$dropdown_content.stop().animate({scrollTop:a},n?c.settings.scrollDuration:0)))},selectAll:function(){var t=this;"single"!==t.settings.mode&&(t.$activeItems=Array.prototype.slice.apply(t.$control.children(":not(input)").addClass("active")),t.$activeItems.length&&(t.hideInput(),t.close()),t.focus())},hideInput:function(){var t=this;t.setTextboxValue(""),t.$control_input.css({opacity:0,position:"absolute",left:t.rtl?1e4:-1e4}),t.isInputHidden=!0},showInput:function(){this.$control_input.css({opacity:1,position:"relative",left:0}),this.isInputHidden=!1},focus:function(){var t=this;t.isDisabled||(t.ignoreFocus=!0,t.$control_input[0].focus(),window.setTimeout(function(){t.ignoreFocus=!1,t.onFocus()},0))},blur:function(t){this.$control_input[0].blur(),this.onBlur(null,t)},getScoreFunction:function(t){return this.sifter.getScoreFunction(t,this.getSearchOptions())},getSearchOptions:function(){var t=this.settings,e=t.sortField;return"string"==typeof e&&(e=[{field:e}]),{fields:t.searchField,conjunction:t.searchConjunction,sort:e}},search:function(e){var i,n,s,o=this,r=o.settings,a=this.getSearchOptions();if(r.score&&(s=o.settings.score.apply(this,[e]),"function"!=typeof s))throw new Error('Selectize "score" setting must be a function that returns a function');if(e!==o.lastQuery?(o.lastQuery=e,n=o.sifter.search(e,t.extend(a,{score:s})),o.currentResults=n):n=t.extend(!0,{},o.currentResults),r.hideSelected)for(i=n.items.length-1;i>=0;i--)o.items.indexOf(S(n.items[i].id))!==-1&&n.items.splice(i,1);return n},refreshOptions:function(e){var i,s,o,r,a,l,c,d,h,u,f,p,m,g,v,y;"undefined"==typeof e&&(e=!0);var b=this,w=t.trim(b.$control_input.val()),_=b.search(w),k=b.$dropdown_content,x=b.$activeOption&&S(b.$activeOption.attr("data-value"));for(r=_.items.length,"number"==typeof b.settings.maxOptions&&(r=Math.min(r,b.settings.maxOptions)),a={},l=[],i=0;i<r;i++)for(c=b.options[_.items[i].id],d=b.render("option",c),h=c[b.settings.optgroupField]||"",u=t.isArray(h)?h:[h],s=0,o=u&&u.length;s<o;s++)h=u[s],b.optgroups.hasOwnProperty(h)||(h=""),a.hasOwnProperty(h)||(a[h]=document.createDocumentFragment(),l.push(h)),a[h].appendChild(d);for(this.settings.lockOptgroupOrder&&l.sort(function(t,e){var i=b.optgroups[t].$order||0,n=b.optgroups[e].$order||0;return i-n}),f=document.createDocumentFragment(),i=0,r=l.length;i<r;i++)h=l[i],b.optgroups.hasOwnProperty(h)&&a[h].childNodes.length?(p=document.createDocumentFragment(),p.appendChild(b.render("optgroup_header",b.optgroups[h])),p.appendChild(a[h]),f.appendChild(b.render("optgroup",t.extend({},b.optgroups[h],{html:$(p),dom:p})))):f.appendChild(a[h]);if(k.html(f),b.settings.highlight&&_.query.length&&_.tokens.length)for(k.removeHighlight(),i=0,r=_.tokens.length;i<r;i++)n(k,_.tokens[i].regex);if(!b.settings.hideSelected)for(i=0,r=b.items.length;i<r;i++)b.getOption(b.items[i]).addClass("selected");m=b.canCreate(w),m&&(k.prepend(b.render("option_create",{input:w})),y=t(k[0].childNodes[0])),b.hasOptions=_.items.length>0||m,b.hasOptions?(_.items.length>0?(v=x&&b.getOption(x),v&&v.length?g=v:"single"===b.settings.mode&&b.items.length&&(g=b.getOption(b.items[0])),g&&g.length||(g=y&&!b.settings.addPrecedence?b.getAdjacentOption(y,1):k.find("[data-selectable]:first"))):g=y,b.setActiveOption(g),e&&!b.isOpen&&b.open()):(b.setActiveOption(null),e&&b.isOpen&&b.close())},addOption:function(e){var i,n,s,o=this;if(t.isArray(e))for(i=0,n=e.length;i<n;i++)o.addOption(e[i]);else(s=o.registerOption(e))&&(o.userOptions[s]=!0,o.lastQuery=null,o.trigger("option_add",s,e))},registerOption:function(t){var e=S(t[this.settings.valueField]);return"undefined"!=typeof e&&null!==e&&!this.options.hasOwnProperty(e)&&(t.$order=t.$order||++this.order,this.options[e]=t,e)},registerOptionGroup:function(t){var e=S(t[this.settings.optgroupValueField]);return!!e&&(t.$order=t.$order||++this.order,this.optgroups[e]=t,e)},addOptionGroup:function(t,e){e[this.settings.optgroupValueField]=t,(t=this.registerOptionGroup(e))&&this.trigger("optgroup_add",t,e)},removeOptionGroup:function(t){this.optgroups.hasOwnProperty(t)&&(delete this.optgroups[t],this.renderCache={},this.trigger("optgroup_remove",t))},clearOptionGroups:function(){this.optgroups={},this.renderCache={},this.trigger("optgroup_clear")},updateOption:function(e,i){var n,s,o,r,a,l,c,d=this;if(e=S(e),o=S(i[d.settings.valueField]),null!==e&&d.options.hasOwnProperty(e)){if("string"!=typeof o)throw new Error("Value must be set in option data");c=d.options[e].$order,o!==e&&(delete d.options[e],r=d.items.indexOf(e),r!==-1&&d.items.splice(r,1,o)),i.$order=i.$order||c,d.options[o]=i,a=d.renderCache.item,l=d.renderCache.option,a&&(delete a[e],delete a[o]),l&&(delete l[e],delete l[o]),d.items.indexOf(o)!==-1&&(n=d.getItem(e),s=t(d.render("item",i)),n.hasClass("active")&&s.addClass("active"),n.replaceWith(s)),d.lastQuery=null,d.isOpen&&d.refreshOptions(!1)}},removeOption:function(t,e){var i=this;t=S(t);var n=i.renderCache.item,s=i.renderCache.option;n&&delete n[t],s&&delete s[t],delete i.userOptions[t],delete i.options[t],i.lastQuery=null,i.trigger("option_remove",t),i.removeItem(t,e)},clearOptions:function(t){var e=this;e.loadedSearches={},e.userOptions={},e.renderCache={},e.options=e.sifter.items={},e.lastQuery=null,e.trigger("option_clear"),e.clear(t)},getOption:function(t){return this.getElementWithValue(t,this.$dropdown_content.find("[data-selectable]"))},getAdjacentOption:function(e,i){var n=this.$dropdown.find("[data-selectable]"),s=n.index(e)+i;return s>=0&&s<n.length?n.eq(s):t()},getElementWithValue:function(e,i){if(e=S(e),"undefined"!=typeof e&&null!==e)for(var n=0,s=i.length;n<s;n++)if(i[n].getAttribute("data-value")===e)return t(i[n]);return t()},getItem:function(t){return this.getElementWithValue(t,this.$control.children())},addItems:function(e,i){for(var n=t.isArray(e)?e:[e],s=0,o=n.length;s<o;s++)this.isPending=s<o-1,this.addItem(n[s],i)},addItem:function(e,i){var n=i?[]:["change"];M(this,n,function(){var n,s,o,r,a,l=this,c=l.settings.mode;return e=S(e),l.items.indexOf(e)!==-1?void("single"===c&&l.close()):void(l.options.hasOwnProperty(e)&&("single"===c&&l.clear(i),"multi"===c&&l.isFull()||(n=t(l.render("item",l.options[e])),a=l.isFull(),l.items.splice(l.caretPos,0,e),l.insertAtCaret(n),(!l.isPending||!a&&l.isFull())&&l.refreshState(),l.isSetup&&(o=l.$dropdown_content.find("[data-selectable]"),l.isPending||(s=l.getOption(e),r=l.getAdjacentOption(s,1).attr("data-value"),l.refreshOptions(l.isFocused&&"single"!==c),r&&l.setActiveOption(l.getOption(r))),!o.length||l.isFull()?l.close():l.positionDropdown(),l.updatePlaceholder(),l.trigger("item_add",e,n),l.updateOriginalInput({silent:i})))))})},removeItem:function(t,e){var i,n,s,o=this;i="object"==typeof t?t:o.getItem(t),t=S(i.attr("data-value")),n=o.items.indexOf(t),n!==-1&&(i.remove(),i.hasClass("active")&&(s=o.$activeItems.indexOf(i[0]),o.$activeItems.splice(s,1)),o.items.splice(n,1),o.lastQuery=null,!o.settings.persist&&o.userOptions.hasOwnProperty(t)&&o.removeOption(t,e),n<o.caretPos&&o.setCaret(o.caretPos-1),o.refreshState(),o.updatePlaceholder(),o.updateOriginalInput({silent:e}),o.positionDropdown(),o.trigger("item_remove",t,i))},createItem:function(e,i){var n=this,s=n.caretPos;e=e||t.trim(n.$control_input.val()||"");var o=arguments[arguments.length-1];if("function"!=typeof o&&(o=function(){}),"boolean"!=typeof i&&(i=!0),!n.canCreate(e))return o(),!1;n.lock();var r="function"==typeof n.settings.create?this.settings.create:function(t){var e={};return e[n.settings.labelField]=t,e[n.settings.valueField]=t,e},a=D(function(t){if(n.unlock(),!t||"object"!=typeof t)return o();var e=S(t[n.settings.valueField]);return"string"!=typeof e?o():(n.setTextboxValue(""),n.addOption(t),n.setCaret(s),n.addItem(e),n.refreshOptions(i&&"single"!==n.settings.mode),void o(t))}),l=r.apply(this,[e,a]);return"undefined"!=typeof l&&a(l),!0},refreshItems:function(){this.lastQuery=null,this.isSetup&&this.addItem(this.items),this.refreshState(),this.updateOriginalInput()},refreshState:function(){this.refreshValidityState(),this.refreshClasses()},refreshValidityState:function(){if(!this.isRequired)return!1;var t=!this.items.length;this.isInvalid=t,this.$control_input.prop("required",t),this.$input.prop("required",!t)},refreshClasses:function(){var e=this,i=e.isFull(),n=e.isLocked;e.$wrapper.toggleClass("rtl",e.rtl),e.$control.toggleClass("focus",e.isFocused).toggleClass("disabled",e.isDisabled).toggleClass("required",e.isRequired).toggleClass("invalid",e.isInvalid).toggleClass("locked",n).toggleClass("full",i).toggleClass("not-full",!i).toggleClass("input-active",e.isFocused&&!e.isInputHidden).toggleClass("dropdown-active",e.isOpen).toggleClass("has-options",!t.isEmptyObject(e.options)).toggleClass("has-items",e.items.length>0),e.$control_input.data("grow",!i&&!n)},isFull:function(){return null!==this.settings.maxItems&&this.items.length>=this.settings.maxItems},updateOriginalInput:function(t){var e,i,n,s,o=this;if(t=t||{},o.tagType===_){for(n=[],e=0,i=o.items.length;e<i;e++)s=o.options[o.items[e]][o.settings.labelField]||"",n.push('<option value="'+T(o.items[e])+'" selected="selected">'+T(s)+"</option>");n.length||this.$input.attr("multiple")||n.push('<option value="" selected="selected"></option>'),o.$input.html(n.join(""))}else o.$input.val(o.getValue()),o.$input.attr("value",o.$input.val());o.isSetup&&(t.silent||o.trigger("change",o.$input.val()))},updatePlaceholder:function(){if(this.settings.placeholder){var t=this.$control_input;this.items.length?t.removeAttr("placeholder"):t.attr("placeholder",this.settings.placeholder),t.triggerHandler("update",{force:!0})}},open:function(){var t=this;t.isLocked||t.isOpen||"multi"===t.settings.mode&&t.isFull()||(t.focus(),t.isOpen=!0,t.refreshState(),t.$dropdown.css({visibility:"hidden",display:"block"}),t.positionDropdown(),t.$dropdown.css({visibility:"visible"}),t.trigger("dropdown_open",t.$dropdown))},close:function(){var t=this,e=t.isOpen;"single"===t.settings.mode&&t.items.length&&(t.hideInput(),t.$control_input.blur()),t.isOpen=!1,t.$dropdown.hide(),t.setActiveOption(null),t.refreshState(),e&&t.trigger("dropdown_close",t.$dropdown)},positionDropdown:function(){var t=this.$control,e="body"===this.settings.dropdownParent?t.offset():t.position();e.top+=t.outerHeight(!0),this.$dropdown.css({width:t.outerWidth(),top:e.top,left:e.left})},clear:function(t){var e=this;e.items.length&&(e.$control.children(":not(input)").remove(),e.items=[],e.lastQuery=null,e.setCaret(0),e.setActiveItem(null),e.updatePlaceholder(),e.updateOriginalInput({silent:t}),e.refreshState(),e.showInput(),e.trigger("clear"))},insertAtCaret:function(e){var i=Math.min(this.caretPos,this.items.length);0===i?this.$control.prepend(e):t(this.$control[0].childNodes[i]).before(e),this.setCaret(i+1)},deleteSelection:function(e){var i,n,s,o,r,a,l,c,d,h=this;if(s=e&&e.keyCode===m?-1:1,o=I(h.$control_input[0]),h.$activeOption&&!h.settings.hideSelected&&(l=h.getAdjacentOption(h.$activeOption,-1).attr("data-value")),r=[],h.$activeItems.length){for(d=h.$control.children(".active:"+(s>0?"last":"first")),a=h.$control.children(":not(input)").index(d),s>0&&a++,i=0,n=h.$activeItems.length;i<n;i++)r.push(t(h.$activeItems[i]).attr("data-value"));e&&(e.preventDefault(),e.stopPropagation())}else(h.isFocused||"single"===h.settings.mode)&&h.items.length&&(s<0&&0===o.start&&0===o.length?r.push(h.items[h.caretPos-1]):s>0&&o.start===h.$control_input.val().length&&r.push(h.items[h.caretPos]));if(!r.length||"function"==typeof h.settings.onDelete&&h.settings.onDelete.apply(h,[r])===!1)return!1;for("undefined"!=typeof a&&h.setCaret(a);r.length;)h.removeItem(r.pop());return h.showInput(),h.positionDropdown(),h.refreshOptions(!0),l&&(c=h.getOption(l),c.length&&h.setActiveOption(c)),!0},advanceSelection:function(t,e){var i,n,s,o,r,a,l=this;0!==t&&(l.rtl&&(t*=-1),i=t>0?"last":"first",n=I(l.$control_input[0]),l.isFocused&&!l.isInputHidden?(o=l.$control_input.val().length,r=t<0?0===n.start&&0===n.length:n.start===o,r&&!o&&l.advanceCaret(t,e)):(a=l.$control.children(".active:"+i),a.length&&(s=l.$control.children(":not(input)").index(a),l.setActiveItem(null),l.setCaret(t>0?s+1:s))))},advanceCaret:function(t,e){var i,n,s=this;0!==t&&(i=t>0?"next":"prev",s.isShiftDown?(n=s.$control_input[i](),n.length&&(s.hideInput(),s.setActiveItem(n),e&&e.preventDefault())):s.setCaret(s.caretPos+t))},setCaret:function(e){var i=this;if(e="single"===i.settings.mode?i.items.length:Math.max(0,Math.min(i.items.length,e)),!i.isPending){var n,s,o,r;for(o=i.$control.children(":not(input)"),n=0,s=o.length;n<s;n++)r=t(o[n]).detach(),n<e?i.$control_input.before(r):i.$control.append(r)}i.caretPos=e},lock:function(){this.close(),this.isLocked=!0,this.refreshState()},unlock:function(){this.isLocked=!1,this.refreshState()},disable:function(){var t=this;t.$input.prop("disabled",!0),t.$control_input.prop("disabled",!0).prop("tabindex",-1),t.isDisabled=!0,t.lock()},enable:function(){var t=this;t.$input.prop("disabled",!1),t.$control_input.prop("disabled",!1).prop("tabindex",t.tabIndex),t.isDisabled=!1,t.unlock()},destroy:function(){var e=this,i=e.eventNS,n=e.revertSettings;e.trigger("destroy"),e.off(),e.$wrapper.remove(),e.$dropdown.remove(),e.$input.html("").append(n.$children).removeAttr("tabindex").removeClass("selectized").attr({tabindex:n.tabindex}).show(),e.$control_input.removeData("grow"),e.$input.removeData("selectize"),t(window).off(i),t(document).off(i),t(document.body).off(i),delete e.$input[0].selectize},render:function(e,i){var n,s,o="",r=!1,a=this;return"option"!==e&&"item"!==e||(n=S(i[a.settings.valueField]),r=!!n),r&&(C(a.renderCache[e])||(a.renderCache[e]={}),a.renderCache[e].hasOwnProperty(n))?a.renderCache[e][n]:(o=t(a.settings.render[e].apply(this,[i,T])),"option"===e||"option_create"===e?o.attr("data-selectable",""):"optgroup"===e&&(s=i[a.settings.optgroupValueField]||"",o.attr("data-group",s)),"option"!==e&&"item"!==e||o.attr("data-value",n||""),r&&(a.renderCache[e][n]=o[0]),o[0])},clearCache:function(t){var e=this;"undefined"==typeof t?e.renderCache={}:delete e.renderCache[t]},canCreate:function(t){var e=this;if(!e.settings.create)return!1;var i=e.settings.createFilter;return t.length&&("function"!=typeof i||i.apply(e,[t]))&&("string"!=typeof i||new RegExp(i).test(t))&&(!(i instanceof RegExp)||i.test(t))}}),F.count=0,F.defaults={options:[],optgroups:[],plugins:[],delimiter:",",splitOn:null,persist:!0,diacritics:!0,create:!1,createOnBlur:!1,createFilter:null,highlight:!0,openOnFocus:!0,maxOptions:1e3,maxItems:null,hideSelected:null,addPrecedence:!1,selectOnTab:!1,preload:!1,allowEmptyOption:!1,closeAfterSelect:!1,scrollDuration:60,loadThrottle:300,loadingClass:"loading",dataAttr:"data-data",optgroupField:"optgroup",valueField:"value",labelField:"text",optgroupLabelField:"label",optgroupValueField:"value",lockOptgroupOrder:!1,sortField:"$order",searchField:["text"],searchConjunction:"and",mode:null,wrapperClass:"selectize-control",inputClass:"selectize-input",dropdownClass:"selectize-dropdown",dropdownContentClass:"selectize-dropdown-content",dropdownParent:null,copyClassesToDropdown:!0,render:{}},t.fn.selectize=function(e){var i=t.fn.selectize.defaults,n=t.extend({},i,e),s=n.dataAttr,o=n.labelField,r=n.valueField,a=n.optgroupField,l=n.optgroupLabelField,c=n.optgroupValueField,d=function(e,i){var a,l,c,d,h=e.attr(s);if(h)for(i.options=JSON.parse(h),a=0,l=i.options.length;a<l;a++)i.items.push(i.options[a][r]);else{var u=t.trim(e.val()||"");if(!n.allowEmptyOption&&!u.length)return;for(c=u.split(n.delimiter),a=0,l=c.length;a<l;a++)d={},d[o]=c[a],d[r]=c[a],i.options.push(d);i.items=c}},h=function(e,i){var d,h,u,f,p=i.options,m={},g=function(t){var e=s&&t.attr(s);return"string"==typeof e&&e.length?JSON.parse(e):null},v=function(e,s){e=t(e);var l=S(e.val());
if(l||n.allowEmptyOption)if(m.hasOwnProperty(l)){if(s){var c=m[l][a];c?t.isArray(c)?c.push(s):m[l][a]=[c,s]:m[l][a]=s}}else{var d=g(e)||{};d[o]=d[o]||e.text(),d[r]=d[r]||l,d[a]=d[a]||s,m[l]=d,p.push(d),e.is(":selected")&&i.items.push(l)}},y=function(e){var n,s,o,r,a;for(e=t(e),o=e.attr("label"),o&&(r=g(e)||{},r[l]=o,r[c]=o,i.optgroups.push(r)),a=t("option",e),n=0,s=a.length;n<s;n++)v(a[n],o)};for(i.maxItems=e.attr("multiple")?null:1,f=e.children(),d=0,h=f.length;d<h;d++)u=f[d].tagName.toLowerCase(),"optgroup"===u?y(f[d]):"option"===u&&v(f[d])};return this.each(function(){if(!this.selectize){var s,o=t(this),r=this.tagName.toLowerCase(),a=o.attr("placeholder")||o.attr("data-placeholder");a||n.allowEmptyOption||(a=o.children('option[value=""]').text());var l={placeholder:a,options:[],optgroups:[],items:[]};"select"===r?h(o,l):d(o,l),s=new F(o,t.extend(!0,{},i,l,e))}})},t.fn.selectize.defaults=F.defaults,t.fn.selectize.support={validity:x},F.define("drag_drop",function(){if(!t.fn.sortable)throw new Error('The "drag_drop" plugin requires jQuery UI "sortable".');if("multi"===this.settings.mode){var e=this;e.lock=function(){var t=e.lock;return function(){var i=e.$control.data("sortable");return i&&i.disable(),t.apply(e,arguments)}}(),e.unlock=function(){var t=e.unlock;return function(){var i=e.$control.data("sortable");return i&&i.enable(),t.apply(e,arguments)}}(),e.setup=function(){var i=e.setup;return function(){i.apply(this,arguments);var n=e.$control.sortable({items:"[data-value]",forcePlaceholderSize:!0,disabled:e.isLocked,start:function(t,e){e.placeholder.css("width",e.helper.css("width")),n.css({overflow:"visible"})},stop:function(){n.css({overflow:"hidden"});var i=e.$activeItems?e.$activeItems.slice():null,s=[];n.children("[data-value]").each(function(){s.push(t(this).attr("data-value"))}),e.setValue(s),e.setActiveItem(i)}})}}()}}),F.define("dropdown_header",function(e){var i=this;e=t.extend({title:"Untitled",headerClass:"selectize-dropdown-header",titleRowClass:"selectize-dropdown-header-title",labelClass:"selectize-dropdown-header-label",closeClass:"selectize-dropdown-header-close",html:function(t){return'<div class="'+t.headerClass+'"><div class="'+t.titleRowClass+'"><span class="'+t.labelClass+'">'+t.title+'</span><a href="javascript:void(0)" class="'+t.closeClass+'">&times;</a></div></div>'}},e),i.setup=function(){var n=i.setup;return function(){n.apply(i,arguments),i.$dropdown_header=t(e.html(e)),i.$dropdown.prepend(i.$dropdown_header)}}()}),F.define("optgroup_columns",function(e){var i=this;e=t.extend({equalizeWidth:!0,equalizeHeight:!0},e),this.getAdjacentOption=function(e,i){var n=e.closest("[data-group]").find("[data-selectable]"),s=n.index(e)+i;return s>=0&&s<n.length?n.eq(s):t()},this.onKeyDown=function(){var t=i.onKeyDown;return function(e){var n,s,o,r;return!this.isOpen||e.keyCode!==c&&e.keyCode!==u?t.apply(this,arguments):(i.ignoreHover=!0,r=this.$activeOption.closest("[data-group]"),n=r.find("[data-selectable]").index(this.$activeOption),r=e.keyCode===c?r.prev("[data-group]"):r.next("[data-group]"),o=r.find("[data-selectable]"),s=o.eq(Math.min(o.length-1,n)),void(s.length&&this.setActiveOption(s)))}}();var n=function(){var t,e=n.width,i=document;return"undefined"==typeof e&&(t=i.createElement("div"),t.innerHTML='<div style="width:50px;height:50px;position:absolute;left:-50px;top:-50px;overflow:auto;"><div style="width:1px;height:100px;"></div></div>',t=t.firstChild,i.body.appendChild(t),e=n.width=t.offsetWidth-t.clientWidth,i.body.removeChild(t)),e},s=function(){var s,o,r,a,l,c,d;if(d=t("[data-group]",i.$dropdown_content),o=d.length,o&&i.$dropdown_content.width()){if(e.equalizeHeight){for(r=0,s=0;s<o;s++)r=Math.max(r,d.eq(s).height());d.css({height:r})}e.equalizeWidth&&(c=i.$dropdown_content.innerWidth()-n(),a=Math.round(c/o),d.css({width:a}),o>1&&(l=c-a*(o-1),d.eq(o-1).css({width:l})))}};(e.equalizeHeight||e.equalizeWidth)&&(E.after(this,"positionDropdown",s),E.after(this,"refreshOptions",s))}),F.define("remove_button",function(e){e=t.extend({label:"&times;",title:"Remove",className:"remove",append:!0},e);var i=function(e,i){i.className="remove-single";var n=e,s='<a href="javascript:void(0)" class="'+i.className+'" tabindex="-1" title="'+T(i.title)+'">'+i.label+"</a>",o=function(t,e){return t+e};e.setup=function(){var r=n.setup;return function(){if(i.append){var a=t(n.$input.context).attr("id"),l=(t("#"+a),n.settings.render.item);n.settings.render.item=function(){return o(l.apply(e,arguments),s)}}r.apply(e,arguments),e.$control.on("click","."+i.className,function(t){t.preventDefault(),n.isLocked||n.clear()})}}()},n=function(e,i){var n=e,s='<a href="javascript:void(0)" class="'+i.className+'" tabindex="-1" title="'+T(i.title)+'">'+i.label+"</a>",o=function(t,e){var i=t.search(/(<\/[^>]+>\s*)$/);return t.substring(0,i)+e+t.substring(i)};e.setup=function(){var r=n.setup;return function(){if(i.append){var a=n.settings.render.item;n.settings.render.item=function(){return o(a.apply(e,arguments),s)}}r.apply(e,arguments),e.$control.on("click","."+i.className,function(e){if(e.preventDefault(),!n.isLocked){var i=t(e.currentTarget).parent();n.setActiveItem(i),n.deleteSelection()&&n.setCaret(n.items.length)}})}}()};return"single"===this.settings.mode?void i(this,e):void n(this,e)}),F.define("restore_on_backspace",function(t){var e=this;t.text=t.text||function(t){return t[this.settings.labelField]},this.onKeyDown=function(){var i=e.onKeyDown;return function(e){var n,s;return e.keyCode===m&&""===this.$control_input.val()&&!this.$activeItems.length&&(n=this.caretPos-1,n>=0&&n<this.items.length)?(s=this.options[this.items[n]],this.deleteSelection(e)&&(this.setTextboxValue(t.text.apply(this,[s])),this.refreshOptions(!0)),void e.preventDefault()):i.apply(this,arguments)}}()}),F}),Selectize.define("fsSelectize",function(){"use strict";function t(t){var i,n=$(e.$control[0]).find(".fsNumSelected");i=t+" selected",n.length?t>0?n.html(i):n.remove():e.$control.prepend('<div class="fsNumSelected">'+i+"</div>")}var e=this,i=37,n=39,s=8,o=46;e.onKeyDown=function(){var t=e.onKeyDown;return function(r){switch(r.keyCode){case s:case o:"single"==e.settings.mode?e.clear():$(r.target.parentElement).find(".active").length>0&&(e.clear(),e.trigger("item_remove","multiselect-none"));break;case i:case n:return;default:return t.apply(e,[r])}}}(),e.onOptionSelect=function(){var i=e.onOptionSelect,n=!1;return function(s){var o;if(s.preventDefault&&(s.preventDefault(),s.stopPropagation()),"mousedown"==s.type)n=!0;else if("click"==s.type&&n)return void(n=!1);if(o=$(s.currentTarget),o.hasClass("selected")){if("single"==e.settings.mode)return;e.removeItem(o),o.removeClass("selected"),e.refreshOptions(),t(e.items.length),e.positionDropdown()}else{var r=o.attr("data-value");"selectAll"==r?(e.addAllItems(),e.trigger("item_add","multiselect-all","x")):"selectNone"==r?(e.clear(),$(e.$dropdown_content[0]).find(".option.selected").removeClass("selected"),e.trigger("item_remove","multiselect-none")):i.apply(e,[s])}}}(),e.refreshOptions=function(){var t=e.refreshOptions;return function(i){if(t.apply(e,[i]),"multi"==e.settings.mode&&0==e.$control_input.val().length){var n,s=$(e)[0].$input.data("maxitems"),o=$(e.$dropdown_content[0]).find(".option:not(.fsSelectAll)").length;o==e.items.length?n="None":(null==s||o<s)&&(n="All"),n&&$('<div class="fsSelectAll option" data-selectable="" data-value="select'+n+'"> - Select '+n+" - </div>").prependTo(e.$dropdown_content)}var r=$.map(e.items,function(t){return e.options[t].text});$(e.$control).prop("title",r.join(", "))}}(),e.addItem=function(){var t=e.addItem;return function(){if("multi"==e.settings.mode){if(e.isFull())return void alert("This field is limited to "+e.settings.maxItems+" items.");var i=e.settings.maxItems;e.settings.maxItems=null,t.apply(e,arguments),e.settings.maxItems=i}else t.apply(e,arguments)}}(),e.open=function(){var t=e.open;return function(){var i=e.settings.maxItems;e.settings.maxItems=null,t.apply(e),e.settings.maxItems=i}}(),e.insertAtCaret=function(){return function(){t(e.items.length)}}(),e.clear=function(){var t=e.clear;return function(){var i=e.items.length;t.apply(e,arguments),i&&(e.refreshOptions(),e.positionDropdown())}}(),e.addAllItems=function(){var i;$(e.$dropdown_content[0]).find(".option:not(.selected, .fsSelectAll)").each(function(t,n){i=$(n).attr("data-value"),e.items.indexOf(i)==-1&&e.options.hasOwnProperty(i)&&!e.isFull()&&e.items.splice(e.caretPos,0,i)}),t(e.items.length),e.refreshState(),e.positionDropdown(),e.updatePlaceholder(),e.updateOriginalInput(),e.refreshOptions()}}),function(t,e,i){"use strict";function n(t,e){if(!(t.length<=1)){var i=o('<span id="fsPagePopDotsContainer"></span>'),n=o('<button data-role="none" id="fsPagePopNextButton" aria-label="Next" tabindex="0" role="button"><span>&#8250;</span></button>'),s=o('<button data-role="none" id="fsPagePopPrevButton" aria-label="Previous" tabindex="0" role="button"><span>&#8249;</span></button>'),r=t.parent();return o('<div id="fsPagePopPaging"></div>').append(s).append(i).append(n).prependTo(e),r.slick({appendDots:i,dots:!0,dotsClass:"fsPagePopDots",infinite:!1,nextArrow:n,prevArrow:s}),r}}function s(t){return"page_pop_"+t.data("id")}var o=t.$,r=t.getInternalNS("dialogs"),a=i.getElementById("fsPagePopCollection"),l=t.getInternalNS("elements.utils").inDraftMode(),c=t.localStorage;a&&o(function(){var t,d,h=o('<div id="fsPagePopControls"></div>'),u=o(a),f=u.find(".fsPagePop"),p=r.Dialog({dialogClass:"fsPagePopDialog",id:"fsPagePop",removeOnClose:!1}),m=!1;if(f.length){if(o('<button id="fsPagePopNotification" aria-label="View Page Pops"><span>'+f.length+"</span></button>").appendTo(i.body).click(function(){p.open(o(this)),t||(t=n(f,h)),o(e).trigger("resize",{forceUpdate:!0})}),o('<button id="fsPagePopHideButton">Don\'t Show Again</button>').appendTo(h).click(function(){var e;e=t?t.find(".slick-current"):f,c.setItem(s(e),new Date),p.close()}),f.length>1)d=f.get().sort(function(t,e){var i,n,r=o(t),a=o(e),l=c.getItem(s(r)),d=c.getItem(s(a)),h=!!l,u=!!d,f=r.data("reset-at"),p=a.data("reset-at");return f&&h&&new Date(f)>new Date(l)&&(h=!1),p&&u&&new Date(p)>new Date(d)&&(u=!1),m=m||!h||!u,h==u?(i=new Date(r.data("visible-at")),n=new Date(a.data("visible-at")),n-i):l?1:-1});else{var g=f.first(),v=c.getItem(s(g)),y=!!v,b=g.data("reset-at");m=!y||new Date(b)>new Date(v),d=f}f=o(d),u.empty().append(f),p.setContent(a),a.hidden=!1,p.addContent(h),!l&&m&&(p.open(o(i.body)),t=n(f,h),o(e).trigger("resize",{forceUpdate:!0}))}})}(FS,window,document),function(t){"use strict";var e,i=t.$,n=t.getNS("SSO"),s="fsStateLoaded";n.embedFaria=function(){var t=i(".fsFariaLinks:not(."+s+")");t.length&&(e||(e=i.get("/fs/sso/fariaLinks.cfm")),e.done(function(e){t.addClass(s).html(e)}))}}(FS),window.jQuery=FS._jQueryTemp;