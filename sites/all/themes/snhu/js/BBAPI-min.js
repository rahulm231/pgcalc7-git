var BLACKBAUD=BLACKBAUD||{};BLACKBAUD.api={};(function(){BLACKBAUD.api.querystring={getQueryStringValue:function(h,f){var g,e;if(!f){f=window.location.search}f=f.toLowerCase();g=new RegExp("[?|&]"+h+"=(.*?)&");e=g.exec(f+"&");if(!e||e.length<2){return""}return decodeURIComponent(e[1].replace("+"," "))}};BLACKBAUD.api.pageInformation={rootPath:"",pageId:""};var c=[];function a(e){if(!c[e]){c[e]=new easyXDM.Rpc({remote:e+"client/scripts/easyXDM/cors/index.html"},{remote:{ajax:{}}})}return c[e]}function b(e,h,g,f){if(h==="success"){if(g){g($.parseJSON(e.responseText))}}else{if(e.status===400){if(f){f($.parseJSON(e.responseText))}}else{if(f){f()}}}}function d(h,g,e,f){if(g){g.ajax(h,function(i){b(i.jqXHR,i.textStatus,e,f)},function(){f()})}else{h.complete=function(i,j){b(i,j,e,f)};$.ajax(h)}}(function(){BLACKBAUD.api.CountryService=function(g){var e,f;if(typeof g==="string"){f=g}else{if(typeof g==="object"){f=g.url;e=g.crossDomain}}if(!f){f=BLACKBAUD.api.pageInformation.rootPath}if(e){this._rpc=a(f)}this.baseUrl=f+"WebApi"};BLACKBAUD.api.CountryService.prototype={getCountries:function(e,g){var f=this.baseUrl+"/Country";d({url:f,type:"GET"},this._rpc,e,g)},getStates:function(g,e,h){var f=this.baseUrl+"/Country/"+g+"/State";d({url:f,type:"GET"},this._rpc,e,h)},getAddressCaptions:function(g,e,h){var f=this.baseUrl+"/Country/"+g+"/AddressCaptions";d({url:f,type:"GET"},this._rpc,e,h)}}}());(function(){BLACKBAUD.api.CodeTableService=function(g){var e,f;if(typeof g==="string"){f=g}else{if(typeof g==="object"){f=g.url;e=g.crossDomain}}if(!f){f=BLACKBAUD.api.pageInformation.rootPath}if(e){this._rpc=a(f)}this.baseUrl=f+"WebApi"};BLACKBAUD.api.CodeTableService.prototype={getEntries:function(h,e,f){var g=this.baseUrl+"/CodeTable/"+h;d({url:g,type:"GET"},this._rpc,e,f)}}}());(function(){BLACKBAUD.api.QueryService=function(g){var e,f;if(typeof g==="string"){f=g}else{if(typeof g==="object"){f=g.url;e=g.crossDomain}}if(!f){f=BLACKBAUD.api.pageInformation.rootPath}if(e){this._rpc=a(f)}this.baseUrl=f+"WebApi"};BLACKBAUD.api.QueryService.prototype={getResults:function(g,l,e,k){var n,f,j,h,o,m=this.baseUrl+"/Query/"+g;if(k){o="";for(f=0;f<k.length;f++){j=k[f];n=j.columnName;h=j.value;if(n&&h){if(o.length>0){o+="&"}o+=encodeURIComponent(n)+"="+encodeURIComponent(h)}}if(o.length>0){m+="?"+o}}d({url:m,type:"GET"},this._rpc,l,e)}}}());(function(){BLACKBAUD.api.UserService=function(g){var e,f;if(typeof g==="string"){f=g}else{if(typeof g==="object"){f=g.url;e=g.crossDomain}}if(!f){f=BLACKBAUD.api.pageInformation.rootPath}if(e){this._rpc=a(f)}this.baseUrl=f+"WebApi"};BLACKBAUD.api.UserService.prototype={getProfile:function(e,g){var f=this.baseUrl+"/User";d({url:f,type:"GET"},this._rpc,e,g)}}}());(function(){BLACKBAUD.api.ImageService=function(g){var e,f;if(typeof g==="string"){f=g}else{if(typeof g==="object"){f=g.url;e=g.crossDomain}}if(!f){f=BLACKBAUD.api.pageInformation.rootPath}if(e){this._rpc=a(f)}this.baseUrl=f+"WebApi"};BLACKBAUD.api.ImageService.prototype={getImagesByFolderGUID:function(f,e,h){var g=this.baseUrl+"/Images?FolderGUID="+encodeURIComponent(f);d({url:g,type:"GET"},this._rpc,e,h)},getImagesByTag:function(e,f,h){var g=this.baseUrl+"/Images?Tag="+encodeURIComponent(e);d({url:g,type:"GET"},this._rpc,f,h)},getImagesByFolder:function(h,e,g){var f=this.baseUrl+"/Images/"+encodeURIComponent(h);d({url:f,type:"GET"},this._rpc,e,g)}}}())}());
(function(){var d,h,f;d=500;function c(i,j){var k="BBElementBlock";if(!i){i="Processing..."}if(j){k+=" BBPageBlock"}return{message:"<div class='"+k+"'><span>"+i+"</span></div>",overlayCSS:{backgroundColor:"#CCCCCC"}}}f=[];function b(i){if(i){if(typeof i==="string"){return document.getElementById(i)}else{if(i instanceof $){return i[0]}}return i.dom||i}return null}function g(k){var j,l;j=f.length;while(j--){l=f[j];if(l.el===k){return l}}}function a(j){var i;i={el:j,waitCount:0};f.push(i);return i}function e(j){var k;k=f.length;while(k--){if(j===f[k]){f.splice(k,1);break}}}BLACKBAUD.api.blockElement=function(l,k,i){var j,m;$.blockUI.defaults.css={};if(i===false||i===0){i=0}else{i=i||d}l=b(l);m=g(l);if(!m){m=a(l);if(l){j=setTimeout(function(){$(l).block(c(k,false))},i)}else{j=setTimeout(function(){$.blockUI(c(k,true))},i)}m.delayHandle=j}m.waitCount++};BLACKBAUD.api.unblockElement=function(j){var i,k;j=b(j);k=g(j);if(k){k.waitCount--;if(k.waitCount===0){i=k.delayHandle;if(i){clearTimeout(i);k.delayHandle=null}if(j){$(j).unblock()}else{$.unblockUI()}e(k)}}}})();
(function(){function a(f){return f.baseUrl+"WebApi/"+f.contextId+"/Donation"}var d=[];function b(f){if(!d[f]){if(window.easyXDM){d[f]=new easyXDM.Rpc({remote:f+"client/scripts/easyXDM/cors/index.html"},{remote:{ajax:{}}})}}return d[f]}function c(f,i,h,g){if(i==="success"){if(h){h($.parseJSON(f.responseText))}}else{if(f.status===400){if(g){g($.parseJSON(f.responseText))}}else{if(g){g()}}}}function e(j,i,g,h){function f(k){if(h){if(k&&k.data){h(k.data)}else{h()}}}if(i){i.ajax(j,function(k){c(k.jqXHR,k.textStatus,g,f)},function(){h()})}else{j.complete=function(k,l){c(k,l,g,h)};$.ajax(j)}}BLACKBAUD.api.DonationService=function(g,i){var f,h;if(typeof i==="string"){h=i}else{if(typeof i==="object"){h=i.url;f=i.crossDomain}}if(!h){h=BLACKBAUD.api.pageInformation.rootPath}if(f){this._rpc=b(h)}this.baseUrl=h;this.contextId=g};BLACKBAUD.api.DonationService.prototype={createDonation:function(h,f,i){var g=a(this)+"/Create";function j(k){if(j){f(k)}if(k.BBSPCheckoutUri){location.href=k.BBSPCheckoutUri}else{if(k.PaymentPageUri){location.href=k.PaymentPageUri}}}e({url:g,type:"POST",data:JSON.stringify(h),contentType:"application/json"},this._rpc,j,i)},getDonation:function(g,f,i){var h=a(this)+"/"+g;e({url:h,type:"GET"},this._rpc,f,i)},completeBBSPDonation:function(g,f,i){var h=a(this)+"/"+g+"/CompleteBBSPDonation";e({url:h,type:"POST"},this._rpc,f,i)},getDonationConfirmationHtml:function(g,f,i){var h=a(this)+"/"+g+"/ConfirmationHtml";e({url:h,type:"GET"},this._rpc,f,i)}}}());
